(self.webpackChunkPortal=self.webpackChunkPortal||[]).push([[179],{2816:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{hO:()=>gt,xv:()=>We,Dh:()=>Et,Ot:()=>qe,HU:()=>at,GT:()=>wt,sI:()=>tt,on:()=>Rt,ss:()=>Le,pX:()=>ut,yq:()=>Un});var u=Z(4408),Ee=Z(7565);const Te=new class ve extends Ee.v{}(class me extends u.o{constructor(kt,Vt){super(kt,Vt),this.scheduler=kt,this.work=Vt}schedule(kt,Vt=0){return Vt>0?super.schedule(kt,Vt):(this.delay=Vt,this.state=kt,this.scheduler.flush(this),this)}execute(kt,Vt){return Vt>0||this.closed?super.execute(kt,Vt):this._execute(kt,Vt)}requestAsyncId(kt,Vt,An=0){return null!=An&&An>0||null==An&&this.delay>0?super.requestAsyncId(kt,Vt,An):kt.flush(this)}});var fe=Z(4986),we=Z(8505),ce=Z(9468),ue=Z(5363),pe=Z(5e3),_e=Z(5867);function Ge(){}ft=Z.hmd(ft);class ye{constructor(kt,Vt=Te){this.zone=kt,this.delegate=Vt}now(){return this.delegate.now()}schedule(kt,Vt,An){const Kt=this.zone;return this.delegate.schedule(function(tn){Kt.runGuarded(()=>{kt.apply(this,[tn])})},Vt,An)}}class Ae{constructor(kt){this.zone=kt,this.task=null}call(kt,Vt){const An=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ge,{},Ge,Ge)),Vt.pipe((0,we.b)({next:An,complete:An,error:An})).subscribe(kt).add(An)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class at{constructor(kt){this.ngZone=kt,this.outsideAngular=kt.runOutsideAngular(()=>new ye(Zone.current)),this.insideAngular=kt.run(()=>new ye(Zone.current,fe.z))}}function Le(Se){return function(Vt){return(Vt=Vt.lift(new Ae(Se.ngZone))).pipe((0,ce.R)(Se.outsideAngular),(0,ue.Q)(Se.insideAngular))}}const mt=["ngOnDestroy"],ut=(Se,kt,Vt,An={})=>new Proxy(Se,{get:(Kt,cn)=>Vt.runOutsideAngular(()=>{var tn;if(Se[cn])return(null===(tn=null==An?void 0:An.spy)||void 0===tn?void 0:tn.get)&&An.spy.get(cn,Se[cn]),Se[cn];if(mt.indexOf(cn)>-1)return()=>{};const St=kt.toPromise().then(On=>{const pn=On&&On[cn];return"function"==typeof pn?pn.bind(On):pn&&pn.then?pn.then(sr=>Vt.run(()=>sr)):Vt.run(()=>pn)});return new Proxy(()=>{},{get:(On,pn)=>St[pn],apply:(On,pn,sr)=>St.then(mr=>{var Ni;const Zo=mr&&mr(...sr);return(null===(Ni=null==An?void 0:An.spy)||void 0===Ni?void 0:Ni.apply)&&An.spy.apply(cn,sr,Zo),Zo})})})}),wt=(Se,kt)=>{kt.forEach(Vt=>{Object.getOwnPropertyNames(Vt.prototype||Vt).forEach(An=>{Object.defineProperty(Se.prototype,An,Object.getOwnPropertyDescriptor(Vt.prototype||Vt,An))})})},Et=new pe.OlP("angularfire2.app.options"),We=new pe.OlP("angularfire2.app.nameOrConfig");class qe{}const Bt=new pe.GfV("6.1.5");function Rt(Se,kt,Vt){const Kt="object"==typeof Vt&&Vt||{};Kt.name=Kt.name||"string"==typeof Vt&&Vt||"[DEFAULT]";const tn=_e.Z.apps.filter(St=>St&&St.name===Kt.name)[0]||kt.runOutsideAngular(()=>_e.Z.initializeApp(Se,Kt));try{JSON.stringify(Se)!==JSON.stringify(tn.options)&&Fe("error",`${tn.name} Firebase App already initialized with different options${ft.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(St){}return tn}const Un=()=>{Fe("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},Fe=(Se,...kt)=>{(0,pe.X6Q)()&&"undefined"!=typeof console&&console[Se](...kt)};function tt(Se,kt,Vt,An,Kt){const[cn,...tn]=globalThis.\u0275AngularfireInstanceCache.get(Se)||[];if(cn){try{Kt.some((St,On)=>{const pn=tn[On];return St&&"object"==typeof St?JSON.stringify(St)!==JSON.stringify(pn):St!==pn})&&Fe("error",`${kt} was already initialized on the ${Vt.name} Firebase App instance with different settings.${ft.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(St){}return cn}{const St=An();return globalThis.\u0275AngularfireInstanceCache.set(Se,[St,...Kt]),St}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const Je={provide:qe,useFactory:Rt,deps:[Et,pe.R0b,[new pe.FiY,We]]};let gt=(()=>{class Se{constructor(Vt){_e.Z.registerVersion("angularfire",Bt.full,Vt.toString()),_e.Z.registerVersion("angular",pe.q4F.full)}static initializeApp(Vt,An){return{ngModule:Se,providers:[{provide:Et,useValue:Vt},{provide:We,useValue:An}]}}}return Se.\u0275fac=function(Vt){return new(Vt||Se)(pe.LFG(pe.Lbi))},Se.\u0275mod=pe.oAB({type:Se}),Se.\u0275inj=pe.cJS({providers:[Je]}),Se})()},8367:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{Z:()=>cn});var Te,We,u=Z(655),me=Z(492),Ee=Z(2461),ve=Z(4003),ze=((Te={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Te["bad-app-name"]="Illegal App name: '{$appName}",Te["duplicate-app"]="Firebase App named '{$appName}' already exists",Te["app-deleted"]="Firebase App named '{$appName}' already deleted",Te["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Te["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Te),fe=new me.LL("app","Firebase",ze),we="@firebase/app",qe="[DEFAULT]",Bt=((We={})[we]="fire-core",We["@firebase/analytics"]="fire-analytics",We["@firebase/app-check"]="fire-app-check",We["@firebase/auth"]="fire-auth",We["@firebase/database"]="fire-rtdb",We["@firebase/functions"]="fire-fn",We["@firebase/installations"]="fire-iid",We["@firebase/messaging"]="fire-fcm",We["@firebase/performance"]="fire-perf",We["@firebase/remote-config"]="fire-rc",We["@firebase/storage"]="fire-gcs",We["@firebase/firestore"]="fire-fst",We["fire-js"]="fire-js",We["firebase-wrapper"]="fire-js-all",We),Rt=new ve.Yd("@firebase/app"),Un=function(){function tn(St,On,pn){var sr=this;this.firebase_=pn,this.isDeleted_=!1,this.name_=On.name,this.automaticDataCollectionEnabled_=On.automaticDataCollectionEnabled||!1,this.options_=(0,me.p$)(St),this.container=new Ee.H0(On.name),this._addComponent(new Ee.wA("app",function(){return sr},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(mr){return sr._addComponent(mr)})}return Object.defineProperty(tn.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(St){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=St},enumerable:!1,configurable:!0}),Object.defineProperty(tn.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(tn.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),tn.prototype.delete=function(){var St=this;return new Promise(function(On){St.checkDestroyed_(),On()}).then(function(){return St.firebase_.INTERNAL.removeApp(St.name_),Promise.all(St.container.getProviders().map(function(On){return On.delete()}))}).then(function(){St.isDeleted_=!0})},tn.prototype._getService=function(St,On){var pn;void 0===On&&(On=qe),this.checkDestroyed_();var sr=this.container.getProvider(St);return!sr.isInitialized()&&"EXPLICIT"===(null===(pn=sr.getComponent())||void 0===pn?void 0:pn.instantiationMode)&&sr.initialize(),sr.getImmediate({identifier:On})},tn.prototype._removeServiceInstance=function(St,On){void 0===On&&(On=qe),this.container.getProvider(St).clearInstance(On)},tn.prototype._addComponent=function(St){try{this.container.addComponent(St)}catch(On){Rt.debug("Component "+St.name+" failed to register with FirebaseApp "+this.name,On)}},tn.prototype._addOrOverwriteComponent=function(St){this.container.addOrOverwriteComponent(St)},tn.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},tn.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw fe.create("app-deleted",{appName:this.name_})},tn}();Un.prototype.name&&Un.prototype.options||Un.prototype.delete||console.log("dc");var Je=function tt(){var tn=function Xe(tn){var St={},On=new Map,pn={__esModule:!0,initializeApp:function Ni(hi,fi){void 0===fi&&(fi={}),("object"!=typeof fi||null===fi)&&(fi={name:fi});var hn=fi;void 0===hn.name&&(hn.name=qe);var Mr=hn.name;if("string"!=typeof Mr||!Mr)throw fe.create("bad-app-name",{appName:String(Mr)});if((0,me.r3)(St,Mr))throw fe.create("duplicate-app",{appName:Mr});var _r=new tn(hi,hn,pn);return St[Mr]=_r,_r},app:mr,registerVersion:function nc(hi,fi,vs){var hn,Mr=null!==(hn=Bt[hi])&&void 0!==hn?hn:hi;vs&&(Mr+="-"+vs);var _r=Mr.match(/\s|\//),or=fi.match(/\s|\//);if(_r||or){var Rs=['Unable to register library "'+Mr+'" with version "'+fi+'":'];return _r&&Rs.push('library name "'+Mr+'" contains illegal characters (whitespace or "/")'),_r&&or&&Rs.push("and"),or&&Rs.push('version name "'+fi+'" contains illegal characters (whitespace or "/")'),void Rt.warn(Rs.join(" "))}Fa(new Ee.wA(Mr+"-version",function(){return{library:Mr,version:fi}},"VERSION"))},setLogLevel:ve.Ub,onLog:function ed(hi,fi){if(null!==hi&&"function"!=typeof hi)throw fe.create("invalid-log-argument");(0,ve.Am)(hi,fi)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:Fa,removeApp:function sr(hi){delete St[hi]},components:On,useAsService:function La(hi,fi){return"serverAuth"===fi?null:fi}}};function mr(hi){if(!(0,me.r3)(St,hi=hi||qe))throw fe.create("no-app",{appName:hi});return St[hi]}function Fa(hi){var fi=hi.name;if(On.has(fi))return Rt.debug("There were multiple attempts to register component "+fi+"."),"PUBLIC"===hi.type?pn[fi]:null;if(On.set(fi,hi),"PUBLIC"===hi.type){var vs=function(or){if(void 0===or&&(or=mr()),"function"!=typeof or[fi])throw fe.create("invalid-app-argument",{appName:fi});return or[fi]()};void 0!==hi.serviceProps&&(0,me.ZB)(vs,hi.serviceProps),pn[fi]=vs,tn.prototype[fi]=function(){for(var or=[],Rs=0;Rs<arguments.length;Rs++)or[Rs]=arguments[Rs];return this._getService.bind(this,fi).apply(this,hi.multipleInstances?or:[])}}for(var hn=0,Mr=Object.keys(St);hn<Mr.length;hn++)St[Mr[hn]]._addComponent(hi);return"PUBLIC"===hi.type?pn[fi]:null}return pn.default=pn,Object.defineProperty(pn,"apps",{get:function Zo(){return Object.keys(St).map(function(hi){return St[hi]})}}),mr.App=tn,pn}(Un);return tn.INTERNAL=(0,u.pi)((0,u.pi)({},tn.INTERNAL),{createFirebaseNamespace:tt,extendNamespace:function St(On){(0,me.ZB)(tn,On)},createSubscribe:me.ne,ErrorFactory:me.LL,deepExtend:me.ZB}),tn}(),gt=function(){function tn(St){this.container=St}return tn.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(On){if(function Se(tn){var St=tn.getComponent();return"VERSION"===(null==St?void 0:St.type)}(On)){var pn=On.getImmediate();return pn.library+"/"+pn.version}return null}).filter(function(On){return On}).join(" ")},tn}();if((0,me.jU)()&&void 0!==self.firebase){Rt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Vt=self.firebase.SDK_VERSION;Vt&&Vt.indexOf("LITE")>=0&&Rt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var An=Je.initializeApp;Je.initializeApp=function(){for(var tn=[],St=0;St<arguments.length;St++)tn[St]=arguments[St];return(0,me.UG)()&&Rt.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),An.apply(void 0,tn)};var Kt=Je;!function kt(tn,St){tn.INTERNAL.registerComponent(new Ee.wA("platform-logger",function(On){return new gt(On)},"PRIVATE")),tn.registerVersion(we,"0.6.30",St),tn.registerVersion("fire-js","")}(Kt);const cn=Kt},2461:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{wA:()=>Ee,H0:()=>we});var u=Z(655),me=Z(492),Ee=function(){function ce(ue,pe,_e){this.name=ue,this.instanceFactory=pe,this.type=_e,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ce.prototype.setInstantiationMode=function(ue){return this.instantiationMode=ue,this},ce.prototype.setMultipleInstances=function(ue){return this.multipleInstances=ue,this},ce.prototype.setServiceProps=function(ue){return this.serviceProps=ue,this},ce.prototype.setInstanceCreatedCallback=function(ue){return this.onInstanceCreated=ue,this},ce}(),ve="[DEFAULT]",Te=function(){function ce(ue,pe){this.name=ue,this.container=pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ce.prototype.get=function(ue){var pe=this.normalizeInstanceIdentifier(ue);if(!this.instancesDeferred.has(pe)){var _e=new me.BH;if(this.instancesDeferred.set(pe,_e),this.isInitialized(pe)||this.shouldAutoInitialize())try{var Ge=this.getOrInitializeService({instanceIdentifier:pe});Ge&&_e.resolve(Ge)}catch(ye){}}return this.instancesDeferred.get(pe).promise},ce.prototype.getImmediate=function(ue){var pe,_e=this.normalizeInstanceIdentifier(null==ue?void 0:ue.identifier),Ge=null!==(pe=null==ue?void 0:ue.optional)&&void 0!==pe&&pe;if(!this.isInitialized(_e)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:_e})}catch(ye){if(Ge)return null;throw ye}},ce.prototype.getComponent=function(){return this.component},ce.prototype.setComponent=function(ue){var pe,_e;if(ue.name!==this.name)throw Error("Mismatching Component "+ue.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=ue,this.shouldAutoInitialize()){if(function fe(ce){return"EAGER"===ce.instantiationMode}(ue))try{this.getOrInitializeService({instanceIdentifier:ve})}catch(wt){}try{for(var Ge=(0,u.XA)(this.instancesDeferred.entries()),ye=Ge.next();!ye.done;ye=Ge.next()){var Ae=(0,u.CR)(ye.value,2),Le=Ae[1],mt=this.normalizeInstanceIdentifier(Ae[0]);try{var ut=this.getOrInitializeService({instanceIdentifier:mt});Le.resolve(ut)}catch(wt){}}}catch(wt){pe={error:wt}}finally{try{ye&&!ye.done&&(_e=Ge.return)&&_e.call(Ge)}finally{if(pe)throw pe.error}}}},ce.prototype.clearInstance=function(ue){void 0===ue&&(ue=ve),this.instancesDeferred.delete(ue),this.instancesOptions.delete(ue),this.instances.delete(ue)},ce.prototype.delete=function(){return(0,u.mG)(this,void 0,void 0,function(){var ue;return(0,u.Jh)(this,function(pe){switch(pe.label){case 0:return ue=Array.from(this.instances.values()),[4,Promise.all((0,u.ev)((0,u.ev)([],(0,u.CR)(ue.filter(function(_e){return"INTERNAL"in _e}).map(function(_e){return _e.INTERNAL.delete()}))),(0,u.CR)(ue.filter(function(_e){return"_delete"in _e}).map(function(_e){return _e._delete()}))))];case 1:return pe.sent(),[2]}})})},ce.prototype.isComponentSet=function(){return null!=this.component},ce.prototype.isInitialized=function(ue){return void 0===ue&&(ue=ve),this.instances.has(ue)},ce.prototype.getOptions=function(ue){return void 0===ue&&(ue=ve),this.instancesOptions.get(ue)||{}},ce.prototype.initialize=function(ue){var pe,_e;void 0===ue&&(ue={});var Ge=ue.options,ye=void 0===Ge?{}:Ge,Ae=this.normalizeInstanceIdentifier(ue.instanceIdentifier);if(this.isInitialized(Ae))throw Error(this.name+"("+Ae+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var at=this.getOrInitializeService({instanceIdentifier:Ae,options:ye});try{for(var Le=(0,u.XA)(this.instancesDeferred.entries()),mt=Le.next();!mt.done;mt=Le.next()){var ut=(0,u.CR)(mt.value,2),Et=ut[1];Ae===this.normalizeInstanceIdentifier(ut[0])&&Et.resolve(at)}}catch(qe){pe={error:qe}}finally{try{mt&&!mt.done&&(_e=Le.return)&&_e.call(Le)}finally{if(pe)throw pe.error}}return at},ce.prototype.onInit=function(ue,pe){var _e,Ge=this.normalizeInstanceIdentifier(pe),ye=null!==(_e=this.onInitCallbacks.get(Ge))&&void 0!==_e?_e:new Set;ye.add(ue),this.onInitCallbacks.set(Ge,ye);var Ae=this.instances.get(Ge);return Ae&&ue(Ae,Ge),function(){ye.delete(ue)}},ce.prototype.invokeOnInitCallbacks=function(ue,pe){var _e,Ge,ye=this.onInitCallbacks.get(pe);if(ye)try{for(var Ae=(0,u.XA)(ye),at=Ae.next();!at.done;at=Ae.next()){var Le=at.value;try{Le(ue,pe)}catch(mt){}}}catch(mt){_e={error:mt}}finally{try{at&&!at.done&&(Ge=Ae.return)&&Ge.call(Ae)}finally{if(_e)throw _e.error}}},ce.prototype.getOrInitializeService=function(ue){var pe=ue.instanceIdentifier,_e=ue.options,Ge=void 0===_e?{}:_e,ye=this.instances.get(pe);if(!ye&&this.component&&(ye=this.component.instanceFactory(this.container,{instanceIdentifier:ze(pe),options:Ge}),this.instances.set(pe,ye),this.instancesOptions.set(pe,Ge),this.invokeOnInitCallbacks(ye,pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,pe,ye)}catch(Ae){}return ye||null},ce.prototype.normalizeInstanceIdentifier=function(ue){return void 0===ue&&(ue=ve),this.component?this.component.multipleInstances?ue:ve:ue},ce.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},ce}();function ze(ce){return ce===ve?void 0:ce}var we=function(){function ce(ue){this.name=ue,this.providers=new Map}return ce.prototype.addComponent=function(ue){var pe=this.getProvider(ue.name);if(pe.isComponentSet())throw new Error("Component "+ue.name+" has already been registered with "+this.name);pe.setComponent(ue)},ce.prototype.addOrOverwriteComponent=function(ue){this.getProvider(ue.name).isComponentSet()&&this.providers.delete(ue.name),this.addComponent(ue)},ce.prototype.getProvider=function(ue){if(this.providers.has(ue))return this.providers.get(ue);var pe=new Te(ue,this);return this.providers.set(ue,pe),pe},ce.prototype.getProviders=function(){return Array.from(this.providers.values())},ce}()},4003:(ft,Ze,Z)=>{"use strict";function u(){for(var _e=0,Ge=0,ye=arguments.length;Ge<ye;Ge++)_e+=arguments[Ge].length;var Ae=Array(_e),at=0;for(Ge=0;Ge<ye;Ge++)for(var Le=arguments[Ge],mt=0,ut=Le.length;mt<ut;mt++,at++)Ae[at]=Le[mt];return Ae}Z.d(Ze,{in:()=>ve,Yd:()=>ce,Ub:()=>ue,Am:()=>pe});var me,Ee=[],ve=(()=>{return(_e=ve||(ve={}))[_e.DEBUG=0]="DEBUG",_e[_e.VERBOSE=1]="VERBOSE",_e[_e.INFO=2]="INFO",_e[_e.WARN=3]="WARN",_e[_e.ERROR=4]="ERROR",_e[_e.SILENT=5]="SILENT",ve;var _e})(),Te={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},ze=ve.INFO,fe=((me={})[ve.DEBUG]="log",me[ve.VERBOSE]="log",me[ve.INFO]="info",me[ve.WARN]="warn",me[ve.ERROR]="error",me),we=function(_e,Ge){for(var ye=[],Ae=2;Ae<arguments.length;Ae++)ye[Ae-2]=arguments[Ae];if(!(Ge<_e.logLevel)){var at=(new Date).toISOString(),Le=fe[Ge];if(!Le)throw new Error("Attempted to log a message with an invalid logType (value: "+Ge+")");console[Le].apply(console,u(["["+at+"]  "+_e.name+":"],ye))}},ce=function(){function _e(Ge){this.name=Ge,this._logLevel=ze,this._logHandler=we,this._userLogHandler=null,Ee.push(this)}return Object.defineProperty(_e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(Ge){if(!(Ge in ve))throw new TypeError('Invalid value "'+Ge+'" assigned to `logLevel`');this._logLevel=Ge},enumerable:!1,configurable:!0}),_e.prototype.setLogLevel=function(Ge){this._logLevel="string"==typeof Ge?Te[Ge]:Ge},Object.defineProperty(_e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(Ge){if("function"!=typeof Ge)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ge},enumerable:!1,configurable:!0}),Object.defineProperty(_e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(Ge){this._userLogHandler=Ge},enumerable:!1,configurable:!0}),_e.prototype.debug=function(){for(var Ge=[],ye=0;ye<arguments.length;ye++)Ge[ye]=arguments[ye];this._userLogHandler&&this._userLogHandler.apply(this,u([this,ve.DEBUG],Ge)),this._logHandler.apply(this,u([this,ve.DEBUG],Ge))},_e.prototype.log=function(){for(var Ge=[],ye=0;ye<arguments.length;ye++)Ge[ye]=arguments[ye];this._userLogHandler&&this._userLogHandler.apply(this,u([this,ve.VERBOSE],Ge)),this._logHandler.apply(this,u([this,ve.VERBOSE],Ge))},_e.prototype.info=function(){for(var Ge=[],ye=0;ye<arguments.length;ye++)Ge[ye]=arguments[ye];this._userLogHandler&&this._userLogHandler.apply(this,u([this,ve.INFO],Ge)),this._logHandler.apply(this,u([this,ve.INFO],Ge))},_e.prototype.warn=function(){for(var Ge=[],ye=0;ye<arguments.length;ye++)Ge[ye]=arguments[ye];this._userLogHandler&&this._userLogHandler.apply(this,u([this,ve.WARN],Ge)),this._logHandler.apply(this,u([this,ve.WARN],Ge))},_e.prototype.error=function(){for(var Ge=[],ye=0;ye<arguments.length;ye++)Ge[ye]=arguments[ye];this._userLogHandler&&this._userLogHandler.apply(this,u([this,ve.ERROR],Ge)),this._logHandler.apply(this,u([this,ve.ERROR],Ge))},_e}();function ue(_e){Ee.forEach(function(Ge){Ge.setLogLevel(_e)})}function pe(_e,Ge){for(var ye=function(mt){var ut=null;Ge&&Ge.level&&(ut=Te[Ge.level]),mt.userLogHandler=null===_e?null:function(wt,Et){for(var We=[],qe=2;qe<arguments.length;qe++)We[qe-2]=arguments[qe];var Bt=We.map(function(Rt){if(null==Rt)return null;if("string"==typeof Rt)return Rt;if("number"==typeof Rt||"boolean"==typeof Rt)return Rt.toString();if(Rt instanceof Error)return Rt.message;try{return JSON.stringify(Rt)}catch(Un){return null}}).filter(function(Rt){return Rt}).join(" ");Et>=(null!=ut?ut:wt.logLevel)&&_e({level:ve[Et].toLowerCase(),message:Bt,args:We,type:wt.name})}},Ae=0,at=Ee;Ae<at.length;Ae++)ye(at[Ae])}},492:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{BH:()=>ye,LL:()=>kt,ZR:()=>Se,zI:()=>tt,$s:()=>tu,r3:()=>mr,Sg:()=>Ae,ne:()=>hn,p$:()=>pe,ZB:()=>_e,m9:()=>Fn,z$:()=>at,jU:()=>ut,ru:()=>wt,d:()=>We,w1:()=>qe,hl:()=>Fe,uI:()=>Le,UG:()=>mt,b$:()=>Et,G6:()=>Un,Mn:()=>Bt,eu:()=>Xe});var u=Z(655),Te=function(de){for(var ae=[],ke=0,Ye=0;Ye<de.length;Ye++){var Re=de.charCodeAt(Ye);Re<128?ae[ke++]=Re:Re<2048?(ae[ke++]=Re>>6|192,ae[ke++]=63&Re|128):55296==(64512&Re)&&Ye+1<de.length&&56320==(64512&de.charCodeAt(Ye+1))?(Re=65536+((1023&Re)<<10)+(1023&de.charCodeAt(++Ye)),ae[ke++]=Re>>18|240,ae[ke++]=Re>>12&63|128,ae[ke++]=Re>>6&63|128,ae[ke++]=63&Re|128):(ae[ke++]=Re>>12|224,ae[ke++]=Re>>6&63|128,ae[ke++]=63&Re|128)}return ae},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(de,ae){if(!Array.isArray(de))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var ke=ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ye=[],Re=0;Re<de.length;Re+=3){var It=de[Re],Ln=Re+1<de.length,pi=Ln?de[Re+1]:0,wi=Re+2<de.length,xi=wi?de[Re+2]:0,ls=(15&pi)<<2|xi>>6,nu=63&xi;wi||(nu=64,Ln||(ls=64)),Ye.push(ke[It>>2],ke[(3&It)<<4|pi>>4],ke[ls],ke[nu])}return Ye.join("")},encodeString:function(de,ae){return this.HAS_NATIVE_SUPPORT&&!ae?btoa(de):this.encodeByteArray(Te(de),ae)},decodeString:function(de,ae){return this.HAS_NATIVE_SUPPORT&&!ae?atob(de):function(de){for(var ae=[],ke=0,Ye=0;ke<de.length;){var Re=de[ke++];if(Re<128)ae[Ye++]=String.fromCharCode(Re);else if(Re>191&&Re<224){var It=de[ke++];ae[Ye++]=String.fromCharCode((31&Re)<<6|63&It)}else if(Re>239&&Re<365){var wi=((7&Re)<<18|(63&(It=de[ke++]))<<12|(63&(Ln=de[ke++]))<<6|63&de[ke++])-65536;ae[Ye++]=String.fromCharCode(55296+(wi>>10)),ae[Ye++]=String.fromCharCode(56320+(1023&wi))}else{It=de[ke++];var Ln=de[ke++];ae[Ye++]=String.fromCharCode((15&Re)<<12|(63&It)<<6|63&Ln)}}return ae.join("")}(this.decodeStringToByteArray(de,ae))},decodeStringToByteArray:function(de,ae){this.init_();for(var ke=ae?this.charToByteMapWebSafe_:this.charToByteMap_,Ye=[],Re=0;Re<de.length;){var It=ke[de.charAt(Re++)],pi=Re<de.length?ke[de.charAt(Re)]:0,xi=++Re<de.length?ke[de.charAt(Re)]:64,Dr=++Re<de.length?ke[de.charAt(Re)]:64;if(++Re,null==It||null==pi||null==xi||null==Dr)throw Error();Ye.push(It<<2|pi>>4),64!==xi&&(Ye.push(pi<<4&240|xi>>2),64!==Dr&&Ye.push(xi<<6&192|Dr))}return Ye},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var de=0;de<this.ENCODED_VALS.length;de++)this.byteToCharMap_[de]=this.ENCODED_VALS.charAt(de),this.charToByteMap_[this.byteToCharMap_[de]]=de,this.byteToCharMapWebSafe_[de]=this.ENCODED_VALS_WEBSAFE.charAt(de),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[de]]=de,de>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(de)]=de,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(de)]=de)}}},ce=function(de){return function(de){var ae=Te(de);return fe.encodeByteArray(ae,!0)}(de).replace(/\./g,"")};function pe(de){return _e(void 0,de)}function _e(de,ae){if(!(ae instanceof Object))return ae;switch(ae.constructor){case Date:return new Date(ae.getTime());case Object:void 0===de&&(de={});break;case Array:de=[];break;default:return ae}for(var Ye in ae)!ae.hasOwnProperty(Ye)||!Ge(Ye)||(de[Ye]=_e(de[Ye],ae[Ye]));return de}function Ge(de){return"__proto__"!==de}var ye=function(){function de(){var ae=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(ke,Ye){ae.resolve=ke,ae.reject=Ye})}return de.prototype.wrapCallback=function(ae){var ke=this;return function(Ye,Re){Ye?ke.reject(Ye):ke.resolve(Re),"function"==typeof ae&&(ke.promise.catch(function(){}),1===ae.length?ae(Ye):ae(Ye,Re))}},de}();function Ae(de,ae){if(de.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var Ye=ae||"demo-project",Re=de.iat||0,It=de.sub||de.user_id;if(!It)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var Ln=(0,u.pi)({iss:"https://securetoken.google.com/"+Ye,aud:Ye,iat:Re,exp:Re+3600,auth_time:Re,sub:It,user_id:It,firebase:{sign_in_provider:"custom",identities:{}}},de);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(Ln)),""].join(".")}function at(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function mt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(de){return!1}}function ut(){return"object"==typeof self&&self.self===self}function wt(){var de="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof de&&void 0!==de.id}function Et(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function We(){return at().indexOf("Electron/")>=0}function qe(){var de=at();return de.indexOf("MSIE ")>=0||de.indexOf("Trident/")>=0}function Bt(){return at().indexOf("MSAppHost/")>=0}function Un(){return!mt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fe(){return"indexedDB"in self&&null!=indexedDB}function Xe(){return new Promise(function(de,ae){try{var ke=!0,Ye="validate-browser-context-for-indexeddb-analytics-module",Re=self.indexedDB.open(Ye);Re.onsuccess=function(){Re.result.close(),ke||self.indexedDB.deleteDatabase(Ye),de(!0)},Re.onupgradeneeded=function(){ke=!1},Re.onerror=function(){var It;ae((null===(It=Re.error)||void 0===It?void 0:It.message)||"")}}catch(It){ae(It)}})}function tt(){return!(!navigator||!navigator.cookieEnabled)}var Se=function(de){function ae(ke,Ye,Re){var It=de.call(this,Ye)||this;return It.code=ke,It.customData=Re,It.name="FirebaseError",Object.setPrototypeOf(It,ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(It,kt.prototype.create),It}return(0,u.ZT)(ae,de),ae}(Error),kt=function(){function de(ae,ke,Ye){this.service=ae,this.serviceName=ke,this.errors=Ye}return de.prototype.create=function(ae){for(var ke=[],Ye=1;Ye<arguments.length;Ye++)ke[Ye-1]=arguments[Ye];var Re=ke[0]||{},It=this.service+"/"+ae,Ln=this.errors[ae],pi=Ln?Vt(Ln,Re):"Error",wi=this.serviceName+": "+pi+" ("+It+").",xi=new Se(It,wi,Re);return xi},de}();function Vt(de,ae){return de.replace(An,function(ke,Ye){var Re=ae[Ye];return null!=Re?String(Re):"<"+Ye+"?>"})}var An=/\{\$([^}]+)}/g;function mr(de,ae){return Object.prototype.hasOwnProperty.call(de,ae)}function hn(de,ae){var ke=new Mr(de,ae);return ke.subscribe.bind(ke)}!function(){function de(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var ae=1;ae<this.blockSize;++ae)this.pad_[ae]=0;this.reset()}de.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},de.prototype.compress_=function(ae,ke){ke||(ke=0);var Ye=this.W_;if("string"==typeof ae)for(var Re=0;Re<16;Re++)Ye[Re]=ae.charCodeAt(ke)<<24|ae.charCodeAt(ke+1)<<16|ae.charCodeAt(ke+2)<<8|ae.charCodeAt(ke+3),ke+=4;else for(Re=0;Re<16;Re++)Ye[Re]=ae[ke]<<24|ae[ke+1]<<16|ae[ke+2]<<8|ae[ke+3],ke+=4;for(Re=16;Re<80;Re++)Ye[Re]=4294967295&((It=Ye[Re-3]^Ye[Re-8]^Ye[Re-14]^Ye[Re-16])<<1|It>>>31);var Dr,ls,Ln=this.chain_[0],pi=this.chain_[1],wi=this.chain_[2],xi=this.chain_[3],kr=this.chain_[4];for(Re=0;Re<80;Re++){Re<40?Re<20?(Dr=xi^pi&(wi^xi),ls=1518500249):(Dr=pi^wi^xi,ls=1859775393):Re<60?(Dr=pi&wi|xi&(pi|wi),ls=2400959708):(Dr=pi^wi^xi,ls=3395469782);var It=(Ln<<5|Ln>>>27)+Dr+kr+ls+Ye[Re]&4294967295;kr=xi,xi=wi,wi=4294967295&(pi<<30|pi>>>2),pi=Ln,Ln=It}this.chain_[0]=this.chain_[0]+Ln&4294967295,this.chain_[1]=this.chain_[1]+pi&4294967295,this.chain_[2]=this.chain_[2]+wi&4294967295,this.chain_[3]=this.chain_[3]+xi&4294967295,this.chain_[4]=this.chain_[4]+kr&4294967295},de.prototype.update=function(ae,ke){if(null!=ae){void 0===ke&&(ke=ae.length);for(var Ye=ke-this.blockSize,Re=0,It=this.buf_,Ln=this.inbuf_;Re<ke;){if(0===Ln)for(;Re<=Ye;)this.compress_(ae,Re),Re+=this.blockSize;if("string"==typeof ae){for(;Re<ke;)if(It[Ln]=ae.charCodeAt(Re),++Re,++Ln===this.blockSize){this.compress_(It),Ln=0;break}}else for(;Re<ke;)if(It[Ln]=ae[Re],++Re,++Ln===this.blockSize){this.compress_(It),Ln=0;break}}this.inbuf_=Ln,this.total_+=ke}},de.prototype.digest=function(){var ae=[],ke=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var Ye=this.blockSize-1;Ye>=56;Ye--)this.buf_[Ye]=255&ke,ke/=256;this.compress_(this.buf_);var Re=0;for(Ye=0;Ye<5;Ye++)for(var It=24;It>=0;It-=8)ae[Re]=this.chain_[Ye]>>It&255,++Re;return ae}}();var Mr=function(){function de(ae,ke){var Ye=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ke,this.task.then(function(){ae(Ye)}).catch(function(Re){Ye.error(Re)})}return de.prototype.next=function(ae){this.forEachObserver(function(ke){ke.next(ae)})},de.prototype.error=function(ae){this.forEachObserver(function(ke){ke.error(ae)}),this.close(ae)},de.prototype.complete=function(){this.forEachObserver(function(ae){ae.complete()}),this.close()},de.prototype.subscribe=function(ae,ke,Ye){var It,Re=this;if(void 0===ae&&void 0===ke&&void 0===Ye)throw new Error("Missing Observer.");It=function or(de,ae){if("object"!=typeof de||null===de)return!1;for(var ke=0,Ye=ae;ke<Ye.length;ke++){var Re=Ye[ke];if(Re in de&&"function"==typeof de[Re])return!0}return!1}(ae,["next","error","complete"])?ae:{next:ae,error:ke,complete:Ye},void 0===It.next&&(It.next=Rs),void 0===It.error&&(It.error=Rs),void 0===It.complete&&(It.complete=Rs);var Ln=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{Re.finalError?It.error(Re.finalError):It.complete()}catch(pi){}}),this.observers.push(It),Ln},de.prototype.unsubscribeOne=function(ae){void 0===this.observers||void 0===this.observers[ae]||(delete this.observers[ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},de.prototype.forEachObserver=function(ae){if(!this.finalized)for(var ke=0;ke<this.observers.length;ke++)this.sendOne(ke,ae)},de.prototype.sendOne=function(ae,ke){var Ye=this;this.task.then(function(){if(void 0!==Ye.observers&&void 0!==Ye.observers[ae])try{ke(Ye.observers[ae])}catch(Re){"undefined"!=typeof console&&console.error&&console.error(Re)}})},de.prototype.close=function(ae){var ke=this;this.finalized||(this.finalized=!0,void 0!==ae&&(this.finalError=ae),this.task.then(function(){ke.observers=void 0,ke.onNoObservers=void 0}))},de}();function Rs(){}function tu(de,ae,ke){void 0===ae&&(ae=1e3),void 0===ke&&(ke=2);var Ye=ae*Math.pow(ke,de),Re=Math.round(.5*Ye*(Math.random()-.5)*2);return Math.min(144e5,Ye+Re)}function Fn(de){return de&&de._delegate?de._delegate:de}},91:(ft,Ze,Z)=>{"use strict";var u=Z(5e3);let me=null;function Ee(){return me}const fe=new u.OlP("DocumentToken");let we=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u.Yz7({token:i,factory:function(){return function ce(){return(0,u.LFG)(pe)}()},providedIn:"platform"}),i})();const ue=new u.OlP("Location Initialized");let pe=(()=>{class i extends we{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ee().getBaseHref(this._doc)}onPopState(e){const s=Ee().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",e,!1),()=>s.removeEventListener("popstate",e)}onHashChange(e){const s=Ee().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",e,!1),()=>s.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,s,o){_e()?this._history.pushState(e,s,o):this.location.hash=o}replaceState(e,s,o){_e()?this._history.replaceState(e,s,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(fe))},i.\u0275prov=u.Yz7({token:i,factory:function(){return function Ge(){return new pe((0,u.LFG)(fe))}()},providedIn:"platform"}),i})();function _e(){return!!window.history.pushState}function ye(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function Ae(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function at(i){return i&&"?"!==i[0]?"?"+i:i}let Le=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u.Yz7({token:i,factory:function(){return function mt(i){const t=(0,u.LFG)(fe).location;return new wt((0,u.LFG)(we),t&&t.origin||"")}()},providedIn:"root"}),i})();const ut=new u.OlP("appBaseHref");let wt=(()=>{class i extends Le{constructor(e,s){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return ye(this._baseHref,e)}path(e=!1){const s=this._platformLocation.pathname+at(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${s}${o}`:s}pushState(e,s,o,l){const f=this.prepareExternalUrl(o+at(l));this._platformLocation.pushState(e,s,f)}replaceState(e,s,o,l){const f=this.prepareExternalUrl(o+at(l));this._platformLocation.replaceState(e,s,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var s,o;null===(o=(s=this._platformLocation).historyGo)||void 0===o||o.call(s,e)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(we),u.LFG(ut,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),Et=(()=>{class i extends Le{constructor(e,s){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(e){const s=ye(this._baseHref,e);return s.length>0?"#"+s:s}pushState(e,s,o,l){let f=this.prepareExternalUrl(o+at(l));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.pushState(e,s,f)}replaceState(e,s,o,l){let f=this.prepareExternalUrl(o+at(l));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.replaceState(e,s,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var s,o;null===(o=(s=this._platformLocation).historyGo)||void 0===o||o.call(s,e)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(we),u.LFG(ut,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),We=(()=>{class i{constructor(e,s){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const o=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=Ae(Rt(o)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,s=""){return this.path()==this.normalize(e+at(s))}normalize(e){return i.stripTrailingSlash(function Bt(i,t){return i&&t.startsWith(i)?t.substring(i.length):t}(this._baseHref,Rt(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,s="",o=null){this._platformStrategy.pushState(o,"",e,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+at(s)),o)}replaceState(e,s="",o=null){this._platformStrategy.replaceState(o,"",e,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+at(s)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var s,o;null===(o=(s=this._platformStrategy).historyGo)||void 0===o||o.call(s,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(e="",s){this._urlChangeListeners.forEach(o=>o(e,s))}subscribe(e,s,o){return this._subject.subscribe({next:e,error:s,complete:o})}}return i.normalizeQueryParams=at,i.joinWithSlash=ye,i.stripTrailingSlash=Ae,i.\u0275fac=function(e){return new(e||i)(u.LFG(Le),u.LFG(we))},i.\u0275prov=u.Yz7({token:i,factory:function(){return function qe(){return new We((0,u.LFG)(Le),(0,u.LFG)(we))}()},providedIn:"root"}),i})();function Rt(i){return i.replace(/\/index.html$/,"")}var Xe=(()=>((Xe=Xe||{})[Xe.Zero=0]="Zero",Xe[Xe.One=1]="One",Xe[Xe.Two=2]="Two",Xe[Xe.Few=3]="Few",Xe[Xe.Many=4]="Many",Xe[Xe.Other=5]="Other",Xe))();const hi=u.kL8;class Zi{}let ru=(()=>{class i extends Zi{constructor(e){super(),this.locale=e}getPluralCategory(e,s){switch(hi(s||this.locale)(e)){case Xe.Zero:return"zero";case Xe.One:return"one";case Xe.Two:return"two";case Xe.Few:return"few";case Xe.Many:return"many";default:return"other"}}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(u.soG))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();function nd(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const s=e.indexOf("="),[o,l]=-1==s?[e,""]:[e.slice(0,s),e.slice(s+1)];if(o.trim()===t)return decodeURIComponent(l)}return null}let ha=(()=>{class i{constructor(e,s,o,l){this._iterableDiffers=e,this._keyValueDiffers=s,this._ngEl=o,this._renderer=l,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(s=>this._toggleClass(s.key,s.currentValue)),e.forEachChangedItem(s=>this._toggleClass(s.key,s.currentValue)),e.forEachRemovedItem(s=>{s.previousValue&&this._toggleClass(s.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(s=>{if("string"!=typeof s.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,u.AaK)(s.item)}`);this._toggleClass(s.item,!0)}),e.forEachRemovedItem(s=>this._toggleClass(s.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(s=>this._toggleClass(s,!0)):Object.keys(e).forEach(s=>this._toggleClass(s,!!e[s])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(s=>this._toggleClass(s,!1)):Object.keys(e).forEach(s=>this._toggleClass(s,!1)))}_toggleClass(e,s){(e=e.trim())&&e.split(/\s+/g).forEach(o=>{s?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},i.\u0275dir=u.lG2({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),i})();class id{constructor(t,e,s,o){this.$implicit=t,this.ngForOf=e,this.index=s,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bs=(()=>{class i{constructor(e,s,o){this._viewContainer=e,this._template=s,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const s=this._viewContainer;e.forEachOperation((o,l,f)=>{if(null==o.previousIndex)s.createEmbeddedView(this._template,new id(o.item,this._ngForOf,-1,-1),null===f?void 0:f);else if(null==f)s.remove(null===l?void 0:l);else if(null!==l){const _=s.get(l);s.move(_,f),rd(_,o)}});for(let o=0,l=s.length;o<l;o++){const _=s.get(o).context;_.index=o,_.count=l,_.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{rd(s.get(o.currentIndex),o)})}static ngTemplateContextGuard(e,s){return!0}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},i.\u0275dir=u.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i})();function rd(i,t){i.context.$implicit=t.item}let Kr=(()=>{class i{constructor(e,s){this._viewContainer=e,this._context=new ji,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){mv("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){mv("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,s){return!0}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.s_b),u.Y36(u.Rgc))},i.\u0275dir=u.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class ji{constructor(){this.$implicit=null,this.ngIf=null}}function mv(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,u.AaK)(t)}'.`)}class Qg{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let uo=(()=>{class i{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const s=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||s,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),s}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let s=0;s<this._defaultViews.length;s++)this._defaultViews[s].enforceState(e)}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=u.lG2({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),i})(),Mo=(()=>{class i{constructor(e,s,o){this.ngSwitch=o,o._addCase(),this._view=new Qg(e,s)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(uo,9))},i.\u0275dir=u.lG2({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),i})(),Zf=(()=>{class i{constructor(e,s,o){o._addDefault(new Qg(e,s))}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(uo,9))},i.\u0275dir=u.lG2({type:i,selectors:[["","ngSwitchDefault",""]]}),i})(),Kf=(()=>{class i{constructor(e,s,o){this._ngEl=e,this._differs=s,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,s){const[o,l]=e.split(".");null!=(s=null!=s&&l?`${s}${l}`:s)?this._renderer.setStyle(this._ngEl.nativeElement,o,s):this._renderer.removeStyle(this._ngEl.nativeElement,o)}_applyChanges(e){e.forEachRemovedItem(s=>this._setStyle(s.key,null)),e.forEachAddedItem(s=>this._setStyle(s.key,s.currentValue)),e.forEachChangedItem(s=>this._setStyle(s.key,s.currentValue))}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(u.aQg),u.Y36(u.Qsj))},i.\u0275dir=u.lG2({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),i})(),ws=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[{provide:Zi,useClass:ru}]}),i})();const vh="browser";function Ki(i){return i===vh}function Qo(i){return"server"===i}let vb=(()=>{class i{}return i.\u0275prov=(0,u.Yz7)({token:i,providedIn:"root",factory:()=>new bv((0,u.LFG)(fe),window)}),i})();class bv{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function wv(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const s=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let o=s.currentNode;for(;o;){const l=o.shadowRoot;if(l){const f=l.getElementById(t)||l.querySelector(`[name="${t}"]`);if(f)return f}o=s.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),s=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(s-l[0],o-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Qf(this.window.history)||Qf(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Qf(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class vr{}class xv extends class yb extends class ze{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Te(i){me||(me=i)}(new xv)}onAndCancel(t,e,s){return t.addEventListener(e,s,!1),()=>{t.removeEventListener(e,s,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function aC(){return hr=hr||document.querySelector("base"),hr?hr.getAttribute("href"):null}();return null==e?null:function rm(i){Cv=Cv||document.createElement("a"),Cv.setAttribute("href",i);const t=Cv.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){hr=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return nd(document.cookie,t)}}let Cv,hr=null;const Xo=new u.OlP("TRANSITION_ID"),Mv=[{provide:u.ip1,useFactory:function lC(i,t,e){return()=>{e.get(u.CZH).donePromise.then(()=>{const s=Ee(),o=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let l=0;l<o.length;l++)s.remove(o[l])})}},deps:[Xo,fe,u.zs3],multi:!0}];class su{static init(){(0,u.VLi)(new su)}addToWindow(t){u.dqk.getAngularTestability=(s,o=!0)=>{const l=t.findTestabilityInTree(s,o);if(null==l)throw new Error("Could not find testability for element.");return l},u.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(s=>{const o=u.dqk.getAllAngularTestabilities();let l=o.length,f=!1;const _=function(w){f=f||w,l--,0==l&&s(f)};o.forEach(function(w){w.whenStable(_)})})}findTestabilityInTree(t,e,s){if(null==e)return null;const o=t.getTestability(e);return null!=o?o:s?Ee().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Eo=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const ac=new u.OlP("EventManagerPlugins");let ga=(()=>{class i{constructor(e,s){this._zone=s,this._eventNameToPlugin=new Map,e.forEach(o=>o.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,s,o){return this._findPluginFor(s).addEventListener(e,s,o)}addGlobalEventListener(e,s,o){return this._findPluginFor(s).addGlobalEventListener(e,s,o)}getZone(){return this._zone}_findPluginFor(e){const s=this._eventNameToPlugin.get(e);if(s)return s;const o=this._plugins;for(let l=0;l<o.length;l++){const f=o[l];if(f.supports(e))return this._eventNameToPlugin.set(e,f),f}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(ac),u.LFG(u.R0b))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class bb{constructor(t){this._doc=t}addGlobalEventListener(t,e,s){const o=Ee().getGlobalEventTarget(this._doc,t);if(!o)throw new Error(`Unsupported event target ${o} for event ${e}`);return this.addEventListener(o,e,s)}}let lc=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(e){const s=new Set;e.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),s.add(o))}),this.onStylesAdded(s)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),bh=(()=>{class i extends lc{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,s,o){e.forEach(l=>{const f=this._doc.createElement("style");f.textContent=l,o.push(s.appendChild(f))})}addHost(e){const s=[];this._addStylesToHost(this._stylesSet,e,s),this._hostNodes.set(e,s)}removeHost(e){const s=this._hostNodes.get(e);s&&s.forEach(sm),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((s,o)=>{this._addStylesToHost(e,o,s)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(sm))}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(fe))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();function sm(i){Ee().remove(i)}const Nn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},wb=/%COMP%/g;function Ne(i,t,e){for(let s=0;s<t.length;s++){let o=t[s];Array.isArray(o)?Ne(i,o,e):(o=o.replace(wb,i),e.push(o))}return e}function et(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let Wi=(()=>{class i{constructor(e,s,o){this.eventManager=e,this.sharedStylesHost=s,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Cl(e)}createRenderer(e,s){if(!e||!s)return this.defaultRenderer;switch(s.encapsulation){case u.ifc.Emulated:{let o=this.rendererByCompId.get(s.id);return o||(o=new Jf(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,o)),o.applyToHost(e),o}case 1:case u.ifc.ShadowDom:return new Di(this.eventManager,this.sharedStylesHost,e,s);default:if(!this.rendererByCompId.has(s.id)){const o=Ne(s.id,s.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(ga),u.LFG(bh),u.LFG(u.AFp))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class Cl{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Nn[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,s){t&&t.insertBefore(e,s)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let s="string"==typeof t?document.querySelector(t):t;if(!s)throw new Error(`The selector "${t}" did not match any elements`);return e||(s.textContent=""),s}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,s,o){if(o){e=o+":"+e;const l=Nn[o];l?t.setAttributeNS(l,e,s):t.setAttribute(e,s)}else t.setAttribute(e,s)}removeAttribute(t,e,s){if(s){const o=Nn[s];o?t.removeAttributeNS(o,e):t.removeAttribute(`${s}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,s,o){o&(u.JOm.DashCase|u.JOm.Important)?t.style.setProperty(e,s,o&u.JOm.Important?"important":""):t.style[e]=s}removeStyle(t,e,s){s&u.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,s){t[e]=s}setValue(t,e){t.nodeValue=e}listen(t,e,s){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,et(s)):this.eventManager.addEventListener(t,e,et(s))}}class Jf extends Cl{constructor(t,e,s,o){super(t),this.component=s;const l=Ne(o+"-"+s.id,s.styles,[]);e.addStyles(l),this.contentAttr=function ks(i){return"_ngcontent-%COMP%".replace(wb,i)}(o+"-"+s.id),this.hostAttr=function om(i){return"_nghost-%COMP%".replace(wb,i)}(o+"-"+s.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const s=super.createElement(t,e);return super.setAttribute(s,this.contentAttr,""),s}}class Di extends Cl{constructor(t,e,s,o){super(t),this.sharedStylesHost=e,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Ne(o.id,o.styles,[]);for(let f=0;f<l.length;f++){const _=document.createElement("style");_.textContent=l[f],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,s){return super.insertBefore(this.nodeOrShadowRoot(t),e,s)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ou=(()=>{class i extends bb{constructor(e){super(e)}supports(e){return!0}addEventListener(e,s,o){return e.addEventListener(s,o,!1),()=>this.removeEventListener(e,s,o)}removeEventListener(e,s,o){return e.removeEventListener(s,o)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(fe))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const Ev=["alt","control","meta","shift"],ee={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xs={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ml={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let ho=(()=>{class i extends bb{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,s,o){const l=i.parseEventName(s),f=i.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ee().onAndCancel(e,l.domEventName,f))}static parseEventName(e){const s=e.toLowerCase().split("."),o=s.shift();if(0===s.length||"keydown"!==o&&"keyup"!==o)return null;const l=i._normalizeKey(s.pop());let f="";if(Ev.forEach(w=>{const E=s.indexOf(w);E>-1&&(s.splice(E,1),f+=w+".")}),f+=l,0!=s.length||0===l.length)return null;const _={};return _.domEventName=o,_.fullKey=f,_}static getEventFullKey(e){let s="",o=function So(i){let t=i.key;if(null==t){if(t=i.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===i.location&&xs.hasOwnProperty(t)&&(t=xs[t]))}return ee[t]||t}(e);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Ev.forEach(l=>{l!=o&&Ml[l](e)&&(s+=l+".")}),s+=o,s}static eventCallback(e,s,o){return l=>{i.getEventFullKey(l)===e&&o.runGuarded(()=>s(l))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(fe))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const xh=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:vh},{provide:u.g9A,useValue:function Jo(){xv.makeCurrent(),su.init()},multi:!0},{provide:fe,useFactory:function od(){return(0,u.RDi)(document),document},deps:[]}]),Dl=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function Sv(){return new u.qLn},deps:[]},{provide:ac,useClass:ou,multi:!0,deps:[fe,u.R0b,u.Lbi]},{provide:ac,useClass:ho,multi:!0,deps:[fe]},{provide:Wi,useClass:Wi,deps:[ga,bh,u.AFp]},{provide:u.FYo,useExisting:Wi},{provide:lc,useExisting:bh},{provide:bh,useClass:bh,deps:[fe]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:ga,useClass:ga,deps:[ac,u.R0b]},{provide:vr,useClass:Eo,deps:[]}];let Ha=(()=>{class i{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:i,providers:[{provide:u.AFp,useValue:e.appId},{provide:Xo,useExisting:u.AFp},Mv]}}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(i,12))},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:Dl,imports:[ws,u.hGG]}),i})(),za=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(fe))},i.\u0275prov=u.Yz7({token:i,factory:function(e){let s=null;return s=e?new e:function ep(){return new za((0,u.LFG)(fe))}(),s},providedIn:"root"}),i})();"undefined"!=typeof window&&window;let Ls=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u.Yz7({token:i,factory:function(e){let s=null;return s=e?new(e||i):u.LFG(Eh),s},providedIn:"root"}),i})(),Eh=(()=>{class i extends Ls{constructor(e){super(),this._doc=e}sanitize(e,s){if(null==s)return null;switch(e){case u.q3G.NONE:return s;case u.q3G.HTML:return(0,u.qzn)(s,"HTML")?(0,u.z3N)(s):(0,u.EiD)(this._doc,String(s)).toString();case u.q3G.STYLE:return(0,u.qzn)(s,"Style")?(0,u.z3N)(s):s;case u.q3G.SCRIPT:if((0,u.qzn)(s,"Script"))return(0,u.z3N)(s);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.yhl)(s),(0,u.qzn)(s,"URL")?(0,u.z3N)(s):(0,u.mCW)(String(s));case u.q3G.RESOURCE_URL:if((0,u.qzn)(s,"ResourceURL"))return(0,u.z3N)(s);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,u.JVY)(e)}bypassSecurityTrustStyle(e){return(0,u.L6k)(e)}bypassSecurityTrustScript(e){return(0,u.eBb)(e)}bypassSecurityTrustUrl(e){return(0,u.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,u.pB0)(e)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(fe))},i.\u0275prov=u.Yz7({token:i,factory:function(e){let s=null;return s=e?new e:function Dh(i){return new Eh(i.get(fe))}(u.LFG(u.zs3)),s},providedIn:"root"}),i})();const dc_firebase={apiKey:"AIzaSyBtmCJxbdeQTQEsI0T8e-xBbKoGRH-LUZ0",authDomain:"starter-1c7d5.firebaseapp.com",projectId:"starter-1c7d5",storageBucket:"starter-1c7d5.appspot.com",messagingSenderId:"881006190092",appId:"1:881006190092:web:16e42cc5fd7c157ab2d829",measurementId:"G-6PWFVHMVFH"};var Qi=Z(2816),Sl=Z(4986),Ai=Z(8306),Xi=Z(8996),Al=Z(3269);function it(...i){const t=(0,Al.yG)(i);return(0,Xi.D)(i,t)}var dd=Z(8189);function cu(...i){return function Sh(){return(0,dd.J)(1)}()((0,Xi.D)(i,(0,Al.yG)(i)))}var ci=Z(4482);function Ji(...i){const t=(0,Al.yG)(i);return(0,ci.e)((e,s)=>{(t?cu(i,e,t):cu(i,e)).subscribe(s)})}var Ci=Z(5403);function Ah(){return(0,ci.e)((i,t)=>{let e,s=!1;i.subscribe(new Ci.Q(t,o=>{const l=e;e=o,s&&t.next([l,o]),s=!0}))})}var At=Z(4004);function hd(i,t,e,s,o){return(l,f)=>{let _=e,w=t,E=0;l.subscribe(new Ci.Q(f,T=>{const F=E++;w=_?i(w,T,F):(_=!0,T),s&&f.next(w)},o&&(()=>{_&&f.next(w),f.complete()})))}}function Tl(i,t){return(0,ci.e)(hd(i,t,arguments.length>=2,!0))}var Th=Z(4671);function Ao(i,t=Th.y){return i=null!=i?i:ip,(0,ci.e)((e,s)=>{let o,l=!0;e.subscribe(new Ci.Q(s,f=>{const _=t(f);(l||!i(o,_))&&(l=!1,o=_,s.next(f))}))})}function ip(i,t){return i===t}function Jn(i,t){return(0,ci.e)((e,s)=>{let o=0;e.subscribe(new Ci.Q(s,l=>i.call(t,l,o++)&&s.next(l)))})}var Ti=Z(5363),um=Z(5867),lr=Z(8367),Q=Z(655),$n=Z(492),Ya=Z(4003),Ih=function(i,t){return(Ih=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,s){e.__proto__=s}||function(e,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])})(i,t)};function dm(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],s=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ut,Jt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ui=Ui||{},kn=Jt||self;function _n(){}function ma(i){var t=typeof i;return"array"==(t="object"!=t?t:i?Array.isArray(i)?"array":t:"null")||"object"==t&&"number"==typeof i.length}function Il(i){var t=typeof i;return"object"==t&&null!=i||"function"==t}var hc="closure_uid_"+(1e9*Math.random()>>>0),_a=0;function Rl(i,t,e){return i.call.apply(i.bind,arguments)}function va(i,t,e){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,s),i.apply(t,o)}}return function(){return i.apply(t,arguments)}}function Er(i,t,e){return(Er=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Rl:va).apply(null,arguments)}function Qt(i,t){var e=Array.prototype.slice.call(arguments,1);return function(){var s=e.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function er(i,t){function e(){}e.prototype=t.prototype,i.Z=t.prototype,i.prototype=new e,i.prototype.constructor=i,i.Vb=function(s,o,l){for(var f=Array(arguments.length-2),_=2;_<arguments.length;_++)f[_-2]=arguments[_];return t.prototype[o].apply(s,f)}}function uu(){this.s=this.s,this.o=this.o}var tr={};uu.prototype.s=!1,uu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function fd(i){return Object.prototype.hasOwnProperty.call(i,hc)&&i[hc]||(i[hc]=++_a)}(this);delete tr[i]}},uu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Eb=Array.prototype.indexOf?function(i,t){return Array.prototype.indexOf.call(i,t,void 0)}:function(i,t){if("string"==typeof i)return"string"!=typeof t||1!=t.length?-1:i.indexOf(t,0);for(var e=0;e<i.length;e++)if(e in i&&i[e]===t)return e;return-1},Pl=Array.prototype.forEach?function(i,t,e){Array.prototype.forEach.call(i,t,e)}:function(i,t,e){for(var s=i.length,o="string"==typeof i?i.split(""):i,l=0;l<s;l++)l in o&&t.call(e,o[l],l,i)};function Rh(i){return Array.prototype.concat.apply([],arguments)}function To(i){var t=i.length;if(0<t){for(var e=Array(t),s=0;s<t;s++)e[s]=i[s];return e}return[]}function pd(i){return/^[\s\xa0]*$/.test(i)}var si,Cs=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Wt(i,t){return-1!=i.indexOf(t)}function Iv(i,t){return i<t?-1:i>t?1:0}e:{var Ph=kn.navigator;if(Ph){var ta=Ph.userAgent;if(ta){si=ta;break e}}si=""}function fc(i,t,e){for(var s in i)t.call(e,i[s],s,i)}function pc(i){var t={};for(var e in i)t[e]=i[e];return t}var po="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function na(i,t){for(var e,s,o=1;o<arguments.length;o++){for(e in s=arguments[o])i[e]=s[e];for(var l=0;l<po.length;l++)e=po[l],Object.prototype.hasOwnProperty.call(s,e)&&(i[e]=s[e])}}function Oh(i){return Oh[" "](i),i}Oh[" "]=_n;var ei,i,du=Wt(si,"Opera"),Ol=Wt(si,"Trident")||Wt(si,"MSIE"),rp=Wt(si,"Edge"),kh=rp||Ol,hm=Wt(si,"Gecko")&&!(Wt(si.toLowerCase(),"webkit")&&!Wt(si,"Edge"))&&!(Wt(si,"Trident")||Wt(si,"MSIE"))&&!Wt(si,"Edge"),Ab=Wt(si.toLowerCase(),"webkit")&&!Wt(si,"Edge");function Fh(){var i=kn.document;return i?i.documentMode:void 0}e:{var sp="",qa=(i=si,hm?/rv:([^\);]+)(\)|;)/.exec(i):rp?/Edge\/([\d\.]+)/.exec(i):Ol?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Ab?/WebKit\/(\S+)/.exec(i):du?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(qa&&(sp=qa?qa[1]:""),Ol){var hu=Fh();if(null!=hu&&hu>parseFloat(sp)){ei=String(hu);break e}}ei=sp}var md={};var hC=kn.document&&Ol&&(Fh()||parseInt(ei,10))||void 0,Io=function(){if(!kn.addEventListener||!Object.defineProperty)return!1;var i=!1,t=Object.defineProperty({},"passive",{get:function(){i=!0}});try{kn.addEventListener("test",_n,t),kn.removeEventListener("test",_n,t)}catch(e){}return i}();function fr(i,t){this.type=i,this.g=this.target=t,this.defaultPrevented=!1}function nr(i,t){if(fr.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var e=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=t,t=i.relatedTarget){if(hm){e:{try{Oh(t.nodeName);var o=!0;break e}catch(l){}o=!1}o||(t=null)}}else"mouseover"==e?t=i.fromElement:"mouseout"==e&&(t=i.toElement);this.relatedTarget=t,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:gc[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&nr.Z.h.call(this)}}fr.prototype.h=function(){this.defaultPrevented=!0},er(nr,fr);var gc={2:"touch",3:"pen",4:"mouse"};nr.prototype.h=function(){nr.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var mc="closure_listenable_"+(1e6*Math.random()|0),fu=0;function pu(i,t,e,s,o){this.listener=i,this.proxy=null,this.src=t,this.type=e,this.capture=!!s,this.ia=o,this.key=++fu,this.ca=this.fa=!1}function kl(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function _c(i){this.src=i,this.g={},this.h=0}function gu(i,t){var e=t.type;if(e in i.g){var l,s=i.g[e],o=Eb(s,t);(l=0<=o)&&Array.prototype.splice.call(s,o,1),l&&(kl(t),0==i.g[e].length&&(delete i.g[e],i.h--))}}function Lh(i,t,e,s){for(var o=0;o<i.length;++o){var l=i[o];if(!l.ca&&l.listener==t&&l.capture==!!e&&l.ia==s)return o}return-1}_c.prototype.add=function(i,t,e,s,o){var l=i.toString();(i=this.g[l])||(i=this.g[l]=[],this.h++);var f=Lh(i,t,s,o);return-1<f?(t=i[f],e||(t.fa=!1)):((t=new pu(t,this.src,l,!!s,o)).fa=e,i.push(t)),t};var mu="closure_lm_"+(1e6*Math.random()|0),pm={};function Nh(i,t,e,s,o){if(s&&s.once)return us(i,t,e,s,o);if(Array.isArray(t)){for(var l=0;l<t.length;l++)Nh(i,t[l],e,s,o);return null}return e=Fv(e),i&&i[mc]?i.N(t,e,Il(s)?!!s.capture:!!s,o):_d(i,t,e,!1,s,o)}function _d(i,t,e,s,o,l){if(!t)throw Error("Invalid event type");var f=Il(o)?!!o.capture:!!o,_=Ov(i);if(_||(i[mu]=_=new _c(i)),(e=_.add(t,e,s,f,l)).proxy)return e;if(s=function fC(){var t=op;return function i(e){return t.call(i.src,i.listener,e)}}(),e.proxy=s,s.src=i,s.listener=e,i.addEventListener)Io||(o=f),void 0===o&&(o=!1),i.addEventListener(t.toString(),s,o);else if(i.attachEvent)i.attachEvent(gm(t.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return e}function us(i,t,e,s,o){if(Array.isArray(t)){for(var l=0;l<t.length;l++)us(i,t[l],e,s,o);return null}return e=Fv(e),i&&i[mc]?i.O(t,e,Il(s)?!!s.capture:!!s,o):_d(i,t,e,!0,s,o)}function Rv(i,t,e,s,o){if(Array.isArray(t))for(var l=0;l<t.length;l++)Rv(i,t[l],e,s,o);else s=Il(s)?!!s.capture:!!s,e=Fv(e),i&&i[mc]?(i=i.i,(t=String(t).toString())in i.g&&-1<(e=Lh(l=i.g[t],e,s,o))&&(kl(l[e]),Array.prototype.splice.call(l,e,1),0==l.length&&(delete i.g[t],i.h--))):i&&(i=Ov(i))&&(t=i.g[t.toString()],i=-1,t&&(i=Lh(t,e,s,o)),(e=-1<i?t[i]:null)&&Pv(e))}function Pv(i){if("number"!=typeof i&&i&&!i.ca){var t=i.src;if(t&&t[mc])gu(t.i,i);else{var e=i.type,s=i.proxy;t.removeEventListener?t.removeEventListener(e,s,i.capture):t.detachEvent?t.detachEvent(gm(e),s):t.addListener&&t.removeListener&&t.removeListener(s),(e=Ov(t))?(gu(e,i),0==e.h&&(e.src=null,t[mu]=null)):kl(i)}}}function gm(i){return i in pm?pm[i]:pm[i]="on"+i}function op(i,t){if(i.ca)i=!0;else{t=new nr(t,this);var e=i.listener,s=i.ia||i.src;i.fa&&Pv(i),i=e.call(s,t)}return i}function Ov(i){return(i=i[mu])instanceof _c?i:null}var kv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fv(i){return"function"==typeof i?i:(i[kv]||(i[kv]=function(t){return i.handleEvent(t)}),i[kv])}function Sr(){uu.call(this),this.i=new _c(this),this.P=this,this.I=null}function yr(i,t){var e,s=i.I;if(s)for(e=[];s;s=s.I)e.push(s);if(i=i.P,s=t.type||t,"string"==typeof t)t=new fr(t,i);else if(t instanceof fr)t.target=t.target||i;else{var o=t;na(t=new fr(s,i),o)}if(o=!0,e)for(var l=e.length-1;0<=l;l--){var f=t.g=e[l];o=ap(f,s,!0,t)&&o}if(o=ap(f=t.g=i,s,!0,t)&&o,o=ap(f,s,!1,t)&&o,e)for(l=0;l<e.length;l++)o=ap(f=t.g=e[l],s,!1,t)&&o}function ap(i,t,e,s){if(!(t=i.i.g[String(t)]))return!0;t=t.concat();for(var o=!0,l=0;l<t.length;++l){var f=t[l];if(f&&!f.ca&&f.capture==e){var _=f.listener,w=f.ia||f.src;f.fa&&gu(i.i,f),o=!1!==_.call(w,s)&&o}}return o&&!s.defaultPrevented}er(Sr,uu),Sr.prototype[mc]=!0,Sr.prototype.removeEventListener=function(i,t,e,s){Rv(this,i,t,e,s)},Sr.prototype.M=function(){if(Sr.Z.M.call(this),this.i){var t,i=this.i;for(t in i.g){for(var e=i.g[t],s=0;s<e.length;s++)kl(e[s]);delete i.g[t],i.h--}}this.I=null},Sr.prototype.N=function(i,t,e,s){return this.i.add(String(i),t,!1,e,s)},Sr.prototype.O=function(i,t,e,s){return this.i.add(String(i),t,!0,e,s)};var _u=kn.JSON.stringify;function pC(){var i=Pb,t=null;return i.g&&(t=i.g,i.g=i.g.next,i.g||(i.h=null),t.next=null),t}var Nv,Ib=function(){function i(){this.h=this.g=null}return i.prototype.add=function(t,e){var s=mm.get();s.set(t,e),this.h?this.h.next=s:this.g=s,this.h=s},i}(),mm=new(function(){function i(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return i.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},i}())(function(){return new _m},function(i){return i.reset()}),_m=function(){function i(){this.next=this.g=this.h=null}return i.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},i.prototype.reset=function(){this.next=this.g=this.h=null},i}();function Rb(i){kn.setTimeout(function(){throw i},0)}function Lv(i,t){Nv||function Bh(){var i=kn.Promise.resolve(void 0);Nv=function(){i.then(eE)}}(),vd||(Nv(),vd=!0),Pb.add(i,t)}var vd=!1,Pb=new Ib;function eE(){for(var i;i=pC();){try{i.h.call(i.g)}catch(e){Rb(e)}var t=mm;t.j(i),100>t.h&&(t.h++,i.next=t.g,t.g=i)}vd=!1}function lp(i,t){Sr.call(this),this.h=i||1,this.g=t||kn,this.j=Er(this.kb,this),this.l=Date.now()}function Bv(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Ob(i,t,e){if("function"==typeof i)e&&(i=Er(i,e));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Er(i.handleEvent,i)}return 2147483647<Number(t)?-1:kn.setTimeout(i,t||0)}function kb(i){i.g=Ob(function(){i.g=null,i.i&&(i.i=!1,kb(i))},i.j);var t=i.h;i.h=null,i.m.apply(null,t)}er(lp,Sr),(Ut=lp.prototype).da=!1,Ut.S=null,Ut.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),yr(this,"tick"),this.da&&(Bv(this),this.start()))}},Ut.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ut.M=function(){lp.Z.M.call(this),Bv(this),delete this.g};var gC=function(i){function t(e,s){var o=i.call(this)||this;return o.m=e,o.j=s,o.h=null,o.i=!1,o.g=null,o}return function Tv(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=i}Ih(i,t),i.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}(t,i),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:kb(this)},t.prototype.M=function(){i.prototype.M.call(this),this.g&&(kn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(uu);function cp(i){uu.call(this),this.h=i,this.g={}}er(cp,uu);var up=[];function vm(i,t,e,s){Array.isArray(e)||(e&&(up[0]=e.toString()),e=up);for(var o=0;o<e.length;o++){var l=Nh(t,e[o],s||i.handleEvent,!1,i.h||i);if(!l)break;i.g[l.key]=l}}function yd(i){fc(i.g,function(t,e){this.g.hasOwnProperty(e)&&Pv(t)},i),i.g={}}function ym(){this.g=!0}function vc(i,t,e,s){i.info(function(){return"XMLHTTP TEXT ("+t+"): "+function Fb(i,t){if(!i.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(i=0;i<e.length;i++)if(Array.isArray(e[i])){var s=e[i];if(!(2>s.length)){var o=s[1];if(Array.isArray(o)&&!(1>o.length)){var l=o[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var f=1;f<o.length;f++)o[f]=""}}}return _u(e)}catch(_){return t}}(i,e)+(s?" "+s:"")})}cp.prototype.M=function(){cp.Z.M.call(this),yd(this)},cp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ym.prototype.Aa=function(){this.g=!1},ym.prototype.info=function(){};var vu={},Gv=null;function Fl(){return Gv=Gv||new Sr}function Lb(i){fr.call(this,vu.Ma,i)}function dp(i){var t=Fl();yr(t,new Lb(t,i))}function Nb(i,t){fr.call(this,vu.STAT_EVENT,i),this.stat=t}function go(i){var t=Fl();yr(t,new Nb(t,i))}function Bb(i,t){fr.call(this,vu.Na,i),this.size=t}function ia(i,t){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return kn.setTimeout(function(){i()},t)}vu.Ma="serverreachability",er(Lb,fr),vu.STAT_EVENT="statevent",er(Nb,fr),vu.Na="timingevent",er(Bb,fr);var yc={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Uv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Hv(){}function Gb(){}Hv.prototype.h=null;var jv,hp={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function zv(){fr.call(this,"d")}function bm(){fr.call(this,"c")}function wm(){}function fp(i,t,e,s){this.l=i,this.j=t,this.m=e,this.X=s||1,this.V=new cp(this),this.P=nE,this.W=new lp(i=kh?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ub}function Ub(){this.i=null,this.g="",this.h=!1}er(zv,fr),er(bm,fr),er(wm,Hv),wm.prototype.g=function(){return new XMLHttpRequest},wm.prototype.i=function(){return{}},jv=new wm;var nE=45e3,Wv={},yu={};function xm(i,t,e){i.K=1,i.v=_p(Ll(t)),i.s=e,i.U=!0,$a(i,null)}function $a(i,t){i.F=Date.now(),Gh(i),i.A=Ll(i.v);var e=i.A,s=i.X;Array.isArray(s)||(s=[String(s)]),Qv(e.h,"t",s),i.C=0,e=i.l.H,i.h=new Ub,i.g=tw(i.l,e?t:null,!i.s),0<i.O&&(i.L=new gC(Er(i.Ia,i,i.g),i.O)),vm(i.V,i.g,"readystatechange",i.gb),t=i.H?pc(i.H):{},i.s?(i.u||(i.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,t)):(i.u="GET",i.g.ea(i.A,i.u,null,t)),dp(1),function mC(i,t,e,s,o,l){i.info(function(){if(i.g)if(l)for(var f="",_=l.split("&"),w=0;w<_.length;w++){var E=_[w].split("=");if(1<E.length){var T=E[0];E=E[1];var F=T.split("_");f=2<=F.length&&"type"==F[1]?f+(T+"=")+E+"&":f+(T+"=redacted&")}}else f=null;else f=l;return"XMLHTTP REQ ("+s+") [attempt "+o+"]: "+t+"\n"+e+"\n"+f})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Vh(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Yv(i,t,e){for(var o,s=!0;!i.I&&i.C<e.length;){if((o=Hb(i,e))==yu){4==t&&(i.o=4,go(14),s=!1),vc(i.j,i.m,null,"[Incomplete Response]");break}if(o==Wv){i.o=4,go(15),vc(i.j,i.m,e,"[Invalid Chunk]"),s=!1;break}vc(i.j,i.m,o,null),pp(i,o)}Vh(i)&&o!=yu&&o!=Wv&&(i.h.g="",i.C=0),4!=t||0!=e.length||i.h.h||(i.o=1,go(16),s=!1),i.i=i.i&&s,s?0<e.length&&!i.aa&&(i.aa=!0,(t=i.l).g==i&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),Cc(t),t.L=!0,go(11))):(vc(i.j,i.m,e,"[Invalid Chunked Response]"),bc(i),Cm(i))}function Hb(i,t){var e=i.C,s=t.indexOf("\n",e);return-1==s?yu:(e=Number(t.substring(e,s)),isNaN(e)?Wv:(s+=1)+e>t.length?yu:(t=t.substr(s,e),i.C=s+e,t))}function Gh(i){i.Y=Date.now()+i.P,_C(i,i.P)}function _C(i,t){if(null!=i.B)throw Error("WatchDog timer not null");i.B=ia(Er(i.eb,i),t)}function qv(i){i.B&&(kn.clearTimeout(i.B),i.B=null)}function Cm(i){0==i.l.G||i.I||ra(i.l,i)}function bc(i){qv(i);var t=i.L;t&&"function"==typeof t.na&&t.na(),i.L=null,Bv(i.W),yd(i.V),i.g&&(t=i.g,i.g=null,t.abort(),t.na())}function pp(i,t){try{var e=i.l;if(0!=e.G&&(e.g==i||Em(e.i,i)))if(e.I=i.N,!i.J&&Em(e.i,i)&&3==e.G){try{var s=e.Ca.g.parse(t)}catch(J){s=null}if(Array.isArray(s)&&3==s.length){var o=s;if(0==o[0])e:if(e.u)e.ta=o[1],0<e.ta-e.U&&37500>o[2]&&e.N&&0==e.A&&!e.v&&(e.v=ia(Er(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<i.F))break e;Nl(e),jh(e)}ly(e),go(18)}if(1>=$b(e.i)&&e.ka){try{e.ka()}catch(J){}e.ka=void 0}}else wu(e,11)}else if((i.J||e.g==i)&&Nl(e),!pd(t))for(o=e.Ca.g.parse(t),t=0;t<o.length;t++){var l=o[t];if(e.U=l[0],l=l[1],2==e.G)if("c"==l[0]){e.J=l[1],e.la=l[2];var f=l[3];null!=f&&(e.ma=f,e.h.info("VER="+e.ma));var _=l[4];null!=_&&(e.za=_,e.h.info("SVER="+e.za));var w=l[5];null!=w&&"number"==typeof w&&0<w&&(e.K=s=1.5*w,e.h.info("backChannelRequestTimeoutMs_="+s)),s=e;var E=i.g;if(E){var T=E.g?E.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(T){var F=s.i;!F.g&&(Wt(T,"spdy")||Wt(T,"quic")||Wt(T,"h2"))&&(F.j=F.l,F.g=new Set,F.h&&(ey(F,F.h),F.h=null))}if(s.D){var G=E.g?E.g.getResponseHeader("X-HTTP-Session-Id"):null;G&&(s.sa=G,jn(s.F,s.D,G))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-i.F,e.h.info("Handshake RTT: "+e.O+"ms"));var H=i;if((s=e).oa=ew(s,s.H?s.la:null,s.W),H.J){ty(s.i,H);var Y=H,q=s.K;q&&Y.setTimeout(q),Y.B&&(qv(Y),Gh(Y)),s.g=H}else Pm(s);0<e.l.length&&xc(e)}else"stop"!=l[0]&&"close"!=l[0]||wu(e,7);else 3==e.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?wu(e,7):Cp(e):"noop"!=l[0]&&e.j&&e.j.wa(l),e.A=0)}dp(4)}catch(J){}}function zb(i,t){if(i.forEach&&"function"==typeof i.forEach)i.forEach(t,void 0);else if(ma(i)||"string"==typeof i)Pl(i,t,void 0);else{if(i.T&&"function"==typeof i.T)var e=i.T();else if(i.R&&"function"==typeof i.R)e=void 0;else if(ma(i)||"string"==typeof i){e=[];for(var s=i.length,o=0;o<s;o++)e.push(o)}else for(o in e=[],s=0,i)e[s++]=o;s=function $v(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(ma(i)){for(var t=[],e=i.length,s=0;s<e;s++)t.push(i[s]);return t}for(s in t=[],e=0,i)t[e++]=i[s];return t}(i),o=s.length;for(var l=0;l<o;l++)t.call(void 0,s[l],e&&e[l],i)}}function gp(i,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var s=0;s<e;s+=2)this.set(arguments[s],arguments[s+1])}else if(i)if(i instanceof gp)for(e=i.T(),s=0;s<e.length;s++)this.set(e[s],i.get(e[s]));else for(s in i)this.set(s,i[s])}function Mm(i){if(i.i!=i.g.length){for(var t=0,e=0;t<i.g.length;){var s=i.g[t];bd(i.h,s)&&(i.g[e++]=s),t++}i.g.length=e}if(i.i!=i.g.length){var o={};for(e=t=0;t<i.g.length;)bd(o,s=i.g[t])||(i.g[e++]=s,o[s]=1),t++;i.g.length=e}}function bd(i,t){return Object.prototype.hasOwnProperty.call(i,t)}(Ut=fp.prototype).setTimeout=function(i){this.P=i},Ut.gb=function(i){i=i.target;var t=this.L;t&&3==Ms(i)?t.l():this.Ia(i)},Ut.Ia=function(i){try{if(i==this.g)e:{var t=Ms(this.g),e=this.g.Da(),s=this.g.ba();if(!(3>t)&&(3!=t||kh||this.g&&(this.h.h||this.g.ga()||AC(this.g)))){this.I||4!=t||7==e||dp(8==e||0>=s?3:2),qv(this);var o=this.g.ba();this.N=o;t:if(Vh(this)){var l=AC(this.g);i="";var f=l.length,_=4==Ms(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){bc(this),Cm(this);var w="";break t}this.h.i=new kn.TextDecoder}for(e=0;e<f;e++)this.h.h=!0,i+=this.h.i.decode(l[e],{stream:_&&e==f-1});l.splice(0,f),this.h.g+=i,this.C=0,w=this.h.g}else w=this.g.ga();if(this.i=200==o,function tE(i,t,e,s,o,l,f){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+o+"]: "+t+"\n"+e+"\n"+l+" "+f})}(this.j,this.u,this.A,this.m,this.X,t,o),this.i){if(this.$&&!this.J){t:{if(this.g){var E,T=this.g;if((E=T.g?T.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pd(E)){var F=E;break t}}F=null}if(!(o=F)){this.i=!1,this.o=3,go(12),bc(this),Cm(this);break e}vc(this.j,this.m,o,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,pp(this,o)}this.U?(Yv(this,t,w),kh&&this.i&&3==t&&(vm(this.V,this.W,"tick",this.fb),this.W.start())):(vc(this.j,this.m,w,null),pp(this,w)),4==t&&bc(this),this.i&&!this.I&&(4==t?ra(this.l,this):(this.i=!1,Gh(this)))}else 400==o&&0<w.indexOf("Unknown SID")?(this.o=3,go(12)):(this.o=0,go(13)),bc(this),Cm(this)}}}catch(G){}},Ut.fb=function(){if(this.g){var i=Ms(this.g),t=this.g.ga();this.C<t.length&&(qv(this),Yv(this,i,t),this.i&&4!=i&&Gh(this))}},Ut.cancel=function(){this.I=!0,bc(this)},Ut.eb=function(){this.B=null;var i=Date.now();0<=i-this.Y?(function Vv(i,t){i.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(dp(3),go(17)),bc(this),this.o=2,Cm(this)):_C(this,this.Y-i)},(Ut=gp.prototype).R=function(){Mm(this);for(var i=[],t=0;t<this.g.length;t++)i.push(this.h[this.g[t]]);return i},Ut.T=function(){return Mm(this),this.g.concat()},Ut.get=function(i,t){return bd(this.h,i)?this.h[i]:t},Ut.set=function(i,t){bd(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=t},Ut.forEach=function(i,t){for(var e=this.T(),s=0;s<e.length;s++){var o=e[s],l=this.get(o);i.call(t,l,o,this)}};var jb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wd(i,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof wd){this.g=void 0!==t?t:i.g,xd(this,i.j),this.s=i.s,mp(this,i.i),Uh(this,i.m),this.l=i.l,t=i.h;var e=new wc;e.i=t.i,t.g&&(e.g=new gp(t.g),e.h=t.h),Wb(this,e),this.o=i.o}else i&&(e=String(i).match(jb))?(this.g=!!t,xd(this,e[1]||"",!0),this.s=Hh(e[2]||""),mp(this,e[3]||"",!0),Uh(this,e[4]),this.l=Hh(e[5]||"",!0),Wb(this,e[6]||"",!0),this.o=Hh(e[7]||"")):(this.g=!!t,this.h=new wc(null,this.g))}function Ll(i){return new wd(i)}function xd(i,t,e){i.j=e?Hh(t,!0):t,i.j&&(i.j=i.j.replace(/:$/,""))}function mp(i,t,e){i.i=e?Hh(t,!0):t}function Uh(i,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);i.m=t}else i.m=null}function Wb(i,t,e){t instanceof wc?(i.h=t,function yp(i,t){t&&!i.j&&(Ar(i),i.i=null,i.g.forEach(function(e,s){var o=s.toLowerCase();s!=o&&(Dm(this,s),Qv(this,o,e))},i)),i.j=t}(i.h,i.g)):(e||(t=vp(t,iE)),i.h=new wc(t,i.g))}function jn(i,t,e){i.h.set(t,e)}function _p(i){return jn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Hh(i,t){return i?t?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function vp(i,t,e){return"string"==typeof i?(i=encodeURI(i).replace(t,bC),e&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function bC(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}wd.prototype.toString=function(){var i=[],t=this.j;t&&i.push(vp(t,Yb,!0),":");var e=this.i;return(e||"file"==t)&&(i.push("//"),(t=this.s)&&i.push(vp(t,Yb,!0),"@"),i.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&i.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&i.push("/"),i.push(vp(e,"/"==e.charAt(0)?xC:wC,!0))),(e=this.h.toString())&&i.push("?",e),(e=this.o)&&i.push("#",vp(e,rE)),i.join("")};var Yb=/[#\/\?@]/g,wC=/[#\?:]/g,xC=/[#\?]/g,iE=/[#\?@]/g,rE=/#/g;function wc(i,t){this.h=this.g=null,this.i=i||null,this.j=!!t}function Ar(i){i.g||(i.g=new gp,i.h=0,i.i&&function vC(i,t){if(i){i=i.split("&");for(var e=0;e<i.length;e++){var s=i[e].indexOf("="),o=null;if(0<=s){var l=i[e].substring(0,s);o=i[e].substring(s+1)}else l=i[e];t(l,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(i.i,function(t,e){i.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Dm(i,t){Ar(i),t=Lr(i,t),bd(i.g.h,t)&&(i.i=null,i.h-=i.g.get(t).length,bd((i=i.g).h,t)&&(delete i.h[t],i.i--,i.g.length>2*i.i&&Mm(i)))}function Kv(i,t){return Ar(i),t=Lr(i,t),bd(i.g.h,t)}function Qv(i,t,e){Dm(i,t),0<e.length&&(i.i=null,i.g.set(Lr(i,t),To(e)),i.h+=e.length)}function Lr(i,t){return t=String(t),i.j&&(t=t.toLowerCase()),t}(Ut=wc.prototype).add=function(i,t){Ar(this),this.i=null,i=Lr(this,i);var e=this.g.get(i);return e||this.g.set(i,e=[]),e.push(t),this.h+=1,this},Ut.forEach=function(i,t){Ar(this),this.g.forEach(function(e,s){Pl(e,function(o){i.call(t,o,s,this)},this)},this)},Ut.T=function(){Ar(this);for(var i=this.g.R(),t=this.g.T(),e=[],s=0;s<t.length;s++)for(var o=i[s],l=0;l<o.length;l++)e.push(t[s]);return e},Ut.R=function(i){Ar(this);var t=[];if("string"==typeof i)Kv(this,i)&&(t=Rh(t,this.g.get(Lr(this,i))));else{i=this.g.R();for(var e=0;e<i.length;e++)t=Rh(t,i[e])}return t},Ut.set=function(i,t){return Ar(this),this.i=null,Kv(this,i=Lr(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[t]),this.h+=1,this},Ut.get=function(i,t){return i&&0<(i=this.R(i)).length?String(i[0]):t},Ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],t=this.g.T(),e=0;e<t.length;e++){var s=t[e],o=encodeURIComponent(String(s));s=this.R(s);for(var l=0;l<s.length;l++){var f=o;""!==s[l]&&(f+="="+encodeURIComponent(String(s[l]))),i.push(f)}}return this.i=i.join("&")};var Xv=function i(t,e){this.h=t,this.g=e};function qb(i){this.l=i||CC,i=kn.PerformanceNavigationTiming?0<(i=kn.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(kn.g&&kn.g.Ea&&kn.g.Ea()&&kn.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var CC=10;function Jv(i){return!!i.h||!!i.g&&i.g.size>=i.j}function $b(i){return i.h?1:i.g?i.g.size:0}function Em(i,t){return i.h?i.h==t:!!i.g&&i.g.has(t)}function ey(i,t){i.g?i.g.add(t):i.h=t}function ty(i,t){i.h&&i.h==t?i.h=null:i.g&&i.g.has(t)&&i.g.delete(t)}function Zb(i){var t,e;if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){var s=i.i;try{for(var o=dm(i.g.values()),l=o.next();!l.done;l=o.next())s=s.concat(l.value.D)}catch(_){t={error:_}}finally{try{l&&!l.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return s}return To(i.i)}function ny(){}function iy(){this.g=new ny}function MC(i,t,e){var s=e||"";try{zb(i,function(o,l){var f=o;Il(o)&&(f=_u(o)),t.push(s+l+"="+encodeURIComponent(f))})}catch(o){throw t.push(s+"type="+encodeURIComponent("_badmap")),o}}function zh(i,t,e,s,o){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,o(s)}catch(l){}}function bp(i){this.l=i.$b||null,this.j=i.ib||!1}function Sm(i,t){Sr.call(this),this.D=i,this.u=t,this.m=void 0,this.readyState=Cd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qb.prototype.cancel=function(){var i,t;if(this.i=Zb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var e=dm(this.g.values()),s=e.next();!s.done;s=e.next())s.value.cancel()}catch(l){i={error:l}}finally{try{s&&!s.done&&(t=e.return)&&t.call(e)}finally{if(i)throw i.error}}this.g.clear()}},ny.prototype.stringify=function(i){return kn.JSON.stringify(i,void 0)},ny.prototype.parse=function(i){return kn.JSON.parse(i,void 0)},er(bp,Hv),bp.prototype.g=function(){return new Sm(this.l,this.j)},bp.prototype.i=function(i){return function(){return i}}({}),er(Sm,Sr);var Cd=0;function Kb(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function wp(i){i.readyState=4,i.l=null,i.j=null,i.A=null,xp(i)}function xp(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Ut=Sm.prototype).open=function(i,t){if(this.readyState!=Cd)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=t,this.readyState=1,xp(this)},Ut.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(t.body=i),(this.D||kn).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wp(this)),this.readyState=Cd},Ut.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,xp(this)),this.g&&(this.readyState=3,xp(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==kn.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Kb(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},Ut.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var t=i.value?i.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!i.done}))&&(this.response=this.responseText+=t)}i.done?wp(this):xp(this),3==this.readyState&&Kb(this)}},Ut.Ua=function(i){this.g&&(this.response=this.responseText=i,wp(this))},Ut.Ta=function(i){this.g&&(this.response=i,wp(this))},Ut.ha=function(){this.g&&wp(this)},Ut.setRequestHeader=function(i,t){this.v.append(i,t)},Ut.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Ut.getAllResponseHeaders=function(){if(!this.h)return"";for(var i=[],t=this.h.entries(),e=t.next();!e.done;)i.push((e=e.value)[0]+": "+e[1]),e=t.next();return i.join("\r\n")},Object.defineProperty(Sm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var EC=kn.JSON.parse;function Qr(i){Sr.call(this),this.headers=new gp,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ry,this.K=this.L=!1}er(Qr,Sr);var ry="",oi=/^https?$/i,Yt=["POST","PUT"];function SC(i){return"content-type"==i.toLowerCase()}function sy(i,t){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=t,i.m=5,Qb(i),Am(i)}function Qb(i){i.D||(i.D=!0,yr(i,"complete"),yr(i,"error"))}function oy(i){if(i.h&&void 0!==Ui&&(!i.C[1]||4!=Ms(i)||2!=i.ba()))if(i.v&&4==Ms(i))Ob(i.Fa,0,i);else if(yr(i,"readystatechange"),4==Ms(i)){i.h=!1;try{var s,t=i.ba();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}if(!(s=e)){var o;if(o=0===t){var l=String(i.H).match(jb)[1]||null;if(!l&&kn.self&&kn.self.location){var f=kn.self.location.protocol;l=f.substr(0,f.length-1)}o=!oi.test(l?l.toLowerCase():"")}s=o}if(s)yr(i,"complete"),yr(i,"success");else{i.m=6;try{var _=2<Ms(i)?i.g.statusText:""}catch(w){_=""}i.j=_+" ["+i.ba()+"]",Qb(i)}}finally{Am(i)}}}function Am(i,t){if(i.g){Md(i);var e=i.g,s=i.C[0]?_n:null;i.g=null,i.C=null,t||yr(i,"ready");try{e.onreadystatechange=s}catch(o){}}}function Md(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(kn.clearTimeout(i.A),i.A=null)}function Ms(i){return i.g?i.g.readyState:0}function AC(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case ry:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Tm(i,t,e){e:{for(s in e){var s=!1;break e}s=!0}s||(e=function sE(i){var t="";return fc(i,function(e,s){t+=s,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof i?null!=e&&encodeURIComponent(String(e)):jn(i,t,e))}function Im(i,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[i]||t}function Ka(i){this.za=0,this.l=[],this.h=new ym,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Im("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Im("baseRetryDelayMs",5e3,i),this.$a=Im("retryDelaySeedMs",1e4,i),this.Ya=Im("forwardChannelMaxRetries",2,i),this.ra=Im("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new qb(i&&i.concurrentRequestLimit),this.Ca=new iy,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Cp(i){if(Rm(i),3==i.G){var t=i.V++,e=Ll(i.F);jn(e,"SID",i.J),jn(e,"RID",t),jn(e,"TYPE","terminate"),bu(i,e),(t=new fp(i,i.h,t,void 0)).K=2,t.v=_p(Ll(e)),e=!1,kn.navigator&&kn.navigator.sendBeacon&&(e=kn.navigator.sendBeacon(t.v.toString(),"")),!e&&kn.Image&&((new Image).src=t.v,e=!0),e||(t.g=tw(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Gh(t)}Jb(i)}function jh(i){i.g&&(Cc(i),i.g.cancel(),i.g=null)}function Rm(i){jh(i),i.u&&(kn.clearTimeout(i.u),i.u=null),Nl(i),i.i.cancel(),i.m&&("number"==typeof i.m&&kn.clearTimeout(i.m),i.m=null)}function Wh(i,t){i.l.push(new Xv(i.Za++,t)),3==i.G&&xc(i)}function xc(i){Jv(i.i)||i.m||(i.m=!0,Lv(i.Ha,i),i.C=0)}function ay(i,t){var e;e=t?t.m:i.V++;var s=Ll(i.F);jn(s,"SID",i.J),jn(s,"RID",e),jn(s,"AID",i.U),bu(i,s),i.o&&i.s&&Tm(s,i.o,i.s),e=new fp(i,i.h,e,i.C+1),null===i.o&&(e.H=i.s),t&&(i.l=t.D.concat(i.l)),t=Mp(i,e,1e3),e.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),ey(i.i,e),xm(e,s,t)}function bu(i,t){i.j&&zb({},function(e,s){jn(t,s,e)})}function Mp(i,t,e){e=Math.min(i.l.length,e);var s=i.j?Er(i.j.Oa,i.j,i):null;e:for(var o=i.l,l=-1;;){var f=["count="+e];-1==l?0<e?f.push("ofs="+(l=o[0].h)):l=0:f.push("ofs="+l);for(var _=!0,w=0;w<e;w++){var E=o[w].h,T=o[w].g;if(0>(E-=l))l=Math.max(0,o[w].h-100),_=!1;else try{MC(T,f,"req"+E+"_")}catch(F){s&&s(T)}}if(_){s=f.join("&");break e}}return i=i.l.splice(0,e),t.D=i,s}function Pm(i){i.g||i.u||(i.Y=1,Lv(i.Ga,i),i.A=0)}function ly(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=ia(Er(i.Ga,i),$s(i,i.A)),i.A++,0))}function Cc(i){null!=i.B&&(kn.clearTimeout(i.B),i.B=null)}function Dp(i){i.g=new fp(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var t=Ll(i.oa);jn(t,"RID","rpc"),jn(t,"SID",i.J),jn(t,"CI",i.N?"0":"1"),jn(t,"AID",i.U),bu(i,t),jn(t,"TYPE","xmlhttp"),i.o&&i.s&&Tm(t,i.o,i.s),i.K&&i.g.setTimeout(i.K);var e=i.g;i=i.la,e.K=1,e.v=_p(Ll(t)),e.s=null,e.U=!0,$a(e,i)}function Nl(i){null!=i.v&&(kn.clearTimeout(i.v),i.v=null)}function ra(i,t){var e=null;if(i.g==t){Nl(i),Cc(i),i.g=null;var s=2}else{if(!Em(i.i,t))return;e=t.D,ty(i.i,t),s=1}if(i.I=t.N,0!=i.G)if(t.i)if(1==s){e=t.s?t.s.length:0,t=Date.now()-t.F;var o=i.C;yr(s=Fl(),new Bb(s,e,t,o)),xc(i)}else Pm(i);else if(3==(o=t.o)||0==o&&0<i.I||!(1==s&&function Xb(i,t){return!($b(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=t.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=ia(Er(i.Ha,i,t),$s(i,i.C)),i.C++,0)))}(i,t)||2==s&&ly(i)))switch(e&&0<e.length&&(t=i.i,t.i=t.i.concat(e)),o){case 1:wu(i,5);break;case 4:wu(i,10);break;case 3:wu(i,6);break;default:wu(i,2)}}function $s(i,t){var e=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(e*=2),e*t}function wu(i,t){if(i.h.info("Error code "+t),2==t){var e=null;i.j&&(e=null);var s=Er(i.jb,i);e||(e=new wd("//www.google.com/images/cleardot.gif"),kn.location&&"http"==kn.location.protocol||xd(e,"https"),_p(e)),function DC(i,t){var e=new ym;if(kn.Image){var s=new Image;s.onload=Qt(zh,e,s,"TestLoadImage: loaded",!0,t),s.onerror=Qt(zh,e,s,"TestLoadImage: error",!1,t),s.onabort=Qt(zh,e,s,"TestLoadImage: abort",!1,t),s.ontimeout=Qt(zh,e,s,"TestLoadImage: timeout",!1,t),kn.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else t(!1)}(e.toString(),s)}else go(2);i.G=0,i.j&&i.j.va(t),Jb(i),Rm(i)}function Jb(i){i.G=0,i.I=-1,i.j&&((0!=Zb(i.i).length||0!=i.l.length)&&(i.i.i.length=0,To(i.l),i.l.length=0),i.j.ua())}function ew(i,t,e){var s=function yC(i){return i instanceof wd?Ll(i):new wd(i,void 0)}(e);if(""!=s.i)t&&mp(s,t+"."+s.i),Uh(s,s.m);else{var o=kn.location;s=function Zv(i,t,e,s){var o=new wd(null,void 0);return i&&xd(o,i),t&&mp(o,t),e&&Uh(o,e),s&&(o.l=s),o}(o.protocol,t?t+"."+o.hostname:o.hostname,+o.port,e)}return i.aa&&fc(i.aa,function(l,f){jn(s,f,l)}),e=i.sa,(t=i.D)&&e&&jn(s,t,e),jn(s,"VER",i.ma),bu(i,s),s}function tw(i,t,e){if(t&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Qr(e&&i.Ba&&!i.qa?new bp({ib:!0}):i.qa)).L=i.H,t}function nw(){}function Om(){if(Ol&&!(10<=Number(hC)))throw Error("Environmental error: no available transport.")}function Ro(i,t){Sr.call(this),this.g=new Ka(t),this.l=i,this.h=t&&t.messageUrlParams||null,i=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(i?i["X-WebChannel-Content-Type"]=t.messageContentType:i={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(i?i["X-WebChannel-Client-Profile"]=t.ya:i={"X-WebChannel-Client-Profile":t.ya}),this.g.P=i,(i=t&&t.httpHeadersOverwriteParam)&&!pd(i)&&(this.g.o=i),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!pd(t)&&(this.g.D=t,null!==(i=this.h)&&t in i&&t in(i=this.h)&&delete i[t]),this.j=new xu(this)}function km(i){zv.call(this);var t=i.__sm__;if(t){e:{for(var e in t){i=e;break e}i=void 0}(this.i=i)&&(i=this.i,t=null!==t&&i in t?t[i]:void 0),this.data=t}else this.data=i}function cy(){bm.call(this),this.status=1}function xu(i){this.g=i}(Ut=Qr.prototype).ea=function(i,t,e,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);t=t?t.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():jv.g(),this.C=function Vb(i){return i.h||(i.h=i.i())}(this.u?this.u:jv),this.g.onreadystatechange=Er(this.Fa,this);try{this.F=!0,this.g.open(t,String(i),!0),this.F=!1}catch(l){return void sy(this,l)}i=e||"";var o=new gp(this.headers);s&&zb(s,function(l,f){o.set(f,l)}),s=function Sb(i){e:{for(var t=SC,e=i.length,s="string"==typeof i?i.split(""):i,o=0;o<e;o++)if(o in s&&t.call(void 0,s[o],o,i)){t=o;break e}t=-1}return 0>t?null:"string"==typeof i?i.charAt(t):i[t]}(o.T()),e=kn.FormData&&i instanceof kn.FormData,!(0<=Eb(Yt,t))||s||e||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(l,f){this.g.setRequestHeader(f,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Md(this),0<this.B&&((this.K=function Za(i){return Ol&&function qs(){return function gd(i){var t=md;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=i(9)}(function(){for(var i=0,t=Cs(String(ei)).split("."),e=Cs("9").split("."),s=Math.max(t.length,e.length),o=0;0==i&&o<s;o++){var l=t[o]||"",f=e[o]||"";do{if(l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],0==l[0].length&&0==f[0].length)break;i=Iv(0==l[1].length?0:parseInt(l[1],10),0==f[1].length?0:parseInt(f[1],10))||Iv(0==l[2].length,0==f[2].length)||Iv(l[2],f[2]),l=l[3],f=f[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Er(this.pa,this)):this.A=Ob(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(l){sy(this,l)}},Ut.pa=function(){void 0!==Ui&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yr(this,"timeout"),this.abort(8))},Ut.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,yr(this,"complete"),yr(this,"abort"),Am(this))},Ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Am(this,!0)),Qr.Z.M.call(this)},Ut.Fa=function(){this.s||(this.F||this.v||this.l?oy(this):this.cb())},Ut.cb=function(){oy(this)},Ut.ba=function(){try{return 2<Ms(this)?this.g.status:-1}catch(i){return-1}},Ut.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Ut.Qa=function(i){if(this.g){var t=this.g.responseText;return i&&0==t.indexOf(i)&&(t=t.substring(i.length)),EC(t)}},Ut.Da=function(){return this.m},Ut.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ut=Ka.prototype).ma=8,Ut.G=1,Ut.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(t){}},Ut.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;var t=new fp(this,this.h,i,void 0),e=this.s;if(this.P&&(e?na(e=pc(e),this.P):e=this.P),null===this.o&&(t.H=e),this.ja)e:{for(var s=0,o=0;o<this.l.length;o++){var l=this.l[o];if(void 0===(l="__data__"in l.g&&"string"==typeof(l=l.g.__data__)?l.length:void 0))break;if(4096<(s+=l)){s=o;break e}if(4096===s||o===this.l.length-1){s=o+1;break e}}s=1e3}else s=1e3;s=Mp(this,t,s),jn(o=Ll(this.F),"RID",i),jn(o,"CVER",22),this.D&&jn(o,"X-HTTP-Session-Id",this.D),bu(this,o),this.o&&e&&Tm(o,this.o,e),ey(this.i,t),this.Ra&&jn(o,"TYPE","init"),this.ja?(jn(o,"$req",s),jn(o,"SID","null"),t.$=!0,xm(t,o,null)):xm(t,o,s),this.G=2}}else 3==this.G&&(i?ay(this,i):0==this.l.length||Jv(this.i)||ay(this))},Ut.Ga=function(){if(this.u=null,Dp(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=ia(Er(this.bb,this),i)}},Ut.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,go(10),jh(this),Dp(this))},Ut.ab=function(){null!=this.v&&(this.v=null,jh(this),ly(this),go(19))},Ut.jb=function(i){i?(this.h.info("Successfully pinged google.com"),go(2)):(this.h.info("Failed to ping google.com"),go(1))},(Ut=nw.prototype).xa=function(){},Ut.wa=function(){},Ut.va=function(){},Ut.ua=function(){},Ut.Oa=function(){},Om.prototype.g=function(i,t){return new Ro(i,t)},er(Ro,Sr),Ro.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,t=this.l,e=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Lv(Er(i.hb,i,t))),go(0),i.W=t,i.aa=e||{},i.N=i.X,i.F=ew(i,null,i.W),xc(i)},Ro.prototype.close=function(){Cp(this.g)},Ro.prototype.u=function(i){if("string"==typeof i){var t={};t.__data__=i,Wh(this.g,t)}else this.v?((t={}).__data__=_u(i),Wh(this.g,t)):Wh(this.g,i)},Ro.prototype.M=function(){this.g.j=null,delete this.j,Cp(this.g),delete this.g,Ro.Z.M.call(this)},er(km,zv),er(cy,bm),er(xu,nw),xu.prototype.xa=function(){yr(this.g,"a")},xu.prototype.wa=function(i){yr(this.g,new km(i))},xu.prototype.va=function(i){yr(this.g,new cy(i))},xu.prototype.ua=function(){yr(this.g,"b")},Om.prototype.createWebChannel=Om.prototype.g,Ro.prototype.send=Ro.prototype.u,Ro.prototype.open=Ro.prototype.m,Ro.prototype.close=Ro.prototype.close,yc.NO_ERROR=0,yc.TIMEOUT=8,yc.HTTP_ERROR=6,Uv.COMPLETE="complete",Gb.EventType=hp,hp.OPEN="a",hp.CLOSE="b",hp.ERROR="c",hp.MESSAGE="d",Sr.prototype.listen=Sr.prototype.N,Qr.prototype.listenOnce=Qr.prototype.O,Qr.prototype.getLastError=Qr.prototype.La,Qr.prototype.getLastErrorCode=Qr.prototype.Da,Qr.prototype.getStatus=Qr.prototype.ba,Qr.prototype.getResponseJson=Qr.prototype.Qa,Qr.prototype.getResponseText=Qr.prototype.ga,Qr.prototype.send=Qr.prototype.ea;var Ep=yc,uy=Uv,Cu=vu,Fm_PROXY=10,Fm_NOPROXY=11,dy=bp,Sp=Gb,Ap=Qr,Po=function(){function i(t,e){var s=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(o){return s.t(o)},this.i=function(o){return e.writeSequenceNumber(o)})}return i.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},i.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},i}();Po.o=-1;var $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_t=function(i){function t(e,s){var o=this;return(o=i.call(this,s)||this).code=e,o.message=s,o.name="FirebaseError",o.toString=function(){return o.name+": [code="+o.code+"]: "+o.message},o}return(0,Q.ZT)(t,i),t}(Error),ya=new Ya.Yd("@firebase/firestore");function Yh(){return ya.logLevel}function Tt(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(ya.logLevel<=Ya.in.DEBUG){var s=t.map(Lm);ya.debug.apply(ya,(0,Q.ev)(["Firestore (8.10.0): "+i],s))}}function Nr(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(ya.logLevel<=Ya.in.ERROR){var s=t.map(Lm);ya.error.apply(ya,(0,Q.ev)(["Firestore (8.10.0): "+i],s))}}function Dd(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(ya.logLevel<=Ya.in.WARN){var s=t.map(Lm);ya.warn.apply(ya,(0,Q.ev)(["Firestore (8.10.0): "+i],s))}}function Lm(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(e){return i}}function dn(i){void 0===i&&(i="Unexpected state");var t="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+i;throw Nr(t),new Error(t)}function En(i,t){i||dn()}function zt(i,t){return i}function hy(i){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(var s=0;s<i;s++)e[s]=Math.floor(256*Math.random());return e}var fy=function(){function i(){}return i.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,s="";s.length<20;)for(var o=hy(40),l=0;l<o.length;++l)s.length<20&&o[l]<e&&(s+=t.charAt(o[l]%t.length));return s},i}();function ai(i,t){return i<t?-1:i>t?1:0}function Mu(i,t,e){return i.length===t.length&&i.every(function(s,o){return e(s,t[o])})}function Nm(i){return i+"\0"}var Tr=function(){function i(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new _t($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new _t($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new _t($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _t($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return i.now=function(){return i.fromMillis(Date.now())},i.fromDate=function(t){return i.fromMillis(t.getTime())},i.fromMillis=function(t){var e=Math.floor(t/1e3);return new i(e,Math.floor(1e6*(t-1e3*e)))},i.prototype.toDate=function(){return new Date(this.toMillis())},i.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},i.prototype._compareTo=function(t){return this.seconds===t.seconds?ai(this.nanoseconds,t.nanoseconds):ai(this.seconds,t.seconds)},i.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},i.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},i.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},i.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},i}(),ni=function(){function i(t){this.timestamp=t}return i.fromTimestamp=function(t){return new i(t)},i.min=function(){return new i(new Tr(0,0))},i.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},i.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},i.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},i.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},i.prototype.toTimestamp=function(){return this.timestamp},i}();function py(i){var t=0;for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function Ed(i,t){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function Bm(i){for(var t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}var gy=function(){function i(t,e,s){void 0===e?e=0:e>t.length&&dn(),void 0===s?s=t.length-e:s>t.length-e&&dn(),this.segments=t,this.offset=e,this.len=s}return Object.defineProperty(i.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(t){return 0===i.comparator(this,t)},i.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof i?t.forEach(function(s){e.push(s)}):e.push(t),this.construct(e)},i.prototype.limit=function(){return this.offset+this.length},i.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},i.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},i.prototype.firstSegment=function(){return this.segments[this.offset]},i.prototype.lastSegment=function(){return this.get(this.length-1)},i.prototype.get=function(t){return this.segments[this.offset+t]},i.prototype.isEmpty=function(){return 0===this.length},i.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},i.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},i.prototype.forEach=function(t){for(var e=this.offset,s=this.limit();e<s;e++)t(this.segments[e])},i.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},i.comparator=function(t,e){for(var s=Math.min(t.length,e.length),o=0;o<s;o++){var l=t.get(o),f=e.get(o);if(l<f)return-1;if(l>f)return 1}return t.length<e.length?-1:t.length>e.length?1:0},i}(),ui=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return(0,Q.ZT)(t,i),t.prototype.construct=function(e,s,o){return new t(e,s,o)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];for(var o=[],l=0,f=e;l<f.length;l++){var _=f[l];if(_.indexOf("//")>=0)throw new _t($e.INVALID_ARGUMENT,"Invalid segment ("+_+"). Paths must not contain // in them.");o.push.apply(o,_.split("/").filter(function(w){return w.length>0}))}return new t(o)},t.emptyPath=function(){return new t([])},t}(gy),Qa=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xa=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return(0,Q.ZT)(t,i),t.prototype.construct=function(e,s,o){return new t(e,s,o)},t.isValidIdentifier=function(e){return Qa.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var s=[],o="",l=0,f=function(){if(0===o.length)throw new _t($e.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");s.push(o),o=""},_=!1;l<e.length;){var w=e[l];if("\\"===w){if(l+1===e.length)throw new _t($e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var E=e[l+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new _t($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=E,l+=2}else"`"===w?(_=!_,l++):"."!==w||_?(o+=w,l++):(f(),l++)}if(f(),_)throw new _t($e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(s)},t.emptyPath=function(){return new t([])},t}(gy),Sd=function(){function i(t){this.fields=t,t.sort(Xa.comparator)}return i.prototype.covers=function(t){for(var e=0,s=this.fields;e<s.length;e++)if(s[e].isPrefixOf(t))return!0;return!1},i.prototype.isEqual=function(t){return Mu(this.fields,t.fields,function(e,s){return e.isEqual(s)})},i}(),mo=function(){function i(t){this.binaryString=t}return i.fromBase64String=function(t){return new i(atob(t))},i.fromUint8Array=function(t){return new i(function(e){for(var s="",o=0;o<e.length;++o)s+=String.fromCharCode(e[o]);return s}(t))},i.prototype.toBase64=function(){return btoa(this.binaryString)},i.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),s=0;s<t.length;s++)e[s]=t.charCodeAt(s);return e}(this.binaryString)},i.prototype.approximateByteSize=function(){return 2*this.binaryString.length},i.prototype.compareTo=function(t){return ai(this.binaryString,t.binaryString)},i.prototype.isEqual=function(t){return this.binaryString===t.binaryString},i}();mo.EMPTY_BYTE_STRING=new mo("");var IC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ba(i){if(En(!!i),"string"==typeof i){var t=0,e=IC.exec(i);if(En(!!e),e[1]){var s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}var o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:Br(i.seconds),nanos:Br(i.nanos)}}function Br(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Du(i){return"string"==typeof i?mo.fromBase64String(i):mo.fromUint8Array(i)}function my(i){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==i?void 0:i.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function Vm(i){var t=i.mapValue.fields.__previous_value__;return my(t)?Vm(t):t}function Tp(i){var t=ba(i.mapValue.fields.__local_write_time__.timestampValue);return new Tr(t.seconds,t.nanos)}function In(i){return null==i}function Ip(i){return 0===i&&1/i==-1/0}function Gm(i){return"number"==typeof i&&Number.isInteger(i)&&!Ip(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}var gn=function(){function i(t){this.path=t}return i.fromPath=function(t){return new i(ui.fromString(t))},i.fromName=function(t){return new i(ui.fromString(t).popFirst(5))},i.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},i.prototype.isEqual=function(t){return null!==t&&0===ui.comparator(this.path,t.path)},i.prototype.toString=function(){return this.path.toString()},i.comparator=function(t,e){return ui.comparator(t.path,e.path)},i.isDocumentKey=function(t){return t.length%2==0},i.fromSegments=function(t){return new i(new ui(t.slice()))},i}();function Ja(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?my(i)?4:10:dn()}function Vr(i,t){var o,e=Ja(i);if(e!==Ja(t))return!1;switch(e){case 0:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return Tp(i).isEqual(Tp(t));case 3:return function(s,o){if("string"==typeof s.timestampValue&&"string"==typeof o.timestampValue&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;var l=ba(s.timestampValue),f=ba(o.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return o=t,Du(i.bytesValue).isEqual(Du(o.bytesValue));case 7:return i.referenceValue===t.referenceValue;case 8:return function(s,o){return Br(s.geoPointValue.latitude)===Br(o.geoPointValue.latitude)&&Br(s.geoPointValue.longitude)===Br(o.geoPointValue.longitude)}(i,t);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Br(s.integerValue)===Br(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){var l=Br(s.doubleValue),f=Br(o.doubleValue);return l===f?Ip(l)===Ip(f):isNaN(l)&&isNaN(f)}return!1}(i,t);case 9:return Mu(i.arrayValue.values||[],t.arrayValue.values||[],Vr);case 10:return function(s,o){var l=s.mapValue.fields||{},f=o.mapValue.fields||{};if(py(l)!==py(f))return!1;for(var _ in l)if(l.hasOwnProperty(_)&&(void 0===f[_]||!Vr(l[_],f[_])))return!1;return!0}(i,t);default:return dn()}}function qh(i,t){return void 0!==(i.values||[]).find(function(e){return Vr(e,t)})}function $h(i,t){var o,l,f,_,e=Ja(i),s=Ja(t);if(e!==s)return ai(e,s);switch(e){case 0:return 0;case 1:return ai(i.booleanValue,t.booleanValue);case 2:return l=t,(f=Br((o=i).integerValue||o.doubleValue))<(_=Br(l.integerValue||l.doubleValue))?-1:f>_?1:f===_?0:isNaN(f)?isNaN(_)?0:-1:1;case 3:return Um(i.timestampValue,t.timestampValue);case 4:return Um(Tp(i),Tp(t));case 5:return ai(i.stringValue,t.stringValue);case 6:return function(o,l){var f=Du(o),_=Du(l);return f.compareTo(_)}(i.bytesValue,t.bytesValue);case 7:return function(o,l){for(var f=o.split("/"),_=l.split("/"),w=0;w<f.length&&w<_.length;w++){var E=ai(f[w],_[w]);if(0!==E)return E}return ai(f.length,_.length)}(i.referenceValue,t.referenceValue);case 8:return function(o,l){var f=ai(Br(o.latitude),Br(l.latitude));return 0!==f?f:ai(Br(o.longitude),Br(l.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return function(o,l){for(var f=o.values||[],_=l.values||[],w=0;w<f.length&&w<_.length;++w){var E=$h(f[w],_[w]);if(E)return E}return ai(f.length,_.length)}(i.arrayValue,t.arrayValue);case 10:return function(o,l){var f=o.fields||{},_=Object.keys(f),w=l.fields||{},E=Object.keys(w);_.sort(),E.sort();for(var T=0;T<_.length&&T<E.length;++T){var F=ai(_[T],E[T]);if(0!==F)return F;var G=$h(f[_[T]],w[E[T]]);if(0!==G)return G}return ai(_.length,E.length)}(i.mapValue,t.mapValue);default:throw dn()}}function Um(i,t){if("string"==typeof i&&"string"==typeof t&&i.length===t.length)return ai(i,t);var e=ba(i),s=ba(t),o=ai(e.seconds,s.seconds);return 0!==o?o:ai(e.nanos,s.nanos)}function el(i){return Rp(i)}function Rp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(o=ba(i.timestampValue)).seconds+","+o.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?Du(i.bytesValue).toBase64():"referenceValue"in i?gn.fromName(i.referenceValue).toString():"geoPointValue"in i?"geo("+(t=i.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in i?function(s){for(var o="[",l=!0,f=0,_=s.values||[];f<_.length;f++)l?l=!1:o+=",",o+=Rp(_[f]);return o+"]"}(i.arrayValue):"mapValue"in i?function(s){for(var o="{",l=!0,f=0,_=Object.keys(s.fields||{}).sort();f<_.length;f++){var w=_[f];l?l=!1:o+=",",o+=w+":"+Rp(s.fields[w])}return o+"}"}(i.mapValue):dn();var o,t}function Pp(i,t){return{referenceValue:"projects/"+i.projectId+"/databases/"+i.database+"/documents/"+t.path.canonicalString()}}function Op(i){return!!i&&"integerValue"in i}function sw(i){return!!i&&"arrayValue"in i}function _y(i){return!!i&&"nullValue"in i}function ow(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ad(i){return!!i&&"mapValue"in i}function Eu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){var t={mapValue:{fields:{}}};return Ed(i.mapValue.fields,function(o,l){return t.mapValue.fields[o]=Eu(l)}),t}if(i.arrayValue){for(var e={arrayValue:{values:[]}},s=0;s<(i.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Eu(i.arrayValue.values[s]);return e}return Object.assign({},i)}var _o=function(){function i(t){this.value=t}return i.empty=function(){return new i({mapValue:{}})},i.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,s=0;s<t.length-1;++s)if(!Ad(e=(e.mapValue.fields||{})[t.get(s)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},i.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Eu(e)},i.prototype.setAll=function(t){var e=this,s=Xa.emptyPath(),o={},l=[];t.forEach(function(_,w){if(!s.isImmediateParentOf(w)){var E=e.getFieldsMap(s);e.applyChanges(E,o,l),o={},l=[],s=w.popLast()}_?o[w.lastSegment()]=Eu(_):l.push(w.lastSegment())});var f=this.getFieldsMap(s);this.applyChanges(f,o,l)},i.prototype.delete=function(t){var e=this.field(t.popLast());Ad(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},i.prototype.isEqual=function(t){return Vr(this.value,t.value)},i.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var s=0;s<t.length;++s){var o=e.mapValue.fields[t.get(s)];Ad(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(s)]=o),e=o}return e.mapValue.fields},i.prototype.applyChanges=function(t,e,s){Ed(e,function(_,w){return t[_]=w});for(var o=0,l=s;o<l.length;o++)delete t[l[o]]},i.prototype.clone=function(){return new i(Eu(this.value))},i}();function Hm(i){var t=[];return Ed(i.fields,function(e,s){var o=new Xa([e]);if(Ad(s)){var l=Hm(s.mapValue).fields;if(0===l.length)t.push(o);else for(var f=0,_=l;f<_.length;f++)t.push(o.child(_[f]))}else t.push(o)}),new Sd(t)}var ds=function(){function i(t,e,s,o,l){this.key=t,this.documentType=e,this.version=s,this.data=o,this.documentState=l}return i.newInvalidDocument=function(t){return new i(t,0,ni.min(),_o.empty(),0)},i.newFoundDocument=function(t,e,s){return new i(t,1,e,s,0)},i.newNoDocument=function(t,e){return new i(t,2,e,_o.empty(),0)},i.newUnknownDocument=function(t,e){return new i(t,3,e,_o.empty(),2)},i.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},i.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=_o.empty(),this.documentState=0,this},i.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=_o.empty(),this.documentState=2,this},i.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},i.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(i.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),i.prototype.isValidDocument=function(){return 0!==this.documentType},i.prototype.isFoundDocument=function(){return 1===this.documentType},i.prototype.isNoDocument=function(){return 2===this.documentType},i.prototype.isUnknownDocument=function(){return 3===this.documentType},i.prototype.isEqual=function(t){return t instanceof i&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},i.prototype.clone=function(){return new i(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},i.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},i}(),aE=function(i,t,e,s,o,l,f){void 0===t&&(t=null),void 0===e&&(e=[]),void 0===s&&(s=[]),void 0===o&&(o=null),void 0===l&&(l=null),void 0===f&&(f=null),this.path=i,this.collectionGroup=t,this.orderBy=e,this.filters=s,this.limit=o,this.startAt=l,this.endAt=f,this.h=null};function vy(i,t,e,s,o,l,f){return void 0===t&&(t=null),void 0===e&&(e=[]),void 0===s&&(s=[]),void 0===o&&(o=null),void 0===l&&(l=null),void 0===f&&(f=null),new aE(i,t,e,s,o,l,f)}function kp(i){var t=zt(i);if(null===t.h){var e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(function(s){return(o=s).field.canonicalString()+o.op.toString()+el(o.value);var o}).join(","),e+="|ob:",e+=t.orderBy.map(function(s){return(o=s).field.canonicalString()+o.dir;var o}).join(","),In(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=wy(t.startAt)),t.endAt&&(e+="|ub:",e+=wy(t.endAt)),t.h=e}return t.h}function Td(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<i.orderBy.length;e++)if(!Yi(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(var s=0;s<i.filters.length;s++)if((o=i.filters[s]).op!==(l=t.filters[s]).op||!o.field.isEqual(l.field)||!Vr(o.value,l.value))return!1;var o,l;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!Np(i.startAt,t.startAt)&&Np(i.endAt,t.endAt)}function Id(i){return gn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}var Oo=function(i){function t(e,s,o){var l=this;return(l=i.call(this)||this).field=e,l.op=s,l.value=o,l}return(0,Q.ZT)(t,i),t.create=function(e,s,o){return e.isKeyField()?"in"===s||"not-in"===s?this.l(e,s,o):new lE(e,s,o):"array-contains"===s?new by(e,o):"in"===s?new zm(e,o):"not-in"===s?new Mc(e,o):"array-contains-any"===s?new jm(e,o):new t(e,s,o)},t.l=function(e,s,o){return"in"===s?new aw(e,o):new cE(e,o)},t.prototype.matches=function(e){var s=e.data.field(this.field);return"!="===this.op?null!==s&&this.m($h(s,this.value)):null!==s&&Ja(this.value)===Ja(s)&&this.m($h(s,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dn()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),lE=function(i){function t(e,s,o){var l=this;return(l=i.call(this,e,s,o)||this).key=gn.fromName(o.referenceValue),l}return(0,Q.ZT)(t,i),t.prototype.matches=function(e){var s=gn.comparator(e.key,this.key);return this.m(s)},t}(Oo),aw=function(i){function t(e,s){var o=this;return(o=i.call(this,e,"in",s)||this).keys=yy(0,s),o}return(0,Q.ZT)(t,i),t.prototype.matches=function(e){return this.keys.some(function(s){return s.isEqual(e.key)})},t}(Oo),cE=function(i){function t(e,s){var o=this;return(o=i.call(this,e,"not-in",s)||this).keys=yy(0,s),o}return(0,Q.ZT)(t,i),t.prototype.matches=function(e){return!this.keys.some(function(s){return s.isEqual(e.key)})},t}(Oo);function yy(i,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(s){return gn.fromName(s.referenceValue)})}var by=function(i){function t(e,s){return i.call(this,e,"array-contains",s)||this}return(0,Q.ZT)(t,i),t.prototype.matches=function(e){var s=e.data.field(this.field);return sw(s)&&qh(s.arrayValue,this.value)},t}(Oo),zm=function(i){function t(e,s){return i.call(this,e,"in",s)||this}return(0,Q.ZT)(t,i),t.prototype.matches=function(e){var s=e.data.field(this.field);return null!==s&&qh(this.value.arrayValue,s)},t}(Oo),Mc=function(i){function t(e,s){return i.call(this,e,"not-in",s)||this}return(0,Q.ZT)(t,i),t.prototype.matches=function(e){if(qh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var s=e.data.field(this.field);return null!==s&&!qh(this.value.arrayValue,s)},t}(Oo),jm=function(i){function t(e,s){return i.call(this,e,"array-contains-any",s)||this}return(0,Q.ZT)(t,i),t.prototype.matches=function(e){var s=this,o=e.data.field(this.field);return!(!sw(o)||!o.arrayValue.values)&&o.arrayValue.values.some(function(l){return qh(s.value.arrayValue,l)})},t}(Oo),Fp=function(i,t){this.position=i,this.before=t};function wy(i){return(i.before?"b":"a")+":"+i.position.map(function(t){return el(t)}).join(",")}var Lp=function(i,t){void 0===t&&(t="asc"),this.field=i,this.dir=t};function Yi(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}function lw(i,t,e){for(var s=0,o=0;o<i.position.length;o++){var l=t[o],f=i.position[o];if(s=l.field.isKeyField()?gn.comparator(gn.fromName(f.referenceValue),e.key):$h(f,e.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return i.before?s<=0:s<0}function Np(i,t){if(null===i)return null===t;if(null===t||i.before!==t.before||i.position.length!==t.position.length)return!1;for(var e=0;e<i.position.length;e++)if(!Vr(i.position[e],t.position[e]))return!1;return!0}var wa=function(i,t,e,s,o,l,f,_){void 0===t&&(t=null),void 0===e&&(e=[]),void 0===s&&(s=[]),void 0===o&&(o=null),void 0===l&&(l="F"),void 0===f&&(f=null),void 0===_&&(_=null),this.path=i,this.collectionGroup=t,this.explicitOrderBy=e,this.filters=s,this.limit=o,this.limitType=l,this.startAt=f,this.endAt=_,this.p=null,this.T=null};function Wm(i,t,e,s,o,l,f,_){return new wa(i,t,e,s,o,l,f,_)}function Ds(i){return new wa(i)}function Ns(i){return!In(i.limit)&&"F"===i.limitType}function sa(i){return!In(i.limit)&&"L"===i.limitType}function Zh(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Dc(i){for(var t=0,e=i.filters;t<e.length;t++){var s=e[t];if(s.g())return s.field}return null}function Ec(i){return null!==i.collectionGroup}function xa(i){var t=zt(i);if(null===t.p){t.p=[];var e=Dc(t),s=Zh(t);if(null!==e&&null===s)e.isKeyField()||t.p.push(new Lp(e)),t.p.push(new Lp(Xa.keyField(),"asc"));else{for(var o=!1,l=0,f=t.explicitOrderBy;l<f.length;l++){var _=f[l];t.p.push(_),_.field.isKeyField()&&(o=!0)}if(!o){var w=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Lp(Xa.keyField(),w))}}}return t.p}function hs(i){var t=zt(i);if(!t.T)if("F"===t.limitType)t.T=vy(t.path,t.collectionGroup,xa(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var e=[],s=0,o=xa(t);s<o.length;s++){var l=o[s];e.push(new Lp(l.field,"desc"===l.dir?"asc":"desc"))}var _=t.endAt?new Fp(t.endAt.position,!t.endAt.before):null,w=t.startAt?new Fp(t.startAt.position,!t.startAt.before):null;t.T=vy(t.path,t.collectionGroup,e,t.filters,t.limit,_,w)}return t.T}function Rd(i,t,e){return new wa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function Zs(i,t){return Td(hs(i),hs(t))&&i.limitType===t.limitType}function Ym(i){return kp(hs(i))+"|lt:"+i.limitType}function Kh(i){return"Query(target="+(e=(t=hs(i)).path.canonicalString(),null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(s){return(o=s).field.canonicalString()+" "+o.op+" "+el(o.value);var o}).join(", ")+"]"),In(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(s){return(o=s).field.canonicalString()+" ("+o.dir+")";var o}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+wy(t.startAt)),t.endAt&&(e+=", endAt: "+wy(t.endAt)),"Target("+e+"); limitType=")+i.limitType+")";var t,e}function tl(i,t){return t.isFoundDocument()&&(o=(s=t).key.path,null!==(e=i).collectionGroup?s.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(o):gn.isDocumentKey(e.path)?e.path.isEqual(o):e.path.isImmediateParentOf(o))&&function(e,s){for(var o=0,l=e.explicitOrderBy;o<l.length;o++){var f=l[o];if(!f.field.isKeyField()&&null===s.data.field(f.field))return!1}return!0}(i,t)&&function(e,s){for(var o=0,l=e.filters;o<l.length;o++)if(!l[o].matches(s))return!1;return!0}(i,t)&&function(e,s){return!(e.startAt&&!lw(e.startAt,xa(e),s)||e.endAt&&lw(e.endAt,xa(e),s))}(i,t);var e,s,o}function Bp(i){return function(t,e){for(var s=!1,o=0,l=xa(i);o<l.length;o++){var f=l[o],_=xy(f,t,e);if(0!==_)return _;s=s||f.field.isKeyField()}return 0}}function xy(i,t,e){var o,f,_,w,s=i.field.isKeyField()?gn.comparator(t.key,e.key):(f=e,_=t.data.field(o=i.field),w=f.data.field(o),null!==_&&null!==w?$h(_,w):dn());switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return dn()}}function qm(i,t){if(i.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ip(t)?"-0":t}}function Cy(i){return{integerValue:""+i}}function Sc(i,t){return Gm(t)?Cy(t):qm(i,t)}var Ca=function(){this._=void 0};function Qh(i,t,e){return i instanceof Ma?(l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(s=e).seconds,nanos:s.nanoseconds}}}},(o=t)&&(l.fields.__previous_value__=o),{mapValue:l}):i instanceof Au?$m(i,t):i instanceof Tu?Vp(i,t):function(s,o){var l=Su(s,o),f=Od(l)+Od(s.A);return Op(l)&&Op(s.A)?Cy(f):qm(s.R,f)}(i,t);var s,o,l}function Pd(i,t,e){return i instanceof Au?$m(i,t):i instanceof Tu?Vp(i,t):e}function Su(i,t){return i instanceof Da?Op(e=t)||(s=e)&&"doubleValue"in s?t:{integerValue:0}:null;var s,e}var Ma=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return(0,Q.ZT)(t,i),t}(Ca),Au=function(i){function t(e){var s=this;return(s=i.call(this)||this).elements=e,s}return(0,Q.ZT)(t,i),t}(Ca);function $m(i,t){for(var e=Xh(t),s=function(f){e.some(function(_){return Vr(_,f)})||e.push(f)},o=0,l=i.elements;o<l.length;o++)s(l[o]);return{arrayValue:{values:e}}}var Tu=function(i){function t(e){var s=this;return(s=i.call(this)||this).elements=e,s}return(0,Q.ZT)(t,i),t}(Ca);function Vp(i,t){for(var e=Xh(t),s=function(f){e=e.filter(function(_){return!Vr(_,f)})},o=0,l=i.elements;o<l.length;o++)s(l[o]);return{arrayValue:{values:e}}}var Da=function(i){function t(e,s){var o=this;return(o=i.call(this)||this).R=e,o.A=s,o}return(0,Q.ZT)(t,i),t}(Ca);function Od(i){return Br(i.integerValue||i.doubleValue)}function Xh(i){return sw(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}var Gp=function(i,t){this.field=i,this.transform=t},Jh=function(i,t){this.version=i,this.transformResults=t},Ks=function(){function i(t,e){this.updateTime=t,this.exists=e}return i.none=function(){return new i},i.exists=function(t){return new i(void 0,t)},i.updateTime=function(t){return new i(t)},Object.defineProperty(i.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},i}();function ef(i,t){return void 0!==i.updateTime?t.isFoundDocument()&&t.version.isEqual(i.updateTime):void 0===i.exists||i.exists===t.isFoundDocument()}var Iu=function(){};function Up(i,t,e){var s,o,l,f,_;i instanceof tf?(o=t,l=e,f=(s=i).value.clone(),_=nl(s.fieldTransforms,o,l.transformResults),f.setAll(_),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()):i instanceof Bl?function(s,o,l){if(ef(s.precondition,o)){var f=nl(s.fieldTransforms,o,l.transformResults),_=o.data;_.setAll(Zm(s)),_.setAll(f),o.convertToFoundDocument(l.version,_).setHasCommittedMutations()}else o.convertToUnknownDocument(l.version)}(i,t,e):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,t,e)}function kd(i,t,e){var o;i instanceof tf?function(s,o,l){if(ef(s.precondition,o)){var f=s.value.clone(),_=Km(s.fieldTransforms,l,o);f.setAll(_),o.convertToFoundDocument(vo(o),f).setHasLocalMutations()}}(i,t,e):i instanceof Bl?function(s,o,l){if(ef(s.precondition,o)){var f=Km(s.fieldTransforms,l,o),_=o.data;_.setAll(Zm(s)),_.setAll(f),o.convertToFoundDocument(vo(o),_).setHasLocalMutations()}}(i,t,e):ef(i.precondition,o=t)&&o.convertToNoDocument(ni.min())}function Es(i,t){for(var e=null,s=0,o=i.fieldTransforms;s<o.length;s++){var l=o[s],f=t.data.field(l.field),_=Su(l.transform,f||null);null!=_&&(null==e&&(e=_o.empty()),e.set(l.field,_))}return e||null}function My(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&(s=t.fieldTransforms,!!(void 0===(e=i.fieldTransforms)&&void 0===s||e&&s&&Mu(e,s,function(o,l){return(f=o).field.isEqual((_=l).field)&&(E=_.transform,(w=f.transform)instanceof Au&&E instanceof Au||w instanceof Tu&&E instanceof Tu?Mu(w.elements,E.elements,Vr):w instanceof Da&&E instanceof Da?Vr(w.A,E.A):w instanceof Ma&&E instanceof Ma);var f,_,w,E})))&&(0===i.type?i.value.isEqual(t.value):1!==i.type||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask));var e,s}function vo(i){return i.isFoundDocument()?i.version:ni.min()}var tf=function(i){function t(e,s,o,l){void 0===l&&(l=[]);var f=this;return(f=i.call(this)||this).key=e,f.value=s,f.precondition=o,f.fieldTransforms=l,f.type=0,f}return(0,Q.ZT)(t,i),t}(Iu),Bl=function(i){function t(e,s,o,l,f){void 0===f&&(f=[]);var _=this;return(_=i.call(this)||this).key=e,_.data=s,_.fieldMask=o,_.precondition=l,_.fieldTransforms=f,_.type=1,_}return(0,Q.ZT)(t,i),t}(Iu);function Zm(i){var t=new Map;return i.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var s=i.data.field(e);t.set(e,s)}}),t}function nl(i,t,e){var s=new Map;En(i.length===e.length);for(var o=0;o<e.length;o++){var l=i[o],f=l.transform,_=t.data.field(l.field);s.set(l.field,Pd(f,_,e[o]))}return s}function Km(i,t,e){for(var s=new Map,o=0,l=i;o<l.length;o++){var f=l[o],_=f.transform,w=e.data.field(f.field);s.set(f.field,Qh(_,w,t))}return s}var Xr,Bn,Ac=function(i){function t(e,s){var o=this;return(o=i.call(this)||this).key=e,o.precondition=s,o.type=2,o.fieldTransforms=[],o}return(0,Q.ZT)(t,i),t}(Iu),Vl=function(i){function t(e,s){var o=this;return(o=i.call(this)||this).key=e,o.precondition=s,o.type=3,o.fieldTransforms=[],o}return(0,Q.ZT)(t,i),t}(Iu),cw=function(i){this.count=i};function Qm(i){switch(i){case $e.OK:return dn();case $e.CANCELLED:case $e.UNKNOWN:case $e.DEADLINE_EXCEEDED:case $e.RESOURCE_EXHAUSTED:case $e.INTERNAL:case $e.UNAVAILABLE:case $e.UNAUTHENTICATED:return!1;case $e.INVALID_ARGUMENT:case $e.NOT_FOUND:case $e.ALREADY_EXISTS:case $e.PERMISSION_DENIED:case $e.FAILED_PRECONDITION:case $e.ABORTED:case $e.OUT_OF_RANGE:case $e.UNIMPLEMENTED:case $e.DATA_LOSS:return!0;default:return dn()}}function Hp(i){if(void 0===i)return Nr("GRPC error has no .code"),$e.UNKNOWN;switch(i){case Xr.OK:return $e.OK;case Xr.CANCELLED:return $e.CANCELLED;case Xr.UNKNOWN:return $e.UNKNOWN;case Xr.DEADLINE_EXCEEDED:return $e.DEADLINE_EXCEEDED;case Xr.RESOURCE_EXHAUSTED:return $e.RESOURCE_EXHAUSTED;case Xr.INTERNAL:return $e.INTERNAL;case Xr.UNAVAILABLE:return $e.UNAVAILABLE;case Xr.UNAUTHENTICATED:return $e.UNAUTHENTICATED;case Xr.INVALID_ARGUMENT:return $e.INVALID_ARGUMENT;case Xr.NOT_FOUND:return $e.NOT_FOUND;case Xr.ALREADY_EXISTS:return $e.ALREADY_EXISTS;case Xr.PERMISSION_DENIED:return $e.PERMISSION_DENIED;case Xr.FAILED_PRECONDITION:return $e.FAILED_PRECONDITION;case Xr.ABORTED:return $e.ABORTED;case Xr.OUT_OF_RANGE:return $e.OUT_OF_RANGE;case Xr.UNIMPLEMENTED:return $e.UNIMPLEMENTED;case Xr.DATA_LOSS:return $e.DATA_LOSS;default:return dn()}}(Bn=Xr||(Xr={}))[Bn.OK=0]="OK",Bn[Bn.CANCELLED=1]="CANCELLED",Bn[Bn.UNKNOWN=2]="UNKNOWN",Bn[Bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bn[Bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bn[Bn.NOT_FOUND=5]="NOT_FOUND",Bn[Bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bn[Bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bn[Bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bn[Bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bn[Bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bn[Bn.ABORTED=10]="ABORTED",Bn[Bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bn[Bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bn[Bn.INTERNAL=13]="INTERNAL",Bn[Bn.UNAVAILABLE=14]="UNAVAILABLE",Bn[Bn.DATA_LOSS=15]="DATA_LOSS";var Jr=function(){function i(t,e){this.comparator=t,this.root=e||Gl.EMPTY}return i.prototype.insert=function(t,e){return new i(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Gl.BLACK,null,null))},i.prototype.remove=function(t){return new i(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Gl.BLACK,null,null))},i.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var s=this.comparator(t,e.key);if(0===s)return e.value;s<0?e=e.left:s>0&&(e=e.right)}return null},i.prototype.indexOf=function(t){for(var e=0,s=this.root;!s.isEmpty();){var o=this.comparator(t,s.key);if(0===o)return e+s.left.size;o<0?s=s.left:(e+=s.left.size+1,s=s.right)}return-1},i.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(i.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),i.prototype.minKey=function(){return this.root.minKey()},i.prototype.maxKey=function(){return this.root.maxKey()},i.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},i.prototype.forEach=function(t){this.inorderTraversal(function(e,s){return t(e,s),!1})},i.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,s){return t.push(e+":"+s),!1}),"{"+t.join(", ")+"}"},i.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},i.prototype.getIterator=function(){return new Tc(this.root,null,this.comparator,!1)},i.prototype.getIteratorFrom=function(t){return new Tc(this.root,t,this.comparator,!1)},i.prototype.getReverseIterator=function(){return new Tc(this.root,null,this.comparator,!0)},i.prototype.getReverseIteratorFrom=function(t){return new Tc(this.root,t,this.comparator,!0)},i}(),Tc=function(){function i(t,e,s,o){this.isReverse=o,this.nodeStack=[];for(var l=1;!t.isEmpty();)if(l=e?s(t.key,e):1,o&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(0===l){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return i.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},i.prototype.hasNext=function(){return this.nodeStack.length>0},i.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},i}(),Gl=function(){function i(t,e,s,o,l){this.key=t,this.value=e,this.color=null!=s?s:i.RED,this.left=null!=o?o:i.EMPTY,this.right=null!=l?l:i.EMPTY,this.size=this.left.size+1+this.right.size}return i.prototype.copy=function(t,e,s,o,l){return new i(null!=t?t:this.key,null!=e?e:this.value,null!=s?s:this.color,null!=o?o:this.left,null!=l?l:this.right)},i.prototype.isEmpty=function(){return!1},i.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},i.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},i.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},i.prototype.minKey=function(){return this.min().key},i.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},i.prototype.insert=function(t,e,s){var o=this,l=s(t,o.key);return(o=l<0?o.copy(null,null,null,o.left.insert(t,e,s),null):0===l?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,s))).fixUp()},i.prototype.removeMin=function(){if(this.left.isEmpty())return i.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},i.prototype.remove=function(t,e){var s,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===e(t,o.key)){if(o.right.isEmpty())return i.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()},i.prototype.isRed=function(){return this.color},i.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},i.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},i.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},i.prototype.rotateLeft=function(){var t=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},i.prototype.rotateRight=function(){var t=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},i.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},i.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},i.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dn();var t=this.left.check();if(t!==this.right.check())throw dn();return t+(this.isRed()?0:1)},i}();Gl.EMPTY=null,Gl.RED=!0,Gl.BLACK=!1,Gl.EMPTY=new(function(){function i(){this.size=0}return Object.defineProperty(i.prototype,"key",{get:function(){throw dn()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){throw dn()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){throw dn()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){throw dn()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){throw dn()},enumerable:!1,configurable:!0}),i.prototype.copy=function(t,e,s,o,l){return this},i.prototype.insert=function(t,e,s){return new Gl(t,e)},i.prototype.remove=function(t,e){return this},i.prototype.isEmpty=function(){return!0},i.prototype.inorderTraversal=function(t){return!1},i.prototype.reverseTraversal=function(t){return!1},i.prototype.minKey=function(){return null},i.prototype.maxKey=function(){return null},i.prototype.isRed=function(){return!1},i.prototype.checkMaxDepth=function(){return!0},i.prototype.check=function(){return 0},i}());var es=function(){function i(t){this.comparator=t,this.data=new Jr(this.comparator)}return i.prototype.has=function(t){return null!==this.data.get(t)},i.prototype.first=function(){return this.data.minKey()},i.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(i.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),i.prototype.indexOf=function(t){return this.data.indexOf(t)},i.prototype.forEach=function(t){this.data.inorderTraversal(function(e,s){return t(e),!1})},i.prototype.forEachInRange=function(t,e){for(var s=this.data.getIteratorFrom(t[0]);s.hasNext();){var o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}},i.prototype.forEachWhile=function(t,e){var s;for(s=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return},i.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},i.prototype.getIterator=function(){return new Xm(this.data.getIterator())},i.prototype.getIteratorFrom=function(t){return new Xm(this.data.getIteratorFrom(t))},i.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},i.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},i.prototype.isEmpty=function(){return this.data.isEmpty()},i.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(s){e=e.add(s)}),e},i.prototype.isEqual=function(t){if(!(t instanceof i)||this.size!==t.size)return!1;for(var e=this.data.getIterator(),s=t.data.getIterator();e.hasNext();){var o=e.getNext().key,l=s.getNext().key;if(0!==this.comparator(o,l))return!1}return!0},i.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},i.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},i.prototype.copy=function(t){var e=new i(this.comparator);return e.data=t,e},i}(),Xm=function(){function i(t){this.iter=t}return i.prototype.getNext=function(){return this.iter.getNext().key},i.prototype.hasNext=function(){return this.iter.hasNext()},i}(),Dy=new Jr(gn.comparator);function ko(){return Dy}var Jm=new Jr(gn.comparator);function Bs(){return Jm}var nf=new Jr(gn.comparator);function Ic(){return nf}var e_=new es(gn.comparator);function Ii(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];for(var e=e_,s=0,o=i;s<o.length;s++){var l=o[s];e=e.add(l)}return e}var zp=new es(ai);function rf(){return zp}var sf=function(){function i(t,e,s,o,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}return i.createSynthesizedRemoteEventForCurrentChange=function(t,e){var s=new Map;return s.set(t,jp.createSynthesizedTargetChangeForCurrentChange(t,e)),new i(ni.min(),s,rf(),ko(),Ii())},i}(),jp=function(){function i(t,e,s,o,l){this.resumeToken=t,this.current=e,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}return i.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new i(mo.EMPTY_BYTE_STRING,e,Ii(),Ii(),Ii())},i}(),af=function(i,t,e,s){this.v=i,this.removedTargetIds=t,this.key=e,this.P=s},Ey=function(i,t){this.targetId=i,this.V=t},Rc=function(i,t,e,s){void 0===e&&(e=mo.EMPTY_BYTE_STRING),void 0===s&&(s=null),this.state=i,this.targetIds=t,this.resumeToken=e,this.cause=s},Pc=function(){function i(){this.S=0,this.D=t_(),this.C=mo.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(i.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),i.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},i.prototype.M=function(){var t=Ii(),e=Ii(),s=Ii();return this.D.forEach(function(o,l){switch(l){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:s=s.add(o);break;default:dn()}}),new jp(this.C,this.N,t,e,s)},i.prototype.L=function(){this.k=!1,this.D=t_()},i.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},i.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},i.prototype.U=function(){this.S+=1},i.prototype.K=function(){this.S-=1},i.prototype.j=function(){this.k=!0,this.N=!0},i}(),Sy=function(){function i(t){this.W=t,this.G=new Map,this.H=ko(),this.J=uw(),this.Y=new es(ai)}return i.prototype.X=function(t){for(var e=0,s=t.v;e<s.length;e++){var o=s[e];t.P&&t.P.isFoundDocument()?this.Z(o,t.P):this.tt(o,t.key,t.P)}for(var l=0,f=t.removedTargetIds;l<f.length;l++)this.tt(o=f[l],t.key,t.P)},i.prototype.et=function(t){var e=this;this.forEachTarget(t,function(s){var o=e.nt(s);switch(t.state){case 0:e.st(s)&&o.O(t.resumeToken);break;case 1:o.K(),o.F||o.L(),o.O(t.resumeToken);break;case 2:o.K(),o.F||e.removeTarget(s);break;case 3:e.st(s)&&(o.j(),o.O(t.resumeToken));break;case 4:e.st(s)&&(e.it(s),o.O(t.resumeToken));break;default:dn()}})},i.prototype.forEachTarget=function(t,e){var s=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(o,l){s.st(l)&&e(l)})},i.prototype.rt=function(t){var e=t.targetId,s=t.V.count,o=this.ot(e);if(o){var l=o.target;if(Id(l))if(0===s){var f=new gn(l.path);this.tt(e,f,ds.newNoDocument(f,ni.min()))}else En(1===s);else this.ct(e)!==s&&(this.it(e),this.Y=this.Y.add(e))}},i.prototype.ut=function(t){var e=this,s=new Map;this.G.forEach(function(f,_){var w=e.ot(_);if(w){if(f.current&&Id(w.target)){var E=new gn(w.target.path);null!==e.H.get(E)||e.at(_,E)||e.tt(_,E,ds.newNoDocument(E,t))}f.$&&(s.set(_,f.M()),f.L())}});var o=Ii();this.J.forEach(function(f,_){var w=!0;_.forEachWhile(function(E){var T=e.ot(E);return!T||2===T.purpose||(w=!1,!1)}),w&&(o=o.add(f))});var l=new sf(t,s,this.Y,this.H,o);return this.H=ko(),this.J=uw(),this.Y=new es(ai),l},i.prototype.Z=function(t,e){if(this.st(t)){var s=this.at(t,e.key)?2:0;this.nt(t).B(e.key,s),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},i.prototype.tt=function(t,e,s){if(this.st(t)){var o=this.nt(t);this.at(t,e)?o.B(e,1):o.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),s&&(this.H=this.H.insert(e,s))}},i.prototype.removeTarget=function(t){this.G.delete(t)},i.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},i.prototype.U=function(t){this.nt(t).U()},i.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Pc,this.G.set(t,e)),e},i.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new es(ai),this.J=this.J.insert(t,e)),e},i.prototype.st=function(t){var e=null!==this.ot(t);return e||Tt("WatchChangeAggregator","Detected inactive target",t),e},i.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},i.prototype.it=function(t){var e=this;this.G.set(t,new Pc),this.W.getRemoteKeysForTarget(t).forEach(function(s){e.tt(t,s,null)})},i.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},i}();function uw(){return new Jr(gn.comparator)}function t_(){return new Jr(gn.comparator)}var Ay={asc:"ASCENDING",desc:"DESCENDING"},dw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RC=function(i,t){this.databaseId=i,this.I=t};function Wp(i,t){return i.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function n_(i,t){return i.I?t.toBase64():t.toUint8Array()}function uE(i,t){return Wp(i,t.toTimestamp())}function Ss(i){return En(!!i),ni.fromTimestamp((e=ba(i),new Tr(e.seconds,e.nanos)));var e}function i_(i,t){return(e=i,new ui(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function Yp(i){var t=ui.fromString(i);return En(uf(t)),t}function lf(i,t){return i_(i.databaseId,t.path)}function Qs(i,t){var e=Yp(t);if(e.get(1)!==i.databaseId.projectId)throw new _t($e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new _t($e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new gn(Ty(e))}function r_(i,t){return i_(i.databaseId,t)}function Ei(i){var t=Yp(i);return 4===t.length?ui.emptyPath():Ty(t)}function il(i){return new ui(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ty(i){return En(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function qp(i,t,e){return{name:lf(i,t),fields:e.value.mapValue.fields}}function s_(i,t,e){var s=Qs(i,t.name),o=Ss(t.updateTime),l=new _o({mapValue:{fields:t.fields}}),f=ds.newFoundDocument(s,o,l);return e&&f.setHasCommittedMutations(),e?f.setHasCommittedMutations():f}function cf(i,t){var e,o;if(t instanceof tf)e={update:qp(i,t.key,t.value)};else if(t instanceof Ac)e={delete:lf(i,t.key)};else if(t instanceof Bl)e={update:qp(i,t.key,t.data),updateMask:kc(t.fieldMask)};else{if(!(t instanceof Vl))return dn();e={verify:lf(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(function(s){return function(o,l){var f=l.transform;if(f instanceof Ma)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Au)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Tu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Da)return{fieldPath:l.field.canonicalString(),increment:f.A};throw dn()}(0,s)})),t.precondition.isNone||(e.currentDocument=void 0!==(o=t.precondition).updateTime?{updateTime:uE(i,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:dn()),e}function Fd(i,t){var E,e=t.currentDocument?void 0!==(E=t.currentDocument).updateTime?Ks.updateTime(Ss(E.updateTime)):void 0!==E.exists?Ks.exists(E.exists):Ks.none():Ks.none(),s=t.updateTransforms?t.updateTransforms.map(function(E){return function(T,F){var G=null;"setToServerValue"in F?(En("REQUEST_TIME"===F.setToServerValue),G=new Ma):"appendMissingElements"in F?G=new Au(F.appendMissingElements.values||[]):"removeAllFromArray"in F?G=new Tu(F.removeAllFromArray.values||[]):"increment"in F?G=new Da(T,F.increment):dn();var q=Xa.fromServerFormat(F.fieldPath);return new Gp(q,G)}(i,E)}):[];if(t.update){var o=Qs(i,t.update.name),l=new _o({mapValue:{fields:t.update.fields}});if(t.updateMask){var f=function(E){return new Sd((E.fieldPaths||[]).map(function(F){return Xa.fromServerFormat(F)}))}(t.updateMask);return new Bl(o,l,f,e,s)}return new tf(o,l,e,s)}if(t.delete){var _=Qs(i,t.delete);return new Ac(_,e)}if(t.verify){var w=Qs(i,t.verify);return new Vl(w,e)}return dn()}function o_(i,t){return{documents:[r_(i,t.path)]}}function Ld(i,t){var e={structuredQuery:{}},s=t.path;null!==t.collectionGroup?(e.parent=r_(i,s),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=r_(i,s.popLast()),e.structuredQuery.from=[{collectionId:s.lastSegment()}]);var o=function(_){if(0!==_.length){var w=_.map(function(E){return function(T){if("=="===T.op){if(ow(T.value))return{unaryFilter:{field:Oc(T.field),op:"IS_NAN"}};if(_y(T.value))return{unaryFilter:{field:Oc(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(ow(T.value))return{unaryFilter:{field:Oc(T.field),op:"IS_NOT_NAN"}};if(_y(T.value))return{unaryFilter:{field:Oc(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oc(T.field),op:hw(T.op),value:T.value}}}(E)});return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}}(t.filters);o&&(e.structuredQuery.where=o);var l=function(_){if(0!==_.length)return _.map(function(w){return{field:Oc((E=w).field),direction:Ul(E.dir)};var E})}(t.orderBy);l&&(e.structuredQuery.orderBy=l);var w,f=(w=t.limit,i.I||In(w)?w:{value:w});return null!==f&&(e.structuredQuery.limit=f),t.startAt&&(e.structuredQuery.startAt=$p(t.startAt)),t.endAt&&(e.structuredQuery.endAt=$p(t.endAt)),e}function Iy(i){var t=Ei(i.parent),e=i.structuredQuery,s=e.from?e.from.length:0,o=null;if(s>0){En(1===s);var l=e.from[0];l.allDescendants?o=l.collectionId:t=t.child(l.collectionId)}var f=[];e.where&&(f=Ru(e.where));var _=[];e.orderBy&&(_=e.orderBy.map(function(F){return new Lp(Fo((G=F).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction));var G}));var F,G,w=null;e.limit&&(w=In(G="object"==typeof(F=e.limit)?F.value:F)?null:G);var E=null;e.startAt&&(E=Ry(e.startAt));var T=null;return e.endAt&&(T=Ry(e.endAt)),Wm(t,o,_,f,w,"F",E,T)}function Ru(i){return i?void 0!==i.unaryFilter?[fw(i)]:void 0!==i.fieldFilter?[PC(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(function(t){return Ru(t)}).reduce(function(t,e){return t.concat(e)}):dn():[]}function $p(i){return{before:i.before,values:i.position}}function Ry(i){return new Fp(i.values||[],!!i.before)}function Ul(i){return Ay[i]}function hw(i){return dw[i]}function Oc(i){return{fieldPath:i.canonicalString()}}function Fo(i){return Xa.fromServerFormat(i.fieldPath)}function PC(i){return Oo.create(Fo(i.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dn()}}(i.fieldFilter.op),i.fieldFilter.value)}function fw(i){switch(i.unaryFilter.op){case"IS_NAN":var t=Fo(i.unaryFilter.field);return Oo.create(t,"==",{doubleValue:NaN});case"IS_NULL":var e=Fo(i.unaryFilter.field);return Oo.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var s=Fo(i.unaryFilter.field);return Oo.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var o=Fo(i.unaryFilter.field);return Oo.create(o,"!=",{nullValue:"NULL_VALUE"});default:return dn()}}function kc(i){var t=[];return i.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}}function uf(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function yo(i){for(var t="",e=0;e<i.length;e++)t.length>0&&(t=Hl(t)),t=Nd(i.get(e),t);return Hl(t)}function Nd(i,t){for(var e=t,s=i.length,o=0;o<s;o++){var l=i.charAt(o);switch(l){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=l}}return e}function Hl(i){return i+"\x01\x01"}function oa(i){var t=i.length;if(En(t>=2),2===t)return En("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),ui.emptyPath();for(var e=t-2,s=[],o="",l=0;l<t;){var f=i.indexOf("\x01",l);switch((f<0||f>e)&&dn(),i.charAt(f+1)){case"\x01":var _=i.substring(l,f),w=void 0;0===o.length?w=_:(w=o+=_,o=""),s.push(w);break;case"\x10":o+=i.substring(l,f),o+="\0";break;case"\x11":o+=i.substring(l,f+1);break;default:dn()}l=f+2}return new ui(s)}var OC=function(i,t){this.seconds=i,this.nanoseconds=t},Vs=function(i,t,e){this.ownerId=i,this.allowTabSynchronization=t,this.leaseTimestampMs=e};Vs.store="owner",Vs.key="owner";var rl=function(i,t,e){this.userId=i,this.lastAcknowledgedBatchId=t,this.lastStreamToken=e};rl.store="mutationQueues",rl.keyPath="userId";var ii=function(i,t,e,s,o){this.userId=i,this.batchId=t,this.localWriteTimeMs=e,this.baseMutations=s,this.mutations=o};ii.store="mutations",ii.keyPath="batchId",ii.userMutationsIndex="userMutationsIndex",ii.userMutationsKeyPath=["userId","batchId"];var Gr=function(){function i(){}return i.prefixForUser=function(t){return[t]},i.prefixForPath=function(t,e){return[t,yo(e)]},i.key=function(t,e,s){return[t,yo(e),s]},i}();Gr.store="documentMutations",Gr.PLACEHOLDER=new Gr;var Zp=function(i,t){this.path=i,this.readTime=t},Kp=function(i,t){this.path=i,this.version=t},cr=function(i,t,e,s,o,l){this.unknownDocument=i,this.noDocument=t,this.document=e,this.hasCommittedMutations=s,this.readTime=o,this.parentPath=l};cr.store="remoteDocuments",cr.readTimeIndex="readTimeIndex",cr.readTimeIndexPath="readTime",cr.collectionReadTimeIndex="collectionReadTimeIndex",cr.collectionReadTimeIndexPath=["parentPath","readTime"];var ur=function(i){this.byteSize=i};ur.store="remoteDocumentGlobal",ur.key="remoteDocumentGlobalKey";var Xs=function(i,t,e,s,o,l,f){this.targetId=i,this.canonicalId=t,this.readTime=e,this.resumeToken=s,this.lastListenSequenceNumber=o,this.lastLimboFreeSnapshotVersion=l,this.query=f};Xs.store="targets",Xs.keyPath="targetId",Xs.queryTargetsIndexName="queryTargetsIndex",Xs.queryTargetsKeyPath=["canonicalId","targetId"];var Ir=function(i,t,e){this.targetId=i,this.path=t,this.sequenceNumber=e};Ir.store="targetDocuments",Ir.keyPath=["targetId","path"],Ir.documentTargetsIndex="documentTargetsIndex",Ir.documentTargetsKeyPath=["path","targetId"];var Rr=function(i,t,e,s){this.highestTargetId=i,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=e,this.targetCount=s};Rr.key="targetGlobalKey",Rr.store="targetGlobal";var Lo=function(i,t){this.collectionId=i,this.parent=t};Lo.store="collectionParents",Lo.keyPath=["collectionId","parent"];var aa=function(i,t,e,s){this.clientId=i,this.updateTimeMs=t,this.networkEnabled=e,this.inForeground=s};aa.store="clientMetadata",aa.keyPath="clientId";var Bd=function(i,t,e){this.bundleId=i,this.createTime=t,this.version=e};Bd.store="bundles",Bd.keyPath="bundleId";var Fc=function(i,t,e){this.name=i,this.readTime=t,this.bundledQuery=e};Fc.store="namedQueries",Fc.keyPath="name";var Py=(0,Q.ev)((0,Q.ev)([],(0,Q.ev)((0,Q.ev)([],(0,Q.ev)((0,Q.ev)([],(0,Q.ev)((0,Q.ev)([],[rl.store,ii.store,Gr.store,cr.store,Xs.store,Vs.store,Rr.store,Ir.store]),[aa.store])),[ur.store])),[Lo.store])),[Bd.store,Fc.store]),a_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Oy=function(){function i(){this.onCommittedListeners=[]}return i.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},i.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},i}(),bo=function(){var i=this;this.promise=new Promise(function(t,e){i.resolve=t,i.reject=e})},ct=function(){function i(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(s){e.isDone=!0,e.result=s,e.nextCallback&&e.nextCallback(s)},function(s){e.isDone=!0,e.error=s,e.catchCallback&&e.catchCallback(s)})}return i.prototype.catch=function(t){return this.next(void 0,t)},i.prototype.next=function(t,e){var s=this;return this.callbackAttached&&dn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new i(function(o,l){s.nextCallback=function(f){s.wrapSuccess(t,f).next(o,l)},s.catchCallback=function(f){s.wrapFailure(e,f).next(o,l)}})},i.prototype.toPromise=function(){var t=this;return new Promise(function(e,s){t.next(e,s)})},i.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof i?e:i.resolve(e)}catch(s){return i.reject(s)}},i.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):i.resolve(e)},i.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):i.reject(e)},i.resolve=function(t){return new i(function(e,s){e(t)})},i.reject=function(t){return new i(function(e,s){s(t)})},i.waitFor=function(t){return new i(function(e,s){var o=0,l=0,f=!1;t.forEach(function(_){++o,_.next(function(){++l,f&&l===o&&e()},function(w){return s(w)})}),f=!0,l===o&&e()})},i.or=function(t){for(var e=i.resolve(!1),s=function(f){e=e.next(function(_){return _?i.resolve(_):f()})},o=0,l=t;o<l.length;o++)s(l[o]);return e},i.forEach=function(t,e){var s=this,o=[];return t.forEach(function(l,f){o.push(e.call(s,l,f))}),this.waitFor(o)},i}(),No=function(){function i(t,e){var s=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new bo,this.transaction.oncomplete=function(){s.ft.resolve()},this.transaction.onabort=function(){e.error?s.ft.reject(new Vd(t,e.error)):s.ft.resolve()},this.transaction.onerror=function(o){var l=Ud(o.target.error);s.ft.reject(new Vd(t,l))}}return i.open=function(t,e,s,o){try{return new i(e,t.transaction(o,s))}catch(l){throw new Vd(e,l)}},Object.defineProperty(i.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),i.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Tt("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},i.prototype.store=function(t){var e=this.transaction.objectStore(t);return new hf(e)},i}(),zl=function(){function i(t,e,s){this.name=t,this.version=e,this.wt=s,12.2===i._t((0,$n.z$)())&&Nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return i.delete=function(t){return Tt("SimpleDb","Removing database:",t),Pu(window.indexedDB.deleteDatabase(t)).toPromise()},i.yt=function(){if("undefined"==typeof indexedDB)return!1;if(i.gt())return!0;var t=(0,$n.z$)(),e=i._t(t),s=0<e&&e<10,o=i.Et(t),l=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||s||l)},i.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},i.It=function(t,e){return t.store(e)},i._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(s)},i.Et=function(t){var e=t.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)},i.prototype.At=function(t){return(0,Q.mG)(this,void 0,void 0,function(){var e,s=this;return(0,Q.Jh)(this,function(o){switch(o.label){case 0:return this.db?[3,2]:(Tt("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(l,f){var _=indexedDB.open(s.name,s.version);_.onsuccess=function(w){l(w.target.result)},_.onblocked=function(){f(new Vd(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=function(w){var E=w.target.error;f("VersionError"===E.name?new _t($e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Vd(t,E))},_.onupgradeneeded=function(w){Tt("SimpleDb",'Database "'+s.name+'" requires upgrade from version:',w.oldVersion),s.wt.Rt(w.target.result,_.transaction,w.oldVersion,s.version).next(function(){Tt("SimpleDb","Database upgrade to version "+s.version+" complete")})}})]);case 1:e.db=o.sent(),o.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(l){return s.bt(l)}),this.db)]}})})},i.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},i.prototype.runTransaction=function(t,e,s,o){return(0,Q.mG)(this,void 0,void 0,function(){var l,f,_,w,E;return(0,Q.Jh)(this,function(T){switch(T.label){case 0:l="readonly"===e,f=0,_=function(){var F,G,H,Y,q;return(0,Q.Jh)(this,function(J){switch(J.label){case 0:++f,J.label=1;case 1:return J.trys.push([1,4,,5]),[4,w.At(t)];case 2:return w.db=J.sent(),F=No.open(w.db,t,l?"readonly":"readwrite",s),G=o(F).catch(function(re){return F.abort(re),ct.reject(re)}).toPromise(),H={},G.catch(function(){}),[4,F.dt];case 3:return[2,(H.value=(J.sent(),G),H)];case 4:return Tt("SimpleDb","Transaction failed with error:",(Y=J.sent()).message,"Retrying:",q="FirebaseError"!==Y.name&&f<3),w.close(),q?[3,5]:[2,{value:Promise.reject(Y)}];case 5:return[2]}})},w=this,T.label=1;case 1:return[5,_()];case 2:if("object"==typeof(E=T.sent()))return[2,E.value];T.label=3;case 3:return[3,1];case 4:return[2]}})})},i.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},i}(),df=function(){function i(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(i.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),i.prototype.done=function(){this.Vt=!0},i.prototype.Ct=function(t){this.St=t},i.prototype.delete=function(){return Pu(this.Pt.delete())},i}(),Vd=function(i){function t(e,s){var o=this;return(o=i.call(this,$e.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+s)||this).name="IndexedDbTransactionError",o}return(0,Q.ZT)(t,i),t}(_t);function qi(i){return"IndexedDbTransactionError"===i.name}var hf=function(){function i(t){this.store=t}return i.prototype.put=function(t,e){var s;return void 0!==e?(Tt("SimpleDb","PUT",this.store.name,t,e),s=this.store.put(e,t)):(Tt("SimpleDb","PUT",this.store.name,"<auto-key>",t),s=this.store.put(t)),Pu(s)},i.prototype.add=function(t){return Tt("SimpleDb","ADD",this.store.name,t,t),Pu(this.store.add(t))},i.prototype.get=function(t){var e=this;return Pu(this.store.get(t)).next(function(s){return void 0===s&&(s=null),Tt("SimpleDb","GET",e.store.name,t,s),s})},i.prototype.delete=function(t){return Tt("SimpleDb","DELETE",this.store.name,t),Pu(this.store.delete(t))},i.prototype.count=function(){return Tt("SimpleDb","COUNT",this.store.name),Pu(this.store.count())},i.prototype.Nt=function(t,e){var s=this.cursor(this.options(t,e)),o=[];return this.xt(s,function(l,f){o.push(f)}).next(function(){return o})},i.prototype.kt=function(t,e){Tt("SimpleDb","DELETE ALL",this.store.name);var s=this.options(t,e);s.Ft=!1;var o=this.cursor(s);return this.xt(o,function(l,f,_){return _.delete()})},i.prototype.$t=function(t,e){var s;e?s=t:(s={},e=t);var o=this.cursor(s);return this.xt(o,e)},i.prototype.Ot=function(t){var e=this.cursor({});return new ct(function(s,o){e.onerror=function(l){var f=Ud(l.target.error);o(f)},e.onsuccess=function(l){var f=l.target.result;f?t(f.primaryKey,f.value).next(function(_){_?f.continue():s()}):s()}})},i.prototype.xt=function(t,e){var s=[];return new ct(function(o,l){t.onerror=function(f){l(f.target.error)},t.onsuccess=function(f){var _=f.target.result;if(_){var w=new df(_),E=e(_.primaryKey,_.value,w);if(E instanceof ct){var T=E.catch(function(F){return w.done(),ct.reject(F)});s.push(T)}w.isDone?o():null===w.Dt?_.continue():_.continue(w.Dt)}else o()}}).next(function(){return ct.waitFor(s)})},i.prototype.options=function(t,e){var s;return void 0!==t&&("string"==typeof t?s=t:e=t),{index:s,range:e}},i.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var s=this.store.index(t.index);return t.Ft?s.openKeyCursor(t.range,e):s.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},i}();function Pu(i){return new ct(function(t,e){i.onsuccess=function(s){t(s.target.result)},i.onerror=function(s){var o=Ud(s.target.error);e(o)}})}var Gd=!1;function Ud(i){var t=zl._t((0,$n.z$)());if(t>=12.2&&t<13){var e="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(e)>=0){var s=new _t("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Gd||(Gd=!0,setTimeout(function(){throw s},0)),s}}return i}var Ou=function(i){function t(e,s){var o=this;return(o=i.call(this)||this).Mt=e,o.currentSequenceNumber=s,o}return(0,Q.ZT)(t,i),t}(Oy);function ts(i,t){var e=zt(i);return zl.It(e.Mt,t)}var ff=function(){function i(t,e,s,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=s,this.mutations=o}return i.prototype.applyToRemoteDocument=function(t,e){for(var s=e.mutationResults,o=0;o<this.mutations.length;o++){var l=this.mutations[o];l.key.isEqual(t.key)&&Up(l,t,s[o])}},i.prototype.applyToLocalView=function(t){for(var e=0,s=this.baseMutations;e<s.length;e++)(f=s[e]).key.isEqual(t.key)&&kd(f,t,this.localWriteTime);for(var o=0,l=this.mutations;o<l.length;o++){var f;(f=l[o]).key.isEqual(t.key)&&kd(f,t,this.localWriteTime)}},i.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(s){var o=t.get(s.key),l=o;e.applyToLocalView(l),o.isValidDocument()||l.convertToNoDocument(ni.min())})},i.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Ii())},i.prototype.isEqual=function(t){return this.batchId===t.batchId&&Mu(this.mutations,t.mutations,function(e,s){return My(e,s)})&&Mu(this.baseMutations,t.baseMutations,function(e,s){return My(e,s)})},i}(),pf=function(){function i(t,e,s,o){this.batch=t,this.commitVersion=e,this.mutationResults=s,this.docVersions=o}return i.from=function(t,e,s){En(t.mutations.length===s.length);for(var o=Ic(),l=t.mutations,f=0;f<l.length;f++)o=o.insert(l[f].key,s[f].version);return new i(t,e,s,o)},i}(),gf=function(){function i(t,e,s,o,l,f,_){void 0===l&&(l=ni.min()),void 0===f&&(f=ni.min()),void 0===_&&(_=mo.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=_}return i.prototype.withSequenceNumber=function(t){return new i(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},i.prototype.withResumeToken=function(t,e){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},i.prototype.withLastLimboFreeSnapshotVersion=function(t){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},i}(),pw=function(i){this.Lt=i};function sl(i,t){if(t.document)return s_(i.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=gn.fromSegments(t.noDocument.path),s=Gs(t.noDocument.readTime),o=ds.newNoDocument(e,s);return t.hasCommittedMutations?o.setHasCommittedMutations():o}if(t.unknownDocument){var l=gn.fromSegments(t.unknownDocument.path);return s=Gs(t.unknownDocument.version),ds.newUnknownDocument(l,s)}return dn()}function l_(i,t,e){var F,G,s=c_(e),o=t.key.path.popLast().toArray();if(t.isFoundDocument()){var l={name:lf(F=i.Lt,(G=t).key),fields:G.data.value.mapValue.fields,updateTime:Wp(F,G.version.toTimestamp())},f=t.hasCommittedMutations;return new cr(null,null,l,f,s,o)}if(t.isNoDocument()){var _=t.key.path.toArray(),w=Js(t.version);return f=t.hasCommittedMutations,new cr(null,new Zp(_,w),null,f,s,o)}if(t.isUnknownDocument()){var E=t.key.path.toArray(),T=Js(t.version);return new cr(new Kp(E,T),null,null,!0,s,o)}return dn()}function c_(i){var t=i.toTimestamp();return[t.seconds,t.nanoseconds]}function br(i){var t=new Tr(i[0],i[1]);return ni.fromTimestamp(t)}function Js(i){var t=i.toTimestamp();return new OC(t.seconds,t.nanoseconds)}function Gs(i){var t=new Tr(i.seconds,i.nanoseconds);return ni.fromTimestamp(t)}function mf(i,t){for(var e=(t.baseMutations||[]).map(function(w){return Fd(i.Lt,w)}),s=0;s<t.mutations.length-1;++s)s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(t.mutations[s].updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s);var f=t.mutations.map(function(w){return Fd(i.Lt,w)}),_=Tr.fromMillis(t.localWriteTimeMs);return new ff(t.batchId,_,e,f)}function jl(i){var t,e,s=Gs(i.readTime),o=void 0!==i.lastLimboFreeSnapshotVersion?Gs(i.lastLimboFreeSnapshotVersion):ni.min();return void 0!==i.query.documents?(En(1===(e=i.query).documents.length),t=hs(Ds(Ei(e.documents[0])))):t=hs(Iy(i.query)),new gf(t,i.targetId,0,i.lastListenSequenceNumber,s,o,mo.fromBase64String(i.resumeToken))}function Wl(i,t){var e,s=Js(t.snapshotVersion),o=Js(t.lastLimboFreeSnapshotVersion);e=Id(t.target)?o_(i.Lt,t.target):Ld(i.Lt,t.target);var l=t.resumeToken.toBase64();return new Xs(t.targetId,kp(t.target),s,l,t.sequenceNumber,o,e)}function u_(i){var t=Iy({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Rd(t,t.limit,"L"):t}var ku=function(){function i(){}return i.prototype.getBundleMetadata=function(t,e){return Qp(t).get(e).next(function(s){if(s)return{id:(o=s).bundleId,createTime:Gs(o.createTime),version:o.version};var o})},i.prototype.saveBundleMetadata=function(t,e){return Qp(t).put({bundleId:(s=e).id,createTime:Js(Ss(s.createTime)),version:s.version});var s},i.prototype.getNamedQuery=function(t,e){return eo(t).get(e).next(function(s){if(s)return{name:(o=s).name,query:u_(o.bundledQuery),readTime:Gs(o.readTime)};var o})},i.prototype.saveNamedQuery=function(t,e){return eo(t).put({name:(s=e).name,readTime:Js(Ss(s.readTime)),bundledQuery:s.bundledQuery});var s},i}();function Qp(i){return ts(i,Bd.store)}function eo(i){return ts(i,Fc.store)}var Hd=function(){function i(){this.Bt=new Bo}return i.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),ct.resolve()},i.prototype.getCollectionParents=function(t,e){return ct.resolve(this.Bt.getEntries(e))},i}(),Bo=function(){function i(){this.index={}}return i.prototype.add=function(t){var e=t.lastSegment(),s=t.popLast(),o=this.index[e]||new es(ui.comparator),l=!o.has(s);return this.index[e]=o.add(s),l},i.prototype.has=function(t){var e=t.lastSegment(),s=t.popLast(),o=this.index[e];return o&&o.has(s)},i.prototype.getEntries=function(t){return(this.index[t]||new es(ui.comparator)).toArray()},i}(),zd=function(){function i(){this.qt=new Bo}return i.prototype.addToCollectionParentIndex=function(t,e){var s=this;if(!this.qt.has(e)){var o=e.lastSegment(),l=e.popLast();t.addOnCommittedListener(function(){s.qt.add(e)});var f={collectionId:o,parent:yo(l)};return ns(t).put(f)}return ct.resolve()},i.prototype.getCollectionParents=function(t,e){var s=[],o=IDBKeyRange.bound([e,""],[Nm(e),""],!1,!0);return ns(t).Nt(o).next(function(l){for(var f=0,_=l;f<_.length;f++){var w=_[f];if(w.collectionId!==e)break;s.push(oa(w.parent))}return s})},i}();function ns(i){return ts(i,Lo.store)}var Yl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wo=function(){function i(t,e,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=s}return i.withCacheSize=function(t){return new i(t,i.DEFAULT_COLLECTION_PERCENTILE,i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},i}();function xo(i,t,e){var s=i.store(ii.store),o=i.store(Gr.store),l=[],f=IDBKeyRange.only(e.batchId),_=0,w=s.$t({range:f},function(Y,q,J){return _++,J.delete()});l.push(w.next(function(){En(1===_)}));for(var E=[],T=0,F=e.mutations;T<F.length;T++){var G=F[T],H=Gr.key(t,G.key.path,e.batchId);l.push(o.delete(H)),E.push(G.key)}return ct.waitFor(l).next(function(){return E})}function Fu(i){if(!i)return 0;var t;if(i.document)t=i.document;else if(i.unknownDocument)t=i.unknownDocument;else{if(!i.noDocument)throw dn();t=i.noDocument}return JSON.stringify(t).length}wo.DEFAULT_COLLECTION_PERCENTILE=10,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wo.DEFAULT=new wo(41943040,wo.DEFAULT_COLLECTION_PERCENTILE,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wo.DISABLED=new wo(-1,0,0);var jd=function(){function i(t,e,s,o){this.userId=t,this.R=e,this.Ut=s,this.referenceDelegate=o,this.Kt={}}return i.Qt=function(t,e,s,o){return En(""!==t.uid),new i(t.isAuthenticated()?t.uid:"",e,s,o)},i.prototype.checkEmpty=function(t){var e=!0,s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return la(t).$t({index:ii.userMutationsIndex,range:s},function(o,l,f){e=!1,f.done()}).next(function(){return e})},i.prototype.addMutationBatch=function(t,e,s,o){var l=this,f=ol(t),_=la(t);return _.add({}).next(function(w){En("number"==typeof w);for(var E=new ff(w,e,s,o),T=function(re,Me,be){var He=be.baseMutations.map(function(ot){return cf(re.Lt,ot)}),Ve=be.mutations.map(function(ot){return cf(re.Lt,ot)});return new ii(Me,be.batchId,be.localWriteTime.toMillis(),He,Ve)}(l.R,l.userId,E),F=[],G=new es(function(re,Me){return ai(re.canonicalString(),Me.canonicalString())}),H=0,Y=o;H<Y.length;H++){var q=Y[H],J=Gr.key(l.userId,q.key.path,w);G=G.add(q.key.path.popLast()),F.push(_.put(T)),F.push(f.put(J,Gr.PLACEHOLDER))}return G.forEach(function(re){F.push(l.Ut.addToCollectionParentIndex(t,re))}),t.addOnCommittedListener(function(){l.Kt[w]=E.keys()}),ct.waitFor(F).next(function(){return E})})},i.prototype.lookupMutationBatch=function(t,e){var s=this;return la(t).get(e).next(function(o){return o?(En(o.userId===s.userId),mf(s.R,o)):null})},i.prototype.jt=function(t,e){var s=this;return this.Kt[e]?ct.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(o){if(o){var l=o.keys();return s.Kt[e]=l,l}return null})},i.prototype.getNextMutationBatchAfterBatchId=function(t,e){var s=this,o=e+1,l=IDBKeyRange.lowerBound([this.userId,o]),f=null;return la(t).$t({index:ii.userMutationsIndex,range:l},function(_,w,E){w.userId===s.userId&&(En(w.batchId>=o),f=mf(s.R,w)),E.done()}).next(function(){return f})},i.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),s=-1;return la(t).$t({index:ii.userMutationsIndex,range:e,reverse:!0},function(o,l,f){s=l.batchId,f.done()}).next(function(){return s})},i.prototype.getAllMutationBatches=function(t){var e=this,s=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return la(t).Nt(ii.userMutationsIndex,s).next(function(o){return o.map(function(l){return mf(e.R,l)})})},i.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var s=this,o=Gr.prefixForPath(this.userId,e.path),l=IDBKeyRange.lowerBound(o),f=[];return ol(t).$t({range:l},function(_,w,E){var T=_[0],G=_[2],H=oa(_[1]);if(T===s.userId&&e.path.isEqual(H))return la(t).get(G).next(function(Y){if(!Y)throw dn();En(Y.userId===s.userId),f.push(mf(s.R,Y))});E.done()}).next(function(){return f})},i.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var s=this,o=new es(ai),l=[];return e.forEach(function(f){var _=Gr.prefixForPath(s.userId,f.path),w=IDBKeyRange.lowerBound(_),E=ol(t).$t({range:w},function(T,F,G){var H=T[0],q=T[2],J=oa(T[1]);H===s.userId&&f.path.isEqual(J)?o=o.add(q):G.done()});l.push(E)}),ct.waitFor(l).next(function(){return s.Wt(t,o)})},i.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var s=this,o=e.path,l=o.length+1,f=Gr.prefixForPath(this.userId,o),_=IDBKeyRange.lowerBound(f),w=new es(ai);return ol(t).$t({range:_},function(E,T,F){var G=E[0],Y=E[2],q=oa(E[1]);G===s.userId&&o.isPrefixOf(q)?q.length===l&&(w=w.add(Y)):F.done()}).next(function(){return s.Wt(t,w)})},i.prototype.Wt=function(t,e){var s=this,o=[],l=[];return e.forEach(function(f){l.push(la(t).get(f).next(function(_){if(null===_)throw dn();En(_.userId===s.userId),o.push(mf(s.R,_))}))}),ct.waitFor(l).next(function(){return o})},i.prototype.removeMutationBatch=function(t,e){var s=this;return xo(t.Mt,this.userId,e).next(function(o){return t.addOnCommittedListener(function(){s.Gt(e.batchId)}),ct.forEach(o,function(l){return s.referenceDelegate.markPotentiallyOrphaned(t,l)})})},i.prototype.Gt=function(t){delete this.Kt[t]},i.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(s){if(!s)return ct.resolve();var o=IDBKeyRange.lowerBound(Gr.prefixForUser(e.userId)),l=[];return ol(t).$t({range:o},function(f,_,w){if(f[0]===e.userId){var E=oa(f[1]);l.push(E)}else w.done()}).next(function(){En(0===l.length)})})},i.prototype.containsKey=function(t,e){return Wd(t,this.userId,e)},i.prototype.zt=function(t){var e=this;return al(t).get(this.userId).next(function(s){return s||new rl(e.userId,-1,"")})},i}();function Wd(i,t,e){var s=Gr.prefixForPath(t,e.path),o=s[1],l=IDBKeyRange.lowerBound(s),f=!1;return ol(i).$t({range:l,Ft:!0},function(_,w,E){_[0]===t&&_[1]===o&&(f=!0),E.done()}).next(function(){return f})}function la(i){return ts(i,ii.store)}function ol(i){return ts(i,Gr.store)}function al(i){return ts(i,rl.store)}var Lc=function(){function i(t){this.Ht=t}return i.prototype.next=function(){return this.Ht+=2,this.Ht},i.Jt=function(){return new i(0)},i.Yt=function(){return new i(-1)},i}(),_f=function(){function i(t,e){this.referenceDelegate=t,this.R=e}return i.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(s){var o=new Lc(s.highestTargetId);return s.highestTargetId=o.next(),e.Zt(t,s).next(function(){return s.highestTargetId})})},i.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(e){return ni.fromTimestamp(new Tr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},i.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(e){return e.highestListenSequenceNumber})},i.prototype.setTargetsMetadata=function(t,e,s){var o=this;return this.Xt(t).next(function(l){return l.highestListenSequenceNumber=e,s&&(l.lastRemoteSnapshotVersion=s.toTimestamp()),e>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=e),o.Zt(t,l)})},i.prototype.addTargetData=function(t,e){var s=this;return this.te(t,e).next(function(){return s.Xt(t).next(function(o){return o.targetCount+=1,s.ee(e,o),s.Zt(t,o)})})},i.prototype.updateTargetData=function(t,e){return this.te(t,e)},i.prototype.removeTargetData=function(t,e){var s=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return ll(t).delete(e.targetId)}).next(function(){return s.Xt(t)}).next(function(o){return En(o.targetCount>0),o.targetCount-=1,s.Zt(t,o)})},i.prototype.removeTargets=function(t,e,s){var o=this,l=0,f=[];return ll(t).$t(function(_,w){var E=jl(w);E.sequenceNumber<=e&&null===s.get(E.targetId)&&(l++,f.push(o.removeTargetData(t,E)))}).next(function(){return ct.waitFor(f)}).next(function(){return l})},i.prototype.forEachTarget=function(t,e){return ll(t).$t(function(s,o){var l=jl(o);e(l)})},i.prototype.Xt=function(t){return Yd(t).get(Rr.key).next(function(e){return En(null!==e),e})},i.prototype.Zt=function(t,e){return Yd(t).put(Rr.key,e)},i.prototype.te=function(t,e){return ll(t).put(Wl(this.R,e))},i.prototype.ee=function(t,e){var s=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,s=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,s=!0),s},i.prototype.getTargetCount=function(t){return this.Xt(t).next(function(e){return e.targetCount})},i.prototype.getTargetData=function(t,e){var s=kp(e),o=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]),l=null;return ll(t).$t({range:o,index:Xs.queryTargetsIndexName},function(f,_,w){var E=jl(_);Td(e,E.target)&&(l=E,w.done())}).next(function(){return l})},i.prototype.addMatchingKeys=function(t,e,s){var o=this,l=[],f=ca(t);return e.forEach(function(_){var w=yo(_.path);l.push(f.put(new Ir(s,w))),l.push(o.referenceDelegate.addReference(t,s,_))}),ct.waitFor(l)},i.prototype.removeMatchingKeys=function(t,e,s){var o=this,l=ca(t);return ct.forEach(e,function(f){var _=yo(f.path);return ct.waitFor([l.delete([s,_]),o.referenceDelegate.removeReference(t,s,f)])})},i.prototype.removeMatchingKeysForTargetId=function(t,e){var s=ca(t),o=IDBKeyRange.bound([e],[e+1],!1,!0);return s.delete(o)},i.prototype.getMatchingKeysForTargetId=function(t,e){var s=IDBKeyRange.bound([e],[e+1],!1,!0),o=ca(t),l=Ii();return o.$t({range:s,Ft:!0},function(f,_,w){var E=oa(f[1]),T=new gn(E);l=l.add(T)}).next(function(){return l})},i.prototype.containsKey=function(t,e){var s=yo(e.path),o=IDBKeyRange.bound([s],[Nm(s)],!1,!0),l=0;return ca(t).$t({index:Ir.documentTargetsIndex,Ft:!0,range:o},function(f,_,w){0!==f[0]&&(l++,w.done())}).next(function(){return l>0})},i.prototype.lt=function(t,e){return ll(t).get(e).next(function(s){return s?jl(s):null})},i}();function ll(i){return ts(i,Xs.store)}function Yd(i){return ts(i,Rr.store)}function ca(i){return ts(i,Ir.store)}function cl(i){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(t){if(i.code!==$e.FAILED_PRECONDITION||i.message!==a_)throw i;return Tt("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Xp(i,t){var s=i[1],l=t[1],f=ai(i[0],t[0]);return 0===f?ai(s,l):f}var vf=function(){function i(t){this.ne=t,this.buffer=new es(Xp),this.se=0}return i.prototype.ie=function(){return++this.se},i.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var s=this.buffer.last();Xp(e,s)<0&&(this.buffer=this.buffer.delete(s).add(e))}},Object.defineProperty(i.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),i}(),ky=function(){function i(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return i.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},i.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(i.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),i.prototype.ue=function(t){var e=this,s=this.oe?3e5:6e4;Tt("LruGarbageCollector","Garbage collection scheduled in "+s+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,function(){return(0,Q.mG)(e,void 0,void 0,function(){var o;return(0,Q.Jh)(this,function(l){switch(l.label){case 0:this.ce=null,this.oe=!0,l.label=1;case 1:return l.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return l.sent(),[3,7];case 3:return qi(o=l.sent())?(Tt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o),[3,6]):[3,4];case 4:return[4,cl(o)];case 5:l.sent(),l.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return l.sent(),[2]}})})})},i}(),Jp=function(){function i(t,e){this.ae=t,this.params=e}return i.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(s){return Math.floor(e/100*s)})},i.prototype.nthSequenceNumber=function(t,e){var s=this;if(0===e)return ct.resolve(Po.o);var o=new vf(e);return this.ae.forEachTarget(t,function(l){return o.re(l.sequenceNumber)}).next(function(){return s.ae.le(t,function(l){return o.re(l)})}).next(function(){return o.maxValue})},i.prototype.removeTargets=function(t,e,s){return this.ae.removeTargets(t,e,s)},i.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},i.prototype.collect=function(t,e){var s=this;return-1===this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector","Garbage collection skipped; disabled"),ct.resolve(Yl)):this.getCacheSize(t).next(function(o){return o<s.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector","Garbage collection skipped; Cache size "+o+" is lower than threshold "+s.params.cacheSizeCollectionThreshold),Yl):s.fe(t,e)})},i.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},i.prototype.fe=function(t,e){var s,o,l,f,_,w,E,T=this,F=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(G){return G>T.params.maximumSequenceNumbersToCollect?(Tt("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+T.params.maximumSequenceNumbersToCollect+" from "+G),o=T.params.maximumSequenceNumbersToCollect):o=G,f=Date.now(),T.nthSequenceNumber(t,o)}).next(function(G){return s=G,_=Date.now(),T.removeTargets(t,s,e)}).next(function(G){return l=G,w=Date.now(),T.removeOrphanedDocuments(t,s)}).next(function(G){return E=Date.now(),Yh()<=Ya.in.DEBUG&&Tt("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(f-F)+"ms\n\tDetermined least recently used "+o+" in "+(_-f)+"ms\n\tRemoved "+l+" targets in "+(w-_)+"ms\n\tRemoved "+G+" documents in "+(E-w)+"ms\nTotal Duration: "+(E-F)+"ms"),ct.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:G})})},i}(),d_=function(){function i(t,e){this.db=t,this.garbageCollector=new Jp(this,e)}return i.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(s){return e.next(function(o){return s+o})})},i.prototype.de=function(t){var e=0;return this.le(t,function(s){e++}).next(function(){return e})},i.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},i.prototype.le=function(t,e){return this.we(t,function(s,o){return e(o)})},i.prototype.addReference=function(t,e,s){return Lu(t,s)},i.prototype.removeReference=function(t,e,s){return Lu(t,s)},i.prototype.removeTargets=function(t,e,s){return this.db.getTargetCache().removeTargets(t,e,s)},i.prototype.markPotentiallyOrphaned=function(t,e){return Lu(t,e)},i.prototype._e=function(t,e){return o=e,l=!1,al(s=t).Ot(function(f){return Wd(s,f,o).next(function(_){return _&&(l=!0),ct.resolve(!_)})}).next(function(){return l});var s,o,l},i.prototype.removeOrphanedDocuments=function(t,e){var s=this,o=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[],f=0;return this.we(t,function(_,w){if(w<=e){var E=s._e(t,_).next(function(T){if(!T)return f++,o.getEntry(t,_).next(function(){return o.removeEntry(_),ca(t).delete([0,yo(_.path)])})});l.push(E)}}).next(function(){return ct.waitFor(l)}).next(function(){return o.apply(t)}).next(function(){return f})},i.prototype.removeTarget=function(t,e){var s=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,s)},i.prototype.updateLimboDocument=function(t,e){return Lu(t,e)},i.prototype.we=function(t,e){var s,o=ca(t),l=Po.o;return o.$t({index:Ir.documentTargetsIndex},function(f,_){var E=_.path,T=_.sequenceNumber;0===f[0]?(l!==Po.o&&e(new gn(oa(s)),l),l=T,s=E):l=Po.o}).next(function(){l!==Po.o&&e(new gn(oa(s)),l)})},i.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},i}();function Lu(i,t){return ca(i).put((s=i.currentSequenceNumber,new Ir(0,yo(t.path),s)));var s}var Nc=function(){function i(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return i.prototype.get=function(t){var e=this.mapKeyFn(t),s=this.inner[e];if(void 0!==s)for(var o=0,l=s;o<l.length;o++){var f=l[o],w=f[1];if(this.equalsFn(f[0],t))return w}},i.prototype.has=function(t){return void 0!==this.get(t)},i.prototype.set=function(t,e){var s=this.mapKeyFn(t),o=this.inner[s];if(void 0!==o){for(var l=0;l<o.length;l++)if(this.equalsFn(o[l][0],t))return void(o[l]=[t,e]);o.push([t,e])}else this.inner[s]=[[t,e]]},i.prototype.delete=function(t){var e=this.mapKeyFn(t),s=this.inner[e];if(void 0===s)return!1;for(var o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return 1===s.length?delete this.inner[e]:s.splice(o,1),!0;return!1},i.prototype.forEach=function(t){Ed(this.inner,function(e,s){for(var o=0,l=s;o<l.length;o++){var f=l[o];t(f[0],f[1])}})},i.prototype.isEmpty=function(){return Bm(this.inner)},i}(),Fy=function(){function i(){this.changes=new Nc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return i.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:ni.min()},i.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},i.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:ds.newInvalidDocument(t),readTime:e})},i.prototype.getEntry=function(t,e){this.assertNotApplied();var s=this.changes.get(e);return void 0!==s?ct.resolve(s.document):this.getFromCache(t,e)},i.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},i.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},i.prototype.assertNotApplied=function(){},i}(),yf=function(){function i(t,e){this.R=t,this.Ut=e}return i.prototype.addEntry=function(t,e,s){return ul(t).put(eg(e),s)},i.prototype.removeEntry=function(t,e){var s=ul(t),o=eg(e);return s.delete(o)},i.prototype.updateMetadata=function(t,e){var s=this;return this.getMetadata(t).next(function(o){return o.byteSize+=e,s.me(t,o)})},i.prototype.getEntry=function(t,e){var s=this;return ul(t).get(eg(e)).next(function(o){return s.ye(e,o)})},i.prototype.ge=function(t,e){var s=this;return ul(t).get(eg(e)).next(function(o){return{document:s.ye(e,o),size:Fu(o)}})},i.prototype.getEntries=function(t,e){var s=this,o=ko();return this.pe(t,e,function(l,f){var _=s.ye(l,f);o=o.insert(l,_)}).next(function(){return o})},i.prototype.Ee=function(t,e){var s=this,o=ko(),l=new Jr(gn.comparator);return this.pe(t,e,function(f,_){var w=s.ye(f,_);o=o.insert(f,w),l=l.insert(f,Fu(_))}).next(function(){return{documents:o,Te:l}})},i.prototype.pe=function(t,e,s){if(e.isEmpty())return ct.resolve();var o=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),l=e.getIterator(),f=l.getNext();return ul(t).$t({range:o},function(_,w,E){for(var T=gn.fromSegments(_);f&&gn.comparator(f,T)<0;)s(f,null),f=l.getNext();f&&f.isEqual(T)&&(s(f,w),f=l.hasNext()?l.getNext():null),f?E.Ct(f.path.toArray()):E.done()}).next(function(){for(;f;)s(f,null),f=l.hasNext()?l.getNext():null})},i.prototype.getDocumentsMatchingQuery=function(t,e,s){var o=this,l=ko(),f=e.path.length+1,_={};if(s.isEqual(ni.min())){var w=e.path.toArray();_.range=IDBKeyRange.lowerBound(w)}else{var E=e.path.toArray(),T=c_(s);_.range=IDBKeyRange.lowerBound([E,T],!0),_.index=cr.collectionReadTimeIndex}return ul(t).$t(_,function(F,G,H){if(F.length===f){var Y=sl(o.R,G);e.path.isPrefixOf(Y.key.path)?tl(e,Y)&&(l=l.insert(Y.key,Y)):H.done()}}).next(function(){return l})},i.prototype.newChangeBuffer=function(t){return new Nu(this,!!t&&t.trackRemovals)},i.prototype.getSize=function(t){return this.getMetadata(t).next(function(e){return e.byteSize})},i.prototype.getMetadata=function(t){return ua(t).get(ur.key).next(function(e){return En(!!e),e})},i.prototype.me=function(t,e){return ua(t).put(ur.key,e)},i.prototype.ye=function(t,e){if(e){var s=sl(this.R,e);if(!s.isNoDocument()||!s.version.isEqual(ni.min()))return s}return ds.newInvalidDocument(t)},i}(),Nu=function(i){function t(e,s){var o=this;return(o=i.call(this)||this).Ie=e,o.trackRemovals=s,o.Ae=new Nc(function(l){return l.toString()},function(l,f){return l.isEqual(f)}),o}return(0,Q.ZT)(t,i),t.prototype.applyChanges=function(e){var s=this,o=[],l=0,f=new es(function(_,w){return ai(_.canonicalString(),w.canonicalString())});return this.changes.forEach(function(_,w){var E=s.Ae.get(_);if(w.document.isValidDocument()){var T=l_(s.Ie.R,w.document,s.getReadTime(_));f=f.add(_.path.popLast());var F=Fu(T);l+=F-E,o.push(s.Ie.addEntry(e,_,T))}else if(l-=E,s.trackRemovals){var G=l_(s.Ie.R,ds.newNoDocument(_,ni.min()),s.getReadTime(_));o.push(s.Ie.addEntry(e,_,G))}else o.push(s.Ie.removeEntry(e,_))}),f.forEach(function(_){o.push(s.Ie.Ut.addToCollectionParentIndex(e,_))}),o.push(this.Ie.updateMetadata(e,l)),ct.waitFor(o)},t.prototype.getFromCache=function(e,s){var o=this;return this.Ie.ge(e,s).next(function(l){return o.Ae.set(s,l.size),l.document})},t.prototype.getAllFromCache=function(e,s){var o=this;return this.Ie.Ee(e,s).next(function(l){var f=l.documents;return l.Te.forEach(function(_,w){o.Ae.set(_,w)}),f})},t}(Fy);function ua(i){return ts(i,ur.store)}function ul(i){return ts(i,cr.store)}function eg(i){return i.path.toArray()}var gw=function(){function i(t){this.R=t}return i.prototype.Rt=function(t,e,s,o){var l=this;En(s<o&&s>=0&&o<=11);var w,f=new No("createOrUpgrade",e);s<1&&o>=1&&(t.createObjectStore(Vs.store),(w=t).createObjectStore(rl.store,{keyPath:rl.keyPath}),w.createObjectStore(ii.store,{keyPath:ii.keyPath,autoIncrement:!0}).createIndex(ii.userMutationsIndex,ii.userMutationsKeyPath,{unique:!0}),w.createObjectStore(Gr.store),h_(t),function(w){w.createObjectStore(cr.store)}(t));var _=ct.resolve();return s<3&&o>=3&&(0!==s&&(function(w){w.deleteObjectStore(Ir.store),w.deleteObjectStore(Xs.store),w.deleteObjectStore(Rr.store)}(t),h_(t)),_=_.next(function(){return function(w){var E=w.store(Rr.store),T=new Rr(0,0,ni.min().toTimestamp(),0);return E.put(Rr.key,T)}(f)})),s<4&&o>=4&&(0!==s&&(_=_.next(function(){return function(w,E){return E.store(ii.store).Nt().next(function(T){w.deleteObjectStore(ii.store),w.createObjectStore(ii.store,{keyPath:ii.keyPath,autoIncrement:!0}).createIndex(ii.userMutationsIndex,ii.userMutationsKeyPath,{unique:!0});var F=E.store(ii.store),G=T.map(function(H){return F.put(H)});return ct.waitFor(G)})}(t,f)})),_=_.next(function(){!function(w){w.createObjectStore(aa.store,{keyPath:aa.keyPath})}(t)})),s<5&&o>=5&&(_=_.next(function(){return l.Re(f)})),s<6&&o>=6&&(_=_.next(function(){return function(w){w.createObjectStore(ur.store)}(t),l.be(f)})),s<7&&o>=7&&(_=_.next(function(){return l.ve(f)})),s<8&&o>=8&&(_=_.next(function(){return l.Pe(t,f)})),s<9&&o>=9&&(_=_.next(function(){(function(w){w.objectStoreNames.contains("remoteDocumentChanges")&&w.deleteObjectStore("remoteDocumentChanges")})(t),function(w){var E=w.objectStore(cr.store);E.createIndex(cr.readTimeIndex,cr.readTimeIndexPath,{unique:!1}),E.createIndex(cr.collectionReadTimeIndex,cr.collectionReadTimeIndexPath,{unique:!1})}(e)})),s<10&&o>=10&&(_=_.next(function(){return l.Ve(f)})),s<11&&o>=11&&(_=_.next(function(){(function(w){w.createObjectStore(Bd.store,{keyPath:Bd.keyPath})})(t),function(w){w.createObjectStore(Fc.store,{keyPath:Fc.keyPath})}(t)})),_},i.prototype.be=function(t){var e=0;return t.store(cr.store).$t(function(s,o){e+=Fu(o)}).next(function(){var s=new ur(e);return t.store(ur.store).put(ur.key,s)})},i.prototype.Re=function(t){var e=this,s=t.store(rl.store),o=t.store(ii.store);return s.Nt().next(function(l){return ct.forEach(l,function(f){var _=IDBKeyRange.bound([f.userId,-1],[f.userId,f.lastAcknowledgedBatchId]);return o.Nt(ii.userMutationsIndex,_).next(function(w){return ct.forEach(w,function(E){En(E.userId===f.userId);var T=mf(e.R,E);return xo(t,f.userId,T).next(function(){})})})})})},i.prototype.ve=function(t){var e=t.store(Ir.store),s=t.store(cr.store);return t.store(Rr.store).get(Rr.key).next(function(o){var l=[];return s.$t(function(f,_){var w=new ui(f),E=[0,yo(w)];l.push(e.get(E).next(function(T){return T?ct.resolve():e.put(new Ir(0,yo(w),o.highestListenSequenceNumber))}))}).next(function(){return ct.waitFor(l)})})},i.prototype.Pe=function(t,e){t.createObjectStore(Lo.store,{keyPath:Lo.keyPath});var s=e.store(Lo.store),o=new Bo,l=function(f){if(o.add(f)){var _=f.lastSegment(),w=f.popLast();return s.put({collectionId:_,parent:yo(w)})}};return e.store(cr.store).$t({Ft:!0},function(f,_){var w=new ui(f);return l(w.popLast())}).next(function(){return e.store(Gr.store).$t({Ft:!0},function(f,_){var E=oa(f[1]);return l(E.popLast())})})},i.prototype.Ve=function(t){var e=this,s=t.store(Xs.store);return s.$t(function(o,l){var f=jl(l),_=Wl(e.R,f);return s.put(_)})},i}();function h_(i){i.createObjectStore(Ir.store,{keyPath:Ir.keyPath}).createIndex(Ir.documentTargetsIndex,Ir.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(Xs.store,{keyPath:Xs.keyPath}).createIndex(Xs.queryTargetsIndexName,Xs.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(Rr.store)}var tg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ly=function(){function i(t,e,s,o,l,f,_,w,E,T){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=s,this.Se=l,this.window=f,this.document=_,this.De=E,this.Ce=T,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(F){return Promise.resolve()},!i.yt())throw new _t($e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new d_(this,o),this.Le=e+"main",this.R=new pw(w),this.Be=new zl(this.Le,11,new gw(this.R)),this.qe=new _f(this.referenceDelegate,this.R),this.Ut=new zd,this.Ue=new yf(this.R,this.Ut),this.Ke=new ku,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===T&&Nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return i.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new _t($e.FAILED_PRECONDITION,tg);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Po(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},i.prototype.He=function(t){var e=this;return this.Me=function(s){return(0,Q.mG)(e,void 0,void 0,function(){return(0,Q.Jh)(this,function(o){return this.started?[2,t(s)]:[2]})})},t(this.isPrimary)},i.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(s){return(0,Q.mG)(e,void 0,void 0,function(){return(0,Q.Jh)(this,function(o){switch(o.label){case 0:return null===s.newVersion?[4,t()]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})})},i.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Q.mG)(e,void 0,void 0,function(){return(0,Q.Jh)(this,function(s){switch(s.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})}))},i.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return ng(e).put(new aa(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(s){s||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(s){return t.isPrimary&&!s?t.Xe(e).next(function(){return!1}):!!s&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(qi(e))return Tt("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Tt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},i.prototype.Je=function(t){var e=this;return qd(t).get(Vs.key).next(function(s){return ct.resolve(e.tn(s))})},i.prototype.en=function(t){return ng(t).delete(this.clientId)},i.prototype.nn=function(){return(0,Q.mG)(this,void 0,void 0,function(){var t,e,s,l=this;return(0,Q.Jh)(this,function(f){switch(f.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(_){var w=ts(_,aa.store);return w.Nt().next(function(E){var T=l.rn(E,18e5),F=E.filter(function(G){return-1===T.indexOf(G)});return ct.forEach(F,function(G){return w.delete(G.clientId)}).next(function(){return F})})}).catch(function(){return[]})]);case 1:if(t=f.sent(),this.Qe)for(e=0,s=t;e<s.length;e++)this.Qe.removeItem(this.on(s[e].clientId));f.label=2;case 2:return[2]}})})},i.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},i.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},i.prototype.Ye=function(t){var e=this;return this.Ce?ct.resolve(!0):qd(t).get(Vs.key).next(function(s){if(null!==s&&e.sn(s.leaseTimestampMs,5e3)&&!e.cn(s.ownerId)){if(e.tn(s)&&e.networkEnabled)return!0;if(!e.tn(s)){if(!s.allowTabSynchronization)throw new _t($e.FAILED_PRECONDITION,tg);return!1}}return!(!e.networkEnabled||!e.inForeground)||ng(t).Nt().next(function(o){return void 0===e.rn(o,5e3).find(function(l){return!(e.clientId===l.clientId||!(!e.networkEnabled&&l.networkEnabled||!e.inForeground&&l.inForeground&&e.networkEnabled===l.networkEnabled))})})}).next(function(s){return e.isPrimary!==s&&Tt("IndexedDbPersistence","Client "+(s?"is":"is not")+" eligible for a primary lease."),s})},i.prototype.shutdown=function(){return(0,Q.mG)(this,void 0,void 0,function(){var t=this;return(0,Q.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Vs.store,aa.store],function(s){var o=new Ou(s,Po.o);return t.Xe(o).next(function(){return t.en(o)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},i.prototype.rn=function(t,e){var s=this;return t.filter(function(o){return s.sn(o.updateTimeMs,e)&&!s.cn(o.clientId)})},i.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return ng(e).Nt().next(function(s){return t.rn(s,18e5).map(function(o){return o.clientId})})})},Object.defineProperty(i.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),i.prototype.getMutationQueue=function(t){return jd.Qt(t,this.R,this.Ut,this.referenceDelegate)},i.prototype.getTargetCache=function(){return this.qe},i.prototype.getRemoteDocumentCache=function(){return this.Ue},i.prototype.getIndexManager=function(){return this.Ut},i.prototype.getBundleCache=function(){return this.Ke},i.prototype.runTransaction=function(t,e,s){var l,o=this;return Tt("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Py,function(_){return l=new Ou(_,o.Ne?o.Ne.next():Po.o),"readwrite-primary"===e?o.Je(l).next(function(w){return!!w||o.Ye(l)}).next(function(w){if(!w)throw Nr("Failed to obtain primary lease for action '"+t+"'."),o.isPrimary=!1,o.Se.enqueueRetryable(function(){return o.Me(!1)}),new _t($e.FAILED_PRECONDITION,a_);return s(l)}).next(function(w){return o.Ze(l).next(function(){return w})}):o.dn(l).next(function(){return s(l)})}).then(function(_){return l.raiseOnCommittedEvent(),_})},i.prototype.dn=function(t){var e=this;return qd(t).get(Vs.key).next(function(s){if(null!==s&&e.sn(s.leaseTimestampMs,5e3)&&!e.cn(s.ownerId)&&!e.tn(s)&&!(e.Ce||e.allowTabSynchronization&&s.allowTabSynchronization))throw new _t($e.FAILED_PRECONDITION,tg)})},i.prototype.Ze=function(t){var e=new Vs(this.clientId,this.allowTabSynchronization,Date.now());return qd(t).put(Vs.key,e)},i.yt=function(){return zl.yt()},i.prototype.Xe=function(t){var e=this,s=qd(t);return s.get(Vs.key).next(function(o){return e.tn(o)?(Tt("IndexedDbPersistence","Releasing primary lease."),s.delete(Vs.key)):ct.resolve()})},i.prototype.sn=function(t,e){var s=Date.now();return!(t<s-e||t>s&&(Nr("Detected an update time that is in the future: "+t+" > "+s),1))},i.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},i.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},i.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),(0,$n.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.ke))},i.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},i.prototype.cn=function(t){var e;try{var s=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Tt("IndexedDbPersistence","Client '"+t+"' "+(s?"is":"is not")+" zombied in LocalStorage"),s}catch(o){return Nr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}},i.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Nr("Failed to set zombie client id.",t)}},i.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},i.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},i}();function qd(i){return ts(i,Vs.store)}function ng(i){return ts(i,aa.store)}function bf(i,t){var e=i.projectId;return i.isDefaultDatabase||(e+="."+i.database),"firestore/"+t+"/"+e+"/"}var Ny=function(i,t){this.progress=i,this.wn=t},ig=function(){function i(t,e,s){this.Ue=t,this._n=e,this.Ut=s}return i.prototype.mn=function(t,e){var s=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(o){return s.yn(t,e,o)})},i.prototype.yn=function(t,e,s){return this.Ue.getEntry(t,e).next(function(o){for(var l=0,f=s;l<f.length;l++)f[l].applyToLocalView(o);return o})},i.prototype.gn=function(t,e){t.forEach(function(s,o){for(var l=0,f=e;l<f.length;l++)f[l].applyToLocalView(o)})},i.prototype.pn=function(t,e){var s=this;return this.Ue.getEntries(t,e).next(function(o){return s.En(t,o).next(function(){return o})})},i.prototype.En=function(t,e){var s=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(o){return s.gn(e,o)})},i.prototype.getDocumentsMatchingQuery=function(t,e,s){return gn.isDocumentKey((o=e).path)&&null===o.collectionGroup&&0===o.filters.length?this.Tn(t,e.path):Ec(e)?this.In(t,e,s):this.An(t,e,s);var o},i.prototype.Tn=function(t,e){return this.mn(t,new gn(e)).next(function(s){var o=Bs();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})},i.prototype.In=function(t,e,s){var o=this,l=e.collectionGroup,f=Bs();return this.Ut.getCollectionParents(t,l).next(function(_){return ct.forEach(_,function(w){var T,F,E=(T=e,F=w.child(l),new wa(F,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt));return o.An(t,E,s).next(function(T){T.forEach(function(F,G){f=f.insert(F,G)})})}).next(function(){return f})})},i.prototype.An=function(t,e,s){var o,l,f=this;return this.Ue.getDocumentsMatchingQuery(t,e,s).next(function(_){return o=_,f._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(_){return f.Rn(t,l=_,o).next(function(w){o=w;for(var E=0,T=l;E<T.length;E++)for(var F=T[E],G=0,H=F.mutations;G<H.length;G++){var Y=H[G],q=Y.key,J=o.get(q);null==J&&(J=ds.newInvalidDocument(q),o=o.insert(q,J)),kd(Y,J,F.localWriteTime),J.isFoundDocument()||(o=o.remove(q))}})}).next(function(){return o.forEach(function(_,w){tl(e,w)||(o=o.remove(_))}),o})},i.prototype.Rn=function(t,e,s){for(var o=Ii(),l=0,f=e;l<f.length;l++)for(var _=0,w=f[l].mutations;_<w.length;_++){var E=w[_];E instanceof Bl&&null===s.get(E.key)&&(o=o.add(E.key))}var T=s;return this.Ue.getEntries(t,o).next(function(F){return F.forEach(function(G,H){H.isFoundDocument()&&(T=T.insert(G,H))}),T})},i}(),rg=function(){function i(t,e,s,o){this.targetId=t,this.fromCache=e,this.bn=s,this.vn=o}return i.Pn=function(t,e){for(var s=Ii(),o=Ii(),l=0,f=e.docChanges;l<f.length;l++){var _=f[l];switch(_.type){case 0:s=s.add(_.doc.key);break;case 1:o=o.add(_.doc.key)}}return new i(t,e.fromCache,s,o)},i}(),wf=function(){function i(){}return i.prototype.Vn=function(t){this.Sn=t},i.prototype.getDocumentsMatchingQuery=function(t,e,s,o){var f,l=this;return 0===(f=e).filters.length&&null===f.limit&&null==f.startAt&&null==f.endAt&&(0===f.explicitOrderBy.length||1===f.explicitOrderBy.length&&f.explicitOrderBy[0].field.isKeyField())||s.isEqual(ni.min())?this.Dn(t,e):this.Sn.pn(t,o).next(function(f){var _=l.Cn(e,f);return(Ns(e)||sa(e))&&l.Nn(e.limitType,_,o,s)?l.Dn(t,e):(Yh()<=Ya.in.DEBUG&&Tt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Kh(e)),l.Sn.getDocumentsMatchingQuery(t,e,s).next(function(w){return _.forEach(function(E){w=w.insert(E.key,E)}),w}))})},i.prototype.Cn=function(t,e){var s=new es(Bp(t));return e.forEach(function(o,l){tl(t,l)&&(s=s.add(l))}),s},i.prototype.Nn=function(t,e,s,o){if(s.size!==e.size)return!0;var l="F"===t?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)},i.prototype.Dn=function(t,e){return Yh()<=Ya.in.DEBUG&&Tt("QueryEngine","Using full collection scan to execute query:",Kh(e)),this.Sn.getDocumentsMatchingQuery(t,e,ni.min())},i}(),kC=function(){function i(t,e,s,o){this.persistence=t,this.xn=e,this.R=o,this.kn=new Jr(ai),this.Fn=new Nc(function(l){return kp(l)},Td),this.$n=ni.min(),this._n=t.getMutationQueue(s),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new ig(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return i.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(s){return t.collect(s,e.kn)})},i}();function By(i,t,e,s){return new kC(i,t,e,s)}function Vy(i,t){return(0,Q.mG)(this,void 0,void 0,function(){var e,s,o,l;return(0,Q.Jh)(this,function(f){switch(f.label){case 0:return e=zt(i),s=e._n,o=e.Mn,[4,e.persistence.runTransaction("Handle user change","readonly",function(_){var w;return e._n.getAllMutationBatches(_).next(function(E){return w=E,s=e.persistence.getMutationQueue(t),o=new ig(e.On,s,e.persistence.getIndexManager()),s.getAllMutationBatches(_)}).next(function(E){for(var T=[],F=[],G=Ii(),H=0,Y=w;H<Y.length;H++){var q=Y[H];T.push(q.batchId);for(var J=0,re=q.mutations;J<re.length;J++)G=G.add(re[J].key)}for(var be=0,He=E;be<He.length;be++){var Ve=He[be];F.push(Ve.batchId);for(var ot=0,bt=Ve.mutations;ot<bt.length;ot++)G=G.add(bt[ot].key)}return o.pn(_,G).next(function(Ot){return{Ln:Ot,removedBatchIds:T,addedBatchIds:F}})})})];case 1:return l=f.sent(),[2,(e._n=s,e.Mn=o,e.xn.Vn(e.Mn),l)]}})})}function Gy(i,t){var e=zt(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(s){var f,_,w,E,T,F,G,o=t.batch.keys(),l=e.On.newChangeBuffer({trackRemovals:!0});return(f=e,_=s,w=t,E=l,T=w.batch,F=T.keys(),G=ct.resolve(),F.forEach(function(H){G=G.next(function(){return E.getEntry(_,H)}).next(function(Y){var q=w.docVersions.get(H);En(null!==q),Y.version.compareTo(q)<0&&(T.applyToRemoteDocument(Y,w),Y.isValidDocument()&&E.addEntry(Y,w.commitVersion))})}),G.next(function(){return f._n.removeMutationBatch(_,T)})).next(function(){return l.apply(s)}).next(function(){return e._n.performConsistencyCheck(s)}).next(function(){return e.Mn.pn(s,o)})})}function sg(i){var t=zt(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.qe.getLastRemoteSnapshotVersion(e)})}function f_(i,t){var e=zt(i),s=t.snapshotVersion,o=e.kn;return e.persistence.runTransaction("Apply remote event","readwrite-primary",function(l){var f=e.On.newChangeBuffer({trackRemovals:!0});o=e.kn;var _=[];t.targetChanges.forEach(function(T,F){var q,J,re,G=o.get(F);if(G){_.push(e.qe.removeMatchingKeys(l,T.removedDocuments,F).next(function(){return e.qe.addMatchingKeys(l,T.addedDocuments,F)}));var H=T.resumeToken;if(H.approximateByteSize()>0){var Y=G.withResumeToken(H,s).withSequenceNumber(l.currentSequenceNumber);o=o.insert(F,Y),q=G,re=T,En((J=Y).resumeToken.approximateByteSize()>0),(0===q.resumeToken.approximateByteSize()||J.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0)&&_.push(e.qe.updateTargetData(l,Y))}}});var w=ko();if(t.documentUpdates.forEach(function(T,F){t.resolvedLimboDocuments.has(T)&&_.push(e.persistence.referenceDelegate.updateLimboDocument(l,T))}),_.push(Uy(l,f,t.documentUpdates,s,void 0).next(function(T){w=T})),!s.isEqual(ni.min())){var E=e.qe.getLastRemoteSnapshotVersion(l).next(function(T){return e.qe.setTargetsMetadata(l,l.currentSequenceNumber,s)});_.push(E)}return ct.waitFor(_).next(function(){return f.apply(l)}).next(function(){return e.Mn.En(l,w)}).next(function(){return w})}).then(function(l){return e.kn=o,l})}function Uy(i,t,e,s,o){var l=Ii();return e.forEach(function(f){return l=l.add(f)}),t.getEntries(i,l).next(function(f){var _=ko();return e.forEach(function(w,E){var T=f.get(w),F=(null==o?void 0:o.get(w))||s;E.isNoDocument()&&E.version.isEqual(ni.min())?(t.removeEntry(w,F),_=_.insert(w,E)):!T.isValidDocument()||E.version.compareTo(T.version)>0||0===E.version.compareTo(T.version)&&T.hasPendingWrites?(t.addEntry(E,F),_=_.insert(w,E)):Tt("LocalStore","Ignoring outdated watch update for ",w,". Current version:",T.version," Watch version:",E.version)}),_})}function Bu(i,t){var e=zt(i);return e.persistence.runTransaction("Get next mutation batch","readonly",function(s){return void 0===t&&(t=-1),e._n.getNextMutationBatchAfterBatchId(s,t)})}function ql(i,t){var e=zt(i);return e.persistence.runTransaction("Allocate target","readwrite",function(s){var o;return e.qe.getTargetData(s,t).next(function(l){return l?ct.resolve(o=l):e.qe.allocateTargetId(s).next(function(f){return o=new gf(t,f,0,s.currentSequenceNumber),e.qe.addTargetData(s,o).next(function(){return o})})})}).then(function(s){var o=e.kn.get(s.targetId);return(null===o||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.kn=e.kn.insert(s.targetId,s),e.Fn.set(t,s.targetId)),s})}function $l(i,t,e){return(0,Q.mG)(this,void 0,void 0,function(){var s,o,l,f;return(0,Q.Jh)(this,function(_){switch(_.label){case 0:s=zt(i),o=s.kn.get(t),l=e?"readwrite":"readwrite-primary",_.label=1;case 1:return _.trys.push([1,4,,5]),e?[3,3]:[4,s.persistence.runTransaction("Release target",l,function(w){return s.persistence.referenceDelegate.removeTarget(w,o)})];case 2:_.sent(),_.label=3;case 3:return[3,5];case 4:if(!qi(f=_.sent()))throw f;return Tt("LocalStore","Failed to update sequence numbers for target "+t+": "+f),[3,5];case 5:return s.kn=s.kn.remove(t),s.Fn.delete(o.target),[2]}})})}function og(i,t,e){var s=zt(i),o=ni.min(),l=Ii();return s.persistence.runTransaction("Execute query","readonly",function(f){return(_=s,w=f,E=hs(t),T=zt(_),F=T.Fn.get(E),void 0!==F?ct.resolve(T.kn.get(F)):T.qe.getTargetData(w,E)).next(function(_){if(_)return o=_.lastLimboFreeSnapshotVersion,s.qe.getMatchingKeysForTargetId(f,_.targetId).next(function(w){l=w})}).next(function(){return s.xn.getDocumentsMatchingQuery(f,t,e?o:ni.min(),e?l:Ii())}).next(function(_){return{documents:_,Bn:l}});var _,w,E,T,F})}function Hy(i,t){var e=zt(i),s=zt(e.qe),o=e.kn.get(t);return o?Promise.resolve(o.target):e.persistence.runTransaction("Get target data","readonly",function(l){return s.lt(l,t).next(function(f){return f?f.target:null})})}function ag(i){var t=zt(i);return t.persistence.runTransaction("Get new document changes","readonly",function(e){return o=e,l=t.$n,f=zt(t.On),_=ko(),w=c_(l),E=ul(o),T=IDBKeyRange.lowerBound(w,!0),E.$t({index:cr.readTimeIndex,range:T},function(F,G){var H=sl(f.R,G);_=_.insert(H.key,H),w=G.readTime}).next(function(){return{wn:_,readTime:br(w)}});var o,l,f,_,w,E,T}).then(function(e){var s=e.wn;return t.$n=e.readTime,s})}function mw(i){return(0,Q.mG)(this,void 0,void 0,function(){var t;return(0,Q.Jh)(this,function(e){return[2,(t=zt(i)).persistence.runTransaction("Synchronize last document change read time","readonly",function(s){return l=ul(s),f=ni.min(),l.$t({index:cr.readTimeIndex,reverse:!0},function(_,w,E){w.readTime&&(f=br(w.readTime)),E.done()}).next(function(){return f});var l,f}).then(function(s){t.$n=s})]})})}function zy(i,t,e,s){return(0,Q.mG)(this,void 0,void 0,function(){var o,l,f,_,w,E,T,F,G,H;return(0,Q.Jh)(this,function(Y){switch(Y.label){case 0:for(o=zt(i),l=Ii(),f=ko(),_=Ic(),w=0,E=e;w<E.length;w++)F=t.qn((T=E[w]).metadata.name),T.document&&(l=l.add(F)),f=f.insert(F,t.Un(T)),_=_.insert(F,t.Kn(T.metadata.readTime));return G=o.On.newChangeBuffer({trackRemovals:!0}),[4,ql(o,(q=s,hs(Ds(ui.fromString("__bundle__/docs/"+q)))))];case 1:return H=Y.sent(),[2,o.persistence.runTransaction("Apply bundle documents","readwrite",function(q){return Uy(q,G,f,ni.min(),_).next(function(J){return G.apply(q),J}).next(function(J){return o.qe.removeMatchingKeysForTargetId(q,H.targetId).next(function(){return o.qe.addMatchingKeys(q,l,H.targetId)}).next(function(){return o.Mn.En(q,J)}).next(function(){return J})})})]}var q})})}function jy(i,t,e){return void 0===e&&(e=Ii()),(0,Q.mG)(this,void 0,void 0,function(){var s,o;return(0,Q.Jh)(this,function(l){switch(l.label){case 0:return[4,ql(i,hs(u_(t.bundledQuery)))];case 1:return s=l.sent(),[2,(o=zt(i)).persistence.runTransaction("Save named query","readwrite",function(f){var _=Ss(t.readTime);if(s.snapshotVersion.compareTo(_)>=0)return o.Ke.saveNamedQuery(f,t);var w=s.withResumeToken(mo.EMPTY_BYTE_STRING,_);return o.kn=o.kn.insert(w.targetId,w),o.qe.updateTargetData(f,w).next(function(){return o.qe.removeMatchingKeysForTargetId(f,s.targetId)}).next(function(){return o.qe.addMatchingKeys(f,e,s.targetId)}).next(function(){return o.Ke.saveNamedQuery(f,t)})})]}})})}var _w=function(){function i(t){this.R=t,this.Qn=new Map,this.jn=new Map}return i.prototype.getBundleMetadata=function(t,e){return ct.resolve(this.Qn.get(e))},i.prototype.saveBundleMetadata=function(t,e){var s;return this.Qn.set(e.id,{id:(s=e).id,version:s.version,createTime:Ss(s.createTime)}),ct.resolve()},i.prototype.getNamedQuery=function(t,e){return ct.resolve(this.jn.get(e))},i.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(s=e).name,query:u_(s.bundledQuery),readTime:Ss(s.readTime)}),ct.resolve();var s},i}(),lg=function(){function i(){this.Wn=new es(As.Gn),this.zn=new es(As.Hn)}return i.prototype.isEmpty=function(){return this.Wn.isEmpty()},i.prototype.addReference=function(t,e){var s=new As(t,e);this.Wn=this.Wn.add(s),this.zn=this.zn.add(s)},i.prototype.Jn=function(t,e){var s=this;t.forEach(function(o){return s.addReference(o,e)})},i.prototype.removeReference=function(t,e){this.Yn(new As(t,e))},i.prototype.Xn=function(t,e){var s=this;t.forEach(function(o){return s.removeReference(o,e)})},i.prototype.Zn=function(t){var e=this,s=new gn(new ui([])),o=new As(s,t),l=new As(s,t+1),f=[];return this.zn.forEachInRange([o,l],function(_){e.Yn(_),f.push(_.key)}),f},i.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},i.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},i.prototype.es=function(t){var e=new gn(new ui([])),s=new As(e,t),o=new As(e,t+1),l=Ii();return this.zn.forEachInRange([s,o],function(f){l=l.add(f.key)}),l},i.prototype.containsKey=function(t){var e=new As(t,0),s=this.Wn.firstAfterOrEqual(e);return null!==s&&t.isEqual(s.key)},i}(),As=function(){function i(t,e){this.key=t,this.ns=e}return i.Gn=function(t,e){return gn.comparator(t.key,e.key)||ai(t.ns,e.ns)},i.Hn=function(t,e){return ai(t.ns,e.ns)||gn.comparator(t.key,e.key)},i}(),FC=function(){function i(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new es(As.Gn)}return i.prototype.checkEmpty=function(t){return ct.resolve(0===this._n.length)},i.prototype.addMutationBatch=function(t,e,s,o){var l=this.ss;this.ss++;var f=new ff(l,e,s,o);this._n.push(f);for(var _=0,w=o;_<w.length;_++){var E=w[_];this.rs=this.rs.add(new As(E.key,l)),this.Ut.addToCollectionParentIndex(t,E.key.path.popLast())}return ct.resolve(f)},i.prototype.lookupMutationBatch=function(t,e){return ct.resolve(this.os(e))},i.prototype.getNextMutationBatchAfterBatchId=function(t,e){var o=this.cs(e+1),l=o<0?0:o;return ct.resolve(this._n.length>l?this._n[l]:null)},i.prototype.getHighestUnacknowledgedBatchId=function(){return ct.resolve(0===this._n.length?-1:this.ss-1)},i.prototype.getAllMutationBatches=function(t){return ct.resolve(this._n.slice())},i.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var s=this,o=new As(e,0),l=new As(e,Number.POSITIVE_INFINITY),f=[];return this.rs.forEachInRange([o,l],function(_){var w=s.os(_.ns);f.push(w)}),ct.resolve(f)},i.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var s=this,o=new es(ai);return e.forEach(function(l){var f=new As(l,0),_=new As(l,Number.POSITIVE_INFINITY);s.rs.forEachInRange([f,_],function(w){o=o.add(w.ns)})}),ct.resolve(this.us(o))},i.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var s=e.path,o=s.length+1,l=s;gn.isDocumentKey(l)||(l=l.child(""));var f=new As(new gn(l),0),_=new es(ai);return this.rs.forEachWhile(function(w){var E=w.key.path;return!!s.isPrefixOf(E)&&(E.length===o&&(_=_.add(w.ns)),!0)},f),ct.resolve(this.us(_))},i.prototype.us=function(t){var e=this,s=[];return t.forEach(function(o){var l=e.os(o);null!==l&&s.push(l)}),s},i.prototype.removeMutationBatch=function(t,e){var s=this;En(0===this.hs(e.batchId,"removed")),this._n.shift();var o=this.rs;return ct.forEach(e.mutations,function(l){var f=new As(l.key,e.batchId);return o=o.delete(f),s.referenceDelegate.markPotentiallyOrphaned(t,l.key)}).next(function(){s.rs=o})},i.prototype.Gt=function(t){},i.prototype.containsKey=function(t,e){var s=new As(e,0),o=this.rs.firstAfterOrEqual(s);return ct.resolve(e.isEqual(o&&o.key))},i.prototype.performConsistencyCheck=function(t){return ct.resolve()},i.prototype.hs=function(t,e){return this.cs(t)},i.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},i.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},i}(),vw=function(){function i(t,e){this.Ut=t,this.ls=e,this.docs=new Jr(gn.comparator),this.size=0}return i.prototype.addEntry=function(t,e,s){var o=e.key,l=this.docs.get(o),f=l?l.size:0,_=this.ls(e);return this.docs=this.docs.insert(o,{document:e.clone(),size:_,readTime:s}),this.size+=_-f,this.Ut.addToCollectionParentIndex(t,o.path.popLast())},i.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},i.prototype.getEntry=function(t,e){var s=this.docs.get(e);return ct.resolve(s?s.document.clone():ds.newInvalidDocument(e))},i.prototype.getEntries=function(t,e){var s=this,o=ko();return e.forEach(function(l){var f=s.docs.get(l);o=o.insert(l,f?f.document.clone():ds.newInvalidDocument(l))}),ct.resolve(o)},i.prototype.getDocumentsMatchingQuery=function(t,e,s){for(var o=ko(),l=new gn(e.path.child("")),f=this.docs.getIteratorFrom(l);f.hasNext();){var _=f.getNext(),E=_.value,T=E.document,F=E.readTime;if(!e.path.isPrefixOf(_.key.path))break;F.compareTo(s)<=0||tl(e,T)&&(o=o.insert(T.key,T.clone()))}return ct.resolve(o)},i.prototype.fs=function(t,e){return ct.forEach(this.docs,function(s){return e(s)})},i.prototype.newChangeBuffer=function(t){return new p_(this)},i.prototype.getSize=function(t){return ct.resolve(this.size)},i}(),p_=function(i){function t(e){var s=this;return(s=i.call(this)||this).Ie=e,s}return(0,Q.ZT)(t,i),t.prototype.applyChanges=function(e){var s=this,o=[];return this.changes.forEach(function(l,f){f.document.isValidDocument()?o.push(s.Ie.addEntry(e,f.document,s.getReadTime(l))):s.Ie.removeEntry(l)}),ct.waitFor(o)},t.prototype.getFromCache=function(e,s){return this.Ie.getEntry(e,s)},t.prototype.getAllFromCache=function(e,s){return this.Ie.getEntries(e,s)},t}(Fy),g_=function(){function i(t){this.persistence=t,this.ds=new Nc(function(e){return kp(e)},Td),this.lastRemoteSnapshotVersion=ni.min(),this.highestTargetId=0,this.ws=0,this._s=new lg,this.targetCount=0,this.ys=Lc.Jt()}return i.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(s,o){return e(o)}),ct.resolve()},i.prototype.getLastRemoteSnapshotVersion=function(t){return ct.resolve(this.lastRemoteSnapshotVersion)},i.prototype.getHighestSequenceNumber=function(t){return ct.resolve(this.ws)},i.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),ct.resolve(this.highestTargetId)},i.prototype.setTargetsMetadata=function(t,e,s){return s&&(this.lastRemoteSnapshotVersion=s),e>this.ws&&(this.ws=e),ct.resolve()},i.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Lc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},i.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,ct.resolve()},i.prototype.updateTargetData=function(t,e){return this.te(e),ct.resolve()},i.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,ct.resolve()},i.prototype.removeTargets=function(t,e,s){var o=this,l=0,f=[];return this.ds.forEach(function(_,w){w.sequenceNumber<=e&&null===s.get(w.targetId)&&(o.ds.delete(_),f.push(o.removeMatchingKeysForTargetId(t,w.targetId)),l++)}),ct.waitFor(f).next(function(){return l})},i.prototype.getTargetCount=function(t){return ct.resolve(this.targetCount)},i.prototype.getTargetData=function(t,e){var s=this.ds.get(e)||null;return ct.resolve(s)},i.prototype.addMatchingKeys=function(t,e,s){return this._s.Jn(e,s),ct.resolve()},i.prototype.removeMatchingKeys=function(t,e,s){this._s.Xn(e,s);var o=this.persistence.referenceDelegate,l=[];return o&&e.forEach(function(f){l.push(o.markPotentiallyOrphaned(t,f))}),ct.waitFor(l)},i.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),ct.resolve()},i.prototype.getMatchingKeysForTargetId=function(t,e){var s=this._s.es(e);return ct.resolve(s)},i.prototype.containsKey=function(t,e){return ct.resolve(this._s.containsKey(e))},i}(),Wy=function(){function i(t,e){var s=this;this.gs={},this.Ne=new Po(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new g_(this),this.Ut=new Hd,this.Ue=new vw(this.Ut,function(f){return s.referenceDelegate.ps(f)}),this.R=new pw(e),this.Ke=new _w(this.R)}return i.prototype.start=function(){return Promise.resolve()},i.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(i.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),i.prototype.setDatabaseDeletedListener=function(){},i.prototype.setNetworkEnabled=function(){},i.prototype.getIndexManager=function(){return this.Ut},i.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new FC(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},i.prototype.getTargetCache=function(){return this.qe},i.prototype.getRemoteDocumentCache=function(){return this.Ue},i.prototype.getBundleCache=function(){return this.Ke},i.prototype.runTransaction=function(t,e,s){var o=this;Tt("MemoryPersistence","Starting transaction:",t);var l=new m_(this.Ne.next());return this.referenceDelegate.Es(),s(l).next(function(f){return o.referenceDelegate.Ts(l).next(function(){return f})}).toPromise().then(function(f){return l.raiseOnCommittedEvent(),f})},i.prototype.Is=function(t,e){return ct.or(Object.values(this.gs).map(function(s){return function(){return s.containsKey(t,e)}}))},i}(),m_=function(i){function t(e){var s=this;return(s=i.call(this)||this).currentSequenceNumber=e,s}return(0,Q.ZT)(t,i),t}(Oy),LC=function(){function i(t){this.persistence=t,this.As=new lg,this.Rs=null}return i.bs=function(t){return new i(t)},Object.defineProperty(i.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw dn()},enumerable:!1,configurable:!0}),i.prototype.addReference=function(t,e,s){return this.As.addReference(s,e),this.vs.delete(s.toString()),ct.resolve()},i.prototype.removeReference=function(t,e,s){return this.As.removeReference(s,e),this.vs.add(s.toString()),ct.resolve()},i.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),ct.resolve()},i.prototype.removeTarget=function(t,e){var s=this;this.As.Zn(e.targetId).forEach(function(l){return s.vs.add(l.toString())});var o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,e.targetId).next(function(l){l.forEach(function(f){return s.vs.add(f.toString())})}).next(function(){return o.removeTargetData(t,e)})},i.prototype.Es=function(){this.Rs=new Set},i.prototype.Ts=function(t){var e=this,s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ct.forEach(this.vs,function(o){var l=gn.fromPath(o);return e.Ps(t,l).next(function(f){f||s.removeEntry(l)})}).next(function(){return e.Rs=null,s.apply(t)})},i.prototype.updateLimboDocument=function(t,e){var s=this;return this.Ps(t,e).next(function(o){o?s.vs.delete(e.toString()):s.vs.add(e.toString())})},i.prototype.ps=function(t){return 0},i.prototype.Ps=function(t,e){var s=this;return ct.or([function(){return ct.resolve(s.As.containsKey(e))},function(){return s.persistence.getTargetCache().containsKey(t,e)},function(){return s.persistence.Is(t,e)}])},i}(),is=function(){function i(t){this.uid=t}return i.prototype.isAuthenticated=function(){return null!=this.uid},i.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},i.prototype.isEqual=function(t){return t.uid===this.uid},i}();function Yy(i,t){return"firestore_clients_"+i+"_"+t}function NC(i,t,e){var s="firestore_mutations_"+i+"_"+e;return t.isAuthenticated()&&(s+="_"+t.uid),s}function Vu(i,t){return"firestore_targets_"+i+"_"+t}is.UNAUTHENTICATED=new is(null),is.GOOGLE_CREDENTIALS=new is("google-credentials-uid"),is.FIRST_PARTY=new is("first-party-uid"),is.MOCK_USER=new is("mock-user");var __=function(){function i(t,e,s,o){this.user=t,this.batchId=e,this.state=s,this.error=o}return i.Vs=function(t,e,s){var o,l=JSON.parse(s),f="object"==typeof l&&-1!==["pending","acknowledged","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return f&&l.error&&(f="string"==typeof l.error.message&&"string"==typeof l.error.code)&&(o=new _t(l.error.code,l.error.message)),f?new i(t,e,l.state,o):(Nr("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+s),null)},i.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},i}(),dl=function(){function i(t,e,s){this.targetId=t,this.state=e,this.error=s}return i.Vs=function(t,e){var s,o=JSON.parse(e),l="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(s=new _t(o.error.code,o.error.message)),l?new i(t,o.state,s):(Nr("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},i.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},i}(),cg=function(){function i(t,e){this.clientId=t,this.activeTargetIds=e}return i.Vs=function(t,e){for(var s=JSON.parse(e),o="object"==typeof s&&s.activeTargetIds instanceof Array,l=rf(),f=0;o&&f<s.activeTargetIds.length;++f)o=Gm(s.activeTargetIds[f]),l=l.add(s.activeTargetIds[f]);return o?new i(t,l):(Nr("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},i}(),BC=function(){function i(t,e){this.clientId=t,this.onlineState=e}return i.Vs=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new i(e.clientId,e.onlineState):(Nr("SharedClientState","Failed to parse online state: "+t),null)},i}(),hl=function(){function i(){this.activeTargetIds=rf()}return i.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},i.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},i.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},i}(),ug=function(){function i(t,e,s,o,l){this.window=t,this.Se=e,this.persistenceKey=s,this.Ns=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Jr(ai),this.started=!1,this.$s=[];var f=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Os=Yy(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new hl),this.Ls=new RegExp("^firestore_clients_"+f+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+f+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+f+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks=function(_){return"firestore_bundle_loaded_"+_}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return i.yt=function(t){return!(!t||!t.localStorage)},i.prototype.start=function(){return(0,Q.mG)(this,void 0,void 0,function(){var t,e,s,o,l,f,_,w,E,T,G=this;return(0,Q.Jh)(this,function(H){switch(H.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=H.sent(),e=0,s=t;e<s.length;e++)(o=s[e])!==this.Ns&&(l=this.getItem(Yy(this.persistenceKey,o)))&&(f=cg.Vs(o,l))&&(this.Fs=this.Fs.insert(f.clientId,f));for(this.Qs(),(_=this.storage.getItem(this.Us))&&(w=this.js(_))&&this.Ws(w),E=0,T=this.$s;E<T.length;E++)this.ks(T[E]);return this.$s=[],this.window.addEventListener("pagehide",function(){return G.shutdown()}),this.started=!0,[2]}})})},i.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},i.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},i.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach(function(s,o){o.activeTargetIds.has(t)&&(e=!0)}),e},i.prototype.addPendingMutation=function(t){this.zs(t,"pending")},i.prototype.updateMutationState=function(t,e,s){this.zs(t,e,s),this.Hs(t)},i.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var s=this.storage.getItem(Vu(this.persistenceKey,t));if(s){var o=dl.Vs(t,s);o&&(e=o.state)}}return this.Js.Ds(t),this.Qs(),e},i.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},i.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},i.prototype.clearQueryState=function(t){this.removeItem(Vu(this.persistenceKey,t))},i.prototype.updateQueryState=function(t,e,s){this.Ys(t,e,s)},i.prototype.handleUserChange=function(t,e,s){var o=this;e.forEach(function(l){o.Hs(l)}),this.currentUser=t,s.forEach(function(l){o.addPendingMutation(l)})},i.prototype.setOnlineState=function(t){this.Xs(t)},i.prototype.notifyBundleLoaded=function(){this.Zs()},i.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},i.prototype.getItem=function(t){var e=this.storage.getItem(t);return Tt("SharedClientState","READ",t,e),e},i.prototype.setItem=function(t,e){Tt("SharedClientState","SET",t,e),this.storage.setItem(t,e)},i.prototype.removeItem=function(t){Tt("SharedClientState","REMOVE",t),this.storage.removeItem(t)},i.prototype.ks=function(t){var e=this,s=t;if(s.storageArea===this.storage){if(Tt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.Os)return void Nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Q.mG)(e,void 0,void 0,function(){var o,l,f,_,w,E;return(0,Q.Jh)(this,function(T){if(this.started){if(null!==s.key)if(this.Ls.test(s.key)){if(null==s.newValue)return o=this.ti(s.key),[2,this.ei(o,null)];if(l=this.ni(s.key,s.newValue))return[2,this.ei(l.clientId,l)]}else if(this.Bs.test(s.key)){if(null!==s.newValue&&(f=this.si(s.key,s.newValue)))return[2,this.ii(f)]}else if(this.qs.test(s.key)){if(null!==s.newValue&&(_=this.ri(s.key,s.newValue)))return[2,this.oi(_)]}else if(s.key===this.Us){if(null!==s.newValue&&(w=this.js(s.newValue)))return[2,this.Ws(w)]}else if(s.key===this.Ms)(E=function(F){var G=Po.o;if(null!=F)try{var H=JSON.parse(F);En("number"==typeof H),G=H}catch(Y){Nr("SharedClientState","Failed to read sequence number from WebStorage",Y)}return G}(s.newValue))!==Po.o&&this.sequenceNumberHandler(E);else if(s.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(s);return[2]})})})}},Object.defineProperty(i.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),i.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},i.prototype.zs=function(t,e,s){var o=new __(this.currentUser,t,e,s),l=NC(this.persistenceKey,this.currentUser,t);this.setItem(l,o.Ss())},i.prototype.Hs=function(t){var e=NC(this.persistenceKey,this.currentUser,t);this.removeItem(e)},i.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},i.prototype.Ys=function(t,e,s){var o=Vu(this.persistenceKey,t),l=new dl(t,e,s);this.setItem(o,l.Ss())},i.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},i.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},i.prototype.ni=function(t,e){var s=this.ti(t);return cg.Vs(s,e)},i.prototype.si=function(t,e){var s=this.Bs.exec(t),o=Number(s[1]);return __.Vs(new is(void 0!==s[2]?s[2]:null),o,e)},i.prototype.ri=function(t,e){var s=this.qs.exec(t),o=Number(s[1]);return dl.Vs(o,e)},i.prototype.js=function(t){return BC.Vs(t)},i.prototype.ii=function(t){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Tt("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},i.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},i.prototype.ei=function(t,e){var s=this,o=e?this.Fs.insert(t,e):this.Fs.remove(t),l=this.Gs(this.Fs),f=this.Gs(o),_=[],w=[];return f.forEach(function(E){l.has(E)||_.push(E)}),l.forEach(function(E){f.has(E)||w.push(E)}),this.syncEngine.hi(_,w).then(function(){s.Fs=o})},i.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},i.prototype.Gs=function(t){var e=rf();return t.forEach(function(s,o){e=e.unionWith(o.activeTargetIds)}),e},i}(),dg=function(){function i(){this.li=new hl,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return i.prototype.addPendingMutation=function(t){},i.prototype.updateMutationState=function(t,e,s){},i.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},i.prototype.updateQueryState=function(t,e,s){this.fi[t]=e},i.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},i.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},i.prototype.clearQueryState=function(t){delete this.fi[t]},i.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},i.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},i.prototype.start=function(){return this.li=new hl,Promise.resolve()},i.prototype.handleUserChange=function(t,e,s){},i.prototype.setOnlineState=function(t){},i.prototype.shutdown=function(){},i.prototype.writeSequenceNumber=function(t){},i.prototype.notifyBundleLoaded=function(){},i}(),xf=function(){function i(){}return i.prototype.di=function(t){},i.prototype.shutdown=function(){},i}(),qy=function(){function i(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return i.prototype.di=function(t){this.gi.push(t)},i.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},i.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},i.prototype._i=function(){Tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},i.prototype.yi=function(){Tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},i.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},i}(),$y={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Bc=function(){function i(t){this.Ei=t.Ei,this.Ti=t.Ti}return i.prototype.Ii=function(t){this.Ai=t},i.prototype.Ri=function(t){this.bi=t},i.prototype.onMessage=function(t){this.vi=t},i.prototype.close=function(){this.Ti()},i.prototype.send=function(t){this.Ei(t)},i.prototype.Pi=function(){this.Ai()},i.prototype.Vi=function(t){this.bi(t)},i.prototype.Si=function(t){this.vi(t)},i}(),yw=function(i){function t(e){var s=this;return(s=i.call(this,e)||this).forceLongPolling=e.forceLongPolling,s.autoDetectLongPolling=e.autoDetectLongPolling,s.useFetchStreams=e.useFetchStreams,s}return(0,Q.ZT)(t,i),t.prototype.Fi=function(e,s,o,l){return new Promise(function(f,_){var w=new Ap;w.listenOnce(uy.COMPLETE,function(){try{switch(w.getLastErrorCode()){case Ep.NO_ERROR:var T=w.getResponseJson();Tt("Connection","XHR received:",JSON.stringify(T)),f(T);break;case Ep.TIMEOUT:Tt("Connection",'RPC "'+e+'" timed out'),_(new _t($e.DEADLINE_EXCEEDED,"Request time out"));break;case Ep.HTTP_ERROR:var F=w.getStatus();if(Tt("Connection",'RPC "'+e+'" failed with status:',F,"response text:",w.getResponseText()),F>0){var G=w.getResponseJson().error;if(G&&G.status&&G.message){var H=(q=G.status.toLowerCase().replace(/_/g,"-"),Object.values($e).indexOf(q)>=0?q:$e.UNKNOWN);_(new _t(H,G.message))}else _(new _t($e.UNKNOWN,"Server responded with status "+w.getStatus()))}else _(new _t($e.UNAVAILABLE,"Connection failed."));break;default:dn()}}finally{Tt("Connection",'RPC "'+e+'" completed.')}var q});var E=JSON.stringify(l);w.send(s,"POST",E,o,15)})},t.prototype.Oi=function(e,s){var o=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=new Om,f=Fl(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new dy({})),this.ki(_.initMessageHeaders,s),(0,$n.uI)()||(0,$n.b$)()||(0,$n.d)()||(0,$n.w1)()||(0,$n.Mn)()||(0,$n.ru)()||(_.httpHeadersOverwriteParam="$httpHeaders");var w=o.join("");Tt("Connection","Creating WebChannel: "+w,_);var E=l.createWebChannel(w,_),T=!1,F=!1,G=new Bc({Ei:function(Y){F?Tt("Connection","Not sending because WebChannel is closed:",Y):(T||(Tt("Connection","Opening WebChannel transport."),E.open(),T=!0),Tt("Connection","WebChannel sending:",Y),E.send(Y))},Ti:function(){return E.close()}}),H=function(Y,q,J){Y.listen(q,function(re){try{J(re)}catch(Me){setTimeout(function(){throw Me},0)}})};return H(E,Sp.EventType.OPEN,function(){F||Tt("Connection","WebChannel transport opened.")}),H(E,Sp.EventType.CLOSE,function(){F||(F=!0,Tt("Connection","WebChannel transport closed"),G.Vi())}),H(E,Sp.EventType.ERROR,function(Y){F||(F=!0,Dd("Connection","WebChannel transport errored:",Y),G.Vi(new _t($e.UNAVAILABLE,"The operation could not be completed")))}),H(E,Sp.EventType.MESSAGE,function(Y){var q;if(!F){var J=Y.data[0];En(!!J);var Me=J.error||(null===(q=J[0])||void 0===q?void 0:q.error);if(Me){Tt("Connection","WebChannel received error:",Me);var be=Me.status,He=function(ot){var bt=Xr[ot];if(void 0!==bt)return Hp(bt)}(be),Ve=Me.message;void 0===He&&(He=$e.INTERNAL,Ve="Unknown error status: "+be+" with message "+Me.message),F=!0,G.Vi(new _t(He,Ve)),E.close()}else Tt("Connection","WebChannel received:",J),G.Si(J)}}),H(f,Cu.STAT_EVENT,function(Y){Y.stat===Fm_PROXY?Tt("Connection","Detected buffering proxy"):Y.stat===Fm_NOPROXY&&Tt("Connection","Detected no buffering proxy")}),setTimeout(function(){G.Pi()},0),G},t}(function(){function i(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return i.prototype.Ni=function(t,e,s,o){var l=this.xi(t,e);Tt("RestConnection","Sending: ",l,s);var f={};return this.ki(f,o),this.Fi(t,l,f,s).then(function(_){return Tt("RestConnection","Received: ",_),_},function(_){throw Dd("RestConnection",t+" failed with error: ",_,"url: ",l,"request:",s),_})},i.prototype.$i=function(t,e,s,o){return this.Ni(t,e,s,o)},i.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var s in e.authHeaders)e.authHeaders.hasOwnProperty(s)&&(t[s]=e.authHeaders[s])},i.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+$y[t]},i}());function v_(){return"undefined"!=typeof window?window:null}function $d(){return"undefined"!=typeof document?document:null}function Gu(i){return new RC(i,!0)}var y_=function(){function i(t,e,s,o,l){void 0===s&&(s=1e3),void 0===o&&(o=1.5),void 0===l&&(l=6e4),this.Se=t,this.timerId=e,this.Mi=s,this.Li=o,this.Bi=l,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return i.prototype.reset=function(){this.qi=0},i.prototype.Qi=function(){this.qi=this.Bi},i.prototype.ji=function(t){var e=this;this.cancel();var s=Math.floor(this.qi+this.Wi()),o=Math.max(0,Date.now()-this.Ki),l=Math.max(0,s-o);l>0&&Tt("ExponentialBackoff","Backing off for "+l+" ms (base delay: "+this.qi+" ms, delay with jitter: "+s+" ms, last attempt: "+o+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,l,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},i.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},i.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},i.prototype.Wi=function(){return(Math.random()-.5)*this.qi},i}(),Cf=function(){function i(t,e,s,o,l,f){this.Se=t,this.zi=s,this.Hi=o,this.Ji=l,this.listener=f,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new y_(t,e)}return i.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},i.prototype.er=function(){return 2===this.state},i.prototype.start=function(){3!==this.state?this.auth():this.nr()},i.prototype.stop=function(){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},i.prototype.sr=function(){this.state=0,this.Zi.reset()},i.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},i.prototype.cr=function(t){this.ur(),this.stream.send(t)},i.prototype.rr=function(){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},i.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},i.prototype.close=function(t,e){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(s){switch(s.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===$e.RESOURCE_EXHAUSTED?(Nr(e.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===$e.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return s.sent(),[2]}})})},i.prototype.ar=function(){},i.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),s=this.Yi;this.Ji.getToken().then(function(o){t.Yi===s&&t.lr(o)},function(o){e(function(){var l=new _t($e.UNKNOWN,"Fetching auth token failed: "+o.message);return t.dr(l)})})},i.prototype.lr=function(t){var e=this,s=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){s(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(o){s(function(){return e.dr(o)})}),this.stream.onMessage(function(o){s(function(){return e.onMessage(o)})})},i.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Q.mG)(t,void 0,void 0,function(){return(0,Q.Jh)(this,function(e){return this.state=0,this.start(),[2]})})})},i.prototype.dr=function(t){return Tt("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},i.prototype.hr=function(t){var e=this;return function(s){e.Se.enqueueAndForget(function(){return e.Yi===t?s():(Tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},i}(),Zy=function(i){function t(e,s,o,l,f){var _=this;return(_=i.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",s,o,f)||this).R=l,_}return(0,Q.ZT)(t,i),t.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var s=function(l,f){var _,J;if("targetChange"in f){var w="NO_CHANGE"===(J=f.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===J?1:"REMOVE"===J?2:"CURRENT"===J?3:"RESET"===J?4:dn(),E=f.targetChange.targetIds||[],T=function(J,re){return J.I?(En(void 0===re||"string"==typeof re),mo.fromBase64String(re||"")):(En(void 0===re||re instanceof Uint8Array),mo.fromUint8Array(re||new Uint8Array))}(l,f.targetChange.resumeToken),F=(G=f.targetChange.cause)&&function(J){var re=void 0===J.code?$e.UNKNOWN:Hp(J.code);return new _t(re,J.message||"")}(G);_=new Rc(w,E,T,F||null)}else if("documentChange"in f){E=Qs(l,(w=f.documentChange).document.name),T=Ss(w.document.updateTime);var G=new _o({mapValue:{fields:w.document.fields}}),H=(F=ds.newFoundDocument(E,T,G),w.targetIds||[]);_=new af(H,w.removedTargetIds||[],F.key,F)}else if("documentDelete"in f)E=Qs(l,(w=f.documentDelete).document),T=w.readTime?Ss(w.readTime):ni.min(),G=ds.newNoDocument(E,T),_=new af([],F=w.removedTargetIds||[],G.key,G);else if("documentRemove"in f)E=Qs(l,(w=f.documentRemove).document),_=new af([],T=w.removedTargetIds||[],E,null);else{if(!("filter"in f))return dn();var q=f.filter;E=new cw(w=q.count||0),_=new Ey(T=q.targetId,E)}return _}(this.R,e),o=function(l){if(!("targetChange"in l))return ni.min();var f=l.targetChange;return f.targetIds&&f.targetIds.length?ni.min():f.readTime?Ss(f.readTime):ni.min()}(e);return this.listener._r(s,o)},t.prototype.mr=function(e){var l,f,_,w,s={};s.database=il(this.R),s.addTarget=(l=this.R,(_=Id(w=(f=e).target)?{documents:o_(l,w)}:{query:Ld(l,w)}).targetId=f.targetId,f.resumeToken.approximateByteSize()>0?_.resumeToken=n_(l,f.resumeToken):f.snapshotVersion.compareTo(ni.min())>0&&(_.readTime=Wp(l,f.snapshotVersion.toTimestamp())),_);var o=function(l,f){var _=function(w,E){switch(E){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dn()}}(0,f.purpose);return null==_?null:{"goog-listen-tags":_}}(0,e);o&&(s.labels=o),this.cr(s)},t.prototype.yr=function(e){var s={};s.database=il(this.R),s.removeTarget=e,this.cr(s)},t}(Cf),VC=function(i){function t(e,s,o,l,f){var _=this;return(_=i.call(this,e,"write_stream_connection_backoff","write_stream_idle",s,o,f)||this).R=l,_.gr=!1,_}return(0,Q.ZT)(t,i),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,i.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.Oi("Write",e)},t.prototype.onMessage=function(e){if(En(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var s=(f=e.commitTime,(l=e.writeResults)&&l.length>0?(En(void 0!==f),l.map(function(_){return E=f,(T=Ss((w=_).updateTime?w.updateTime:E)).isEqual(ni.min())&&(T=Ss(E)),new Jh(T,w.transformResults||[]);var w,E,T})):[]),o=Ss(e.commitTime);return this.listener.Tr(o,s)}var l,f;return En(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=il(this.R),this.cr(e)},t.prototype.Er=function(e){var s=this,o={streamToken:this.lastStreamToken,writes:e.map(function(l){return cf(s.R,l)})};this.cr(o)},t}(Cf),bw=function(i){function t(e,s,o){var l=this;return(l=i.call(this)||this).credentials=e,l.Hi=s,l.R=o,l.Rr=!1,l}return(0,Q.ZT)(t,i),t.prototype.br=function(){if(this.Rr)throw new _t($e.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,s,o){var l=this;return this.br(),this.credentials.getToken().then(function(f){return l.Hi.Ni(e,s,o,f)}).catch(function(f){throw"FirebaseError"===f.name?(f.code===$e.UNAUTHENTICATED&&l.credentials.invalidateToken(),f):new _t($e.UNKNOWN,f.toString())})},t.prototype.$i=function(e,s,o){var l=this;return this.br(),this.credentials.getToken().then(function(f){return l.Hi.$i(e,s,o,f)}).catch(function(f){throw"FirebaseError"===f.name?(f.code===$e.UNAUTHENTICATED&&l.credentials.invalidateToken(),f):new _t($e.UNKNOWN,f.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),ww=function(){function i(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return i.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},i.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},i.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},i.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},i.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Nr(e),this.Vr=!1):Tt("OnlineStateTracker",e)},i.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},i}(),Ky=function(i,t,e,s,o){var l=this;this.localStore=i,this.datastore=t,this.asyncQueue=e,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=o,this.Lr.di(function(f){e.enqueueAndForget(function(){return(0,Q.mG)(l,void 0,void 0,function(){return(0,Q.Jh)(this,function(_){switch(_.label){case 0:return fl(this)?(Tt("RemoteStore","Restarting streams for network reachability change."),[4,function(w){return(0,Q.mG)(this,void 0,void 0,function(){var E;return(0,Q.Jh)(this,function(T){switch(T.label){case 0:return(E=zt(w)).Or.add(4),[4,Df(E)];case 1:return T.sent(),E.Br.set("Unknown"),E.Or.delete(4),[4,Mf(E)];case 2:return T.sent(),[2]}})})}(this)]):[3,2];case 1:_.sent(),_.label=2;case 2:return[2]}})})})}),this.Br=new ww(e,s)};function Mf(i){return(0,Q.mG)(this,void 0,void 0,function(){var t,e;return(0,Q.Jh)(this,function(s){switch(s.label){case 0:if(!fl(i))return[3,4];t=0,e=i.Mr,s.label=1;case 1:return t<e.length?[4,(0,e[t])(!0)]:[3,4];case 2:s.sent(),s.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Df(i){return(0,Q.mG)(this,void 0,void 0,function(){var t,e;return(0,Q.Jh)(this,function(s){switch(s.label){case 0:t=0,e=i.Mr,s.label=1;case 1:return t<e.length?[4,(0,e[t])(!1)]:[3,4];case 2:s.sent(),s.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Ef(i,t){var e=zt(i);e.$r.has(t.targetId)||(e.$r.set(t.targetId,t),Zd(e)?fg(e):Vo(e).er()&&Sf(e,t))}function Ur(i,t){var e=zt(i),s=Vo(e);e.$r.delete(t),s.er()&&hg(e,t),0===e.$r.size&&(s.er()?s.ir():fl(e)&&e.Br.set("Unknown"))}function Sf(i,t){i.qr.U(t.targetId),Vo(i).mr(t)}function hg(i,t){i.qr.U(t),Vo(i).yr(t)}function fg(i){i.qr=new Sy({getRemoteKeysForTarget:function(t){return i.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return i.$r.get(t)||null}}),Vo(i).start(),i.Br.Sr()}function Zd(i){return fl(i)&&!Vo(i).tr()&&i.$r.size>0}function fl(i){return 0===zt(i).Or.size}function pg(i){i.qr=void 0}function b_(i){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(t){return i.$r.forEach(function(e,s){Sf(i,e)}),[2]})})}function Qy(i,t){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(e){return pg(i),Zd(i)?(i.Br.Nr(t),fg(i)):i.Br.set("Unknown"),[2]})})}function w_(i,t,e){return(0,Q.mG)(this,void 0,void 0,function(){var s,o,l;return(0,Q.Jh)(this,function(f){switch(f.label){case 0:if(i.Br.set("Online"),!(t instanceof Rc&&2===t.state&&t.cause))return[3,6];f.label=1;case 1:return f.trys.push([1,3,,5]),[4,function(_,w){return(0,Q.mG)(this,void 0,void 0,function(){var E,T,F,G;return(0,Q.Jh)(this,function(H){switch(H.label){case 0:E=w.cause,T=0,F=w.targetIds,H.label=1;case 1:return T<F.length?_.$r.has(G=F[T])?[4,_.remoteSyncer.rejectListen(G,E)]:[3,3]:[3,5];case 2:H.sent(),_.$r.delete(G),_.qr.removeTarget(G),H.label=3;case 3:H.label=4;case 4:return T++,[3,1];case 5:return[2]}})})}(i,t)];case 2:return f.sent(),[3,5];case 3:return s=f.sent(),Tt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),s),[4,gg(i,s)];case 4:return f.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof af?i.qr.X(t):t instanceof Ey?i.qr.rt(t):i.qr.et(t),e.isEqual(ni.min()))return[3,13];f.label=7;case 7:return f.trys.push([7,11,,13]),[4,sg(i.localStore)];case 8:return o=f.sent(),e.compareTo(o)>=0?[4,(_=i,w=e,E=_.qr.ut(w),E.targetChanges.forEach(function(T,F){if(T.resumeToken.approximateByteSize()>0){var G=_.$r.get(F);G&&_.$r.set(F,G.withResumeToken(T.resumeToken,w))}}),E.targetMismatches.forEach(function(T){var F=_.$r.get(T);if(F){_.$r.set(T,F.withResumeToken(mo.EMPTY_BYTE_STRING,F.snapshotVersion)),hg(_,T);var G=new gf(F.target,T,1,F.sequenceNumber);Sf(_,G)}}),_.remoteSyncer.applyRemoteEvent(E))]:[3,10];case 9:f.sent(),f.label=10;case 10:return[3,13];case 11:return Tt("RemoteStore","Failed to raise snapshot:",l=f.sent()),[4,gg(i,l)];case 12:return f.sent(),[3,13];case 13:return[2]}var _,w,E})})}function gg(i,t,e){return(0,Q.mG)(this,void 0,void 0,function(){var s=this;return(0,Q.Jh)(this,function(o){switch(o.label){case 0:if(!qi(t))throw t;return i.Or.add(1),[4,Df(i)];case 1:return o.sent(),i.Br.set("Offline"),e||(e=function(){return sg(i.localStore)}),i.asyncQueue.enqueueRetryable(function(){return(0,Q.mG)(s,void 0,void 0,function(){return(0,Q.Jh)(this,function(l){switch(l.label){case 0:return Tt("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return l.sent(),i.Or.delete(1),[4,Mf(i)];case 2:return l.sent(),[2]}})})}),[2]}})})}function GC(i,t){return t().catch(function(e){return gg(i,e,t)})}function Kd(i){return(0,Q.mG)(this,void 0,void 0,function(){var t,e,s,o,l;return(0,Q.Jh)(this,function(f){switch(f.label){case 0:t=zt(i),e=pl(t),s=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,f.label=1;case 1:if(!(fl(_=t)&&_.Fr.length<10))return[3,7];f.label=2;case 2:return f.trys.push([2,4,,6]),[4,Bu(t.localStore,s)];case 3:return null===(o=f.sent())?(0===t.Fr.length&&e.ir(),[3,7]):(s=o.batchId,function(_,w){_.Fr.push(w);var E=pl(_);E.er()&&E.pr&&E.Er(w.mutations)}(t,o),[3,6]);case 4:return l=f.sent(),[4,gg(t,l)];case 5:return f.sent(),[3,6];case 6:return[3,1];case 7:return Qd(t)&&x_(t),[2]}var _})})}function Qd(i){return fl(i)&&!pl(i).tr()&&i.Fr.length>0}function x_(i){pl(i).start()}function C_(i){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(t){return pl(i).Ar(),[2]})})}function rs(i){return(0,Q.mG)(this,void 0,void 0,function(){var t,e,s;return(0,Q.Jh)(this,function(l){for(t=pl(i),e=0,s=i.Fr;e<s.length;e++)t.Er(s[e].mutations);return[2]})})}function Af(i,t,e){return(0,Q.mG)(this,void 0,void 0,function(){var s,o;return(0,Q.Jh)(this,function(l){switch(l.label){case 0:return s=i.Fr.shift(),o=pf.from(s,t,e),[4,GC(i,function(){return i.remoteSyncer.applySuccessfulWrite(o)})];case 1:return l.sent(),[4,Kd(i)];case 2:return l.sent(),[2]}})})}function xw(i,t){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(e){switch(e.label){case 0:return t&&pl(i).pr?[4,function(s,o){return(0,Q.mG)(this,void 0,void 0,function(){var l,f;return(0,Q.Jh)(this,function(_){switch(_.label){case 0:return Qm(f=o.code)&&f!==$e.ABORTED?(l=s.Fr.shift(),pl(s).sr(),[4,GC(s,function(){return s.remoteSyncer.rejectFailedWrite(l.batchId,o)})]):[3,3];case 1:return _.sent(),[4,Kd(s)];case 2:_.sent(),_.label=3;case 3:return[2]}})})}(i,t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return Qd(i)&&x_(i),[2]}})})}function Xy(i,t){return(0,Q.mG)(this,void 0,void 0,function(){var e;return(0,Q.Jh)(this,function(s){switch(s.label){case 0:return e=zt(i),t?(e.Or.delete(2),[4,Mf(e)]):[3,2];case 1:return s.sent(),[3,5];case 2:return t?[3,4]:(e.Or.add(2),[4,Df(e)]);case 3:s.sent(),e.Br.set("Unknown"),s.label=4;case 4:s.label=5;case 5:return[2]}})})}function Vo(i){var e,s,o,l,t=this;return i.Ur||(i.Ur=(e=i.datastore,s=i.asyncQueue,o={Ii:b_.bind(null,i),Ri:Qy.bind(null,i),_r:w_.bind(null,i)},(l=zt(e)).br(),new Zy(s,l.Hi,l.credentials,l.R,o)),i.Mr.push(function(e){return(0,Q.mG)(t,void 0,void 0,function(){return(0,Q.Jh)(this,function(s){switch(s.label){case 0:return e?(i.Ur.sr(),Zd(i)?fg(i):i.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,i.Ur.stop()];case 2:s.sent(),pg(i),s.label=3;case 3:return[2]}})})})),i.Ur}function pl(i){var e,s,o,l,t=this;return i.Kr||(i.Kr=(e=i.datastore,s=i.asyncQueue,o={Ii:C_.bind(null,i),Ri:xw.bind(null,i),Ir:rs.bind(null,i),Tr:Af.bind(null,i)},(l=zt(e)).br(),new VC(s,l.Hi,l.credentials,l.R,o)),i.Mr.push(function(e){return(0,Q.mG)(t,void 0,void 0,function(){return(0,Q.Jh)(this,function(s){switch(s.label){case 0:return e?(i.Kr.sr(),[4,Kd(i)]):[3,2];case 1:return s.sent(),[3,4];case 2:return[4,i.Kr.stop()];case 3:s.sent(),i.Fr.length>0&&(Tt("RemoteStore","Stopping write stream with "+i.Fr.length+" pending writes"),i.Fr=[]),s.label=4;case 4:return[2]}})})})),i.Kr}var M_=function(){function i(t,e,s,o,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new bo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(f){})}return i.createAndSchedule=function(t,e,s,o,l){var f=new i(t,e,Date.now()+s,o,l);return f.start(s),f},i.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},i.prototype.skipDelay=function(){return this.handleDelayElapsed()},i.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _t($e.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},i.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},i.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},i}();function Uu(i,t){if(Nr("AsyncQueue",t+": "+i),qi(i))return new _t($e.UNAVAILABLE,t+": "+i);throw i}var Hu=function(){function i(t){this.comparator=t?function(e,s){return t(e,s)||gn.comparator(e.key,s.key)}:function(e,s){return gn.comparator(e.key,s.key)},this.keyedMap=Bs(),this.sortedSet=new Jr(this.comparator)}return i.emptySet=function(t){return new i(t.comparator)},i.prototype.has=function(t){return null!=this.keyedMap.get(t)},i.prototype.get=function(t){return this.keyedMap.get(t)},i.prototype.first=function(){return this.sortedSet.minKey()},i.prototype.last=function(){return this.sortedSet.maxKey()},i.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},i.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(i.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),i.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,s){return t(e),!1})},i.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},i.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},i.prototype.isEqual=function(t){if(!(t instanceof i)||this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();e.hasNext();){var o=e.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0},i.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},i.prototype.copy=function(t,e){var s=new i;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=e,s},i}(),Cw=function(){function i(){this.Qr=new Jr(gn.comparator)}return i.prototype.track=function(t){var e=t.doc.key,s=this.Qr.get(e);s?0!==t.type&&3===s.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==s.type?this.Qr=this.Qr.insert(e,{type:s.type,doc:t.doc}):2===t.type&&2===s.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===s.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===s.type?this.Qr=this.Qr.remove(e):1===t.type&&2===s.type?this.Qr=this.Qr.insert(e,{type:1,doc:s.doc}):0===t.type&&1===s.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):dn():this.Qr=this.Qr.insert(e,t)},i.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,s){t.push(s)}),t},i}(),D_=function(){function i(t,e,s,o,l,f,_,w){this.query=t,this.docs=e,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=f,this.syncStateChanged=_,this.excludesMetadataChanges=w}return i.fromInitialDocuments=function(t,e,s,o){var l=[];return e.forEach(function(f){l.push({type:0,doc:f})}),new i(t,e,Hu.emptySet(e),l,s,o,!0,!1)},Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Zs(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,s=t.docChanges;if(e.length!==s.length)return!1;for(var o=0;o<e.length;o++)if(e[o].type!==s[o].type||!e[o].doc.isEqual(s[o].doc))return!1;return!0},i}(),Jy=function(){this.Wr=void 0,this.listeners=[]},Mw=function(){this.queries=new Nc(function(i){return Ym(i)},Zs),this.onlineState="Unknown",this.Gr=new Set};function E_(i,t){return(0,Q.mG)(this,void 0,void 0,function(){var e,s,o,l,f,_,w;return(0,Q.Jh)(this,function(E){switch(E.label){case 0:if(e=zt(i),o=!1,(l=e.queries.get(s=t.query))||(o=!0,l=new Jy),!o)return[3,4];E.label=1;case 1:return E.trys.push([1,3,,4]),f=l,[4,e.onListen(s)];case 2:return f.Wr=E.sent(),[3,4];case 3:return _=E.sent(),w=Uu(_,"Initialization of query '"+Kh(t.query)+"' failed"),[2,void t.onError(w)];case 4:return e.queries.set(s,l),l.listeners.push(t),t.zr(e.onlineState),l.Wr&&t.Hr(l.Wr)&&Co(e),[2]}})})}function e0(i,t){return(0,Q.mG)(this,void 0,void 0,function(){var e,s,o,l,f;return(0,Q.Jh)(this,function(_){return e=zt(i),o=!1,(l=e.queries.get(s=t.query))&&(f=l.listeners.indexOf(t))>=0&&(l.listeners.splice(f,1),o=0===l.listeners.length),o?[2,(e.queries.delete(s),e.onUnlisten(s))]:[2]})})}function t0(i,t){for(var e=zt(i),s=!1,o=0,l=t;o<l.length;o++){var f=l[o],w=e.queries.get(f.query);if(w){for(var E=0,T=w.listeners;E<T.length;E++)T[E].Hr(f)&&(s=!0);w.Wr=f}}s&&Co(e)}function S_(i,t,e){var s=zt(i),o=s.queries.get(t);if(o)for(var l=0,f=o.listeners;l<f.length;l++)f[l].onError(e);s.queries.delete(t)}function Co(i){i.Gr.forEach(function(t){t.next()})}var A_=function(){function i(t,e,s){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=s||{}}return i.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],s=0,o=t.docChanges;s<o.length;s++){var l=o[s];3!==l.type&&e.push(l)}t=new D_(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var f=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),f=!0):this.eo(t,this.onlineState)&&(this.no(t),f=!0),this.Xr=t,f},i.prototype.onError=function(t){this.Jr.error(t)},i.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},i.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},i.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},i.prototype.no=function(t){t=D_.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},i}(),UC=function(){function i(t,e){this.payload=t,this.byteLength=e}return i.prototype.io=function(){return"metadata"in this.payload},i}(),Go=function(){function i(t){this.R=t}return i.prototype.qn=function(t){return Qs(this.R,t)},i.prototype.Un=function(t){return t.metadata.exists?s_(this.R,t.document,!1):ds.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},i.prototype.Kn=function(t){return Ss(t)},i}();!function(){function i(t,e,s){this.ro=t,this.localStore=e,this.R=s,this.queries=[],this.documents=[],this.progress=function Ea(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}(t)}i.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},i.prototype.co=function(t){for(var e=new Map,s=new Go(this.R),o=0,l=t;o<l.length;o++){var f=l[o];if(f.metadata.queries)for(var _=s.qn(f.metadata.name),w=0,E=f.metadata.queries;w<E.length;w++){var T=E[w],F=(e.get(T)||Ii()).add(_);e.set(T,F)}}return e},i.prototype.complete=function(){return(0,Q.mG)(this,void 0,void 0,function(){var t,e,s,o,l;return(0,Q.Jh)(this,function(f){switch(f.label){case 0:return[4,zy(this.localStore,new Go(this.R),this.documents,this.ro.id)];case 1:t=f.sent(),e=this.co(this.documents),s=0,o=this.queries,f.label=2;case 2:return s<o.length?[4,jy(this.localStore,l=o[s],e.get(l.name))]:[3,5];case 3:f.sent(),f.label=4;case 4:return s++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Ny(Object.assign({},this.progress),t))]}})})}}();var wr=function(i){this.key=i},Tf=function(i){this.key=i},n0=function(){function i(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Ii(),this.mutatedKeys=Ii(),this.lo=Bp(t),this.fo=new Hu(this.lo)}return Object.defineProperty(i.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),i.prototype._o=function(t,e){var s=this,o=e?e.mo:new Cw,l=e?e.fo:this.fo,f=e?e.mutatedKeys:this.mutatedKeys,_=l,w=!1,E=Ns(this.query)&&l.size===this.query.limit?l.last():null,T=sa(this.query)&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(function(G,H){var Y=l.get(G),q=tl(s.query,H)?H:null,J=!!Y&&s.mutatedKeys.has(Y.key),re=!!q&&(q.hasLocalMutations||s.mutatedKeys.has(q.key)&&q.hasCommittedMutations),Me=!1;Y&&q?Y.data.isEqual(q.data)?J!==re&&(o.track({type:3,doc:q}),Me=!0):s.yo(Y,q)||(o.track({type:2,doc:q}),Me=!0,(E&&s.lo(q,E)>0||T&&s.lo(q,T)<0)&&(w=!0)):!Y&&q?(o.track({type:0,doc:q}),Me=!0):Y&&!q&&(o.track({type:1,doc:Y}),Me=!0,(E||T)&&(w=!0)),Me&&(q?(_=_.add(q),f=re?f.add(G):f.delete(G)):(_=_.delete(G),f=f.delete(G)))}),Ns(this.query)||sa(this.query))for(;_.size>this.query.limit;){var F=Ns(this.query)?_.last():_.first();_=_.delete(F.key),f=f.delete(F.key),o.track({type:1,doc:F})}return{fo:_,mo:o,Nn:w,mutatedKeys:f}},i.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},i.prototype.applyChanges=function(t,e,s){var o=this,l=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var f=t.mo.jr();f.sort(function(T,F){return H=F.type,(Y=function(q){switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dn()}})(T.type)-Y(H)||o.lo(T.doc,F.doc);var H,Y}),this.po(s);var _=e?this.Eo():[],w=0===this.ho.size&&this.current?1:0,E=w!==this.ao;return this.ao=w,0!==f.length||E?{snapshot:new D_(this.query,t.fo,l,f,t.mutatedKeys,0===w,E,!1),To:_}:{To:_}},i.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Cw,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},i.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},i.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(s){return e.uo=e.uo.add(s)}),t.modifiedDocuments.forEach(function(s){}),t.removedDocuments.forEach(function(s){return e.uo=e.uo.delete(s)}),this.current=t.current)},i.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Ii(),this.fo.forEach(function(o){t.Io(o.key)&&(t.ho=t.ho.add(o.key))});var s=[];return e.forEach(function(o){t.ho.has(o)||s.push(new Tf(o))}),this.ho.forEach(function(o){e.has(o)||s.push(new wr(o))}),s},i.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Ii();var e=this._o(t.documents);return this.applyChanges(e,!0)},i.prototype.Ro=function(){return D_.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},i}(),HC=function(i,t,e){this.query=i,this.targetId=t,this.view=e},zC=function(i){this.key=i,this.bo=!1},Dw=function(){function i(t,e,s,o,l,f){this.localStore=t,this.remoteStore=e,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=f,this.vo={},this.Po=new Nc(function(_){return Ym(_)},Zs),this.Vo=new Map,this.So=new Set,this.Do=new Jr(gn.comparator),this.Co=new Map,this.No=new lg,this.xo={},this.ko=new Map,this.Fo=Lc.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(i.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),i}();function If(i,t){return(0,Q.mG)(this,void 0,void 0,function(){var e,o,l,f,_;return(0,Q.Jh)(this,function(w){switch(w.label){case 0:return e=I_(i),(l=e.Po.get(t))?(e.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ro(),[3,4]):[3,1];case 1:return[4,ql(e.localStore,hs(t))];case 2:return f=w.sent(),_=e.sharedClientState.addLocalQueryTarget(f.targetId),[4,Vc(e,t,f.targetId,"current"===_)];case 3:o=w.sent(),e.isPrimaryClient&&Ef(e.remoteStore,f),w.label=4;case 4:return[2,o]}})})}function Vc(i,t,e,s){return(0,Q.mG)(this,void 0,void 0,function(){var o,l,f,_,w,E;return(0,Q.Jh)(this,function(T){switch(T.label){case 0:return i.Oo=function(F,G,H){return function(Y,q,J,re){return(0,Q.mG)(this,void 0,void 0,function(){var Me,be,He;return(0,Q.Jh)(this,function(Ve){switch(Ve.label){case 0:return(Me=q.view._o(J)).Nn?[4,og(Y.localStore,q.query,!1).then(function(ot){return q.view._o(ot.documents,Me)})]:[3,2];case 1:Me=Ve.sent(),Ve.label=2;case 2:return be=re&&re.targetChanges.get(q.targetId),He=q.view.applyChanges(Me,Y.isPrimaryClient,be),[2,(Zl(Y,q.targetId,He.To),He.snapshot)]}})})}(i,F,G,H)},[4,og(i.localStore,t,!0)];case 1:return o=T.sent(),l=new n0(t,o.Bn),f=l._o(o.documents),_=jp.createSynthesizedTargetChangeForCurrentChange(e,s&&"Offline"!==i.onlineState),w=l.applyChanges(f,i.isPrimaryClient,_),Zl(i,e,w.To),E=new HC(t,e,l),[2,(i.Po.set(t,E),i.Vo.has(e)?i.Vo.get(e).push(t):i.Vo.set(e,[t]),w.snapshot)]}})})}function jC(i,t){return(0,Q.mG)(this,void 0,void 0,function(){var e,s,o;return(0,Q.Jh)(this,function(l){switch(l.label){case 0:return e=zt(i),s=e.Po.get(t),(o=e.Vo.get(s.targetId)).length>1?[2,(e.Vo.set(s.targetId,o.filter(function(f){return!Zs(f,t)})),void e.Po.delete(t))]:e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(s.targetId),e.sharedClientState.isActiveQueryTarget(s.targetId)?[3,2]:[4,$l(e.localStore,s.targetId,!1).then(function(){e.sharedClientState.clearQueryState(s.targetId),Ur(e.remoteStore,s.targetId),Uo(e,s.targetId)}).catch(cl)]):[3,3];case 1:l.sent(),l.label=2;case 2:return[3,5];case 3:return Uo(e,s.targetId),[4,$l(e.localStore,s.targetId,!0)];case 4:l.sent(),l.label=5;case 5:return[2]}})})}function r0(i,t,e){return(0,Q.mG)(this,void 0,void 0,function(){var s,o,l,f;return(0,Q.Jh)(this,function(_){switch(_.label){case 0:s=kf(i),_.label=1;case 1:return _.trys.push([1,5,,6]),[4,(w=s.localStore,E=t,F=zt(w),G=Tr.now(),H=E.reduce(function(Y,q){return Y.add(q.key)},Ii()),F.persistence.runTransaction("Locally write mutations","readwrite",function(Y){return F.Mn.pn(Y,H).next(function(q){T=q;for(var J=[],re=0,Me=E;re<Me.length;re++){var be=Me[re],He=Es(be,T.get(be.key));null!=He&&J.push(new Bl(be.key,He,Hm(He.value.mapValue),Ks.exists(!0)))}return F._n.addMutationBatch(Y,G,J,E)})}).then(function(Y){return Y.applyToLocalDocumentSet(T),{batchId:Y.batchId,changes:T}}))];case 2:return o=_.sent(),s.sharedClientState.addPendingMutation(o.batchId),function(w,E,T){var F=w.xo[w.currentUser.toKey()];F||(F=new Jr(ai)),F=F.insert(E,T),w.xo[w.currentUser.toKey()]=F}(s,o.batchId,e),[4,Ho(s,o.changes)];case 3:return _.sent(),[4,Kd(s.remoteStore)];case 4:return _.sent(),[3,6];case 5:return l=_.sent(),f=Uu(l,"Failed to persist write"),e.reject(f),[3,6];case 6:return[2]}var w,E,T,F,G,H})})}function s0(i,t){return(0,Q.mG)(this,void 0,void 0,function(){var e,s;return(0,Q.Jh)(this,function(o){switch(o.label){case 0:e=zt(i),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,f_(e.localStore,t)];case 2:return s=o.sent(),t.targetChanges.forEach(function(l,f){var _=e.Co.get(f);_&&(En(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?_.bo=!0:l.modifiedDocuments.size>0?En(_.bo):l.removedDocuments.size>0&&(En(_.bo),_.bo=!1))}),[4,Ho(e,s,t)];case 3:return o.sent(),[3,6];case 4:return[4,cl(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function o0(i,t,e){var s=zt(i);if(s.isPrimaryClient&&0===e||!s.isPrimaryClient&&1===e){var o=[];s.Po.forEach(function(l,f){var _=f.view.zr(t);_.snapshot&&o.push(_.snapshot)}),function(l,f){var _=zt(l);_.onlineState=f;var w=!1;_.queries.forEach(function(E,T){for(var F=0,G=T.listeners;F<G.length;F++)G[F].zr(f)&&(w=!0)}),w&&Co(_)}(s.eventManager,t),o.length&&s.vo._r(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}function Ew(i,t,e){return(0,Q.mG)(this,void 0,void 0,function(){var s,o,l,f,_,w;return(0,Q.Jh)(this,function(E){switch(E.label){case 0:return(s=zt(i)).sharedClientState.updateQueryState(t,"rejected",e),o=s.Co.get(t),(l=o&&o.key)?(f=(f=new Jr(gn.comparator)).insert(l,ds.newNoDocument(l,ni.min())),_=Ii().add(l),w=new sf(ni.min(),new Map,new es(ai),f,_),[4,s0(s,w)]):[3,2];case 1:return E.sent(),s.Do=s.Do.remove(l),s.Co.delete(t),Pf(s),[3,4];case 2:return[4,$l(s.localStore,t,!1).then(function(){return Uo(s,t,e)}).catch(cl)];case 3:E.sent(),E.label=4;case 4:return[2]}})})}function Gc(i,t){return(0,Q.mG)(this,void 0,void 0,function(){var e,s,o;return(0,Q.Jh)(this,function(l){switch(l.label){case 0:e=zt(i),s=t.batch.batchId,l.label=1;case 1:return l.trys.push([1,4,,6]),[4,Gy(e.localStore,t)];case 2:return o=l.sent(),Rf(e,s,null),mg(e,s),e.sharedClientState.updateMutationState(s,"acknowledged"),[4,Ho(e,o)];case 3:return l.sent(),[3,6];case 4:return[4,cl(l.sent())];case 5:return l.sent(),[3,6];case 6:return[2]}})})}function zu(i,t,e){return(0,Q.mG)(this,void 0,void 0,function(){var s,o;return(0,Q.Jh)(this,function(l){switch(l.label){case 0:s=zt(i),l.label=1;case 1:return l.trys.push([1,4,,6]),[4,(f=s.localStore,_=t,w=zt(f),w.persistence.runTransaction("Reject batch","readwrite-primary",function(E){var T;return w._n.lookupMutationBatch(E,_).next(function(F){return En(null!==F),T=F.keys(),w._n.removeMutationBatch(E,F)}).next(function(){return w._n.performConsistencyCheck(E)}).next(function(){return w.Mn.pn(E,T)})}))];case 2:return o=l.sent(),Rf(s,t,e),mg(s,t),s.sharedClientState.updateMutationState(t,"rejected",e),[4,Ho(s,o)];case 3:return l.sent(),[3,6];case 4:return[4,cl(l.sent())];case 5:return l.sent(),[3,6];case 6:return[2]}var f,_,w})})}function gl(i,t){return(0,Q.mG)(this,void 0,void 0,function(){var e,s,o,l,f;return(0,Q.Jh)(this,function(_){switch(_.label){case 0:fl((e=zt(i)).remoteStore)||Tt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),_.label=1;case 1:return _.trys.push([1,3,,4]),[4,(w=e.localStore,E=zt(w),E.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(T){return E._n.getHighestUnacknowledgedBatchId(T)}))];case 2:return-1===(s=_.sent())?[2,void t.resolve()]:((o=e.ko.get(s)||[]).push(t),e.ko.set(s,o),[3,4]);case 3:return l=_.sent(),f=Uu(l,"Initialization of waitForPendingWrites() operation failed"),t.reject(f),[3,4];case 4:return[2]}var w,E})})}function mg(i,t){(i.ko.get(t)||[]).forEach(function(e){e.resolve()}),i.ko.delete(t)}function Rf(i,t,e){var s=zt(i),o=s.xo[s.currentUser.toKey()];if(o){var l=o.get(t);l&&(e?l.reject(e):l.resolve(),o=o.remove(t)),s.xo[s.currentUser.toKey()]=o}}function Uo(i,t,e){void 0===e&&(e=null),i.sharedClientState.removeLocalQueryTarget(t);for(var s=0,o=i.Vo.get(t);s<o.length;s++){var l=o[s];i.Po.delete(l),e&&i.vo.Mo(l,e)}i.Vo.delete(t),i.isPrimaryClient&&i.No.Zn(t).forEach(function(f){i.No.containsKey(f)||Sa(i,f)})}function Sa(i,t){i.So.delete(t.path.canonicalString());var e=i.Do.get(t);null!==e&&(Ur(i.remoteStore,e),i.Do=i.Do.remove(t),i.Co.delete(e),Pf(i))}function Zl(i,t,e){for(var s=0,o=e;s<o.length;s++){var l=o[s];l instanceof wr?(i.No.addReference(l.key,t),Sw(i,l)):l instanceof Tf?(Tt("SyncEngine","Document no longer in limbo: "+l.key),i.No.removeReference(l.key,t),i.No.containsKey(l.key)||Sa(i,l.key)):dn()}}function Sw(i,t){var e=t.key,s=e.path.canonicalString();i.Do.get(e)||i.So.has(s)||(Tt("SyncEngine","New document in limbo: "+e),i.So.add(s),Pf(i))}function Pf(i){for(;i.So.size>0&&i.Do.size<i.maxConcurrentLimboResolutions;){var t=i.So.values().next().value;i.So.delete(t);var e=new gn(ui.fromString(t)),s=i.Fo.next();i.Co.set(s,new zC(e)),i.Do=i.Do.insert(e,s),Ef(i.remoteStore,new gf(hs(Ds(e.path)),s,2,Po.o))}}function Ho(i,t,e){return(0,Q.mG)(this,void 0,void 0,function(){var s,o,l,f;return(0,Q.Jh)(this,function(_){switch(_.label){case 0:return s=zt(i),o=[],l=[],f=[],s.Po.isEmpty()?[3,3]:(s.Po.forEach(function(w,E){f.push(s.Oo(E,t,e).then(function(T){if(T){s.isPrimaryClient&&s.sharedClientState.updateQueryState(E.targetId,T.fromCache?"not-current":"current"),o.push(T);var F=rg.Pn(E.targetId,T);l.push(F)}}))}),[4,Promise.all(f)]);case 1:return _.sent(),s.vo._r(o),[4,function(w,E){return(0,Q.mG)(this,void 0,void 0,function(){var T,F,G,H,Y,q,J,Me;return(0,Q.Jh)(this,function(be){switch(be.label){case 0:T=zt(w),be.label=1;case 1:return be.trys.push([1,3,,4]),[4,T.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(He){return ct.forEach(E,function(Ve){return ct.forEach(Ve.bn,function(ot){return T.persistence.referenceDelegate.addReference(He,Ve.targetId,ot)}).next(function(){return ct.forEach(Ve.vn,function(ot){return T.persistence.referenceDelegate.removeReference(He,Ve.targetId,ot)})})})})];case 2:return be.sent(),[3,4];case 3:if(!qi(F=be.sent()))throw F;return Tt("LocalStore","Failed to update sequence numbers: "+F),[3,4];case 4:for(G=0,H=E;G<H.length;G++)q=(Y=H[G]).targetId,Y.fromCache||(J=T.kn.get(q),Me=J.withLastLimboFreeSnapshotVersion(J.snapshotVersion),T.kn=T.kn.insert(q,Me));return[2]}})})}(s.localStore,l)];case 2:_.sent(),_.label=3;case 3:return[2]}})})}function a0(i,t){return(0,Q.mG)(this,void 0,void 0,function(){var e,s;return(0,Q.Jh)(this,function(o){switch(o.label){case 0:return(e=zt(i)).currentUser.isEqual(t)?[3,3]:(Tt("SyncEngine","User change. New user:",t.toKey()),[4,Vy(e.localStore,t)]);case 1:return s=o.sent(),e.currentUser=t,(l=e).ko.forEach(function(_){_.forEach(function(w){w.reject(new _t($e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.ko.clear(),e.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),[4,Ho(e,s.Ln)];case 2:o.sent(),o.label=3;case 3:return[2]}var l})})}function _g(i,t){var e=zt(i),s=e.Co.get(t);if(s&&s.bo)return Ii().add(s.key);var o=Ii(),l=e.Vo.get(t);if(!l)return o;for(var f=0,_=l;f<_.length;f++){var E=e.Po.get(_[f]);o=o.unionWith(E.view.wo)}return o}function l0(i,t){return(0,Q.mG)(this,void 0,void 0,function(){var e,s,o;return(0,Q.Jh)(this,function(l){switch(l.label){case 0:return[4,og((e=zt(i)).localStore,t.query,!0)];case 1:return s=l.sent(),o=t.view.Ao(s),[2,(e.isPrimaryClient&&Zl(e,t.targetId,o.To),o)]}})})}function T_(i){return(0,Q.mG)(this,void 0,void 0,function(){var t;return(0,Q.Jh)(this,function(e){return[2,ag((t=zt(i)).localStore).then(function(s){return Ho(t,s)})]})})}function Xd(i,t,e,s){return(0,Q.mG)(this,void 0,void 0,function(){var o,l;return(0,Q.Jh)(this,function(f){switch(f.label){case 0:return[4,(_=(o=zt(i)).localStore,w=t,E=zt(_),T=zt(E._n),E.persistence.runTransaction("Lookup mutation documents","readonly",function(F){return T.jt(F,w).next(function(G){return G?E.Mn.pn(F,G):ct.resolve(null)})}))];case 1:return null===(l=f.sent())?[3,6]:"pending"!==e?[3,3]:[4,Kd(o.remoteStore)];case 2:return f.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(Rf(o,t,s||null),mg(o,t),function(_,w){zt(zt(_)._n).Gt(w)}(o.localStore,t)):dn(),f.label=4;case 4:return[4,Ho(o,l)];case 5:return f.sent(),[3,7];case 6:Tt("SyncEngine","Cannot apply mutation batch with id: "+t),f.label=7;case 7:return[2]}var _,w,E,T})})}function Of(i,t){return(0,Q.mG)(this,void 0,void 0,function(){var e,s,o,l,f,w,E;return(0,Q.Jh)(this,function(T){switch(T.label){case 0:return I_(e=zt(i)),kf(e),!0!==t||!0===e.$o?[3,3]:(s=e.sharedClientState.getAllActiveQueryTargets(),[4,c0(e,s.toArray())]);case 1:return o=T.sent(),e.$o=!0,[4,Xy(e.remoteStore,!0)];case 2:for(T.sent(),l=0,f=o;l<f.length;l++)Ef(e.remoteStore,f[l]);return[3,7];case 3:return!1!==t||!1===e.$o?[3,7]:(w=[],E=Promise.resolve(),e.Vo.forEach(function(F,G){e.sharedClientState.isLocalQueryTarget(G)?w.push(G):E=E.then(function(){return Uo(e,G),$l(e.localStore,G,!0)}),Ur(e.remoteStore,G)}),[4,E]);case 4:return T.sent(),[4,c0(e,w)];case 5:return T.sent(),(G=zt(e)).Co.forEach(function(H,Y){Ur(G.remoteStore,Y)}),G.No.ts(),G.Co=new Map,G.Do=new Jr(gn.comparator),e.$o=!1,[4,Xy(e.remoteStore,!1)];case 6:T.sent(),T.label=7;case 7:return[2]}var G})})}function c0(i,t,e){return(0,Q.mG)(this,void 0,void 0,function(){var s,o,l,f,_,w,E,T,F,G,Y,q,J;return(0,Q.Jh)(this,function(re){switch(re.label){case 0:s=zt(i),o=[],l=[],f=0,_=t,re.label=1;case 1:return f<_.length?(E=void 0,(T=s.Vo.get(w=_[f]))&&0!==T.length?[4,ql(s.localStore,hs(T[0]))]:[3,7]):[3,13];case 2:E=re.sent(),F=0,G=T,re.label=3;case 3:return F<G.length?(Y=s.Po.get(G[F]),[4,l0(s,Y)]):[3,6];case 4:(q=re.sent()).snapshot&&l.push(q.snapshot),re.label=5;case 5:return F++,[3,3];case 6:return[3,11];case 7:return[4,Hy(s.localStore,w)];case 8:return J=re.sent(),[4,ql(s.localStore,J)];case 9:return E=re.sent(),[4,Vc(s,u0(J),w,!1)];case 10:re.sent(),re.label=11;case 11:o.push(E),re.label=12;case 12:return f++,[3,1];case 13:return[2,(s.vo._r(l),o)]}})})}function u0(i){return Wm(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function WC(i){var t=zt(i);return zt(zt(t.localStore).persistence).fn()}function YC(i,t,e,s){return(0,Q.mG)(this,void 0,void 0,function(){var o,l,f;return(0,Q.Jh)(this,function(_){switch(_.label){case 0:return(o=zt(i)).$o?(Tt("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Vo.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ag(o.localStore)];case 3:return l=_.sent(),f=sf.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,Ho(o,l,f)];case 4:return _.sent(),[3,8];case 5:return[4,$l(o.localStore,t,!0)];case 6:return _.sent(),Uo(o,t,s),[3,8];case 7:dn(),_.label=8;case 8:return[2]}})})}function qC(i,t,e){return(0,Q.mG)(this,void 0,void 0,function(){var s,o,l,f,_,w,E,T,F;return(0,Q.Jh)(this,function(H){switch(H.label){case 0:if(!(s=I_(i)).$o)return[3,10];o=0,l=t,H.label=1;case 1:return o<l.length?s.Vo.has(f=l[o])?(Tt("SyncEngine","Adding an already active target "+f),[3,5]):[4,Hy(s.localStore,f)]:[3,6];case 2:return _=H.sent(),[4,ql(s.localStore,_)];case 3:return w=H.sent(),[4,Vc(s,u0(_),w.targetId,!1)];case 4:H.sent(),Ef(s.remoteStore,w),H.label=5;case 5:return o++,[3,1];case 6:E=function(Y){return(0,Q.Jh)(this,function(q){switch(q.label){case 0:return s.Vo.has(Y)?[4,$l(s.localStore,Y,!1).then(function(){Ur(s.remoteStore,Y),Uo(s,Y)}).catch(cl)]:[3,2];case 1:q.sent(),q.label=2;case 2:return[2]}})},T=0,F=e,H.label=7;case 7:return T<F.length?[5,E(F[T])]:[3,10];case 8:H.sent(),H.label=9;case 9:return T++,[3,7];case 10:return[2]}})})}function I_(i){var t=zt(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=s0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_g.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ew.bind(null,t),t.vo._r=t0.bind(null,t.eventManager),t.vo.Mo=S_.bind(null,t.eventManager),t}function kf(i){var t=zt(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Gc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zu.bind(null,t),t}var d0=function(){function i(){this.synchronizeTabs=!1}return i.prototype.initialize=function(t){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(e){switch(e.label){case 0:return this.R=Gu(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},i.prototype.Uo=function(t){return null},i.prototype.Ko=function(t){return By(this.persistence,new wf,t.initialUser,this.R)},i.prototype.qo=function(t){return new Wy(LC.bs,this.R)},i.prototype.Bo=function(t){return new dg},i.prototype.terminate=function(){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},i}(),h0=function(i){function t(e,s,o){var l=this;return(l=i.call(this)||this).Qo=e,l.cacheSizeBytes=s,l.forceOwnership=o,l.synchronizeTabs=!1,l}return(0,Q.ZT)(t,i),t.prototype.initialize=function(e){return(0,Q.mG)(this,void 0,void 0,function(){var s=this;return(0,Q.Jh)(this,function(o){switch(o.label){case 0:return[4,i.prototype.initialize.call(this,e)];case 1:return o.sent(),[4,mw(this.localStore)];case 2:return o.sent(),[4,this.Qo.initialize(this,e)];case 3:return o.sent(),[4,kf(this.Qo.syncEngine)];case 4:return o.sent(),[4,Kd(this.Qo.remoteStore)];case 5:return o.sent(),[4,this.persistence.He(function(){return s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()})];case 6:return o.sent(),[2]}})})},t.prototype.Ko=function(e){return By(this.persistence,new wf,e.initialUser,this.R)},t.prototype.Uo=function(e){return new ky(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)},t.prototype.qo=function(e){var s=bf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?wo.withCacheSize(this.cacheSizeBytes):wo.DEFAULT;return new Ly(this.synchronizeTabs,s,e.clientId,o,e.asyncQueue,v_(),$d(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new dg},t}(d0),f0=function(i){function t(e,s){var o=this;return(o=i.call(this,e,s,!1)||this).Qo=e,o.cacheSizeBytes=s,o.synchronizeTabs=!0,o}return(0,Q.ZT)(t,i),t.prototype.initialize=function(e){return(0,Q.mG)(this,void 0,void 0,function(){var s,o=this;return(0,Q.Jh)(this,function(l){switch(l.label){case 0:return[4,i.prototype.initialize.call(this,e)];case 1:return l.sent(),s=this.Qo.syncEngine,this.sharedClientState instanceof ug?(this.sharedClientState.syncEngine={ui:Xd.bind(null,s),ai:YC.bind(null,s),hi:qC.bind(null,s),fn:WC.bind(null,s),ci:T_.bind(null,s)},[4,this.sharedClientState.start()]):[3,3];case 2:l.sent(),l.label=3;case 3:return[4,this.persistence.He(function(f){return(0,Q.mG)(o,void 0,void 0,function(){return(0,Q.Jh)(this,function(_){switch(_.label){case 0:return[4,Of(this.Qo.syncEngine,f)];case 1:return _.sent(),this.gcScheduler&&(f&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):f||this.gcScheduler.stop()),[2]}})})})];case 4:return l.sent(),[2]}})})},t.prototype.Bo=function(e){var s=v_();if(!ug.yt(s))throw new _t($e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var o=bf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ug(s,e.asyncQueue,o,e.clientId,e.initialUser)},t}(h0),vg=function(){function i(){}return i.prototype.initialize=function(t,e){return(0,Q.mG)(this,void 0,void 0,function(){var s=this;return(0,Q.Jh)(this,function(o){switch(o.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(l){return o0(s.syncEngine,l,1)},this.remoteStore.remoteSyncer.handleCredentialChange=a0.bind(null,this.syncEngine),[4,Xy(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:o.sent(),o.label=2;case 2:return[2]}})})},i.prototype.createEventManager=function(t){return new Mw},i.prototype.createDatastore=function(t){var s=Gu(t.databaseInfo.databaseId),o=new yw(t.databaseInfo);return new bw(t.credentials,o,s)},i.prototype.createRemoteStore=function(t){var e,s,o,l,f,_=this;return e=this.localStore,s=this.datastore,o=t.asyncQueue,l=function(w){return o0(_.syncEngine,w,0)},f=qy.yt()?new qy:new xf,new Ky(e,s,o,l,f)},i.prototype.createSyncEngine=function(t,e){return E=e,T=new Dw(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions),E&&(T.$o=!0),T;var E,T},i.prototype.terminate=function(){return function(t){return(0,Q.mG)(this,void 0,void 0,function(){var e;return(0,Q.Jh)(this,function(s){switch(s.label){case 0:return e=zt(t),Tt("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Df(e)];case 1:return s.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},i}(),R_=function(){function i(t){this.observer=t,this.muted=!1}return i.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},i.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},i.prototype.Wo=function(){this.muted=!0},i.prototype.jo=function(t,e){var s=this;this.muted||setTimeout(function(){s.muted||t(e)},0)},i}(),Tw=(function(){function i(t,e){var s=this;this.Go=t,this.R=e,this.metadata=new bo,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(o){o&&o.io()?s.metadata.resolve(o.payload.metadata):s.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==o?void 0:o.payload)))},function(o){return s.metadata.reject(o)})}i.prototype.close=function(){return this.Go.cancel()},i.prototype.getMetadata=function(){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(t){return[2,this.metadata.promise]})})},i.prototype.Lo=function(){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},i.prototype.Ho=function(){return(0,Q.mG)(this,void 0,void 0,function(){var t,e,s,o;return(0,Q.Jh)(this,function(l){switch(l.label){case 0:return[4,this.Jo()];case 1:return null===(t=l.sent())?[2,null]:(e=this.zo.decode(t),s=Number(e),isNaN(s)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(s)]);case 2:return o=l.sent(),[2,new UC(JSON.parse(o),t.length+s)]}})})},i.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},i.prototype.Jo=function(){return(0,Q.mG)(this,void 0,void 0,function(){var t,e;return(0,Q.Jh)(this,function(s){switch(s.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(s.sent())return[3,3];s.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},i.prototype.Xo=function(t){return(0,Q.mG)(this,void 0,void 0,function(){var e;return(0,Q.Jh)(this,function(s){switch(s.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:s.sent()&&this.Yo("Reached the end of bundle when more is expected."),s.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},i.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},i.prototype.tc=function(){return(0,Q.mG)(this,void 0,void 0,function(){var t,e;return(0,Q.Jh)(this,function(s){switch(s.label){case 0:return[4,this.Go.read()];case 1:return(t=s.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function i(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return i.prototype.lookup=function(t){return(0,Q.mG)(this,void 0,void 0,function(){var e,s=this;return(0,Q.Jh)(this,function(o){switch(o.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new _t($e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(l,f){return(0,Q.mG)(this,void 0,void 0,function(){var _,w,E,T,F,G;return(0,Q.Jh)(this,function(H){switch(H.label){case 0:return _=zt(l),w=il(_.R)+"/documents",E={documents:f.map(function(Y){return lf(_.R,Y)})},[4,_.$i("BatchGetDocuments",w,E)];case 1:return T=H.sent(),F=new Map,T.forEach(function(Y){var J,re,q=(J=_.R,"found"in(re=Y)?function(Me,be){En(!!be.found);var He=Qs(Me,be.found.name),Ve=Ss(be.found.updateTime),ot=new _o({mapValue:{fields:be.found.fields}});return ds.newFoundDocument(He,Ve,ot)}(J,re):"missing"in re?function(Me,be){En(!!be.missing),En(!!be.readTime);var He=Qs(Me,be.missing),Ve=Ss(be.readTime);return ds.newNoDocument(He,Ve)}(J,re):dn());F.set(q.key.toString(),q)}),G=[],[2,(f.forEach(function(Y){var q=F.get(Y.toString());En(!!q),G.push(q)}),G)]}})})}(this.datastore,t)];case 1:return[2,((e=o.sent()).forEach(function(l){return s.recordVersion(l)}),e)]}})})},i.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},i.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(t.toString())},i.prototype.delete=function(t){this.write(new Ac(t,this.precondition(t))),this.writtenDocs.add(t.toString())},i.prototype.commit=function(){return(0,Q.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Q.Jh)(this,function(s){switch(s.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(o){t.delete(o.key.toString())}),t.forEach(function(o,l){var f=gn.fromPath(l);e.mutations.push(new Vl(f,e.precondition(f)))}),[4,function(o,l){return(0,Q.mG)(this,void 0,void 0,function(){var f,_,w;return(0,Q.Jh)(this,function(E){switch(E.label){case 0:return f=zt(o),_=il(f.R)+"/documents",w={writes:l.map(function(T){return cf(f.R,T)})},[4,f.Ni("Commit",_,w)];case 1:return E.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return s.sent(),this.committed=!0,[2]}})})},i.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw dn();e=ni.min()}var s=this.readVersions.get(t.key.toString());if(s){if(!e.isEqual(s))throw new _t($e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},i.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ks.updateTime(e):Ks.none()},i.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(ni.min()))throw new _t($e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ks.updateTime(e)}return Ks.exists(!0)},i.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},i.prototype.ensureCommitNotCalled=function(){},i}()),Iw=function(){function i(t,e,s,o){this.asyncQueue=t,this.datastore=e,this.updateFunction=s,this.deferred=o,this.ec=5,this.Zi=new y_(this.asyncQueue,"transaction_retry")}return i.prototype.run=function(){this.ec-=1,this.nc()},i.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Q.mG)(t,void 0,void 0,function(){var e,s,o=this;return(0,Q.Jh)(this,function(l){return e=new Tw(this.datastore),(s=this.sc(e))&&s.then(function(f){o.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){o.deferred.resolve(f)}).catch(function(_){o.ic(_)})})}).catch(function(f){o.ic(f)}),[2]})})})},i.prototype.sc=function(t){try{var e=this.updateFunction(t);return!In(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(s){return this.deferred.reject(s),null}},i.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},i.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Qm(e)}return!1},i}(),Rw=function(){function i(t,e,s){var o=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=s,this.user=is.UNAUTHENTICATED,this.clientId=fy.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(l){return(0,Q.mG)(o,void 0,void 0,function(){return(0,Q.Jh)(this,function(f){switch(f.label){case 0:return Tt("FirestoreClient","Received user=",l.uid),[4,this.credentialListener(l)];case 1:return f.sent(),this.user=l,[2]}})})})}return i.prototype.getConfiguration=function(){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},i.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},i.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new _t($e.FAILED_PRECONDITION,"The client has already been terminated.")},i.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new bo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Q.mG)(t,void 0,void 0,function(){var s,o;return(0,Q.Jh)(this,function(l){switch(l.label){case 0:return l.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:l.sent(),l.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:l.sent(),l.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return s=l.sent(),o=Uu(s,"Failed to shutdown persistence"),e.reject(o),[3,6];case 6:return[2]}})})}),e.promise},i}();function p0(i,t){return(0,Q.mG)(this,void 0,void 0,function(){var e,s,o=this;return(0,Q.Jh)(this,function(l){switch(l.label){case 0:return i.asyncQueue.verifyOperationInProgress(),Tt("FirestoreClient","Initializing OfflineComponentProvider"),[4,i.getConfiguration()];case 1:return e=l.sent(),[4,t.initialize(e)];case 2:return l.sent(),s=e.initialUser,i.setCredentialChangeListener(function(f){return(0,Q.mG)(o,void 0,void 0,function(){return(0,Q.Jh)(this,function(_){switch(_.label){case 0:return s.isEqual(f)?[3,2]:[4,Vy(t.localStore,f)];case 1:_.sent(),s=f,_.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return i.terminate()}),i.offlineComponents=t,[2]}})})}function g0(i,t){return(0,Q.mG)(this,void 0,void 0,function(){var e,s;return(0,Q.Jh)(this,function(o){switch(o.label){case 0:return i.asyncQueue.verifyOperationInProgress(),[4,P_(i)];case 1:return e=o.sent(),Tt("FirestoreClient","Initializing OnlineComponentProvider"),[4,i.getConfiguration()];case 2:return s=o.sent(),[4,t.initialize(e,s)];case 3:return o.sent(),i.setCredentialChangeListener(function(l){return function(f,_){return(0,Q.mG)(this,void 0,void 0,function(){var w,E;return(0,Q.Jh)(this,function(T){switch(T.label){case 0:return(w=zt(f)).asyncQueue.verifyOperationInProgress(),Tt("RemoteStore","RemoteStore received new credentials"),E=fl(w),w.Or.add(3),[4,Df(w)];case 1:return T.sent(),E&&w.Br.set("Unknown"),[4,w.remoteSyncer.handleCredentialChange(_)];case 2:return T.sent(),w.Or.delete(3),[4,Mf(w)];case 3:return T.sent(),[2]}})})}(t.remoteStore,l)}),i.onlineComponents=t,[2]}})})}function P_(i){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(t){switch(t.label){case 0:return i.offlineComponents?[3,2]:(Tt("FirestoreClient","Using default OfflineComponentProvider"),[4,p0(i,new d0)]);case 1:t.sent(),t.label=2;case 2:return[2,i.offlineComponents]}})})}function yg(i){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(t){switch(t.label){case 0:return i.onlineComponents?[3,2]:(Tt("FirestoreClient","Using default OnlineComponentProvider"),[4,g0(i,new vg)]);case 1:t.sent(),t.label=2;case 2:return[2,i.onlineComponents]}})})}function m0(i){return P_(i).then(function(t){return t.persistence})}function O_(i){return P_(i).then(function(t){return t.localStore})}function k_(i){return yg(i).then(function(t){return t.remoteStore})}function bg(i){return yg(i).then(function(t){return t.syncEngine})}function Aa(i){return(0,Q.mG)(this,void 0,void 0,function(){var t,e;return(0,Q.Jh)(this,function(s){switch(s.label){case 0:return[4,yg(i)];case 1:return t=s.sent(),[2,((e=t.eventManager).onListen=If.bind(null,t.syncEngine),e.onUnlisten=jC.bind(null,t.syncEngine),e)]}})})}function Pw(i,t,e){var s=this;void 0===e&&(e={});var o=new bo;return i.asyncQueue.enqueueAndForget(function(){return(0,Q.mG)(s,void 0,void 0,function(){var l;return(0,Q.Jh)(this,function(f){switch(f.label){case 0:return l=function(_,w,E,T,F){var G=new R_({next:function(Y){w.enqueueAndForget(function(){return e0(_,H)});var q=Y.docs.has(E);!q&&Y.fromCache?F.reject(new _t($e.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&Y.fromCache&&T&&"server"===T.source?F.reject(new _t($e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):F.resolve(Y)},error:function(Y){return F.reject(Y)}}),H=new A_(Ds(E.path),G,{includeMetadataChanges:!0,so:!0});return E_(_,H)},[4,Aa(i)];case 1:return[2,l.apply(void 0,[f.sent(),i.asyncQueue,t,e,o])]}})})}),o.promise}function Ow(i,t,e){var s=this;void 0===e&&(e={});var o=new bo;return i.asyncQueue.enqueueAndForget(function(){return(0,Q.mG)(s,void 0,void 0,function(){var l;return(0,Q.Jh)(this,function(f){switch(f.label){case 0:return l=function(_,w,E,T,F){var G=new R_({next:function(Y){w.enqueueAndForget(function(){return e0(_,H)}),Y.fromCache&&"server"===T.source?F.reject(new _t($e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):F.resolve(Y)},error:function(Y){return F.reject(Y)}}),H=new A_(E,G,{includeMetadataChanges:!0,so:!0});return E_(_,H)},[4,Aa(i)];case 1:return[2,l.apply(void 0,[f.sent(),i.asyncQueue,t,e,o])]}})})}),o.promise}var Ff=function(i,t,e,s,o,l,f,_){this.databaseId=i,this.appId=t,this.persistenceKey=e,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=_},_0=function(){function i(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(i.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(t){return t instanceof i&&t.projectId===this.projectId&&t.database===this.database},i}(),F_=new Map,KC=function(i,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+i},v0=function(){function i(){this.changeListener=null}return i.prototype.getToken=function(){return Promise.resolve(null)},i.prototype.invalidateToken=function(){},i.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(is.UNAUTHENTICATED)})},i.prototype.removeChangeListener=function(){this.changeListener=null},i}(),kw=function(){function i(t){this.token=t,this.changeListener=null}return i.prototype.getToken=function(){return Promise.resolve(this.token)},i.prototype.invalidateToken=function(){},i.prototype.setChangeListener=function(t,e){var s=this;this.changeListener=e,t.enqueueRetryable(function(){return e(s.token.user)})},i.prototype.removeChangeListener=function(){this.changeListener=null},i}(),dE=function(){function i(t){var e=this;this.currentUser=is.UNAUTHENTICATED,this.oc=new bo,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var s=function(o){Tt("FirebaseCredentialsProvider","Auth detected"),e.auth=o,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(o){return s(o)}),setTimeout(function(){if(!e.auth){var o=t.getImmediate({optional:!0});o?s(o):(Tt("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return i.prototype.getToken=function(){var t=this,e=this.cc,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(function(o){return t.cc!==e?(Tt("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):o?(En("string"==typeof o.accessToken),new KC(o.accessToken,t.currentUser)):null}):Promise.resolve(null)},i.prototype.invalidateToken=function(){this.forceRefresh=!0},i.prototype.setChangeListener=function(t,e){var s=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,Q.mG)(s,void 0,void 0,function(){return(0,Q.Jh)(this,function(o){switch(o.label){case 0:return[4,this.oc.promise];case 1:return o.sent(),[4,e(this.currentUser)];case 2:return o.sent(),this.changeListener=e,[2]}})})})},i.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},i.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return En(null===t||"string"==typeof t),new is(t)},i}(),Sn=function(){function i(t,e,s){this.hc=t,this.lc=e,this.fc=s,this.type="FirstParty",this.user=is.FIRST_PARTY}return Object.defineProperty(i.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),i}(),QC=function(){function i(t,e,s){this.hc=t,this.lc=e,this.fc=s}return i.prototype.getToken=function(){return Promise.resolve(new Sn(this.hc,this.lc,this.fc))},i.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(is.FIRST_PARTY)})},i.prototype.removeChangeListener=function(){},i.prototype.invalidateToken=function(){},i}();function y0(i,t,e){if(!e)throw new _t($e.INVALID_ARGUMENT,"Function "+i+"() cannot be called with an empty "+t+".")}function b0(i,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new _t($e.INVALID_ARGUMENT,"Invalid options passed to function "+i+'(): You cannot specify both "merge" and "mergeFields".');return t}function wg(i,t,e,s){if(!0===t&&!0===s)throw new _t($e.INVALID_ARGUMENT,i+" and "+e+" cannot be used together.")}function Fw(i){if(!gn.isDocumentKey(i))throw new _t($e.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+i+" has "+i.length+".")}function xg(i){if(gn.isDocumentKey(i))throw new _t($e.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+i+" has "+i.length+".")}function Jd(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=i.substring(0,20)+"..."),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";var t=function(e){if(e.constructor){var s=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(s&&s.length>1)return s[1]}return null}(i);return t?"a custom "+t+" object":"an object"}return"function"==typeof i?"a function":dn()}function Cn(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new _t($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var e=Jd(i);throw new _t($e.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+e)}return i}function XC(i,t){if(t<=0)throw new _t($e.INVALID_ARGUMENT,"Function "+i+"() requires a positive number, but it was: "+t+".")}var w0=function(){function i(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new _t($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new _t($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,wg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return i.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},i}(),p=function(){function i(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w0({}),this._settingsFrozen=!1,t instanceof _0?(this._databaseId=t,this._credentials=new v0):(this._app=t,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new _t($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _0(s.options.projectId)}(t),this._credentials=new dE(e))}return Object.defineProperty(i.prototype,"app",{get:function(){if(!this._app)throw new _t($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),i.prototype._setSettings=function(t){if(this._settingsFrozen)throw new _t($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w0(t),void 0!==t.credentials&&(this._credentials=function(e){if(!e)return new v0;switch(e.type){case"gapi":var s=e.client;return En(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new QC(s,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new _t($e.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},i.prototype._getSettings=function(){return this._settings},i.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},i.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},i.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},i.prototype._terminate=function(){return(e=F_.get(this))&&(Tt("ComponentProvider","Removing Datastore"),F_.delete(this),e.terminate()),Promise.resolve();var e},i}(),a=function(){function i(t,e,s){this.converter=e,this._key=s,this.type="document",this.firestore=t}return Object.defineProperty(i.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return new m(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),i.prototype.withConverter=function(t){return new i(this.firestore,t,this._key)},i}(),c=function(){function i(t,e,s){this.converter=e,this._query=s,this.type="query",this.firestore=t}return i.prototype.withConverter=function(t){return new i(this.firestore,t,this._query)},i}(),m=function(i){function t(e,s,o){var l=this;return(l=i.call(this,e,s,Ds(o))||this)._path=o,l.type="collection",l}return(0,Q.ZT)(t,i),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new a(this.firestore,null,new gn(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(c);function v(i,t){for(var e,s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];if(i=(0,$n.m9)(i),y0("collection","path",t),i instanceof p)return xg(e=ui.fromString.apply(ui,(0,Q.ev)([t],s))),new m(i,null,e);if(!(i instanceof a||i instanceof m))throw new _t($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return xg(e=ui.fromString.apply(ui,(0,Q.ev)([i.path],s)).child(ui.fromString(t))),new m(i.firestore,null,e)}function b(i,t){for(var e,s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];if(i=(0,$n.m9)(i),1===arguments.length&&(t=fy.u()),y0("doc","path",t),i instanceof p)return Fw(e=ui.fromString.apply(ui,(0,Q.ev)([t],s))),new a(i,null,new gn(e));if(!(i instanceof a||i instanceof m))throw new _t($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Fw(e=i._path.child(ui.fromString.apply(ui,(0,Q.ev)([t],s)))),new a(i.firestore,i instanceof m?i.converter:null,new gn(e))}function C(i,t){return i=(0,$n.m9)(i),t=(0,$n.m9)(t),(i instanceof a||i instanceof m)&&(t instanceof a||t instanceof m)&&i.firestore===t.firestore&&i.path===t.path&&i.converter===t.converter}function D(i,t){return i=(0,$n.m9)(i),t=(0,$n.m9)(t),i instanceof c&&t instanceof c&&i.firestore===t.firestore&&Zs(i._query,t._query)&&i.converter===t.converter}var S=function(){function i(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new y_(this,"async_queue_retry"),this.Ic=function(){var s=$d();s&&Tt("AsyncQueue","Visibility state changed to "+s.visibilityState),t.Zi.Gi()};var e=$d();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(i.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),i.prototype.enqueueAndForget=function(t){this.enqueue(t)},i.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},i.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=$d();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},i.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var s=new bo;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(s.resolve,s.reject),s.promise)}).then(function(){return s.promise})},i.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},i.prototype.bc=function(){return(0,Q.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Q.Jh)(this,function(s){switch(s.label){case 0:if(0===this.wc.length)return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return s.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!qi(t=s.sent()))throw t;return Tt("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),s.label=5;case 5:return[2]}})})},i.prototype.Rc=function(t){var e=this,s=this.dc.then(function(){return e.gc=!0,t().catch(function(o){throw e.yc=o,e.gc=!1,Nr("INTERNAL UNHANDLED ERROR: ",(f=(l=o).message||"",l.stack&&(f=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),f)),o;var l,f}).then(function(o){return e.gc=!1,o})});return this.dc=s,s},i.prototype.enqueueAfterDelay=function(t,e,s){var o=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var l=M_.createAndSchedule(this,t,e,s,function(f){return o.vc(f)});return this.mc.push(l),l},i.prototype.Ac=function(){this.yc&&dn()},i.prototype.verifyOperationInProgress=function(){},i.prototype.Pc=function(){return(0,Q.mG)(this,void 0,void 0,function(){var t;return(0,Q.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},i.prototype.Vc=function(t){for(var e=0,s=this.mc;e<s.length;e++)if(s[e].timerId===t)return!0;return!1},i.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(f,_){return f.targetTimeMs-_.targetTimeMs});for(var s=0,o=e.mc;s<o.length;s++){var l=o[s];if(l.skipDelay(),"all"!==t&&l.timerId===t)break}return e.Pc()})},i.prototype.Dc=function(t){this.Tc.push(t)},i.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},i}();function A(i){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var s=t,o=0,l=["next","error","complete"];o<l.length;o++){var f=l[o];if(f in s&&"function"==typeof s[f])return!0}return!1}(i)}!function(){function i(){this._progressObserver={},this._taskCompletionResolver=new bo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}i.prototype.onProgress=function(t,e,s){this._progressObserver={next:t,error:e,complete:s}},i.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},i.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},i.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},i.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},i.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var O=function(i){function t(e,s){var o=this;return(o=i.call(this,e,s)||this).type="firestore",o._queue=new S,o._persistenceKey="name"in e?e.name:"[DEFAULT]",o}return(0,Q.ZT)(t,i),t.prototype._terminate=function(){return this._firestoreClient||V(this),this._firestoreClient.terminate()},t}(p);function L(i){return i._firestoreClient||V(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function V(i){var t,l,_,e=i._freezeSettings(),s=(l=(null===(t=i._app)||void 0===t?void 0:t.options.appId)||"",new Ff(i._databaseId,l,i._persistenceKey,(_=e).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));i._firestoreClient=new Rw(i._credentials,i._queue,s)}function z(i,t,e){var s=this,o=new bo;return i.asyncQueue.enqueue(function(){return(0,Q.mG)(s,void 0,void 0,function(){var l;return(0,Q.Jh)(this,function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),[4,p0(i,e)];case 1:return f.sent(),[4,g0(i,t)];case 2:return f.sent(),o.resolve(),[3,4];case 3:if(!("FirebaseError"===(_=l=f.sent()).name?_.code===$e.FAILED_PRECONDITION||_.code===$e.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&_ instanceof DOMException)||22===_.code||20===_.code||11===_.code))throw l;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+l),o.reject(l),[3,4];case 4:return[2]}var _})})}).then(function(){return o.promise})}function W(i){if(i._initialized||i._terminated)throw new _t($e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var U=function(){function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var s=0;s<t.length;++s)if(0===t[s].length)throw new _t($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xa(t)}return i.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},i}(),B=function(){function i(t){this._byteString=t}return i.fromBase64String=function(t){try{return new i(mo.fromBase64String(t))}catch(e){throw new _t($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},i.fromUint8Array=function(t){return new i(mo.fromUint8Array(t))},i.prototype.toBase64=function(){return this._byteString.toBase64()},i.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},i.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},i.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},i}(),te=function(i){this._methodName=i},X=function(){function i(t,e){if(!isFinite(t)||t<-90||t>90)throw new _t($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new _t($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(i.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},i.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},i.prototype._compareTo=function(t){return ai(this._lat,t._lat)||ai(this._long,t._long)},i}(),se=/^__.*__$/,K=function(){function i(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}return i.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Bl(t,this.data,this.fieldMask,e,this.fieldTransforms):new tf(t,this.data,e,this.fieldTransforms)},i}(),he=function(){function i(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}return i.prototype.toMutation=function(t,e){return new Bl(t,this.data,this.fieldMask,e,this.fieldTransforms)},i}();function Ie(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dn()}}var xe=function(){function i(t,e,s,o,l,f){this.settings=t,this.databaseId=e,this.R=s,this.ignoreUndefinedProperties=o,void 0===l&&this.Cc(),this.fieldTransforms=l||[],this.fieldMask=f||[]}return Object.defineProperty(i.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),i.prototype.xc=function(t){return new i(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},i.prototype.kc=function(t){var e,s=null===(e=this.path)||void 0===e?void 0:e.child(t),o=this.xc({path:s,Fc:!1});return o.$c(t),o},i.prototype.Oc=function(t){var e,s=null===(e=this.path)||void 0===e?void 0:e.child(t),o=this.xc({path:s,Fc:!1});return o.Cc(),o},i.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},i.prototype.Lc=function(t){return di(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},i.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},i.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},i.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(Ie(this.Nc)&&se.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},i}(),Pe=function(){function i(t,e,s){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=s||Gu(t)}return i.prototype.Uc=function(t,e,s,o){return void 0===o&&(o=!1),new xe({Nc:t,methodName:e,qc:s,path:Xa.emptyPath(),Fc:!1,Bc:o},this.databaseId,this.R,this.ignoreUndefinedProperties)},i}();function Be(i){var t=i._freezeSettings(),e=Gu(i._databaseId);return new Pe(i._databaseId,!!t.ignoreUndefinedProperties,e)}function Ke(i,t,e,s,o,l){void 0===l&&(l={});var f=i.Uc(l.merge||l.mergeFields?2:0,t,e,o);yi("Data must be an object, but it was:",f,s);var _,w,E=Rn(s,f);if(l.merge)_=new Sd(f.fieldMask),w=f.fieldTransforms;else if(l.mergeFields){for(var T=[],F=0,G=l.mergeFields;F<G.length;F++){var H=dt(t,G[F],e);if(!f.contains(H))throw new _t($e.INVALID_ARGUMENT,"Field '"+H+"' is specified in your field mask but missing from your input data.");Gn(T,H)||T.push(H)}_=new Sd(T),w=f.fieldTransforms.filter(function(Y){return _.covers(Y.field)})}else _=null,w=f.fieldTransforms;return new K(new _o(E),_,w)}var Ue=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return(0,Q.ZT)(t,i),t.prototype._toFieldTransform=function(e){if(2!==e.Nc)throw e.Lc(1===e.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(te);function De(i,t,e){return new xe({Nc:3,qc:t.settings.qc,methodName:i._methodName,Fc:e},t.databaseId,t.R,t.ignoreUndefinedProperties)}var je=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return(0,Q.ZT)(t,i),t.prototype._toFieldTransform=function(e){return new Gp(e.path,new Ma)},t.prototype.isEqual=function(e){return e instanceof t},t}(te),st=function(i){function t(e,s){var o=this;return(o=i.call(this,e)||this).Kc=s,o}return(0,Q.ZT)(t,i),t.prototype._toFieldTransform=function(e){var s=De(this,e,!0),o=this.Kc.map(function(f){return Wn(f,s)}),l=new Au(o);return new Gp(e.path,l)},t.prototype.isEqual=function(e){return this===e},t}(te),Ct=function(i){function t(e,s){var o=this;return(o=i.call(this,e)||this).Kc=s,o}return(0,Q.ZT)(t,i),t.prototype._toFieldTransform=function(e){var s=De(this,e,!0),o=this.Kc.map(function(f){return Wn(f,s)}),l=new Tu(o);return new Gp(e.path,l)},t.prototype.isEqual=function(e){return this===e},t}(te),jt=function(i){function t(e,s){var o=this;return(o=i.call(this,e)||this).Qc=s,o}return(0,Q.ZT)(t,i),t.prototype._toFieldTransform=function(e){var s=new Da(e.R,Sc(e.R,this.Qc));return new Gp(e.path,s)},t.prototype.isEqual=function(e){return this===e},t}(te);function qt(i,t,e,s){var o=i.Uc(1,t,e);yi("Data must be an object, but it was:",o,s);var l=[],f=_o.empty();Ed(s,function(w,E){var T=gi(t,w,e);E=(0,$n.m9)(E);var F=o.Oc(T);if(E instanceof Ue)l.push(T);else{var G=Wn(E,F);null!=G&&(l.push(T),f.set(T,G))}});var _=new Sd(l);return new he(f,_,o.fieldTransforms)}function an(i,t,e,s,o,l){var f=i.Uc(1,t,e),_=[dt(t,s,e)],w=[o];if(l.length%2!=0)throw new _t($e.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var E=0;E<l.length;E+=2)_.push(dt(t,l[E])),w.push(l[E+1]);for(var T=[],F=_o.empty(),G=_.length-1;G>=0;--G)if(!Gn(T,_[G])){var H=_[G],Y=w[G];Y=(0,$n.m9)(Y);var q=f.Oc(H);if(Y instanceof Ue)T.push(H);else{var J=Wn(Y,q);null!=J&&(T.push(H),F.set(H,J))}}var re=new Sd(T);return new he(F,re,f.fieldTransforms)}function nn(i,t,e,s){return void 0===s&&(s=!1),Wn(e,i.Uc(s?4:3,t))}function Wn(i,t){if(Hi(i=(0,$n.m9)(i)))return yi("Unsupported field value:",t,i),Rn(i,t);if(i instanceof te)return function(e,s){if(!Ie(s.Nc))throw s.Lc(e._methodName+"() can only be used with update() and set()");if(!s.path)throw s.Lc(e._methodName+"() is not currently supported inside arrays");var o=e._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(i,t),null;if(void 0===i&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.Fc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(e,s){for(var o=[],l=0,f=0,_=e;f<_.length;f++){var w=Wn(_[f],s.Mc(l));null==w&&(w={nullValue:"NULL_VALUE"}),o.push(w),l++}return{arrayValue:{values:o}}}(i,t)}return function(e,s){if(null===(e=(0,$n.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Sc(s.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var o=Tr.fromDate(e);return{timestampValue:Wp(s.R,o)}}if(e instanceof Tr)return o=new Tr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:Wp(s.R,o)};if(e instanceof X)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof B)return{bytesValue:n_(s.R,e._byteString)};if(e instanceof a){var l=e.firestore._databaseId;if(!l.isEqual(o=s.databaseId))throw s.Lc("Document reference is for database "+l.projectId+"/"+l.database+" but should be for database "+o.projectId+"/"+o.database);return{referenceValue:i_(e.firestore._databaseId||s.databaseId,e._key.path)}}throw s.Lc("Unsupported field value: "+Jd(e))}(i,t)}function Rn(i,t){var e={};return Bm(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ed(i,function(s,o){var l=Wn(o,t.kc(s));null!=l&&(e[s]=l)}),{mapValue:{fields:e}}}function Hi(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Tr||i instanceof X||i instanceof B||i instanceof a||i instanceof te)}function yi(i,t,e){if(!Hi(e)||"object"!=typeof(o=e)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){var s=Jd(e);throw t.Lc("an object"===s?i+" a custom object":i+" "+s)}var o}function dt(i,t,e){if((t=(0,$n.m9)(t))instanceof U)return t._internalPath;if("string"==typeof t)return gi(i,t);throw di("Field path arguments must be of type string or FieldPath.",i,!1,void 0,e)}var dr=new RegExp("[~\\*/\\[\\]]");function gi(i,t,e){if(t.search(dr)>=0)throw di("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",i,!1,void 0,e);try{return(new(U.bind.apply(U,(0,Q.ev)([void 0],t.split(".")))))._internalPath}catch(s){throw di("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",i,!1,void 0,e)}}function di(i,t,e,s,o){var l=s&&!s.isEmpty(),f=void 0!==o,_="Function "+t+"() called with invalid data";e&&(_+=" (via `toFirestore()`)");var w="";return(l||f)&&(w+=" (found",l&&(w+=" in field "+s),f&&(w+=" in document "+o),w+=")"),new _t($e.INVALID_ARGUMENT,(_+=". ")+i+w)}function Gn(i,t){return i.some(function(e){return e.isEqual(t)})}var mi=function(){function i(t,e,s,o,l){this._firestore=t,this._userDataWriter=e,this._key=s,this._document=o,this._converter=l}return Object.defineProperty(i.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ref",{get:function(){return new a(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),i.prototype.exists=function(){return null!==this._document},i.prototype.data=function(){if(this._document){if(this._converter){var t=new yt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},i.prototype.get=function(t){if(this._document){var e=this._document.data.field(Pt("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},i}(),yt=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return(0,Q.ZT)(t,i),t.prototype.data=function(){return i.prototype.data.call(this)},t}(mi);function Pt(i,t){return"string"==typeof t?gi(i,t):t instanceof U?t._internalPath:t._delegate._internalPath}var Lt=function(){function i(t,e){this.hasPendingWrites=t,this.fromCache=e}return i.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},i}(),un=function(i){function t(e,s,o,l,f,_){var w=this;return(w=i.call(this,e,s,o,l,_)||this)._firestore=e,w._firestoreImpl=e,w.metadata=f,w}return(0,Q.ZT)(t,i),t.prototype.exists=function(){return i.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var s=new en(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},t.prototype.get=function(e,s){if(void 0===s&&(s={}),this._document){var o=this._document.data.field(Pt("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,s.serverTimestamps)}},t}(mi),en=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return(0,Q.ZT)(t,i),t.prototype.data=function(e){return void 0===e&&(e={}),i.prototype.data.call(this,e)},t}(un),le=function(){function i(t,e,s,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new Lt(o.hasPendingWrites,o.fromCache),this.query=s}return Object.defineProperty(i.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),i.prototype.forEach=function(t,e){var s=this;this._snapshot.docs.forEach(function(o){t.call(e,new en(s._firestore,s._userDataWriter,o.key,o,new Lt(s._snapshot.mutatedKeys.has(o.key),s._snapshot.fromCache),s.query.converter))})},i.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new _t($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){var l=0;return s._snapshot.docChanges.map(function(_){return{type:"added",doc:new en(s._firestore,s._userDataWriter,_.doc.key,_.doc,new Lt(s._snapshot.mutatedKeys.has(_.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}})}var f=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(function(_){return o||3!==_.type}).map(function(_){var w=new en(s._firestore,s._userDataWriter,_.doc.key,_.doc,new Lt(s._snapshot.mutatedKeys.has(_.doc.key),s._snapshot.fromCache),s.query.converter),E=-1,T=-1;return 0!==_.type&&(E=f.indexOf(_.doc.key),f=f.delete(_.doc.key)),1!==_.type&&(T=(f=f.add(_.doc)).indexOf(_.doc.key)),{type:oe(_.type),doc:w,oldIndex:E,newIndex:T}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},i}();function oe(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dn()}}function pt(i,t){return i instanceof un&&t instanceof un?i._firestore===t._firestore&&i._key.isEqual(t._key)&&(null===i._document?null===t._document:i._document.isEqual(t._document))&&i._converter===t._converter:i instanceof le&&t instanceof le&&i._firestore===t._firestore&&D(i.query,t.query)&&i.metadata.isEqual(t.metadata)&&i._snapshot.isEqual(t._snapshot)}function vt(i){if(sa(i)&&0===i.explicitOrderBy.length)throw new _t($e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ce=function(){};function xt(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var s=0,o=t;s<o.length;s++){var l=o[s];i=l._apply(i)}return i}var Xt=function(i){function t(e,s,o){var l=this;return(l=i.call(this)||this).jc=e,l.Wc=s,l.Gc=o,l.type="where",l}return(0,Q.ZT)(t,i),t.prototype._apply=function(e){var l,_,s=Be(e.firestore),o=function(l,f,_,w,E,T,F){var G;if(E.isKeyField()){if("array-contains"===T||"array-contains-any"===T)throw new _t($e.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+T+"' queries on FieldPath.documentId().");if("in"===T||"not-in"===T){wn(F,T);for(var H=[],Y=0,q=F;Y<q.length;Y++)H.push(vn(w,l,q[Y]));G={arrayValue:{values:H}}}else G=vn(w,l,F)}else"in"!==T&&"not-in"!==T&&"array-contains-any"!==T||wn(F,T),G=nn(_,"where",F,"in"===T||"not-in"===T);var re=Oo.create(E,T,G);return function(Me,be){if(be.g()){var He=Dc(Me);if(null!==He&&!He.isEqual(be.field))throw new _t($e.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+He.toString()+"' and '"+be.field.toString()+"'");var Ve=Zh(Me);null!==Ve&&pr(0,be.field,Ve)}var ot=function(bt,$t){for(var Ot=0,Qn=bt.filters;Ot<Qn.length;Ot++){var rr=Qn[Ot];if($t.indexOf(rr.op)>=0)return rr.op}return null}(Me,function(bt){switch(bt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(be.op));if(null!==ot)throw new _t($e.INVALID_ARGUMENT,ot===be.op?"Invalid query. You cannot use more than one '"+be.op.toString()+"' filter.":"Invalid query. You cannot use '"+be.op.toString()+"' filters with '"+ot.toString()+"' filters.")}(l,re),re}(e._query,0,s,e.firestore._databaseId,this.jc,this.Wc,this.Gc);return new c(e.firestore,e.converter,(_=(l=e._query).filters.concat([o]),new wa(l.path,l.collectionGroup,l.explicitOrderBy.slice(),_,l.limit,l.limitType,l.startAt,l.endAt)))},t}(Ce),rn=function(i){function t(e,s){var o=this;return(o=i.call(this)||this).jc=e,o.zc=s,o.type="orderBy",o}return(0,Q.ZT)(t,i),t.prototype._apply=function(e){var o,f,s=function(o,l,f){if(null!==o.startAt)throw new _t($e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new _t($e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var _=new Lp(l,f);return function(w,E){if(null===Zh(w)){var T=Dc(w);null!==T&&pr(0,T,E.field)}}(o,_),_}(e._query,this.jc,this.zc);return new c(e.firestore,e.converter,(f=(o=e._query).explicitOrderBy.concat([s]),new wa(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)))},t}(Ce),Mt=function(i){function t(e,s,o){var l=this;return(l=i.call(this)||this).type=e,l.Hc=s,l.Jc=o,l}return(0,Q.ZT)(t,i),t.prototype._apply=function(e){return new c(e.firestore,e.converter,Rd(e._query,this.Hc,this.Jc))},t}(Ce),Mn=function(i){function t(e,s,o){var l=this;return(l=i.call(this)||this).type=e,l.Yc=s,l.Xc=o,l}return(0,Q.ZT)(t,i),t.prototype._apply=function(e){var o,l,s=mn(e,this.type,this.Yc,this.Xc);return new c(e.firestore,e.converter,(l=s,new wa((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,l,o.endAt)))},t}(Ce),bn=function(i){function t(e,s,o){var l=this;return(l=i.call(this)||this).type=e,l.Yc=s,l.Xc=o,l}return(0,Q.ZT)(t,i),t.prototype._apply=function(e){var o,l,s=mn(e,this.type,this.Yc,this.Xc);return new c(e.firestore,e.converter,(l=s,new wa((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,l)))},t}(Ce);function mn(i,t,e,s){if(e[0]=(0,$n.m9)(e[0]),e[0]instanceof mi)return function(l,f,_,w,E){if(!w)throw new _t($e.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+_+"().");for(var T=[],F=0,G=xa(l);F<G.length;F++){var H=G[F];if(H.field.isKeyField())T.push(Pp(f,w.key));else{var Y=w.data.field(H.field);if(my(Y))throw new _t($e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+H.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Y){var q=H.field.canonicalString();throw new _t($e.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+q+"' (used as the orderBy) does not exist.")}T.push(Y)}}return new Fp(T,E)}(i._query,i.firestore._databaseId,t,e[0]._document,s);var o=Be(i.firestore);return function(l,f,_,w,E,T){var F=l.explicitOrderBy;if(E.length>F.length)throw new _t($e.INVALID_ARGUMENT,"Too many arguments provided to "+w+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var G=[],H=0;H<E.length;H++){var Y=E[H];if(F[H].field.isKeyField()){if("string"!=typeof Y)throw new _t($e.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+w+"(), but got a "+typeof Y);if(!Ec(l)&&-1!==Y.indexOf("/"))throw new _t($e.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+w+"() must be a plain document ID, but '"+Y+"' contains a slash.");var q=l.path.child(ui.fromString(Y));if(!gn.isDocumentKey(q))throw new _t($e.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+w+"() must result in a valid document path, but '"+q+"' is not because it contains an odd number of segments.");var J=new gn(q);G.push(Pp(f,J))}else{var re=nn(_,w,Y);G.push(re)}}return new Fp(G,T)}(i._query,i.firestore._databaseId,o,t,e,s)}function vn(i,t,e){if("string"==typeof(e=(0,$n.m9)(e))){if(""===e)throw new _t($e.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ec(t)&&-1!==e.indexOf("/"))throw new _t($e.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var s=t.path.child(ui.fromString(e));if(!gn.isDocumentKey(s))throw new _t($e.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+s+"' is not because it has an odd number of segments ("+s.length+").");return Pp(i,new gn(s))}if(e instanceof a)return Pp(i,e._key);throw new _t($e.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Jd(e)+".")}function wn(i,t){if(!Array.isArray(i)||0===i.length)throw new _t($e.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(i.length>10)throw new _t($e.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function pr(i,t,e){if(!e.isEqual(t))throw new _t($e.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+e.toString()+"' instead.")}var to=function(){function i(){}return i.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Ja(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Br(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Du(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw dn()}},i.prototype.convertObject=function(t,e){var s=this,o={};return Ed(t.fields,function(l,f){o[l]=s.convertValue(f,e)}),o},i.prototype.convertGeoPoint=function(t){return new X(Br(t.latitude),Br(t.longitude))},i.prototype.convertArray=function(t,e){var s=this;return(t.values||[]).map(function(o){return s.convertValue(o,e)})},i.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var s=Vm(t);return null==s?null:this.convertValue(s,e);case"estimate":return this.convertTimestamp(Tp(t));default:return null}},i.prototype.convertTimestamp=function(t){var e=ba(t);return new Tr(e.seconds,e.nanos)},i.prototype.convertDocumentKey=function(t,e){var s=ui.fromString(t);En(uf(s));var o=new _0(s.get(1),s.get(3)),l=new gn(s.popFirst(5));return o.isEqual(e)||Nr("Document "+l+" contains a document reference within a different database ("+o.projectId+"/"+o.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),l},i}();function Cg(i,t,e){return i?e&&(e.merge||e.mergeFields)?i.toFirestore(t,e):i.toFirestore(t):t}var Lw=function(i){function t(e){var s=this;return(s=i.call(this)||this).firestore=e,s}return(0,Q.ZT)(t,i),t.prototype.convertBytes=function(e){return new B(e)},t.prototype.convertReference=function(e){var s=this.convertDocumentKey(e,this.firestore._databaseId);return new a(this.firestore,null,s)},t}(to),JC=function(){function i(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Be(t)}return i.prototype.set=function(t,e,s){this._verifyNotCommitted();var o=Uc(t,this._firestore),l=Cg(o.converter,e,s),f=Ke(this._dataReader,"WriteBatch.set",o._key,l,null!==o.converter,s);return this._mutations.push(f.toMutation(o._key,Ks.none())),this},i.prototype.update=function(t,e,s){for(var o=[],l=3;l<arguments.length;l++)o[l-3]=arguments[l];this._verifyNotCommitted();var f,_=Uc(t,this._firestore);return f="string"==typeof(e=(0,$n.m9)(e))||e instanceof U?an(this._dataReader,"WriteBatch.update",_._key,e,s,o):qt(this._dataReader,"WriteBatch.update",_._key,e),this._mutations.push(f.toMutation(_._key,Ks.exists(!0))),this},i.prototype.delete=function(t){this._verifyNotCommitted();var e=Uc(t,this._firestore);return this._mutations=this._mutations.concat(new Ac(e._key,Ks.none())),this},i.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},i.prototype._verifyNotCommitted=function(){if(this._committed)throw new _t($e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},i}();function Uc(i,t){if((i=(0,$n.m9)(i)).firestore!==t)throw new _t($e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}var eh=function(i){function t(e){var s=this;return(s=i.call(this)||this).firestore=e,s}return(0,Q.ZT)(t,i),t.prototype.convertBytes=function(e){return new B(e)},t.prototype.convertReference=function(e){var s=this.convertDocumentKey(e,this.firestore._databaseId);return new a(this.firestore,null,s)},t}(to);function Mg(i,t,e){for(var s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];i=Cn(i,a);var l=Cn(i.firestore,O),f=Be(l);return Hc(l,[("string"==typeof(t=(0,$n.m9)(t))||t instanceof U?an(f,"updateDoc",i._key,t,e,s):qt(f,"updateDoc",i._key,t)).toMutation(i._key,Ks.exists(!0))])}function x0(i){for(var t,e,s,o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];i=(0,$n.m9)(i);var f={includeMetadataChanges:!1},_=0;"object"!=typeof o[_]||A(o[_])||(f=o[_],_++);var w,E,T,F={includeMetadataChanges:f.includeMetadataChanges};if(A(o[_])){var G=o[_];o[_]=null===(t=G.next)||void 0===t?void 0:t.bind(G),o[_+1]=null===(e=G.error)||void 0===e?void 0:e.bind(G),o[_+2]=null===(s=G.complete)||void 0===s?void 0:s.bind(G)}if(i instanceof a)E=Cn(i.firestore,O),T=Ds(i._key.path),w={next:function(q){o[_]&&o[_](L_(E,i,q))},error:o[_+1],complete:o[_+2]};else{var H=Cn(i,c);E=Cn(H.firestore,O),T=H._query;var Y=new eh(E);w={next:function(q){o[_]&&o[_](new le(E,Y,H,q))},error:o[_+1],complete:o[_+2]},vt(i._query)}return function(q,J,re,Me){var be=this,He=new R_(Me),Ve=new A_(J,He,re);return q.asyncQueue.enqueueAndForget(function(){return(0,Q.mG)(be,void 0,void 0,function(){var ot;return(0,Q.Jh)(this,function(bt){switch(bt.label){case 0:return ot=E_,[4,Aa(q)];case 1:return[2,ot.apply(void 0,[bt.sent(),Ve])]}})})}),function(){He.Wo(),q.asyncQueue.enqueueAndForget(function(){return(0,Q.mG)(be,void 0,void 0,function(){var ot;return(0,Q.Jh)(this,function(bt){switch(bt.label){case 0:return ot=e0,[4,Aa(q)];case 1:return[2,ot.apply(void 0,[bt.sent(),Ve])]}})})})}}(L(E),T,F,w)}function Hc(i,t){return function(e,s){var o=this,l=new bo;return e.asyncQueue.enqueueAndForget(function(){return(0,Q.mG)(o,void 0,void 0,function(){var f;return(0,Q.Jh)(this,function(_){switch(_.label){case 0:return f=r0,[4,bg(e)];case 1:return[2,f.apply(void 0,[_.sent(),s,l])]}})})}),l.promise}(L(i),t)}function L_(i,t,e){var s=e.docs.get(t._key),o=new eh(i);return new un(i,o,t._key,s,new Lt(e.hasPendingWrites,e.fromCache),t.converter)}var C0=function(i){function t(e,s){var o=this;return(o=i.call(this,e,s)||this)._firestore=e,o}return(0,Q.ZT)(t,i),t.prototype.get=function(e){var s=this,o=Uc(e,this._firestore),l=new eh(this._firestore);return i.prototype.get.call(this,e).then(function(f){return new un(s._firestore,l,o._key,f._document,new Lt(!1,!1),o.converter)})},t}(function(){function i(t,e){this._firestore=t,this._transaction=e,this._dataReader=Be(t)}return i.prototype.get=function(t){var e=this,s=Uc(t,this._firestore),o=new Lw(this._firestore);return this._transaction.lookup([s._key]).then(function(l){if(!l||1!==l.length)return dn();var f=l[0];if(f.isFoundDocument())return new mi(e._firestore,o,f.key,f,s.converter);if(f.isNoDocument())return new mi(e._firestore,o,s._key,null,s.converter);throw dn()})},i.prototype.set=function(t,e,s){var o=Uc(t,this._firestore),l=Cg(o.converter,e,s),f=Ke(this._dataReader,"Transaction.set",o._key,l,null!==o.converter,s);return this._transaction.set(o._key,f),this},i.prototype.update=function(t,e,s){for(var o=[],l=3;l<arguments.length;l++)o[l-3]=arguments[l];var f,_=Uc(t,this._firestore);return f="string"==typeof(e=(0,$n.m9)(e))||e instanceof U?an(this._dataReader,"Transaction.update",_._key,e,s,o):qt(this._dataReader,"Transaction.update",_._key,e),this._transaction.update(_._key,f),this},i.prototype.delete=function(t){var e=Uc(t,this._firestore);return this._transaction.delete(e._key),this},i}());function M0(){if("undefined"==typeof Uint8Array)throw new _t($e.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Kl(){if("undefined"==typeof atob)throw new _t($e.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var D0=function(){function i(t){this._delegate=t}return i.fromBase64String=function(t){return Kl(),new i(B.fromBase64String(t))},i.fromUint8Array=function(t){return M0(),new i(B.fromUint8Array(t))},i.prototype.toBase64=function(){return Kl(),this._delegate.toBase64()},i.prototype.toUint8Array=function(){return M0(),this._delegate.toUint8Array()},i.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},i.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},i}(),E0=function(){function i(){}return i.prototype.enableIndexedDbPersistence=function(t,e){return function(s,o){W(s=Cn(s,O));var l=L(s),f=s._freezeSettings(),_=new vg;return z(l,_,new h0(_,f.cacheSizeBytes,null==o?void 0:o.forceOwnership))}(t._delegate,{forceOwnership:e})},i.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(e){W(e=Cn(e,O));var s=L(e),o=e._freezeSettings(),l=new vg;return z(s,l,new f0(l,o.cacheSizeBytes))}(t._delegate)},i.prototype.clearIndexedDbPersistence=function(t){return function(e){var s=this;if(e._initialized&&!e._terminated)throw new _t($e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var o=new bo;return e._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Q.mG)(s,void 0,void 0,function(){var l;return(0,Q.Jh)(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),[4,function(_){return(0,Q.mG)(this,void 0,void 0,function(){return(0,Q.Jh)(this,function(E){switch(E.label){case 0:return zl.yt()?[4,zl.delete(_+"main")]:[2,Promise.resolve()];case 1:return E.sent(),[2]}})})}(bf(e._databaseId,e._persistenceKey))];case 1:return f.sent(),o.resolve(),[3,3];case 2:return l=f.sent(),o.reject(l),[3,3];case 3:return[2]}})})}),o.promise}(t._delegate)},i}(),N_=function(){function i(t,e,s){var o=this;this._delegate=e,this.Zc=s,this.INTERNAL={delete:function(){return o.terminate()}},t instanceof _0||(this.tu=t)}return Object.defineProperty(i.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),i.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Dd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},i.prototype.useEmulator=function(t,e,s){void 0===s&&(s={}),function(o,l,f,_){var w;void 0===_&&(_={});var E=(o=Cn(o,p))._getSettings();if("firestore.googleapis.com"!==E.host&&E.host!==l&&Dd("Host has been set in both settings() and useEmulator(), emulator host will be used"),o._setSettings(Object.assign(Object.assign({},E),{host:l+":"+f,ssl:!1})),_.mockUserToken){var T,F;if("string"==typeof _.mockUserToken)T=_.mockUserToken,F=is.MOCK_USER;else{T=(0,$n.Sg)(_.mockUserToken,null===(w=o._app)||void 0===w?void 0:w.options.projectId);var G=_.mockUserToken.sub||_.mockUserToken.user_id;if(!G)throw new _t($e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");F=new is(G)}o._credentials=new kw(new KC(T,F))}}(this._delegate,t,e,s)},i.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Q.mG)(e,void 0,void 0,function(){var s,o;return(0,Q.Jh)(this,function(l){switch(l.label){case 0:return[4,m0(t)];case 1:return s=l.sent(),[4,k_(t)];case 2:return o=l.sent(),[2,(s.setNetworkEnabled(!0),f=o,_=zt(f),_.Or.delete(0),Mf(_))]}var f,_})})})}(L(Cn(this._delegate,O)))},i.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Q.mG)(e,void 0,void 0,function(){var s,o;return(0,Q.Jh)(this,function(l){switch(l.label){case 0:return[4,m0(t)];case 1:return s=l.sent(),[4,k_(t)];case 2:return o=l.sent(),[2,(s.setNetworkEnabled(!1),function(f){return(0,Q.mG)(this,void 0,void 0,function(){var _;return(0,Q.Jh)(this,function(w){switch(w.label){case 0:return(_=zt(f)).Or.add(0),[4,Df(_)];case 1:return w.sent(),_.Br.set("Offline"),[2]}})})}(o))]}})})})}(L(Cn(this._delegate,O)))},i.prototype.enablePersistence=function(t){var e=!1,s=!1;return t&&wg("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",s=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,s)},i.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},i.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},i.prototype.waitForPendingWrites=function(){return function(t){var e=this,s=new bo;return t.asyncQueue.enqueueAndForget(function(){return(0,Q.mG)(e,void 0,void 0,function(){var o;return(0,Q.Jh)(this,function(l){switch(l.label){case 0:return o=gl,[4,bg(t)];case 1:return[2,o.apply(void 0,[l.sent(),s])]}})})}),s.promise}(L(Cn(this._delegate,O)))},i.prototype.onSnapshotsInSync=function(t){return s=t,function(o,l){var f=this,_=new R_(l);return o.asyncQueue.enqueueAndForget(function(){return(0,Q.mG)(f,void 0,void 0,function(){var w;return(0,Q.Jh)(this,function(E){switch(E.label){case 0:return w=function(T,F){zt(T).Gr.add(F),F.next()},[4,Aa(o)];case 1:return[2,w.apply(void 0,[E.sent(),_])]}})})}),function(){_.Wo(),o.asyncQueue.enqueueAndForget(function(){return(0,Q.mG)(f,void 0,void 0,function(){var w;return(0,Q.Jh)(this,function(E){switch(E.label){case 0:return w=function(T,F){zt(T).Gr.delete(F)},[4,Aa(o)];case 1:return[2,w.apply(void 0,[E.sent(),_])]}})})})}}(L(Cn(this._delegate,O)),A(s)?s:{next:s});var s},Object.defineProperty(i.prototype,"app",{get:function(){if(!this.tu)throw new _t($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),i.prototype.collection=function(t){try{return new Vi(this,v(this._delegate,t))}catch(e){throw ln(e,"collection()","Firestore.collection()")}},i.prototype.doc=function(t){try{return new Zn(this,b(this._delegate,t))}catch(e){throw ln(e,"doc()","Firestore.doc()")}},i.prototype.collectionGroup=function(t){try{return new Hn(this,function(e,s){if(e=Cn(e,p),y0("collectionGroup","collection id",s),s.indexOf("/")>=0)throw new _t($e.INVALID_ARGUMENT,"Invalid collection ID '"+s+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new c(e,null,(o=s,new wa(ui.emptyPath(),o)));var o}(this._delegate,t))}catch(e){throw ln(e,"collectionGroup()","Firestore.collectionGroup()")}},i.prototype.runTransaction=function(t){var s,e=this;return function(l,f){var _=this,w=new bo;return l.asyncQueue.enqueueAndForget(function(){return(0,Q.mG)(_,void 0,void 0,function(){var E;return(0,Q.Jh)(this,function(T){switch(T.label){case 0:return[4,(F=l,yg(F).then(function(G){return G.datastore}))];case 1:return E=T.sent(),new Iw(l.asyncQueue,E,f,w).run(),[2]}var F})})}),w.promise}(L(s=this._delegate),function(l){return function(s){return t(new Qe(e,s))}(new C0(s,l))})},i.prototype.batch=function(){var t=this;return L(this._delegate),new lt(new JC(this._delegate,function(e){return Hc(t._delegate,e)}))},i.prototype.loadBundle=function(t){throw new _t($e.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},i.prototype.namedQuery=function(t){throw new _t($e.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},i}(),ie=function(i){function t(e){var s=this;return(s=i.call(this)||this).firestore=e,s}return(0,Q.ZT)(t,i),t.prototype.convertBytes=function(e){return new D0(new B(e))},t.prototype.convertReference=function(e){var s=this.convertDocumentKey(e,this.firestore._databaseId);return Zn.eu(s,this.firestore,null)},t}(to),Qe=function(){function i(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new ie(t)}return i.prototype.get=function(t){var e=this,s=ss(t);return this._delegate.get(s).then(function(o){return new ir(e._firestore,new un(e._firestore._delegate,e._userDataWriter,o._key,o._document,o.metadata,s.converter))})},i.prototype.set=function(t,e,s){var o=ss(t);return s?(b0("Transaction.set",s),this._delegate.set(o,e,s)):this._delegate.set(o,e),this},i.prototype.update=function(t,e,s){for(var o,l=[],f=3;f<arguments.length;f++)l[f-3]=arguments[f];var _=ss(t);return 2===arguments.length?this._delegate.update(_,e):(o=this._delegate).update.apply(o,(0,Q.ev)([_,e,s],l)),this},i.prototype.delete=function(t){var e=ss(t);return this._delegate.delete(e),this},i}(),lt=function(){function i(t){this._delegate=t}return i.prototype.set=function(t,e,s){var o=ss(t);return s?(b0("WriteBatch.set",s),this._delegate.set(o,e,s)):this._delegate.set(o,e),this},i.prototype.update=function(t,e,s){for(var o,l=[],f=3;f<arguments.length;f++)l[f-3]=arguments[f];var _=ss(t);return 2===arguments.length?this._delegate.update(_,e):(o=this._delegate).update.apply(o,(0,Q.ev)([_,e,s],l)),this},i.prototype.delete=function(t){var e=ss(t);return this._delegate.delete(e),this},i.prototype.commit=function(){return this._delegate.commit()},i}(),Gt=function(){function i(t,e,s){this._firestore=t,this._userDataWriter=e,this._delegate=s}return i.prototype.fromFirestore=function(t,e){var s=new en(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Ri(this._firestore,s),null!=e?e:{})},i.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},i.nu=function(t,e){var s=i.su,o=s.get(t);o||s.set(t,o=new WeakMap);var l=o.get(e);return l||(l=new i(t,new ie(t),e),o.set(e,l)),l},i}();Gt.su=new WeakMap;var Zn=function(){function i(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ie(t)}return i.iu=function(t,e,s){if(t.length%2!=0)throw new _t($e.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new i(e,new a(e._delegate,s,new gn(t)))},i.eu=function(t,e,s){return new i(e,new a(e._delegate,s,t))},Object.defineProperty(i.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return new Vi(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),i.prototype.collection=function(t){try{return new Vi(this.firestore,v(this._delegate,t))}catch(e){throw ln(e,"collection()","DocumentReference.collection()")}},i.prototype.isEqual=function(t){return(t=(0,$n.m9)(t))instanceof a&&C(this._delegate,t)},i.prototype.set=function(t,e){e=b0("DocumentReference.set",e);try{return function(s,o,l){s=Cn(s,a);var f=Cn(s.firestore,O),_=Cg(s.converter,o,l);return Hc(f,[Ke(Be(f),"setDoc",s._key,_,null!==s.converter,l).toMutation(s._key,Ks.none())])}(this._delegate,t,e)}catch(s){throw ln(s,"setDoc()","DocumentReference.set()")}},i.prototype.update=function(t,e){for(var s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];try{return 1===arguments.length?Mg(this._delegate,t):Mg.apply(void 0,(0,Q.ev)([this._delegate,t,e],s))}catch(l){throw ln(l,"updateDoc()","DocumentReference.update()")}},i.prototype.delete=function(){return Hc(Cn((t=this._delegate).firestore,O),[new Ac(t._key,Ks.none())]);var t},i.prototype.onSnapshot=function(){for(var t=this,e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];var o=Yn(e),l=qn(e,function(f){return new ir(t.firestore,new un(t.firestore._delegate,t._userDataWriter,f._key,f._document,f.metadata,t._delegate.converter))});return x0(this._delegate,o,l)},i.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(s){s=Cn(s,a);var o=Cn(s.firestore,O),l=L(o),f=new eh(o);return function(_,w){var E=this,T=new bo;return _.asyncQueue.enqueueAndForget(function(){return(0,Q.mG)(E,void 0,void 0,function(){var F;return(0,Q.Jh)(this,function(G){switch(G.label){case 0:return F=function(H,Y,q){return(0,Q.mG)(this,void 0,void 0,function(){var J,re;return(0,Q.Jh)(this,function(Me){switch(Me.label){case 0:return Me.trys.push([0,2,,3]),[4,(be=H,He=Y,Ve=zt(be),Ve.persistence.runTransaction("read document","readonly",function(ot){return Ve.Mn.mn(ot,He)}))];case 1:return(re=Me.sent()).isFoundDocument()?q.resolve(re):re.isNoDocument()?q.resolve(null):q.reject(new _t($e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return J=Me.sent(),re=Uu(J,"Failed to get document '"+Y+" from cache"),q.reject(re),[3,3];case 3:return[2]}var be,He,Ve})})},[4,O_(_)];case 1:return[2,F.apply(void 0,[G.sent(),w,T])]}})})}),T.promise}(l,s._key).then(function(_){return new un(o,f,s._key,_,new Lt(null!==_&&_.hasLocalMutations,!0),s.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(s){s=Cn(s,a);var o=Cn(s.firestore,O);return Pw(L(o),s._key,{source:"server"}).then(function(l){return L_(o,s,l)})}(this._delegate):function(s){s=Cn(s,a);var o=Cn(s.firestore,O);return Pw(L(o),s._key).then(function(l){return L_(o,s,l)})}(this._delegate)).then(function(s){return new ir(e.firestore,new un(e.firestore._delegate,e._userDataWriter,s._key,s._document,s.metadata,e._delegate.converter))})},i.prototype.withConverter=function(t){return new i(this.firestore,this._delegate.withConverter(t?Gt.nu(this.firestore,t):null))},i}();function ln(i,t,e){return i.message=i.message.replace(t,e),i}function Yn(i){for(var t=0,e=i;t<e.length;t++){var s=e[t];if("object"==typeof s&&!A(s))return s}return{}}function qn(i,t){var e,s,o;return{next:function(l){o.next&&o.next(t(l))},error:null===(e=(o=A(i[0])?i[0]:A(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]}).error)||void 0===e?void 0:e.bind(o),complete:null===(s=o.complete)||void 0===s?void 0:s.bind(o)}}var ir=function(){function i(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(i.prototype,"ref",{get:function(){return new Zn(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),i.prototype.data=function(t){return this._delegate.data(t)},i.prototype.get=function(t,e){return this._delegate.get(t,e)},i.prototype.isEqual=function(t){return pt(this._delegate,t._delegate)},i}(),Ri=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return(0,Q.ZT)(t,i),t.prototype.data=function(e){return this._delegate.data(e)},t}(ir),Hn=function(){function i(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ie(t)}return i.prototype.where=function(t,e,s){try{return new i(this.firestore,xt(this._delegate,(f=s,_=e,w=Pt("where",o=t),new Xt(w,_,f))))}catch(o){throw ln(o,/(orderBy|where)\(\)/,"Query.$1()")}var o,f,_,w},i.prototype.orderBy=function(t,e){try{return new i(this.firestore,xt(this._delegate,function(s,o){void 0===o&&(o="asc");var l=o,f=Pt("orderBy",s);return new rn(f,l)}(t,e)))}catch(s){throw ln(s,/(orderBy|where)\(\)/,"Query.$1()")}},i.prototype.limit=function(t){try{return new i(this.firestore,xt(this._delegate,(XC("limit",e=t),new Mt("limit",e,"F"))))}catch(e){throw ln(e,"limit()","Query.limit()")}var e},i.prototype.limitToLast=function(t){try{return new i(this.firestore,xt(this._delegate,(XC("limitToLast",e=t),new Mt("limitToLast",e,"L"))))}catch(e){throw ln(e,"limitToLast()","Query.limitToLast()")}var e},i.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new i(this.firestore,xt(this._delegate,function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return new Mn("startAt",s,!0)}.apply(void 0,t)))}catch(s){throw ln(s,"startAt()","Query.startAt()")}},i.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new i(this.firestore,xt(this._delegate,function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return new Mn("startAfter",s,!1)}.apply(void 0,t)))}catch(s){throw ln(s,"startAfter()","Query.startAfter()")}},i.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new i(this.firestore,xt(this._delegate,function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return new bn("endBefore",s,!0)}.apply(void 0,t)))}catch(s){throw ln(s,"endBefore()","Query.endBefore()")}},i.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new i(this.firestore,xt(this._delegate,function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return new bn("endAt",s,!1)}.apply(void 0,t)))}catch(s){throw ln(s,"endAt()","Query.endAt()")}},i.prototype.isEqual=function(t){return D(this._delegate,t._delegate)},i.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(s){s=Cn(s,c);var o=Cn(s.firestore,O),l=L(o),f=new eh(o);return function(_,w){var E=this,T=new bo;return _.asyncQueue.enqueueAndForget(function(){return(0,Q.mG)(E,void 0,void 0,function(){var F;return(0,Q.Jh)(this,function(G){switch(G.label){case 0:return F=function(H,Y,q){return(0,Q.mG)(this,void 0,void 0,function(){var J,re,Me,be,He;return(0,Q.Jh)(this,function(Ve){switch(Ve.label){case 0:return Ve.trys.push([0,2,,3]),[4,og(H,Y,!0)];case 1:return He=Ve.sent(),J=new n0(Y,He.Bn),re=J._o(He.documents),Me=J.applyChanges(re,!1),q.resolve(Me.snapshot),[3,3];case 2:return be=Ve.sent(),He=Uu(be,"Failed to execute query '"+Y+" against cache"),q.reject(He),[3,3];case 3:return[2]}})})},[4,O_(_)];case 1:return[2,F.apply(void 0,[G.sent(),w,T])]}})})}),T.promise}(l,s._query).then(function(_){return new le(o,f,s,_)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(s){s=Cn(s,c);var o=Cn(s.firestore,O),l=L(o),f=new eh(o);return Ow(l,s._query,{source:"server"}).then(function(_){return new le(o,f,s,_)})}(this._delegate):function(s){s=Cn(s,c);var o=Cn(s.firestore,O),l=L(o),f=new eh(o);return vt(s._query),Ow(l,s._query).then(function(_){return new le(o,f,s,_)})}(this._delegate)).then(function(s){return new Us(e.firestore,new le(e.firestore._delegate,e._userDataWriter,e._delegate,s._snapshot))})},i.prototype.onSnapshot=function(){for(var t=this,e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];var o=Yn(e),l=qn(e,function(f){return new Us(t.firestore,new le(t.firestore._delegate,t._userDataWriter,t._delegate,f._snapshot))});return x0(this._delegate,o,l)},i.prototype.withConverter=function(t){return new i(this.firestore,this._delegate.withConverter(t?Gt.nu(this.firestore,t):null))},i}(),Oi=function(){function i(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(i.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"doc",{get:function(){return new Ri(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),i}(),Us=function(){function i(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(i.prototype,"query",{get:function(){return new Hn(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Ri(t._firestore,e)})},enumerable:!1,configurable:!0}),i.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(s){return new Oi(e._firestore,s)})},i.prototype.forEach=function(t,e){var s=this;this._delegate.forEach(function(o){t.call(e,new Ri(s._firestore,o))})},i.prototype.isEqual=function(t){return pt(this._delegate,t._delegate)},i}(),Vi=function(i){function t(e,s){var o=this;return(o=i.call(this,e,s)||this).firestore=e,o._delegate=s,o}return(0,Q.ZT)(t,i),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new Zn(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new Zn(this.firestore,void 0===e?b(this._delegate):b(this._delegate,e))}catch(s){throw ln(s,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var o,l,f,_,w,s=this;return(o=this._delegate,l=e,f=Cn(o.firestore,O),_=b(o),w=Cg(o.converter,l),Hc(f,[Ke(Be(o.firestore),"addDoc",_._key,w,null!==o.converter,{}).toMutation(_._key,Ks.exists(!1))]).then(function(){return _})).then(function(o){return new Zn(s.firestore,o)})},t.prototype.isEqual=function(e){return C(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Gt.nu(this.firestore,e):null))},t}(Hn);function ss(i){return Cn(i,a)}var Pr=function(){function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(U.bind.apply(U,(0,Q.ev)([void 0],t)))}return i.documentId=function(){return new i(Xa.keyField().canonicalString())},i.prototype.isEqual=function(t){return(t=(0,$n.m9)(t))instanceof U&&this._delegate._internalPath.isEqual(t._internalPath)},i}(),S0=function(){function i(t){this._delegate=t}return i.serverTimestamp=function(){var t=new je("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new i(t)},i.delete=function(){var t=new Ue("deleteField");return t._methodName="FieldValue.delete",new i(t)},i.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var s=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return new st("arrayUnion",o)}.apply(void 0,t);return s._methodName="FieldValue.arrayUnion",new i(s)},i.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var s=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return new Ct("arrayRemove",o)}.apply(void 0,t);return s._methodName="FieldValue.arrayRemove",new i(s)},i.increment=function(t){var e=new jt("increment",t);return e._methodName="FieldValue.increment",new i(e)},i.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},i}(),Lf=Z(2461),Eg={Firestore:N_,GeoPoint:X,Timestamp:Tr,Blob:D0,Transaction:Qe,WriteBatch:lt,DocumentReference:Zn,DocumentSnapshot:ir,Query:Hn,QueryDocumentSnapshot:Ri,QuerySnapshot:Us,CollectionReference:Vi,FieldPath:Pr,FieldValue:S0,setLogLevel:function rt(i){ya.setLogLevel(i)},CACHE_SIZE_UNLIMITED:-1};!function oT(i){i.INTERNAL.registerComponent(new Lf.wA("firestore",function(s){return t=s.getProvider("app").getImmediate(),e=s.getProvider("auth-internal"),new N_(t,new O(t,e),new E0);var t,e},"PUBLIC").setServiceProps(Object.assign({},Eg))),i.registerVersion("@firebase/firestore","2.4.0")}(lr.Z);var Ft=Z(7579),Hs=Z(6451),th=Z(8421);function ki(i,t){return(0,ci.e)((e,s)=>{let o=null,l=0,f=!1;const _=()=>f&&!o&&s.complete();e.subscribe(new Ci.Q(s,w=>{null==o||o.unsubscribe();let E=0;const T=l++;(0,th.Xf)(i(w,T)).subscribe(o=new Ci.Q(s,F=>s.next(t?t(w,F,T,E++):F),()=>{o=null,_()}))},()=>{f=!0,_()}))})}var Nw=Z(6063);class A0 extends Ft.x{constructor(t=1/0,e=1/0,s=Nw.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:s,_infiniteTimeWindow:o,_timestampProvider:l,_windowTime:f}=this;e||(s.push(t),!o&&s.push(l.now()+f)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:s,_buffer:o}=this,l=o.slice();for(let f=0;f<l.length&&!t.closed;f+=s?1:2)t.next(l[f]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:s,_infiniteTimeWindow:o}=this,l=(o?1:2)*t;if(t<1/0&&l<s.length&&s.splice(0,s.length-l),!o){const f=e.now();let _=0;for(let w=1;w<s.length&&s[w]<=f;w+=2)_=w;_&&s.splice(0,_+1)}}}var hE=Z(3099);function B_(i,t,e){var s,o;let l,f=!1;return i&&"object"==typeof i?(l=null!==(s=i.bufferSize)&&void 0!==s?s:1/0,t=null!==(o=i.windowTime)&&void 0!==o?o:1/0,f=!!i.refCount,e=i.scheduler):l=null!=i?i:1/0,(0,hE.B)({connector:()=>new A0(l,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:f})}const Bw=(0,Z(3888).d)(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});var Fi=Z(5698);function pE(i){return(0,ci.e)((t,e)=>{let s=!1;t.subscribe(new Ci.Q(e,o=>{s=!0,e.next(o)},()=>{s||e.next(i),e.complete()}))})}function Vw(i=aT){return(0,ci.e)((t,e)=>{let s=!1;t.subscribe(new Ci.Q(e,o=>{s=!0,e.next(o)},()=>s?e.complete():e.error(i())))})}function aT(){return new Bw}function V_(i,t){const e=arguments.length>=2;return s=>s.pipe(i?Jn((o,l)=>i(o,l,s)):Th.y,(0,Fi.q)(1),e?pE(t):Vw(()=>new Bw))}var Ia=Z(576);function gE(i,t){return(0,Ia.m)(t)?ki(()=>i,t):ki(()=>i)}var Nf=Z(9468);const nh=new u.OlP("angularfire2.auth.use-emulator"),lT=new u.OlP("angularfire2.auth.settings"),eM=new u.OlP("angularfire2.auth.tenant-id"),_E=new u.OlP("angularfire2.auth.langugage-code"),cT=new u.OlP("angularfire2.auth.use-device-language"),tM=new u.OlP("angularfire.auth.persistence");let uT=(()=>{class i{constructor(e,s,o,l,f,_,w,E,T,F){const G=new Qi.HU(l),H=(0,Qi.ss)(G),Y=new Ft.x,q=it(void 0).pipe((0,Ti.Q)(G.outsideAngular),ki(()=>l.runOutsideAngular(()=>Z.e(315).then(Z.bind(Z,7315)))),(0,At.U)(()=>(0,Qi.on)(e,l,s)),(0,At.U)(J=>l.runOutsideAngular(()=>{const re=f,Me=_;return(0,Qi.sI)(`${J.name}.auth`,"AngularFireAuth",J,()=>{const be=l.runOutsideAngular(()=>J.auth());if(re&&be.useEmulator(`http://${re.join(":")}`),w&&(be.tenantId=w),be.languageCode=E,T&&be.useDeviceLanguage(),Me)for(const[He,Ve]of Object.entries(Me))be.settings[He]=Ve;return F&&be.setPersistence(F),be},[re,w,E,T,Me,F])})),B_({bufferSize:1,refCount:!1}));if(Qo(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=it(null);else{q.pipe(V_()).subscribe();const re=q.pipe(ki(Ve=>Ve.getRedirectResult().then(ot=>ot,()=>null)),H,B_({bufferSize:1,refCount:!1})),Me=Ve=>new Ai.y(ot=>({unsubscribe:l.runOutsideAngular(()=>Ve(ot))})),be=q.pipe(ki(Ve=>Me(Ve.onAuthStateChanged.bind(Ve)))),He=q.pipe(ki(Ve=>Me(Ve.onIdTokenChanged.bind(Ve))));this.authState=re.pipe(gE(be),(0,Nf.R)(G.outsideAngular),(0,Ti.Q)(G.insideAngular)),this.user=re.pipe(gE(He),(0,Nf.R)(G.outsideAngular),(0,Ti.Q)(G.insideAngular)),this.idToken=this.user.pipe(ki(Ve=>Ve?(0,Xi.D)(Ve.getIdToken()):it(null))),this.idTokenResult=this.user.pipe(ki(Ve=>Ve?(0,Xi.D)(Ve.getIdTokenResult()):it(null))),this.credential=(0,Hs.T)(re,Y,this.authState.pipe(Jn(Ve=>!Ve))).pipe((0,At.U)(Ve=>(null==Ve?void 0:Ve.user)?Ve:null),(0,Nf.R)(G.outsideAngular),(0,Ti.Q)(G.insideAngular))}return(0,Qi.pX)(this,q,l,{spy:{apply:(J,re,Me)=>{(J.startsWith("signIn")||J.startsWith("createUser"))&&Me.then(be=>Y.next(be))}}})}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(Qi.Dh),u.LFG(Qi.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(nh,8),u.LFG(lT,8),u.LFG(eM,8),u.LFG(_E,8),u.LFG(cT,8),u.LFG(tM,8))},i.\u0275prov=u.Yz7({factory:function(){return new i(u.LFG(Qi.Dh),u.LFG(Qi.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(nh,8),u.LFG(lT,8),u.LFG(eM,8),u.LFG(_E,8),u.LFG(cT,8),u.LFG(tM,8))},token:i,providedIn:"any"}),i})();function iM(i,t){return function nM(i,t=Sl.z){return new Ai.y(e=>{let s;return null!=t?t.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},e)}):s=i.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=s&&s()}})}(i,t)}function Gw(i,t){return iM(i,t).pipe((0,At.U)(e=>({payload:e,type:"query"})))}function Uw(i,t){return Gw(i,t).pipe(Ji(void 0),Ah(),(0,At.U)(([e,s])=>{const o=s.payload.docChanges(),l=o.map(f=>({type:f.type,payload:f}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((f,_)=>{const w=o.find(T=>T.doc.ref.isEqual(f.ref)),E=null==e?void 0:e.payload.docs.find(T=>T.ref.isEqual(f.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(f.metadata)||!w&&E&&JSON.stringify(E.metadata)===JSON.stringify(f.metadata)||l.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:f}})}),l}))}function yE(i,t,e){return Uw(i,e).pipe(Tl((s,o)=>function hT(i,t,e){return t.forEach(s=>{e.indexOf(s.type)>-1&&(i=function fT(i,t){switch(t.type){case"added":if(!i[t.newIndex]||!i[t.newIndex].doc.ref.isEqual(t.doc.ref))return rM(i,t.newIndex,0,t);break;case"modified":if(null==i[t.oldIndex]||i[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=i.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return rM(i,t.newIndex,1,t)}break;case"removed":if(i[t.oldIndex]&&i[t.oldIndex].doc.ref.isEqual(t.doc.ref))return rM(i,t.oldIndex,1)}return i}(i,s))}),i}(s,o.map(l=>l.payload),t),[]),Ao(),(0,At.U)(s=>s.map(o=>({type:o.type,payload:o}))))}function rM(i,t,e,...s){const o=i.slice();return o.splice(t,e,...s),o}function bE(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class wE{constructor(t,e,s){this.ref=t,this.query=e,this.afs=s}stateChanges(t){let e=Uw(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,At.U)(s=>s.filter(o=>t.indexOf(o.type)>-1)))),e.pipe(Ji(void 0),Ah(),Jn(([s,o])=>o.length>0||!s),(0,At.U)(([s,o])=>o),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Tl((e,s)=>[...e,...s],[]))}snapshotChanges(t){const e=bE(t);return yE(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Gw(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(e=>e.payload.docs.map(s=>t.idField?Object.assign(Object.assign({},s.data()),{[t.idField]:s.id}):s.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Xi.D)(this.query.get(t)).pipe((0,Ti.Q)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new G_(this.ref.doc(t),this.afs)}}class G_{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const s=this.ref.collection(t),{ref:o,query:l}=aM(s,e);return new wE(o,l,this.afs)}snapshotChanges(){return function vE(i,t){return iM(i,t).pipe(Ji(void 0),Ah(),(0,At.U)(([e,s])=>s.exists?(null==e?void 0:e.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,At.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Xi.D)(this.ref.get(t)).pipe((0,Ti.Q)(this.afs.schedulers.insideAngular))}}class xE{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Uw(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(e=>e.filter(s=>t.indexOf(s.type)>-1)),Jn(e=>e.length>0),this.afs.keepUnstableUntilFirst):Uw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Tl((e,s)=>[...e,...s],[]))}snapshotChanges(t){const e=bE(t);return yE(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Gw(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(s=>s.payload.docs.map(o=>t.idField?Object.assign({[t.idField]:o.id},o.data()):o.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Xi.D)(this.query.get(t)).pipe((0,Ti.Q)(this.afs.schedulers.insideAngular))}}const Hw=new u.OlP("angularfire2.enableFirestorePersistence"),zw=new u.OlP("angularfire2.firestore.persistenceSettings"),sM=new u.OlP("angularfire2.firestore.settings"),oM=new u.OlP("angularfire2.firestore.use-emulator");function aM(i,t=(e=>e)){return{query:t(i),ref:i}}let pT=(()=>{class i{constructor(e,s,o,l,f,_,w,E,T){this.schedulers=new Qi.HU(_),this.keepUnstableUntilFirst=(0,Qi.ss)(this.schedulers);const F=(0,Qi.on)(e,_,s);!um.Z.auth&&T&&(0,Qi.yq)();const G=E;[this.firestore,this.persistenceEnabled$]=(0,Qi.sI)(`${F.name}.firestore`,"AngularFirestore",F,()=>{const H=_.runOutsideAngular(()=>F.firestore());if(l&&H.settings(l),G&&H.useEmulator(...G),o&&!Qo(f)){const Y=()=>{try{return(0,Xi.D)(H.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(q){return"undefined"!=typeof console&&console.warn(q),it(!1)}};return[H,_.runOutsideAngular(Y)]}return[H,it(!1)]},[l,G,o])}collection(e,s){let o;o="string"==typeof e?this.firestore.collection(e):e;const{ref:l,query:f}=aM(o,s),_=this.schedulers.ngZone.run(()=>l);return new wE(_,f,this)}collectionGroup(e,s){const o=s||(f=>f),l=this.firestore.collectionGroup(e);return new xE(o(l),this)}doc(e){let s;s="string"==typeof e?this.firestore.doc(e):e;const o=this.schedulers.ngZone.run(()=>s);return new G_(o,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(Qi.Dh),u.LFG(Qi.xv,8),u.LFG(Hw,8),u.LFG(sM,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(zw,8),u.LFG(oM,8),u.LFG(nh,8))},i.\u0275prov=u.Yz7({factory:function(){return new i(u.LFG(Qi.Dh),u.LFG(Qi.xv,8),u.LFG(Hw,8),u.LFG(sM,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(zw,8),u.LFG(oM,8),u.LFG(nh,8))},token:i,providedIn:"any"}),i})(),CE=(()=>{class i{static enablePersistence(e){return{ngModule:i,providers:[{provide:Hw,useValue:!0},{provide:zw,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[pT]}),i})();var ih=Z(515);class gT extends Ci.Q{constructor(){super(...arguments),this.activeGroups=0,this.teardownAttempted=!1}unsubscribe(){this.teardownAttempted=!0,0===this.activeGroups&&super.unsubscribe()}}var Ts=Z(6099);class Hr extends Ft.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:s}=this;if(t)throw e;return this._throwIfClosed(),s}next(t){super.next(this._value=t)}}const{isArray:mT}=Array,{getPrototypeOf:lM,prototype:ju,keys:_T}=Object;function T0(i){if(1===i.length){const t=i[0];if(mT(t))return{args:t,keys:null};if(function I0(i){return i&&"object"==typeof i&&lM(i)===ju}(t)){const e=_T(t);return{args:e.map(s=>t[s]),keys:e}}}return{args:i,keys:null}}const{isArray:vT}=Array;function cM(i){return(0,At.U)(t=>function yT(i,t){return vT(t)?i(...t):i(t)}(i,t))}function R0(i,t){return i.reduce((e,s,o)=>(e[s]=t[o],e),{})}var jw=Z(9672);function DE(...i){const t=(0,Al.yG)(i),e=(0,Al.jO)(i),{args:s,keys:o}=T0(i);if(0===s.length)return(0,Xi.D)([],t);const l=new Ai.y(function bT(i,t,e=Th.y){return s=>{uM(t,()=>{const{length:o}=i,l=new Array(o);let f=o,_=o;for(let w=0;w<o;w++)uM(t,()=>{const E=(0,Xi.D)(i[w],t);let T=!1;E.subscribe(new Ci.Q(s,F=>{l[w]=F,T||(T=!0,_--),_||s.next(e(l.slice()))},()=>{--f||s.complete()}))},s)},s)}}(s,t,o?f=>R0(o,f):Th.y));return e?l.pipe(cM(e)):l}function uM(i,t,e){i?(0,jw.f)(e,i,t):t()}function rh(i){return new Ai.y(t=>{(0,th.Xf)(i()).subscribe(t)})}var zr=Z(727);function dM(){return(0,ci.e)((i,t)=>{let e=null;i._refCount++;const s=new Ci.Q(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const o=i._connection,l=e;e=null,o&&(!l||o===l)&&o.unsubscribe(),t.unsubscribe()});i.subscribe(s),s.closed||(e=i.connect())})}class EE extends Ai.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,ci.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new zr.w0;const e=this.getSubject();t.add(this.source.subscribe(new Ci.Q(e,void 0,()=>{this._teardown(),e.complete()},s=>{this._teardown(),e.error(s)},()=>this._teardown()))),t.closed&&(this._connection=null,t=zr.w0.EMPTY)}return t}refCount(){return dM()(this)}}function sh(i){return(0,ci.e)((t,e)=>{let l,s=null,o=!1;s=t.subscribe(new Ci.Q(e,void 0,void 0,f=>{l=(0,th.Xf)(i(f,sh(i)(t))),s?(s.unsubscribe(),s=null,l.subscribe(e)):o=!0})),o&&(s.unsubscribe(),s=null,l.subscribe(e))})}function U_(i,t){return(0,Ia.m)(t)?(0,Ts.z)(i,t,1):(0,Ts.z)(i,1)}function P0(i){return i<=0?()=>ih.E:(0,ci.e)((t,e)=>{let s=[];t.subscribe(new Ci.Q(e,o=>{s.push(o),i<s.length&&s.shift()},()=>{for(const o of s)e.next(o);e.complete()},void 0,()=>{s=null}))})}var _i=Z(8505);function O0(i){return(0,ci.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}class zc{constructor(t,e){this.id=t,this.url=e}}class fM extends zc{constructor(t,e,s="imperative",o=null){super(t,e),this.navigationTrigger=s,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class k0 extends zc{constructor(t,e,s){super(t,e),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class SE extends zc{constructor(t,e,s){super(t,e),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wT extends zc{constructor(t,e,s){super(t,e),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class AE extends zc{constructor(t,e,s,o){super(t,e),this.urlAfterRedirects=s,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pM extends zc{constructor(t,e,s,o){super(t,e),this.urlAfterRedirects=s,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TE extends zc{constructor(t,e,s,o,l){super(t,e),this.urlAfterRedirects=s,this.state=o,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class IE extends zc{constructor(t,e,s,o){super(t,e),this.urlAfterRedirects=s,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RE extends zc{constructor(t,e,s,o){super(t,e),this.urlAfterRedirects=s,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gM{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class PE{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class OE{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kE{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xT{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mM{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class FE{constructor(t,e,s){this.routerEvent=t,this.position=e,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pn="primary";class H_{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function z_(i){return new H_(i)}const LE="ngNavigationCancelingError";function NE(i){const t=Error("NavigationCancelingError: "+i);return t[LE]=!0,t}function CT(i,t,e){const s=e.path.split("/");if(s.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||s.length<i.length))return null;const o={};for(let l=0;l<s.length;l++){const f=s[l],_=i[l];if(f.startsWith(":"))o[f.substring(1)]=_;else if(f!==_.path)return null}return{consumed:i.slice(0,s.length),posParams:o}}function Wu(i,t){const e=i?Object.keys(i):void 0,s=t?Object.keys(t):void 0;if(!e||!s||e.length!=s.length)return!1;let o;for(let l=0;l<e.length;l++)if(o=e[l],!vM(i[o],t[o]))return!1;return!0}function vM(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),s=[...t].sort();return e.every((o,l)=>s[l]===o)}return i===t}function BE(i){return Array.prototype.concat.apply([],i)}function VE(i){return i.length>0?i[i.length-1]:null}function no(i,t){for(const e in i)i.hasOwnProperty(e)&&t(i[e],e)}function jc(i){return(0,u.CqO)(i)?i:(0,u.QGY)(i)?(0,Xi.D)(Promise.resolve(i)):it(i)}const yM={exact:function wM(i,t,e){if(!Bf(i.segments,t.segments)||!j_(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const s in t.children)if(!i.children[s]||!wM(i.children[s],t.children[s],e))return!1;return!0},subset:xM},MT={exact:function DT(i,t){return Wu(i,t)},subset:function Yw(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>vM(i[e],t[e]))},ignored:()=>!0};function bM(i,t,e){return yM[e.paths](i.root,t.root,e.matrixParams)&&MT[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function xM(i,t,e){return UE(i,t,t.segments,e)}function UE(i,t,e,s){if(i.segments.length>e.length){const o=i.segments.slice(0,e.length);return!(!Bf(o,e)||t.hasChildren()||!j_(o,e,s))}if(i.segments.length===e.length){if(!Bf(i.segments,e)||!j_(i.segments,e,s))return!1;for(const o in t.children)if(!i.children[o]||!xM(i.children[o],t.children[o],s))return!1;return!0}{const o=e.slice(0,i.segments.length),l=e.slice(i.segments.length);return!!(Bf(i.segments,o)&&j_(i.segments,o,s)&&i.children[Pn])&&UE(i.children[Pn],t,l,s)}}function j_(i,t,e){return t.every((s,o)=>MT[e](i[o].parameters,s.parameters))}class oh{constructor(t,e,s){this.root=t,this.queryParams=e,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=z_(this.queryParams)),this._queryParamMap}toString(){return jE.serialize(this)}}class Mi{constructor(t,e){this.segments=t,this.children=e,this.parent=null,no(e,(s,o)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qw(this)}}class L0{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=z_(this.parameters)),this._parameterMap}toString(){return YE(this)}}function Bf(i,t){return i.length===t.length&&i.every((e,s)=>e.path===t[s].path)}class zE{}class CM{parse(t){const e=new _P(t);return new oh(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${N0(t.root,!0)}`,s=function hP(i){const t=Object.keys(i).map(e=>{const s=i[e];return Array.isArray(s)?s.map(o=>`${$w(e)}=${$w(o)}`).join("&"):`${$w(e)}=${$w(s)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams),o="string"==typeof t.fragment?`#${function WE(i){return encodeURI(i)}(t.fragment)}`:"";return`${e}${s}${o}`}}const jE=new CM;function qw(i){return i.segments.map(t=>YE(t)).join("/")}function N0(i,t){if(!i.hasChildren())return qw(i);if(t){const e=i.children[Pn]?N0(i.children[Pn],!1):"",s=[];return no(i.children,(o,l)=>{l!==Pn&&s.push(`${l}:${N0(o,!1)}`)}),s.length>0?`${e}(${s.join("//")})`:e}{const e=function HE(i,t){let e=[];return no(i.children,(s,o)=>{o===Pn&&(e=e.concat(t(s,o)))}),no(i.children,(s,o)=>{o!==Pn&&(e=e.concat(t(s,o)))}),e}(i,(s,o)=>o===Pn?[N0(i.children[Pn],!1)]:[`${o}:${N0(s,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Pn]?`${qw(i)}/${e[0]}`:`${qw(i)}/(${e.join("//")})`}}function MM(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $w(i){return MM(i).replace(/%3B/gi,";")}function Zw(i){return MM(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function B0(i){return decodeURIComponent(i)}function DM(i){return B0(i.replace(/\+/g,"%20"))}function YE(i){return`${Zw(i.path)}${function ST(i){return Object.keys(i).map(t=>`;${Zw(t)}=${Zw(i[t])}`).join("")}(i.parameters)}`}const qE=/^[^\/()?;=#]+/;function EM(i){const t=i.match(qE);return t?t[0]:""}const fP=/^[^=?&#]+/,gP=/^[^&#]+/;class _P{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mi([],{}):new Mi([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(s[Pn]=new Mi(t,e)),s}parseSegment(){const t=EM(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new L0(B0(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=EM(this.remaining);if(!e)return;this.capture(e);let s="";if(this.consumeOptional("=")){const o=EM(this.remaining);o&&(s=o,this.capture(s))}t[B0(e)]=B0(s)}parseQueryParam(t){const e=function pP(i){const t=i.match(fP);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let s="";if(this.consumeOptional("=")){const f=function mP(i){const t=i.match(gP);return t?t[0]:""}(this.remaining);f&&(s=f,this.capture(s))}const o=DM(e),l=DM(s);if(t.hasOwnProperty(o)){let f=t[o];Array.isArray(f)||(f=[f],t[o]=f),f.push(l)}else t[o]=l}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=EM(this.remaining),o=this.remaining[s.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let l;s.indexOf(":")>-1?(l=s.substr(0,s.indexOf(":")),this.capture(l),this.capture(":")):t&&(l=Pn);const f=this.parseChildren();e[l]=1===Object.keys(f).length?f[Pn]:new Mi([],f),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class AT{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=$E(t,this._root);return e?e.children.map(s=>s.value):[]}firstChild(t){const e=$E(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=W_(t,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return W_(t,this._root).map(e=>e.value)}}function $E(i,t){if(i===t.value)return t;for(const e of t.children){const s=$E(i,e);if(s)return s}return null}function W_(i,t){if(i===t.value)return[t];for(const e of t.children){const s=W_(i,e);if(s.length)return s.unshift(t),s}return[]}class Vf{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Gf(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class Sg extends AT{constructor(t,e){super(t),this.snapshot=e,KE(this,t)}toString(){return this.snapshot.toString()}}function SM(i,t){const e=function TT(i,t){const f=new V0([],{},{},"",{},Pn,t,null,i.root,-1,{});return new AM("",new Vf(f,[]))}(i,t),s=new Hr([new L0("",{})]),o=new Hr({}),l=new Hr({}),f=new Hr({}),_=new Hr(""),w=new Y_(s,o,f,_,l,Pn,t,e.root);return w.snapshot=e.root,new Sg(new Vf(w,[]),e)}class Y_{constructor(t,e,s,o,l,f,_,w){this.url=t,this.params=e,this.queryParams=s,this.fragment=o,this.data=l,this.outlet=f,this.component=_,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,At.U)(t=>z_(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,At.U)(t=>z_(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Kw(i,t="emptyOnly"){const e=i.pathFromRoot;let s=0;if("always"!==t)for(s=e.length-1;s>=1;){const o=e[s],l=e[s-1];if(o.routeConfig&&""===o.routeConfig.path)s--;else{if(l.component)break;s--}}return function ZE(i){return i.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(s))}class V0{constructor(t,e,s,o,l,f,_,w,E,T,F){this.url=t,this.params=e,this.queryParams=s,this.fragment=o,this.data=l,this.outlet=f,this.component=_,this.routeConfig=w,this._urlSegment=E,this._lastPathIndex=T,this._resolve=F}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=z_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=z_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class AM extends AT{constructor(t,e){super(e),this.url=t,KE(this,e)}toString(){return TM(this._root)}}function KE(i,t){t.value._routerState=i,t.children.forEach(e=>KE(i,e))}function TM(i){const t=i.children.length>0?` { ${i.children.map(TM).join(", ")} } `:"";return`${i.value}${t}`}function q_(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,Wu(t.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),t.fragment!==e.fragment&&i.fragment.next(e.fragment),Wu(t.params,e.params)||i.params.next(e.params),function _M(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!Wu(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.url.next(e.url),Wu(t.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function Qw(i,t){const e=Wu(i.params,t.params)&&function ET(i,t){return Bf(i,t)&&i.every((e,s)=>Wu(e.parameters,t[s].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||Qw(i.parent,t.parent))}function Xw(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const s=e.value;s._futureSnapshot=t.value;const o=function yP(i,t,e){return t.children.map(s=>{for(const o of e.children)if(i.shouldReuseRoute(s.value,o.value.snapshot))return Xw(i,s,o);return Xw(i,s)})}(i,t,e);return new Vf(s,o)}{if(i.shouldAttach(t.value)){const l=i.retrieve(t.value);if(null!==l){const f=l.route;return f.value._futureSnapshot=t.value,f.children=t.children.map(_=>Xw(i,_)),f}}const s=function IT(i){return new Y_(new Hr(i.url),new Hr(i.params),new Hr(i.queryParams),new Hr(i.fragment),new Hr(i.data),i.outlet,i.component,i)}(t.value),o=t.children.map(l=>Xw(i,l));return new Vf(s,o)}}function Jw(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function ex(i){return"object"==typeof i&&null!=i&&i.outlets}function RM(i,t,e,s,o){let l={};return s&&no(s,(f,_)=>{l[_]=Array.isArray(f)?f.map(w=>`${w}`):`${f}`}),new oh(e.root===i?t:tx(e.root,i,t),l,o)}function tx(i,t,e){const s={};return no(i.children,(o,l)=>{s[l]=o===t?e:tx(o,t,e)}),new Mi(i.segments,s)}class QE{constructor(t,e,s){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=s,t&&s.length>0&&Jw(s[0]))throw new Error("Root segment cannot have matrix parameters");const o=s.find(ex);if(o&&o!==VE(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class PM{constructor(t,e,s){this.segmentGroup=t,this.processChildren=e,this.index=s}}function nx(i,t,e){if(i||(i=new Mi([],{})),0===i.segments.length&&i.hasChildren())return G0(i,t,e);const s=function XE(i,t,e){let s=0,o=t;const l={match:!1,pathIndex:0,commandIndex:0};for(;o<i.segments.length;){if(s>=e.length)return l;const f=i.segments[o],_=e[s];if(ex(_))break;const w=`${_}`,E=s<e.length-1?e[s+1]:null;if(o>0&&void 0===w)break;if(w&&E&&"object"==typeof E&&void 0===E.outlets){if(!eS(w,E,f))return l;s+=2}else{if(!eS(w,{},f))return l;s++}o++}return{match:!0,pathIndex:o,commandIndex:s}}(i,t,e),o=e.slice(s.commandIndex);if(s.match&&s.pathIndex<i.segments.length){const l=new Mi(i.segments.slice(0,s.pathIndex),{});return l.children[Pn]=new Mi(i.segments.slice(s.pathIndex),i.children),G0(l,0,o)}return s.match&&0===o.length?new Mi(i.segments,{}):s.match&&!i.hasChildren()?kM(i,t,e):s.match?G0(i,0,o):kM(i,t,e)}function G0(i,t,e){if(0===e.length)return new Mi(i.segments,{});{const s=function PT(i){return ex(i[0])?i[0].outlets:{[Pn]:i}}(e),o={};return no(s,(l,f)=>{"string"==typeof l&&(l=[l]),null!==l&&(o[f]=nx(i.children[f],t,l))}),no(i.children,(l,f)=>{void 0===s[f]&&(o[f]=l)}),new Mi(i.segments,o)}}function kM(i,t,e){const s=i.segments.slice(0,t);let o=0;for(;o<e.length;){const l=e[o];if(ex(l)){const w=JE(l.outlets);return new Mi(s,w)}if(0===o&&Jw(e[0])){s.push(new L0(i.segments[t].path,FM(e[0]))),o++;continue}const f=ex(l)?l.outlets[Pn]:`${l}`,_=o<e.length-1?e[o+1]:null;f&&_&&Jw(_)?(s.push(new L0(f,FM(_))),o+=2):(s.push(new L0(f,{})),o++)}return new Mi(s,{})}function JE(i){const t={};return no(i,(e,s)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[s]=kM(new Mi([],{}),0,e))}),t}function FM(i){const t={};return no(i,(e,s)=>t[s]=`${e}`),t}function eS(i,t,e){return i==e.path&&Wu(t,e.parameters)}class LM{constructor(t,e,s,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=s,this.forwardEvent=o}activate(t){const e=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,s,t),q_(this.futureState.root),this.activateChildRoutes(e,s,t)}deactivateChildRoutes(t,e,s){const o=Gf(e);t.children.forEach(l=>{const f=l.value.outlet;this.deactivateRoutes(l,o[f],s),delete o[f]}),no(o,(l,f)=>{this.deactivateRouteAndItsChildren(l,s)})}deactivateRoutes(t,e,s){const o=t.value,l=e?e.value:null;if(o===l)if(o.component){const f=s.getContext(o.outlet);f&&this.deactivateChildRoutes(t,e,f.children)}else this.deactivateChildRoutes(t,e,s);else l&&this.deactivateRouteAndItsChildren(e,s)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const s=e.getContext(t.value.outlet),o=s&&t.value.component?s.children:e,l=Gf(t);for(const f of Object.keys(l))this.deactivateRouteAndItsChildren(l[f],o);if(s&&s.outlet){const f=s.outlet.detach(),_=s.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:f,route:t,contexts:_})}}deactivateRouteAndOutlet(t,e){const s=e.getContext(t.value.outlet),o=s&&t.value.component?s.children:e,l=Gf(t);for(const f of Object.keys(l))this.deactivateRouteAndItsChildren(l[f],o);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(t,e,s){const o=Gf(e);t.children.forEach(l=>{this.activateRoutes(l,o[l.value.outlet],s),this.forwardEvent(new mM(l.value.snapshot))}),t.children.length&&this.forwardEvent(new kE(t.value.snapshot))}activateRoutes(t,e,s){const o=t.value,l=e?e.value:null;if(q_(o),o===l)if(o.component){const f=s.getOrCreateContext(o.outlet);this.activateChildRoutes(t,e,f.children)}else this.activateChildRoutes(t,e,s);else if(o.component){const f=s.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const _=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),f.children.onOutletReAttached(_.contexts),f.attachRef=_.componentRef,f.route=_.route.value,f.outlet&&f.outlet.attach(_.componentRef,_.route.value),q_(_.route.value),this.activateChildRoutes(t,null,f.children)}else{const _=function Wc(i){for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(o.snapshot),w=_?_.module.componentFactoryResolver:null;f.attachRef=null,f.route=o,f.resolver=w,f.outlet&&f.outlet.activateWith(o,w),this.activateChildRoutes(t,null,f.children)}}else this.activateChildRoutes(t,null,s)}}class NM{constructor(t,e){this.routes=t,this.module=e}}function Ag(i){return"function"==typeof i}function Uf(i){return i instanceof oh}const ix=Symbol("INITIAL_VALUE");function $_(){return ki(i=>DE(i.map(t=>t.pipe((0,Fi.q)(1),Ji(ix)))).pipe(Tl((t,e)=>{let s=!1;return e.reduce((o,l,f)=>o!==ix?o:(l===ix&&(s=!0),s||!1!==l&&f!==e.length-1&&!Uf(l)?o:l),t)},ix),Jn(t=>t!==ix),(0,At.U)(t=>Uf(t)?t:!0===t),(0,Fi.q)(1)))}class nS{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new U0,this.attachRef=null}}class U0{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const s=this.getOrCreateContext(t);s.outlet=e,this.contexts.set(t,s)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new nS,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let rx=(()=>{class i{constructor(e,s,o,l,f){this.parentContexts=e,this.location=s,this.resolver=o,this.changeDetector=f,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=l||Pn,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,s){this.activated=e,this._activatedRoute=s,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const f=(s=s||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),_=this.parentContexts.getOrCreateContext(this.name).children,w=new iS(e,_,this.location.injector);this.activated=this.location.createComponent(f,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(U0),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},i.\u0275dir=u.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class iS{constructor(t,e,s){this.route=t,this.childContexts=e,this.parent=s}get(t,e){return t===Y_?this.route:t===U0?this.childContexts:this.parent.get(t,e)}}let Tg=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=u.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,s){1&e&&u._UZ(0,"router-outlet")},directives:[rx],encapsulation:2}),i})();function sx(i,t=""){for(let e=0;e<i.length;e++){const s=i[e];rS(s,BT(t,s))}}function rS(i,t){i.children&&sx(i.children,t)}function BT(i,t){return t?i||t.path?i&&!t.path?`${i}/`:!i&&t.path?t.path:`${i}/${t.path}`:"":i}function ox(i){const t=i.children&&i.children.map(ox),e=t?Object.assign(Object.assign({},i),{children:t}):Object.assign({},i);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Pn&&(e.component=Tg),e}function _l(i){return i.outlet||Pn}function sS(i,t){const e=i.filter(s=>_l(s)===t);return e.push(...i.filter(s=>_l(s)!==t)),e}const oS={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function BM(i,t,e){var s;if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?Object.assign({},oS):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(t.matcher||CT)(e,i,t);if(!l)return Object.assign({},oS);const f={};no(l.posParams,(w,E)=>{f[E]=w.path});const _=l.consumed.length>0?Object.assign(Object.assign({},f),l.consumed[l.consumed.length-1].parameters):f;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:_,positionalParamSegments:null!==(s=l.posParams)&&void 0!==s?s:{}}}function VM(i,t,e,s,o="corrected"){if(e.length>0&&function GT(i,t,e){return e.some(s=>GM(i,t,s)&&_l(s)!==Pn)}(i,e,s)){const f=new Mi(t,function VT(i,t,e,s){const o={};o[Pn]=s,s._sourceSegment=i,s._segmentIndexShift=t.length;for(const l of e)if(""===l.path&&_l(l)!==Pn){const f=new Mi([],{});f._sourceSegment=i,f._segmentIndexShift=t.length,o[_l(l)]=f}return o}(i,t,s,new Mi(e,i.children)));return f._sourceSegment=i,f._segmentIndexShift=t.length,{segmentGroup:f,slicedSegments:[]}}if(0===e.length&&function UT(i,t,e){return e.some(s=>GM(i,t,s))}(i,e,s)){const f=new Mi(i.segments,function aS(i,t,e,s,o,l){const f={};for(const _ of s)if(GM(i,e,_)&&!o[_l(_)]){const w=new Mi([],{});w._sourceSegment=i,w._segmentIndexShift="legacy"===l?i.segments.length:t.length,f[_l(_)]=w}return Object.assign(Object.assign({},o),f)}(i,t,e,s,i.children,o));return f._sourceSegment=i,f._segmentIndexShift=t.length,{segmentGroup:f,slicedSegments:e}}const l=new Mi(i.segments,i.children);return l._sourceSegment=i,l._segmentIndexShift=t.length,{segmentGroup:l,slicedSegments:e}}function GM(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function HT(i,t,e,s){return!!(_l(i)===s||s!==Pn&&GM(t,e,i))&&("**"===i.path||BM(t,i,e).matched)}function zT(i,t,e){return 0===t.length&&!i.children[e]}class ax{constructor(t){this.segmentGroup=t||null}}class jT{constructor(t){this.urlTree=t}}function lx(i){return new Ai.y(t=>t.error(new ax(i)))}function H0(i){return new Ai.y(t=>t.error(new jT(i)))}function WT(i){return new Ai.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${i}'`)))}class Ig{constructor(t,e,s,o,l){this.configLoader=e,this.urlSerializer=s,this.urlTree=o,this.config=l,this.allowRedirects=!0,this.ngModule=t.get(u.h0i)}apply(){const t=VM(this.urlTree.root,[],[],this.config).segmentGroup,e=new Mi(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Pn).pipe((0,At.U)(l=>this.createUrlTree(z0(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(sh(l=>{if(l instanceof jT)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof ax?this.noMatchError(l):l}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Pn).pipe((0,At.U)(o=>this.createUrlTree(z0(o),t.queryParams,t.fragment))).pipe(sh(o=>{throw o instanceof ax?this.noMatchError(o):o}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,s){const o=t.segments.length>0?new Mi([],{[Pn]:t}):t;return new oh(o,e,s)}expandSegmentGroup(t,e,s,o){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(t,e,s).pipe((0,At.U)(l=>new Mi([],l))):this.expandSegment(t,s,e,s.segments,o,!0)}expandChildren(t,e,s){const o=[];for(const l of Object.keys(s.children))"primary"===l?o.unshift(l):o.push(l);return(0,Xi.D)(o).pipe(U_(l=>{const f=s.children[l],_=sS(e,l);return this.expandSegmentGroup(t,_,f,l).pipe((0,At.U)(w=>({segment:w,outlet:l})))}),Tl((l,f)=>(l[f.outlet]=f.segment,l),{}),function hM(i,t){const e=arguments.length>=2;return s=>s.pipe(i?Jn((o,l)=>i(o,l,s)):Th.y,P0(1),e?pE(t):Vw(()=>new Bw))}())}expandSegment(t,e,s,o,l,f){return(0,Xi.D)(s).pipe(U_(_=>this.expandSegmentAgainstRoute(t,e,s,_,o,l,f).pipe(sh(E=>{if(E instanceof ax)return it(null);throw E}))),V_(_=>!!_),sh((_,w)=>{if(_ instanceof Bw||"EmptyError"===_.name){if(zT(e,o,l))return it(new Mi([],{}));throw new ax(e)}throw _}))}expandSegmentAgainstRoute(t,e,s,o,l,f,_){return HT(o,e,l,f)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(t,e,o,l,f):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,s,o,l,f):lx(e):lx(e)}expandSegmentAgainstRouteUsingRedirect(t,e,s,o,l,f){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,s,o,f):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,s,o,l,f)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,s,o){const l=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?H0(l):this.lineralizeSegments(s,l).pipe((0,Ts.z)(f=>{const _=new Mi(f,{});return this.expandSegment(t,_,e,f,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,s,o,l,f){const{matched:_,consumedSegments:w,lastChild:E,positionalParamSegments:T}=BM(e,o,l);if(!_)return lx(e);const F=this.applyRedirectCommands(w,o.redirectTo,T);return o.redirectTo.startsWith("/")?H0(F):this.lineralizeSegments(o,F).pipe((0,Ts.z)(G=>this.expandSegment(t,e,s,G.concat(l.slice(E)),f,!1)))}matchSegmentAgainstRoute(t,e,s,o,l){if("**"===s.path)return s.loadChildren?(s._loadedConfig?it(s._loadedConfig):this.configLoader.load(t.injector,s)).pipe((0,At.U)(G=>(s._loadedConfig=G,new Mi(o,{})))):it(new Mi(o,{}));const{matched:f,consumedSegments:_,lastChild:w}=BM(e,s,o);if(!f)return lx(e);const E=o.slice(w);return this.getChildConfig(t,s,o).pipe((0,Ts.z)(F=>{const G=F.module,H=F.routes,{segmentGroup:Y,slicedSegments:q}=VM(e,_,E,H),J=new Mi(Y.segments,Y.children);if(0===q.length&&J.hasChildren())return this.expandChildren(G,H,J).pipe((0,At.U)(He=>new Mi(_,He)));if(0===H.length&&0===q.length)return it(new Mi(_,{}));const re=_l(s)===l;return this.expandSegment(G,J,H,q,re?Pn:l,!0).pipe((0,At.U)(be=>new Mi(_.concat(be.segments),be.children)))}))}getChildConfig(t,e,s){return e.children?it(new NM(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?it(e._loadedConfig):this.runCanLoadGuards(t.injector,e,s).pipe((0,Ts.z)(o=>o?this.configLoader.load(t.injector,e).pipe((0,At.U)(l=>(e._loadedConfig=l,l))):function YT(i){return new Ai.y(t=>t.error(NE(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`)))}(e))):it(new NM([],t))}runCanLoadGuards(t,e,s){const o=e.canLoad;if(!o||0===o.length)return it(!0);const l=o.map(f=>{const _=t.get(f);let w;if(function FT(i){return i&&Ag(i.canLoad)}(_))w=_.canLoad(e,s);else{if(!Ag(_))throw new Error("Invalid CanLoad guard");w=_(e,s)}return jc(w)});return it(l).pipe($_(),(0,_i.b)(f=>{if(!Uf(f))return;const _=NE(`Redirecting to "${this.urlSerializer.serialize(f)}"`);throw _.url=f,_}),(0,At.U)(f=>!0===f))}lineralizeSegments(t,e){let s=[],o=e.root;for(;;){if(s=s.concat(o.segments),0===o.numberOfChildren)return it(s);if(o.numberOfChildren>1||!o.children[Pn])return WT(t.redirectTo);o=o.children[Pn]}}applyRedirectCommands(t,e,s){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,s)}applyRedirectCreatreUrlTree(t,e,s,o){const l=this.createSegmentGroup(t,e.root,s,o);return new oh(l,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const s={};return no(t,(o,l)=>{if("string"==typeof o&&o.startsWith(":")){const _=o.substring(1);s[l]=e[_]}else s[l]=o}),s}createSegmentGroup(t,e,s,o){const l=this.createSegments(t,e.segments,s,o);let f={};return no(e.children,(_,w)=>{f[w]=this.createSegmentGroup(t,_,s,o)}),new Mi(l,f)}createSegments(t,e,s,o){return e.map(l=>l.path.startsWith(":")?this.findPosParam(t,l,o):this.findOrReturn(l,s))}findPosParam(t,e,s){const o=s[e.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return o}findOrReturn(t,e){let s=0;for(const o of e){if(o.path===t.path)return e.splice(s),o;s++}return t}}function z0(i){const t={};for(const s of Object.keys(i.children)){const l=z0(i.children[s]);(l.segments.length>0||l.hasChildren())&&(t[s]=l)}return function cS(i){if(1===i.numberOfChildren&&i.children[Pn]){const t=i.children[Pn];return new Mi(i.segments.concat(t.segments),t.children)}return i}(new Mi(i.segments,t))}class uS{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Z_{constructor(t,e){this.component=t,this.route=e}}function HM(i,t,e){const s=i._root;return cx(s,t?t._root:null,e,[s.value])}function j0(i,t,e){const s=function bP(i){if(!i)return null;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(s?s.module.injector:e).get(i)}function cx(i,t,e,s,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=Gf(t);return i.children.forEach(f=>{(function wP(i,t,e,s,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=i.value,f=t?t.value:null,_=e?e.getContext(i.value.outlet):null;if(f&&l.routeConfig===f.routeConfig){const w=function xP(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!Bf(i.url,t.url);case"pathParamsOrQueryParamsChange":return!Bf(i.url,t.url)||!Wu(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qw(i,t)||!Wu(i.queryParams,t.queryParams);default:return!Qw(i,t)}}(f,l,l.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new uS(s)):(l.data=f.data,l._resolvedData=f._resolvedData),cx(i,t,l.component?_?_.children:null:e,s,o),w&&_&&_.outlet&&_.outlet.isActivated&&o.canDeactivateChecks.push(new Z_(_.outlet.component,f))}else f&&ux(t,_,o),o.canActivateChecks.push(new uS(s)),cx(i,null,l.component?_?_.children:null:e,s,o)})(f,l[f.value.outlet],e,s.concat([f.value]),o),delete l[f.value.outlet]}),no(l,(f,_)=>ux(f,e.getContext(_),o)),o}function ux(i,t,e){const s=Gf(i),o=i.value;no(s,(l,f)=>{ux(l,o.component?t?t.children.getContext(f):null:t,e)}),e.canDeactivateChecks.push(new Z_(o.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,o))}class pS{}function zM(i){return new Ai.y(t=>t.error(i))}class XT{constructor(t,e,s,o,l,f){this.rootComponentType=t,this.config=e,this.urlTree=s,this.url=o,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=f}recognize(){const t=VM(this.urlTree.root,[],[],this.config.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Pn);if(null===e)return null;const s=new V0([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pn,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Vf(s,e),l=new AM(this.url,o);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(t){const e=t.value,s=Kw(e,this.paramsInheritanceStrategy);e.params=Object.freeze(s.params),e.data=Object.freeze(s.data),t.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(t,e,s){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,s)}processChildren(t,e){const s=[];for(const l of Object.keys(e.children)){const f=e.children[l],_=sS(t,l),w=this.processSegmentGroup(_,f,l);if(null===w)return null;s.push(...w)}const o=jM(s);return function gS(i){i.sort((t,e)=>t.value.outlet===Pn?-1:e.value.outlet===Pn?1:t.value.outlet.localeCompare(e.value.outlet))}(o),o}processSegment(t,e,s,o){for(const l of t){const f=this.processSegmentAgainstRoute(l,e,s,o);if(null!==f)return f}return zT(e,s,o)?[]:null}processSegmentAgainstRoute(t,e,s,o){if(t.redirectTo||!HT(t,e,s,o))return null;let l,f=[],_=[];if("**"===t.path){const H=s.length>0?VE(s).parameters:{};l=new V0(s,H,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,vS(t),_l(t),t.component,t,mS(e),_S(e)+s.length,yS(t))}else{const H=BM(e,t,s);if(!H.matched)return null;f=H.consumedSegments,_=s.slice(H.lastChild),l=new V0(f,H.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,vS(t),_l(t),t.component,t,mS(e),_S(e)+f.length,yS(t))}const w=function dx(i){return i.children?i.children:i.loadChildren?i._loadedConfig.routes:[]}(t),{segmentGroup:E,slicedSegments:T}=VM(e,f,_,w.filter(H=>void 0===H.redirectTo),this.relativeLinkResolution);if(0===T.length&&E.hasChildren()){const H=this.processChildren(w,E);return null===H?null:[new Vf(l,H)]}if(0===w.length&&0===T.length)return[new Vf(l,[])];const F=_l(t)===o,G=this.processSegment(w,E,T,F?Pn:o);return null===G?null:[new Vf(l,G)]}}function DP(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function jM(i){const t=[],e=new Set;for(const s of i){if(!DP(s)){t.push(s);continue}const o=t.find(l=>s.value.routeConfig===l.value.routeConfig);void 0!==o?(o.children.push(...s.children),e.add(o)):t.push(s)}for(const s of e){const o=jM(s.children);t.push(new Vf(s.value,o))}return t.filter(s=>!e.has(s))}function mS(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function _S(i){let t=i,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function vS(i){return i.data||{}}function yS(i){return i.resolve||{}}function bS(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function YM(i){return ki(t=>{const e=i(t);return e?(0,Xi.D)(e).pipe((0,At.U)(()=>t)):it(t)})}class SP extends class s1{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const wS=new u.OlP("ROUTES");class o1{constructor(t,e,s,o){this.injector=t,this.compiler=e,this.onLoadStartListener=s,this.onLoadEndListener=o}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const o=this.loadModuleFactory(e.loadChildren).pipe((0,At.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(e);const f=l.create(t);return new NM(BE(f.injector.get(wS,void 0,u.XFs.Self|u.XFs.Optional)).map(ox),f)}),sh(l=>{throw e._loader$=void 0,l}));return e._loader$=new EE(o,()=>new Ft.x).pipe(dM()),e._loader$}loadModuleFactory(t){return jc(t()).pipe((0,Ts.z)(e=>e instanceof u.YKP?it(e):(0,Xi.D)(this.compiler.compileModuleAsync(e))))}}class TP{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function a1(i){throw i}function IP(i,t,e){return t.parse("/")}function l1(i,t){return it(null)}const RP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},PP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let d=(()=>{class i{constructor(e,s,o,l,f,_,w){this.rootComponentType=e,this.urlSerializer=s,this.rootContexts=o,this.location=l,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ft.x,this.errorHandler=a1,this.malformedUriErrorHandler=IP,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:l1,afterPreactivation:l1},this.urlHandlingStrategy=new TP,this.routeReuseStrategy=new SP,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=f.get(u.h0i),this.console=f.get(u.c2e);const F=f.get(u.R0b);this.isNgZoneEnabled=F instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function Ww(){return new oh(new Mi([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new o1(f,_,G=>this.triggerEvent(new gM(G)),G=>this.triggerEvent(new PE(G))),this.routerState=SM(this.currentUrlTree,this.rootComponentType),this.transitions=new Hr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const s=this.events;return e.pipe(Jn(o=>0!==o.id),(0,At.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ki(o=>{let l=!1,f=!1;return it(o).pipe((0,_i.b)(_=>{this.currentNavigation={id:_.id,initialUrl:_.currentRawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ki(_=>{const w=this.browserUrlTree.toString(),E=!this.navigated||_.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return g(_.source)&&(this.browserUrlTree=_.extractedUrl),it(_).pipe(ki(F=>{const G=this.transitions.getValue();return s.next(new fM(F.id,this.serializeUrl(F.extractedUrl),F.source,F.restoredState)),G!==this.transitions.getValue()?ih.E:Promise.resolve(F)}),function UM(i,t,e,s){return ki(o=>function lS(i,t,e,s,o){return new Ig(i,t,e,s,o).apply()}(i,t,e,o.extractedUrl,s).pipe((0,At.U)(l=>Object.assign(Object.assign({},o),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,_i.b)(F=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:F.urlAfterRedirects})}),function EP(i,t,e,s,o){return(0,Ts.z)(l=>function QT(i,t,e,s,o="emptyOnly",l="legacy"){try{const f=new XT(i,t,e,s,o,l).recognize();return null===f?zM(new pS):it(f)}catch(f){return zM(f)}}(i,t,l.urlAfterRedirects,e(l.urlAfterRedirects),s,o).pipe((0,At.U)(f=>Object.assign(Object.assign({},l),{targetSnapshot:f}))))}(this.rootComponentType,this.config,F=>this.serializeUrl(F),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,_i.b)(F=>{if("eager"===this.urlUpdateStrategy){if(!F.extras.skipLocationChange){const H=this.urlHandlingStrategy.merge(F.urlAfterRedirects,F.rawUrl);this.setBrowserUrl(H,F)}this.browserUrlTree=F.urlAfterRedirects}const G=new AE(F.id,this.serializeUrl(F.extractedUrl),this.serializeUrl(F.urlAfterRedirects),F.targetSnapshot);s.next(G)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:G,extractedUrl:H,source:Y,restoredState:q,extras:J}=_,re=new fM(G,this.serializeUrl(H),Y,q);s.next(re);const Me=SM(H,this.rootComponentType).snapshot;return it(Object.assign(Object.assign({},_),{targetSnapshot:Me,urlAfterRedirects:H,extras:Object.assign(Object.assign({},J),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_.rawUrl,_.resolve(null),ih.E}),YM(_=>{const{targetSnapshot:w,id:E,extractedUrl:T,rawUrl:F,extras:{skipLocationChange:G,replaceUrl:H}}=_;return this.hooks.beforePreactivation(w,{navigationId:E,appliedUrlTree:T,rawUrlTree:F,skipLocationChange:!!G,replaceUrl:!!H})}),(0,_i.b)(_=>{const w=new pM(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),(0,At.U)(_=>Object.assign(Object.assign({},_),{guards:HM(_.targetSnapshot,_.currentSnapshot,this.rootContexts)})),function CP(i,t){return(0,Ts.z)(e=>{const{targetSnapshot:s,currentSnapshot:o,guards:{canActivateChecks:l,canDeactivateChecks:f}}=e;return 0===f.length&&0===l.length?it(Object.assign(Object.assign({},e),{guardsResult:!0})):function MP(i,t,e,s){return(0,Xi.D)(i).pipe((0,Ts.z)(o=>function fS(i,t,e,s,o){const l=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return l&&0!==l.length?it(l.map(_=>{const w=j0(_,t,o);let E;if(function NT(i){return i&&Ag(i.canDeactivate)}(w))E=jc(w.canDeactivate(i,t,e,s));else{if(!Ag(w))throw new Error("Invalid CanDeactivate guard");E=jc(w(i,t,e,s))}return E.pipe(V_())})).pipe($_()):it(!0)}(o.component,o.route,e,t,s)),V_(o=>!0!==o,!0))}(f,s,o,i).pipe((0,Ts.z)(_=>_&&function kT(i){return"boolean"==typeof i}(_)?function hS(i,t,e,s){return(0,Xi.D)(t).pipe(U_(o=>cu(function $T(i,t){return null!==i&&t&&t(new OE(i)),it(!0)}(o.route.parent,s),function qT(i,t){return null!==i&&t&&t(new xT(i)),it(!0)}(o.route,s),function KT(i,t,e){const s=t[t.length-1],l=t.slice(0,t.length-1).reverse().map(f=>function dS(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(f)).filter(f=>null!==f).map(f=>rh(()=>it(f.guards.map(w=>{const E=j0(w,f.node,e);let T;if(function tS(i){return i&&Ag(i.canActivateChild)}(E))T=jc(E.canActivateChild(s,i));else{if(!Ag(E))throw new Error("Invalid CanActivateChild guard");T=jc(E(s,i))}return T.pipe(V_())})).pipe($_())));return it(l).pipe($_())}(i,o.path,e),function ZT(i,t,e){const s=t.routeConfig?t.routeConfig.canActivate:null;if(!s||0===s.length)return it(!0);const o=s.map(l=>rh(()=>{const f=j0(l,t,e);let _;if(function LT(i){return i&&Ag(i.canActivate)}(f))_=jc(f.canActivate(t,i));else{if(!Ag(f))throw new Error("Invalid CanActivate guard");_=jc(f(t,i))}return _.pipe(V_())}));return it(o).pipe($_())}(i,o.route,e))),V_(o=>!0!==o,!0))}(s,l,i,t):it(_)),(0,At.U)(_=>Object.assign(Object.assign({},e),{guardsResult:_})))})}(this.ngModule.injector,_=>this.triggerEvent(_)),(0,_i.b)(_=>{if(Uf(_.guardsResult)){const E=NE(`Redirecting to "${this.serializeUrl(_.guardsResult)}"`);throw E.url=_.guardsResult,E}const w=new TE(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.triggerEvent(w)}),Jn(_=>!!_.guardsResult||(this.restoreHistory(_),this.cancelNavigationTransition(_,""),!1)),YM(_=>{if(_.guards.canActivateChecks.length)return it(_).pipe((0,_i.b)(w=>{const E=new IE(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(E)}),ki(w=>{let E=!1;return it(w).pipe(function JT(i,t){return(0,Ts.z)(e=>{const{targetSnapshot:s,guards:{canActivateChecks:o}}=e;if(!o.length)return it(e);let l=0;return(0,Xi.D)(o).pipe(U_(f=>function e1(i,t,e,s){return function t1(i,t,e,s){const o=bS(i);if(0===o.length)return it({});const l={};return(0,Xi.D)(o).pipe((0,Ts.z)(f=>function n1(i,t,e,s){const o=j0(i,t,s);return jc(o.resolve?o.resolve(t,e):o(t,e))}(i[f],t,e,s).pipe((0,_i.b)(_=>{l[f]=_}))),P0(1),(0,Ts.z)(()=>bS(l).length===o.length?it(l):ih.E))}(i._resolve,i,t,s).pipe((0,At.U)(l=>(i._resolvedData=l,i.data=Object.assign(Object.assign({},i.data),Kw(i,e).resolve),null)))}(f.route,s,i,t)),(0,_i.b)(()=>l++),P0(1),(0,Ts.z)(f=>l===o.length?it(e):ih.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,_i.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,_i.b)(w=>{const E=new RE(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(E)}))}),YM(_=>{const{targetSnapshot:w,id:E,extractedUrl:T,rawUrl:F,extras:{skipLocationChange:G,replaceUrl:H}}=_;return this.hooks.afterPreactivation(w,{navigationId:E,appliedUrlTree:T,rawUrlTree:F,skipLocationChange:!!G,replaceUrl:!!H})}),(0,At.U)(_=>{const w=function vP(i,t,e){const s=Xw(i,t._root,e?e._root:void 0);return new Sg(s,t)}(this.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return Object.assign(Object.assign({},_),{targetRouterState:w})}),(0,_i.b)(_=>{this.currentUrlTree=_.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl),this.routerState=_.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_),this.browserUrlTree=_.urlAfterRedirects)}),((i,t,e)=>(0,At.U)(s=>(new LM(t,s.targetRouterState,s.currentRouterState,e).activate(i),s)))(this.rootContexts,this.routeReuseStrategy,_=>this.triggerEvent(_)),(0,_i.b)({next(){l=!0},complete(){l=!0}}),O0(()=>{var _;l||f||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(_=this.currentNavigation)||void 0===_?void 0:_.id)===o.id&&(this.currentNavigation=null)}),sh(_=>{if(f=!0,function F0(i){return i&&i[LE]}(_)){const w=Uf(_.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const E=new SE(o.id,this.serializeUrl(o.extractedUrl),_.message);s.next(E),w?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(_.url,this.rawUrlTree),F={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||g(o.source)};this.scheduleNavigation(T,"imperative",null,F,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new wT(o.id,this.serializeUrl(o.extractedUrl),_);s.next(w);try{o.resolve(this.errorHandler(_))}catch(E){o.reject(E)}}return ih.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const s="popstate"===e.type?"popstate":"hashchange";"popstate"===s&&setTimeout(()=>{var o;const l={replaceUrl:!0},f=(null===(o=e.state)||void 0===o?void 0:o.navigationId)?e.state:null;if(f){const w=Object.assign({},f);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(l.state=w)}const _=this.parseUrl(e.url);this.scheduleNavigation(_,s,f,l)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){sx(e),this.config=e.map(ox),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,s={}){const{relativeTo:o,queryParams:l,fragment:f,queryParamsHandling:_,preserveFragment:w}=s,E=o||this.routerState.root,T=w?this.currentUrlTree.fragment:f;let F=null;switch(_){case"merge":F=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":F=this.currentUrlTree.queryParams;break;default:F=l||null}return null!==F&&(F=this.removeEmptyProps(F)),function IM(i,t,e,s,o){if(0===e.length)return RM(t.root,t.root,t,s,o);const l=function ml(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new QE(!0,0,i);let t=0,e=!1;const s=i.reduce((o,l,f)=>{if("object"==typeof l&&null!=l){if(l.outlets){const _={};return no(l.outlets,(w,E)=>{_[E]="string"==typeof w?w.split("/"):w}),[...o,{outlets:_}]}if(l.segmentPath)return[...o,l.segmentPath]}return"string"!=typeof l?[...o,l]:0===f?(l.split("/").forEach((_,w)=>{0==w&&"."===_||(0==w&&""===_?e=!0:".."===_?t++:""!=_&&o.push(_))}),o):[...o,l]},[]);return new QE(e,t,s)}(e);if(l.toRoot())return RM(t.root,new Mi([],{}),t,s,o);const f=function OM(i,t,e){if(i.isAbsolute)return new PM(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const l=e.snapshot._urlSegment;return new PM(l,l===t.root,0)}const s=Jw(i.commands[0])?0:1;return function RT(i,t,e){let s=i,o=t,l=e;for(;l>o;){if(l-=o,s=s.parent,!s)throw new Error("Invalid number of '../'");o=s.segments.length}return new PM(s,!1,o-l)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+s,i.numberOfDoubleDots)}(l,t,i),_=f.processChildren?G0(f.segmentGroup,f.index,l.commands):nx(f.segmentGroup,f.index,l.commands);return RM(f.segmentGroup,_,t,s,o)}(E,this.currentUrlTree,e,F,null!=T?T:null)}navigateByUrl(e,s={skipLocationChange:!1}){const o=Uf(e)?e:this.parseUrl(e),l=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,s)}navigate(e,s={skipLocationChange:!1}){return function h(i){for(let t=0;t<i.length;t++){const e=i[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,s),s)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let s;try{s=this.urlSerializer.parse(e)}catch(o){s=this.malformedUriErrorHandler(o,this.urlSerializer,e)}return s}isActive(e,s){let o;if(o=!0===s?Object.assign({},RP):!1===s?Object.assign({},PP):s,Uf(e))return bM(this.currentUrlTree,e,o);const l=this.parseUrl(e);return bM(this.currentUrlTree,l,o)}removeEmptyProps(e){return Object.keys(e).reduce((s,o)=>{const l=e[o];return null!=l&&(s[o]=l),s},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new k0(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,s,o,l,f){var _,w,E;if(this.disposed)return Promise.resolve(!1);const T=this.transitions.value,F=g(s)&&T&&!g(T.source),G=T.rawUrl.toString()===e.toString(),H=T.id===(null===(_=this.currentNavigation)||void 0===_?void 0:_.id);if(F&&G&&H)return Promise.resolve(!0);let q,J,re;f?(q=f.resolve,J=f.reject,re=f.promise):re=new Promise((He,Ve)=>{q=He,J=Ve});const Me=++this.navigationId;let be;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),be=o&&o.\u0275routerPageId?o.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(w=this.browserPageId)&&void 0!==w?w:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):be=0,this.setTransition({id:Me,targetPageId:be,source:s,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:l,resolve:q,reject:J,promise:re,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),re.catch(He=>Promise.reject(He))}setBrowserUrl(e,s){const o=this.urlSerializer.serialize(e),l=Object.assign(Object.assign({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(o)||s.extras.replaceUrl?this.location.replaceState(o,"",l):this.location.go(o,"",l)}restoreHistory(e,s=!1){var o,l;if("computed"===this.canceledNavigationResolution){const f=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===f?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===f&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(f)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,s){const o=new SE(e.id,this.serializeUrl(e.extractedUrl),s);this.triggerEvent(o),e.resolve(!1)}generateNgRouterState(e,s){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:s}:{navigationId:e}}}return i.\u0275fac=function(e){u.$Z()},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();function g(i){return"imperative"!==i}let y=(()=>{class i{constructor(e,s,o,l,f){this.router=e,this.route=s,this.tabIndexAttribute=o,this.renderer=l,this.el=f,this.commands=null,this.onChanges=new Ft.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const s=this.renderer,o=this.el.nativeElement;null!==e?s.setAttribute(o,"tabindex",e):s.removeAttribute(o,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:M(this.skipLocationChange),replaceUrl:M(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:M(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(d),u.Y36(Y_),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},i.\u0275dir=u.lG2({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,s){1&e&&u.NdJ("click",function(){return s.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),i})(),x=(()=>{class i{constructor(e,s,o){this.router=e,this.route=s,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new Ft.x,this.subscription=e.events.subscribe(l=>{l instanceof k0&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,s,o,l,f){if(0!==e||s||o||l||f||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const _={skipLocationChange:M(this.skipLocationChange),replaceUrl:M(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,_),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:M(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(d),u.Y36(Y_),u.Y36(Le))},i.\u0275dir=u.lG2({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,s){1&e&&u.NdJ("click",function(l){return s.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&e&&u.uIk("target",s.target)("href",s.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),i})();function M(i){return""===i||!!i}let I=(()=>{class i{constructor(e,s,o,l,f,_){this.router=e,this.element=s,this.renderer=o,this.cdr=l,this.link=f,this.linkWithHref=_,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new u.vpe,this.routerEventsSubscription=e.events.subscribe(w=>{w instanceof k0&&this.update()})}ngAfterContentInit(){it(this.links.changes,this.linksWithHrefs.changes,it(null)).pipe((0,dd.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var e;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();const s=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(o=>!!o).map(o=>o.onChanges);this.linkInputChangesSubscription=(0,Xi.D)(s).pipe((0,dd.J)()).subscribe(o=>{this.isActive!==this.isLinkActive(this.router)(o)&&this.update()})}set routerLinkActive(e){const s=Array.isArray(e)?e:e.split(" ");this.classes=s.filter(o=>!!o)}ngOnChanges(e){this.update()}ngOnDestroy(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(s=>{e?this.renderer.addClass(this.element.nativeElement,s):this.renderer.removeClass(this.element.nativeElement,s)}),this.isActiveChange.emit(e))})}isLinkActive(e){const s=function P(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&e.isActive(o.urlTree,s)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(d),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(y,8),u.Y36(x,8))},i.\u0275dir=u.lG2({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(e,s,o){if(1&e&&(u.Suo(o,y,5),u.Suo(o,x,5)),2&e){let l;u.iGM(l=u.CRH())&&(s.links=l),u.iGM(l=u.CRH())&&(s.linksWithHrefs=l)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[u.TTD]}),i})();class N{}class ${preload(t,e){return it(null)}}let ne=(()=>{class i{constructor(e,s,o,l){this.router=e,this.injector=o,this.preloadingStrategy=l,this.loader=new o1(o,s,w=>e.triggerEvent(new gM(w)),w=>e.triggerEvent(new PE(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Jn(e=>e instanceof k0),U_(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(u.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,s){const o=[];for(const l of s)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const f=l._loadedConfig;o.push(this.processRoutes(f.module,f.routes))}else l.loadChildren&&!l.canLoad?o.push(this.preloadConfig(e,l)):l.children&&o.push(this.processRoutes(e,l.children));return(0,Xi.D)(o).pipe((0,dd.J)(),(0,At.U)(l=>{}))}preloadConfig(e,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?it(s._loadedConfig):this.loader.load(e.injector,s)).pipe((0,Ts.z)(l=>(s._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(d),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(N))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),ge=(()=>{class i{constructor(e,s,o={}){this.router=e,this.viewportScroller=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof fM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof k0&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof FE&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,s){this.router.triggerEvent(new FE(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(e){u.$Z()},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const nt=new u.OlP("ROUTER_CONFIGURATION"),Dt=new u.OlP("ROUTER_FORROOT_GUARD"),Ht=[We,{provide:zE,useClass:CM},{provide:d,useFactory:function Rg(i,t,e,s,o,l,f={},_,w){const E=new d(null,i,t,e,s,o,BE(l));return _&&(E.urlHandlingStrategy=_),w&&(E.routeReuseStrategy=w),function qM(i,t){i.errorHandler&&(t.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(t.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(t.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(t.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(t.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(t.canceledNavigationResolution=i.canceledNavigationResolution)}(f,E),f.enableTracing&&E.events.subscribe(T=>{var F,G;null===(F=console.group)||void 0===F||F.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(G=console.groupEnd)||void 0===G||G.call(console)}),E},deps:[zE,U0,We,u.zs3,u.Sil,wS,nt,[class AP{},new u.FiY],[class r1{},new u.FiY]]},U0,{provide:Y_,useFactory:function $M(i){return i.routerState.root},deps:[d]},ne,$,class j{preload(t,e){return e().pipe(sh(()=>it(null)))}},{provide:nt,useValue:{enableTracing:!1}}];function sn(){return new u.PXZ("Router",d)}let ht=(()=>{class i{constructor(e,s){}static forRoot(e,s){return{ngModule:i,providers:[Ht,Ra(e),{provide:Dt,useFactory:zi,deps:[[d,new u.FiY,new u.tp0]]},{provide:nt,useValue:s||{}},{provide:Le,useFactory:vi,deps:[we,[new u.tBr(ut),new u.FiY],nt]},{provide:ge,useFactory:Dn,deps:[d,vb,nt]},{provide:N,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:$},{provide:u.PXZ,multi:!0,useFactory:sn},[W0,{provide:u.ip1,multi:!0,useFactory:ZM,deps:[W0]},{provide:hx,useFactory:KM,deps:[W0]},{provide:u.tb,multi:!0,useExisting:hx}]]}}static forChild(e){return{ngModule:i,providers:[Ra(e)]}}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(Dt,8),u.LFG(d,8))},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})();function Dn(i,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new ge(i,t,e)}function vi(i,t,e={}){return e.useHash?new Et(i,t):new wt(i,t)}function zi(i){return"guarded"}function Ra(i){return[{provide:u.deG,multi:!0,useValue:i},{provide:wS,multi:!0,useValue:i}]}let W0=(()=>{class i{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ft.x}appInitializer(){return this.injector.get(ue,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const o=new Promise(_=>s=_),l=this.injector.get(d),f=this.injector.get(nt);return"disabled"===f.initialNavigation?(l.setUpLocationChangeListener(),s(!0)):"enabled"===f.initialNavigation||"enabledBlocking"===f.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?it(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),l.initialNavigation()):s(!0),o})}bootstrapListener(e){const s=this.injector.get(nt),o=this.injector.get(ne),l=this.injector.get(ge),f=this.injector.get(d),_=this.injector.get(u.z2F);e===_.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&f.initialNavigation(),o.setUpPreloading(),l.init(),f.resetRootComponentType(_.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(u.zs3))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();function ZM(i){return i.appInitializer.bind(i)}function KM(i){return i.bootstrapListener.bind(i)}const hx=new u.OlP("Router Initializer"),OP=new u.OlP("angularfire2.analytics.analyticsCollectionEnabled"),kP=new u.OlP("angularfire2.analytics.appVersion"),FP=new u.OlP("angularfire2.analytics.appName"),LP=new u.OlP("angularfire2.analytics.debugMode"),NP=new u.OlP("angularfire2.analytics.config"),CS="dataLayer";let JM=(()=>{class i{constructor(e,s,o,l,f,_,w,E){if(this.analyticsInitialized=new Promise(()=>{}),Ki(w)){window[CS]=window[CS]||[];const F=(...Y)=>"config"===Y[0]&&"firebase"===Y[2].origin&&(this.measurementId=Y[1],!0),G=Y=>{window.gtag=(...q)=>{Y&&Y(...q),"event"===q[0]&&q[2].send_to===this.measurementId&&(l&&(q[2].app_name=l),o&&(q[2].app_version=o)),f&&"undefined"!=typeof console&&console.info(...q),function(...J){window[CS].push(arguments)}(...q)}};window[CS].some(F)?(this.analyticsInitialized=Promise.resolve(),G()):this.analyticsInitialized=new Promise(Y=>{G((...q)=>{F(...q)&&Y()})}),_&&this.updateConfig(_),f&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const T=it(void 0).pipe((0,Ti.Q)(new Qi.HU(E).outsideAngular),ki(()=>Ki(w)?E.runOutsideAngular(()=>Z.e(225).then(Z.bind(Z,8225))):ih.E),(0,At.U)(()=>(0,Qi.sI)("analytics","AngularFireAnalytics",e,()=>{const F=e.analytics();return!1===s&&F.setAnalyticsCollectionEnabled(!1),F},[e,s,_,f])),B_({bufferSize:1,refCount:!1}));return(0,Qi.pX)(this,T,E)}updateConfig(e){return(0,Q.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},e),{update:!0}))})}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(Qi.Ot),u.LFG(OP,8),u.LFG(kP,8),u.LFG(FP,8),u.LFG(LP,8),u.LFG(NP,8),u.LFG(u.Lbi),u.LFG(u.R0b))},i.\u0275prov=u.Yz7({factory:function(){return new i(u.LFG(Qi.Ot),u.LFG(OP,8),u.LFG(kP,8),u.LFG(FP,8),u.LFG(LP,8),u.LFG(NP,8),u.LFG(u.Lbi),u.LFG(u.R0b))},token:i,providedIn:"any"}),i})(),VP=(()=>{class i{constructor(e,s,o,l){if(this.disposables=[],Qo(s))this.initialized=Promise.resolve();else{let f;this.initialized=l.runOutsideAngular(()=>new Promise(_=>f=_)),this.disposables=[o.authState.subscribe(_=>{e.setUserId(null==_?void 0:_.uid),f()}),o.credential.subscribe(_=>{if(_){const w=_.user.isAnonymous?"anonymous":_.additionalUserInfo.providerId;_.additionalUserInfo.isNewUser&&e.logEvent("sign_up",{method:w}),e.logEvent("login",{method:w})}})]}}ngOnDestroy(){this.disposables.forEach(e=>e.unsubscribe())}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(JM),u.LFG(u.Lbi),u.LFG(uT),u.LFG(u.R0b))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const GP="firebase_screen_id",c1="outlet",eD="screen_class",UP="screen_name";let q3=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const u1={},$3=i=>{const t=[i[eD],i[c1]].join("#");if(u1.hasOwnProperty(t))return u1[t];{const e=q3++;return u1[t]=e,e}};let Z3=(()=>{class i{constructor(e,s,o,l,f,_,w){if(!s||!Ki(f))return this;_.runOutsideAngular(()=>{const E=s.events.pipe(Jn(T=>T instanceof mM));this.disposable=E.pipe(ki(T=>{var F;const H=(null===(F=s.parseUrl(s.url.replace(/(?:\().+(?:\))/g,be=>be.replace("://",":///"))).root.children[T.snapshot.outlet])||void 0===F?void 0:F.toString())||"",Y=s.routerState.root.children.map(be=>be).find(be=>be.outlet===T.snapshot.outlet);if(!Y)return it(null);let q=Y;for(;q.firstChild;)q=q.firstChild;const J=q.pathFromRoot.map(be=>{var He;return null===(He=be.routeConfig)||void 0===He?void 0:He.path}).filter(be=>be).join("/")||"/",re={[UP]:J,page_path:`/${H}`,firebase_event_origin:"auto",firebase_screen:J,[c1]:T.snapshot.outlet};o&&(re.page_title=o.getTitle());let Me=Y.component;if(Me){if(Me===Tg){let be=T.snapshot;for(;be.firstChild;)be=be.firstChild;Me=be.component}}else Me=T.snapshot.component;if("string"==typeof Me)return it(Object.assign(Object.assign({},re),{[eD]:Me}));if(Me){const be=l.resolveComponentFactory(Me);return it(Object.assign(Object.assign({},re),{[eD]:be.selector}))}return it(null)}),Jn(T=>T),(0,At.U)(T=>Object.assign({firebase_screen_class:T[eD],[GP]:$3(T)},T)),function ME(i,t,e,s){return(0,ci.e)((o,l)=>{let f;t&&"function"!=typeof t?({duration:e,element:f,connector:s}=t):f=t;const _=new Map,w=G=>{_.forEach(G),G(l)},E=G=>w(H=>H.error(G)),T=new gT(l,G=>{try{const H=i(G);let Y=_.get(H);if(!Y){_.set(H,Y=s?s():new Ft.x);const q=function F(G,H){const Y=new Ai.y(q=>{T.activeGroups++;const J=H.subscribe(q);return()=>{J.unsubscribe(),0==--T.activeGroups&&T.teardownAttempted&&T.unsubscribe()}});return Y.key=G,Y}(H,Y);if(l.next(q),e){const J=new Ci.Q(Y,()=>{Y.complete(),null==J||J.unsubscribe()},void 0,void 0,()=>_.delete(H));T.add((0,th.Xf)(e(q)).subscribe(J))}}Y.next(f?f(G):G)}catch(H){E(H)}},()=>w(G=>G.complete()),E,()=>_.clear());o.subscribe(T)})}(T=>T[c1]),(0,Ts.z)(T=>T.pipe(Ao((F,G)=>JSON.stringify(F)===JSON.stringify(G)),Ji(void 0),Ah(),(0,At.U)(([F,G])=>F?Object.assign({firebase_previous_class:F[eD],firebase_previous_screen:F[UP],firebase_previous_id:F[GP]},G):G),ki(F=>(0,Q.mG)(this,void 0,void 0,function*(){return w&&(yield w.initialized),yield e.logEvent("screen_view",F)}))))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(JM),u.LFG(d,8),u.LFG(za,8),u.LFG(u._Vd),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(VP,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),K3=(()=>{class i{constructor(e,s,o){e.app.then(()=>{})}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(JM),u.LFG(Z3,8),u.LFG(VP,8))},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[JM]}),i})();function Pg(i){return!!i&&(i instanceof Ai.y||(0,Ia.m)(i.lift)&&(0,Ia.m)(i.subscribe))}function d1(...i){const t=(0,Al.jO)(i),{args:e,keys:s}=T0(i),o=new Ai.y(l=>{const{length:f}=e;if(!f)return void l.complete();const _=new Array(f);let w=f,E=f;for(let T=0;T<f;T++){let F=!1;(0,th.Xf)(e[T]).subscribe(new Ci.Q(l,G=>{F||(F=!0,E--),_[T]=G},()=>w--,void 0,()=>{(!w||!F)&&(E||l.next(s?R0(s,_):_),l.complete())}))}});return t?o.pipe(cM(t)):o}class tD{}let HP=(()=>{class i extends tD{getTranslation(e){return it({})}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class h1{}let zP=(()=>{class i{handle(e){return e.key}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();function nD(i,t){if(i===t)return!0;if(null===i||null===t)return!1;if(i!=i&&t!=t)return!0;let o,l,f,e=typeof i;if(e==typeof t&&"object"==e){if(!Array.isArray(i)){if(Array.isArray(t))return!1;for(l in f=Object.create(null),i){if(!nD(i[l],t[l]))return!1;f[l]=!0}for(l in t)if(!(l in f)&&void 0!==t[l])return!1;return!0}if(!Array.isArray(t))return!1;if((o=i.length)==t.length){for(l=0;l<o;l++)if(!nD(i[l],t[l]))return!1;return!0}}return!1}function Yc(i){return null!=i}function f1(i){return i&&"object"==typeof i&&!Array.isArray(i)}function jP(i,t){let e=Object.assign({},i);return f1(i)&&f1(t)&&Object.keys(t).forEach(s=>{f1(t[s])?s in i?e[s]=jP(i[s],t[s]):Object.assign(e,{[s]:t[s]}):Object.assign(e,{[s]:t[s]})}),e}class MS{}let WP=(()=>{class i extends MS{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(e,s){let o;return o="string"==typeof e?this.interpolateString(e,s):"function"==typeof e?this.interpolateFunction(e,s):e,o}getValue(e,s){let o="string"==typeof s?s.split("."):[s];s="";do{s+=o.shift(),!Yc(e)||!Yc(e[s])||"object"!=typeof e[s]&&o.length?o.length?s+=".":e=void 0:(e=e[s],s="")}while(o.length);return e}interpolateFunction(e,s){return e(s)}interpolateString(e,s){return s?e.replace(this.templateMatcher,(o,l)=>{let f=this.getValue(s,l);return Yc(f)?f:o}):e}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class DS{}let YP=(()=>{class i extends DS{compile(e,s){return e}compileTranslations(e,s){return e}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class qP{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new u.vpe,this.onLangChange=new u.vpe,this.onDefaultLangChange=new u.vpe}}const p1=new u.OlP("USE_STORE"),g1=new u.OlP("USE_DEFAULT_LANG"),m1=new u.OlP("DEFAULT_LANGUAGE"),_1=new u.OlP("USE_EXTEND");let iD=(()=>{class i{constructor(e,s,o,l,f,_=!0,w=!1,E=!1,T){this.store=e,this.currentLoader=s,this.compiler=o,this.parser=l,this.missingTranslationHandler=f,this.useDefaultLang=_,this.isolate=w,this.extend=E,this.pending=!1,this._onTranslationChange=new u.vpe,this._onLangChange=new u.vpe,this._onDefaultLangChange=new u.vpe,this._langs=[],this._translations={},this._translationRequests={},T&&this.setDefaultLang(T)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(e){this.isolate?this._defaultLang=e:this.store.defaultLang=e}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(e){this.isolate?this._currentLang=e:this.store.currentLang=e}get langs(){return this.isolate?this._langs:this.store.langs}set langs(e){this.isolate?this._langs=e:this.store.langs=e}get translations(){return this.isolate?this._translations:this.store.translations}set translations(e){this.isolate?this._translations=e:this.store.translations=e}setDefaultLang(e){if(e===this.defaultLang)return;let s=this.retrieveTranslations(e);void 0!==s?(null==this.defaultLang&&(this.defaultLang=e),s.pipe((0,Fi.q)(1)).subscribe(o=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(e===this.currentLang)return it(this.translations[e]);let s=this.retrieveTranslations(e);return void 0!==s?(this.currentLang||(this.currentLang=e),s.pipe((0,Fi.q)(1)).subscribe(o=>{this.changeLang(e)}),s):(this.changeLang(e),it(this.translations[e]))}retrieveTranslations(e){let s;return(void 0===this.translations[e]||this.extend)&&(this._translationRequests[e]=this._translationRequests[e]||this.getTranslation(e),s=this._translationRequests[e]),s}getTranslation(e){this.pending=!0;const s=this.currentLoader.getTranslation(e).pipe(B_(1),(0,Fi.q)(1));return this.loadingTranslations=s.pipe((0,At.U)(o=>this.compiler.compileTranslations(o,e)),B_(1),(0,Fi.q)(1)),this.loadingTranslations.subscribe({next:o=>{this.translations[e]=this.extend&&this.translations[e]?Object.assign(Object.assign({},o),this.translations[e]):o,this.updateLangs(),this.pending=!1},error:o=>{this.pending=!1}}),s}setTranslation(e,s,o=!1){s=this.compiler.compileTranslations(s,e),this.translations[e]=(o||this.extend)&&this.translations[e]?jP(this.translations[e],s):s,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){e.forEach(s=>{-1===this.langs.indexOf(s)&&this.langs.push(s)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(e,s,o){let l;if(s instanceof Array){let f={},_=!1;for(let w of s)f[w]=this.getParsedResult(e,w,o),Pg(f[w])&&(_=!0);return _?d1(s.map(E=>Pg(f[E])?f[E]:it(f[E]))).pipe((0,At.U)(E=>{let T={};return E.forEach((F,G)=>{T[s[G]]=F}),T})):f}if(e&&(l=this.parser.interpolate(this.parser.getValue(e,s),o)),void 0===l&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(l=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],s),o)),void 0===l){let f={key:s,translateService:this};void 0!==o&&(f.interpolateParams=o),l=this.missingTranslationHandler.handle(f)}return void 0!==l?l:s}get(e,s){if(!Yc(e)||!e.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(U_(o=>Pg(o=this.getParsedResult(o,e,s))?o:it(o)));{let o=this.getParsedResult(this.translations[this.currentLang],e,s);return Pg(o)?o:it(o)}}getStreamOnTranslationChange(e,s){if(!Yc(e)||!e.length)throw new Error('Parameter "key" required');return cu(rh(()=>this.get(e,s)),this.onTranslationChange.pipe(ki(o=>{const l=this.getParsedResult(o.translations,e,s);return"function"==typeof l.subscribe?l:it(l)})))}stream(e,s){if(!Yc(e)||!e.length)throw new Error('Parameter "key" required');return cu(rh(()=>this.get(e,s)),this.onLangChange.pipe(ki(o=>{const l=this.getParsedResult(o.translations,e,s);return Pg(l)?l:it(l)})))}instant(e,s){if(!Yc(e)||!e.length)throw new Error('Parameter "key" required');let o=this.getParsedResult(this.translations[this.currentLang],e,s);if(Pg(o)){if(e instanceof Array){let l={};return e.forEach((f,_)=>{l[e[_]]=e[_]}),l}return e}return o}set(e,s,o=this.currentLang){this.translations[o][e]=this.compiler.compile(s,o),this.updateLangs(),this.onTranslationChange.emit({lang:o,translations:this.translations[o]})}changeLang(e){this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),null==this.defaultLang&&this.changeDefaultLang(e)}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.getTranslation(e)}resetLang(e){this._translationRequests[e]=void 0,this.translations[e]=void 0}getBrowserLang(){if("undefined"==typeof window||void 0===window.navigator)return;let e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,void 0!==e?(-1!==e.indexOf("-")&&(e=e.split("-")[0]),-1!==e.indexOf("_")&&(e=e.split("_")[0]),e):void 0}getBrowserCultureLang(){if("undefined"==typeof window||void 0===window.navigator)return;let e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,e}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(qP),u.LFG(tD),u.LFG(DS),u.LFG(MS),u.LFG(h1),u.LFG(g1),u.LFG(p1),u.LFG(_1),u.LFG(m1))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),ES=(()=>{class i{constructor(e,s){this.translate=e,this._ref=s,this.value=""}updateValue(e,s,o){let l=f=>{this.value=void 0!==f?f:e,this.lastKey=e,this._ref.markForCheck()};if(o){let f=this.translate.getParsedResult(o,e,s);Pg(f.subscribe)?f.subscribe(l):l(f)}this.translate.get(e,s).subscribe(l)}transform(e,...s){if(!e||!e.length)return e;if(nD(e,this.lastKey)&&nD(s,this.lastParams))return this.value;let o;if(Yc(s[0])&&s.length)if("string"==typeof s[0]&&s[0].length){let l=s[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{o=JSON.parse(l)}catch(f){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${s[0]}`)}}else"object"==typeof s[0]&&!Array.isArray(s[0])&&(o=s[0]);return this.lastKey=e,this.lastParams=s,this.updateValue(e,o),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(l=>{this.lastKey&&l.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(e,o,l.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(l=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,o,l.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,o))})),this.value}_dispose(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(iD,16),u.Y36(u.sBO,16))},i.\u0275pipe=u.Yjl({name:"translate",type:i,pure:!1}),i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),Q3=(()=>{class i{static forRoot(e={}){return{ngModule:i,providers:[e.loader||{provide:tD,useClass:HP},e.compiler||{provide:DS,useClass:YP},e.parser||{provide:MS,useClass:WP},e.missingTranslationHandler||{provide:h1,useClass:zP},qP,{provide:p1,useValue:e.isolate},{provide:g1,useValue:e.useDefaultLang},{provide:_1,useValue:e.extend},{provide:m1,useValue:e.defaultLanguage},iD]}}static forChild(e={}){return{ngModule:i,providers:[e.loader||{provide:tD,useClass:HP},e.compiler||{provide:DS,useClass:YP},e.parser||{provide:MS,useClass:WP},e.missingTranslationHandler||{provide:h1,useClass:zP},{provide:p1,useValue:e.isolate},{provide:g1,useValue:e.useDefaultLang},{provide:_1,useValue:e.extend},{provide:m1,useValue:e.defaultLanguage},iD]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})();class $P{}class ZP{}class Og{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const s=e.indexOf(":");if(s>0){const o=e.slice(0,s),l=o.toLowerCase(),f=e.slice(s+1).trim();this.maybeSetNormalizedName(o,l),this.headers.has(l)?this.headers.get(l).push(f):this.headers.set(l,[f])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let s=t[e];const o=e.toLowerCase();"string"==typeof s&&(s=[s]),s.length>0&&(this.headers.set(o,s),this.maybeSetNormalizedName(e,o))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Og?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Og;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Og?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let s=t.value;if("string"==typeof s&&(s=[s]),0===s.length)return;this.maybeSetNormalizedName(t.name,e);const o=("a"===t.op?this.headers.get(e):void 0)||[];o.push(...s),this.headers.set(e,o);break;case"d":const l=t.value;if(l){let f=this.headers.get(e);if(!f)return;f=f.filter(_=>-1===l.indexOf(_)),0===f.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,f)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class X3{encodeKey(t){return KP(t)}encodeValue(t){return KP(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const eB=/%(\d[a-f0-9])/gi,tB={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function KP(i){return encodeURIComponent(i).replace(eB,(t,e)=>{var s;return null!==(s=tB[e])&&void 0!==s?s:t})}function QP(i){return`${i}`}class K_{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new X3,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function J3(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(o=>{const l=o.indexOf("="),[f,_]=-1==l?[t.decodeKey(o),""]:[t.decodeKey(o.slice(0,l)),t.decodeValue(o.slice(l+1))],w=e.get(f)||[];w.push(_),e.set(f,w)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const s=t.fromObject[e];this.map.set(e,Array.isArray(s)?s:[s])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(s=>{const o=t[s];Array.isArray(o)?o.forEach(l=>{e.push({param:s,value:l,op:"a"})}):e.push({param:s,value:o,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(s=>e+"="+this.encoder.encodeValue(s)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new K_({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(QP(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let s=this.map.get(t.param)||[];const o=s.indexOf(QP(t.value));-1!==o&&s.splice(o,1),s.length>0?this.map.set(t.param,s):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class nB{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function XP(i){return"undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer}function JP(i){return"undefined"!=typeof Blob&&i instanceof Blob}function eO(i){return"undefined"!=typeof FormData&&i instanceof FormData}class rD{constructor(t,e,s,o){let l;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function iB(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==s?s:null,l=o):l=s,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new Og),this.context||(this.context=new nB),this.params){const f=this.params.toString();if(0===f.length)this.urlWithParams=e;else{const _=e.indexOf("?");this.urlWithParams=e+(-1===_?"?":_<e.length-1?"&":"")+f}}else this.params=new K_,this.urlWithParams=e}serializeBody(){return null===this.body?null:XP(this.body)||JP(this.body)||eO(this.body)||function rB(i){return"undefined"!=typeof URLSearchParams&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof K_?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||eO(this.body)?null:JP(this.body)?this.body.type||null:XP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof K_?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const s=t.method||this.method,o=t.url||this.url,l=t.responseType||this.responseType,f=void 0!==t.body?t.body:this.body,_=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,w=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let E=t.headers||this.headers,T=t.params||this.params;const F=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(E=Object.keys(t.setHeaders).reduce((G,H)=>G.set(H,t.setHeaders[H]),E)),t.setParams&&(T=Object.keys(t.setParams).reduce((G,H)=>G.set(H,t.setParams[H]),T)),new rD(s,o,f,{params:T,headers:E,context:F,reportProgress:w,responseType:l,withCredentials:_})}}var io=(()=>((io=io||{})[io.Sent=0]="Sent",io[io.UploadProgress=1]="UploadProgress",io[io.ResponseHeader=2]="ResponseHeader",io[io.DownloadProgress=3]="DownloadProgress",io[io.Response=4]="Response",io[io.User=5]="User",io))();class v1{constructor(t,e=200,s="OK"){this.headers=t.headers||new Og,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||s,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class y1 extends v1{constructor(t={}){super(t),this.type=io.ResponseHeader}clone(t={}){return new y1({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class SS extends v1{constructor(t={}){super(t),this.type=io.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new SS({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class tO extends v1{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function b1(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let AS=(()=>{class i{constructor(e){this.handler=e}request(e,s,o={}){let l;if(e instanceof rD)l=e;else{let w,E;w=o.headers instanceof Og?o.headers:new Og(o.headers),o.params&&(E=o.params instanceof K_?o.params:new K_({fromObject:o.params})),l=new rD(e,s,void 0!==o.body?o.body:null,{headers:w,context:o.context,params:E,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const f=it(l).pipe(U_(w=>this.handler.handle(w)));if(e instanceof rD||"events"===o.observe)return f;const _=f.pipe(Jn(w=>w instanceof SS));switch(o.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return _.pipe((0,At.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return _.pipe((0,At.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return _.pipe((0,At.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return _.pipe((0,At.U)(w=>w.body))}case"response":return _;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(e,s={}){return this.request("DELETE",e,s)}get(e,s={}){return this.request("GET",e,s)}head(e,s={}){return this.request("HEAD",e,s)}jsonp(e,s){return this.request("JSONP",e,{params:(new K_).append(s,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,s={}){return this.request("OPTIONS",e,s)}patch(e,s,o={}){return this.request("PATCH",e,b1(o,s))}post(e,s,o={}){return this.request("POST",e,b1(o,s))}put(e,s,o={}){return this.request("PUT",e,b1(o,s))}}return i.\u0275fac=function(e){return new(e||i)(u.LFG($P))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class nO{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const iO=new u.OlP("HTTP_INTERCEPTORS");let sB=(()=>{class i{intercept(e,s){return s.handle(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const oB=/^\)\]\}',?\n/;let rO=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ai.y(s=>{const o=this.xhrFactory.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((H,Y)=>o.setRequestHeader(H,Y.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const H=e.detectContentTypeHeader();null!==H&&o.setRequestHeader("Content-Type",H)}if(e.responseType){const H=e.responseType.toLowerCase();o.responseType="json"!==H?H:"text"}const l=e.serializeBody();let f=null;const _=()=>{if(null!==f)return f;const H=1223===o.status?204:o.status,Y=o.statusText||"OK",q=new Og(o.getAllResponseHeaders()),J=function aB(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(o)||e.url;return f=new y1({headers:q,status:H,statusText:Y,url:J}),f},w=()=>{let{headers:H,status:Y,statusText:q,url:J}=_(),re=null;204!==Y&&(re=void 0===o.response?o.responseText:o.response),0===Y&&(Y=re?200:0);let Me=Y>=200&&Y<300;if("json"===e.responseType&&"string"==typeof re){const be=re;re=re.replace(oB,"");try{re=""!==re?JSON.parse(re):null}catch(He){re=be,Me&&(Me=!1,re={error:He,text:re})}}Me?(s.next(new SS({body:re,headers:H,status:Y,statusText:q,url:J||void 0})),s.complete()):s.error(new tO({error:re,headers:H,status:Y,statusText:q,url:J||void 0}))},E=H=>{const{url:Y}=_(),q=new tO({error:H,status:o.status||0,statusText:o.statusText||"Unknown Error",url:Y||void 0});s.error(q)};let T=!1;const F=H=>{T||(s.next(_()),T=!0);let Y={type:io.DownloadProgress,loaded:H.loaded};H.lengthComputable&&(Y.total=H.total),"text"===e.responseType&&!!o.responseText&&(Y.partialText=o.responseText),s.next(Y)},G=H=>{let Y={type:io.UploadProgress,loaded:H.loaded};H.lengthComputable&&(Y.total=H.total),s.next(Y)};return o.addEventListener("load",w),o.addEventListener("error",E),o.addEventListener("timeout",E),o.addEventListener("abort",E),e.reportProgress&&(o.addEventListener("progress",F),null!==l&&o.upload&&o.upload.addEventListener("progress",G)),o.send(l),s.next({type:io.Sent}),()=>{o.removeEventListener("error",E),o.removeEventListener("abort",E),o.removeEventListener("load",w),o.removeEventListener("timeout",E),e.reportProgress&&(o.removeEventListener("progress",F),null!==l&&o.upload&&o.upload.removeEventListener("progress",G)),o.readyState!==o.DONE&&o.abort()}})}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(vr))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const w1=new u.OlP("XSRF_COOKIE_NAME"),x1=new u.OlP("XSRF_HEADER_NAME");class sO{}let lB=(()=>{class i{constructor(e,s,o){this.doc=e,this.platform=s,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=nd(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(fe),u.LFG(u.Lbi),u.LFG(w1))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),C1=(()=>{class i{constructor(e,s){this.tokenService=e,this.headerName=s}intercept(e,s){const o=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||o.startsWith("http://")||o.startsWith("https://"))return s.handle(e);const l=this.tokenService.getToken();return null!==l&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,l)})),s.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(sO),u.LFG(x1))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),cB=(()=>{class i{constructor(e,s){this.backend=e,this.injector=s,this.chain=null}handle(e){if(null===this.chain){const s=this.injector.get(iO,[]);this.chain=s.reduceRight((o,l)=>new nO(o,l),this.backend)}return this.chain.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(ZP),u.LFG(u.zs3))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),uB=(()=>{class i{static disable(){return{ngModule:i,providers:[{provide:C1,useClass:sB}]}}static withOptions(e={}){return{ngModule:i,providers:[e.cookieName?{provide:w1,useValue:e.cookieName}:[],e.headerName?{provide:x1,useValue:e.headerName}:[]]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[C1,{provide:iO,useExisting:C1,multi:!0},{provide:sO,useClass:lB},{provide:w1,useValue:"XSRF-TOKEN"},{provide:x1,useValue:"X-XSRF-TOKEN"}]}),i})(),dB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[AS,{provide:$P,useClass:cB},rO,{provide:ZP,useExisting:rO}],imports:[[uB.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),i})();class oO{constructor(t,e="/assets/i18n/",s=".json"){this.http=t,this.prefix=e,this.suffix=s}getTranslation(t){return this.http.get(`${this.prefix}${t}${this.suffix}`)}}class aO{}const kg="*";function vl(i,t){return{type:7,name:i,definitions:t,options:{}}}function os(i,t=null){return{type:4,styles:t,timings:i}}function lO(i,t=null){return{type:2,steps:i,options:t}}function zn(i){return{type:6,styles:i,offset:null}}function ro(i,t,e){return{type:0,name:i,styles:t,options:e}}function jr(i,t,e=null){return{type:1,expr:i,animation:t,options:e}}function fB(i=null){return{type:9,options:i}}function pB(i,t,e=null){return{type:11,selector:i,animation:t,options:e}}function cO(i){Promise.resolve(null).then(i)}class sD{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){cO(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}class uO{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,s=0,o=0;const l=this.players.length;0==l?cO(()=>this._onFinish()):this.players.forEach(f=>{f.onDone(()=>{++e==l&&this._onFinish()}),f.onDestroy(()=>{++s==l&&this._onDestroy()}),f.onStart(()=>{++o==l&&this._onStart()})}),this.totalTime=this.players.reduce((f,_)=>Math.max(f,_.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(s=>{const o=s.totalTime?Math.min(1,e/s.totalTime):1;s.setPosition(o)})}getPosition(){const t=this.players.reduce((e,s)=>null===e||s.totalTime>e.totalTime?s:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}const gB=vl("revealAnimation",[jr(":enter",[zn({overflow:"hidden"}),zn({height:0}),os("700ms",zn({height:"100%"}))]),jr(":leave",[zn({overflow:"hidden"}),zn({height:"100%"}),os("700ms",zn({height:0}))])]),Fg=["light-theme","dark-theme"];class E1{constructor(t,e,s){this.name=t,this.code=e,this.imageUrl=s}}var S1="./assets/images/flags";const oD=[new E1("English","en",`${S1}/gb.svg`),new E1("Nederlands","nl",`${S1}/nl.svg`),new E1("\u7b80\u4f53\u4e2d\u6587","zh",`${S1}/cn.svg`)],hO="language";let fx=(()=>{class i{constructor(e){this.update=new Hr(""),this.translate=e,this.supportedLanguages=oD,this.translate.addLangs(["en","nl","zh"]),this.translate.setDefaultLang("en"),this.translate.use(this.GetSelectedLanguage().code)}setLanguage(e){this.translate.use(e)}get(e){return(0,Q.mG)(this,void 0,void 0,function*(){return yield new Promise(o=>{this.translate.get(e).subscribe(l=>{o(l)})})})}getSettings(e){return(0,Q.mG)(this,void 0,void 0,function*(){return{displayKey:e,search:!0,height:"auto",placeholder:this.get("dropdown.select"),customComparator:()=>{},limitTo:0,moreText:yield this.get("dropdown.more"),noResultsFound:yield this.get("dropdown.noResults"),searchPlaceholder:yield this.get("dropdown.search"),searchOnKey:e}})}GetSelectedLanguage(){let e=oD.find(o=>o.code==this.translate.currentLang);null==e&&(e=oD.find(o=>o.code==localStorage.getItem(hO)));var s=navigator.language.substring(0,2);if(null==e&&(e=oD.find(o=>o.code==s)),null==e&&(e=oD.find(o=>"en"==o.code)),null==e)throw Error("no language set");return e}saveSelectedLanguage(e){localStorage.setItem(hO,e),this.update.next("")}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(iD))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),TS=(()=>{class i{constructor(e){this.translationService=e,this.update=new Hr(""),this.addButton=new Hr("");let s=localStorage.getItem("theme");this.setTheme(s)}get(){return localStorage.getItem("theme")}switch(){let e=localStorage.getItem("theme"),s=Fg.find(o=>o!=e);return e=this.setTheme(s),e}removeTheme(){Fg.forEach(e=>{document.body.classList.remove(e)})}setTheme(e){let s;switch(this.removeTheme(),Fg.includes(e)?(document.body.classList.add(e),localStorage.setItem("theme",e),s=e):(document.body.classList.add(Fg[0]),localStorage.setItem("theme",Fg[0]),s=Fg[0]),s){case Fg[0]:document.documentElement.style.setProperty("--my-theme-primary-color","#fafafa"),document.documentElement.style.setProperty("--my-theme-color","#03a9f4"),document.documentElement.style.setProperty("--theme-back-color","#ffffff"),document.documentElement.style.setProperty("--theme-contrast-color","#000000"),this.addButton.next("add-light");break;case Fg[1]:document.documentElement.style.setProperty("--my-theme-primary-color","#303030"),document.documentElement.style.setProperty("--my-theme-color","#e91e63"),document.documentElement.style.setProperty("--theme-back-color","#4e4e4e"),document.documentElement.style.setProperty("--theme-contrast-color","#ffffff"),this.addButton.next("add-dark")}return this.update.next(s),s}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(fx))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const EB=new u.OlP("cdk-dir-doc",{providedIn:"root",factory:function SB(){return(0,u.f3M)(fe)}}),AB=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let A1,qc=(()=>{class i{constructor(e){if(this.value="ltr",this.change=new u.vpe,e){const o=e.documentElement?e.documentElement.dir:null;this.value=function TB(i){const t=(null==i?void 0:i.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?AB.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||o||"ltr")}}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(EB,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Y0=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})();try{A1="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(i){A1=!1}let aD,IS,$0,T1,Is=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Ki(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!A1)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(u.Lbi))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),q0=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})();function Lg(i){return function IB(){if(null==aD&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>aD=!0}))}finally{aD=aD||!1}return aD}()?i:!!i.capture}function gO(){if(null==$0){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return $0=!1,$0;if("scrollBehavior"in document.documentElement.style)$0=!0;else{const i=Element.prototype.scrollTo;$0=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return $0}function Z0(){if("object"!=typeof document||!document)return 0;if(null==IS){const i=document.createElement("div"),t=i.style;i.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),s=e.style;s.width="2px",s.height="1px",i.appendChild(e),document.body.appendChild(i),IS=0,0===i.scrollLeft&&(i.scrollLeft=1,IS=0===i.scrollLeft?1:2),i.remove()}return IS}function I1(i){if(function RB(){if(null==T1){const i="undefined"!=typeof document?document.head:null;T1=!(!i||!i.createShadowRoot&&!i.attachShadow)}return T1}()){const t=i.getRootNode?i.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function R1(){let i="undefined"!=typeof document&&document?document.activeElement:null;for(;i&&i.shadowRoot;){const t=i.shadowRoot.activeElement;if(t===i)break;i=t}return i}function ah(i){return i.composedPath?i.composedPath()[0]:i.target}function P1(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function K0(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function gx(i,t=Sl.z){return(0,ci.e)((e,s)=>{let o=null,l=null,f=null;const _=()=>{if(o){o.unsubscribe(),o=null;const E=l;l=null,s.next(E)}};function w(){const E=f+i,T=t.now();if(T<E)return o=this.schedule(void 0,E-T),void s.add(o);_()}e.subscribe(new Ci.Q(s,E=>{l=E,f=t.now(),o||(o=t.schedule(w,i),s.add(o))},()=>{_(),s.complete()},void 0,()=>{l=o=null}))})}function yO(i){return Jn((t,e)=>i<=e)}var N1=Z(5032);function Kn(i){return(0,ci.e)((t,e)=>{(0,th.Xf)(i).subscribe(new Ci.Q(e,()=>e.complete(),N1.Z)),!e.closed&&t.subscribe(e)})}function ri(i){return null!=i&&"false"!=`${i}`}function Q0(i,t=0){return function zB(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):t}function PS(i){return Array.isArray(i)?i:[i]}function so(i){return null==i?"":"string"==typeof i?i:`${i}px`}function oo(i){return i instanceof u.SBq?i.nativeElement:i}let bO=(()=>{class i{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),jB=(()=>{class i{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,s)=>this._cleanupObserver(s))}observe(e){const s=oo(e);return new Ai.y(o=>{const f=this._observeElement(s).subscribe(o);return()=>{f.unsubscribe(),this._unobserveElement(s)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const s=new Ft.x,o=this._mutationObserverFactory.create(l=>s.next(l));o&&o.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:o,stream:s,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:s,stream:o}=this._observedElements.get(e);s&&s.disconnect(),o.complete(),this._observedElements.delete(e)}}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(bO))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),wO=(()=>{class i{constructor(e,s,o){this._contentObserver=e,this._elementRef=s,this._ngZone=o,this.event=new u.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=ri(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Q0(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(gx(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(jB),u.Y36(u.SBq),u.Y36(u.R0b))},i.\u0275dir=u.lG2({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),i})(),B1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[bO]}),i})();class $B extends class qB{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Ft.x,this._typeaheadSubscription=zr.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new Ft.x,this.change=new Ft.x,t instanceof u.n_E&&t.changes.subscribe(e=>{if(this._activeItem){const o=e.toArray().indexOf(this._activeItem);o>-1&&o!==this._activeItemIndex&&(this._activeItemIndex=o)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,_i.b)(e=>this._pressedLetters.push(e)),gx(t),Jn(()=>this._pressedLetters.length>0),(0,At.U)(()=>this._pressedLetters.join(""))).subscribe(e=>{const s=this._getItemsArray();for(let o=1;o<s.length+1;o++){const l=(this._activeItemIndex+o)%s.length,f=s[l];if(!this._skipPredicateFn(f)&&0===f.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(l);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,o=["altKey","ctrlKey","metaKey","shiftKey"].every(l=>!t[l]||this._allowedModifierKeys.indexOf(l)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&o){this.setNextItemActive();break}return;case 38:if(this._vertical&&o){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&o){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&o){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&o){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&o){this.setLastItemActive();break}return;default:return void((o||K0(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),s="number"==typeof t?t:e.indexOf(t),o=e[s];this._activeItem=null==o?null:o,this._activeItemIndex=s}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let s=1;s<=e.length;s++){const o=(this._activeItemIndex+t*s+e.length)%e.length;if(!this._skipPredicateFn(e[o]))return void this.setActiveItem(o)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const s=this._getItemsArray();if(s[t]){for(;this._skipPredicateFn(s[t]);)if(!s[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof u.n_E?this._items.toArray():this._items}}{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}let V1=(()=>{class i{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function KB(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const s=function ZB(i){try{return i.frameElement}catch(t){return null}}(function rV(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(e));if(s&&(-1===DO(s)||!this.isVisible(s)))return!1;let o=e.nodeName.toLowerCase(),l=DO(e);return e.hasAttribute("contenteditable")?-1!==l:!("iframe"===o||"object"===o||this._platform.WEBKIT&&this._platform.IOS&&!function nV(i){let t=i.nodeName.toLowerCase(),e="input"===t&&i.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===o?!!e.hasAttribute("controls")&&-1!==l:"video"===o?-1!==l&&(null!==l||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,s){return function iV(i){return!function XB(i){return function eV(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function QB(i){let t=i.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(i)||function JB(i){return function tV(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||MO(i))}(e)&&!this.isDisabled(e)&&((null==s?void 0:s.ignoreVisibility)||this.isVisible(e))}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(Is))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function MO(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let t=i.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function DO(i){if(!MO(i))return null;const t=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class sV{constructor(t,e,s,o,l=!1){this._element=t,this._checker=e,this._ngZone=s,this._document=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,l||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const s=this._getFirstTabbableElement(e);return null==s||s.focus(t),!!s}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let s=0;s<e.length;s++){const o=e[s].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[s]):null;if(o)return o}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let s=e.length-1;s>=0;s--){const o=e[s].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[s]):null;if(o)return o}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe((0,Fi.q)(1)).subscribe(t)}}let EO=(()=>{class i{constructor(e,s,o){this._checker=e,this._ngZone=s,this._document=o}create(e,s=!1){return new sV(e,this._checker,this._ngZone,this._document,s)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(V1),u.LFG(u.R0b),u.LFG(fe))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function G1(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function U1(i){const t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const oV=new u.OlP("cdk-input-modality-detector-options"),aV={ignoreKeys:[18,17,224,91,16]},mx=Lg({passive:!0,capture:!0});let lV=(()=>{class i{constructor(e,s,o,l){this._platform=e,this._mostRecentTarget=null,this._modality=new Hr(null),this._lastTouchMs=0,this._onKeydown=f=>{var _,w;(null===(w=null===(_=this._options)||void 0===_?void 0:_.ignoreKeys)||void 0===w?void 0:w.some(E=>E===f.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=ah(f))},this._onMousedown=f=>{Date.now()-this._lastTouchMs<650||(this._modality.next(G1(f)?"keyboard":"mouse"),this._mostRecentTarget=ah(f))},this._onTouchstart=f=>{U1(f)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ah(f))},this._options=Object.assign(Object.assign({},aV),l),this.modalityDetected=this._modality.pipe(yO(1)),this.modalityChanged=this.modalityDetected.pipe(Ao()),e.isBrowser&&s.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,mx),o.addEventListener("mousedown",this._onMousedown,mx),o.addEventListener("touchstart",this._onTouchstart,mx)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,mx),document.removeEventListener("mousedown",this._onMousedown,mx),document.removeEventListener("touchstart",this._onTouchstart,mx))}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(Is),u.LFG(u.R0b),u.LFG(fe),u.LFG(oV,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const cV=new u.OlP("liveAnnouncerElement",{providedIn:"root",factory:function uV(){return null}}),dV=new u.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let H1=(()=>{class i{constructor(e,s,o,l){this._ngZone=s,this._defaultOptions=l,this._document=o,this._liveElement=e||this._createLiveElement()}announce(e,...s){const o=this._defaultOptions;let l,f;return 1===s.length&&"number"==typeof s[0]?f=s[0]:[l,f]=s,this.clear(),clearTimeout(this._previousTimeout),l||(l=o&&o.politeness?o.politeness:"polite"),null==f&&o&&(f=o.duration),this._liveElement.setAttribute("aria-live",l),this._ngZone.runOutsideAngular(()=>new Promise(_=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,_(),"number"==typeof f&&(this._previousTimeout=setTimeout(()=>this.clear(),f))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var e;clearTimeout(this._previousTimeout),null===(e=this._liveElement)||void 0===e||e.remove(),this._liveElement=null}_createLiveElement(){const e="cdk-live-announcer-element",s=this._document.getElementsByClassName(e),o=this._document.createElement("div");for(let l=0;l<s.length;l++)s[l].remove();return o.classList.add(e),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),this._document.body.appendChild(o),o}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(cV,8),u.LFG(u.R0b),u.LFG(fe),u.LFG(dV,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const hV=new u.OlP("cdk-focus-monitor-default-options"),OS=Lg({passive:!0,capture:!0});let lD=(()=>{class i{constructor(e,s,o,l,f){this._ngZone=e,this._platform=s,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ft.x,this._rootNodeFocusAndBlurListener=_=>{const w=ah(_),E="focus"===_.type?this._onFocus:this._onBlur;for(let T=w;T;T=T.parentElement)E.call(this,_,T)},this._document=l,this._detectionMode=(null==f?void 0:f.detectionMode)||0}monitor(e,s=!1){const o=oo(e);if(!this._platform.isBrowser||1!==o.nodeType)return it(null);const l=I1(o)||this._getDocument(),f=this._elementInfo.get(o);if(f)return s&&(f.checkChildren=!0),f.subject;const _={checkChildren:s,subject:new Ft.x,rootNode:l};return this._elementInfo.set(o,_),this._registerGlobalListeners(_),_.subject}stopMonitoring(e){const s=oo(e),o=this._elementInfo.get(s);o&&(o.subject.complete(),this._setClasses(s),this._elementInfo.delete(s),this._removeGlobalListeners(o))}focusVia(e,s,o){const l=oo(e);l===this._getDocument().activeElement?this._getClosestElementsInfo(l).forEach(([_,w])=>this._originChanged(_,s,w)):(this._setOrigin(s),"function"==typeof l.focus&&l.focus(o))}ngOnDestroy(){this._elementInfo.forEach((e,s)=>this.stopMonitoring(s))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,s){e.classList.toggle("cdk-focused",!!s),e.classList.toggle("cdk-touch-focused","touch"===s),e.classList.toggle("cdk-keyboard-focused","keyboard"===s),e.classList.toggle("cdk-mouse-focused","mouse"===s),e.classList.toggle("cdk-program-focused","program"===s)}_setOrigin(e,s=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&s,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,s){const o=this._elementInfo.get(s),l=ah(e);!o||!o.checkChildren&&s!==l||this._originChanged(s,this._getFocusOrigin(l),o)}_onBlur(e,s){const o=this._elementInfo.get(s);!o||o.checkChildren&&e.relatedTarget instanceof Node&&s.contains(e.relatedTarget)||(this._setClasses(s),this._emitOrigin(o.subject,null))}_emitOrigin(e,s){this._ngZone.run(()=>e.next(s))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const s=e.rootNode,o=this._rootNodeFocusListenerCount.get(s)||0;o||this._ngZone.runOutsideAngular(()=>{s.addEventListener("focus",this._rootNodeFocusAndBlurListener,OS),s.addEventListener("blur",this._rootNodeFocusAndBlurListener,OS)}),this._rootNodeFocusListenerCount.set(s,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Kn(this._stopInputModalityDetector)).subscribe(l=>{this._setOrigin(l,!0)}))}_removeGlobalListeners(e){const s=e.rootNode;if(this._rootNodeFocusListenerCount.has(s)){const o=this._rootNodeFocusListenerCount.get(s);o>1?this._rootNodeFocusListenerCount.set(s,o-1):(s.removeEventListener("focus",this._rootNodeFocusAndBlurListener,OS),s.removeEventListener("blur",this._rootNodeFocusAndBlurListener,OS),this._rootNodeFocusListenerCount.delete(s))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,s,o){this._setClasses(e,s),this._emitOrigin(o.subject,s),this._lastFocusOrigin=s}_getClosestElementsInfo(e){const s=[];return this._elementInfo.forEach((o,l)=>{(l===e||o.checkChildren&&l.contains(e))&&s.push([l,o])}),s}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(u.R0b),u.LFG(Is),u.LFG(lV),u.LFG(fe,8),u.LFG(hV,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const AO="cdk-high-contrast-black-on-white",TO="cdk-high-contrast-white-on-black",z1="cdk-high-contrast-active";let IO=(()=>{class i{constructor(e,s){this._platform=e,this._document=s}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const s=this._document.defaultView||window,o=s&&s.getComputedStyle?s.getComputedStyle(e):null,l=(o&&o.backgroundColor||"").replace(/ /g,"");switch(e.remove(),l){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(z1),e.remove(AO),e.remove(TO),this._hasCheckedHighContrastMode=!0;const s=this.getHighContrastMode();1===s?(e.add(z1),e.add(AO)):2===s&&(e.add(z1),e.add(TO))}}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(Is),u.LFG(fe))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),RO=(()=>{class i{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(IO))},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[q0,B1]]}),i})();function fV(){return"undefined"!=typeof window&&void 0!==window.document}function j1(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Q_(i){switch(i.length){case 0:return new sD;case 1:return i[0];default:return new uO(i)}}function PO(i,t,e,s,o={},l={}){const f=[],_=[];let w=-1,E=null;if(s.forEach(T=>{const F=T.offset,G=F==w,H=G&&E||{};Object.keys(T).forEach(Y=>{let q=Y,J=T[Y];if("offset"!==Y)switch(q=t.normalizePropertyName(q,f),J){case"!":J=o[Y];break;case kg:J=l[Y];break;default:J=t.normalizeStyleValue(Y,q,J,f)}H[q]=J}),G||_.push(H),E=H,w=F}),f.length){const T="\n - ";throw new Error(`Unable to animate due to the following errors:${T}${f.join(T)}`)}return _}function W1(i,t,e,s){switch(t){case"start":i.onStart(()=>s(e&&Y1(e,"start",i)));break;case"done":i.onDone(()=>s(e&&Y1(e,"done",i)));break;case"destroy":i.onDestroy(()=>s(e&&Y1(e,"destroy",i)))}}function Y1(i,t,e){const s=e.totalTime,l=q1(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,null==s?i.totalTime:s,!!e.disabled),f=i._data;return null!=f&&(l._data=f),l}function q1(i,t,e,s,o="",l=0,f){return{element:i,triggerName:t,fromState:e,toState:s,phaseName:o,totalTime:l,disabled:!!f}}function $c(i,t,e){let s;return i instanceof Map?(s=i.get(t),s||i.set(t,s=e)):(s=i[t],s||(s=i[t]=e)),s}function OO(i){const t=i.indexOf(":");return[i.substring(1,t),i.substr(t+1)]}let $1=(i,t)=>!1,kO=(i,t,e)=>[];(j1()||"undefined"!=typeof Element)&&($1=fV()?(i,t)=>{for(;t&&t!==document.documentElement;){if(t===i)return!0;t=t.parentNode||t.host}return!1}:(i,t)=>i.contains(t),kO=(i,t,e)=>{if(e)return Array.from(i.querySelectorAll(t));const s=i.querySelector(t);return s?[s]:[]});let X0=null,FO=!1;function LO(i){X0||(X0=function gV(){return"undefined"!=typeof document?document.body:null}()||{},FO=!!X0.style&&"WebkitAppearance"in X0.style);let t=!0;return X0.style&&!function pV(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in X0.style,!t&&FO&&(t="Webkit"+i.charAt(0).toUpperCase()+i.substr(1)in X0.style)),t}const NO=$1,BO=kO;let VO=(()=>{class i{validateStyleProperty(e){return LO(e)}matchesElement(e,s){return!1}containsElement(e,s){return NO(e,s)}query(e,s,o){return BO(e,s,o)}computeStyle(e,s,o){return o||""}animate(e,s,o,l,f,_=[],w){return new sD(o,l)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),Z1=(()=>{class i{}return i.NOOP=new VO,i})();const K1="ng-enter",kS="ng-leave",FS="ng-trigger",LS=".ng-trigger",UO="ng-animating",Q1=".ng-animating";function J0(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:X1(parseFloat(t[1]),t[2])}function X1(i,t){return"s"===t?1e3*i:i}function NS(i,t,e){return i.hasOwnProperty("duration")?i:function vV(i,t,e){let o,l=0,f="";if("string"==typeof i){const _=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===_)return t.push(`The provided timing value "${i}" is invalid.`),{duration:0,delay:0,easing:""};o=X1(parseFloat(_[1]),_[2]);const w=_[3];null!=w&&(l=X1(parseFloat(w),_[4]));const E=_[5];E&&(f=E)}else o=i;if(!e){let _=!1,w=t.length;o<0&&(t.push("Duration values below 0 are not allowed for this animation step."),_=!0),l<0&&(t.push("Delay values below 0 are not allowed for this animation step."),_=!0),_&&t.splice(w,0,`The provided timing value "${i}" is invalid.`)}return{duration:o,delay:l,easing:f}}(i,t,e)}function _x(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function X_(i,t,e={}){if(t)for(let s in i)e[s]=i[s];else _x(i,e);return e}function zO(i,t,e){return e?t+":"+e+";":""}function jO(i){let t="";for(let e=0;e<i.style.length;e++){const s=i.style.item(e);t+=zO(0,s,i.style.getPropertyValue(s))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=zO(0,wV(e),i.style[e]));i.setAttribute("style",t)}function Hf(i,t,e){i.style&&(Object.keys(t).forEach(s=>{const o=eI(s);e&&!e.hasOwnProperty(s)&&(e[s]=i.style[o]),i.style[o]=t[s]}),j1()&&jO(i))}function eb(i,t){i.style&&(Object.keys(t).forEach(e=>{const s=eI(e);i.style[s]=""}),j1()&&jO(i))}function cD(i){return Array.isArray(i)?1==i.length?i[0]:lO(i):i}const J1=new RegExp("{{\\s*(.+?)\\s*}}","g");function WO(i){let t=[];if("string"==typeof i){let e;for(;e=J1.exec(i);)t.push(e[1]);J1.lastIndex=0}return t}function BS(i,t,e){const s=i.toString(),o=s.replace(J1,(l,f)=>{let _=t[f];return t.hasOwnProperty(f)||(e.push(`Please provide a value for the animation param ${f}`),_=""),_.toString()});return o==s?i:o}function VS(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const bV=/-+([a-z0-9])/g;function eI(i){return i.replace(bV,(...t)=>t[1].toUpperCase())}function wV(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Zc(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function YO(i,t){return window.getComputedStyle(i)[t]}function MV(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(s=>function DV(i,t,e){if(":"==i[0]){const w=function EV(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,s)=>parseFloat(s)>parseFloat(e);case":decrement":return(e,s)=>parseFloat(s)<parseFloat(e);default:return t.push(`The transition alias value "${i}" is not supported`),"* => *"}}(i,e);if("function"==typeof w)return void t.push(w);i=w}const s=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==s||s.length<4)return e.push(`The provided transition expression "${i}" is not supported`),t;const o=s[1],l=s[2],f=s[3];t.push(qO(o,f));"<"==l[0]&&!("*"==o&&"*"==f)&&t.push(qO(f,o))}(s,e,t)):e.push(i),e}const US=new Set(["true","1"]),HS=new Set(["false","0"]);function qO(i,t){const e=US.has(i)||HS.has(i),s=US.has(t)||HS.has(t);return(o,l)=>{let f="*"==i||i==o,_="*"==t||t==l;return!f&&e&&"boolean"==typeof o&&(f=o?US.has(i):HS.has(i)),!_&&s&&"boolean"==typeof l&&(_=l?US.has(t):HS.has(t)),f&&_}}const SV=new RegExp("s*:selfs*,?","g");function tI(i,t,e){return new AV(i).build(t,e)}class AV{constructor(t){this._driver=t}build(t,e){const s=new RV(e);return this._resetContextStyleTimingState(s),Zc(this,cD(t),s)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let s=e.queryCount=0,o=e.depCount=0;const l=[],f=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(_=>{if(this._resetContextStyleTimingState(e),0==_.type){const w=_,E=w.name;E.toString().split(/\s*,\s*/).forEach(T=>{w.name=T,l.push(this.visitState(w,e))}),w.name=E}else if(1==_.type){const w=this.visitTransition(_,e);s+=w.queryCount,o+=w.depCount,f.push(w)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:l,transitions:f,queryCount:s,depCount:o,options:null}}visitState(t,e){const s=this.visitStyle(t.styles,e),o=t.options&&t.options.params||null;if(s.containsDynamicStyles){const l=new Set,f=o||{};if(s.styles.forEach(_=>{if(zS(_)){const w=_;Object.keys(w).forEach(E=>{WO(w[E]).forEach(T=>{f.hasOwnProperty(T)||l.add(T)})})}}),l.size){const _=VS(l.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${_.join(", ")}`)}}return{type:0,name:t.name,style:s,options:o?{params:o}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const s=Zc(this,cD(t.animation),e);return{type:1,matchers:MV(t.expr,e.errors),animation:s,queryCount:e.queryCount,depCount:e.depCount,options:tb(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(s=>Zc(this,s,e)),options:tb(t.options)}}visitGroup(t,e){const s=e.currentTime;let o=0;const l=t.steps.map(f=>{e.currentTime=s;const _=Zc(this,f,e);return o=Math.max(o,e.currentTime),_});return e.currentTime=o,{type:3,steps:l,options:tb(t.options)}}visitAnimate(t,e){const s=function OV(i,t){let e=null;if(i.hasOwnProperty("duration"))e=i;else if("number"==typeof i)return nI(NS(i,t).duration,0,"");const s=i;if(s.split(/\s+/).some(l=>"{"==l.charAt(0)&&"{"==l.charAt(1))){const l=nI(0,0,"");return l.dynamic=!0,l.strValue=s,l}return e=e||NS(s,t),nI(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=s;let o,l=t.styles?t.styles:zn({});if(5==l.type)o=this.visitKeyframes(l,e);else{let f=t.styles,_=!1;if(!f){_=!0;const E={};s.easing&&(E.easing=s.easing),f=zn(E)}e.currentTime+=s.duration+s.delay;const w=this.visitStyle(f,e);w.isEmptyStep=_,o=w}return e.currentAnimateTimings=null,{type:4,timings:s,style:o,options:null}}visitStyle(t,e){const s=this._makeStyleAst(t,e);return this._validateStyleAst(s,e),s}_makeStyleAst(t,e){const s=[];Array.isArray(t.styles)?t.styles.forEach(f=>{"string"==typeof f?f==kg?s.push(f):e.errors.push(`The provided style string value ${f} is not allowed.`):s.push(f)}):s.push(t.styles);let o=!1,l=null;return s.forEach(f=>{if(zS(f)){const _=f,w=_.easing;if(w&&(l=w,delete _.easing),!o)for(let E in _)if(_[E].toString().indexOf("{{")>=0){o=!0;break}}}),{type:6,styles:s,easing:l,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){const s=e.currentAnimateTimings;let o=e.currentTime,l=e.currentTime;s&&l>0&&(l-=s.duration+s.delay),t.styles.forEach(f=>{"string"!=typeof f&&Object.keys(f).forEach(_=>{if(!this._driver.validateStyleProperty(_))return void e.errors.push(`The provided animation property "${_}" is not a supported CSS property for animations`);const w=e.collectedStyles[e.currentQuerySelector],E=w[_];let T=!0;E&&(l!=o&&l>=E.startTime&&o<=E.endTime&&(e.errors.push(`The CSS property "${_}" that exists between the times of "${E.startTime}ms" and "${E.endTime}ms" is also being animated in a parallel animation between the times of "${l}ms" and "${o}ms"`),T=!1),l=E.startTime),T&&(w[_]={startTime:l,endTime:o}),e.options&&function yV(i,t,e){const s=t.params||{},o=WO(i);o.length&&o.forEach(l=>{s.hasOwnProperty(l)||e.push(`Unable to resolve the local animation param ${l} in the given list of values`)})}(f[_],e.options,e.errors)})})}visitKeyframes(t,e){const s={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),s;let l=0;const f=[];let _=!1,w=!1,E=0;const T=t.steps.map(re=>{const Me=this._makeStyleAst(re,e);let be=null!=Me.offset?Me.offset:function PV(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(zS(e)&&e.hasOwnProperty("offset")){const s=e;t=parseFloat(s.offset),delete s.offset}});else if(zS(i)&&i.hasOwnProperty("offset")){const e=i;t=parseFloat(e.offset),delete e.offset}return t}(Me.styles),He=0;return null!=be&&(l++,He=Me.offset=be),w=w||He<0||He>1,_=_||He<E,E=He,f.push(He),Me});w&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),_&&e.errors.push("Please ensure that all keyframe offsets are in order");const F=t.steps.length;let G=0;l>0&&l<F?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==l&&(G=1/(F-1));const H=F-1,Y=e.currentTime,q=e.currentAnimateTimings,J=q.duration;return T.forEach((re,Me)=>{const be=G>0?Me==H?1:G*Me:f[Me],He=be*J;e.currentTime=Y+q.delay+He,q.duration=He,this._validateStyleAst(re,e),re.offset=be,s.styles.push(re)}),s}visitReference(t,e){return{type:8,animation:Zc(this,cD(t.animation),e),options:tb(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:tb(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:tb(t.options)}}visitQuery(t,e){const s=e.currentQuerySelector,o=t.options||{};e.queryCount++,e.currentQuery=t;const[l,f]=function TV(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(SV,"")),i=i.replace(/@\*/g,LS).replace(/@\w+/g,e=>LS+"-"+e.substr(1)).replace(/:animating/g,Q1),[i,t]}(t.selector);e.currentQuerySelector=s.length?s+" "+l:l,$c(e.collectedStyles,e.currentQuerySelector,{});const _=Zc(this,cD(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=s,{type:11,selector:l,limit:o.limit||0,optional:!!o.optional,includeSelf:f,animation:_,originalSelector:t.selector,options:tb(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const s="full"===t.timings?{duration:0,delay:0,easing:"full"}:NS(t.timings,e.errors,!0);return{type:12,animation:Zc(this,cD(t.animation),e),timings:s,options:null}}}class RV{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function zS(i){return!Array.isArray(i)&&"object"==typeof i}function tb(i){return i?(i=_x(i)).params&&(i.params=function IV(i){return i?_x(i):null}(i.params)):i={},i}function nI(i,t,e){return{duration:i,delay:t,easing:e}}function iI(i,t,e,s,o,l,f=null,_=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:s,duration:o,delay:l,totalTime:o+l,easing:f,subTimeline:_}}class jS{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let s=this._map.get(t);s||this._map.set(t,s=[]),s.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const LV=new RegExp(":enter","g"),BV=new RegExp(":leave","g");function rI(i,t,e,s,o,l={},f={},_,w,E=[]){return(new VV).buildKeyframes(i,t,e,s,o,l,f,_,w,E)}class VV{buildKeyframes(t,e,s,o,l,f,_,w,E,T=[]){E=E||new jS;const F=new sI(t,e,E,o,l,T,[]);F.options=w,F.currentTimeline.setStyles([f],null,F.errors,w),Zc(this,s,F);const G=F.timelines.filter(H=>H.containsAnimation());if(Object.keys(_).length){let H;for(let Y=G.length-1;Y>=0;Y--){const q=G[Y];if(q.element===e){H=q;break}}H&&!H.allowOnlyTimelineStyles()&&H.setStyles([_],null,F.errors,w)}return G.length?G.map(H=>H.buildKeyframes()):[iI(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const s=e.subInstructions.get(e.element);if(s){const o=e.createSubContext(t.options),l=e.currentTimeline.currentTime,f=this._visitSubInstructions(s,o,o.options);l!=f&&e.transformIntoNewTimeline(f)}e.previousNode=t}visitAnimateRef(t,e){const s=e.createSubContext(t.options);s.transformIntoNewTimeline(),this.visitReference(t.animation,s),e.transformIntoNewTimeline(s.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,s){let l=e.currentTimeline.currentTime;const f=null!=s.duration?J0(s.duration):null,_=null!=s.delay?J0(s.delay):null;return 0!==f&&t.forEach(w=>{const E=e.appendInstructionToTimeline(w,f,_);l=Math.max(l,E.duration+E.delay)}),l}visitReference(t,e){e.updateOptions(t.options,!0),Zc(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const s=e.subContextCount;let o=e;const l=t.options;if(l&&(l.params||l.delay)&&(o=e.createSubContext(l),o.transformIntoNewTimeline(),null!=l.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=WS);const f=J0(l.delay);o.delayNextStep(f)}t.steps.length&&(t.steps.forEach(f=>Zc(this,f,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>s&&o.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const s=[];let o=e.currentTimeline.currentTime;const l=t.options&&t.options.delay?J0(t.options.delay):0;t.steps.forEach(f=>{const _=e.createSubContext(t.options);l&&_.delayNextStep(l),Zc(this,f,_),o=Math.max(o,_.currentTimeline.currentTime),s.push(_.currentTimeline)}),s.forEach(f=>e.currentTimeline.mergeTimelineCollectedStyles(f)),e.transformIntoNewTimeline(o),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const s=t.strValue;return NS(e.params?BS(s,e.params,e.errors):s,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const s=e.currentAnimateTimings=this._visitTiming(t.timings,e),o=e.currentTimeline;s.delay&&(e.incrementTime(s.delay),o.snapshotCurrentStyles());const l=t.style;5==l.type?this.visitKeyframes(l,e):(e.incrementTime(s.duration),this.visitStyle(l,e),o.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const s=e.currentTimeline,o=e.currentAnimateTimings;!o&&s.getCurrentStyleProperties().length&&s.forwardFrame();const l=o&&o.easing||t.easing;t.isEmptyStep?s.applyEmptyStep(l):s.setStyles(t.styles,l,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const s=e.currentAnimateTimings,o=e.currentTimeline.duration,l=s.duration,_=e.createSubContext().currentTimeline;_.easing=s.easing,t.styles.forEach(w=>{_.forwardTime((w.offset||0)*l),_.setStyles(w.styles,w.easing,e.errors,e.options),_.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(_),e.transformIntoNewTimeline(o+l),e.previousNode=t}visitQuery(t,e){const s=e.currentTimeline.currentTime,o=t.options||{},l=o.delay?J0(o.delay):0;l&&(6===e.previousNode.type||0==s&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=WS);let f=s;const _=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!o.optional,e.errors);e.currentQueryTotal=_.length;let w=null;_.forEach((E,T)=>{e.currentQueryIndex=T;const F=e.createSubContext(t.options,E);l&&F.delayNextStep(l),E===e.element&&(w=F.currentTimeline),Zc(this,t.animation,F),F.currentTimeline.applyStylesToKeyframe(),f=Math.max(f,F.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(f),w&&(e.currentTimeline.mergeTimelineCollectedStyles(w),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const s=e.parentContext,o=e.currentTimeline,l=t.timings,f=Math.abs(l.duration),_=f*(e.currentQueryTotal-1);let w=f*e.currentQueryIndex;switch(l.duration<0?"reverse":l.easing){case"reverse":w=_-w;break;case"full":w=s.currentStaggerTime}const T=e.currentTimeline;w&&T.delayNextStep(w);const F=T.currentTime;Zc(this,t.animation,e),e.previousNode=t,s.currentStaggerTime=o.currentTime-F+(o.startTime-s.currentTimeline.startTime)}}const WS={};class sI{constructor(t,e,s,o,l,f,_,w){this._driver=t,this.element=e,this.subInstructions=s,this._enterClassName=o,this._leaveClassName=l,this.errors=f,this.timelines=_,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=WS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=w||new YS(this._driver,e,0),_.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const s=t;let o=this.options;null!=s.duration&&(o.duration=J0(s.duration)),null!=s.delay&&(o.delay=J0(s.delay));const l=s.params;if(l){let f=o.params;f||(f=this.options.params={}),Object.keys(l).forEach(_=>{(!e||!f.hasOwnProperty(_))&&(f[_]=BS(l[_],f,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const s=t.params={};Object.keys(e).forEach(o=>{s[o]=e[o]})}}return t}createSubContext(t=null,e,s){const o=e||this.element,l=new sI(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,s||0));return l.previousNode=this.previousNode,l.currentAnimateTimings=this.currentAnimateTimings,l.options=this._copyOptions(),l.updateOptions(t),l.currentQueryIndex=this.currentQueryIndex,l.currentQueryTotal=this.currentQueryTotal,l.parentContext=this,this.subContextCount++,l}transformIntoNewTimeline(t){return this.previousNode=WS,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,s){const o={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=s?s:0)+t.delay,easing:""},l=new GV(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,o,t.stretchStartingKeyframe);return this.timelines.push(l),o}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,s,o,l,f){let _=[];if(o&&_.push(this.element),t.length>0){t=(t=t.replace(LV,"."+this._enterClassName)).replace(BV,"."+this._leaveClassName);let E=this._driver.query(this.element,t,1!=s);0!==s&&(E=s<0?E.slice(E.length+s,E.length):E.slice(0,s)),_.push(...E)}return!l&&0==_.length&&f.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),_}}class YS{constructor(t,e,s,o){this._driver=t,this.element=e,this.startTime=s,this._elementTimelineStylesLookup=o,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new YS(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||kg,this._currentKeyframe[e]=kg}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,s,o){e&&(this._previousKeyframe.easing=e);const l=o&&o.params||{},f=function UV(i,t){const e={};let s;return i.forEach(o=>{"*"===o?(s=s||Object.keys(t),s.forEach(l=>{e[l]=kg})):X_(o,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(f).forEach(_=>{const w=BS(f[_],l,s);this._pendingStyles[_]=w,this._localTimelineStyles.hasOwnProperty(_)||(this._backFill[_]=this._globalTimelineStyles.hasOwnProperty(_)?this._globalTimelineStyles[_]:kg),this._updateStyle(_,w)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(s=>{this._currentKeyframe[s]=t[s]}),Object.keys(this._localTimelineStyles).forEach(s=>{this._currentKeyframe.hasOwnProperty(s)||(this._currentKeyframe[s]=this._localTimelineStyles[s])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const s=this._styleSummary[e],o=t._styleSummary[e];(!s||o.time>s.time)&&this._updateStyle(e,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,s=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((_,w)=>{const E=X_(_,!0);Object.keys(E).forEach(T=>{const F=E[T];"!"==F?t.add(T):F==kg&&e.add(T)}),s||(E.offset=w/this.duration),o.push(E)});const l=t.size?VS(t.values()):[],f=e.size?VS(e.values()):[];if(s){const _=o[0],w=_x(_);_.offset=0,w.offset=1,o=[_,w]}return iI(this.element,o,l,f,this.duration,this.startTime,this.easing,!1)}}class GV extends YS{constructor(t,e,s,o,l,f,_=!1){super(t,e,f.delay),this.keyframes=s,this.preStyleProps=o,this.postStyleProps=l,this._stretchStartingKeyframe=_,this.timings={duration:f.duration,delay:f.delay,easing:f.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:s,easing:o}=this.timings;if(this._stretchStartingKeyframe&&e){const l=[],f=s+e,_=e/f,w=X_(t[0],!1);w.offset=0,l.push(w);const E=X_(t[0],!1);E.offset=KO(_),l.push(E);const T=t.length-1;for(let F=1;F<=T;F++){let G=X_(t[F],!1);G.offset=KO((e+G.offset*s)/f),l.push(G)}s=f,e=0,o="",t=l}return iI(this.element,t,this.preStyleProps,this.postStyleProps,s,e,o,!0)}}function KO(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class oI{}class HV extends oI{normalizePropertyName(t,e){return eI(t)}normalizeStyleValue(t,e,s,o){let l="";const f=s.toString().trim();if(zV[e]&&0!==s&&"0"!==s)if("number"==typeof s)l="px";else{const _=s.match(/^[+-]?[\d\.]+([a-z]*)$/);_&&0==_[1].length&&o.push(`Please provide a CSS unit value for ${t}:${s}`)}return f+l}}const zV=(()=>function jV(i){const t={};return i.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function QO(i,t,e,s,o,l,f,_,w,E,T,F,G){return{type:0,element:i,triggerName:t,isRemovalTransition:o,fromState:e,fromStyles:l,toState:s,toStyles:f,timelines:_,queriedElements:w,preStyleProps:E,postStyleProps:T,totalTime:F,errors:G}}const aI={};class XO{constructor(t,e,s){this._triggerName=t,this.ast=e,this._stateStyles=s}match(t,e,s,o){return function WV(i,t,e,s,o){return i.some(l=>l(t,e,s,o))}(this.ast.matchers,t,e,s,o)}buildStyles(t,e,s){const o=this._stateStyles["*"],l=this._stateStyles[t],f=o?o.buildStyles(e,s):{};return l?l.buildStyles(e,s):f}build(t,e,s,o,l,f,_,w,E,T){const F=[],G=this.ast.options&&this.ast.options.params||aI,Y=this.buildStyles(s,_&&_.params||aI,F),q=w&&w.params||aI,J=this.buildStyles(o,q,F),re=new Set,Me=new Map,be=new Map,He="void"===o,Ve={params:Object.assign(Object.assign({},G),q)},ot=T?[]:rI(t,e,this.ast.animation,l,f,Y,J,Ve,E,F);let bt=0;if(ot.forEach(Ot=>{bt=Math.max(Ot.duration+Ot.delay,bt)}),F.length)return QO(e,this._triggerName,s,o,He,Y,J,[],[],Me,be,bt,F);ot.forEach(Ot=>{const Qn=Ot.element,rr=$c(Me,Qn,{});Ot.preStyleProps.forEach(gr=>rr[gr]=!0);const qr=$c(be,Qn,{});Ot.postStyleProps.forEach(gr=>qr[gr]=!0),Qn!==e&&re.add(Qn)});const $t=VS(re.values());return QO(e,this._triggerName,s,o,He,Y,J,ot,$t,Me,be,bt)}}class YV{constructor(t,e,s){this.styles=t,this.defaultParams=e,this.normalizer=s}buildStyles(t,e){const s={},o=_x(this.defaultParams);return Object.keys(t).forEach(l=>{const f=t[l];null!=f&&(o[l]=f)}),this.styles.styles.forEach(l=>{if("string"!=typeof l){const f=l;Object.keys(f).forEach(_=>{let w=f[_];w.length>1&&(w=BS(w,o,e));const E=this.normalizer.normalizePropertyName(_,e);w=this.normalizer.normalizeStyleValue(_,E,w,e),s[E]=w})}}),s}}class $V{constructor(t,e,s){this.name=t,this.ast=e,this._normalizer=s,this.transitionFactories=[],this.states={},e.states.forEach(o=>{this.states[o.name]=new YV(o.style,o.options&&o.options.params||{},s)}),JO(this.states,"true","1"),JO(this.states,"false","0"),e.transitions.forEach(o=>{this.transitionFactories.push(new XO(t,o,this.states))}),this.fallbackTransition=function ZV(i,t,e){return new XO(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(f,_)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,s,o){return this.transitionFactories.find(f=>f.match(t,e,s,o))||null}matchStyles(t,e,s){return this.fallbackTransition.buildStyles(t,e,s)}}function JO(i,t,e){i.hasOwnProperty(t)?i.hasOwnProperty(e)||(i[e]=i[t]):i.hasOwnProperty(e)&&(i[t]=i[e])}const KV=new jS;class QV{constructor(t,e,s){this.bodyNode=t,this._driver=e,this._normalizer=s,this._animations={},this._playersById={},this.players=[]}register(t,e){const s=[],o=tI(this._driver,e,s);if(s.length)throw new Error(`Unable to build the animation due to the following errors: ${s.join("\n")}`);this._animations[t]=o}_buildPlayer(t,e,s){const o=t.element,l=PO(0,this._normalizer,0,t.keyframes,e,s);return this._driver.animate(o,l,t.duration,t.delay,t.easing,[],!0)}create(t,e,s={}){const o=[],l=this._animations[t];let f;const _=new Map;if(l?(f=rI(this._driver,e,l,K1,kS,{},{},s,KV,o),f.forEach(T=>{const F=$c(_,T.element,{});T.postStyleProps.forEach(G=>F[G]=null)})):(o.push("The requested animation doesn't exist or has already been destroyed"),f=[]),o.length)throw new Error(`Unable to create the animation due to the following errors: ${o.join("\n")}`);_.forEach((T,F)=>{Object.keys(T).forEach(G=>{T[G]=this._driver.computeStyle(F,G,kg)})});const E=Q_(f.map(T=>{const F=_.get(T.element);return this._buildPlayer(T,{},F)}));return this._playersById[t]=E,E.onDestroy(()=>this.destroy(t)),this.players.push(E),E}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const s=this.players.indexOf(e);s>=0&&this.players.splice(s,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,s,o){const l=q1(e,"","","");return W1(this._getPlayer(t),s,l,o),()=>{}}command(t,e,s,o){if("register"==s)return void this.register(t,o[0]);if("create"==s)return void this.create(t,e,o[0]||{});const l=this._getPlayer(t);switch(s){case"play":l.play();break;case"pause":l.pause();break;case"reset":l.reset();break;case"restart":l.restart();break;case"finish":l.finish();break;case"init":l.init();break;case"setPosition":l.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(t)}}}const ek="ng-animate-queued",lI="ng-animate-disabled",nG=[],tk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},iG={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Yu="__ng_removed";class cI{constructor(t,e=""){this.namespaceId=e;const s=t&&t.hasOwnProperty("value");if(this.value=function aG(i){return null!=i?i:null}(s?t.value:t),s){const l=_x(t);delete l.value,this.options=l}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const s=this.options.params;Object.keys(e).forEach(o=>{null==s[o]&&(s[o]=e[o])})}}}const uD="void",uI=new cI(uD);class rG{constructor(t,e,s){this.id=t,this.hostElement=e,this._engine=s,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,qu(e,this._hostClassName)}listen(t,e,s,o){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${s}" because the animation trigger "${e}" doesn't exist!`);if(null==s||0==s.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if(!function lG(i){return"start"==i||"done"==i}(s))throw new Error(`The provided animation trigger event "${s}" for the animation trigger "${e}" is not supported!`);const l=$c(this._elementListeners,t,[]),f={name:e,phase:s,callback:o};l.push(f);const _=$c(this._engine.statesByElement,t,{});return _.hasOwnProperty(e)||(qu(t,FS),qu(t,FS+"-"+e),_[e]=uI),()=>{this._engine.afterFlush(()=>{const w=l.indexOf(f);w>=0&&l.splice(w,1),this._triggers[e]||delete _[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,s,o=!0){const l=this._getTrigger(e),f=new dI(this.id,e,t);let _=this._engine.statesByElement.get(t);_||(qu(t,FS),qu(t,FS+"-"+e),this._engine.statesByElement.set(t,_={}));let w=_[e];const E=new cI(s,this.id);if(!(s&&s.hasOwnProperty("value"))&&w&&E.absorbOptions(w.options),_[e]=E,w||(w=uI),E.value!==uD&&w.value===E.value){if(!function dG(i,t){const e=Object.keys(i),s=Object.keys(t);if(e.length!=s.length)return!1;for(let o=0;o<e.length;o++){const l=e[o];if(!t.hasOwnProperty(l)||i[l]!==t[l])return!1}return!0}(w.params,E.params)){const q=[],J=l.matchStyles(w.value,w.params,q),re=l.matchStyles(E.value,E.params,q);q.length?this._engine.reportError(q):this._engine.afterFlush(()=>{eb(t,J),Hf(t,re)})}return}const G=$c(this._engine.playersByElement,t,[]);G.forEach(q=>{q.namespaceId==this.id&&q.triggerName==e&&q.queued&&q.destroy()});let H=l.matchTransition(w.value,E.value,t,E.params),Y=!1;if(!H){if(!o)return;H=l.fallbackTransition,Y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:H,fromState:w,toState:E,player:f,isFallbackTransition:Y}),Y||(qu(t,ek),f.onStart(()=>{vx(t,ek)})),f.onDone(()=>{let q=this.players.indexOf(f);q>=0&&this.players.splice(q,1);const J=this._engine.playersByElement.get(t);if(J){let re=J.indexOf(f);re>=0&&J.splice(re,1)}}),this.players.push(f),G.push(f),f}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,s)=>{delete e[t]}),this._elementListeners.forEach((e,s)=>{this._elementListeners.set(s,e.filter(o=>o.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(s=>s.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const s=this._engine.driver.query(t,LS,!0);s.forEach(o=>{if(o[Yu])return;const l=this._engine.fetchNamespacesByElement(o);l.size?l.forEach(f=>f.triggerLeaveAnimation(o,e,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>s.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(t,e,s,o){const l=this._engine.statesByElement.get(t),f=new Map;if(l){const _=[];if(Object.keys(l).forEach(w=>{if(f.set(w,l[w].value),this._triggers[w]){const E=this.trigger(t,w,uD,o);E&&_.push(E)}}),_.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,f),s&&Q_(_).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),s=this._engine.statesByElement.get(t);if(e&&s){const o=new Set;e.forEach(l=>{const f=l.name;if(o.has(f))return;o.add(f);const w=this._triggers[f].fallbackTransition,E=s[f]||uI,T=new cI(uD),F=new dI(this.id,f,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:f,transition:w,fromState:E,toState:T,player:F,isFallbackTransition:!0})})}}removeNode(t,e){const s=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let o=!1;if(s.totalAnimations){const l=s.players.length?s.playersByQueriedElement.get(t):[];if(l&&l.length)o=!0;else{let f=t;for(;f=f.parentNode;)if(s.statesByElement.get(f)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(t),o)s.markElementAsRemoved(this.id,t,!1,e);else{const l=t[Yu];(!l||l===tk)&&(s.afterFlush(()=>this.clearElementCache(t)),s.destroyInnerAnimations(t),s._onRemovalComplete(t,e))}}insertNode(t,e){qu(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(s=>{const o=s.player;if(o.destroyed)return;const l=s.element,f=this._elementListeners.get(l);f&&f.forEach(_=>{if(_.name==s.triggerName){const w=q1(l,s.triggerName,s.fromState.value,s.toState.value);w._data=t,W1(s.player,_.phase,w,_.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):e.push(s)}),this._queue=[],e.sort((s,o)=>{const l=s.transition.ast.depCount,f=o.transition.ast.depCount;return 0==l||0==f?l-f:this._engine.driver.containsElement(s.element,o.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(s=>s.element===t)||e,e}}class sG{constructor(t,e,s){this.bodyNode=t,this.driver=e,this._normalizer=s,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,l)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(s=>{s.queued&&t.push(s)})}),t}createNamespace(t,e){const s=new rG(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(s,e):(this.newHostElements.set(e,s),this.collectEnterElement(e)),this._namespaceLookup[t]=s}_balanceNamespaceList(t,e){const s=this._namespaceList.length-1;if(s>=0){let o=!1;for(let l=s;l>=0;l--)if(this.driver.containsElement(this._namespaceList[l].hostElement,e)){this._namespaceList.splice(l+1,0,t),o=!0;break}o||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let s=this._namespaceLookup[t];return s||(s=this.createNamespace(t,e)),s}registerTrigger(t,e,s){let o=this._namespaceLookup[t];o&&o.register(e,s)&&this.totalAnimations++}destroy(t,e){if(!t)return;const s=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(s.hostElement),delete this._namespaceLookup[t];const o=this._namespaceList.indexOf(s);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>s.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,s=this.statesByElement.get(t);if(s){const o=Object.keys(s);for(let l=0;l<o.length;l++){const f=s[o[l]].namespaceId;if(f){const _=this._fetchNamespace(f);_&&e.add(_)}}}return e}trigger(t,e,s,o){if(qS(e)){const l=this._fetchNamespace(t);if(l)return l.trigger(e,s,o),!0}return!1}insertNode(t,e,s,o){if(!qS(e))return;const l=e[Yu];if(l&&l.setForRemoval){l.setForRemoval=!1,l.setForMove=!0;const f=this.collectedLeaveElements.indexOf(e);f>=0&&this.collectedLeaveElements.splice(f,1)}if(t){const f=this._fetchNamespace(t);f&&f.insertNode(e,s)}o&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),qu(t,lI)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),vx(t,lI))}removeNode(t,e,s,o){if(qS(e)){const l=t?this._fetchNamespace(t):null;if(l?l.removeNode(e,o):this.markElementAsRemoved(t,e,!1,o),s){const f=this.namespacesByHostElement.get(e);f&&f.id!==t&&f.removeNode(e,o)}}else this._onRemovalComplete(e,o)}markElementAsRemoved(t,e,s,o,l){this.collectedLeaveElements.push(e),e[Yu]={namespaceId:t,setForRemoval:o,hasAnimation:s,removedBeforeQueried:!1,previousTriggersValues:l}}listen(t,e,s,o,l){return qS(e)?this._fetchNamespace(t).listen(e,s,o,l):()=>{}}_buildInstruction(t,e,s,o,l){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,s,o,t.fromState.options,t.toState.options,e,l)}destroyInnerAnimations(t){let e=this.driver.query(t,LS,!0);e.forEach(s=>this.destroyActiveAnimationsForElement(s)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Q1,!0),e.forEach(s=>this.finishActiveQueriedAnimationOnElement(s)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(s=>{s.queued?s.markedForDestroy=!0:s.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(s=>s.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Q_(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const s=t[Yu];if(s&&s.setForRemoval){if(t[Yu]=tk,s.namespaceId){this.destroyInnerAnimations(t);const o=this._fetchNamespace(s.namespaceId);o&&o.clearElementCache(t)}this._onRemovalComplete(t,s.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(lI))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(o=>{this.markElementAsDisabled(o,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((s,o)=>this._balanceNamespaceList(s,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let s=0;s<this.collectedEnterElements.length;s++)qu(this.collectedEnterElements[s],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const s=[];try{e=this._flushAnimations(s,t)}finally{for(let o=0;o<s.length;o++)s[o]()}}else for(let s=0;s<this.collectedLeaveElements.length;s++)this.processLeaveNode(this.collectedLeaveElements[s]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(s=>s()),this._flushFns=[],this._whenQuietFns.length){const s=this._whenQuietFns;this._whenQuietFns=[],e.length?Q_(e).onDone(()=>{s.forEach(o=>o())}):s.forEach(o=>o())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const s=new jS,o=[],l=new Map,f=[],_=new Map,w=new Map,E=new Map,T=new Set;this.disabledNodes.forEach(Nt=>{T.add(Nt);const on=this.driver.query(Nt,".ng-animate-queued",!0);for(let xn=0;xn<on.length;xn++)T.add(on[xn])});const F=this.bodyNode,G=Array.from(this.statesByElement.keys()),H=rk(G,this.collectedEnterElements),Y=new Map;let q=0;H.forEach((Nt,on)=>{const xn=K1+q++;Y.set(on,xn),Nt.forEach(li=>qu(li,xn))});const J=[],re=new Set,Me=new Set;for(let Nt=0;Nt<this.collectedLeaveElements.length;Nt++){const on=this.collectedLeaveElements[Nt],xn=on[Yu];xn&&xn.setForRemoval&&(J.push(on),re.add(on),xn.hasAnimation?this.driver.query(on,".ng-star-inserted",!0).forEach(li=>re.add(li)):Me.add(on))}const be=new Map,He=rk(G,Array.from(re));He.forEach((Nt,on)=>{const xn=kS+q++;be.set(on,xn),Nt.forEach(li=>qu(li,xn))}),t.push(()=>{H.forEach((Nt,on)=>{const xn=Y.get(on);Nt.forEach(li=>vx(li,xn))}),He.forEach((Nt,on)=>{const xn=be.get(on);Nt.forEach(li=>vx(li,xn))}),J.forEach(Nt=>{this.processLeaveNode(Nt)})});const Ve=[],ot=[];for(let Nt=this._namespaceList.length-1;Nt>=0;Nt--)this._namespaceList[Nt].drainQueuedTransitions(e).forEach(xn=>{const li=xn.player,as=xn.element;if(Ve.push(li),this.collectedEnterElements.length){const bl=as[Yu];if(bl&&bl.setForMove){if(bl.previousTriggersValues&&bl.previousTriggersValues.has(xn.triggerName)){const mb=bl.previousTriggersValues.get(xn.triggerName),pv=this.statesByElement.get(xn.element);pv&&pv[xn.triggerName]&&(pv[xn.triggerName].value=mb)}return void li.destroy()}}const qo=!F||!this.driver.containsElement(F,as),ka=be.get(as),$o=Y.get(as),$i=this._buildInstruction(xn,s,$o,ka,qo);if($i.errors&&$i.errors.length)return void ot.push($i);if(qo)return li.onStart(()=>eb(as,$i.fromStyles)),li.onDestroy(()=>Hf(as,$i.toStyles)),void o.push(li);if(xn.isFallbackTransition)return li.onStart(()=>eb(as,$i.fromStyles)),li.onDestroy(()=>Hf(as,$i.toStyles)),void o.push(li);const I3=[];$i.timelines.forEach(bl=>{bl.stretchStartingKeyframe=!0,this.disabledNodes.has(bl.element)||I3.push(bl)}),$i.timelines=I3,s.append(as,$i.timelines),f.push({instruction:$i,player:li,element:as}),$i.queriedElements.forEach(bl=>$c(_,bl,[]).push(li)),$i.preStyleProps.forEach((bl,mb)=>{const pv=Object.keys(bl);if(pv.length){let _b=w.get(mb);_b||w.set(mb,_b=new Set),pv.forEach(dP=>_b.add(dP))}}),$i.postStyleProps.forEach((bl,mb)=>{const pv=Object.keys(bl);let _b=E.get(mb);_b||E.set(mb,_b=new Set),pv.forEach(dP=>_b.add(dP))})});if(ot.length){const Nt=[];ot.forEach(on=>{Nt.push(`@${on.triggerName} has failed due to:\n`),on.errors.forEach(xn=>Nt.push(`- ${xn}\n`))}),Ve.forEach(on=>on.destroy()),this.reportError(Nt)}const bt=new Map,$t=new Map;f.forEach(Nt=>{const on=Nt.element;s.has(on)&&($t.set(on,on),this._beforeAnimationBuild(Nt.player.namespaceId,Nt.instruction,bt))}),o.forEach(Nt=>{const on=Nt.element;this._getPreviousPlayers(on,!1,Nt.namespaceId,Nt.triggerName,null).forEach(li=>{$c(bt,on,[]).push(li),li.destroy()})});const Ot=J.filter(Nt=>ok(Nt,w,E)),Qn=new Map;ik(Qn,this.driver,Me,E,kg).forEach(Nt=>{ok(Nt,w,E)&&Ot.push(Nt)});const qr=new Map;H.forEach((Nt,on)=>{ik(qr,this.driver,new Set(Nt),w,"!")}),Ot.forEach(Nt=>{const on=Qn.get(Nt),xn=qr.get(Nt);Qn.set(Nt,Object.assign(Object.assign({},on),xn))});const gr=[],Or=[],_s={};f.forEach(Nt=>{const{element:on,player:xn,instruction:li}=Nt;if(s.has(on)){if(T.has(on))return xn.onDestroy(()=>Hf(on,li.toStyles)),xn.disabled=!0,xn.overrideTotalTime(li.totalTime),void o.push(xn);let as=_s;if($t.size>1){let ka=on;const $o=[];for(;ka=ka.parentNode;){const $i=$t.get(ka);if($i){as=$i;break}$o.push(ka)}$o.forEach($i=>$t.set($i,as))}const qo=this._buildAnimation(xn.namespaceId,li,bt,l,qr,Qn);if(xn.setRealPlayer(qo),as===_s)gr.push(xn);else{const ka=this.playersByElement.get(as);ka&&ka.length&&(xn.parentPlayer=Q_(ka)),o.push(xn)}}else eb(on,li.fromStyles),xn.onDestroy(()=>Hf(on,li.toStyles)),Or.push(xn),T.has(on)&&o.push(xn)}),Or.forEach(Nt=>{const on=l.get(Nt.element);if(on&&on.length){const xn=Q_(on);Nt.setRealPlayer(xn)}}),o.forEach(Nt=>{Nt.parentPlayer?Nt.syncPlayerEvents(Nt.parentPlayer):Nt.destroy()});for(let Nt=0;Nt<J.length;Nt++){const on=J[Nt],xn=on[Yu];if(vx(on,kS),xn&&xn.hasAnimation)continue;let li=[];if(_.size){let qo=_.get(on);qo&&qo.length&&li.push(...qo);let ka=this.driver.query(on,Q1,!0);for(let $o=0;$o<ka.length;$o++){let $i=_.get(ka[$o]);$i&&$i.length&&li.push(...$i)}}const as=li.filter(qo=>!qo.destroyed);as.length?cG(this,on,as):this.processLeaveNode(on)}return J.length=0,gr.forEach(Nt=>{this.players.push(Nt),Nt.onDone(()=>{Nt.destroy();const on=this.players.indexOf(Nt);this.players.splice(on,1)}),Nt.play()}),gr}elementContainsData(t,e){let s=!1;const o=e[Yu];return o&&o.setForRemoval&&(s=!0),this.playersByElement.has(e)&&(s=!0),this.playersByQueriedElement.has(e)&&(s=!0),this.statesByElement.has(e)&&(s=!0),this._fetchNamespace(t).elementContainsData(e)||s}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,s,o,l){let f=[];if(e){const _=this.playersByQueriedElement.get(t);_&&(f=_)}else{const _=this.playersByElement.get(t);if(_){const w=!l||l==uD;_.forEach(E=>{E.queued||!w&&E.triggerName!=o||f.push(E)})}}return(s||o)&&(f=f.filter(_=>!(s&&s!=_.namespaceId||o&&o!=_.triggerName))),f}_beforeAnimationBuild(t,e,s){const l=e.element,f=e.isRemovalTransition?void 0:t,_=e.isRemovalTransition?void 0:e.triggerName;for(const w of e.timelines){const E=w.element,T=E!==l,F=$c(s,E,[]);this._getPreviousPlayers(E,T,f,_,e.toState).forEach(H=>{const Y=H.getRealPlayer();Y.beforeDestroy&&Y.beforeDestroy(),H.destroy(),F.push(H)})}eb(l,e.fromStyles)}_buildAnimation(t,e,s,o,l,f){const _=e.triggerName,w=e.element,E=[],T=new Set,F=new Set,G=e.timelines.map(Y=>{const q=Y.element;T.add(q);const J=q[Yu];if(J&&J.removedBeforeQueried)return new sD(Y.duration,Y.delay);const re=q!==w,Me=function uG(i){const t=[];return sk(i,t),t}((s.get(q)||nG).map(bt=>bt.getRealPlayer())).filter(bt=>!!bt.element&&bt.element===q),be=l.get(q),He=f.get(q),Ve=PO(0,this._normalizer,0,Y.keyframes,be,He),ot=this._buildPlayer(Y,Ve,Me);if(Y.subTimeline&&o&&F.add(q),re){const bt=new dI(t,_,q);bt.setRealPlayer(ot),E.push(bt)}return ot});E.forEach(Y=>{$c(this.playersByQueriedElement,Y.element,[]).push(Y),Y.onDone(()=>function oG(i,t,e){let s;if(i instanceof Map){if(s=i.get(t),s){if(s.length){const o=s.indexOf(e);s.splice(o,1)}0==s.length&&i.delete(t)}}else if(s=i[t],s){if(s.length){const o=s.indexOf(e);s.splice(o,1)}0==s.length&&delete i[t]}return s}(this.playersByQueriedElement,Y.element,Y))}),T.forEach(Y=>qu(Y,UO));const H=Q_(G);return H.onDestroy(()=>{T.forEach(Y=>vx(Y,UO)),Hf(w,e.toStyles)}),F.forEach(Y=>{$c(o,Y,[]).push(H)}),H}_buildPlayer(t,e,s){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,s):new sD(t.duration,t.delay)}}class dI{constructor(t,e,s){this.namespaceId=t,this.triggerName=e,this.element=s,this._player=new sD,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(s=>W1(t,e,void 0,s))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){$c(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function qS(i){return i&&1===i.nodeType}function nk(i,t){const e=i.style.display;return i.style.display=null!=t?t:"none",e}function ik(i,t,e,s,o){const l=[];e.forEach(w=>l.push(nk(w)));const f=[];s.forEach((w,E)=>{const T={};w.forEach(F=>{const G=T[F]=t.computeStyle(E,F,o);(!G||0==G.length)&&(E[Yu]=iG,f.push(E))}),i.set(E,T)});let _=0;return e.forEach(w=>nk(w,l[_++])),f}function rk(i,t){const e=new Map;if(i.forEach(_=>e.set(_,[])),0==t.length)return e;const o=new Set(t),l=new Map;function f(_){if(!_)return 1;let w=l.get(_);if(w)return w;const E=_.parentNode;return w=e.has(E)?E:o.has(E)?1:f(E),l.set(_,w),w}return t.forEach(_=>{const w=f(_);1!==w&&e.get(w).push(_)}),e}function qu(i,t){var e;null===(e=i.classList)||void 0===e||e.add(t)}function vx(i,t){var e;null===(e=i.classList)||void 0===e||e.remove(t)}function cG(i,t,e){Q_(e).onDone(()=>i.processLeaveNode(t))}function sk(i,t){for(let e=0;e<i.length;e++){const s=i[e];s instanceof uO?sk(s.players,t):t.push(s)}}function ok(i,t,e){const s=e.get(i);if(!s)return!1;let o=t.get(i);return o?s.forEach(l=>o.add(l)):t.set(i,s),e.delete(i),!0}class $S{constructor(t,e,s){this.bodyNode=t,this._driver=e,this._normalizer=s,this._triggerCache={},this.onRemovalComplete=(o,l)=>{},this._transitionEngine=new sG(t,e,s),this._timelineEngine=new QV(t,e,s),this._transitionEngine.onRemovalComplete=(o,l)=>this.onRemovalComplete(o,l)}registerTrigger(t,e,s,o,l){const f=t+"-"+o;let _=this._triggerCache[f];if(!_){const w=[],E=tI(this._driver,l,w);if(w.length)throw new Error(`The animation trigger "${o}" has failed to build due to the following errors:\n - ${w.join("\n - ")}`);_=function qV(i,t,e){return new $V(i,t,e)}(o,E,this._normalizer),this._triggerCache[f]=_}this._transitionEngine.registerTrigger(e,o,_)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,s,o){this._transitionEngine.insertNode(t,e,s,o)}onRemove(t,e,s,o){this._transitionEngine.removeNode(t,e,o||!1,s)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,s,o){if("@"==s.charAt(0)){const[l,f]=OO(s);this._timelineEngine.command(l,e,f,o)}else this._transitionEngine.trigger(t,e,s,o)}listen(t,e,s,o,l){if("@"==s.charAt(0)){const[f,_]=OO(s);return this._timelineEngine.listen(f,e,_,l)}return this._transitionEngine.listen(t,e,s,o,l)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let fG=(()=>{class i{constructor(e,s,o){this._element=e,this._startStyles=s,this._endStyles=o,this._state=0;let l=i.initialStylesByElement.get(e);l||i.initialStylesByElement.set(e,l={}),this._initialStyles=l}start(){this._state<1&&(this._startStyles&&Hf(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Hf(this._element,this._initialStyles),this._endStyles&&(Hf(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(eb(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(eb(this._element,this._endStyles),this._endStyles=null),Hf(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function hI(i){let t=null;const e=Object.keys(i);for(let s=0;s<e.length;s++){const o=e[s];pG(o)&&(t=t||{},t[o]=i[o])}return t}function pG(i){return"display"===i||"position"===i}class ak{constructor(t,e,s,o){this.element=t,this.keyframes=e,this.options=s,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=s.duration,this._delay=s.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,s){return t.animate(e,s)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(s=>{"offset"!=s&&(t[s]=this._finished?e[s]:YO(this.element,s))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}class gG{validateStyleProperty(t){return LO(t)}matchesElement(t,e){return!1}containsElement(t,e){return NO(t,e)}query(t,e,s){return BO(t,e,s)}computeStyle(t,e,s){return window.getComputedStyle(t)[e]}animate(t,e,s,o,l,f=[]){const w={duration:s,delay:o,fill:0==o?"both":"forwards"};l&&(w.easing=l);const E={},T=f.filter(G=>G instanceof ak);(function xV(i,t){return 0===i||0===t})(s,o)&&T.forEach(G=>{let H=G.currentSnapshot;Object.keys(H).forEach(Y=>E[Y]=H[Y])}),e=function CV(i,t,e){const s=Object.keys(e);if(s.length&&t.length){let l=t[0],f=[];if(s.forEach(_=>{l.hasOwnProperty(_)||f.push(_),l[_]=e[_]}),f.length)for(var o=1;o<t.length;o++){let _=t[o];f.forEach(function(w){_[w]=YO(i,w)})}}return t}(t,e=e.map(G=>X_(G,!1)),E);const F=function hG(i,t){let e=null,s=null;return Array.isArray(t)&&t.length?(e=hI(t[0]),t.length>1&&(s=hI(t[t.length-1]))):t&&(e=hI(t)),e||s?new fG(i,e,s):null}(t,e);return new ak(t,e,w,F)}}let mG=(()=>{class i extends aO{constructor(e,s){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(s.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(e){const s=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(e)?lO(e):e;return lk(this._renderer,null,s,"register",[o]),new _G(s,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(u.FYo),u.LFG(fe))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class _G extends class hB{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new vG(this._id,t,e||{},this._renderer)}}class vG{constructor(t,e,s,o){this.id=t,this.element=e,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",s)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return lk(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function lk(i,t,e,s,o){return i.setProperty(t,`@@${e}:${s}`,o)}const ck="@.disabled";let yG=(()=>{class i{constructor(e,s,o){this.delegate=e,this.engine=s,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),s.onRemovalComplete=(l,f)=>{const _=null==f?void 0:f.parentNode(l);_&&f.removeChild(_,l)}}createRenderer(e,s){const l=this.delegate.createRenderer(e,s);if(!(e&&s&&s.data&&s.data.animation)){let T=this._rendererCache.get(l);return T||(T=new uk("",l,this.engine),this._rendererCache.set(l,T)),T}const f=s.id,_=s.id+"-"+this._currentId;this._currentId++,this.engine.register(_,e);const w=T=>{Array.isArray(T)?T.forEach(w):this.engine.registerTrigger(f,_,e,T.name,T)};return s.data.animation.forEach(w),new bG(this,_,l,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,s,o){e>=0&&e<this._microtaskId?this._zone.run(()=>s(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(l=>{const[f,_]=l;f(_)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([s,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(u.FYo),u.LFG($S),u.LFG(u.R0b))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class uk{constructor(t,e,s){this.namespaceId=t,this.delegate=e,this.engine=s,this.destroyNode=this.delegate.destroyNode?o=>e.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,s,o=!0){this.delegate.insertBefore(t,e,s),this.engine.onInsert(this.namespaceId,e,t,o)}removeChild(t,e,s){this.engine.onRemove(this.namespaceId,e,this.delegate,s)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,s,o){this.delegate.setAttribute(t,e,s,o)}removeAttribute(t,e,s){this.delegate.removeAttribute(t,e,s)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,s,o){this.delegate.setStyle(t,e,s,o)}removeStyle(t,e,s){this.delegate.removeStyle(t,e,s)}setProperty(t,e,s){"@"==e.charAt(0)&&e==ck?this.disableAnimations(t,!!s):this.delegate.setProperty(t,e,s)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,s){return this.delegate.listen(t,e,s)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class bG extends uk{constructor(t,e,s,o){super(e,s,o),this.factory=t,this.namespaceId=e}setProperty(t,e,s){"@"==e.charAt(0)?"."==e.charAt(1)&&e==ck?this.disableAnimations(t,s=void 0===s||!!s):this.engine.process(this.namespaceId,t,e.substr(1),s):this.delegate.setProperty(t,e,s)}listen(t,e,s){if("@"==e.charAt(0)){const o=function wG(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let l=e.substr(1),f="";return"@"!=l.charAt(0)&&([l,f]=function xG(i){const t=i.indexOf(".");return[i.substring(0,t),i.substr(t+1)]}(l)),this.engine.listen(this.namespaceId,o,l,f,_=>{this.factory.scheduleListenerCallback(_._data||-1,s,_)})}return this.delegate.listen(t,e,s)}}let CG=(()=>{class i extends $S{constructor(e,s,o){super(e.body,s,o)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(fe),u.LFG(Z1),u.LFG(oI))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const zf=new u.OlP("AnimationModuleType"),dk=[{provide:aO,useClass:mG},{provide:oI,useFactory:function MG(){return new HV}},{provide:$S,useClass:CG},{provide:u.FYo,useFactory:function DG(i,t,e){return new yG(i,t,e)},deps:[Wi,$S,u.R0b]}],hk=[{provide:Z1,useFactory:()=>new gG},{provide:zf,useValue:"BrowserAnimations"},...dk],EG=[{provide:Z1,useClass:VO},{provide:zf,useValue:"NoopAnimations"},...dk];let fk=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?EG:hk}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:hk,imports:[Ha]}),i})();function SG(i,t){if(1&i&&u._UZ(0,"mat-pseudo-checkbox",4),2&i){const e=u.oxw();u.Q6J("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function AG(i,t){if(1&i&&(u.TgZ(0,"span",5),u._uU(1),u.qZA()),2&i){const e=u.oxw();u.xp6(1),u.hij("(",e.group.label,")")}}const TG=["*"],RG=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function IG(){return!0}});let Li=(()=>{class i{constructor(e,s,o){this._sanityChecks=s,this._document=o,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!P1()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(IO),u.LFG(RG,8),u.LFG(fe))},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Y0],Y0]}),i})();function fI(i){return class extends i{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=ri(t)}}}function dD(i,t){return class extends i{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const s=e||this.defaultColor;s!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),s&&this._elementRef.nativeElement.classList.add(`mat-${s}`),this._color=s)}}}function pI(i){return class extends i{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=ri(t)}}}function gk(i,t=0){return class extends i{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?Q0(e):this.defaultTabIndex}}}function PG(i){return class extends i{constructor(...t){super(...t),this.stateChanges=new Ft.x,this.errorState=!1}updateErrorState(){const t=this.errorState,l=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);l!==t&&(this.errorState=l,this.stateChanges.next())}}}const OG=new u.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function kG(){return(0,u.f3M)(u.soG)}});class jf{constructor(){this._localeChanges=new Ft.x,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let s=this.isValid(t),o=this.isValid(e);return s&&o?!this.compareDate(t,e):s==o}return t==e}clampDate(t,e,s){return e&&this.compareDate(t,e)<0?e:s&&this.compareDate(t,s)>0?s:t}}const gI=new u.OlP("mat-date-formats"),FG=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function mI(i,t){const e=Array(i);for(let s=0;s<i;s++)e[s]=t(s);return e}let LG=(()=>{class i extends jf{constructor(e,s){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const s=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return mI(12,o=>this._format(s,new Date(2017,o,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return mI(31,s=>this._format(e,new Date(2017,0,s+1)))}getDayOfWeekNames(e){const s=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return mI(7,o=>this._format(s,new Date(2017,0,o+1)))}getYearName(e){const s=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(s,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,s,o){let l=this._createDateWithOverflow(e,s,o);return l.getMonth(),l}today(){return new Date}parse(e){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,s){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const o=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},s),{timeZone:"utc"}));return this._format(o,e)}addCalendarYears(e,s){return this.addCalendarMonths(e,12*s)}addCalendarMonths(e,s){let o=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+s,this.getDate(e));return this.getMonth(o)!=((this.getMonth(e)+s)%12+12)%12&&(o=this._createDateWithOverflow(this.getYear(o),this.getMonth(o),0)),o}addCalendarDays(e,s){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+s)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(FG.test(e)){let s=new Date(e);if(this.isValid(s))return s}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,s,o){const l=new Date;return l.setFullYear(e,s,o),l.setHours(0,0,0,0),l}_2digit(e){return("00"+e).slice(-2)}_format(e,s){const o=new Date;return o.setUTCFullYear(s.getFullYear(),s.getMonth(),s.getDate()),o.setUTCHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),e.format(o)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(OG,8),u.LFG(Is))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const NG={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let BG=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[{provide:jf,useClass:LG}],imports:[[q0]]}),i})(),mk=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[{provide:gI,useValue:NG}],imports:[[BG]]}),i})(),_k=(()=>{class i{isErrorState(e,s){return!!(e&&e.invalid&&(e.touched||s&&s.submitted))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class VG{constructor(t,e,s){this._renderer=t,this.element=e,this.config=s,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const vk={enterDuration:225,exitDuration:150},_I=Lg({passive:!0}),yk=["mousedown","touchstart"],bk=["mouseup","mouseleave","touchend","touchcancel"];class UG{constructor(t,e,s,o){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,o.isBrowser&&(this._containerElement=oo(s))}fadeInRipple(t,e,s={}){const o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),l=Object.assign(Object.assign({},vk),s.animation);s.centered&&(t=o.left+o.width/2,e=o.top+o.height/2);const f=s.radius||function zG(i,t,e){const s=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),o=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(s*s+o*o)}(t,e,o),_=t-o.left,w=e-o.top,E=l.enterDuration,T=document.createElement("div");T.classList.add("mat-ripple-element"),T.style.left=_-f+"px",T.style.top=w-f+"px",T.style.height=2*f+"px",T.style.width=2*f+"px",null!=s.color&&(T.style.backgroundColor=s.color),T.style.transitionDuration=`${E}ms`,this._containerElement.appendChild(T),function HG(i){window.getComputedStyle(i).getPropertyValue("opacity")}(T),T.style.transform="scale(1)";const F=new VG(this,T,s);return F.state=0,this._activeRipples.add(F),s.persistent||(this._mostRecentTransientRipple=F),this._runTimeoutOutsideZone(()=>{const G=F===this._mostRecentTransientRipple;F.state=1,!s.persistent&&(!G||!this._isPointerDown)&&F.fadeOut()},E),F}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const s=t.element,o=Object.assign(Object.assign({},vk),t.config.animation);s.style.transitionDuration=`${o.exitDuration}ms`,s.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,s.remove()},o.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=oo(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(yk))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(bk),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=G1(t),s=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!s&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!U1(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let s=0;s<e.length;s++)this.fadeInRipple(e[s].clientX,e[s].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,_I)})})}_removeTriggerEvents(){this._triggerElement&&(yk.forEach(t=>{this._triggerElement.removeEventListener(t,this,_I)}),this._pointerUpEventsRegistered&&bk.forEach(t=>{this._triggerElement.removeEventListener(t,this,_I)}))}}const jG=new u.OlP("mat-ripple-global-options");let fD=(()=>{class i{constructor(e,s,o,l,f){this._elementRef=e,this._animationMode=f,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=l||{},this._rippleRenderer=new UG(this,s,e,o)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,s=0,o){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,s,Object.assign(Object.assign({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(Is),u.Y36(jG,8),u.Y36(zf,8))},i.\u0275dir=u.lG2({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,s){2&e&&u.ekj("mat-ripple-unbounded",s.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),KS=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Li,q0],Li]}),i})(),WG=(()=>{class i{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(zf,8))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,s){2&e&&u.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===s.state)("mat-pseudo-checkbox-checked","checked"===s.state)("mat-pseudo-checkbox-disabled",s.disabled)("_mat-animation-noopable","NoopAnimations"===s._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,s){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),i})(),YG=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Li]]}),i})();const wk=new u.OlP("MAT_OPTION_PARENT_COMPONENT"),xk=new u.OlP("MatOptgroup");let qG=0;class $G{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let ZG=(()=>{class i{constructor(e,s,o,l){this._element=e,this._changeDetectorRef=s,this._parent=o,this.group=l,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+qG++,this.onSelectionChange=new u.vpe,this._stateChanges=new Ft.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=ri(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,s){const o=this._getHostElement();"function"==typeof o.focus&&o.focus(s)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!K0(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new $G(this,e))}}return i.\u0275fac=function(e){u.$Z()},i.\u0275dir=u.lG2({type:i,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),i})(),Ck=(()=>{class i extends ZG{constructor(e,s,o,l){super(e,s,o,l)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(wk,8),u.Y36(xk,8))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,s){1&e&&u.NdJ("click",function(){return s._selectViaInteraction()})("keydown",function(l){return s._handleKeydown(l)}),2&e&&(u.Ikx("id",s.id),u.uIk("tabindex",s._getTabIndex())("aria-selected",s._getAriaSelected())("aria-disabled",s.disabled.toString()),u.ekj("mat-selected",s.selected)("mat-option-multiple",s.multiple)("mat-active",s.active)("mat-option-disabled",s.disabled))},exportAs:["matOption"],features:[u.qOj],ngContentSelectors:TG,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,s){1&e&&(u.F$t(),u.YNc(0,SG,1,2,"mat-pseudo-checkbox",0),u.TgZ(1,"span",1),u.Hsn(2),u.qZA(),u.YNc(3,AG,2,1,"span",2),u._UZ(4,"div",3)),2&e&&(u.Q6J("ngIf",s.multiple),u.xp6(3),u.Q6J("ngIf",s.group&&s.group._inert),u.xp6(1),u.Q6J("matRippleTrigger",s._getHostElement())("matRippleDisabled",s.disabled||s.disableRipple))},directives:[WG,Kr,fD],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),i})();function Mk(i,t,e){if(e.length){let s=t.toArray(),o=e.toArray(),l=0;for(let f=0;f<i+1;f++)s[f].group&&s[f].group===o[l]&&l++;return l}return 0}let Dk=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[KS,ws,Li,YG]]}),i})();const QG=["*",[["mat-toolbar-row"]]],XG=["*","mat-toolbar-row"],JG=dD(class{constructor(i){this._elementRef=i}});let eU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=u.lG2({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),i})(),tU=(()=>{class i extends JG{constructor(e,s,o){super(e),this._platform=s,this._document=o}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(Is),u.Y36(fe))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-toolbar"]],contentQueries:function(e,s,o){if(1&e&&u.Suo(o,eU,5),2&e){let l;u.iGM(l=u.CRH())&&(s._toolbarRows=l)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,s){2&e&&u.ekj("mat-toolbar-multiple-rows",s._toolbarRows.length>0)("mat-toolbar-single-row",0===s._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[u.qOj],ngContentSelectors:XG,decls:2,vars:0,template:function(e,s){1&e&&(u.F$t(QG),u.Hsn(0),u.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),Ek=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Li],Li]}),i})();const iU={provide:u.tb,useFactory:function nU(i,t){return()=>{if(Ki(t)){const e=Array.from(i.querySelectorAll(`[class*=${Sk}]`)),s=/\bflex-layout-.+?\b/g;e.forEach(o=>{o.classList.contains(`${Sk}ssr`)&&o.parentNode?o.parentNode.removeChild(o):o.className.replace(s,"")})}}},deps:[fe,u.Lbi],multi:!0},Sk="flex-layout-";let vI=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[iU]}),i})();class nb{constructor(t=!1,e="all",s="",o="",l=0){this.matches=t,this.mediaQuery=e,this.mqAlias=s,this.suffix=o,this.priority=l,this.property=""}clone(){return new nb(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let Ak=(()=>{class i{constructor(){this.stylesheet=new Map}addStyleToElement(e,s,o){const l=this.stylesheet.get(e);l?l.set(s,o):this.stylesheet.set(e,new Map([[s,o]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(e,s){const o=this.stylesheet.get(e);let l="";if(o){const f=o.get(s);("number"==typeof f||"string"==typeof f)&&(l=f+"")}return l}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=(0,u.Yz7)({factory:function(){return new i},token:i,providedIn:"root"}),i})();const yI={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},lh=new u.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>yI}),ib=new u.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),bI=new u.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function Tk(i,t){return i=i?i.clone():new nb,t&&(i.mqAlias=t.alias,i.mediaQuery=t.mediaQuery,i.suffix=t.suffix,i.priority=t.priority),i}const wI="inline",Ik=["row","column","row-reverse","column-reverse"];function oU(i){if(i)switch(i.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":i="wrap-reverse";break;case"no":case"none":case"nowrap":i="nowrap";break;default:i="wrap"}return i}let fs=(()=>{class i{constructor(e,s,o,l){this.elementRef=e,this.styleBuilder=s,this.styler=o,this.marshal=l,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new Ft.x,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(e){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,this.marshal.activatedAlias)}ngOnChanges(e){Object.keys(e).forEach(s=>{if(-1!==this.inputs.indexOf(s)){const o=s.split(".").slice(1).join(".");this.setValue(e[s].currentValue,o)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(e=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),e)}addStyles(e,s){const o=this.styleBuilder,l=o.shouldCache;let f=this.styleCache.get(e);(!f||!l)&&(f=o.buildStyles(e,s),l&&this.styleCache.set(e,f)),this.mru=Object.assign({},f),this.applyStyleToElement(f),o.sideEffect(e,f,s)}clearStyles(){Object.keys(this.mru).forEach(e=>{this.mru[e]=""}),this.applyStyleToElement(this.mru),this.mru={}}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(e,s=!1){if(e){const[o,l]=this.styler.getFlowDirection(e);if(!l&&s){const f=function rU(i){let[t,e,s]=function sU(i){i=i?i.toLowerCase():"";let[t,e,s]=i.split(" ");return Ik.find(o=>o===t)||(t=Ik[0]),e===wI&&(e=s!==wI?s:"",s=wI),[t,oU(e),!!s]}(i);return function aU(i,t=null,e=!1){return{display:e?"inline-flex":"flex","box-sizing":"border-box","flex-direction":i,"flex-wrap":t||null}}(t,e,s)}(o);this.styler.applyStyleToElements(f,[e])}return o.trim()}return"row"}hasWrap(e){return this.styler.hasWrap(e)}applyStyleToElement(e,s,o=this.nativeElement){this.styler.applyStyleToElement(o,e,s)}setValue(e,s){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,s)}updateWithValue(e){this.currentValue!==e&&(this.addStyles(e),this.currentValue=e)}}return i.\u0275fac=function(e){u.$Z()},i.\u0275dir=u.lG2({type:i,features:[u.TTD]}),i})();const lU=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],Rk="(orientation: portrait) and (max-width: 599.98px)",Pk="(orientation: landscape) and (max-width: 959.98px)",Ok="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",kk="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",Fk="(orientation: portrait) and (min-width: 840px)",Lk="(orientation: landscape) and (min-width: 1280px)",Ng={HANDSET:`${Rk}, ${Pk}`,TABLET:`${Ok} , ${kk}`,WEB:`${Fk}, ${Lk} `,HANDSET_PORTRAIT:`${Rk}`,TABLET_PORTRAIT:`${Ok} `,WEB_PORTRAIT:`${Fk}`,HANDSET_LANDSCAPE:`${Pk}`,TABLET_LANDSCAPE:`${kk}`,WEB_LANDSCAPE:`${Lk}`},cU=[{alias:"handset",priority:2e3,mediaQuery:Ng.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:Ng.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:Ng.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:Ng.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:Ng.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:Ng.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:Ng.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:Ng.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:Ng.WEB_PORTRAIT,overlapping:!0}],dU=/(\.|-|_)/g;function hU(i){let t=i.length>0?i.charAt(0):"",e=i.length>1?i.slice(1):"";return t.toUpperCase()+e}function gU(i,t=[]){const e={};return i.forEach(s=>{e[s.alias]=s}),t.forEach(s=>{e[s.alias]?function uU(i,...t){if(null==i)throw TypeError("Cannot convert undefined or null to object");for(let e of t)if(null!=e)for(let s in e)e.hasOwnProperty(s)&&(i[s]=e[s])}(e[s.alias],s):e[s.alias]=s}),function pU(i){return i.forEach(t=>{t.suffix||(t.suffix=function fU(i){return i.replace(dU,"|").split("|").map(hU).join("")}(t.alias),t.overlapping=!!t.overlapping)}),i}(Object.keys(e).map(s=>e[s]))}const Nk=new u.OlP("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const i=(0,u.f3M)(bI),t=(0,u.f3M)(lh),e=[].concat.apply([],(i||[]).map(o=>Array.isArray(o)?o:[o]));return gU((t.disableDefaultBps?[]:lU).concat(t.addOrientationBps?cU:[]),e)}});function pD(i,t){return(t&&t.priority||0)-(i&&i.priority||0)}function mU(i,t){return(i.priority||0)-(t.priority||0)}let gD=(()=>{class i{constructor(e){this.findByMap=new Map,this.items=[...e].sort(mU)}findByAlias(e){return e?this.findWithPredicate(e,s=>s.alias==e):null}findByQuery(e){return this.findWithPredicate(e,s=>s.mediaQuery==e)}get overlappings(){return this.items.filter(e=>1==e.overlapping)}get aliases(){return this.items.map(e=>e.alias)}get suffixes(){return this.items.map(e=>e.suffix?e.suffix:"")}findWithPredicate(e,s){let o=this.findByMap.get(e);return o||(o=this.items.find(s)||null,this.findByMap.set(e,o)),o||null}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(Nk))},i.\u0275prov=(0,u.Yz7)({factory:function(){return new i((0,u.LFG)(Nk))},token:i,providedIn:"root"}),i})(),QS=(()=>{class i{constructor(e,s,o){this._zone=e,this._platformId=s,this._document=o,this.source=new Hr(new nb(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const e=[];return this.registry.forEach((s,o)=>{s.matches&&e.push(o)}),e}isActive(e){const s=this.registry.get(e);return s?s.matches:this.registerQuery(e).some(o=>o.matches)}observe(e,s=!1){if(e&&e.length){const o=this._observable$.pipe(Jn(f=>!s||e.indexOf(f.mediaQuery)>-1)),l=new Ai.y(f=>{const _=this.registerQuery(e);if(_.length){const w=_.pop();_.forEach(E=>{f.next(E)}),this.source.next(w)}f.complete()});return(0,Hs.T)(l,o)}return this._observable$}registerQuery(e){const s=Array.isArray(e)?e:[e],o=[];return function _U(i,t){const e=i.filter(s=>!Bk[s]);if(e.length>0){const s=e.join(", ");try{const o=t.createElement("style");o.setAttribute("type","text/css"),o.styleSheet||o.appendChild(t.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${s} {.fx-query-test{ }}\n`)),t.head.appendChild(o),e.forEach(l=>Bk[l]=o)}catch(o){console.error(o)}}}(s,this._document),s.forEach(l=>{const f=w=>{this._zone.run(()=>this.source.next(new nb(w.matches,l)))};let _=this.registry.get(l);_||(_=this.buildMQL(l),_.addListener(f),this.pendingRemoveListenerFns.push(()=>_.removeListener(f)),this.registry.set(l,_)),_.matches&&o.push(new nb(!0,l))}),o}ngOnDestroy(){let e;for(;e=this.pendingRemoveListenerFns.pop();)e()}buildMQL(e){return function vU(i,t){return t&&window.matchMedia("all").addListener?window.matchMedia(i):{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(e,Ki(this._platformId))}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(u.R0b),u.LFG(u.Lbi),u.LFG(fe))},i.\u0275prov=(0,u.Yz7)({factory:function(){return new i((0,u.LFG)(u.R0b),(0,u.LFG)(u.Lbi),(0,u.LFG)(fe))},token:i,providedIn:"root"}),i})();const Bk={},yx="print",wU={alias:yx,mediaQuery:yx,priority:1e3};let Vk=(()=>{class i{constructor(e,s,o){this.breakpoints=e,this.layoutConfig=s,this._document=o,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.isPrinting=!1,this.queue=new xU,this.deactivations=[]}withPrintQuery(e){return[...e,yx]}isPrintEvent(e){return e.mediaQuery.startsWith(yx)}get printAlias(){return this.layoutConfig.printWithBreakpoints||[]}get printBreakPoints(){return this.printAlias.map(e=>this.breakpoints.findByAlias(e)).filter(e=>null!==e)}getEventBreakpoints({mediaQuery:e}){const s=this.breakpoints.findByQuery(e);return(s?[...this.printBreakPoints,s]:this.printBreakPoints).sort(pD)}updateEvent(e){let s=this.breakpoints.findByQuery(e.mediaQuery);return this.isPrintEvent(e)&&(s=this.getEventBreakpoints(e)[0],e.mediaQuery=s?s.mediaQuery:""),Tk(e,s)}registerBeforeAfterPrintHooks(e){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const s=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(e,this.getEventBreakpoints(new nb(!0,yx))),e.updateStyles())},o=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(e),e.updateStyles())};this._document.defaultView.addEventListener("beforeprint",s),this._document.defaultView.addEventListener("afterprint",o),this.beforePrintEventListeners.push(s),this.afterPrintEventListeners.push(o)}interceptEvents(e){return this.registerBeforeAfterPrintHooks(e),s=>{this.isPrintEvent(s)?s.matches&&!this.isPrinting?(this.startPrinting(e,this.getEventBreakpoints(s)),e.updateStyles()):!s.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(e),e.updateStyles()):this.collectActivations(s)}}blockPropagation(){return e=>!(this.isPrinting||this.isPrintEvent(e))}startPrinting(e,s){this.isPrinting=!0,e.activatedBreakpoints=this.queue.addPrintBreakpoints(s)}stopPrinting(e){e.activatedBreakpoints=this.deactivations,this.deactivations=[],this.queue.clear(),this.isPrinting=!1}collectActivations(e){if(!this.isPrinting||this.isPrintingBeforeAfterEvent)if(e.matches)this.isPrintingBeforeAfterEvent||(this.deactivations=[]);else{const s=this.breakpoints.findByQuery(e.mediaQuery);s&&(this.deactivations.push(s),this.deactivations.sort(pD))}}ngOnDestroy(){this.beforePrintEventListeners.forEach(e=>this._document.defaultView.removeEventListener("beforeprint",e)),this.afterPrintEventListeners.forEach(e=>this._document.defaultView.removeEventListener("afterprint",e))}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(gD),u.LFG(lh),u.LFG(fe))},i.\u0275prov=(0,u.Yz7)({factory:function(){return new i((0,u.LFG)(gD),(0,u.LFG)(lh),(0,u.LFG)(fe))},token:i,providedIn:"root"}),i})();class xU{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(t){return t.push(wU),t.sort(pD),t.forEach(e=>this.addBreakpoint(e)),this.printBreakpoints}addBreakpoint(t){t&&void 0===this.printBreakpoints.find(s=>s.mediaQuery===t.mediaQuery)&&(this.printBreakpoints=function CU(i){return!!i&&i.mediaQuery.startsWith(yx)}(t)?[t,...this.printBreakpoints]:[...this.printBreakpoints,t])}clear(){this.printBreakpoints=[]}}function Gk(i){for(let t in i){let e=i[t]||"";switch(t){case"display":i.display="flex"===e?["-webkit-flex","flex"]:"inline-flex"===e?["-webkit-inline-flex","inline-flex"]:e;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":i["-webkit-"+t]=e;break;case"flex-direction":e=e||"row",i["-webkit-flex-direction"]=e,i["flex-direction"]=e;break;case"order":i.order=i["-webkit-"+t]=isNaN(+e)?"0":e}}return i}let Wr=(()=>{class i{constructor(e,s,o,l){this._serverStylesheet=e,this._serverModuleLoaded=s,this._platformId=o,this.layoutConfig=l}applyStyleToElement(e,s,o=null){let l={};"string"==typeof s&&(l[s]=o,s=l),l=this.layoutConfig.disableVendorPrefixes?s:Gk(s),this._applyMultiValueStyleToElement(l,e)}applyStyleToElements(e,s=[]){const o=this.layoutConfig.disableVendorPrefixes?e:Gk(e);s.forEach(l=>{this._applyMultiValueStyleToElement(o,l)})}getFlowDirection(e){const s="flex-direction";let o=this.lookupStyle(e,s);return[o||"row",this.lookupInlineStyle(e,s)||Qo(this._platformId)&&this._serverModuleLoaded?o:""]}hasWrap(e){return"wrap"===this.lookupStyle(e,"flex-wrap")}lookupAttributeValue(e,s){return e.getAttribute(s)||""}lookupInlineStyle(e,s){return Ki(this._platformId)?e.style.getPropertyValue(s):this._getServerStyle(e,s)}lookupStyle(e,s,o=!1){let l="";return e&&((l=this.lookupInlineStyle(e,s))||(Ki(this._platformId)?o||(l=getComputedStyle(e).getPropertyValue(s)):this._serverModuleLoaded&&(l=this._serverStylesheet.getStyleForElement(e,s)))),l?l.trim():""}_applyMultiValueStyleToElement(e,s){Object.keys(e).sort().forEach(o=>{const l=e[o],f=Array.isArray(l)?l:[l];f.sort();for(let _ of f)_=_?_+"":"",Ki(this._platformId)||!this._serverModuleLoaded?Ki(this._platformId)?s.style.setProperty(o,_):this._setServerStyle(s,o,_):this._serverStylesheet.addStyleToElement(s,o,_)})}_setServerStyle(e,s,o){s=s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const l=this._readStyleAttribute(e);l[s]=o||"",this._writeStyleAttribute(e,l)}_getServerStyle(e,s){return this._readStyleAttribute(e)[s]||""}_readStyleAttribute(e){const s={},o=e.getAttribute("style");if(o){const l=o.split(/;+/g);for(let f=0;f<l.length;f++){const _=l[f].trim();if(_.length>0){const w=_.indexOf(":");if(-1===w)throw new Error(`Invalid CSS style: ${_}`);s[_.substr(0,w).trim()]=_.substr(w+1).trim()}}}return s}_writeStyleAttribute(e,s){let o="";for(const l in s)s[l]&&(o+=l+":"+s[l]+";");e.setAttribute("style",o)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(Ak),u.LFG(ib),u.LFG(u.Lbi),u.LFG(lh))},i.\u0275prov=(0,u.Yz7)({factory:function(){return new i((0,u.LFG)(Ak),(0,u.LFG)(ib),(0,u.LFG)(u.Lbi),(0,u.LFG)(lh))},token:i,providedIn:"root"}),i})();class zs{constructor(){this.shouldCache=!0}sideEffect(t,e,s){}}let ps=(()=>{class i{constructor(e,s,o){this.matchMedia=e,this.breakpoints=s,this.hook=o,this.activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new Ft.x,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?this.activatedBreakpoints[0].alias:""}onMediaChange(e){const s=this.findByQuery(e.mediaQuery);s&&((e=Tk(e,s)).matches&&-1===this.activatedBreakpoints.indexOf(s)?(this.activatedBreakpoints.push(s),this.activatedBreakpoints.sort(pD),this.updateStyles()):!e.matches&&-1!==this.activatedBreakpoints.indexOf(s)&&(this.activatedBreakpoints.splice(this.activatedBreakpoints.indexOf(s),1),this.activatedBreakpoints.sort(pD),this.updateStyles()))}init(e,s,o,l,f=[]){zk(this.updateMap,e,s,o),zk(this.clearMap,e,s,l),this.buildElementKeyMap(e,s),this.watchExtraTriggers(e,s,f)}getValue(e,s,o){const l=this.elementMap.get(e);if(l){const f=void 0!==o?l.get(o):this.getActivatedValues(l,s);if(f)return f.get(s)}}hasValue(e,s){const o=this.elementMap.get(e);if(o){const l=this.getActivatedValues(o,s);if(l)return void 0!==l.get(s)||!1}return!1}setValue(e,s,o,l){let f=this.elementMap.get(e);if(f){const w=(f.get(l)||new Map).set(s,o);f.set(l,w),this.elementMap.set(e,f)}else f=(new Map).set(l,(new Map).set(s,o)),this.elementMap.set(e,f);const _=this.getValue(e,s);void 0!==_&&this.updateElement(e,s,_)}trackValue(e,s){return this.subject.asObservable().pipe(Jn(o=>o.element===e&&o.key===s))}updateStyles(){this.elementMap.forEach((e,s)=>{const o=new Set(this.elementKeyMap.get(s));let l=this.getActivatedValues(e);l&&l.forEach((f,_)=>{this.updateElement(s,_,f),o.delete(_)}),o.forEach(f=>{if(l=this.getActivatedValues(e,f),l){const _=l.get(f);this.updateElement(s,f,_)}else this.clearElement(s,f)})})}clearElement(e,s){const o=this.clearMap.get(e);if(o){const l=o.get(s);l&&(l(),this.subject.next({element:e,key:s,value:""}))}}updateElement(e,s,o){const l=this.updateMap.get(e);if(l){const f=l.get(s);f&&(f(o),this.subject.next({element:e,key:s,value:o}))}}releaseElement(e){const s=this.watcherMap.get(e);s&&(s.forEach(l=>l.unsubscribe()),this.watcherMap.delete(e));const o=this.elementMap.get(e);o&&(o.forEach((l,f)=>o.delete(f)),this.elementMap.delete(e))}triggerUpdate(e,s){const o=this.elementMap.get(e);if(o){const l=this.getActivatedValues(o,s);l&&(s?this.updateElement(e,s,l.get(s)):l.forEach((f,_)=>this.updateElement(e,_,f)))}}buildElementKeyMap(e,s){let o=this.elementKeyMap.get(e);o||(o=new Set,this.elementKeyMap.set(e,o)),o.add(s)}watchExtraTriggers(e,s,o){if(o&&o.length){let l=this.watcherMap.get(e);if(l||(l=new Map,this.watcherMap.set(e,l)),!l.get(s)){const _=(0,Hs.T)(...o).subscribe(()=>{const w=this.getValue(e,s);this.updateElement(e,s,w)});l.set(s,_)}}}findByQuery(e){return this.breakpoints.findByQuery(e)}getActivatedValues(e,s){for(let l=0;l<this.activatedBreakpoints.length;l++){const _=e.get(this.activatedBreakpoints[l].alias);if(_&&(void 0===s||_.has(s)&&null!=_.get(s)))return _}const o=e.get("");return void 0===s||o&&o.has(s)?o:void 0}observeActivations(){const s=this.breakpoints.items.map(o=>o.mediaQuery);this.matchMedia.observe(this.hook.withPrintQuery(s)).pipe((0,_i.b)(this.hook.interceptEvents(this)),Jn(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(QS),u.LFG(gD),u.LFG(Vk))},i.\u0275prov=(0,u.Yz7)({factory:function(){return new i((0,u.LFG)(QS),(0,u.LFG)(gD),(0,u.LFG)(Vk))},token:i,providedIn:"root"}),i})();function zk(i,t,e,s){if(void 0!==s){let o=i.get(t);o||(o=new Map,i.set(t,o)),o.set(e,s)}}let PU=(()=>{class i extends zs{buildStyles(e,s){return{display:"true"===e?s.display||(s.isServer?"initial":""):"none"}}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275prov=(0,u.Yz7)({factory:function(){return new i},token:i,providedIn:"root"}),i})(),OU=(()=>{class i extends fs{constructor(e,s,o,l,f,_,w){super(e,s,o,l),this.layoutConfig=f,this.platformId=_,this.serverModuleLoaded=w,this.DIRECTIVE_KEY="show-hide",this.display="",this.hasLayout=!1,this.hasFlexChild=!1}ngAfterViewInit(){this.trackExtraTriggers();const e=Array.from(this.nativeElement.children);for(let o=0;o<e.length;o++)if(this.marshal.hasValue(e[o],"flex")){this.hasFlexChild=!0;break}xI.has(this.nativeElement)?this.display=xI.get(this.nativeElement):(this.display=this.getDisplayStyle(),xI.set(this.nativeElement,this.display)),this.init();const s=this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY,"");void 0===s||""===s?this.setValue(!0,""):this.triggerUpdate()}ngOnChanges(e){Object.keys(e).forEach(s=>{if(-1!==this.inputs.indexOf(s)){const o=s.split("."),l=o.slice(1).join("."),f=e[s].currentValue;let _=""===f||0!==f&&ri(f);"fxHide"===o[0]&&(_=!_),this.setValue(_,l)}})}trackExtraTriggers(){this.hasLayout=this.marshal.hasValue(this.nativeElement,"layout"),["layout","layout-align"].forEach(e=>{this.marshal.trackValue(this.nativeElement,e).pipe(Kn(this.destroySubject)).subscribe(this.triggerUpdate.bind(this))})}getDisplayStyle(){return this.hasLayout||this.hasFlexChild&&this.layoutConfig.addFlexToParent?"flex":this.styler.lookupStyle(this.nativeElement,"display",!0)}updateWithValue(e=!0){if(""===e)return;const s=Qo(this.platformId);this.addStyles(e?"true":"false",{display:this.display,isServer:s}),s&&this.serverModuleLoaded&&this.nativeElement.style.setProperty("display",""),this.marshal.triggerUpdate(this.parentElement,"layout-gap")}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(PU),u.Y36(Wr),u.Y36(ps),u.Y36(lh),u.Y36(u.Lbi),u.Y36(ib))},i.\u0275dir=u.lG2({type:i,features:[u.qOj,u.TTD]}),i})();const xI=new WeakMap,kU=["fxShow","fxShow.print","fxShow.xs","fxShow.sm","fxShow.md","fxShow.lg","fxShow.xl","fxShow.lt-sm","fxShow.lt-md","fxShow.lt-lg","fxShow.lt-xl","fxShow.gt-xs","fxShow.gt-sm","fxShow.gt-md","fxShow.gt-lg","fxHide","fxHide.print","fxHide.xs","fxHide.sm","fxHide.md","fxHide.lg","fxHide.xl","fxHide.lt-sm","fxHide.lt-md","fxHide.lt-lg","fxHide.lt-xl","fxHide.gt-xs","fxHide.gt-sm","fxHide.gt-md","fxHide.gt-lg"];let XS=(()=>{class i extends OU{constructor(){super(...arguments),this.inputs=kU}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,selectors:[["","fxShow",""],["","fxShow.print",""],["","fxShow.xs",""],["","fxShow.sm",""],["","fxShow.md",""],["","fxShow.lg",""],["","fxShow.xl",""],["","fxShow.lt-sm",""],["","fxShow.lt-md",""],["","fxShow.lt-lg",""],["","fxShow.lt-xl",""],["","fxShow.gt-xs",""],["","fxShow.gt-sm",""],["","fxShow.gt-md",""],["","fxShow.gt-lg",""],["","fxHide",""],["","fxHide.print",""],["","fxHide.xs",""],["","fxHide.sm",""],["","fxHide.md",""],["","fxHide.lg",""],["","fxHide.xl",""],["","fxHide.lt-sm",""],["","fxHide.lt-md",""],["","fxHide.lt-lg",""],["","fxHide.lt-xl",""],["","fxHide.gt-xs",""],["","fxHide.gt-sm",""],["","fxHide.gt-md",""],["","fxHide.gt-lg",""]],inputs:{fxShow:"fxShow","fxShow.print":"fxShow.print","fxShow.xs":"fxShow.xs","fxShow.sm":"fxShow.sm","fxShow.md":"fxShow.md","fxShow.lg":"fxShow.lg","fxShow.xl":"fxShow.xl","fxShow.lt-sm":"fxShow.lt-sm","fxShow.lt-md":"fxShow.lt-md","fxShow.lt-lg":"fxShow.lt-lg","fxShow.lt-xl":"fxShow.lt-xl","fxShow.gt-xs":"fxShow.gt-xs","fxShow.gt-sm":"fxShow.gt-sm","fxShow.gt-md":"fxShow.gt-md","fxShow.gt-lg":"fxShow.gt-lg",fxHide:"fxHide","fxHide.print":"fxHide.print","fxHide.xs":"fxHide.xs","fxHide.sm":"fxHide.sm","fxHide.md":"fxHide.md","fxHide.lg":"fxHide.lg","fxHide.xl":"fxHide.xl","fxHide.lt-sm":"fxHide.lt-sm","fxHide.lt-md":"fxHide.lt-md","fxHide.lt-lg":"fxHide.lt-lg","fxHide.lt-xl":"fxHide.lt-xl","fxHide.gt-xs":"fxHide.gt-xs","fxHide.gt-sm":"fxHide.gt-sm","fxHide.gt-md":"fxHide.gt-md","fxHide.gt-lg":"fxHide.gt-lg"},features:[u.qOj]}),i})();class FU{constructor(t,e,s=!0){this.key=t,this.value=e,this.key=s?t.replace(/['"]/g,"").trim():t.trim(),this.value=s?e.replace(/['"]/g,"").trim():e.trim(),this.value=this.value.replace(/;/,"")}}function jk(i){let t=typeof i;return"object"===t?i.constructor===Array?"array":i.constructor===Set?"set":"object":t}function Yk(i){const[t,...e]=i.split(":");return new FU(t,e.join(":"))}function qk(i,t){return t.key&&(i[t.key]=t.value),i}let BU=(()=>{class i extends fs{constructor(e,s,o,l,f,_,w,E,T){super(e,null,s,o),this.sanitizer=l,this.ngStyleInstance=w,this.DIRECTIVE_KEY="ngStyle",this.ngStyleInstance||(this.ngStyleInstance=new Kf(e,f,_)),this.init();const F=this.nativeElement.getAttribute("style")||"";this.fallbackStyles=this.buildStyleMap(F),this.isServer=E&&Qo(T)}updateWithValue(e){const s=this.buildStyleMap(e);this.ngStyleInstance.ngStyle=Object.assign(Object.assign({},this.fallbackStyles),s),this.isServer&&this.applyStyleToElement(s),this.ngStyleInstance.ngDoCheck()}clearStyles(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}buildStyleMap(e){const s=o=>this.sanitizer.sanitize(u.q3G.STYLE,o)||"";if(e)switch(jk(e)){case"string":return Zk(function LU(i,t=";"){return String(i).trim().split(t).map(e=>e.trim()).filter(e=>""!==e)}(e),s);case"array":return Zk(e,s);default:return function Wk(i,t){let e=[];return"set"===jk(i)?i.forEach(s=>e.push(s)):Object.keys(i).forEach(s=>{e.push(`${s}:${i[s]}`)}),function NU(i,t){return i.map(Yk).filter(s=>!!s).map(s=>(t&&(s.value=t(s.value)),s)).reduce(qk,{})}(e,t)}(e,s)}return{}}ngDoCheck(){this.ngStyleInstance.ngDoCheck()}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(Wr),u.Y36(ps),u.Y36(Ls),u.Y36(u.aQg),u.Y36(u.Qsj),u.Y36(Kf,10),u.Y36(ib),u.Y36(u.Lbi))},i.\u0275dir=u.lG2({type:i,features:[u.qOj]}),i})();const VU=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"];let $k=(()=>{class i extends BU{constructor(){super(...arguments),this.inputs=VU}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[u.qOj]}),i})();function Zk(i,t){return i.map(Yk).filter(s=>!!s).map(s=>(t&&(s.value=t(s.value)),s)).reduce(qk,{})}let Kk=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[vI]]}),i})(),Qk=(()=>{class i{constructor(e,s){this._renderer=e,this._elementRef=s,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,s){this._renderer.setProperty(this._elementRef.nativeElement,e,s)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.Qsj),u.Y36(u.SBq))},i.\u0275dir=u.lG2({type:i}),i})(),rb=(()=>{class i extends Qk{}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,features:[u.qOj]}),i})();const Kc=new u.OlP("NgValueAccessor"),UU={provide:Kc,useExisting:(0,u.Gpc)(()=>JS),multi:!0},zU=new u.OlP("CompositionEventMode");let JS=(()=>{class i extends Qk{constructor(e,s,o){super(e,s),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function HU(){const i=Ee()?Ee().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(zU,8))},i.\u0275dir=u.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,s){1&e&&u.NdJ("input",function(l){return s._handleInput(l.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(l){return s._compositionEnd(l.target.value)})},features:[u._Bn([UU]),u.qOj]}),i})();function J_(i){return null==i||0===i.length}function Jk(i){return null!=i&&"number"==typeof i.length}const zo=new u.OlP("NgValidators"),ev=new u.OlP("NgAsyncValidators"),jU=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class eF{static min(t){return function tF(i){return t=>{if(J_(t.value)||J_(i))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}(t)}static max(t){return function nF(i){return t=>{if(J_(t.value)||J_(i))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}(t)}static required(t){return function iF(i){return J_(i.value)?{required:!0}:null}(t)}static requiredTrue(t){return function rF(i){return!0===i.value?null:{required:!0}}(t)}static email(t){return function sF(i){return J_(i.value)||jU.test(i.value)?null:{email:!0}}(t)}static minLength(t){return function oF(i){return t=>J_(t.value)||!Jk(t.value)?null:t.value.length<i?{minlength:{requiredLength:i,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function aF(i){return t=>Jk(t.value)&&t.value.length>i?{maxlength:{requiredLength:i,actualLength:t.value.length}}:null}(t)}static pattern(t){return function lF(i){if(!i)return mD;let t,e;return"string"==typeof i?(e="","^"!==i.charAt(0)&&(e+="^"),e+=i,"$"!==i.charAt(i.length-1)&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),s=>{if(J_(s.value))return null;const o=s.value;return t.test(o)?null:{pattern:{requiredPattern:e,actualValue:o}}}}(t)}static nullValidator(t){return null}static compose(t){return pF(t)}static composeAsync(t){return gF(t)}}function mD(i){return null}function cF(i){return null!=i}function uF(i){const t=(0,u.QGY)(i)?(0,Xi.D)(i):i;return(0,u.CqO)(t),t}function dF(i){let t={};return i.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function hF(i,t){return t.map(e=>e(i))}function fF(i){return i.map(t=>function WU(i){return!i.validate}(t)?t:e=>t.validate(e))}function pF(i){if(!i)return null;const t=i.filter(cF);return 0==t.length?null:function(e){return dF(hF(e,t))}}function CI(i){return null!=i?pF(fF(i)):null}function gF(i){if(!i)return null;const t=i.filter(cF);return 0==t.length?null:function(e){return d1(hF(e,t).map(uF)).pipe((0,At.U)(dF))}}function MI(i){return null!=i?gF(fF(i)):null}function mF(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function _F(i){return i._rawValidators}function vF(i){return i._rawAsyncValidators}function DI(i){return i?Array.isArray(i)?i:[i]:[]}function eA(i,t){return Array.isArray(i)?i.includes(t):i===t}function yF(i,t){const e=DI(t);return DI(i).forEach(o=>{eA(e,o)||e.push(o)}),e}function bF(i,t){return DI(t).filter(e=>!eA(i,e))}class wF{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=CI(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=MI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Bg extends wF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yl extends wF{get formDirective(){return null}get path(){return null}}let tA=(()=>{class i extends class xF{constructor(t){this._cd=t}is(t){var e,s,o;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(o=null===(s=this._cd)||void 0===s?void 0:s.control)||void 0===o?void 0:o[t])}}{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(Bg,2))},i.\u0275dir=u.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,s){2&e&&u.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))},features:[u.qOj]}),i})();function _D(i,t){AI(i,t),t.valueAccessor.writeValue(i.value),function eH(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&MF(i,t)})}(i,t),function nH(i,t){const e=(s,o)=>{t.valueAccessor.writeValue(s),o&&t.viewToModelUpdate(s)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function tH(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&MF(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function JU(i,t){if(t.valueAccessor.setDisabledState){const e=s=>{t.valueAccessor.setDisabledState(s)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function rA(i,t,e=!0){const s=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(s),t.valueAccessor.registerOnTouched(s)),oA(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function sA(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function AI(i,t){const e=_F(i);null!==t.validator?i.setValidators(mF(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const s=vF(i);null!==t.asyncValidator?i.setAsyncValidators(mF(s,t.asyncValidator)):"function"==typeof s&&i.setAsyncValidators([s]);const o=()=>i.updateValueAndValidity();sA(t._rawValidators,o),sA(t._rawAsyncValidators,o)}function oA(i,t){let e=!1;if(null!==i){if(null!==t.validator){const o=_F(i);if(Array.isArray(o)&&o.length>0){const l=o.filter(f=>f!==t.validator);l.length!==o.length&&(e=!0,i.setValidators(l))}}if(null!==t.asyncValidator){const o=vF(i);if(Array.isArray(o)&&o.length>0){const l=o.filter(f=>f!==t.asyncValidator);l.length!==o.length&&(e=!0,i.setAsyncValidators(l))}}}const s=()=>{};return sA(t._rawValidators,s),sA(t._rawAsyncValidators,s),e}function MF(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function DF(i,t){AI(i,t)}function EF(i,t){i._syncPendingControls(),t.forEach(e=>{const s=e.control;"submit"===s.updateOn&&s._pendingChange&&(e.viewToModelUpdate(s._pendingValue),s._pendingChange=!1)})}function aA(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}const vD="VALID",lA="INVALID",bx="PENDING",yD="DISABLED";function PI(i){return(cA(i)?i.validators:i)||null}function SF(i){return Array.isArray(i)?CI(i):i||null}function OI(i,t){return(cA(t)?t.asyncValidators:i)||null}function AF(i){return Array.isArray(i)?MI(i):i||null}function cA(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}const TF=i=>i instanceof OF,kI=i=>i instanceof LI;function IF(i){return TF(i)?i.value:i.getRawValue()}function RF(i,t){const e=kI(i),s=i.controls;if(!(e?Object.keys(s):s).length)throw new u.vHH(1e3,"");if(!s[t])throw new u.vHH(1001,"")}function PF(i,t){kI(i),i._forEachChild((s,o)=>{if(void 0===t[o])throw new u.vHH(1002,"")})}class FI{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=SF(this._rawValidators),this._composedAsyncValidatorFn=AF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===vD}get invalid(){return this.status===lA}get pending(){return this.status==bx}get disabled(){return this.status===yD}get enabled(){return this.status!==yD}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=SF(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=AF(t)}addValidators(t){this.setValidators(yF(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(yF(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(bF(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(bF(t,this._rawAsyncValidators))}hasValidator(t){return eA(this._rawValidators,t)}hasAsyncValidator(t){return eA(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=bx,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=yD,this.errors=null,this._forEachChild(s=>{s.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(s=>s(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=vD,this._forEachChild(s=>{s.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vD||this.status===bx)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yD:vD}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=bx,this._hasOwnPendingAsyncValidator=!0;const e=uF(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function oH(i,t,e){if(null==t||(Array.isArray(t)||(t=t.split(e)),Array.isArray(t)&&0===t.length))return null;let s=i;return t.forEach(o=>{s=kI(s)?s.controls.hasOwnProperty(o)?s.controls[o]:null:(i=>i instanceof lH)(s)&&s.at(o)||null}),s}(this,t,".")}getError(t,e){const s=e?this.get(e):this;return s&&s.errors?s.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?yD:this.errors?lA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bx)?bx:this._anyControlsHaveStatus(lA)?lA:vD}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){cA(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class OF extends FI{constructor(t=null,e,s){super(PI(e),OI(s,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),cA(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){aA(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){aA(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class LI extends FI{constructor(t,e,s){super(PI(e),OI(s,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,s={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,s={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){PF(this,t),Object.keys(t).forEach(s=>{RF(this,s),this.controls[s].setValue(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(s=>{this.controls[s]&&this.controls[s].patchValue(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((s,o)=>{s.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,s)=>(t[s]=IF(e),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,s)=>!!s._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const s=this.controls[e];s&&t(s,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const s=this.controls[e];if(this.contains(e)&&t(s))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,s)=>((e.enabled||this.disabled)&&(t[s]=e.value),t))}_reduceChildren(t,e){let s=t;return this._forEachChild((o,l)=>{s=e(s,o,l)}),s}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class lH extends FI{constructor(t,e,s){super(PI(e),OI(s,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,s={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:s.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,s={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){PF(this,t),t.forEach((s,o)=>{RF(this,o),this.at(o).setValue(s,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((s,o)=>{this.at(o)&&this.at(o).patchValue(s,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((s,o)=>{s.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>IF(t))}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,s)=>!!s._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,s)=>{t(e,s)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const cH={provide:yl,useExisting:(0,u.Gpc)(()=>uA)},bD=(()=>Promise.resolve(null))();let uA=(()=>{class i extends yl{constructor(e,s){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new u.vpe,this.form=new LI({},CI(e),MI(s))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){bD.then(()=>{const s=this._findContainer(e.path);e.control=s.registerControl(e.name,e.control),_D(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){bD.then(()=>{const s=this._findContainer(e.path);s&&s.removeControl(e.name),aA(this._directives,e)})}addFormGroup(e){bD.then(()=>{const s=this._findContainer(e.path),o=new LI({});DF(o,e),s.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){bD.then(()=>{const s=this._findContainer(e.path);s&&s.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,s){bD.then(()=>{this.form.get(e.path).setValue(s)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,EF(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(zo,10),u.Y36(ev,10))},i.\u0275dir=u.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,s){1&e&&u.NdJ("submit",function(l){return s.onSubmit(l)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([cH]),u.qOj]}),i})();const dH={provide:Bg,useExisting:(0,u.Gpc)(()=>wD)},LF=(()=>Promise.resolve(null))();let wD=(()=>{class i extends Bg{constructor(e,s,o,l,f){super(),this._changeDetectorRef=f,this.control=new OF,this._registered=!1,this.update=new u.vpe,this._parent=e,this._setValidators(s),this._setAsyncValidators(o),this.valueAccessor=function II(i,t){if(!t)return null;let e,s,o;return Array.isArray(t),t.forEach(l=>{l.constructor===JS?e=l:function sH(i){return Object.getPrototypeOf(i.constructor)===rb}(l)?s=l:o=l}),o||s||e||null}(0,l)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function TI(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function iA(i,t){return[...t.path,i]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){_D(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){LF.then(()=>{var s;this.control.setValue(e,{emitViewToModelChange:!1}),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_updateDisabled(e){const s=e.isDisabled.currentValue,o=""===s||s&&"false"!==s;LF.then(()=>{var l;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(l=this._changeDetectorRef)||void 0===l||l.markForCheck()})}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(yl,9),u.Y36(zo,10),u.Y36(ev,10),u.Y36(Kc,10),u.Y36(u.sBO,8))},i.\u0275dir=u.lG2({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([dH]),u.qOj,u.TTD]}),i})(),BF=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})();const NI=new u.OlP("NgModelWithFormControlWarning"),vH={provide:yl,useExisting:(0,u.Gpc)(()=>dA)};let dA=(()=>{class i extends yl{constructor(e,s){super(),this.validators=e,this.asyncValidators=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(e),this._setAsyncValidators(s)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(oA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const s=this.form.get(e.path);return _D(s,e),s.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),s}getControl(e){return this.form.get(e.path)}removeControl(e){rA(e.control||null,e,!1),aA(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,s){this.form.get(e.path).setValue(s)}onSubmit(e){return this.submitted=!0,EF(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const s=e.control,o=this.form.get(e.path);s!==o&&(rA(s||null,e),TF(o)&&(_D(o,e),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const s=this.form.get(e.path);DF(s,e),s.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const s=this.form.get(e.path);s&&function iH(i,t){return oA(i,t)}(s,e)&&s.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){AI(this.form,this),this._oldForm&&oA(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(zo,10),u.Y36(ev,10))},i.\u0275dir=u.lG2({type:i,selectors:[["","formGroup",""]],hostBindings:function(e,s){1&e&&u.NdJ("submit",function(l){return s.onSubmit(l)})("reset",function(){return s.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([vH]),u.qOj,u.TTD]}),i})(),eL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[BF]]}),i})(),jI=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[eL]}),i})(),tL=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:NI,useValue:e.warnOnNgModelWithFormControl}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[eL]}),i})();const NH=["availableOption"],BH=function(i){return{active:i}};function VH(i,t){if(1&i){const e=u.EpF();u.TgZ(0,"div",12),u.TgZ(1,"input",13),u.NdJ("change",function(o){return u.CHM(e),u.oxw(2).changeSearchText(o)})("input",function(){return u.CHM(e),u.oxw(2).searchTextChanged()})("ngModelChange",function(o){return u.CHM(e),u.oxw(2).searchText=o}),u.qZA(),u.TgZ(2,"label",14),u._UZ(3,"span",15),u._uU(4),u.qZA(),u.qZA()}if(2&i){const e=u.oxw(2);u.xp6(1),u.Udp("direction",e.config.inputDirection),u.Q6J("ngModel",e.searchText),u.xp6(1),u.Q6J("ngClass",u.VKq(5,BH,e.searchText)),u.xp6(2),u.hij(" ",e.config.searchPlaceholder,"")}}function GH(i,t){if(1&i){const e=u.EpF();u.TgZ(0,"li",16),u.NdJ("click",function(){const o=u.CHM(e),l=o.$implicit,f=o.index;return u.oxw(2).deselectItem(l,f)}),u.TgZ(1,"span",17),u._uU(2,"x"),u.qZA(),u.TgZ(3,"span"),u._uU(4),u.qZA(),u.qZA()}if(2&i){const e=t.$implicit,s=u.oxw(2);u.xp6(4),u.hij(" ",s.config.displayFn?s.config.displayFn(e):e[s.config.displayKey]||e," ")}}function UH(i,t){1&i&&u._UZ(0,"hr")}const HH=function(i,t){return{active:i,disabled:t}};function zH(i,t){if(1&i){const e=u.EpF();u.TgZ(0,"li",18,19),u.NdJ("click",function(){const o=u.CHM(e),l=o.$implicit,f=o.index;return u.oxw(2).selectItem(l,f)}),u._uU(2),u.qZA()}if(2&i){const e=t.$implicit,s=t.index,o=u.oxw(2);u.Q6J("ngClass",u.WLB(2,HH,o.focusedItemIndex==s&&!e.disabled,e.disabled)),u.xp6(2),u.hij(" ",o.config.displayFn?o.config.displayFn(e):e[o.config.displayKey]||e," ")}}function jH(i,t){if(1&i&&(u.TgZ(0,"li"),u._uU(1),u.qZA()),2&i){const e=u.oxw(2);u.xp6(1),u.Oqu(e.config.noResultsFound)}}function WH(i,t){if(1&i&&(u.TgZ(0,"div",5),u.YNc(1,VH,5,7,"div",6),u.TgZ(2,"ul",7),u.YNc(3,GH,5,1,"li",8),u.qZA(),u.YNc(4,UH,1,0,"hr",9),u.TgZ(5,"ul",10),u.YNc(6,zH,3,5,"li",11),u.ALo(7,"limitTo"),u.ALo(8,"filterBy"),u.YNc(9,jH,2,1,"li",9),u.qZA(),u.qZA()),2&i){const e=u.oxw();u.Udp("max-height",e.config.height),u.xp6(1),u.Q6J("ngIf",e.config.search),u.xp6(2),u.Q6J("ngForOf",e.selectedItems),u.xp6(1),u.Q6J("ngIf",e.selectedItems.length>0&&e.availableItems.length>0),u.xp6(2),u.Q6J("ngForOf",u.xi3(7,7,u.Dn7(8,10,e.availableItems,e.searchText,e.config.searchOnKey),e.config.limitTo)),u.xp6(3),u.Q6J("ngIf",e.showNotFound)}}const YH=function(i){return{"ngx-disabled":i}};let nL=(()=>{class i{transform(e,s,o){return e&&s&&Array.isArray(e)?e.filter("string"==typeof e[0]?l=>l.toLowerCase().indexOf(s.toLowerCase())>-1:o?l=>"object"!=typeof l[o]&&l[o].toString().toLowerCase().indexOf(s.toLowerCase())>-1:l=>{for(const f in l)if("object"!=typeof l[f]&&l[f].toString().toLowerCase().indexOf(s.toLowerCase())>-1)return!0;return!1}):e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=u.Yjl({name:"filterBy",type:i,pure:!0}),i})(),qH=(()=>{class i{constructor(e,s){this.cdref=e,this._elementRef=s,this.options=[],this.config={},this.multiple=!1,this.change=new u.vpe,this.searchChange=new u.vpe,this.open=new u.vpe,this.close=new u.vpe,this.toggleDropdown=!1,this.availableItems=[],this.selectedItems=[],this.selectedDisplayText="Select",this.clickedInside=!1,this.insideKeyPress=!1,this.focusedItemIndex=null,this.showNotFound=!1,this.onChange=()=>{},this.onTouched=()=>{},this.multiple=!1}get value(){return this._value}set value(e){this._value=e,this.onChange(e),this.onTouched()}clickInsideComponent(){this.clickedInside=!0}blur(){this.toggleDropdown=!1}focus(){this.disabled||this.toggleSelectDropdown()}clickOutsideComponent(){this.clickedInside||(this.toggleDropdown=!1,this.resetArrowKeyActiveElement(),this.searchText=null,this.close.emit()),this.clickedInside=!1}KeyPressOutsideComponent(){this.insideKeyPress||(this.toggleDropdown=!1,this.resetArrowKeyActiveElement()),this.insideKeyPress=!1}handleKeyboardEvent(e){if(this.insideKeyPress=!0,27===e.keyCode||this.disabled)return this.toggleDropdown=!1,void(this.insideKeyPress=!1);const s=this.availableOptions.toArray();if(9!==e.keyCode&&0===s.length&&!this.toggleDropdown&&(this.toggleDropdown=!0),40===e.keyCode&&s.length>0&&(this.onArrowKeyDown(),this.focusedItemIndex>=s.length&&(this.focusedItemIndex=0),s[this.focusedItemIndex].nativeElement.focus(),e.preventDefault()),38===e.keyCode&&s.length&&(this.onArrowKeyUp(),this.focusedItemIndex>=s.length&&(this.focusedItemIndex=s.length-1),s[this.focusedItemIndex].nativeElement.focus(),e.preventDefault()),13===e.keyCode&&null!==this.focusedItemIndex){const o=(new nL).transform(this.availableItems,this.searchText,this.config.searchOnKey);return this.selectItem(o[this.focusedItemIndex],this.availableItems.indexOf(o[this.focusedItemIndex])),!1}}ngOnInit(){void 0!==this.options&&Array.isArray(this.options)&&(this.availableItems=[...this.options.sort(this.config.customComparator)],this.initDropdownValuesAndOptions())}ngAfterViewInit(){this.availableOptions.changes.subscribe(this.setNotFoundState.bind(this))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}writeValue(e,s){e?(Array.isArray(e)?this.multiple?this.value=e:e.length>0&&(this.value=e[0]):this.value=e,0===this.selectedItems.length&&(Array.isArray(e)?this.selectedItems=e:this.selectedItems.push(e),this.initDropdownValuesAndOptions())):(this.value=[],s||this.reset()),s||this.reset()}reset(){this.selectedItems=[],this.availableItems=[...this.options.sort(this.config.customComparator)],this.initDropdownValuesAndOptions()}setNotFoundState(){this.showNotFound=0===this.availableOptions.length,this.cdref.detectChanges()}ngOnChanges(e){this.selectedItems=[],this.options=this.options||[],e.options&&(this.availableItems=[...this.options.sort(this.config.customComparator)]),e.value&&(JSON.stringify(e.value.currentValue)===JSON.stringify([])||""===e.value.currentValue||null===e.value.currentValue)&&(this.availableItems=[...this.options.sort(this.config.customComparator)]),this.initDropdownValuesAndOptions()}deselectItem(e,s){this.selectedItems.forEach((l,f)=>{e===l&&this.selectedItems.splice(f,1)});let o=[...this.availableItems];this.availableItems.includes(e)||(this.availableItems.push(e),o=this.availableItems.sort(this.config.customComparator)),this.selectedItems=[...this.selectedItems],this.availableItems=[...o],Array.isArray(this.value)||(this.value=[]),this.valueChanged(),this.resetArrowKeyActiveElement()}selectItem(e,s){this.multiple||(this.selectedItems.length>0&&this.availableItems.push(this.selectedItems[0]),this.selectedItems=[],this.toggleDropdown=!1),this.availableItems.forEach((o,l)=>{e===o&&(this.selectedItems.push(e),this.availableItems.splice(l,1))}),this.config.clearOnSelection&&(this.searchText=null),this.selectedItems=[...this.selectedItems],this.availableItems=[...this.availableItems],this.selectedItems.sort(this.config.customComparator),this.availableItems.sort(this.config.customComparator),this.valueChanged(),this.resetArrowKeyActiveElement()}valueChanged(){this.writeValue(this.selectedItems,!0),this.change.emit({value:this.value}),this.setSelectedDisplayText()}toggleSelectDropdown(){this.toggleDropdown=!this.toggleDropdown,this.toggleDropdown?this.open.emit():(this.searchText=null,this.close.emit()),this.resetArrowKeyActiveElement()}searchTextChanged(){this.searchChange.emit(this.searchText)}changeSearchText(e){e.stopPropagation()}initDropdownValuesAndOptions(){const e={displayKey:"description",height:"auto",search:!1,placeholder:"Select",searchPlaceholder:"Search...",limitTo:0,customComparator:void 0,noResultsFound:"No results found!",moreText:"more",searchOnKey:null,clearOnSelection:!1,inputDirection:"ltr"};("undefined"===this.config||0===Object.keys(this.config).length)&&(this.config=Object.assign({},e));for(const s of Object.keys(e))this.config[s]=this.config[s]?this.config[s]:e[s];this.config=Object.assign({},this.config),this.selectedDisplayText=this.config.placeholder,""!==this.value&&void 0!==this.value&&(Array.isArray(this.value)?this.selectedItems=this.value:""!==this.value&&null!==this.value?this.selectedItems[0]=this.value:(this.selectedItems=[],this.value=[]),this.selectedItems.forEach(s=>{const o=this.availableItems.findIndex(l=>JSON.stringify(s)===JSON.stringify(l));-1!==o&&this.availableItems.splice(o,1)})),this.setSelectedDisplayText()}setSelectedDisplayText(){let e=this.selectedItems[0];"object"==typeof this.selectedItems[0]&&(e=this.config.displayFn?this.config.displayFn(this.selectedItems[0]):this.selectedItems[0][this.config.displayKey]),this.selectedDisplayText=this.multiple&&this.selectedItems.length>0?1===this.selectedItems.length?e:e+` + ${this.selectedItems.length-1} ${this.config.moreText}`:0===this.selectedItems.length?this.config.placeholder:e}onArrowKeyUp(){0!==this.focusedItemIndex?this.onArrowKey()&&this.focusedItemIndex--:this.focusedItemIndex=this.availableItems.length-1}onArrowKeyDown(){this.focusedItemIndex!==this.availableItems.length-1?this.onArrowKey()&&this.focusedItemIndex++:this.focusedItemIndex=0}onArrowKey(){return null!==this.focusedItemIndex||(this.focusedItemIndex=0,!1)}resetArrowKeyActiveElement(){this.focusedItemIndex=null}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.sBO),u.Y36(u.SBq))},i.\u0275cmp=u.Xpm({type:i,selectors:[["ngx-select-dropdown"]],viewQuery:function(e,s){if(1&e&&u.Gf(NH,5),2&e){let o;u.iGM(o=u.CRH())&&(s.availableOptions=o)}},hostBindings:function(e,s){1&e&&u.NdJ("click",function(){return s.clickInsideComponent()})("blur",function(){return s.blur()})("focus",function(){return s.focus()})("click",function(){return s.clickOutsideComponent()},!1,u.evT)("keydown",function(){return s.KeyPressOutsideComponent()},!1,u.evT)("keydown",function(l){return s.handleKeyboardEvent(l)})},inputs:{options:"options",config:"config",multiple:"multiple",_value:"_value",disabled:"disabled"},outputs:{change:"change",searchChange:"searchChange",open:"open",close:"close"},features:[u._Bn([{provide:Kc,useExisting:(0,u.Gpc)(()=>i),multi:!0}]),u.TTD],decls:6,vars:6,consts:[["tabindex","0",1,"ngx-dropdown-container"],["type","button","tabindex","-1",1,"ngx-dropdown-button",3,"ngClass","disabled","click"],[1,"display-text"],[1,"nsdicon-angle-down"],["class","ngx-dropdown-list-container",3,"maxHeight",4,"ngIf"],[1,"ngx-dropdown-list-container"],["class","search-container",4,"ngIf"],[1,"selected-items"],["tabindex","-1",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"available-items"],["tabindex","-1",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"search-container"],["name","search-text","tabindex","-1","autocomplete","off",3,"ngModel","change","input","ngModelChange"],[3,"ngClass"],[1,"nsdicon-search"],["tabindex","-1",3,"click"],[1,"nsdicon-close"],["tabindex","-1",3,"ngClass","click"],["availableOption",""]],template:function(e,s){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"button",1),u.NdJ("click",function(){return s.toggleSelectDropdown()}),u.TgZ(2,"span",2),u._uU(3),u.qZA(),u._UZ(4,"span",3),u.qZA(),u.YNc(5,WH,10,14,"div",4),u.qZA()),2&e&&(u.xp6(1),u.Q6J("ngClass",u.VKq(4,YH,s.disabled))("disabled",s.disabled),u.xp6(2),u.hij("",s.selectedDisplayText," "),u.xp6(2),u.Q6J("ngIf",s.toggleDropdown))},directives:function(){return[ha,Kr,JS,tA,wD,bs]},pipes:function(){return[$H,nL]},styles:['.ngx-dropdown-container[_ngcontent-%COMP%]{width:100%;position:relative}.ngx-dropdown-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;margin-bottom:0;font-weight:400;line-height:1.42857143;vertical-align:middle;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid #ccc;border-radius:4px;color:#333;background-color:#fff;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;text-align:left}.ngx-dropdown-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline;vertical-align:middle}.ngx-dropdown-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .nsdicon-angle-down[_ngcontent-%COMP%]{right:5px;position:relative;float:right}.ngx-dropdown-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .nsdicon-angle-down[_ngcontent-%COMP%]::before{border-style:solid;border-width:.1em .1em 0 0;content:"";display:inline-block;height:10px;position:relative;vertical-align:text-top;width:10px;top:0;transform:rotate(135deg)}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-button[_ngcontent-%COMP%]{width:100%;min-height:30px;padding:5px 10px;background-color:#fff}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-button[_ngcontent-%COMP%]   .display-text[_ngcontent-%COMP%]{display:inline-block;width:calc(100% - 20px)}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]{box-sizing:border-box;border:1px solid rgba(0,0,0,.15);border-radius:4px;padding-left:10px;padding-right:10px;z-index:999999999;width:100%;background:#fff;position:absolute;box-shadow:5px 5px 5px 0 rgba(0,0,0,.21);overflow-y:auto}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:relative;padding-top:10px;margin-top:5px}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;border-bottom:1px solid #9e9e9e;border-radius:0;outline:0;height:2rem;width:100%;font-size:13px;margin:0;padding:0;box-shadow:none;box-sizing:content-box;transition:.3s}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-bottom:1px solid #26a69a}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]{transform:translateY(-2px) scale(.8);transform-origin:0 0}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#9e9e9e;position:absolute;top:0;left:0;height:100%;font-size:1rem;cursor:text;transition:transform .2s ease-out;transform-origin:0 100%;text-align:initial;transform:translateY(12px);pointer-events:none}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   label.active[_ngcontent-%COMP%]{transform:translateY(-2px) scale(.8);transform-origin:0 0}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem;list-style-type:none;padding-left:0}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   ul.selected-items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#337ab7;color:#fff;margin-bottom:2px}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   ul.selected-items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .nsdicon-close[_ngcontent-%COMP%]{font-weight:700;font-size:large}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   ul.available-items[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#337ab7;color:#ffff}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:inherit;cursor:pointer;display:block;padding:3px 20px;clear:both;font-weight:400;line-height:1.42857143;color:#333;white-space:normal}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-disabled[_ngcontent-%COMP%]{pointer-events:none;background-color:#e9ecef;opacity:1;cursor:no-drop}']}),i})(),$H=(()=>{class i{transform(e,s,o=0){return Array.isArray(e)&&0!==s?e.slice(o,o+s):e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=u.Yjl({name:"limitTo",type:i,pure:!0}),i})(),iL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[ws,jI]]}),i})(),ZH=(()=>{class i{constructor(e){this.translationService=e,this.languageDropdownConfig={},this.translationService.update.subscribe(s=>(0,Q.mG)(this,void 0,void 0,function*(){yield this.bootstrap()}))}ngOnInit(){}handleTranslations(){null==this.selectedLanguage.code&&(this.selectedLanguage=this.translationService.supportedLanguages.find(e=>"en"==e.code)),this.translationService.setLanguage(this.selectedLanguage.code),this.translationService.saveSelectedLanguage(this.selectedLanguage.code)}bootstrap(){return(0,Q.mG)(this,void 0,void 0,function*(){this.languageDropdownConfig=yield this.translationService.getSettings("name"),this.supportedLanguages=this.translationService.supportedLanguages,this.selectedLanguage=this.translationService.GetSelectedLanguage()})}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(fx))},i.\u0275cmp=u.Xpm({type:i,selectors:[["language-switch"]],decls:8,vars:7,consts:[[1,"language-font","ml-3","mr-3"],[1,"d-flex"],["alt","","height","20",1,"mt-2","mr-3","ml-3",3,"src"],[1,"language-select-container"],[1,"theme-language-dropdown",3,"config","options","ngModel","ngModelChange","change"]],template:function(e,s){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"div",1),u._UZ(5,"img",2),u.TgZ(6,"div",3),u.TgZ(7,"ngx-select-dropdown",4),u.NdJ("ngModelChange",function(l){return s.selectedLanguage=l})("change",function(){return s.handleTranslations()}),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,5,"language.select")," "),u.xp6(3),u.s9C("src",null==s.selectedLanguage?null:s.selectedLanguage.imageUrl,u.LSH),u.xp6(2),u.Q6J("config",s.languageDropdownConfig)("options",s.supportedLanguages)("ngModel",s.selectedLanguage))},directives:[qH,tA,wD],pipes:[ES],styles:[".language-select-container[_ngcontent-%COMP%]{width:150px}.ngx-dropdown-button[_ngcontent-%COMP%]{background-color:var(--theme-back-color)!important;color:var(--theme-contrast-color)!important;border:unset!important}.language-font[_ngcontent-%COMP%]{font-size:15px}"]}),i})();const rL=["mat-button",""],sL=["*"],XH=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],JH=dD(fI(pI(class{constructor(i){this._elementRef=i}})));let WI=(()=>{class i extends JH{constructor(e,s,o){super(e),this._focusMonitor=s,this._animationMode=o,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const l of XH)this._hasHostAttributes(l)&&this._getHostElement().classList.add(l);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,s){e?this._focusMonitor.focusVia(this._getHostElement(),e,s):this._getHostElement().focus(s)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(s=>this._getHostElement().hasAttribute(s))}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(lD),u.Y36(zf,8))},i.\u0275cmp=u.Xpm({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,s){if(1&e&&u.Gf(fD,5),2&e){let o;u.iGM(o=u.CRH())&&(s.ripple=o.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,s){2&e&&(u.uIk("disabled",s.disabled||null),u.ekj("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-button-disabled",s.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[u.qOj],attrs:rL,ngContentSelectors:sL,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,s){1&e&&(u.F$t(),u.TgZ(0,"span",0),u.Hsn(1),u.qZA(),u._UZ(2,"span",1),u._UZ(3,"span",2)),2&e&&(u.xp6(2),u.ekj("mat-button-ripple-round",s.isRoundButton||s.isIconButton),u.Q6J("matRippleDisabled",s._isRippleDisabled())("matRippleCentered",s.isIconButton)("matRippleTrigger",s._getHostElement()))},directives:[fD],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),i})(),ez=(()=>{class i extends WI{constructor(e,s,o,l){super(s,e,o),this._ngZone=l,this._haltDisabledEvents=f=>{this.disabled&&(f.preventDefault(),f.stopImmediatePropagation())}}ngAfterViewInit(){super.ngAfterViewInit(),this._ngZone?this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}):this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(lD),u.Y36(u.SBq),u.Y36(zf,8),u.Y36(u.R0b,8))},i.\u0275cmp=u.Xpm({type:i,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(e,s){2&e&&(u.uIk("tabindex",s.disabled?-1:s.tabIndex||0)("disabled",s.disabled||null)("aria-disabled",s.disabled.toString()),u.ekj("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-button-disabled",s.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[u.qOj],attrs:rL,ngContentSelectors:sL,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,s){1&e&&(u.F$t(),u.TgZ(0,"span",0),u.Hsn(1),u.qZA(),u._UZ(2,"span",1),u._UZ(3,"span",2)),2&e&&(u.xp6(2),u.ekj("mat-button-ripple-round",s.isRoundButton||s.isIconButton),u.Q6J("matRippleDisabled",s._isRippleDisabled())("matRippleCentered",s.isIconButton)("matRippleTrigger",s._getHostElement()))},directives:[fD],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),i})(),xD=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[KS,Li],Li]}),i})();var tz=Z(1144);const nz=["addListener","removeListener"],iz=["addEventListener","removeEventListener"],rz=["on","off"];function gs(i,t,e,s){if((0,Ia.m)(e)&&(s=e,e=void 0),s)return gs(i,t,e).pipe(cM(s));const[o,l]=function az(i){return(0,Ia.m)(i.addEventListener)&&(0,Ia.m)(i.removeEventListener)}(i)?iz.map(f=>_=>i[f](t,_,e)):function sz(i){return(0,Ia.m)(i.addListener)&&(0,Ia.m)(i.removeListener)}(i)?nz.map(oL(i,t)):function oz(i){return(0,Ia.m)(i.on)&&(0,Ia.m)(i.off)}(i)?rz.map(oL(i,t)):[];if(!o&&(0,tz.z)(i))return(0,Ts.z)(f=>gs(f,t,e))((0,th.Xf)(i));if(!o)throw new TypeError("Invalid event target");return new Ai.y(f=>{const _=(...w)=>f.next(1<w.length?w:w[0]);return o(_),()=>l(_)})}function oL(i,t){return e=>s=>i[e](t,s)}var aL=Z(4408);const CD={schedule(i){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:s}=CD;s&&(t=s.requestAnimationFrame,e=s.cancelAnimationFrame);const o=t(l=>{e=void 0,i(l)});return new zr.w0(()=>null==e?void 0:e(o))},requestAnimationFrame(...i){const{delegate:t}=CD;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:t}=CD;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...i)},delegate:void 0};var lL=Z(7565);const hA=new class cz extends lL.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:s}=this;let o;t=t||s.shift();do{if(o=t.execute(t.state,t.delay))break}while((t=s[0])&&t.id===e&&s.shift());if(this._active=!1,o){for(;(t=s[0])&&t.id===e&&s.shift();)t.unsubscribe();throw o}}}(class lz extends aL.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,s=0){return null!==s&&s>0?super.requestAsyncId(t,e,s):(t.actions.push(this),t._scheduled||(t._scheduled=CD.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,s=0){if(null!=s&&s>0||null==s&&this.delay>0)return super.recycleAsyncId(t,e,s);t.actions.some(o=>o.id===e)||(CD.cancelAnimationFrame(e),t._scheduled=void 0)}});let YI,uz=1;const fA={};function cL(i){return i in fA&&(delete fA[i],!0)}const dz={setImmediate(i){const t=uz++;return fA[t]=!0,YI||(YI=Promise.resolve()),YI.then(()=>cL(t)&&i()),t},clearImmediate(i){cL(i)}},{setImmediate:hz,clearImmediate:fz}=dz,pA={setImmediate(...i){const{delegate:t}=pA;return((null==t?void 0:t.setImmediate)||hz)(...i)},clearImmediate(i){const{delegate:t}=pA;return((null==t?void 0:t.clearImmediate)||fz)(i)},delegate:void 0};new class gz extends lL.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:s}=this;let o;t=t||s.shift();do{if(o=t.execute(t.state,t.delay))break}while((t=s[0])&&t.id===e&&s.shift());if(this._active=!1,o){for(;(t=s[0])&&t.id===e&&s.shift();)t.unsubscribe();throw o}}}(class pz extends aL.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,s=0){return null!==s&&s>0?super.requestAsyncId(t,e,s):(t.actions.push(this),t._scheduled||(t._scheduled=pA.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,s=0){if(null!=s&&s>0||null==s&&this.delay>0)return super.recycleAsyncId(t,e,s);t.actions.some(o=>o.id===e)||(pA.clearImmediate(e),t._scheduled=void 0)}});var vz=Z(3532);function qI(i=0,t,e=Sl.P){let s=-1;return null!=t&&((0,vz.K)(t)?e=t:s=t),new Ai.y(o=>{let l=function yz(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;l<0&&(l=0);let f=0;return e.schedule(function(){o.closed||(o.next(f++),0<=s?this.schedule(void 0,s):o.complete())},l)})}function $I(i,t=Sl.z){return function _z(i){return(0,ci.e)((t,e)=>{let s=!1,o=null,l=null,f=!1;const _=()=>{if(null==l||l.unsubscribe(),l=null,s){s=!1;const E=o;o=null,e.next(E)}f&&e.complete()},w=()=>{l=null,f&&e.complete()};t.subscribe(new Ci.Q(e,E=>{s=!0,o=E,l||(0,th.Xf)(i(E)).subscribe(l=new Ci.Q(e,_,w))},()=>{f=!0,(!s||!l||l.closed)&&e.complete()}))})}(()=>qI(i,t))}let gA=(()=>{class i{constructor(e,s,o){this._ngZone=e,this._platform=s,this._scrolled=new Ft.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const s=this.scrollContainers.get(e);s&&(s.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Ai.y(s=>{this._globalSubscription||this._addGlobalListener();const o=e>0?this._scrolled.pipe($I(e)).subscribe(s):this._scrolled.subscribe(s);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):it()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,s)=>this.deregister(s)),this._scrolled.complete()}ancestorScrolled(e,s){const o=this.getAncestorScrollContainers(e);return this.scrolled(s).pipe(Jn(l=>!l||o.indexOf(l)>-1))}getAncestorScrollContainers(e){const s=[];return this.scrollContainers.forEach((o,l)=>{this._scrollableContainsElement(l,e)&&s.push(l)}),s}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,s){let o=oo(s),l=e.getElementRef().nativeElement;do{if(o==l)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>gs(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(u.R0b),u.LFG(Is),u.LFG(fe,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),MD=(()=>{class i{constructor(e,s,o,l){this.elementRef=e,this.scrollDispatcher=s,this.ngZone=o,this.dir=l,this._destroyed=new Ft.x,this._elementScrolled=new Ai.y(f=>this.ngZone.runOutsideAngular(()=>gs(this.elementRef.nativeElement,"scroll").pipe(Kn(this._destroyed)).subscribe(f)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const s=this.elementRef.nativeElement,o=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=o?e.end:e.start),null==e.right&&(e.right=o?e.start:e.end),null!=e.bottom&&(e.top=s.scrollHeight-s.clientHeight-e.bottom),o&&0!=Z0()?(null!=e.left&&(e.right=s.scrollWidth-s.clientWidth-e.left),2==Z0()?e.left=e.right:1==Z0()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=s.scrollWidth-s.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const s=this.elementRef.nativeElement;gO()?s.scrollTo(e):(null!=e.top&&(s.scrollTop=e.top),null!=e.left&&(s.scrollLeft=e.left))}measureScrollOffset(e){const s="left",o="right",l=this.elementRef.nativeElement;if("top"==e)return l.scrollTop;if("bottom"==e)return l.scrollHeight-l.clientHeight-l.scrollTop;const f=this.dir&&"rtl"==this.dir.value;return"start"==e?e=f?o:s:"end"==e&&(e=f?s:o),f&&2==Z0()?e==s?l.scrollWidth-l.clientWidth-l.scrollLeft:l.scrollLeft:f&&1==Z0()?e==s?l.scrollLeft+l.scrollWidth-l.clientWidth:-l.scrollLeft:e==s?l.scrollLeft:l.scrollWidth-l.clientWidth-l.scrollLeft}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(gA),u.Y36(u.R0b),u.Y36(qc,8))},i.\u0275dir=u.lG2({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),i})(),xx=(()=>{class i{constructor(e,s,o){this._platform=e,this._change=new Ft.x,this._changeListener=l=>{this._change.next(l)},this._document=o,s.runOutsideAngular(()=>{if(e.isBrowser){const l=this._getWindow();l.addEventListener("resize",this._changeListener),l.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:s,height:o}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+s,height:o,width:s}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,s=this._getWindow(),o=e.documentElement,l=o.getBoundingClientRect();return{top:-l.top||e.body.scrollTop||s.scrollY||o.scrollTop||0,left:-l.left||e.body.scrollLeft||s.scrollX||o.scrollLeft||0}}change(e=20){return e>0?this._change.pipe($I(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(Is),u.LFG(u.R0b),u.LFG(fe,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Vg=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})(),ZI=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Y0,q0,Vg],Y0,Vg]}),i})();function KI(i){return(0,At.U)(()=>i)}const mA=["*"],xz=["content"];function Cz(i,t){if(1&i){const e=u.EpF();u.TgZ(0,"div",2),u.NdJ("click",function(){return u.CHM(e),u.oxw()._onBackdropClicked()}),u.qZA()}if(2&i){const e=u.oxw();u.ekj("mat-drawer-shown",e._isShowingBackdrop())}}function Mz(i,t){1&i&&(u.TgZ(0,"mat-drawer-content"),u.Hsn(1,2),u.qZA())}const Dz=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Ez=["mat-drawer","mat-drawer-content","*"];function Sz(i,t){if(1&i){const e=u.EpF();u.TgZ(0,"div",2),u.NdJ("click",function(){return u.CHM(e),u.oxw()._onBackdropClicked()}),u.qZA()}if(2&i){const e=u.oxw();u.ekj("mat-drawer-shown",e._isShowingBackdrop())}}function Az(i,t){1&i&&(u.TgZ(0,"mat-sidenav-content"),u.Hsn(1,2),u.qZA())}const Tz=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Iz=["mat-sidenav","mat-sidenav-content","*"],uL={transformDrawer:vl("transform",[ro("open, open-instant",zn({transform:"none",visibility:"visible"})),ro("void",zn({"box-shadow":"none",visibility:"hidden"})),jr("void => open-instant",os("0ms")),jr("void <=> open, open-instant => void",os("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Pz=new u.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Oz(){return!1}}),QI=new u.OlP("MAT_DRAWER_CONTAINER");let _A=(()=>{class i extends MD{constructor(e,s,o,l,f){super(o,l,f),this._changeDetectorRef=e,this._container=s}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.sBO),u.Y36((0,u.Gpc)(()=>hL)),u.Y36(u.SBq),u.Y36(gA),u.Y36(u.R0b))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,s){2&e&&u.Udp("margin-left",s._container._contentMargins.left,"px")("margin-right",s._container._contentMargins.right,"px")},features:[u._Bn([{provide:MD,useExisting:i}]),u.qOj],ngContentSelectors:mA,decls:1,vars:0,template:function(e,s){1&e&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),i})(),dL=(()=>{class i{constructor(e,s,o,l,f,_,w,E){this._elementRef=e,this._focusTrapFactory=s,this._focusMonitor=o,this._platform=l,this._ngZone=f,this._interactivityChecker=_,this._doc=w,this._container=E,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Ft.x,this._animationEnd=new Ft.x,this._animationState="void",this.openedChange=new u.vpe(!0),this._openedStream=this.openedChange.pipe(Jn(T=>T),(0,At.U)(()=>{})),this.openedStart=this._animationStarted.pipe(Jn(T=>T.fromState!==T.toState&&0===T.toState.indexOf("open")),KI(void 0)),this._closedStream=this.openedChange.pipe(Jn(T=>!T),(0,At.U)(()=>{})),this.closedStart=this._animationStarted.pipe(Jn(T=>T.fromState!==T.toState&&"void"===T.toState),KI(void 0)),this._destroyed=new Ft.x,this.onPositionChanged=new u.vpe,this._modeChanged=new Ft.x,this.openedChange.subscribe(T=>{T?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{gs(this._elementRef.nativeElement,"keydown").pipe(Jn(T=>27===T.keyCode&&!this.disableClose&&!K0(T)),Kn(this._destroyed)).subscribe(T=>this._ngZone.run(()=>{this.close(),T.stopPropagation(),T.preventDefault()}))}),this._animationEnd.pipe(Ao((T,F)=>T.fromState===F.fromState&&T.toState===F.toState)).subscribe(T=>{const{fromState:F,toState:G}=T;(0===G.indexOf("open")&&"void"===F||"void"===G&&0===F.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=ri(e)}get autoFocus(){const e=this._autoFocus;return null==e?"side"===this.mode?"dialog":"first-tabbable":e}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=ri(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(ri(e))}_forceFocus(e,s){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{e.addEventListener("blur",()=>e.removeAttribute("tabindex")),e.addEventListener("mousedown",()=>e.removeAttribute("tabindex"))})),e.focus(s)}_focusByCssSelector(e,s){let o=this._elementRef.nativeElement.querySelector(e);o&&this._forceFocus(o,s)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(s=>{!s&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var e;this._focusTrap&&this._focusTrap.destroy(),null===(e=this._anchor)||void 0===e||e.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,s){e&&s&&(this._openedVia=s);const o=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),o}_setOpen(e,s,o){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",s&&this._restoreFocus(o)),this._updateFocusTrapState(),new Promise(l=>{this.openedChange.pipe((0,Fi.q)(1)).subscribe(f=>l(f?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(e){const s=this._elementRef.nativeElement,o=s.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),o.insertBefore(this._anchor,s)),o.appendChild(s)):this._anchor&&this._anchor.parentNode.insertBefore(s,this._anchor)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(EO),u.Y36(lD),u.Y36(Is),u.Y36(u.R0b),u.Y36(V1),u.Y36(fe,8),u.Y36(QI,8))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-drawer"]],viewQuery:function(e,s){if(1&e&&u.Gf(xz,5),2&e){let o;u.iGM(o=u.CRH())&&(s._content=o.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,s){1&e&&u.WFA("@transform.start",function(l){return s._animationStarted.next(l)})("@transform.done",function(l){return s._animationEnd.next(l)}),2&e&&(u.uIk("align",null),u.d8E("@transform",s._animationState),u.ekj("mat-drawer-end","end"===s.position)("mat-drawer-over","over"===s.mode)("mat-drawer-push","push"===s.mode)("mat-drawer-side","side"===s.mode)("mat-drawer-opened",s.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:mA,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(e,s){1&e&&(u.F$t(),u.TgZ(0,"div",0,1),u.Hsn(2),u.qZA())},directives:[MD],encapsulation:2,data:{animation:[uL.transformDrawer]},changeDetection:0}),i})(),hL=(()=>{class i{constructor(e,s,o,l,f,_=!1,w){this._dir=e,this._element=s,this._ngZone=o,this._changeDetectorRef=l,this._animationMode=w,this._drawers=new u.n_E,this.backdropClick=new u.vpe,this._destroyed=new Ft.x,this._doCheckSubject=new Ft.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Ft.x,e&&e.change.pipe(Kn(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),f.change().pipe(Kn(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=_}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=ri(e)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(e){this._backdropOverride=null==e?null:ri(e)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Ji(this._allDrawers),Kn(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(s=>!s._container||s._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Ji(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(gx(10),Kn(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,s=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const o=this._left._getWidth();e+=o,s-=o}if(this._right&&this._right.opened)if("side"==this._right.mode)s+=this._right._getWidth();else if("push"==this._right.mode){const o=this._right._getWidth();s+=o,e-=o}e=e||null,s=s||null,(e!==this._contentMargins.left||s!==this._contentMargins.right)&&(this._contentMargins={left:e,right:s},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(Jn(s=>s.fromState!==s.toState),Kn(this._drawers.changes)).subscribe(s=>{"open-instant"!==s.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(Kn(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){!e||e.onPositionChanged.pipe(Kn(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Fi.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(Kn((0,Hs.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const s=this._element.nativeElement.classList,o="mat-drawer-container-has-open";e?s.add(o):s.remove(o)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(qc,8),u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(u.sBO),u.Y36(xx),u.Y36(Pz),u.Y36(zf,8))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-drawer-container"]],contentQueries:function(e,s,o){if(1&e&&(u.Suo(o,_A,5),u.Suo(o,dL,5)),2&e){let l;u.iGM(l=u.CRH())&&(s._content=l.first),u.iGM(l=u.CRH())&&(s._allDrawers=l)}},viewQuery:function(e,s){if(1&e&&u.Gf(_A,5),2&e){let o;u.iGM(o=u.CRH())&&(s._userContent=o.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,s){2&e&&u.ekj("mat-drawer-container-explicit-backdrop",s._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[u._Bn([{provide:QI,useExisting:i}])],ngContentSelectors:Ez,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,s){1&e&&(u.F$t(Dz),u.YNc(0,Cz,1,2,"div",0),u.Hsn(1),u.Hsn(2,1),u.YNc(3,Mz,2,0,"mat-drawer-content",1)),2&e&&(u.Q6J("ngIf",s.hasBackdrop),u.xp6(3),u.Q6J("ngIf",!s._content))},directives:[_A,Kr],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),i})(),XI=(()=>{class i extends _A{constructor(e,s,o,l,f){super(e,s,o,l,f)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.sBO),u.Y36((0,u.Gpc)(()=>pL)),u.Y36(u.SBq),u.Y36(gA),u.Y36(u.R0b))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(e,s){2&e&&u.Udp("margin-left",s._container._contentMargins.left,"px")("margin-right",s._container._contentMargins.right,"px")},features:[u._Bn([{provide:MD,useExisting:i}]),u.qOj],ngContentSelectors:mA,decls:1,vars:0,template:function(e,s){1&e&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),i})(),fL=(()=>{class i extends dL{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(e){this._fixedInViewport=ri(e)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(e){this._fixedTopGap=Q0(e)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(e){this._fixedBottomGap=Q0(e)}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(e,s){2&e&&(u.uIk("align",null),u.Udp("top",s.fixedInViewport?s.fixedTopGap:null,"px")("bottom",s.fixedInViewport?s.fixedBottomGap:null,"px"),u.ekj("mat-drawer-end","end"===s.position)("mat-drawer-over","over"===s.mode)("mat-drawer-push","push"===s.mode)("mat-drawer-side","side"===s.mode)("mat-drawer-opened",s.opened)("mat-sidenav-fixed",s.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[u.qOj],ngContentSelectors:mA,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(e,s){1&e&&(u.F$t(),u.TgZ(0,"div",0,1),u.Hsn(2),u.qZA())},directives:[MD],encapsulation:2,data:{animation:[uL.transformDrawer]},changeDetection:0}),i})(),pL=(()=>{class i extends hL{}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-sidenav-container"]],contentQueries:function(e,s,o){if(1&e&&(u.Suo(o,XI,5),u.Suo(o,fL,5)),2&e){let l;u.iGM(l=u.CRH())&&(s._content=l.first),u.iGM(l=u.CRH())&&(s._allDrawers=l)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(e,s){2&e&&u.ekj("mat-drawer-container-explicit-backdrop",s._backdropOverride)},exportAs:["matSidenavContainer"],features:[u._Bn([{provide:QI,useExisting:i}]),u.qOj],ngContentSelectors:Iz,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,s){1&e&&(u.F$t(Tz),u.YNc(0,Sz,1,2,"div",0),u.Hsn(1),u.Hsn(2,1),u.YNc(3,Az,2,0,"mat-sidenav-content",1)),2&e&&(u.Q6J("ngIf",s.hasBackdrop),u.xp6(3),u.Q6J("ngIf",!s._content))},directives:[XI,Kr],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),i})(),gL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[ws,Li,q0,Vg],Vg,Li]}),i})();const JI="inline",vA=["row","column","row-reverse","column-reverse"];function Fz(i){if(i)switch(i.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":i="wrap-reverse";break;case"no":case"none":case"nowrap":i="nowrap";break;default:i="wrap"}return i}let Nz=(()=>{class i extends zs{buildStyles(e){return function kz(i){let[t,e,s]=function mL(i){i=i?i.toLowerCase():"";let[t,e,s]=i.split(" ");return vA.find(o=>o===t)||(t=vA[0]),e===JI&&(e=s!==JI?s:"",s=JI),[t,Fz(e),!!s]}(i);return function Lz(i,t=null,e=!1){return{display:e?"inline-flex":"flex","box-sizing":"border-box","flex-direction":i,"flex-wrap":t||null}}(t,e,s)}(e)}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275prov=(0,u.Yz7)({factory:function(){return new i},token:i,providedIn:"root"}),i})();const Bz=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let Vz=(()=>{class i extends fs{constructor(e,s,o,l){super(e,o,s,l),this.DIRECTIVE_KEY="layout",this.styleCache=Gz,this.init()}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(Wr),u.Y36(Nz),u.Y36(ps))},i.\u0275dir=u.lG2({type:i,features:[u.qOj]}),i})(),_L=(()=>{class i extends Vz{constructor(){super(...arguments),this.inputs=Bz}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[u.qOj]}),i})();const Gz=new Map;let bL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[vI,Y0]]}),i})();const U4=["thumbContainer"],H4=["toggleBar"],z4=["input"],j4=function(i){return{enterDuration:i}},W4=["*"],Y4=new u.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let q4=0;const $4={provide:Kc,useExisting:(0,u.Gpc)(()=>wL),multi:!0};class Z4{constructor(t,e){this.source=t,this.checked=e}}const K4=gk(dD(pI(fI(class{constructor(i){this._elementRef=i}}))));let wL=(()=>{class i extends K4{constructor(e,s,o,l,f,_){super(e),this._focusMonitor=s,this._changeDetectorRef=o,this.defaults=f,this._onChange=w=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++q4,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new u.vpe,this.toggleChange=new u.vpe,this.tabIndex=parseInt(l)||0,this.color=this.defaultColor=f.color||"accent",this._noopAnimations="NoopAnimations"===_}get required(){return this._required}set required(e){this._required=ri(e)}get checked(){return this._checked}set checked(e){this._checked=ri(e),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(e){e.stopPropagation()}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}focus(e,s){s?this._focusMonitor.focusVia(this._inputElement,s,e):this._inputElement.nativeElement.focus(e)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new Z4(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(lD),u.Y36(u.sBO),u.$8M("tabindex"),u.Y36(Y4),u.Y36(zf,8))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-slide-toggle"]],viewQuery:function(e,s){if(1&e&&(u.Gf(U4,5),u.Gf(H4,5),u.Gf(z4,5)),2&e){let o;u.iGM(o=u.CRH())&&(s._thumbEl=o.first),u.iGM(o=u.CRH())&&(s._thumbBarEl=o.first),u.iGM(o=u.CRH())&&(s._inputElement=o.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(e,s){2&e&&(u.Ikx("id",s.id),u.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null),u.ekj("mat-checked",s.checked)("mat-disabled",s.disabled)("mat-slide-toggle-label-before","before"==s.labelPosition)("_mat-animation-noopable",s._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[u._Bn([$4]),u.qOj],ngContentSelectors:W4,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,s){if(1&e&&(u.F$t(),u.TgZ(0,"label",0,1),u.TgZ(2,"span",2,3),u.TgZ(4,"input",4,5),u.NdJ("change",function(l){return s._onChangeEvent(l)})("click",function(l){return s._onInputClick(l)}),u.qZA(),u.TgZ(6,"span",6,7),u._UZ(8,"span",8),u.TgZ(9,"span",9),u._UZ(10,"span",10),u.qZA(),u.qZA(),u.qZA(),u.TgZ(11,"span",11,12),u.NdJ("cdkObserveContent",function(){return s._onLabelTextChange()}),u.TgZ(13,"span",13),u._uU(14,"\xa0"),u.qZA(),u.Hsn(15),u.qZA(),u.qZA()),2&e){const o=u.MAs(1),l=u.MAs(12);u.uIk("for",s.inputId),u.xp6(2),u.ekj("mat-slide-toggle-bar-no-side-margin",!l.textContent||!l.textContent.trim()),u.xp6(2),u.Q6J("id",s.inputId)("required",s.required)("tabIndex",s.tabIndex)("checked",s.checked)("disabled",s.disabled),u.uIk("name",s.name)("aria-checked",s.checked)("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledby)("aria-describedby",s.ariaDescribedby),u.xp6(5),u.Q6J("matRippleTrigger",o)("matRippleDisabled",s.disableRipple||s.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",u.VKq(18,j4,s._noopAnimations?0:150))}},directives:[fD,wO],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),i})(),xL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})(),CL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[xL,KS,Li,B1],xL,Li]}),i})(),J4=(()=>{class i{constructor(e,s){this.translationService=e,this.themeService=s,this.checked=!0}ngOnInit(){this.translationService.update.subscribe(e=>(0,Q.mG)(this,void 0,void 0,function*(){yield this.bootstrap()}))}switchTheme(){return(0,Q.mG)(this,void 0,void 0,function*(){let e=this.themeService.switch();this.selectedTheme=yield this.translationService.get(`input.${e}`),this.checked=!1})}bootstrap(){return(0,Q.mG)(this,void 0,void 0,function*(){let e=this.themeService.get();this.selectedTheme=yield this.translationService.get(`input.${e}`),this.checked=e!=Fg[0]})}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(fx),u.Y36(TS))},i.\u0275cmp=u.Xpm({type:i,selectors:[["theme-switch"]],decls:2,vars:2,consts:[[3,"ngModel","change","ngModelChange"]],template:function(e,s){1&e&&(u.TgZ(0,"mat-slide-toggle",0),u.NdJ("change",function(){return s.switchTheme()})("ngModelChange",function(l){return s.checked=l}),u._uU(1),u.qZA()),2&e&&(u.Q6J("ngModel",s.checked),u.xp6(1),u.Oqu(s.selectedTheme))},directives:[wL,tA,wD],styles:[""]}),i})();const eR=function(){return{exact:!0}};let e6=(()=>{class i{constructor(e,s){this.themeService=e,this.translationService=s}ngOnInit(){let e=document.getElementsByClassName("mat-drawer-inner-container")[0];e.classList.add("d-flex"),e.style.maxHeight="calc(100vh - var(--header-height))"}ngAfterViewInit(){this.themeService.update.subscribe(e=>{this.amTheme=`am-${e.replace("-theme","")}`})}useLanguage(e){this.translationService.setLanguage(e)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(TS),u.Y36(fx))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-home"]],decls:46,vars:19,consts:[["fxHide.lt-md","true","color","accent",1,"position-fixed"],[1,"d-inline-block",3,"click"],[1,"planet","planetEarth"],[1,"rotation-container"],[1,"earth"],[1,"example-spacer"],["mat-button","","routerLink","/","routerLinkActive","active-link",3,"routerLinkActiveOptions"],[2,"color","white"],["mat-button","","routerLink","/projects","routerLinkActive","active-link"],["mat-button","","href","https://github.com/JeroenMBooij","target","_blank"],["fxHide.gt-sm","true","color","accent",1,"position-fixed"],[1,"header-margin-top"],["fxLayout","column","mode","over"],["sidenav",""],["fxLayout","column",1,"my-nav-container","justify-content-between"],["fxLayout","column","id","my-nav-container",1,"mt-5"],["fxHide.gt-sm","true","mat-button","","routerLink","/","routerLinkActive","active-link",1,"mb-3",3,"routerLinkActiveOptions"],["fxHide.gt-sm","true","mat-button","","routerLink","/projects","routerLinkActive","active-link",1,"mb-3",3,"routerLinkActiveOptions"],["fxHide.gt-sm","true","mat-button","","href","https://github.com/JeroenMBooij","target","_blank"],["fxLayout","column",1,"mt-5","text-left"],["fxHide.gt-sm","true",1,"language-container","mt-5"],[1,"mt-5","ml-5","mr-5"]],template:function(e,s){if(1&e){const o=u.EpF();u.TgZ(0,"header"),u.TgZ(1,"mat-toolbar",0),u.TgZ(2,"div",1),u.NdJ("click",function(){return s.themeService.switch()}),u.TgZ(3,"div",2),u.TgZ(4,"div",3),u._UZ(5,"div",4),u.qZA(),u.qZA(),u.qZA(),u._UZ(6,"language-switch"),u._UZ(7,"span",5),u.TgZ(8,"div"),u.TgZ(9,"a",6),u.TgZ(10,"span",7),u._uU(11),u.ALo(12,"translate"),u.qZA(),u.qZA(),u.TgZ(13,"a",8),u.TgZ(14,"span",7),u._uU(15),u.ALo(16,"translate"),u.qZA(),u.qZA(),u.TgZ(17,"a",9),u.TgZ(18,"span",7),u._uU(19,"Github"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(20,"mat-toolbar",10),u.TgZ(21,"div",1),u.NdJ("click",function(){return u.CHM(o),u.MAs(27).toggle()}),u.TgZ(22,"div",2),u.TgZ(23,"div",3),u._UZ(24,"div",4),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(25,"mat-sidenav-container",11),u.TgZ(26,"mat-sidenav",12,13),u.TgZ(28,"div",14),u.TgZ(29,"div",15),u.TgZ(30,"a",16),u.TgZ(31,"span"),u._uU(32),u.ALo(33,"translate"),u.qZA(),u.qZA(),u.TgZ(34,"a",17),u.TgZ(35,"span"),u._uU(36),u.ALo(37,"translate"),u.qZA(),u.qZA(),u.TgZ(38,"a",18),u.TgZ(39,"span"),u._uU(40,"Github"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(41,"div",19),u._UZ(42,"language-switch",20),u._UZ(43,"theme-switch",21),u.qZA(),u.qZA(),u.qZA(),u.TgZ(44,"mat-sidenav-content"),u._UZ(45,"router-outlet"),u.qZA(),u.qZA(),u.qZA()}2&e&&(u.xp6(8),u.Q6J("@revealAnimation",void 0),u.xp6(1),u.Q6J("routerLinkActiveOptions",u.DdM(16,eR)),u.xp6(2),u.Oqu(u.lcZ(12,8,"signpost.home")),u.xp6(4),u.Oqu(u.lcZ(16,10,"signpost.projects")),u.xp6(15),u.Q6J("routerLinkActiveOptions",u.DdM(17,eR)),u.xp6(2),u.Oqu(u.lcZ(33,12,"signpost.home")),u.xp6(2),u.Q6J("routerLinkActiveOptions",u.DdM(18,eR)),u.xp6(2),u.Oqu(u.lcZ(37,14,"signpost.projects")))},directives:[tU,XS,ZH,ez,x,I,pL,fL,_L,J4,XI,rx],pipes:[ES],styles:['.planet[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:80px;margin-top:30px}.language[_ngcontent-%COMP%]{font-size:20px;line-height:40px}.planet[_ngcontent-%COMP%]   .rotation-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}.planetEarth[_ngcontent-%COMP%]{position:relative;justify-content:center;align-items:center;cursor:pointer}@keyframes animate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.planetEarth[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:50%;height:100%;background:linear-gradient(to top,transparent,rgba(54,148,54,.4));background-size:200px 360px;background-repeat:no-repeat;border-top-left-radius:200px;border-bottom-left-radius:200px}@keyframes counterRotate{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}.earth[_ngcontent-%COMP%]{position:absolute;width:85px;height:85px;background:url(earth.01ae071d88836d78.jpg);border-radius:50%;background-size:cover;animation:animateEarth 20s linear infinite,5s linear glowEarth infinite}@keyframes animateEarth{0%{background-position:0}to{background-position:162.5%}}@keyframes glowEarth{0%{box-shadow:inset 0 0 10px #03a9f4,0 0 10px #03a9f4}50%{box-shadow:inset 0 0 30px #03a9f4,0 0 30px #03a9f4}to{box-shadow:inset 0 0 10px #03a9f4,0 0 10px #03a9f4}}.mat-sidenav-container[_ngcontent-%COMP%]{min-height:calc(100vh - var(--header-height))!important}.mat-sidenav[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex!important}.my-nav-container[_ngcontent-%COMP%]{height:calc(100vh - var(--header-height) - 10px)}.language-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:250px;margin-right:20px}.bottom-sidenav[_ngcontent-%COMP%]{position:relative;bottom:0}.active-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{opacity:1;width:100%}.active-link[_ngcontent-%COMP%]{cursor:default}.mat-toolbar[_ngcontent-%COMP%]{min-height:var(--header-height)!important;height:var(--header-height)!important;top:0;z-index:9}.mat-toolbar-row[_ngcontent-%COMP%]{min-height:var(--header-height)!important;height:var(--header-height)!important}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}'],data:{animation:[gB]},changeDetection:0}),i})();const t6=vl("fadeAnimation",[jr(":enter",[zn({opacity:0}),os("5000ms",zn({opacity:1}))]),jr(":leave",[zn({opacity:1}),os("5000ms",zn({opacity:0}))])]);var Yr=Z(6158),n6=Z(9444),r6=Z(5542),s6=Z.n(r6),o6=Z(3645),a6=Z.n(o6),l6=Z(3028),c6=Z.n(l6);const u6={pages:["fonts/msdf/manifold-0.png"],chars:[{id:87,width:78,height:68,xoffset:-14.232,yoffset:-.4000000000000057,xadvance:49.244,chnl:15,x:0,y:0,page:0},{id:41,width:45,height:77,xoffset:-13.14,yoffset:-5.392000000000003,xadvance:18.355999999999998,chnl:15,x:0,y:70,page:0},{id:40,width:45,height:77,xoffset:-13.14,yoffset:-5.392000000000003,xadvance:18.355999999999998,chnl:15,x:0,y:149,page:0},{id:81,width:59,height:74,xoffset:-12.672,yoffset:-.6600000000000037,xadvance:33.748,chnl:15,x:0,y:228,page:0},{id:37,width:70,height:68,xoffset:-13.92,yoffset:-.4000000000000057,xadvance:42.12,chnl:15,x:0,y:304,page:0},{id:50,width:58,height:69,xoffset:-13.4,yoffset:-.6600000000000037,xadvance:31.252,chnl:15,x:0,y:374,page:0},{id:83,width:58,height:69,xoffset:-13.452,yoffset:-.6600000000000037,xadvance:31.459999999999997,chnl:15,x:60,y:374,page:0},{id:85,width:59,height:69,xoffset:-12.672,yoffset:-.4000000000000057,xadvance:33.748,chnl:15,x:120,y:374,page:0},{id:71,width:59,height:69,xoffset:-12.672,yoffset:-.6600000000000037,xadvance:33.54,chnl:15,x:181,y:374,page:0},{id:48,width:58,height:69,xoffset:-12.672,yoffset:-.6600000000000037,xadvance:32.448,chnl:15,x:242,y:374,page:0},{id:67,width:59,height:69,xoffset:-12.672,yoffset:-.6600000000000037,xadvance:33.019999999999996,chnl:15,x:302,y:374,page:0},{id:51,width:58,height:69,xoffset:-13.452,yoffset:-.6600000000000037,xadvance:30.628,chnl:15,x:363,y:374,page:0},{id:53,width:58,height:69,xoffset:-13.4,yoffset:-.4000000000000057,xadvance:30.732,chnl:15,x:423,y:374,page:0},{id:54,width:58,height:69,xoffset:-12.672,yoffset:-.6600000000000037,xadvance:31.616,chnl:15,x:61,y:228,page:0},{id:56,width:58,height:69,xoffset:-12.672,yoffset:-.6600000000000037,xadvance:32.396,chnl:15,x:121,y:228,page:0},{id:57,width:58,height:69,xoffset:-13.452,yoffset:-.6600000000000037,xadvance:31.616,chnl:15,x:181,y:228,page:0},{id:74,width:47,height:69,xoffset:-13.972,yoffset:-.4000000000000057,xadvance:19.968,chnl:15,x:241,y:228,page:0},{id:79,width:59,height:69,xoffset:-12.672,yoffset:-.6600000000000037,xadvance:33.748,chnl:15,x:290,y:228,page:0},{id:63,width:58,height:69,xoffset:-14.18,yoffset:-.6600000000000037,xadvance:29.38,chnl:15,x:351,y:228,page:0},{id:88,width:58,height:68,xoffset:-13.504,yoffset:-.4000000000000057,xadvance:30.991999999999997,chnl:15,x:72,y:304,page:0},{id:72,width:58,height:68,xoffset:-12.672,yoffset:-.4000000000000057,xadvance:32.967999999999996,chnl:15,x:132,y:304,page:0},{id:86,width:61,height:68,xoffset:-14.18,yoffset:-.4000000000000057,xadvance:32.552,chnl:15,x:192,y:304,page:0},{id:73,width:39,height:68,xoffset:-12.672,yoffset:-.4000000000000057,xadvance:13.52,chnl:15,x:255,y:304,page:0},{id:66,width:58,height:68,xoffset:-12.672,yoffset:-.4000000000000057,xadvance:31.668,chnl:15,x:296,y:304,page:0},{id:89,width:60,height:68,xoffset:-14.128,yoffset:-.4000000000000057,xadvance:31.407999999999998,chnl:15,x:356,y:304,page:0},{id:90,width:55,height:68,xoffset:-13.712,yoffset:-.4000000000000057,xadvance:27.663999999999998,chnl:15,x:418,y:304,page:0},{id:68,width:58,height:68,xoffset:-12.672,yoffset:-.4000000000000057,xadvance:32.967999999999996,chnl:15,x:411,y:228,page:0},{id:49,width:44,height:68,xoffset:-14.18,yoffset:-.4000000000000057,xadvance:17.628,chnl:15,x:47,y:149,page:0},{id:75,width:59,height:68,xoffset:-12.672,yoffset:-.4000000000000057,xadvance:32.552,chnl:15,x:93,y:149,page:0},{id:76,width:53,height:68,xoffset:-12.672,yoffset:-.4000000000000057,xadvance:26.624,chnl:15,x:154,y:149,page:0},{id:52,width:57,height:68,xoffset:-14.232,yoffset:-.4000000000000057,xadvance:29.171999999999997,chnl:15,x:209,y:149,page:0},{id:77,width:66,height:68,xoffset:-12.672,yoffset:-.4000000000000057,xadvance:40.924,chnl:15,x:268,y:149,page:0},{id:78,width:60,height:68,xoffset:-12.672,yoffset:-.4000000000000057,xadvance:34.32,chnl:15,x:336,y:149,page:0},{id:55,width:56,height:68,xoffset:-13.66,yoffset:-.4000000000000057,xadvance:28.444,chnl:15,x:398,y:149,page:0},{id:69,width:55,height:68,xoffset:-12.672,yoffset:-.4000000000000057,xadvance:27.663999999999998,chnl:15,x:456,y:149,page:0},{id:80,width:58,height:68,xoffset:-12.672,yoffset:-.4000000000000057,xadvance:32.032,chnl:15,x:47,y:70,page:0},{id:70,width:54,height:68,xoffset:-12.672,yoffset:-.4000000000000057,xadvance:27.352,chnl:15,x:107,y:70,page:0},{id:33,width:39,height:68,xoffset:-12.672,yoffset:-.4000000000000057,xadvance:13.52,chnl:15,x:471,y:228,page:0},{id:82,width:58,height:68,xoffset:-12.672,yoffset:-.4000000000000057,xadvance:32.083999999999996,chnl:15,x:163,y:70,page:0},{id:65,width:61,height:68,xoffset:-14.18,yoffset:-.4000000000000057,xadvance:32.552,chnl:15,x:223,y:70,page:0},{id:33,width:39,height:68,xoffset:-12.672,yoffset:-.4000000000000057,xadvance:13.52,chnl:15,x:286,y:70,page:0},{id:84,width:56,height:68,xoffset:-13.712,yoffset:-.4000000000000057,xadvance:28.496,chnl:15,x:327,y:70,page:0},{id:36,width:52,height:65,xoffset:-13.4,yoffset:-.4000000000000057,xadvance:25.427999999999997,chnl:15,x:0,y:445,page:0},{id:45,width:48,height:38,xoffset:-13.4,yoffset:19.879999999999995,xadvance:21.215999999999998,chnl:15,x:54,y:445,page:0},{id:44,width:41,height:47,xoffset:-14.7,yoffset:29.136,xadvance:12.116,chnl:15,x:385,y:70,page:0},{id:46,width:39,height:39,xoffset:-14.18,yoffset:29.136,xadvance:10.504,chnl:15,x:428,y:70,page:0},{id:32,width:0,height:0,xoffset:-16,yoffset:36,xadvance:10.4,chnl:15,x:0,y:512,page:0}],info:{face:"Manifold CF Extra Bold",size:52,bold:0,italic:0,charset:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9",".","!",",","?","!","%","(",")","$","-"," "],unicode:1,stretchH:100,smooth:1,aa:1,padding:[0,0,0,0],spacing:[2,2]},common:{lineHeight:62.4,base:52,scaleW:512,scaleH:512,pages:1,packed:0,alphaChnl:0,redChnl:0,greenChnl:0,blueChnl:0},kernings:[{first:49,second:52,amount:.104},{first:50,second:49,amount:-.52},{first:52,second:55,amount:-1.04},{first:53,second:49,amount:-.52},{first:55,second:48,amount:.208},{first:55,second:52,amount:-3.2239999999999998},{first:55,second:56,amount:-1.04}]},d6=Z.p+"assets/images/9d8e996caffb7ba59fc0a88737b8edb2.png",h6=Z.p+"assets/images/494e8864c1283be9b7d773d83398aa5e.png";class f6{animate(){let t=window[`txt-${this.id}`];window[`textRequestAnimationId-${this.id}`]=requestAnimationFrame(function(){null==t||t.animate()}),null==t||t.render(),null==t||t.renderer.render(t.scene,t.camera)}render(){this.time+=.05,this.materialText&&(this.materialText.uniforms.u_time.value=this.time),this.renderer.render(this.scene,this.camera)}}const p6=["textCanvas"];let g6=(()=>{class i{constructor(){this.createModel()}get canvas(){return this.canvasRef.nativeElement}ngOnInit(){}ngAfterViewInit(){this.startAnimation()}ngOnDestroy(){this.stopAnimation()}ngOnChanges(e){"fontColor"===Object.keys(e)[0]&&this.model.materialText&&(this.stopAnimation(),this.startAnimation())}createText(e,s){(new Yr.TextureLoader).load(d6,o=>{this.model.material=this.createShader(),this.setText(o,e,s)})}setText(e,s,o){let l=s6()({text:s,font:u6,align:"center",flipY:e.flipY});this.model.materialText=new Yr.ShaderMaterial({uniforms:{u_time:{value:this.model.time},u_gradientMap:{value:(new Yr.TextureLoader).load(h6)},u_map:{value:e},u_color:{value:new Yr.Color(o)}},vertexShader:a6(),fragmentShader:c6(),side:Yr.DoubleSide,transparent:!0});let f=new Yr.Mesh(l,this.model.materialText);f.scale.set(.04,-.04,1),f.position.set(-13.5,-.7,2.5),this.model.scene.add(f)}createShader(){return new Yr.ShaderMaterial({extensions:{derivatives:!0},side:Yr.DoubleSide,depthTest:!1,depthWrite:!1,transparent:!0})}createModel(){this.model=new f6,this.model.id=(0,n6.v4)(),this.model.time=0}bootstrap(){this.model.sizes={width:this.canvas.parentElement.clientWidth,height:this.canvas.parentElement.clientHeight,offsetY:this.canvas.getBoundingClientRect().top,offsetX:this.canvas.getBoundingClientRect().left},this.model.scene=new Yr.Scene,this.model.renderer=this.createRenderer(this.canvas,this.model.sizes),this.model.camera=this.createCamera(this.model.sizes),this.model.scene.add(this.model.camera),this.setupLights(this.model.scene),this.setInteractionEvents()}setInteractionEvents(){window.addEventListener("resize",()=>{this.model.sizes.width=this.canvas.parentElement.clientWidth,this.model.sizes.height=this.canvas.parentElement.clientHeight,this.model.sizes.offsetX=this.canvas.getBoundingClientRect().left,this.model.sizes.offsetY=this.canvas.getBoundingClientRect().top,this.model.camera.aspect=this.model.sizes.width/this.model.sizes.height,this.model.camera.updateProjectionMatrix(),this.model.materialText.uniforms.u_viewport={type:"v2",value:new Yr.Vector2(this.model.sizes.width,this.model.sizes.height)},this.model.renderer.setSize(this.model.sizes.width,this.model.sizes.height),this.model.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))})}createRenderer(e,s){let o=new Yr.WebGLRenderer({canvas:e,alpha:!0});return o.setSize(s.width,s.height),o}createCamera(e){let s=new Yr.PerspectiveCamera(75,e.width/e.height,.1,100);return s.position.x=0,s.position.y=0,s.position.z=5,s}setupLights(e){let s=new Yr.PointLight(16777215,1);s.position.x=-.8,s.position.y=-8.8,s.position.z=9.7,e.add(s)}startAnimation(){this.createModel(),this.bootstrap(),this.createText(this.value,this.fontColor),window[`txt-${this.model.id}`]=this.model,this.model.animate()}stopAnimation(){window.cancelAnimationFrame(window[`roboRequestAnimationId-${this.model.id}`]),delete window[`txt-${this.model.id}`]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=u.Xpm({type:i,selectors:[["three-text"]],viewQuery:function(e,s){if(1&e&&u.Gf(p6,5),2&e){let o;u.iGM(o=u.CRH())&&(s.canvasRef=o.first)}},inputs:{value:"value",fontSize:"fontSize",fontColor:"fontColor"},features:[u.TTD],decls:3,vars:1,consts:[[1,"h-100","w-100"],[3,"id"],["textCanvas",""]],template:function(e,s){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"canvas",1,2),u.qZA()),2&e&&(u.xp6(1),u.MGl("id","text-",s.model.id,""))},styles:[""]}),i})();function ML(i,t){const e=(0,Ia.m)(i)?i:()=>i,s=o=>o.error(e());return new Ai.y(t?o=>t.schedule(s,0,o):s)}const m6=["*"];let bA;function ED(i){var t;return(null===(t=function _6(){if(void 0===bA&&(bA=null,"undefined"!=typeof window)){const i=window;void 0!==i.trustedTypes&&(bA=i.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return bA}())||void 0===t?void 0:t.createHTML(i))||i}function DL(i){return Error(`Unable to find icon with the name "${i}"`)}function EL(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function SL(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class sb{constructor(t,e,s){this.url=t,this.svgText=e,this.options=s}}let SD=(()=>{class i{constructor(e,s,o,l){this._httpClient=e,this._sanitizer=s,this._errorHandler=l,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=o}addSvgIcon(e,s,o){return this.addSvgIconInNamespace("",e,s,o)}addSvgIconLiteral(e,s,o){return this.addSvgIconLiteralInNamespace("",e,s,o)}addSvgIconInNamespace(e,s,o,l){return this._addSvgIconConfig(e,s,new sb(o,null,l))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,s,o,l){const f=this._sanitizer.sanitize(u.q3G.HTML,o);if(!f)throw SL(o);const _=ED(f);return this._addSvgIconConfig(e,s,new sb("",_,l))}addSvgIconSet(e,s){return this.addSvgIconSetInNamespace("",e,s)}addSvgIconSetLiteral(e,s){return this.addSvgIconSetLiteralInNamespace("",e,s)}addSvgIconSetInNamespace(e,s,o){return this._addSvgIconSetConfig(e,new sb(s,null,o))}addSvgIconSetLiteralInNamespace(e,s,o){const l=this._sanitizer.sanitize(u.q3G.HTML,s);if(!l)throw SL(s);const f=ED(l);return this._addSvgIconSetConfig(e,new sb("",f,o))}registerFontClassAlias(e,s=e){return this._fontCssClassesByAlias.set(e,s),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const s=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,e);if(!s)throw EL(e);const o=this._cachedIconsByUrl.get(s);return o?it(wA(o)):this._loadSvgIconFromConfig(new sb(e,null)).pipe((0,_i.b)(l=>this._cachedIconsByUrl.set(s,l)),(0,At.U)(l=>wA(l)))}getNamedSvgIcon(e,s=""){const o=AL(s,e);let l=this._svgIconConfigs.get(o);if(l)return this._getSvgFromConfig(l);if(l=this._getIconConfigFromResolvers(s,e),l)return this._svgIconConfigs.set(o,l),this._getSvgFromConfig(l);const f=this._iconSetConfigs.get(s);return f?this._getSvgFromIconSetConfigs(e,f):ML(DL(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?it(wA(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,At.U)(s=>wA(s)))}_getSvgFromIconSetConfigs(e,s){const o=this._extractIconWithNameFromAnySet(e,s);return o?it(o):d1(s.filter(f=>!f.svgText).map(f=>this._loadSvgIconSetFromConfig(f).pipe(sh(_=>{const E=`Loading icon set URL: ${this._sanitizer.sanitize(u.q3G.RESOURCE_URL,f.url)} failed: ${_.message}`;return this._errorHandler.handleError(new Error(E)),it(null)})))).pipe((0,At.U)(()=>{const f=this._extractIconWithNameFromAnySet(e,s);if(!f)throw DL(e);return f}))}_extractIconWithNameFromAnySet(e,s){for(let o=s.length-1;o>=0;o--){const l=s[o];if(l.svgText&&l.svgText.toString().indexOf(e)>-1){const f=this._svgElementFromConfig(l),_=this._extractSvgIconFromSet(f,e,l.options);if(_)return _}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,_i.b)(s=>e.svgText=s),(0,At.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?it(null):this._fetchIcon(e).pipe((0,_i.b)(s=>e.svgText=s))}_extractSvgIconFromSet(e,s,o){const l=e.querySelector(`[id="${s}"]`);if(!l)return null;const f=l.cloneNode(!0);if(f.removeAttribute("id"),"svg"===f.nodeName.toLowerCase())return this._setSvgAttributes(f,o);if("symbol"===f.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(f),o);const _=this._svgElementFromString(ED("<svg></svg>"));return _.appendChild(f),this._setSvgAttributes(_,o)}_svgElementFromString(e){const s=this._document.createElement("DIV");s.innerHTML=e;const o=s.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(e){const s=this._svgElementFromString(ED("<svg></svg>")),o=e.attributes;for(let l=0;l<o.length;l++){const{name:f,value:_}=o[l];"id"!==f&&s.setAttribute(f,_)}for(let l=0;l<e.childNodes.length;l++)e.childNodes[l].nodeType===this._document.ELEMENT_NODE&&s.appendChild(e.childNodes[l].cloneNode(!0));return s}_setSvgAttributes(e,s){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),s&&s.viewBox&&e.setAttribute("viewBox",s.viewBox),e}_fetchIcon(e){var s;const{url:o,options:l}=e,f=null!==(s=null==l?void 0:l.withCredentials)&&void 0!==s&&s;if(!this._httpClient)throw function v6(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==o)throw Error(`Cannot fetch icon from URL "${o}".`);const _=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,o);if(!_)throw EL(o);const w=this._inProgressUrlFetches.get(_);if(w)return w;const E=this._httpClient.get(_,{responseType:"text",withCredentials:f}).pipe((0,At.U)(T=>ED(T)),O0(()=>this._inProgressUrlFetches.delete(_)),(0,hE.B)());return this._inProgressUrlFetches.set(_,E),E}_addSvgIconConfig(e,s,o){return this._svgIconConfigs.set(AL(e,s),o),this}_addSvgIconSetConfig(e,s){const o=this._iconSetConfigs.get(e);return o?o.push(s):this._iconSetConfigs.set(e,[s]),this}_svgElementFromConfig(e){if(!e.svgElement){const s=this._svgElementFromString(e.svgText);this._setSvgAttributes(s,e.options),e.svgElement=s}return e.svgElement}_getIconConfigFromResolvers(e,s){for(let o=0;o<this._resolvers.length;o++){const l=this._resolvers[o](s,e);if(l)return b6(l)?new sb(l.url,null,l.options):new sb(l,null)}}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(AS,8),u.LFG(Ls),u.LFG(fe,8),u.LFG(u.qLn))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function wA(i){return i.cloneNode(!0)}function AL(i,t){return i+":"+t}function b6(i){return!(!i.url||!i.options)}const w6=dD(class{constructor(i){this._elementRef=i}}),x6=new u.OlP("mat-icon-location",{providedIn:"root",factory:function C6(){const i=(0,u.f3M)(fe),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),TL=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],M6=TL.map(i=>`[${i}]`).join(", "),D6=/^url\(['"]?#(.*?)['"]?\)$/;let IL=(()=>{class i extends w6{constructor(e,s,o,l,f){super(e),this._iconRegistry=s,this._location=l,this._errorHandler=f,this._inline=!1,this._currentIconFetch=zr.w0.EMPTY,o||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=ri(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const s=this._cleanupFontValue(e);s!==this._fontSet&&(this._fontSet=s,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const s=this._cleanupFontValue(e);s!==this._fontIcon&&(this._fontIcon=s,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const s=e.split(":");switch(s.length){case 1:return["",s[0]];case 2:return s;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const s=this._location.getPathname();s!==this._previousPath&&(this._previousPath=s,this._prependPathToReferences(s))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const s=e.querySelectorAll("style");for(let l=0;l<s.length;l++)s[l].textContent+=" ";const o=this._location.getPathname();this._previousPath=o,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(o),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let s=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();s--;){const o=e.childNodes[s];(1!==o.nodeType||"svg"===o.nodeName.toLowerCase())&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,s=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();s!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),s&&e.classList.add(s),this._previousFontSetClass=s),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const s=this._elementsWithExternalReferences;s&&s.forEach((o,l)=>{o.forEach(f=>{l.setAttribute(f.name,`url('${e}#${f.value}')`)})})}_cacheChildrenWithExternalReferences(e){const s=e.querySelectorAll(M6),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let l=0;l<s.length;l++)TL.forEach(f=>{const _=s[l],w=_.getAttribute(f),E=w?w.match(D6):null;if(E){let T=o.get(_);T||(T=[],o.set(_,T)),T.push({name:f,value:E[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[s,o]=this._splitIconName(e);s&&(this._svgNamespace=s),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,s).pipe((0,Fi.q)(1)).subscribe(l=>this._setSvgElement(l),l=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${s}:${o}! ${l.message}`))})}}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(SD),u.$8M("aria-hidden"),u.Y36(x6),u.Y36(u.qLn))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,s){2&e&&(u.uIk("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet),u.ekj("mat-icon-inline",s.inline)("mat-icon-no-color","primary"!==s.color&&"accent"!==s.color&&"warn"!==s.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[u.qOj],ngContentSelectors:m6,decls:1,vars:0,template:function(e,s){1&e&&(u.F$t(),u.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),i})(),RL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Li],Li]}),i})(),E6=(()=>{class i{constructor(){this.label="",this.disabled=!1}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=u.Xpm({type:i,selectors:[["main-button"]],inputs:{label:"label",disabled:"disabled"},decls:3,vars:2,consts:[["mat-raised-button","","color","accent",3,"disabled"]],template:function(e,s){1&e&&(u.TgZ(0,"button",0),u.TgZ(1,"span"),u._uU(2),u.qZA(),u.qZA()),2&e&&(u.Q6J("disabled",s.disabled),u.xp6(2),u.Oqu(s.label))},directives:[WI],styles:['@charset "UTF-8";button[_ngcontent-%COMP%]{display:block;box-shadow:0 8px 16px #0003,0 6px 20px #00000030;border-radius:4px;border:none;text-align:center;padding:10px;transition:all .5s;width:100%!important;margin-bottom:15px;font-size:clamp(.6em,6vw,1vw)}button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;position:relative;transition:.5s}button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"\\bb";position:absolute;opacity:0;top:0;right:-20px;transition:.5s}button[_ngcontent-%COMP%]:hover:enabled{filter:brightness(1.25)}button[_ngcontent-%COMP%]:hover:enabled   span[_ngcontent-%COMP%]{padding-right:25px}button[_ngcontent-%COMP%]:hover:enabled   span[_ngcontent-%COMP%]:after{opacity:1;right:0}button[_ngcontent-%COMP%]:disabled, button[disabled][_ngcontent-%COMP%]{opacity:.5}']}),i})();const S6=["threeBuildTextContainer"],A6=function(i,t){return{height:i,"max-height":t}};let T6=(()=>{class i{constructor(e,s,o){this.themeService=e,this.router=s,this.changor=o,this.threeBuildTextContainerHeight="0px",this.threeBuildTextColor=0}get threeBuildTextContainer(){return this.threeBuildTextContainerRef.nativeElement}ngOnInit(){this.threeBuildTextContainerHeight=this.getThreeBuildTextContainerHeight(),this.themeService.update.subscribe(e=>{switch(e){case"light-theme":this.threeBuildTextColor=0;break;case"dark-theme":this.threeBuildTextColor=16777215}})}ngAfterViewInit(){window.addEventListener("resize",()=>{this.threeBuildTextContainerHeight=this.getThreeBuildTextContainerHeight(),this.changor.detectChanges()})}openProjects(){this.router.navigate(["projects"])}openFirebaseAnalytics(){window.open("https://firebase.google.com/products/analytics?gclid=Cj0KCQiAmpyRBhC-ARIsABs2EAoiGnCWhj-dLGZMRG7mruClm4FUTlN9fxUq-FpVTjPDUWHi0GuxF0AaArReEALw_wcB&gclsrc=aw.ds","_blank").focus()}getThreeBuildTextContainerHeight(){let e=window.innerWidth/14.5;return e<80&&(e=80),e>135&&(e=135),`${e}px`}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(TS),u.Y36(d),u.Y36(u.sBO))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-overview"]],viewQuery:function(e,s){if(1&e&&u.Gf(S6,5),2&e){let o;u.iGM(o=u.CRH())&&(s.threeBuildTextContainerRef=o.first)}},decls:60,vars:24,consts:[["aria-labelledby","jeroen",1,"container-header-height","d-flex","flex-column","justify-content-center","container"],[1,"theme-color","mt-sm-4"],["id","jeroen"],["fxShow","true","fxHide.lt-md","true",1,"w-100",3,"ngStyle"],["threeBuildTextContainer",""],["value","I BUILD THINGS FOR THE WEB","fontSize","60",3,"fontColor"],[1,"text-justify"],[1,"mt-4"],[1,"d-flex"],[1,"ml-4"],["color","accent"],[1,"ml-2"],["fxShow","true","fxHide.lt-md","true",1,"w-50","ml-auto","mr-auto","mt-5"],[3,"label","click"],["fxShow","true","fxHide.gt-sm","true",1,"w-75","ml-auto","mr-auto","mt-5"],["svgIcon","my-info",1,"click-icon","mr-2",3,"click"],[1,"small-print"]],template:function(e,s){1&e&&(u.TgZ(0,"section",0),u.TgZ(1,"h2",1),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"h2",2),u._uU(5,"Jeroen"),u.qZA(),u.TgZ(6,"div",3,4),u._UZ(8,"three-text",5),u.qZA(),u.TgZ(9,"div",6),u.TgZ(10,"p"),u._uU(11),u.ALo(12,"translate"),u.qZA(),u.TgZ(13,"p",7),u._uU(14),u.ALo(15,"translate"),u.qZA(),u.qZA(),u.TgZ(16,"div",8),u.TgZ(17,"div",9),u.TgZ(18,"div",8),u.TgZ(19,"mat-icon",10),u._uU(20,"play_arrow"),u.qZA(),u.TgZ(21,"p",11),u._uU(22,".NET 5.0"),u.qZA(),u.qZA(),u.TgZ(23,"div",8),u.TgZ(24,"mat-icon",10),u._uU(25,"play_arrow"),u.qZA(),u.TgZ(26,"p",11),u._uU(27,"Angular"),u.qZA(),u.qZA(),u.TgZ(28,"div",8),u.TgZ(29,"mat-icon",10),u._uU(30,"play_arrow"),u.qZA(),u.TgZ(31,"p",11),u._uU(32,"Keras & Tensorflow"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(33,"div",9),u.TgZ(34,"div",8),u.TgZ(35,"mat-icon",10),u._uU(36,"play_arrow"),u.qZA(),u.TgZ(37,"p",11),u._uU(38,"Kubernetes"),u.qZA(),u.qZA(),u.TgZ(39,"div",8),u.TgZ(40,"mat-icon",10),u._uU(41,"play_arrow"),u.qZA(),u.TgZ(42,"p",11),u._uU(43,"Django"),u.qZA(),u.qZA(),u.TgZ(44,"div",8),u.TgZ(45,"mat-icon",10),u._uU(46,"play_arrow"),u.qZA(),u.TgZ(47,"p",11),u._uU(48,"Cloud Computing Services"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(49,"div",12),u.TgZ(50,"main-button",13),u.NdJ("click",function(){return s.openProjects()}),u.ALo(51,"translate"),u.qZA(),u.qZA(),u.TgZ(52,"div",14),u.TgZ(53,"main-button",13),u.NdJ("click",function(){return s.openProjects()}),u.ALo(54,"translate"),u.qZA(),u.qZA(),u.TgZ(55,"div",8),u.TgZ(56,"mat-icon",15),u.NdJ("click",function(){return s.openFirebaseAnalytics()}),u.qZA(),u.TgZ(57,"p",16),u._uU(58),u.ALo(59,"translate"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.Oqu(u.lcZ(3,9,"about.intro")),u.xp6(4),u.Q6J("@fadeAnimation",void 0)("ngStyle",u.WLB(21,A6,s.threeBuildTextContainerHeight,s.threeBuildTextContainerHeight)),u.xp6(2),u.Q6J("fontColor",s.threeBuildTextColor),u.xp6(3),u.hij(" ",u.lcZ(12,11,"about.iam")," "),u.xp6(3),u.hij(" ",u.lcZ(15,13,"about.someTech")," "),u.xp6(36),u.s9C("label",u.lcZ(51,15,"signpost.checkProjects")),u.xp6(3),u.s9C("label",u.lcZ(54,17,"signpost.checkProjects")),u.xp6(5),u.Oqu(u.lcZ(59,19,"info.firebaseDataCollection")))},directives:[XS,Kf,$k,g6,IL,E6],pipes:[ES],styles:[".small-print[_ngcontent-%COMP%]{font-size:.75em;line-height:30px}@media only screen and (max-width: 400px){.mt-sm-4[_ngcontent-%COMP%]{margin-top:150px}}"],data:{animation:[t6]}}),i})();class Cx{}class tR{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class AD extends tR{constructor(t,e,s,o){super(),this.component=t,this.viewContainerRef=e,this.injector=s,this.componentFactoryResolver=o}}class xA extends tR{constructor(t,e,s){super(),this.templateRef=t,this.viewContainerRef=e,this.context=s}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class I6 extends tR{constructor(t){super(),this.element=t instanceof u.SBq?t.nativeElement:t}}class CA{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof AD?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof xA?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof I6?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class R6 extends CA{constructor(t,e,s,o,l){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=s,this._defaultInjector=o,this.attachDomPortal=f=>{const _=f.element,w=this._document.createComment("dom-portal");_.parentNode.insertBefore(w,_),this.outletElement.appendChild(_),this._attachedPortal=f,super.setDisposeFn(()=>{w.parentNode&&w.parentNode.replaceChild(_,w)})},this._document=l}attachComponentPortal(t){const s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let o;return t.viewContainerRef?(o=t.viewContainerRef.createComponent(s,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>o.destroy())):(o=s.create(t.injector||this._defaultInjector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(o)),this._attachedPortal=t,o}attachTemplatePortal(t){let e=t.viewContainerRef,s=e.createEmbeddedView(t.templateRef,t.context);return s.rootNodes.forEach(o=>this.outletElement.appendChild(o)),s.detectChanges(),this.setDisposeFn(()=>{let o=e.indexOf(s);-1!==o&&e.remove(o)}),this._attachedPortal=t,s}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let MA=(()=>{class i extends CA{constructor(e,s,o){super(),this._componentFactoryResolver=e,this._viewContainerRef=s,this._isInitialized=!1,this.attached=new u.vpe,this.attachDomPortal=l=>{const f=l.element,_=this._document.createComment("dom-portal");l.setAttachedHost(this),f.parentNode.insertBefore(_,f),this._getRootNode().appendChild(f),this._attachedPortal=l,super.setDisposeFn(()=>{_.parentNode&&_.parentNode.replaceChild(f,_)})},this._document=o}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const s=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,l=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),f=s.createComponent(l,s.length,e.injector||s.injector);return s!==this._viewContainerRef&&this._getRootNode().appendChild(f.hostView.rootNodes[0]),super.setDisposeFn(()=>f.destroy()),this._attachedPortal=e,this._attachedRef=f,this.attached.emit(f),f}attachTemplatePortal(e){e.setAttachedHost(this);const s=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=s,this.attached.emit(s),s}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u._Vd),u.Y36(u.s_b),u.Y36(fe))},i.\u0275dir=u.lG2({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[u.qOj]}),i})(),Mx=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})();var P6=Z(2733);function PL(i,t=!1){return(0,ci.e)((e,s)=>{let o=0;e.subscribe(new Ci.Q(s,l=>{const f=i(l,o++);(f||t)&&s.next(l),!f&&s.complete()}))})}var k6=Z(1345);const F6=new u.OlP("SMOOTH_SCROLL_OPTIONS");let L6=(()=>{class i{constructor(e,s,o){this._document=e,this._platform=s,this._onGoingScrolls=new Map,this._defaultOptions=Object.assign({duration:468,easing:{x1:.42,y1:0,x2:.58,y2:1}},o)}get _w(){return this._document.defaultView}get _now(){return this._w.performance&&this._w.performance.now?this._w.performance.now.bind(this._w.performance):Date.now}_scrollElement(e,s,o){e.scrollLeft=s,e.scrollTop=o}_getElement(e,s){return"string"==typeof e?(s||this._document).querySelector(e):oo(e)}_initSmoothScroll(e){return this._onGoingScrolls.has(e)&&this._onGoingScrolls.get(e).next(),this._onGoingScrolls.set(e,new Ft.x).get(e)}_isFinished(e,s,o){return e.currentX!==e.x||e.currentY!==e.y||(s.next(),o(),!1)}_interrupted(e,s){return(0,Hs.T)(gs(e,"wheel",{passive:!0,capture:!0}),gs(e,"touchmove",{passive:!0,capture:!0}),s).pipe((0,Fi.q)(1))}_destroy(e,s){s.complete(),this._onGoingScrolls.delete(e)}_step(e){return new Ai.y(s=>{let o=(this._now()-e.startTime)/e.duration;o=o>1?1:o;const l=e.easing(o);e.currentX=e.startX+(e.x-e.startX)*l,e.currentY=e.startY+(e.y-e.startY)*l,this._scrollElement(e.scrollable,e.currentX,e.currentY),hA.schedule(()=>s.next(e))})}_applyScrollToOptions(e,s){if(!s.duration)return this._scrollElement(e,s.left,s.top),Promise.resolve();const o=this._initSmoothScroll(e),l={scrollable:e,startTime:this._now(),startX:e.scrollLeft,startY:e.scrollTop,x:null==s.left?e.scrollLeft:~~s.left,y:null==s.top?e.scrollTop:~~s.top,duration:s.duration,easing:k6(s.easing.x1,s.easing.y1,s.easing.x2,s.easing.y2)};return new Promise(f=>{it(null).pipe(function O6(i,t=1/0,e){return t=(t||0)<1?1/0:t,(0,ci.e)((s,o)=>(0,P6.p)(s,o,i,t,void 0,!0,e))}(()=>this._step(l).pipe(PL(_=>this._isFinished(_,o,f)))),Kn(this._interrupted(e,o)),O0(()=>this._destroy(e,o))).subscribe()})}scrollTo(e,s){if(Ki(this._platform)){const o=this._getElement(e),l="rtl"===getComputedStyle(o).direction,f=Z0(),_=Object.assign(Object.assign(Object.assign({},this._defaultOptions),s),{left:null==s.left?l?s.end:s.start:s.left,right:null==s.right?l?s.start:s.end:s.right});return null!=_.bottom&&(_.top=o.scrollHeight-o.clientHeight-_.bottom),l&&0!==f?(null!=_.left&&(_.right=o.scrollWidth-o.clientWidth-_.left),2===f?_.left=_.right:1===f&&(_.left=_.right?-_.right:_.right)):null!=_.right&&(_.left=o.scrollWidth-o.clientWidth-_.right),this._applyScrollToOptions(o,_)}return Promise.resolve()}scrollToElement(e,s,o={}){const l=this._getElement(e),f=this._getElement(s,l),_=Object.assign(Object.assign({},o),{left:f.offsetLeft+(o.left||0),top:f.offsetTop+(o.top||0)});return f?this.scrollTo(l,_):Promise.resolve()}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(fe),u.LFG(u.Lbi),u.LFG(F6,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),N6=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})();function DA(...i){const t=i.length;if(0===t)throw new Error("list of properties cannot be empty.");return(0,At.U)(e=>{let s=e;for(let o=0;o<t;o++){const l=null==s?void 0:s[i[o]];if(void 0===l)return;s=l}return s})}const B6=["scrollbarY"],V6=["scrollbarX"];function G6(i,t){if(1&i&&u._UZ(0,"scrollbar-x",null,4),2&i){const e=u.oxw(2);u.uIk("scrollable",e.state.isHorizontallyScrollable)("fit",e.state.verticalUsed)}}function U6(i,t){if(1&i&&u._UZ(0,"scrollbar-y",null,5),2&i){const e=u.oxw(2);u.uIk("scrollable",e.state.isVerticallyScrollable)("fit",e.state.horizontalUsed)}}function H6(i,t){if(1&i&&(u.ynx(0),u.YNc(1,G6,2,2,"scrollbar-x",3),u.YNc(2,U6,2,2,"scrollbar-y",3),u.BQk()),2&i){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",e.state.horizontalUsed),u.xp6(1),u.Q6J("ngIf",e.state.verticalUsed)}}const z6=["*"];function OL(i){return(0,_i.b)(()=>{i.onselectstart=()=>!1})}function kL(i){return(0,_i.b)(()=>{i.onselectstart=null})}function nv(){return(0,_i.b)(i=>i.stopPropagation())}function nR(i,t){return i.clientX>=t.left&&i.clientX<=t.left+t.width&&i.clientY>=t.top&&i.clientY<=t.top+t.height}let iR=(()=>{class i{constructor(e){this.viewPort=e,this.nativeElement=e.nativeElement}get clientHeight(){return this.nativeElement.clientHeight}get clientWidth(){return this.nativeElement.clientWidth}get scrollHeight(){return this.nativeElement.scrollHeight}get scrollWidth(){return this.nativeElement.scrollWidth}get scrollTop(){return this.nativeElement.scrollTop}get scrollLeft(){return this.nativeElement.scrollLeft}get scrollMaxX(){return this.scrollWidth-this.clientWidth}get scrollMaxY(){return this.scrollHeight-this.clientHeight}get contentHeight(){var e;return(null===(e=this.contentWrapperElement)||void 0===e?void 0:e.clientHeight)||0}get contentWidth(){var e;return(null===(e=this.contentWrapperElement)||void 0===e?void 0:e.clientWidth)||0}activatePointerEvents(e,s){this.hovered=new Ai.y(o=>{const l=gs(this.nativeElement,"mousemove",{passive:!0}),f=e?l:l.pipe(nv()),_=gs(this.nativeElement,"mouseleave",{passive:!0}).pipe((0,At.U)(()=>!1));(0,Hs.T)(f,_).pipe((0,_i.b)(w=>o.next(w)),Kn(s)).subscribe()}),this.clicked=new Ai.y(o=>{const l=gs(this.nativeElement,"mousedown",{passive:!0}).pipe((0,_i.b)(_=>o.next(_))),f=gs(this.nativeElement,"mouseup",{passive:!0}).pipe((0,_i.b)(()=>o.next(!1)));l.pipe(ki(()=>f),Kn(s)).subscribe()})}setAsWrapper(){this.nativeElement.className="ng-native-scrollbar-hider ng-scroll-layer",this.nativeElement.firstElementChild&&(this.nativeElement.firstElementChild.className="ng-scroll-layer")}setAsViewport(e){this.nativeElement.className=`ng-native-scrollbar-hider ng-scroll-viewport ${e}`,this.nativeElement.firstElementChild&&(this.contentWrapperElement=this.nativeElement.firstElementChild,this.contentWrapperElement.classList.add("ng-scroll-content"))}scrollYTo(e){this.nativeElement.scrollTop=e}scrollXTo(e){this.nativeElement.scrollLeft=e}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq))},i.\u0275dir=u.lG2({type:i,selectors:[["","scrollViewport",""]]}),i})(),ch=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=u.lG2({type:i}),i})();const FL=new u.OlP("NG_SCROLLBAR_OPTIONS"),LL={viewClass:"",trackClass:"",thumbClass:"",track:"vertical",appearance:"compact",visibility:"native",position:"native",pointerEventsMethod:"viewport",trackClickScrollDuration:300,minThumbSize:20,windowResizeDebounce:0,sensorDebounce:0,scrollAuditTime:0,viewportPropagateMouseMove:!0,autoHeightDisabled:!0,autoWidthDisabled:!0,sensorDisabled:!1,pointerEventsDisabled:!1};let NL=(()=>{class i{constructor(e){this.globalOptions=e?Object.assign(Object.assign({},LL),e):LL,this.rtlScrollAxisType=Z0()}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(FL,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),rR=(()=>{class i{constructor(e,s,o){this.cmp=e,this.trackElement=s,this.document=o}get clicked(){const e=gs(this.trackElement,"mousedown",{passive:!0}).pipe(nv(),OL(this.document)),s=gs(this.document,"mouseup",{passive:!0}).pipe(nv(),kL(this.document),ki(()=>ih.E));return(0,Hs.T)(e,s)}get clientRect(){return this.trackElement.getBoundingClientRect()}onTrackClicked(e,s,o){return it(e).pipe(DA(this.pageProperty),(0,At.U)(l=>(l-this.offset-s/2)/this.size*o),(0,_i.b)(l=>{this.cmp.scrollTo(Object.assign(Object.assign({},this.mapToScrollToOption(l)),{duration:Q0(this.cmp.trackClickScrollDuration)}))}))}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(ch),u.Y36(HTMLElement),u.Y36(Document))},i.\u0275dir=u.lG2({type:i}),i})(),sR=(()=>{class i extends rR{constructor(e,s,o){super(e,s.nativeElement,o),this.cmp=e,this.document=o}get pageProperty(){return"pageX"}get offset(){return this.clientRect.left}get size(){return this.trackElement.clientWidth}mapToScrollToOption(e){return{left:e}}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(ch),u.Y36(u.SBq),u.Y36(fe))},i.\u0275dir=u.lG2({type:i,selectors:[["","scrollbarTrackX",""]],features:[u.qOj]}),i})(),oR=(()=>{class i extends rR{constructor(e,s,o){super(e,s.nativeElement,o),this.cmp=e,this.document=o}get pageProperty(){return"pageY"}get offset(){return this.clientRect.top}get size(){return this.trackElement.clientHeight}mapToScrollToOption(e){return{top:e}}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(ch),u.Y36(u.SBq),u.Y36(fe))},i.\u0275dir=u.lG2({type:i,selectors:[["","scrollbarTrackY",""]],features:[u.qOj]}),i})(),BL=(()=>{class i{constructor(e,s,o,l){this.cmp=e,this.track=s,this.thumbElement=o,this.document=l,this._dragging=new Ft.x,this.dragging=this._dragging.pipe(Ao())}get trackMax(){return this.track.size-this.size}get clientRect(){return this.thumbElement.getBoundingClientRect()}get clicked(){return gs(this.thumbElement,"mousedown",{passive:!0}).pipe(nv())}update(){const e=function j6(i,t,e){return Math.max(~~(i/t*i),e)}(this.track.size,this.viewportScrollSize,this.cmp.minThumbSize),s=function W6(i,t,e){return i*e/t}(this.viewportScrollOffset,this.viewportScrollMax,this.trackMax);hA.schedule(()=>this.updateStyles(this.handleDirection(s,this.trackMax),e))}dragged(e){let s,o;const l=it(e).pipe(OL(this.document),(0,_i.b)(()=>{s=this.trackMax,o=this.viewportScrollMax,this.setDragging(!0)})),f=gs(this.document,"mousemove",{capture:!0,passive:!0}).pipe(nv()),_=gs(this.document,"mouseup",{capture:!0}).pipe(nv(),kL(this.document),(0,_i.b)(()=>this.setDragging(!1)));return l.pipe(DA(this.pageProperty),(0,At.U)(w=>w-this.dragStartOffset),(0,Ts.z)(w=>f.pipe(DA(this.clientProperty),(0,At.U)(E=>E-this.track.offset),(0,At.U)(E=>o*(E-w)/s),(0,At.U)(E=>this.handleDrag(E,o)),(0,_i.b)(E=>this.scrollTo(E)),Kn(_))))}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(ch),u.Y36(rR),u.Y36(HTMLElement),u.Y36(Document))},i.\u0275dir=u.lG2({type:i,outputs:{dragging:"dragging"}}),i})(),VL=(()=>{class i extends BL{constructor(e,s,o,l,f){super(e,s,o.nativeElement,l),this.cmp=e,this.track=s,this.element=o,this.document=l,this.dir=f}get clientProperty(){return"clientX"}get pageProperty(){return"pageX"}get viewportScrollSize(){return this.cmp.viewport.scrollWidth}get viewportScrollOffset(){return this.cmp.viewport.scrollLeft}get viewportScrollMax(){return this.cmp.viewport.scrollMaxX}get dragStartOffset(){return this.clientRect.left+this.document.defaultView.pageXOffset||0}get size(){return this.thumbElement.clientWidth}updateStyles(e,s){this.thumbElement.style.width=`${s}px`,this.thumbElement.style.transform=`translate3d(${e}px, 0, 0)`}handleDrag(e,s){if("rtl"===this.dir.value){if(1===this.cmp.manager.rtlScrollAxisType)return e-s;if(2===this.cmp.manager.rtlScrollAxisType)return s-e}return e}handleDirection(e,s){if("rtl"===this.dir.value){if(2===this.cmp.manager.rtlScrollAxisType)return-e;if(0===this.cmp.manager.rtlScrollAxisType)return e-s}return e}setDragging(e){this.cmp.setDragging({horizontalDragging:e})}scrollTo(e){this.cmp.viewport.scrollXTo(e)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(ch),u.Y36(sR),u.Y36(u.SBq),u.Y36(fe),u.Y36(qc))},i.\u0275dir=u.lG2({type:i,selectors:[["","scrollbarThumbX",""]],features:[u.qOj]}),i})(),GL=(()=>{class i extends BL{constructor(e,s,o,l){super(e,s,o.nativeElement,l),this.cmp=e,this.track=s,this.element=o,this.document=l}get pageProperty(){return"pageY"}get viewportScrollSize(){return this.cmp.viewport.scrollHeight}get viewportScrollOffset(){return this.cmp.viewport.scrollTop}get viewportScrollMax(){return this.cmp.viewport.scrollMaxY}get clientProperty(){return"clientY"}get dragStartOffset(){return this.clientRect.top+this.document.defaultView.pageYOffset||0}get size(){return this.thumbElement.clientHeight}updateStyles(e,s){this.thumbElement.style.height=`${s}px`,this.thumbElement.style.transform=`translate3d(0px, ${e}px, 0)`}handleDrag(e){return e}handleDirection(e){return e}setDragging(e){this.cmp.setDragging({verticalDragging:e})}scrollTo(e){this.cmp.viewport.scrollYTo(e)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(ch),u.Y36(oR),u.Y36(u.SBq),u.Y36(fe))},i.\u0275dir=u.lG2({type:i,selectors:[["","scrollbarThumbY",""]],features:[u.qOj]}),i})(),UL=(()=>{class i{constructor(e,s,o,l,f){this.el=e,this.cmp=s,this.platform=o,this.document=l,this.zone=f,this.destroyed=new Ft.x}activatePointerEvents(){let e,s,o;return"viewport"===this.cmp.pointerEventsMethod?(this.viewportTrackClicked=new Ft.x,this.viewportThumbClicked=new Ft.x,this.cmp.viewport.activatePointerEvents(this.cmp.viewportPropagateMouseMove,this.destroyed),e=this.viewportThumbClicked,s=this.viewportTrackClicked,o=this.cmp.viewport.hovered.pipe((0,At.U)(l=>!!l&&nR(l,this.el.getBoundingClientRect())),Ao(),(0,_i.b)(l=>this.document.onselectstart=l?()=>!1:null)),this.cmp.viewport.clicked.pipe((0,_i.b)(l=>{l?nR(l,this.thumb.clientRect)?this.viewportThumbClicked.next(l):nR(l,this.track.clientRect)&&(this.cmp.setClicked(!0),this.viewportTrackClicked.next(l)):this.cmp.setClicked(!1)}),Kn(this.destroyed)).subscribe()):(e=this.thumb.clicked,s=this.track.clicked,o=this.hovered),(0,Hs.T)(o.pipe((0,_i.b)(l=>this.setHovered(l))),e.pipe(ki(l=>this.thumb.dragged(l))),s.pipe(ki(l=>this.track.onTrackClicked(l,this.thumb.size,this.viewportScrollSize))))}get hovered(){const e=gs(this.el,"mouseenter",{passive:!0}).pipe(nv(),(0,At.U)(()=>!0)),s=gs(this.el,"mouseleave",{passive:!0}).pipe(nv(),(0,At.U)(()=>!1));return(0,Hs.T)(e,s)}ngOnInit(){this.zone.runOutsideAngular(()=>{!(this.platform.IOS||this.platform.ANDROID)&&!this.cmp.pointerEventsDisabled&&this.activatePointerEvents().pipe(Kn(this.destroyed)).subscribe(),(0,Hs.T)(this.cmp.scrolled,this.cmp.updated).pipe((0,_i.b)(()=>{var e;return null===(e=this.thumb)||void 0===e?void 0:e.update()}),Kn(this.destroyed)).subscribe()})}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete(),this.viewportThumbClicked&&this.viewportTrackClicked&&(this.viewportTrackClicked.complete(),this.viewportThumbClicked.complete())}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(HTMLElement),u.Y36(ch),u.Y36(Is),u.Y36(Document),u.Y36(u.R0b))},i.\u0275dir=u.lG2({type:i}),i})(),Y6=(()=>{class i extends UL{constructor(e,s,o,l,f){super(e.nativeElement,s,o,l,f),this.cmp=s,this.platform=o,this.document=l,this.zone=f}get viewportScrollSize(){return this.cmp.viewport.scrollHeight}setHovered(e){this.cmp.setHovered({verticalHovered:e})}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(ch),u.Y36(Is),u.Y36(fe),u.Y36(u.R0b))},i.\u0275cmp=u.Xpm({type:i,selectors:[["scrollbar-y"]],viewQuery:function(e,s){if(1&e&&(u.Gf(oR,7),u.Gf(GL,7)),2&e){let o;u.iGM(o=u.CRH())&&(s.track=o.first),u.iGM(o=u.CRH())&&(s.thumb=o.first)}},hostVars:2,hostBindings:function(e,s){2&e&&u.ekj("scrollbar-control",!0)},features:[u.qOj],decls:2,vars:6,consts:[["scrollbarTrackY",""],["scrollbarThumbY",""]],template:function(e,s){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"div",1),u.qZA()),2&e&&(u.Gre("ng-scrollbar-track ",s.cmp.trackClass,""),u.xp6(1),u.Gre("ng-scrollbar-thumb ",s.cmp.thumbClass,""))},directives:[oR,GL],styles:[".ng-scrollbar-wrapper>scrollbar-y.scrollbar-control{width:var(--vertical-scrollbar-total-size)}  .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track{width:var(--vertical-scrollbar-size);height:calc(100% - var(--scrollbar-padding) * 2)}  .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{height:0;width:100%}  .ng-scrollbar-wrapper[verticalHovered=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb,   .ng-scrollbar-wrapper[verticalDragging=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}  .ng-scrollbar-wrapper[deactivated=false]>scrollbar-y.scrollbar-control{top:0;bottom:0}  .ng-scrollbar-wrapper[deactivated=false][dir=ltr]>scrollbar-y.scrollbar-control{right:0;left:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertY]>scrollbar-y.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertAll]>scrollbar-y.scrollbar-control{left:0;right:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=rtl]>scrollbar-y.scrollbar-control{left:0;right:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertY]>scrollbar-y.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertAll]>scrollbar-y.scrollbar-control{left:unset;right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all]>scrollbar-y.scrollbar-control[fit=true]{bottom:var(--scrollbar-total-size);top:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertX]>scrollbar-y.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertAll]>scrollbar-y.scrollbar-control[fit=true]{top:var(--scrollbar-total-size);bottom:0}"],changeDetection:0}),i})(),q6=(()=>{class i extends UL{constructor(e,s,o,l,f){super(e.nativeElement,s,o,l,f),this.cmp=s,this.platform=o,this.document=l,this.zone=f}get viewportScrollSize(){return this.cmp.viewport.scrollWidth}setHovered(e){this.cmp.setHovered({horizontalHovered:e})}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(ch),u.Y36(Is),u.Y36(fe),u.Y36(u.R0b))},i.\u0275cmp=u.Xpm({type:i,selectors:[["scrollbar-x"]],viewQuery:function(e,s){if(1&e&&(u.Gf(sR,7),u.Gf(VL,7)),2&e){let o;u.iGM(o=u.CRH())&&(s.track=o.first),u.iGM(o=u.CRH())&&(s.thumb=o.first)}},hostVars:2,hostBindings:function(e,s){2&e&&u.ekj("scrollbar-control",!0)},features:[u.qOj],decls:2,vars:6,consts:[["scrollbarTrackX",""],["scrollbarThumbX",""]],template:function(e,s){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"div",1),u.qZA()),2&e&&(u.Gre("ng-scrollbar-track ",s.cmp.trackClass,""),u.xp6(1),u.Gre("ng-scrollbar-thumb ",s.cmp.thumbClass,""))},directives:[sR,VL],styles:[".ng-scrollbar-wrapper>scrollbar-x.scrollbar-control{height:var(--horizontal-scrollbar-total-size)}  .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track{height:var(--horizontal-scrollbar-size);width:calc(100% - var(--scrollbar-padding) * 2)}  .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{width:0;height:100%}  .ng-scrollbar-wrapper[horizontalHovered=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb,   .ng-scrollbar-wrapper[horizontalDragging=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}  .ng-scrollbar-wrapper[position=invertX]>scrollbar-x.scrollbar-control,   .ng-scrollbar-wrapper[position=invertAll]>scrollbar-x.scrollbar-control{top:0;bottom:unset}  .ng-scrollbar-wrapper[deactivated=false]>scrollbar-x.scrollbar-control{left:0;right:0;bottom:0;top:unset}  .ng-scrollbar-wrapper[deactivated=false][position=invertX]>scrollbar-x.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][position=invertAll]>scrollbar-x.scrollbar-control{top:0;bottom:unset}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertY]>scrollbar-x.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertAll]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertY]>scrollbar-x.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertAll]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}"],changeDetection:0}),i})(),$6=(()=>{class i{constructor(e){this.el=e}set ngAttr(e){for(const[s,o]of Object.entries(e))this.el.nativeElement.setAttribute(s,o)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq))},i.\u0275dir=u.lG2({type:i,selectors:[["","ngAttr",""]],inputs:{ngAttr:"ngAttr"}}),i})(),Z6=(()=>{class i{constructor(e,s,o){if(this.zone=e,this.platform=s,this.scrollbar=o,this._disabled=!1,this._currentSubscription=null,this.event=new u.vpe,!o)throw new Error("[NgScrollbar Resize Sensor Directive]: Host element must be an NgScrollbar component.")}get debounce(){return this._debounce}set debounce(e){this._debounce=Q0(e),this._subscribe()}get disabled(){return this._disabled}set disabled(e){this._disabled=ri(e),this._disabled?this._unsubscribe():this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this._disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){if(this._unsubscribe(),this.platform.isBrowser){const e=new Ai.y(s=>{this._resizeObserver=new ResizeObserver(o=>s.next(o)),this._resizeObserver.observe(this.scrollbar.viewport.nativeElement),this.scrollbar.viewport.contentWrapperElement&&this._resizeObserver.observe(this.scrollbar.viewport.contentWrapperElement)});this.zone.runOutsideAngular(()=>{this._currentSubscription=(this._debounce?e.pipe(gx(this._debounce)):e).subscribe(this.event)})}}_unsubscribe(){var e,s;null===(e=this._resizeObserver)||void 0===e||e.disconnect(),null===(s=this._currentSubscription)||void 0===s||s.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.R0b),u.Y36(Is),u.Y36(ch))},i.\u0275dir=u.lG2({type:i,selectors:[["","resizeSensor",""]],inputs:{debounce:["sensorDebounce","debounce"],disabled:["sensorDisabled","disabled"]},outputs:{event:"resizeSensor"}}),i})(),K6=(()=>{class i{constructor(e,s,o){this.document=e,this.manager=s,this.platform=o,this._scrollbarSize=new Hr(this.getNativeScrollbarSize()),this.scrollbarSize=this._scrollbarSize.asObservable(),o.isBrowser&&gs(this.document.defaultView,"resize",{passive:!0}).pipe(gx(this.manager.globalOptions.windowResizeDebounce),(0,At.U)(()=>this.getNativeScrollbarSize()),Ao(),(0,_i.b)(l=>this._scrollbarSize.next(l))).subscribe()}getNativeScrollbarSize(){if(!this.platform.isBrowser)return 0;if(this.platform.IOS)return 6;const e=this.document.createElement("div");e.className="ng-scrollbar-measure",e.style.left="0px",e.style.overflow="scroll",e.style.position="fixed",e.style.top="-9999px",this.document.body.appendChild(e);const s=e.getBoundingClientRect().right;return this.document.body.removeChild(e),s}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(fe),u.LFG(NL),u.LFG(Is))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Q6=(()=>{class i{constructor(e,s,o){this.renderer=s,this.hideNativeScrollbar=o,this._subscriber=zr.w0.EMPTY,this._subscriber=o.scrollbarSize.subscribe(l=>{this.renderer.setStyle(e.nativeElement,"--native-scrollbar-size",`-${l}px`,u.JOm.DashCase)})}ngOnDestroy(){this._subscriber.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(K6))},i.\u0275dir=u.lG2({type:i,selectors:[["","hideNativeScrollbar",""]]}),i})(),X6=(()=>{class i{constructor(e,s,o,l,f,_){this.el=e,this.zone=s,this.changeDetectorRef=o,this.dir=l,this.smoothScroll=f,this.manager=_,this._disabled=!1,this._sensorDisabled=this.manager.globalOptions.sensorDisabled,this._pointerEventsDisabled=this.manager.globalOptions.pointerEventsDisabled,this._autoHeightDisabled=this.manager.globalOptions.autoHeightDisabled,this._autoWidthDisabled=this.manager.globalOptions.autoWidthDisabled,this._viewportPropagateMouseMove=this.manager.globalOptions.viewportPropagateMouseMove,this.viewClass=this.manager.globalOptions.viewClass,this.trackClass=this.manager.globalOptions.trackClass,this.thumbClass=this.manager.globalOptions.thumbClass,this.minThumbSize=this.manager.globalOptions.minThumbSize,this.trackClickScrollDuration=this.manager.globalOptions.trackClickScrollDuration,this.pointerEventsMethod=this.manager.globalOptions.pointerEventsMethod,this.track=this.manager.globalOptions.track,this.visibility=this.manager.globalOptions.visibility,this.appearance=this.manager.globalOptions.appearance,this.position=this.manager.globalOptions.position,this.sensorDebounce=this.manager.globalOptions.sensorDebounce,this.scrollAuditTime=this.manager.globalOptions.scrollAuditTime,this.updated=new u.vpe,this.state={},this.destroyed=new Ft.x}get disabled(){return this._disabled}set disabled(e){this._disabled=ri(e)}get sensorDisabled(){return this._sensorDisabled}set sensorDisabled(e){this._sensorDisabled=ri(e)}get pointerEventsDisabled(){return this._pointerEventsDisabled}set pointerEventsDisabled(e){this._pointerEventsDisabled=ri(e)}get viewportPropagateMouseMove(){return this._viewportPropagateMouseMove}set viewportPropagateMouseMove(e){this._viewportPropagateMouseMove=ri(e)}get autoHeightDisabled(){return this._autoHeightDisabled}set autoHeightDisabled(e){this._autoHeightDisabled=ri(e)}get autoWidthDisabled(){return this._autoWidthDisabled}set autoWidthDisabled(e){this._autoWidthDisabled=ri(e)}get nativeElement(){return this.el.nativeElement}updateState(){let e=!1,s=!1,o=!1,l=!1;("all"===this.track||"vertical"===this.track)&&(o=this.viewport.scrollHeight>this.viewport.clientHeight,e="always"===this.visibility||o),("all"===this.track||"horizontal"===this.track)&&(l=this.viewport.scrollWidth>this.viewport.clientWidth,s="always"===this.visibility||l),this.setState({position:this.position,track:this.track,appearance:this.appearance,visibility:this.visibility,deactivated:this.disabled,dir:this.dir.value,pointerEventsMethod:this.pointerEventsMethod,verticalUsed:e,horizontalUsed:s,isVerticallyScrollable:o,isHorizontallyScrollable:l})}setState(e){this.state=Object.assign(Object.assign({},this.state),e),this.changeDetectorRef.detectChanges()}getScrolledByDirection(e){let s;return this.scrolled.pipe((0,_i.b)(o=>s=o),DA("target",e),Ah(),Jn(([o,l])=>o!==l),(0,At.U)(()=>s))}setHovered(e){this.zone.run(()=>this.setState(Object.assign({},e)))}setDragging(e){this.zone.run(()=>this.setState(Object.assign({},e)))}setClicked(e){this.zone.run(()=>this.setState({scrollbarClicked:e}))}ngOnInit(){this.zone.runOutsideAngular(()=>{this.customViewPort?(this.viewport=this.customViewPort,this.defaultViewPort.setAsWrapper()):this.viewport=this.defaultViewPort,this.viewport.setAsViewport(this.viewClass);let e=gs(this.viewport.nativeElement,"scroll",{passive:!0});e=this.scrollAuditTime?e.pipe($I(this.scrollAuditTime)):e,this.scrolled=e.pipe(Kn(this.destroyed)),this.verticalScrolled=this.getScrolledByDirection("scrollTop"),this.horizontalScrolled=this.getScrolledByDirection("scrollLeft")})}ngOnChanges(e){this.viewport&&this.update()}ngAfterViewInit(){this.update(),this.dir.change.pipe((0,_i.b)(()=>this.update()),Kn(this.destroyed)).subscribe()}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}update(){this.autoHeightDisabled||this.updateHeight(),this.autoWidthDisabled||this.updateWidth(),this.updateState(),this.updated.next()}scrollTo(e){return this.smoothScroll.scrollTo(this.viewport.nativeElement,e)}scrollToElement(e,s){return this.smoothScroll.scrollToElement(this.viewport.nativeElement,e,s)}updateHeight(){this.nativeElement.style.height="standard"===this.appearance&&this.scrollbarX?`${this.viewport.contentHeight+this.scrollbarX.nativeElement.clientHeight}px`:`${this.viewport.contentHeight}px`}updateWidth(){this.nativeElement.style.width="standard"===this.appearance&&this.scrollbarY?`${this.viewport.contentWidth+this.scrollbarY.nativeElement.clientWidth}px`:`${this.viewport.contentWidth}px`}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(u.sBO),u.Y36(qc),u.Y36(L6),u.Y36(NL))},i.\u0275cmp=u.Xpm({type:i,selectors:[["ng-scrollbar"]],contentQueries:function(e,s,o){if(1&e&&u.Suo(o,iR,7),2&e){let l;u.iGM(l=u.CRH())&&(s.customViewPort=l.first)}},viewQuery:function(e,s){if(1&e&&(u.Gf(B6,5,u.SBq),u.Gf(V6,5,u.SBq),u.Gf(iR,7)),2&e){let o;u.iGM(o=u.CRH())&&(s.scrollbarY=o.first),u.iGM(o=u.CRH())&&(s.scrollbarX=o.first),u.iGM(o=u.CRH())&&(s.defaultViewPort=o.first)}},hostVars:2,hostBindings:function(e,s){2&e&&u.ekj("ng-scrollbar",!0)},inputs:{disabled:"disabled",sensorDisabled:"sensorDisabled",pointerEventsDisabled:"pointerEventsDisabled",viewportPropagateMouseMove:"viewportPropagateMouseMove",autoHeightDisabled:"autoHeightDisabled",autoWidthDisabled:"autoWidthDisabled",viewClass:"viewClass",trackClass:"trackClass",thumbClass:"thumbClass",minThumbSize:"minThumbSize",trackClickScrollDuration:"trackClickScrollDuration",pointerEventsMethod:"pointerEventsMethod",track:"track",visibility:"visibility",appearance:"appearance",position:"position",sensorDebounce:"sensorDebounce",scrollAuditTime:"scrollAuditTime"},outputs:{updated:"updated"},exportAs:["ngScrollbar"],features:[u._Bn([{provide:ch,useExisting:i}]),u.TTD],ngContentSelectors:z6,decls:6,vars:4,consts:[[1,"ng-scrollbar-wrapper",3,"ngAttr"],[1,"ng-scroll-viewport-wrapper",3,"sensorDebounce","sensorDisabled","resizeSensor"],["scrollViewport","","hideNativeScrollbar",""],[4,"ngIf"],["scrollbarX",""],["scrollbarY",""]],template:function(e,s){1&e&&(u.F$t(),u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.NdJ("resizeSensor",function(){return s.update()}),u.TgZ(2,"div",2),u.TgZ(3,"div"),u.Hsn(4),u.qZA(),u.qZA(),u.qZA(),u.YNc(5,H6,3,2,"ng-container",3),u.qZA()),2&e&&(u.Q6J("ngAttr",s.state),u.xp6(1),u.Q6J("sensorDebounce",s.sensorDebounce)("sensorDisabled",s.sensorDisabled),u.xp6(4),u.Q6J("ngIf",!s.disabled))},directives:[q6,Y6,$6,Z6,iR,Q6,Kr],styles:[".ng-scrollbar-measure{scrollbar-width:none;-ms-overflow-style:none}  .ng-scrollbar-measure::-webkit-scrollbar{display:none}[_nghost-%COMP%]{--scrollbar-border-radius: 7px;--scrollbar-padding: 4px;--scrollbar-track-color: transparent;--scrollbar-thumb-color: rgba(0, 0, 0, .2);--scrollbar-thumb-hover-color: var(--scrollbar-thumb-color);--scrollbar-size: 5px;--scrollbar-hover-size: var(--scrollbar-size);--scrollbar-overscroll-behavior: initial;--scrollbar-transition-duration: .4s;--scrollbar-transition-delay: .8s;--scrollbar-thumb-transition: height ease-out .15s, width ease-out .15s;--scrollbar-track-transition: height ease-out .15s, width ease-out .15s;display:block;position:relative;height:100%;max-height:100%;max-width:100%;box-sizing:content-box!important}[_nghost-%COMP%] > .ng-scrollbar-wrapper[_ngcontent-%COMP%]{--scrollbar-total-size: calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size: var(--scrollbar-size);--horizontal-scrollbar-size: var(--scrollbar-size);--vertical-scrollbar-total-size: calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size: calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalHovered=true][_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalDragging=true][_ngcontent-%COMP%]{--vertical-scrollbar-size: var(--scrollbar-hover-size);--vertical-scrollbar-total-size: calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}[_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalHovered=true][_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalDragging=true][_ngcontent-%COMP%]{--horizontal-scrollbar-size: var(--scrollbar-hover-size);--horizontal-scrollbar-total-size: calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:0;right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:var(--scrollbar-total-size);right:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:var(--scrollbar-total-size);right:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:0;right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{top:0;bottom:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{padding-bottom:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{top:var(--scrollbar-total-size);bottom:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{padding-top:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{scrollbar-width:none;-ms-overflow-style:none}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport::-webkit-scrollbar{display:none}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-native-scrollbar-hider{bottom:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-native-scrollbar-hider{left:0;right:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-native-scrollbar-hider{right:0;left:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%] > .scrollbar-control[_ngcontent-%COMP%]{opacity:0;transition-property:opacity;transition-duration:var(--scrollbar-transition-duration);transition-delay:var(--scrollbar-transition-delay)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:hover > .scrollbar-control[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:active > .scrollbar-control[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:focus > .scrollbar-control[_ngcontent-%COMP%]{opacity:1;transition-duration:var(--scrollbar-transition-duration);transition-delay:0ms}[_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{overflow-x:auto;overflow-y:hidden}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{overflow:auto}.ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{overflow:hidden}.ng-scroll-viewport[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position;overscroll-behavior:var(--scrollbar-overscroll-behavior)}  .ng-scroll-content{position:relative!important;display:inline-block;min-width:100%}.ng-scrollbar-wrapper[_ngcontent-%COMP%], .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], .ng-scroll-layer[_ngcontent-%COMP%],   .ng-scroll-viewport{position:absolute;left:0;right:0;top:0;bottom:0}",".ng-scrollbar-wrapper[pointerEventsMethod=viewport]>.scrollbar-control{pointer-events:none}  .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,   .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>*>*>  .ng-scroll-viewport,   .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,   .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>*>*>  .ng-scroll-viewport,   .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,   .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>*>*>  .ng-scroll-viewport{-webkit-user-select:none;-moz-user-select:none;user-select:none}  .ng-scrollbar-wrapper>.scrollbar-control{position:absolute;display:flex;justify-content:center;align-items:center;transition:var(--scrollbar-track-transition)}  .ng-scrollbar-wrapper>.scrollbar-control[scrollable=false] .ng-scrollbar-thumb{display:none}  .ng-scrollbar-track{height:100%;width:100%;z-index:1;border-radius:var(--scrollbar-border-radius);background-color:var(--scrollbar-track-color);overflow:hidden;transition:var(--scrollbar-track-transition);cursor:default}  .ng-scrollbar-thumb{box-sizing:border-box;position:relative;border-radius:inherit;background-color:var(--scrollbar-thumb-color);transform:translateZ(0);transition:var(--scrollbar-thumb-transition)}"],changeDetection:0}),i})(),J6=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:FL,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[ws,Y0,Mx,q0,N6]]}),i})();const ej=["connectionContainer"],tj=["inputContainer"],nj=["label"];function ij(i,t){1&i&&(u.ynx(0),u.TgZ(1,"div",14),u._UZ(2,"div",15),u._UZ(3,"div",16),u._UZ(4,"div",17),u.qZA(),u.TgZ(5,"div",18),u._UZ(6,"div",15),u._UZ(7,"div",16),u._UZ(8,"div",17),u.qZA(),u.BQk())}function rj(i,t){if(1&i){const e=u.EpF();u.TgZ(0,"div",19),u.NdJ("cdkObserveContent",function(){return u.CHM(e),u.oxw().updateOutlineGap()}),u.Hsn(1,1),u.qZA()}if(2&i){const e=u.oxw();u.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)}}function sj(i,t){if(1&i&&(u.ynx(0),u.Hsn(1,2),u.TgZ(2,"span"),u._uU(3),u.qZA(),u.BQk()),2&i){const e=u.oxw(2);u.xp6(3),u.Oqu(e._control.placeholder)}}function oj(i,t){1&i&&u.Hsn(0,3,["*ngSwitchCase","true"])}function aj(i,t){1&i&&(u.TgZ(0,"span",23),u._uU(1," *"),u.qZA())}function lj(i,t){if(1&i){const e=u.EpF();u.TgZ(0,"label",20,21),u.NdJ("cdkObserveContent",function(){return u.CHM(e),u.oxw().updateOutlineGap()}),u.YNc(2,sj,4,1,"ng-container",12),u.YNc(3,oj,1,0,"ng-content",12),u.YNc(4,aj,2,0,"span",22),u.qZA()}if(2&i){const e=u.oxw();u.ekj("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),u.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),u.uIk("for",e._control.id)("aria-owns",e._control.id),u.xp6(2),u.Q6J("ngSwitchCase",!1),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function cj(i,t){1&i&&(u.TgZ(0,"div",24),u.Hsn(1,4),u.qZA())}function uj(i,t){if(1&i&&(u.TgZ(0,"div",25),u._UZ(1,"span",26),u.qZA()),2&i){const e=u.oxw();u.xp6(1),u.ekj("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function dj(i,t){if(1&i&&(u.TgZ(0,"div"),u.Hsn(1,5),u.qZA()),2&i){const e=u.oxw();u.Q6J("@transitionMessages",e._subscriptAnimationState)}}function hj(i,t){if(1&i&&(u.TgZ(0,"div",30),u._uU(1),u.qZA()),2&i){const e=u.oxw(2);u.Q6J("id",e._hintLabelId),u.xp6(1),u.Oqu(e.hintLabel)}}function fj(i,t){if(1&i&&(u.TgZ(0,"div",27),u.YNc(1,hj,2,2,"div",28),u.Hsn(2,6),u._UZ(3,"div",29),u.Hsn(4,7),u.qZA()),2&i){const e=u.oxw();u.Q6J("@transitionMessages",e._subscriptAnimationState),u.xp6(1),u.Q6J("ngIf",e.hintLabel)}}const pj=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],gj=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],mj=new u.OlP("MatError"),_j={transitionMessages:vl("transitionMessages",[ro("enter",zn({opacity:1,transform:"translateY(0%)"})),jr("void => enter",[zn({opacity:0,transform:"translateY(-5px)"}),os("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let aR=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=u.lG2({type:i}),i})();const vj=new u.OlP("MatHint");let lR=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=u.lG2({type:i,selectors:[["mat-label"]]}),i})(),yj=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=u.lG2({type:i,selectors:[["mat-placeholder"]]}),i})();const bj=new u.OlP("MatPrefix"),wj=new u.OlP("MatSuffix");let HL=0;const Cj=dD(class{constructor(i){this._elementRef=i}},"primary"),Mj=new u.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),cR=new u.OlP("MatFormField");let Dj=(()=>{class i extends Cj{constructor(e,s,o,l,f,_,w){super(e),this._changeDetectorRef=s,this._dir=o,this._defaults=l,this._platform=f,this._ngZone=_,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Ft.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+HL++,this._labelId="mat-form-field-label-"+HL++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==w,this.appearance=l&&l.appearance?l.appearance:"legacy",this._hideRequiredMarker=!(!l||null==l.hideRequiredMarker)&&l.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const s=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&s!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=ri(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(Ji(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Kn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Kn(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Hs.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Ji(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Ji(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Kn(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const s=this._control?this._control.ngControl:null;return s&&s[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,gs(this._label.nativeElement,"transitionend").pipe((0,Fi.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const s=this._hintChildren?this._hintChildren.find(l=>"start"===l.align):null,o=this._hintChildren?this._hintChildren.find(l=>"end"===l.align):null;s?e.push(s.id):this._hintLabel&&e.push(this._hintLabelId),o&&e.push(o.id)}else this._errorChildren&&e.push(...this._errorChildren.map(s=>s.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,s=this._connectionContainerRef.nativeElement,o=".mat-form-field-outline-start",l=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const T=s.querySelectorAll(`${o}, ${l}`);for(let F=0;F<T.length;F++)T[F].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let f=0,_=0;const w=s.querySelectorAll(o),E=s.querySelectorAll(l);if(this._label&&this._label.nativeElement.children.length){const T=s.getBoundingClientRect();if(0===T.width&&0===T.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const F=this._getStartEnd(T),G=e.children,H=this._getStartEnd(G[0].getBoundingClientRect());let Y=0;for(let q=0;q<G.length;q++)Y+=G[q].offsetWidth;f=Math.abs(H-F)-5,_=Y>0?.75*Y+10:0}for(let T=0;T<w.length;T++)w[T].style.width=`${f}px`;for(let T=0;T<E.length;T++)E[T].style.width=`${_}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const s=e.getRootNode();return s&&s!==e}return document.documentElement.contains(e)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(qc,8),u.Y36(Mj,8),u.Y36(Is),u.Y36(u.R0b),u.Y36(zf,8))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-form-field"]],contentQueries:function(e,s,o){if(1&e&&(u.Suo(o,aR,5),u.Suo(o,aR,7),u.Suo(o,lR,5),u.Suo(o,lR,7),u.Suo(o,yj,5),u.Suo(o,mj,5),u.Suo(o,vj,5),u.Suo(o,bj,5),u.Suo(o,wj,5)),2&e){let l;u.iGM(l=u.CRH())&&(s._controlNonStatic=l.first),u.iGM(l=u.CRH())&&(s._controlStatic=l.first),u.iGM(l=u.CRH())&&(s._labelChildNonStatic=l.first),u.iGM(l=u.CRH())&&(s._labelChildStatic=l.first),u.iGM(l=u.CRH())&&(s._placeholderChild=l.first),u.iGM(l=u.CRH())&&(s._errorChildren=l),u.iGM(l=u.CRH())&&(s._hintChildren=l),u.iGM(l=u.CRH())&&(s._prefixChildren=l),u.iGM(l=u.CRH())&&(s._suffixChildren=l)}},viewQuery:function(e,s){if(1&e&&(u.Gf(ej,7),u.Gf(tj,5),u.Gf(nj,5)),2&e){let o;u.iGM(o=u.CRH())&&(s._connectionContainerRef=o.first),u.iGM(o=u.CRH())&&(s._inputContainerRef=o.first),u.iGM(o=u.CRH())&&(s._label=o.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,s){2&e&&u.ekj("mat-form-field-appearance-standard","standard"==s.appearance)("mat-form-field-appearance-fill","fill"==s.appearance)("mat-form-field-appearance-outline","outline"==s.appearance)("mat-form-field-appearance-legacy","legacy"==s.appearance)("mat-form-field-invalid",s._control.errorState)("mat-form-field-can-float",s._canLabelFloat())("mat-form-field-should-float",s._shouldLabelFloat())("mat-form-field-has-label",s._hasFloatingLabel())("mat-form-field-hide-placeholder",s._hideControlPlaceholder())("mat-form-field-disabled",s._control.disabled)("mat-form-field-autofilled",s._control.autofilled)("mat-focused",s._control.focused)("ng-untouched",s._shouldForward("untouched"))("ng-touched",s._shouldForward("touched"))("ng-pristine",s._shouldForward("pristine"))("ng-dirty",s._shouldForward("dirty"))("ng-valid",s._shouldForward("valid"))("ng-invalid",s._shouldForward("invalid"))("ng-pending",s._shouldForward("pending"))("_mat-animation-noopable",!s._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[u._Bn([{provide:cR,useExisting:i}]),u.qOj],ngContentSelectors:gj,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,s){1&e&&(u.F$t(pj),u.TgZ(0,"div",0),u.TgZ(1,"div",1,2),u.NdJ("click",function(l){return s._control.onContainerClick&&s._control.onContainerClick(l)}),u.YNc(3,ij,9,0,"ng-container",3),u.YNc(4,rj,2,1,"div",4),u.TgZ(5,"div",5,6),u.Hsn(7),u.TgZ(8,"span",7),u.YNc(9,lj,5,16,"label",8),u.qZA(),u.qZA(),u.YNc(10,cj,2,0,"div",9),u.qZA(),u.YNc(11,uj,2,4,"div",10),u.TgZ(12,"div",11),u.YNc(13,dj,2,1,"div",12),u.YNc(14,fj,5,2,"div",13),u.qZA(),u.qZA()),2&e&&(u.xp6(3),u.Q6J("ngIf","outline"==s.appearance),u.xp6(1),u.Q6J("ngIf",s._prefixChildren.length),u.xp6(5),u.Q6J("ngIf",s._hasFloatingLabel()),u.xp6(1),u.Q6J("ngIf",s._suffixChildren.length),u.xp6(1),u.Q6J("ngIf","outline"!=s.appearance),u.xp6(1),u.Q6J("ngSwitch",s._getDisplayedMessages()),u.xp6(1),u.Q6J("ngSwitchCase","error"),u.xp6(1),u.Q6J("ngSwitchCase","hint"))},directives:[Kr,wO,uo,Mo],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[_j.transitionMessages]},changeDetection:0}),i})(),TD=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[ws,Li,B1],Li]}),i})();const jL=gO();class Ej{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=so(-this._previousScrollPosition.left),t.style.top=so(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,s=t.style,o=this._document.body.style,l=s.scrollBehavior||"",f=o.scrollBehavior||"";this._isEnabled=!1,s.left=this._previousHTMLStyles.left,s.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),jL&&(s.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),jL&&(s.scrollBehavior=l,o.scrollBehavior=f)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,s=this._viewportRuler.getViewportSize();return e.scrollHeight>s.height||e.scrollWidth>s.width}}class Sj{constructor(t,e,s,o){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=s,this._config=o,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class WL{enable(){}disable(){}attach(){}}function uR(i,t){return t.some(e=>i.bottom<e.top||i.top>e.bottom||i.right<e.left||i.left>e.right)}function YL(i,t){return t.some(e=>i.top<e.top||i.bottom>e.bottom||i.left<e.left||i.right>e.right)}class Aj{constructor(t,e,s,o){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=s,this._config=o,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:s,height:o}=this._viewportRuler.getViewportSize();uR(e,[{width:s,height:o,bottom:o,right:s,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Tj=(()=>{class i{constructor(e,s,o,l){this._scrollDispatcher=e,this._viewportRuler=s,this._ngZone=o,this.noop=()=>new WL,this.close=f=>new Sj(this._scrollDispatcher,this._ngZone,this._viewportRuler,f),this.block=()=>new Ej(this._viewportRuler,this._document),this.reposition=f=>new Aj(this._scrollDispatcher,this._viewportRuler,this._ngZone,f),this._document=l}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(gA),u.LFG(xx),u.LFG(u.R0b),u.LFG(fe))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class EA{constructor(t){if(this.scrollStrategy=new WL,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const s of e)void 0!==t[s]&&(this[s]=t[s])}}}class Ij{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}class Rj{constructor(t,e,s,o,l,f,_,w,E){this._portalOutlet=t,this._host=e,this._pane=s,this._config=o,this._ngZone=l,this._keyboardDispatcher=f,this._document=_,this._location=w,this._outsideClickDispatcher=E,this._backdropElement=null,this._backdropClick=new Ft.x,this._attachments=new Ft.x,this._detachments=new Ft.x,this._locationChanges=zr.w0.EMPTY,this._backdropClickHandler=T=>this._backdropClick.next(T),this._keydownEvents=new Ft.x,this._outsidePointerEvents=new Ft.x,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Fi.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(t=this._host)||void 0===t||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=so(this._config.width),t.height=so(this._config.height),t.minWidth=so(this._config.minWidth),t.minHeight=so(this._config.minHeight),t.maxWidth=so(this._config.maxWidth),t.maxHeight=so(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(!t)return;let e;const s=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",s),this._disposeBackdrop(t)),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",s)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(s,500))}_toggleClasses(t,e,s){const o=PS(e||[]).filter(l=>!!l);o.length&&(s?t.classList.add(...o):t.classList.remove(...o))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Kn((0,Hs.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.remove(),this._backdropElement===t&&(this._backdropElement=null))}}let dR=(()=>{class i{constructor(e,s){this._platform=s,this._document=e}ngOnDestroy(){var e;null===(e=this._containerElement)||void 0===e||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||P1()){const o=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let l=0;l<o.length;l++)o[l].remove()}const s=this._document.createElement("div");s.classList.add(e),P1()?s.setAttribute("platform","test"):this._platform.isBrowser||s.setAttribute("platform","server"),this._document.body.appendChild(s),this._containerElement=s}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(fe),u.LFG(Is))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const qL="cdk-overlay-connected-position-bounding-box",Pj=/([A-Za-z%]+)$/;class Oj{constructor(t,e,s,o,l){this._viewportRuler=e,this._document=s,this._platform=o,this._overlayContainer=l,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ft.x,this._resizeSubscription=zr.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(qL),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,s=this._viewportRect,o=this._containerRect,l=[];let f;for(let _ of this._preferredPositions){let w=this._getOriginPoint(t,o,_),E=this._getOverlayPoint(w,e,_),T=this._getOverlayFit(E,e,s,_);if(T.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(_,w);this._canFitWithFlexibleDimensions(T,E,s)?l.push({position:_,origin:w,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(w,_)}):(!f||f.overlayFit.visibleArea<T.visibleArea)&&(f={overlayFit:T,overlayPoint:E,originPoint:w,position:_,overlayRect:e})}if(l.length){let _=null,w=-1;for(const E of l){const T=E.boundingBoxRect.width*E.boundingBoxRect.height*(E.position.weight||1);T>w&&(w=T,_=E)}return this._isPushed=!1,void this._applyPosition(_.position,_.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(f.position,f.originPoint);this._applyPosition(f.position,f.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ob(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(qL),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,s){let o,l;if("center"==s.originX)o=t.left+t.width/2;else{const f=this._isRtl()?t.right:t.left,_=this._isRtl()?t.left:t.right;o="start"==s.originX?f:_}return e.left<0&&(o-=e.left),l="center"==s.originY?t.top+t.height/2:"top"==s.originY?t.top:t.bottom,e.top<0&&(l-=e.top),{x:o,y:l}}_getOverlayPoint(t,e,s){let o,l;return o="center"==s.overlayX?-e.width/2:"start"===s.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,l="center"==s.overlayY?-e.height/2:"top"==s.overlayY?0:-e.height,{x:t.x+o,y:t.y+l}}_getOverlayFit(t,e,s,o){const l=ZL(e);let{x:f,y:_}=t,w=this._getOffset(o,"x"),E=this._getOffset(o,"y");w&&(f+=w),E&&(_+=E);let G=0-_,H=_+l.height-s.height,Y=this._subtractOverflows(l.width,0-f,f+l.width-s.width),q=this._subtractOverflows(l.height,G,H),J=Y*q;return{visibleArea:J,isCompletelyWithinViewport:l.width*l.height===J,fitsInViewportVertically:q===l.height,fitsInViewportHorizontally:Y==l.width}}_canFitWithFlexibleDimensions(t,e,s){if(this._hasFlexibleDimensions){const o=s.bottom-e.y,l=s.right-e.x,f=$L(this._overlayRef.getConfig().minHeight),_=$L(this._overlayRef.getConfig().minWidth),E=t.fitsInViewportHorizontally||null!=_&&_<=l;return(t.fitsInViewportVertically||null!=f&&f<=o)&&E}return!1}_pushOverlayOnScreen(t,e,s){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const o=ZL(e),l=this._viewportRect,f=Math.max(t.x+o.width-l.width,0),_=Math.max(t.y+o.height-l.height,0),w=Math.max(l.top-s.top-t.y,0),E=Math.max(l.left-s.left-t.x,0);let T=0,F=0;return T=o.width<=l.width?E||-f:t.x<this._viewportMargin?l.left-s.left-t.x:0,F=o.height<=l.height?w||-_:t.y<this._viewportMargin?l.top-s.top-t.y:0,this._previousPushAmount={x:T,y:F},{x:t.x+T,y:t.y+F}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const s=this._getScrollVisibility(),o=new Ij(t,s);this._positionChanges.next(o)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let s,o=t.overlayY;s="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let l=0;l<e.length;l++)e[l].style.transformOrigin=`${s} ${o}`}_calculateBoundingBoxRect(t,e){const s=this._viewportRect,o=this._isRtl();let l,f,_,T,F,G;if("top"===e.overlayY)f=t.y,l=s.height-f+this._viewportMargin;else if("bottom"===e.overlayY)_=s.height-t.y+2*this._viewportMargin,l=s.height-_+this._viewportMargin;else{const H=Math.min(s.bottom-t.y+s.top,t.y),Y=this._lastBoundingBoxSize.height;l=2*H,f=t.y-H,l>Y&&!this._isInitialRender&&!this._growAfterOpen&&(f=t.y-Y/2)}if("end"===e.overlayX&&!o||"start"===e.overlayX&&o)G=s.width-t.x+this._viewportMargin,T=t.x-this._viewportMargin;else if("start"===e.overlayX&&!o||"end"===e.overlayX&&o)F=t.x,T=s.right-t.x;else{const H=Math.min(s.right-t.x+s.left,t.x),Y=this._lastBoundingBoxSize.width;T=2*H,F=t.x-H,T>Y&&!this._isInitialRender&&!this._growAfterOpen&&(F=t.x-Y/2)}return{top:f,left:F,bottom:_,right:G,width:T,height:l}}_setBoundingBoxStyles(t,e){const s=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(s.height=Math.min(s.height,this._lastBoundingBoxSize.height),s.width=Math.min(s.width,this._lastBoundingBoxSize.width));const o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{const l=this._overlayRef.getConfig().maxHeight,f=this._overlayRef.getConfig().maxWidth;o.height=so(s.height),o.top=so(s.top),o.bottom=so(s.bottom),o.width=so(s.width),o.left=so(s.left),o.right=so(s.right),o.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",o.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",l&&(o.maxHeight=so(l)),f&&(o.maxWidth=so(f))}this._lastBoundingBoxSize=s,ob(this._boundingBox.style,o)}_resetBoundingBoxStyles(){ob(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ob(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const s={},o=this._hasExactPosition(),l=this._hasFlexibleDimensions,f=this._overlayRef.getConfig();if(o){const T=this._viewportRuler.getViewportScrollPosition();ob(s,this._getExactOverlayY(e,t,T)),ob(s,this._getExactOverlayX(e,t,T))}else s.position="static";let _="",w=this._getOffset(e,"x"),E=this._getOffset(e,"y");w&&(_+=`translateX(${w}px) `),E&&(_+=`translateY(${E}px)`),s.transform=_.trim(),f.maxHeight&&(o?s.maxHeight=so(f.maxHeight):l&&(s.maxHeight="")),f.maxWidth&&(o?s.maxWidth=so(f.maxWidth):l&&(s.maxWidth="")),ob(this._pane.style,s)}_getExactOverlayY(t,e,s){let o={top:"",bottom:""},l=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(l=this._pushOverlayOnScreen(l,this._overlayRect,s)),"bottom"===t.overlayY?o.bottom=this._document.documentElement.clientHeight-(l.y+this._overlayRect.height)+"px":o.top=so(l.y),o}_getExactOverlayX(t,e,s){let f,o={left:"",right:""},l=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(l=this._pushOverlayOnScreen(l,this._overlayRect,s)),f=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===f?o.right=this._document.documentElement.clientWidth-(l.x+this._overlayRect.width)+"px":o.left=so(l.x),o}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),s=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:YL(t,s),isOriginOutsideView:uR(t,s),isOverlayClipped:YL(e,s),isOverlayOutsideView:uR(e,s)}}_subtractOverflows(t,...e){return e.reduce((s,o)=>s-Math.max(o,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,s=this._viewportRuler.getViewportScrollPosition();return{top:s.top+this._viewportMargin,left:s.left+this._viewportMargin,right:s.left+t-this._viewportMargin,bottom:s.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&PS(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof u.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,s=t.height||0;return{top:t.y,bottom:t.y+s,left:t.x,right:t.x+e,height:s,width:e}}}function ob(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function $L(i){if("number"!=typeof i&&null!=i){const[t,e]=i.split(Pj);return e&&"px"!==e?null:parseFloat(t)}return i||null}function ZL(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const KL="cdk-global-overlay-wrapper";class kj{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(KL),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,s=this._overlayRef.getConfig(),{width:o,height:l,maxWidth:f,maxHeight:_}=s,w=!("100%"!==o&&"100vw"!==o||f&&"100%"!==f&&"100vw"!==f),E=!("100%"!==l&&"100vh"!==l||_&&"100%"!==_&&"100vh"!==_);t.position=this._cssPosition,t.marginLeft=w?"0":this._leftOffset,t.marginTop=E?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,w?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=E?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,s=e.style;e.classList.remove(KL),s.justifyContent=s.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Fj=(()=>{class i{constructor(e,s,o,l){this._viewportRuler=e,this._document=s,this._platform=o,this._overlayContainer=l}global(){return new kj}flexibleConnectedTo(e){return new Oj(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(xx),u.LFG(fe),u.LFG(Is),u.LFG(dR))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),QL=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const s=this._attachedOverlays.indexOf(e);s>-1&&this._attachedOverlays.splice(s,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(fe))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Lj=(()=>{class i extends QL{constructor(e){super(e),this._keydownListener=s=>{const o=this._attachedOverlays;for(let l=o.length-1;l>-1;l--)if(o[l]._keydownEvents.observers.length>0){o[l]._keydownEvents.next(s);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(fe))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Nj=(()=>{class i extends QL{constructor(e,s){super(e),this._platform=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=ah(o)},this._clickListener=o=>{const l=ah(o),f="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;const _=this._attachedOverlays.slice();for(let w=_.length-1;w>-1;w--){const E=_[w];if(!(E._outsidePointerEvents.observers.length<1)&&E.hasAttached()){if(E.overlayElement.contains(l)||E.overlayElement.contains(f))break;E._outsidePointerEvents.next(o)}}}}add(e){if(super.add(e),!this._isAttached){const s=this._document.body;s.addEventListener("pointerdown",this._pointerDownListener,!0),s.addEventListener("click",this._clickListener,!0),s.addEventListener("auxclick",this._clickListener,!0),s.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=s.style.cursor,s.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(fe),u.LFG(Is))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Bj=0,uh=(()=>{class i{constructor(e,s,o,l,f,_,w,E,T,F,G){this.scrollStrategies=e,this._overlayContainer=s,this._componentFactoryResolver=o,this._positionBuilder=l,this._keyboardDispatcher=f,this._injector=_,this._ngZone=w,this._document=E,this._directionality=T,this._location=F,this._outsideClickDispatcher=G}create(e){const s=this._createHostElement(),o=this._createPaneElement(s),l=this._createPortalOutlet(o),f=new EA(e);return f.direction=f.direction||this._directionality.value,new Rj(l,s,o,f,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const s=this._document.createElement("div");return s.id="cdk-overlay-"+Bj++,s.classList.add("cdk-overlay-pane"),e.appendChild(s),s}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(u.z2F)),new R6(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(Tj),u.LFG(dR),u.LFG(u._Vd),u.LFG(Fj),u.LFG(Lj),u.LFG(u.zs3),u.LFG(u.R0b),u.LFG(fe),u.LFG(qc),u.LFG(We),u.LFG(Nj))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const Vj=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],XL=new u.OlP("cdk-connected-overlay-scroll-strategy");let JL=(()=>{class i{constructor(e){this.elementRef=e}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq))},i.\u0275dir=u.lG2({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),i})(),eN=(()=>{class i{constructor(e,s,o,l,f){this._overlay=e,this._dir=f,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=zr.w0.EMPTY,this._attachSubscription=zr.w0.EMPTY,this._detachSubscription=zr.w0.EMPTY,this._positionSubscription=zr.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new u.vpe,this.positionChange=new u.vpe,this.attach=new u.vpe,this.detach=new u.vpe,this.overlayKeydown=new u.vpe,this.overlayOutsideClick=new u.vpe,this._templatePortal=new xA(s,o),this._scrollStrategyFactory=l,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=ri(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=ri(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=ri(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=ri(e)}get push(){return this._push}set push(e){this._push=ri(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Vj);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(s=>{this.overlayKeydown.next(s),27===s.keyCode&&!this.disableClose&&!K0(s)&&(s.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(s=>{this.overlayOutsideClick.next(s)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),s=new EA({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(s.width=this.width),(this.height||0===this.height)&&(s.height=this.height),(this.minWidth||0===this.minWidth)&&(s.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(s.minHeight=this.minHeight),this.backdropClass&&(s.backdropClass=this.backdropClass),this.panelClass&&(s.panelClass=this.panelClass),s}_updatePositionStrategy(e){const s=this.positions.map(o=>({originX:o.originX,originY:o.originY,overlayX:o.overlayX,overlayY:o.overlayY,offsetX:o.offsetX||this.offsetX,offsetY:o.offsetY||this.offsetY,panelClass:o.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(s).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof JL?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(PL(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(uh),u.Y36(u.Rgc),u.Y36(u.s_b),u.Y36(XL),u.Y36(qc,8))},i.\u0275dir=u.lG2({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[u.TTD]}),i})();const Uj={provide:XL,deps:[uh],useFactory:function Gj(i){return()=>i.scrollStrategies.reposition()}};let Dx=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[uh,Uj],imports:[[Y0,Mx,ZI],ZI]}),i})();class Hj{constructor(t=!1,e,s=!0){this._multiple=t,this._emitChanges=s,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Ft.x,e&&e.length&&(t?e.forEach(o=>this._markSelected(o)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}const zj=["trigger"],jj=["panel"];function Wj(i,t){if(1&i&&(u.TgZ(0,"span",8),u._uU(1),u.qZA()),2&i){const e=u.oxw();u.xp6(1),u.Oqu(e.placeholder)}}function Yj(i,t){if(1&i&&(u.TgZ(0,"span",12),u._uU(1),u.qZA()),2&i){const e=u.oxw(2);u.xp6(1),u.Oqu(e.triggerValue)}}function qj(i,t){1&i&&u.Hsn(0,0,["*ngSwitchCase","true"])}function $j(i,t){if(1&i&&(u.TgZ(0,"span",9),u.YNc(1,Yj,2,1,"span",10),u.YNc(2,qj,1,0,"ng-content",11),u.qZA()),2&i){const e=u.oxw();u.Q6J("ngSwitch",!!e.customTrigger),u.xp6(2),u.Q6J("ngSwitchCase",!0)}}function Zj(i,t){if(1&i){const e=u.EpF();u.TgZ(0,"div",13),u.TgZ(1,"div",14,15),u.NdJ("@transformPanel.done",function(o){return u.CHM(e),u.oxw()._panelDoneAnimatingStream.next(o.toState)})("keydown",function(o){return u.CHM(e),u.oxw()._handleKeydown(o)}),u.Hsn(3,1),u.qZA(),u.qZA()}if(2&i){const e=u.oxw();u.Q6J("@transformPanelWrap",void 0),u.xp6(1),u.Gre("mat-select-panel ",e._getPanelTheme(),""),u.Udp("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),u.Q6J("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),u.uIk("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const Kj=[[["mat-select-trigger"]],"*"],Qj=["mat-select-trigger","*"],iN={transformPanelWrap:vl("transformPanelWrap",[jr("* => void",pB("@transformPanel",[fB()],{optional:!0}))]),transformPanel:vl("transformPanel",[ro("void",zn({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),ro("showing",zn({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),ro("showing-multiple",zn({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),jr("void => *",os("120ms cubic-bezier(0, 0, 0.2, 1)")),jr("* => void",os("100ms 25ms linear",zn({opacity:0})))])};let rN=0;const oN=new u.OlP("mat-select-scroll-strategy"),t5=new u.OlP("MAT_SELECT_CONFIG"),n5={provide:oN,deps:[uh],useFactory:function e5(i){return()=>i.scrollStrategies.reposition()}};class r5{constructor(t,e){this.source=t,this.value=e}}const s5=pI(gk(fI(PG(class{constructor(i,t,e,s,o){this._elementRef=i,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=s,this.ngControl=o}})))),o5=new u.OlP("MatSelectTrigger");let a5=(()=>{class i extends s5{constructor(e,s,o,l,f,_,w,E,T,F,G,H,Y,q){var J,re,Me;super(f,l,w,E,F),this._viewportRuler=e,this._changeDetectorRef=s,this._ngZone=o,this._dir=_,this._parentFormField=T,this._liveAnnouncer=Y,this._defaultOptions=q,this._panelOpen=!1,this._compareWith=(be,He)=>be===He,this._uid="mat-select-"+rN++,this._triggerAriaLabelledBy=null,this._destroy=new Ft.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+rN++,this._panelDoneAnimatingStream=new Ft.x,this._overlayPanelClass=(null===(J=this._defaultOptions)||void 0===J?void 0:J.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=null!==(Me=null===(re=this._defaultOptions)||void 0===re?void 0:re.disableOptionCentering)&&void 0!==Me&&Me,this.ariaLabel="",this.optionSelectionChanges=rh(()=>{const be=this.options;return be?be.changes.pipe(Ji(be),ki(()=>(0,Hs.T)(...be.map(He=>He.onSelectionChange)))):this._ngZone.onStable.pipe((0,Fi.q)(1),ki(()=>this.optionSelectionChanges))}),this.openedChange=new u.vpe,this._openedStream=this.openedChange.pipe(Jn(be=>be),(0,At.U)(()=>{})),this._closedStream=this.openedChange.pipe(Jn(be=>!be),(0,At.U)(()=>{})),this.selectionChange=new u.vpe,this.valueChange=new u.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==q?void 0:q.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=q.typeaheadDebounceInterval),this._scrollStrategyFactory=H,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(G)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){var e,s,o,l;return null!==(l=null!==(e=this._required)&&void 0!==e?e:null===(o=null===(s=this.ngControl)||void 0===s?void 0:s.control)||void 0===o?void 0:o.hasValidator(eF.required))&&void 0!==l&&l}set required(e){this._required=ri(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=ri(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=ri(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=Q0(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new Hj(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Ao(),Kn(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Kn(this._destroy)).subscribe(e=>{e.added.forEach(s=>s.select()),e.removed.forEach(s=>s.deselect())}),this.options.changes.pipe(Ji(null),Kn(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby();if(e!==this._triggerAriaLabelledBy){const s=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?s.setAttribute("aria-labelledby",e):s.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this.value=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var e,s;return this.multiple?(null===(e=this._selectionModel)||void 0===e?void 0:e.selected)||[]:null===(s=this._selectionModel)||void 0===s?void 0:s.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(s=>s.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const s=e.keyCode,o=40===s||38===s||37===s||39===s,l=13===s||32===s,f=this._keyManager;if(!f.isTyping()&&l&&!K0(e)||(this.multiple||e.altKey)&&o)e.preventDefault(),this.open();else if(!this.multiple){const _=this.selected;f.onKeydown(e);const w=this.selected;w&&_!==w&&this._liveAnnouncer.announce(w.viewValue,1e4)}}_handleOpenKeydown(e){const s=this._keyManager,o=e.keyCode,l=40===o||38===o,f=s.isTyping();if(l&&e.altKey)e.preventDefault(),this.close();else if(f||13!==o&&32!==o||!s.activeItem||K0(e))if(!f&&this._multiple&&65===o&&e.ctrlKey){e.preventDefault();const _=this.options.some(w=>!w.disabled&&!w.selected);this.options.forEach(w=>{w.disabled||(_?w.select():w.deselect())})}else{const _=s.activeItemIndex;s.onKeydown(e),this._multiple&&l&&e.shiftKey&&s.activeItem&&s.activeItemIndex!==_&&s.activeItem._selectViaInteraction()}else e.preventDefault(),s.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,Fi.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(s=>s.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(s=>this._selectValue(s)),this._sortValues();else{const s=this._selectValue(e);s?this._keyManager.updateActiveItem(s):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(e){const s=this.options.find(o=>{if(this._selectionModel.isSelected(o))return!1;try{return null!=o.value&&this._compareWith(o.value,e)}catch(l){return!1}});return s&&this._selectionModel.select(s),s}_initKeyManager(){this._keyManager=new $B(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Kn(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Kn(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=(0,Hs.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Kn(e)).subscribe(s=>{this._onSelect(s.source,s.isUserInput),s.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,Hs.T)(...this.options.map(s=>s._stateChanges)).pipe(Kn(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,s){const o=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(o!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),s&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),s&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),o!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((s,o)=>this.sortComparator?this.sortComparator(s,o,e):e.indexOf(s)-e.indexOf(o)),this.stateChanges.next()}}_propagateChanges(e){let s=null;s=this.multiple?this.selected.map(o=>o.value):this.selected?this.selected.value:e,this._value=s,this.valueChange.emit(s),this._onChange(s),this.selectionChange.emit(this._getChangeEvent(s)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var e;return!this._panelOpen&&!this.disabled&&(null===(e=this.options)||void 0===e?void 0:e.length)>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){var e;if(this.ariaLabel)return null;const s=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();return this.ariaLabelledby?(s?s+" ":"")+this.ariaLabelledby:s}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var e;if(this.ariaLabel)return null;const s=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();let o=(s?s+" ":"")+this._valueId;return this.ariaLabelledby&&(o+=" "+this.ariaLabelledby),o}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(xx),u.Y36(u.sBO),u.Y36(u.R0b),u.Y36(_k),u.Y36(u.SBq),u.Y36(qc,8),u.Y36(uA,8),u.Y36(dA,8),u.Y36(cR,8),u.Y36(Bg,10),u.$8M("tabindex"),u.Y36(oN),u.Y36(H1),u.Y36(t5,8))},i.\u0275dir=u.lG2({type:i,viewQuery:function(e,s){if(1&e&&(u.Gf(zj,5),u.Gf(jj,5),u.Gf(eN,5)),2&e){let o;u.iGM(o=u.CRH())&&(s.trigger=o.first),u.iGM(o=u.CRH())&&(s.panel=o.first),u.iGM(o=u.CRH())&&(s._overlayDir=o.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[u.qOj,u.TTD]}),i})(),l5=(()=>{class i extends a5{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,s,o){const l=this._getItemHeight();return Math.min(Math.max(0,l*e-s+l/2),o)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Kn(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,Fi.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const s=Mk(e,this.options,this.optionGroups),o=this._getItemHeight();this.panel.nativeElement.scrollTop=0===e&&1===s?0:function KG(i,t,e,s){return i<e?i:i+t>e+s?Math.max(0,i-s+t):e}((e+s)*o,o,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new r5(this,e)}_calculateOverlayOffsetX(){const e=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),s=this._viewportRuler.getViewportSize(),o=this._isRtl(),l=this.multiple?56:32;let f;if(this.multiple)f=40;else if(this.disableOptionCentering)f=16;else{let E=this._selectionModel.selected[0]||this.options.first;f=E&&E.group?32:16}o||(f*=-1);const _=0-(e.left+f-(o?l:0)),w=e.right+f-s.width+(o?0:l);_>0?f+=_+8:w>0&&(f-=w+8),this._overlayDir.offsetX=Math.round(f),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,s,o){const l=this._getItemHeight(),f=(l-this._triggerRect.height)/2,_=Math.floor(256/l);let w;return this.disableOptionCentering?0:(w=0===this._scrollTop?e*l:this._scrollTop===o?(e-(this._getItemCount()-_))*l+(l-(this._getItemCount()*l-256)%l):s-l/2,Math.round(-1*w-f))}_checkOverlayWithinViewport(e){const s=this._getItemHeight(),o=this._viewportRuler.getViewportSize(),l=this._triggerRect.top-8,f=o.height-this._triggerRect.bottom-8,_=Math.abs(this._offsetY),E=Math.min(this._getItemCount()*s,256)-_-this._triggerRect.height;E>f?this._adjustPanelUp(E,f):_>l?this._adjustPanelDown(_,l,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,s){const o=Math.round(e-s);this._scrollTop-=o,this._offsetY-=o,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,s,o){const l=Math.round(e-s);if(this._scrollTop+=l,this._offsetY+=l,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=o)return this._scrollTop=o,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),s=this._getItemCount(),o=Math.min(s*e,256),f=s*e-o;let _;_=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),_+=Mk(_,this.options,this.optionGroups);const w=o/2;this._scrollTop=this._calculateOverlayScroll(_,w,f),this._offsetY=this._calculateOverlayOffsetY(_,w,f),this._checkOverlayWithinViewport(f)}_getOriginBasedOnOption(){const e=this._getItemHeight(),s=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-s+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-select"]],contentQueries:function(e,s,o){if(1&e&&(u.Suo(o,o5,5),u.Suo(o,Ck,5),u.Suo(o,xk,5)),2&e){let l;u.iGM(l=u.CRH())&&(s.customTrigger=l.first),u.iGM(l=u.CRH())&&(s.options=l),u.iGM(l=u.CRH())&&(s.optionGroups=l)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,s){1&e&&u.NdJ("keydown",function(l){return s._handleKeydown(l)})("focus",function(){return s._onFocus()})("blur",function(){return s._onBlur()}),2&e&&(u.uIk("id",s.id)("tabindex",s.tabIndex)("aria-controls",s.panelOpen?s.id+"-panel":null)("aria-expanded",s.panelOpen)("aria-label",s.ariaLabel||null)("aria-required",s.required.toString())("aria-disabled",s.disabled.toString())("aria-invalid",s.errorState)("aria-describedby",s._ariaDescribedby||null)("aria-activedescendant",s._getAriaActiveDescendant()),u.ekj("mat-select-disabled",s.disabled)("mat-select-invalid",s.errorState)("mat-select-required",s.required)("mat-select-empty",s.empty)("mat-select-multiple",s.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[u._Bn([{provide:aR,useExisting:i},{provide:wk,useExisting:i}]),u.qOj],ngContentSelectors:Qj,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,s){if(1&e&&(u.F$t(Kj),u.TgZ(0,"div",0,1),u.NdJ("click",function(){return s.toggle()}),u.TgZ(3,"div",2),u.YNc(4,Wj,2,1,"span",3),u.YNc(5,$j,3,2,"span",4),u.qZA(),u.TgZ(6,"div",5),u._UZ(7,"div",6),u.qZA(),u.qZA(),u.YNc(8,Zj,4,14,"ng-template",7),u.NdJ("backdropClick",function(){return s.close()})("attach",function(){return s._onAttached()})("detach",function(){return s.close()})),2&e){const o=u.MAs(1);u.uIk("aria-owns",s.panelOpen?s.id+"-panel":null),u.xp6(3),u.Q6J("ngSwitch",s.empty),u.uIk("id",s._valueId),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngSwitchCase",!1),u.xp6(3),u.Q6J("cdkConnectedOverlayPanelClass",s._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",s._scrollStrategy)("cdkConnectedOverlayOrigin",o)("cdkConnectedOverlayOpen",s.panelOpen)("cdkConnectedOverlayPositions",s._positions)("cdkConnectedOverlayMinWidth",null==s._triggerRect?null:s._triggerRect.width)("cdkConnectedOverlayOffsetY",s._offsetY)}},directives:[JL,uo,Mo,Zf,eN,ha],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;opacity:0}\n'],encapsulation:2,data:{animation:[iN.transformPanelWrap,iN.transformPanel]},changeDetection:0}),i})(),fR=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[n5],imports:[[ws,Dx,Dk,Li],Vg,TD,Dk,Li]}),i})();function Gg(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function aN(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}var pR,ms,Wf,yR,bR,pN,_N,Px,NA,Qc={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Sx={duration:.5,overwrite:!1,delay:0},$u=1e8,xr=1e-8,gR=2*Math.PI,c5=gR/4,u5=0,lN=Math.sqrt,d5=Math.cos,h5=Math.sin,jo=function(t){return"string"==typeof t},Wo=function(t){return"function"==typeof t},Ug=function(t){return"number"==typeof t},mR=function(t){return void 0===t},Hg=function(t){return"object"==typeof t},Ql=function(t){return!1!==t},cN=function(){return"undefined"!=typeof window},AA=function(t){return Wo(t)||jo(t)},uN="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Pa=Array.isArray,_R=/(?:-?\.?\d|\.)+/gi,dN=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ax=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,vR=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,hN=/[+-]=-?[.\d]+/,fN=/[^,'"\[\]\s]+/gi,f5=/[\d.+\-=]+(?:e[-+]\d*)*/i,Xc={},TA={},gN=function(t){return(TA=Tx(t,Xc))&&qf},wR=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},IA=function(t,e){return!e&&console.warn(t)},mN=function(t,e){return t&&(Xc[t]=e)&&TA&&(TA[t]=e)||Xc},PD=function(){return 0},xR={},iv=[],CR={},Jc={},MR={},vN=30,RA=[],DR="",ER=function(t){var s,o,e=t[0];if(Hg(e)||Wo(e)||(t=[t]),!(s=(e._gsap||{}).harness)){for(o=RA.length;o--&&!RA[o].targetTest(e););s=RA[o]}for(o=t.length;o--;)t[o]&&(t[o]._gsap||(t[o]._gsap=new WN(t[o],s)))||t.splice(o,1);return t},ab=function(t){return t._gsap||ER(Qu(t))[0]._gsap},yN=function(t,e,s){return(s=t[e])&&Wo(s)?t[e]():mR(s)&&t.getAttribute&&t.getAttribute(e)||s},Xl=function(t,e){return(t=t.split(",")).forEach(e)||t},ao=function(t){return Math.round(1e5*t)/1e5||0},Oa=function(t){return Math.round(1e7*t)/1e7||0},p5=function(t,e){for(var s=e.length,o=0;t.indexOf(e[o])<0&&++o<s;);return o<s},PA=function(){var s,o,t=iv.length,e=iv.slice(0);for(CR={},iv.length=0,s=0;s<t;s++)(o=e[s])&&o._lazy&&(o.render(o._lazy[0],o._lazy[1],!0)._lazy=0)},bN=function(t,e,s,o){iv.length&&PA(),t.render(e,s,o),iv.length&&PA()},wN=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(fN).length<2?e:jo(t)?t.trim():t},xN=function(t){return t},Zu=function(t,e){for(var s in e)s in t||(t[s]=e[s]);return t},Tx=function(t,e){for(var s in e)t[s]=e[s];return t},CN=function i(t,e){for(var s in e)"__proto__"!==s&&"constructor"!==s&&"prototype"!==s&&(t[s]=Hg(e[s])?i(t[s]||(t[s]={}),e[s]):e[s]);return t},OA=function(t,e){var o,s={};for(o in t)o in e||(s[o]=t[o]);return s},OD=function(t){var e=t.parent||ms,s=t.keyframes?function(t){return function(e,s){for(var o in s)o in e||"duration"===o&&t||"ease"===o||(e[o]=s[o])}}(Pa(t.keyframes)):Zu;if(Ql(t.inherit))for(;e;)s(t,e.vars.defaults),e=e.parent||e._dp;return t},kA=function(t,e,s,o){void 0===s&&(s="_first"),void 0===o&&(o="_last");var l=e._prev,f=e._next;l?l._next=f:t[s]===e&&(t[s]=f),f?f._prev=l:t[o]===e&&(t[o]=l),e._next=e._prev=e.parent=null},zg=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},lb=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var s=t;s;)s._dirty=1,s=s.parent;return t},v5=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},y5=function i(t){return!t||t._ts&&i(t.parent)},MN=function(t){return t._repeat?Ix(t._tTime,t=t.duration()+t._rDelay)*t:0},Ix=function(t,e){var s=Math.floor(t/=e);return t&&s===t?s-1:s},FA=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},LA=function(t){return t._end=Oa(t._start+(t._tDur/Math.abs(t._ts||t._rts||xr)||0))},DN=function(t,e){var s=t._dp;return s&&s.smoothChildTiming&&t._ts&&(t._start=Oa(s._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),LA(t),s._dirty||lb(s,t)),t},EN=function(t,e){var s;if((e._time||e._initted&&!e._dur)&&(s=FA(t.rawTime(),e),(!e._dur||FD(0,e.totalDuration(),s)-e._tTime>xr)&&e.render(s,!0)),lb(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(s=t;s._dp;)s.rawTime()>=0&&s.totalTime(s._tTime),s=s._dp;t._zTime=-xr}},Yf=function(t,e,s,o){return e.parent&&zg(e),e._start=Oa((Ug(s)?s:s||t!==ms?Ku(t,s,e):t._time)+e._delay),e._end=Oa(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,s,o,l){void 0===s&&(s="_first"),void 0===o&&(o="_last");var _,f=t[o];if(l)for(_=e[l];f&&f[l]>_;)f=f._prev;f?(e._next=f._next,f._next=e):(e._next=t[s],t[s]=e),e._next?e._next._prev=e:t[o]=e,e._prev=f,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),SR(e)||(t._recent=e),o||EN(t,e),t},SN=function(t,e){return(Xc.ScrollTrigger||wR("scrollTrigger",e))&&Xc.ScrollTrigger.create(e,t)},AN=function(t,e,s,o){return H5(t,e),t._initted?!s&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&_N!==Ju.frame?(iv.push(t),t._lazy=[e,o],1):void 0:1},b5=function i(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||i(e))},SR=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},Rx=function(t,e,s,o){var l=t._repeat,f=Oa(e)||0,_=t._tTime/t._tDur;return _&&!o&&(t._time*=f/t._dur),t._dur=f,t._tDur=l?l<0?1e10:Oa(f*(l+1)+t._rDelay*l):f,_>0&&!o?DN(t,t._tTime=t._tDur*_):t.parent&&LA(t),s||lb(t.parent,t),t},TN=function(t){return t instanceof ec?lb(t):Rx(t,t._dur)},C5={_start:0,endTime:PD,totalDuration:PD},Ku=function i(t,e,s){var _,w,E,o=t.labels,l=t._recent||C5,f=t.duration()>=$u?l.endTime(!1):t._dur;return jo(e)&&(isNaN(e)||e in o)?(w=e.charAt(0),E="%"===e.substr(-1),_=e.indexOf("="),"<"===w||">"===w?(_>=0&&(e=e.replace(/=/,"")),("<"===w?l._start:l.endTime(l._repeat>=0))+(parseFloat(e.substr(1))||0)*(E?(_<0?l:s).totalDuration()/100:1)):_<0?(e in o||(o[e]=f),o[e]):(w=parseFloat(e.charAt(_-1)+e.substr(_+1)),E&&s&&(w=w/100*(Pa(s)?s[0]:s).totalDuration()),_>1?i(t,e.substr(0,_-1),s)+w:f+w)):null==e?f:+e},kD=function(t,e,s){var _,w,o=Ug(e[1]),l=(o?2:1)+(t<2?0:1),f=e[l];if(o&&(f.duration=e[1]),f.parent=s,t){for(_=f,w=s;w&&!("immediateRender"in _);)_=w.vars.defaults||{},w=Ql(w.vars.inherit)&&w.parent;f.immediateRender=Ql(_.immediateRender),t<2?f.runBackwards=1:f.startAt=e[l-1]}return new Yo(e[0],f,e[l+1])},rv=function(t,e){return t||0===t?e(t):e},FD=function(t,e,s){return s<t?t:s>e?e:s},Jl=function(t,e){return jo(t)&&(e=f5.exec(t))?t.substr(e.index+e[0].length):""},AR=[].slice,IN=function(t,e){return t&&Hg(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Hg(t[0]))&&!t.nodeType&&t!==Wf},Qu=function(t,e,s){return!jo(t)||s||!yR&&Ox()?Pa(t)?function(t,e,s){return void 0===s&&(s=[]),t.forEach(function(o){var l;return jo(o)&&!e||IN(o,1)?(l=s).push.apply(l,Qu(o)):s.push(o)})||s}(t,s):IN(t)?AR.call(t,0):t?[t]:[]:AR.call((e||bR).querySelectorAll(t),0)},RN=function(t){return t.sort(function(){return.5-Math.random()})},PN=function(t){if(Wo(t))return t;var e=Hg(t)?t:{each:t},s=cb(e.ease),o=e.from||0,l=parseFloat(e.base)||0,f={},_=o>0&&o<1,w=isNaN(o)||_,E=e.axis,T=o,F=o;return jo(o)?T=F={center:.5,edges:.5,end:1}[o]||0:!_&&w&&(T=o[0],F=o[1]),function(G,H,Y){var re,Me,be,He,Ve,ot,bt,$t,Ot,q=(Y||e).length,J=f[q];if(!J){if(!(Ot="auto"===e.grid?0:(e.grid||[1,$u])[1])){for(bt=-$u;bt<(bt=Y[Ot++].getBoundingClientRect().left)&&Ot<q;);Ot--}for(J=f[q]=[],re=w?Math.min(Ot,q)*T-.5:o%Ot,Me=Ot===$u?0:w?q*F/Ot-.5:o/Ot|0,bt=0,$t=$u,ot=0;ot<q;ot++)be=ot%Ot-re,He=Me-(ot/Ot|0),J[ot]=Ve=E?Math.abs("y"===E?He:be):lN(be*be+He*He),Ve>bt&&(bt=Ve),Ve<$t&&($t=Ve);"random"===o&&RN(J),J.max=bt-$t,J.min=$t,J.v=q=(parseFloat(e.amount)||parseFloat(e.each)*(Ot>q?q-1:E?"y"===E?q/Ot:Ot:Math.max(Ot,q/Ot))||0)*("edges"===o?-1:1),J.b=q<0?l-q:l,J.u=Jl(e.amount||e.each)||0,s=s&&q<0?HN(s):s}return q=(J[G]-J.min)/J.max||0,Oa(J.b+(s?s(q):q)*J.v)+J.u}},TR=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(s){var o=Math.round(parseFloat(s)/t)*t*e;return(o-o%1)/e+(Ug(s)?0:Jl(s))}},ON=function(t,e){var o,l,s=Pa(t);return!s&&Hg(t)&&(o=s=t.radius||$u,t.values?(t=Qu(t.values),(l=!Ug(t[0]))&&(o*=o)):t=TR(t.increment)),rv(e,s?Wo(t)?function(f){return l=t(f),Math.abs(l-f)<=o?l:f}:function(f){for(var G,H,_=parseFloat(l?f.x:f),w=parseFloat(l?f.y:0),E=$u,T=0,F=t.length;F--;)(G=l?(G=t[F].x-_)*G+(H=t[F].y-w)*H:Math.abs(t[F]-_))<E&&(E=G,T=F);return T=!o||E<=o?t[T]:f,l||T===f||Ug(f)?T:T+Jl(f)}:TR(t))},kN=function(t,e,s,o){return rv(Pa(t)?!e:!0===s?!!(s=0):!o,function(){return Pa(t)?t[~~(Math.random()*t.length)]:(s=s||1e-5)&&(o=s<1?Math.pow(10,(s+"").length-2):1)&&Math.floor(Math.round((t-s/2+Math.random()*(e-t+.99*s))/s)*s*o)/o})},FN=function(t,e,s){return rv(s,function(o){return t[~~e(o)]})},LD=function(t){for(var o,l,f,_,e=0,s="";~(o=t.indexOf("random(",e));)f=t.indexOf(")",o),_="["===t.charAt(o+7),l=t.substr(o+7,f-o-7).match(_?fN:_R),s+=t.substr(e,o-e)+kN(_?l:+l[0],_?0:+l[1],+l[2]||1e-5),e=f+1;return s+t.substr(e,t.length-e)},LN=function(t,e,s,o,l){var f=e-t,_=o-s;return rv(l,function(w){return s+((w-t)/f*_||0)})},NN=function(t,e,s){var f,_,w,o=t.labels,l=$u;for(f in o)(_=o[f]-e)<0==!!s&&_&&l>(_=Math.abs(_))&&(w=f,l=_);return w},Xu=function(t,e,s){var f,_,o=t.vars,l=o[e];if(l)return f=o[e+"Params"],_=o.callbackScope||t,s&&iv.length&&PA(),f?l.apply(_,f):l.call(_)},ND=function(t){return zg(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&Xu(t,"onInterrupt"),t},O5=function(t){var e=(t=!t.name&&t.default||t).name,s=Wo(t),o=e&&!s&&t.init?function(){this._props=[]}:t,l={init:PD,render:LR,add:OR,kill:Z5,modifier:$5,rawVars:0},f={targetTest:0,get:0,getSetter:FR,aliases:{},register:0};if(Ox(),t!==o){if(Jc[e])return;Zu(o,Zu(OA(t,l),f)),Tx(o.prototype,Tx(l,OA(t,f))),Jc[o.prop=e]=o,t.targetTest&&(RA.push(o),xR[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}mN(e,o),t.register&&t.register(qf,o,tc)},Cr=255,BD={aqua:[0,Cr,Cr],lime:[0,Cr,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Cr],navy:[0,0,128],white:[Cr,Cr,Cr],olive:[128,128,0],yellow:[Cr,Cr,0],orange:[Cr,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Cr,0,0],pink:[Cr,192,203],cyan:[0,Cr,Cr],transparent:[Cr,Cr,Cr,0]},IR=function(t,e,s){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(s-e)*t*6:t<.5?s:3*t<2?e+(s-e)*(2/3-t)*6:e)*Cr+.5|0},BN=function(t,e,s){var l,f,_,w,E,T,F,G,H,Y,o=t?Ug(t)?[t>>16,t>>8&Cr,t&Cr]:0:BD.black;if(!o){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),BD[t])o=BD[t];else if("#"===t.charAt(0)){if(t.length<6&&(l=t.charAt(1),f=t.charAt(2),_=t.charAt(3),t="#"+l+l+f+f+_+_+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(o=parseInt(t.substr(1,6),16))>>16,o>>8&Cr,o&Cr,parseInt(t.substr(7),16)/255];o=[(t=parseInt(t.substr(1),16))>>16,t>>8&Cr,t&Cr]}else if("hsl"===t.substr(0,3))if(o=Y=t.match(_R),e){if(~t.indexOf("="))return o=t.match(dN),s&&o.length<4&&(o[3]=1),o}else w=+o[0]%360/360,E=+o[1]/100,l=2*(T=+o[2]/100)-(f=T<=.5?T*(E+1):T+E-T*E),o.length>3&&(o[3]*=1),o[0]=IR(w+1/3,l,f),o[1]=IR(w,l,f),o[2]=IR(w-1/3,l,f);else o=t.match(_R)||BD.transparent;o=o.map(Number)}return e&&!Y&&(l=o[0]/Cr,f=o[1]/Cr,_=o[2]/Cr,T=((F=Math.max(l,f,_))+(G=Math.min(l,f,_)))/2,F===G?w=E=0:(H=F-G,E=T>.5?H/(2-F-G):H/(F+G),w=F===l?(f-_)/H+(f<_?6:0):F===f?(_-l)/H+2:(l-f)/H+4,w*=60),o[0]=~~(w+.5),o[1]=~~(100*E+.5),o[2]=~~(100*T+.5)),s&&o.length<4&&(o[3]=1),o},VN=function(t){var e=[],s=[],o=-1;return t.split(sv).forEach(function(l){var f=l.match(Ax)||[];e.push.apply(e,f),s.push(o+=f.length+1)}),e.c=s,e},GN=function(t,e,s){var w,E,T,F,o="",l=(t+o).match(sv),f=e?"hsla(":"rgba(",_=0;if(!l)return t;if(l=l.map(function(G){return(G=BN(G,e,1))&&f+(e?G[0]+","+G[1]+"%,"+G[2]+"%,"+G[3]:G.join(","))+")"}),s&&(T=VN(t),(w=s.c).join(o)!==T.c.join(o)))for(F=(E=t.replace(sv,"1").split(Ax)).length-1;_<F;_++)o+=E[_]+(~w.indexOf(_)?l.shift()||f+"0,0,0,0)":(T.length?T:l.length?l:s).shift());if(!E)for(F=(E=t.split(sv)).length-1;_<F;_++)o+=E[_]+l[_];return o+E[F]},sv=function(){var t,i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in BD)i+="|"+t+"\\b";return new RegExp(i+")","gi")}(),k5=/hsl[a]?\(/,UN=function(t){var s,e=t.join(" ");if(sv.lastIndex=0,sv.test(e))return s=k5.test(e),t[1]=GN(t[1],s),t[0]=GN(t[0],s,VN(t[1])),!0},Ju=function(){var w,E,T,F,G,H,i=Date.now,t=500,e=33,s=i(),o=s,l=1e3/240,f=l,_=[],Y=function q(J){var be,He,Ve,ot,re=i()-o,Me=!0===J;if(re>t&&(s+=re-e),((be=(Ve=(o+=re)-s)-f)>0||Me)&&(ot=++F.frame,G=Ve-1e3*F.time,F.time=Ve/=1e3,f+=be+(be>=l?4:l-be),He=1),Me||(w=E(q)),He)for(H=0;H<_.length;H++)_[H](Ve,G,ot,J)};return F={time:0,frame:0,tick:function(){Y(!0)},deltaRatio:function(J){return G/(1e3/(J||60))},wake:function(){pN&&(!yR&&cN()&&(Wf=yR=window,bR=Wf.document||{},Xc.gsap=qf,(Wf.gsapVersions||(Wf.gsapVersions=[])).push(qf.version),gN(TA||Wf.GreenSockGlobals||!Wf.gsap&&Wf||{}),T=Wf.requestAnimationFrame),w&&F.sleep(),E=T||function(J){return setTimeout(J,f-1e3*F.time+1|0)},NA=1,Y(2))},sleep:function(){(T?Wf.cancelAnimationFrame:clearTimeout)(w),NA=0,E=PD},lagSmoothing:function(J,re){t=J||1/xr,e=Math.min(re,t,0)},fps:function(J){f=1e3*F.time+(l=1e3/(J||240))},add:function(J){_.indexOf(J)<0&&_.push(J),Ox()},remove:function(J,re){~(re=_.indexOf(J))&&_.splice(re,1)&&H>=re&&H--},_listeners:_}}(),Ox=function(){return!NA&&Ju.wake()},Pi={},F5=/^[\d.\-M][\d.\-,\s]/,L5=/["']/g,N5=function(t){for(var _,w,E,e={},s=t.substr(1,t.length-3).split(":"),o=s[0],l=1,f=s.length;l<f;l++)w=s[l],_=l!==f-1?w.lastIndexOf(","):w.length,E=w.substr(0,_),e[o]=isNaN(E)?E.replace(L5,"").trim():+E,o=w.substr(_+1).trim();return e},HN=function(t){return function(e){return 1-t(1-e)}},zN=function i(t,e){for(var o,s=t._first;s;)s instanceof ec?i(s,e):s.vars.yoyoEase&&(!s._yoyo||!s._repeat)&&s._yoyo!==e&&(s.timeline?i(s.timeline,e):(o=s._ease,s._ease=s._yEase,s._yEase=o,s._yoyo=e)),s=s._next},cb=function(t,e){return t&&(Wo(t)?t:Pi[t]||function(t){var e=(t+"").split("("),s=Pi[e[0]];return s&&e.length>1&&s.config?s.config.apply(null,~t.indexOf("{")?[N5(e[1])]:function(t){var e=t.indexOf("(")+1,s=t.indexOf(")"),o=t.indexOf("(",e);return t.substring(e,~o&&o<s?t.indexOf(")",s+1):s)}(t).split(",").map(wN)):Pi._CE&&F5.test(t)?Pi._CE("",t):s}(t))||e},ub=function(t,e,s,o){void 0===s&&(s=function(w){return 1-e(1-w)}),void 0===o&&(o=function(w){return w<.5?e(2*w)/2:1-e(2*(1-w))/2});var f,l={easeIn:e,easeOut:s,easeInOut:o};return Xl(t,function(_){for(var w in Pi[_]=Xc[_]=l,Pi[f=_.toLowerCase()]=s,l)Pi[f+("easeIn"===w?".in":"easeOut"===w?".out":".inOut")]=Pi[_+"."+w]=l[w]}),l},jN=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},RR=function i(t,e,s){var o=e>=1?e:1,l=(s||(t?.3:.45))/(e<1?e:1),f=l/gR*(Math.asin(1/o)||0),_=function(T){return 1===T?1:o*Math.pow(2,-10*T)*h5((T-f)*l)+1},w="out"===t?_:"in"===t?function(E){return 1-_(1-E)}:jN(_);return l=gR/l,w.config=function(E,T){return i(t,E,T)},w},PR=function i(t,e){void 0===e&&(e=1.70158);var s=function(f){return f?--f*f*((e+1)*f+e)+1:0},o="out"===t?s:"in"===t?function(l){return 1-s(1-l)}:jN(s);return o.config=function(l){return i(t,l)},o};Xl("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,t){var e=t<5?t+1:t;ub(i+",Power"+(e-1),t?function(s){return Math.pow(s,e)}:function(s){return s},function(s){return 1-Math.pow(1-s,e)},function(s){return s<.5?Math.pow(2*s,e)/2:1-Math.pow(2*(1-s),e)/2})}),Pi.Linear.easeNone=Pi.none=Pi.Linear.easeIn,ub("Elastic",RR("in"),RR("out"),RR()),function(i,t){var l=function(_){return _<.36363636363636365?i*_*_:_<.7272727272727273?i*Math.pow(_-1.5/t,2)+.75:_<.9090909090909092?i*(_-=2.25/t)*_+.9375:i*Math.pow(_-2.625/t,2)+.984375};ub("Bounce",function(f){return 1-l(1-f)},l)}(7.5625,2.75),ub("Expo",function(i){return i?Math.pow(2,10*(i-1)):0}),ub("Circ",function(i){return-(lN(1-i*i)-1)}),ub("Sine",function(i){return 1===i?1:1-d5(i*c5)}),ub("Back",PR("in"),PR("out"),PR()),Pi.SteppedEase=Pi.steps=Xc.SteppedEase={config:function(t,e){void 0===t&&(t=1);var s=1/t,o=t+(e?0:1),l=e?1:0;return function(_){return((o*FD(0,.99999999,_)|0)+l)*s}}},Sx.ease=Pi["quad.out"],Xl("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return DR+=i+","+i+"Params,"});var WN=function(t,e){this.id=u5++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:yN,this.set=e?e.getSetter:FR},VD=function(){function i(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Rx(this,+e.duration,1,1),this.data=e.data,NA||Ju.wake()}var t=i.prototype;return t.delay=function(s){return s||0===s?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+s-this._delay),this._delay=s,this):this._delay},t.duration=function(s){return arguments.length?this.totalDuration(this._repeat>0?s+(s+this._rDelay)*this._repeat:s):this.totalDuration()&&this._dur},t.totalDuration=function(s){return arguments.length?(this._dirty=0,Rx(this,this._repeat<0?s:(s-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(s,o){if(Ox(),!arguments.length)return this._tTime;var l=this._dp;if(l&&l.smoothChildTiming&&this._ts){for(DN(this,s),!l._dp||l.parent||EN(l,this);l&&l.parent;)l.parent._time!==l._start+(l._ts>=0?l._tTime/l._ts:(l.totalDuration()-l._tTime)/-l._ts)&&l.totalTime(l._tTime,!0),l=l.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&s<this._tDur||this._ts<0&&s>0||!this._tDur&&!s)&&Yf(this._dp,this,this._start-this._delay)}return(this._tTime!==s||!this._dur&&!o||this._initted&&Math.abs(this._zTime)===xr||!s&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=s),bN(this,s,o)),this},t.time=function(s,o){return arguments.length?this.totalTime(Math.min(this.totalDuration(),s+MN(this))%(this._dur+this._rDelay)||(s?this._dur:0),o):this._time},t.totalProgress=function(s,o){return arguments.length?this.totalTime(this.totalDuration()*s,o):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(s,o){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?s:1-s)+MN(this),o):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(s,o){var l=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(s-1)*l,o):this._repeat?Ix(this._tTime,l)+1:1},t.timeScale=function(s){if(!arguments.length)return this._rts===-xr?0:this._rts;if(this._rts===s)return this;var o=this.parent&&this._ts?FA(this.parent._time,this):this._tTime;return this._rts=+s||0,this._ts=this._ps||s===-xr?0:this._rts,v5(this.totalTime(FD(-this._delay,this._tDur,o),!0)),LA(this),this},t.paused=function(s){return arguments.length?(this._ps!==s&&(this._ps=s,s?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ox(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==xr&&(this._tTime-=xr)))),this):this._ps},t.startTime=function(s){if(arguments.length){this._start=s;var o=this.parent||this._dp;return o&&(o._sort||!this.parent)&&Yf(o,this,s-this._delay),this}return this._start},t.endTime=function(s){return this._start+(Ql(s)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(s){var o=this.parent||this._dp;return o?s&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?FA(o.rawTime(s),this):this._tTime:this._tTime},t.globalTime=function(s){for(var o=this,l=arguments.length?s:o.rawTime();o;)l=o._start+l/(o._ts||1),o=o._dp;return l},t.repeat=function(s){return arguments.length?(this._repeat=s===1/0?-2:s,TN(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(s){if(arguments.length){var o=this._time;return this._rDelay=s,TN(this),o?this.time(o):this}return this._rDelay},t.yoyo=function(s){return arguments.length?(this._yoyo=s,this):this._yoyo},t.seek=function(s,o){return this.totalTime(Ku(this,s),Ql(o))},t.restart=function(s,o){return this.play().totalTime(s?-this._delay:0,Ql(o))},t.play=function(s,o){return null!=s&&this.seek(s,o),this.reversed(!1).paused(!1)},t.reverse=function(s,o){return null!=s&&this.seek(s||this.totalDuration(),o),this.reversed(!0).paused(!1)},t.pause=function(s,o){return null!=s&&this.seek(s,o),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(s){return arguments.length?(!!s!==this.reversed()&&this.timeScale(-this._rts||(s?-xr:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-xr,this},t.isActive=function(){var l,s=this.parent||this._dp,o=this._start;return!(s&&!(this._ts&&this._initted&&s.isActive()&&(l=s.rawTime(!0))>=o&&l<this.endTime(!0)-xr))},t.eventCallback=function(s,o,l){var f=this.vars;return arguments.length>1?(o?(f[s]=o,l&&(f[s+"Params"]=l),"onUpdate"===s&&(this._onUpdate=o)):delete f[s],this):f[s]},t.then=function(s){var o=this;return new Promise(function(l){var f=Wo(s)?s:xN,_=function(){var E=o.then;o.then=null,Wo(f)&&(f=f(o))&&(f.then||f===o)&&(o.then=E),l(f),o.then=E};o._initted&&1===o.totalProgress()&&o._ts>=0||!o._tTime&&o._ts<0?_():o._prom=_})},t.kill=function(){ND(this)},i}();Zu(VD.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-xr,_prom:0,_ps:!1,_rts:1});var ec=function(i){function t(s,o){var l;return void 0===s&&(s={}),(l=i.call(this,s)||this).labels={},l.smoothChildTiming=!!s.smoothChildTiming,l.autoRemoveChildren=!!s.autoRemoveChildren,l._sort=Ql(s.sortChildren),ms&&Yf(s.parent||ms,Gg(l),o),s.reversed&&l.reverse(),s.paused&&l.paused(!0),s.scrollTrigger&&SN(Gg(l),s.scrollTrigger),l}aN(t,i);var e=t.prototype;return e.to=function(o,l,f){return kD(0,arguments,this),this},e.from=function(o,l,f){return kD(1,arguments,this),this},e.fromTo=function(o,l,f,_){return kD(2,arguments,this),this},e.set=function(o,l,f){return l.duration=0,l.parent=this,OD(l).repeatDelay||(l.repeat=0),l.immediateRender=!!l.immediateRender,new Yo(o,l,Ku(this,f),1),this},e.call=function(o,l,f){return Yf(this,Yo.delayedCall(0,o,l),f)},e.staggerTo=function(o,l,f,_,w,E,T){return f.duration=l,f.stagger=f.stagger||_,f.onComplete=E,f.onCompleteParams=T,f.parent=this,new Yo(o,f,Ku(this,w)),this},e.staggerFrom=function(o,l,f,_,w,E,T){return f.runBackwards=1,OD(f).immediateRender=Ql(f.immediateRender),this.staggerTo(o,l,f,_,w,E,T)},e.staggerFromTo=function(o,l,f,_,w,E,T,F){return _.startAt=f,OD(_).immediateRender=Ql(_.immediateRender),this.staggerTo(o,l,_,w,E,T,F)},e.render=function(o,l,f){var G,H,Y,q,J,re,Me,be,He,Ve,ot,bt,_=this._time,w=this._dirty?this.totalDuration():this._tDur,E=this._dur,T=o<=0?0:Oa(o),F=this._zTime<0!=o<0&&(this._initted||!E);if(this!==ms&&T>w&&o>=0&&(T=w),T!==this._tTime||f||F){if(_!==this._time&&E&&(T+=this._time-_,o+=this._time-_),G=T,He=this._start,re=!(be=this._ts),F&&(E||(_=this._zTime),(o||!l)&&(this._zTime=o)),this._repeat){if(ot=this._yoyo,J=E+this._rDelay,this._repeat<-1&&o<0)return this.totalTime(100*J+o,l,f);if(G=Oa(T%J),T===w?(q=this._repeat,G=E):((q=~~(T/J))&&q===T/J&&(G=E,q--),G>E&&(G=E)),Ve=Ix(this._tTime,J),!_&&this._tTime&&Ve!==q&&(Ve=q),ot&&1&q&&(G=E-G,bt=1),q!==Ve&&!this._lock){var $t=ot&&1&Ve,Ot=$t===(ot&&1&q);if(q<Ve&&($t=!$t),_=$t?0:E,this._lock=1,this.render(_||(bt?0:Oa(q*J)),l,!E)._lock=0,this._tTime=T,!l&&this.parent&&Xu(this,"onRepeat"),this.vars.repeatRefresh&&!bt&&(this.invalidate()._lock=1),_&&_!==this._time||re!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(E=this._dur,w=this._tDur,Ot&&(this._lock=2,this.render(_=$t?E:-1e-4,!0),this.vars.repeatRefresh&&!bt&&this.invalidate()),this._lock=0,!this._ts&&!re)return this;zN(this,bt)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(Me=function(t,e,s){var o;if(s>e)for(o=t._first;o&&o._start<=s;){if("isPause"===o.data&&o._start>e)return o;o=o._next}else for(o=t._last;o&&o._start>=s;){if("isPause"===o.data&&o._start<e)return o;o=o._prev}}(this,Oa(_),Oa(G)),Me&&(T-=G-(G=Me._start))),this._tTime=T,this._time=G,this._act=!be,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=o,_=0),!_&&G&&!l&&(Xu(this,"onStart"),this._tTime!==T))return this;if(G>=_&&o>=0)for(H=this._first;H;){if(Y=H._next,(H._act||G>=H._start)&&H._ts&&Me!==H){if(H.parent!==this)return this.render(o,l,f);if(H.render(H._ts>0?(G-H._start)*H._ts:(H._dirty?H.totalDuration():H._tDur)+(G-H._start)*H._ts,l,f),G!==this._time||!this._ts&&!re){Me=0,Y&&(T+=this._zTime=-xr);break}}H=Y}else{H=this._last;for(var Qn=o<0?o:G;H;){if(Y=H._prev,(H._act||Qn<=H._end)&&H._ts&&Me!==H){if(H.parent!==this)return this.render(o,l,f);if(H.render(H._ts>0?(Qn-H._start)*H._ts:(H._dirty?H.totalDuration():H._tDur)+(Qn-H._start)*H._ts,l,f),G!==this._time||!this._ts&&!re){Me=0,Y&&(T+=this._zTime=Qn?-xr:xr);break}}H=Y}}if(Me&&!l&&(this.pause(),Me.render(G>=_?0:-xr)._zTime=G>=_?1:-1,this._ts))return this._start=He,LA(this),this.render(o,l,f);this._onUpdate&&!l&&Xu(this,"onUpdate",!0),(T===w&&w>=this.totalDuration()||!T&&_)&&(He===this._start||Math.abs(be)!==Math.abs(this._ts))&&(this._lock||((o||!E)&&(T===w&&this._ts>0||!T&&this._ts<0)&&zg(this,1),!l&&(!(o<0)||_)&&(T||_||!w)&&(Xu(this,T===w&&o>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(T<w&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(o,l){var f=this;if(Ug(l)||(l=Ku(this,l,o)),!(o instanceof VD)){if(Pa(o))return o.forEach(function(_){return f.add(_,l)}),this;if(jo(o))return this.addLabel(o,l);if(!Wo(o))return this;o=Yo.delayedCall(0,o)}return this!==o?Yf(this,o,l):this},e.getChildren=function(o,l,f,_){void 0===o&&(o=!0),void 0===l&&(l=!0),void 0===f&&(f=!0),void 0===_&&(_=-$u);for(var w=[],E=this._first;E;)E._start>=_&&(E instanceof Yo?l&&w.push(E):(f&&w.push(E),o&&w.push.apply(w,E.getChildren(!0,l,f)))),E=E._next;return w},e.getById=function(o){for(var l=this.getChildren(1,1,1),f=l.length;f--;)if(l[f].vars.id===o)return l[f]},e.remove=function(o){return jo(o)?this.removeLabel(o):Wo(o)?this.killTweensOf(o):(kA(this,o),o===this._recent&&(this._recent=this._last),lb(this))},e.totalTime=function(o,l){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Oa(Ju.time-(this._ts>0?o/this._ts:(this.totalDuration()-o)/-this._ts))),i.prototype.totalTime.call(this,o,l),this._forcing=0,this):this._tTime},e.addLabel=function(o,l){return this.labels[o]=Ku(this,l),this},e.removeLabel=function(o){return delete this.labels[o],this},e.addPause=function(o,l,f){var _=Yo.delayedCall(0,l||PD,f);return _.data="isPause",this._hasPause=1,Yf(this,_,Ku(this,o))},e.removePause=function(o){var l=this._first;for(o=Ku(this,o);l;)l._start===o&&"isPause"===l.data&&zg(l),l=l._next},e.killTweensOf=function(o,l,f){for(var _=this.getTweensOf(o,f),w=_.length;w--;)ov!==_[w]&&_[w].kill(o,l);return this},e.getTweensOf=function(o,l){for(var T,f=[],_=Qu(o),w=this._first,E=Ug(l);w;)w instanceof Yo?p5(w._targets,_)&&(E?(!ov||w._initted&&w._ts)&&w.globalTime(0)<=l&&w.globalTime(w.totalDuration())>l:!l||w.isActive())&&f.push(w):(T=w.getTweensOf(_,l)).length&&f.push.apply(f,T),w=w._next;return f},e.tweenTo=function(o,l){l=l||{};var H,f=this,_=Ku(f,o),E=l.startAt,T=l.onStart,F=l.onStartParams,G=l.immediateRender,Y=Yo.to(f,Zu({ease:l.ease||"none",lazy:!1,immediateRender:!1,time:_,overwrite:"auto",duration:l.duration||Math.abs((_-(E&&"time"in E?E.time:f._time))/f.timeScale())||xr,onStart:function(){if(f.pause(),!H){var J=l.duration||Math.abs((_-(E&&"time"in E?E.time:f._time))/f.timeScale());Y._dur!==J&&Rx(Y,J,0,1).render(Y._time,!0,!0),H=1}T&&T.apply(Y,F||[])}},l));return G?Y.render(0):Y},e.tweenFromTo=function(o,l,f){return this.tweenTo(l,Zu({startAt:{time:Ku(this,o)}},f))},e.recent=function(){return this._recent},e.nextLabel=function(o){return void 0===o&&(o=this._time),NN(this,Ku(this,o))},e.previousLabel=function(o){return void 0===o&&(o=this._time),NN(this,Ku(this,o),1)},e.currentLabel=function(o){return arguments.length?this.seek(o,!0):this.previousLabel(this._time+xr)},e.shiftChildren=function(o,l,f){void 0===f&&(f=0);for(var E,_=this._first,w=this.labels;_;)_._start>=f&&(_._start+=o,_._end+=o),_=_._next;if(l)for(E in w)w[E]>=f&&(w[E]+=o);return lb(this)},e.invalidate=function(){var o=this._first;for(this._lock=0;o;)o.invalidate(),o=o._next;return i.prototype.invalidate.call(this)},e.clear=function(o){void 0===o&&(o=!0);for(var f,l=this._first;l;)f=l._next,this.remove(l),l=f;return this._dp&&(this._time=this._tTime=this._pTime=0),o&&(this.labels={}),lb(this)},e.totalDuration=function(o){var E,T,F,l=0,f=this,_=f._last,w=$u;if(arguments.length)return f.timeScale((f._repeat<0?f.duration():f.totalDuration())/(f.reversed()?-o:o));if(f._dirty){for(F=f.parent;_;)E=_._prev,_._dirty&&_.totalDuration(),(T=_._start)>w&&f._sort&&_._ts&&!f._lock?(f._lock=1,Yf(f,_,T-_._delay,1)._lock=0):w=T,T<0&&_._ts&&(l-=T,(!F&&!f._dp||F&&F.smoothChildTiming)&&(f._start+=T/f._ts,f._time-=T,f._tTime-=T),f.shiftChildren(-T,!1,-1/0),w=0),_._end>l&&_._ts&&(l=_._end),_=E;Rx(f,f===ms&&f._time>l?f._time:l,1,1),f._dirty=0}return f._tDur},t.updateRoot=function(o){if(ms._ts&&(bN(ms,FA(o,ms)),_N=Ju.frame),Ju.frame>=vN){vN+=Qc.autoSleep||120;var l=ms._first;if((!l||!l._ts)&&Qc.autoSleep&&Ju._listeners.length<2){for(;l&&!l._ts;)l=l._next;l||Ju.sleep()}}},t}(VD);Zu(ec.prototype,{_lock:0,_hasPause:0,_forcing:0});var ov,G5=function(t,e,s,o,l,f,_){var F,G,H,Y,q,J,re,Me,w=new tc(this._pt,t,e,0,1,QN,null,l),E=0,T=0;for(w.b=s,w.e=o,s+="",(re=~(o+="").indexOf("random("))&&(o=LD(o)),f&&(f(Me=[s,o],t,e),s=Me[0],o=Me[1]),G=s.match(vR)||[];F=vR.exec(o);)Y=F[0],q=o.substring(E,F.index),H?H=(H+1)%5:"rgba("===q.substr(-5)&&(H=1),Y!==G[T++]&&(J=parseFloat(G[T-1])||0,w._pt={_next:w._pt,p:q||1===T?q:",",s:J,c:"="===Y.charAt(1)?parseFloat(Y.substr(2))*("-"===Y.charAt(0)?-1:1):parseFloat(Y)-J,m:H&&H<4?Math.round:0},E=vR.lastIndex);return w.c=E<o.length?o.substring(E,o.length):"",w.fp=_,(hN.test(o)||re)&&(w.e=0),this._pt=w,w},OR=function(t,e,s,o,l,f,_,w,E){Wo(o)&&(o=o(l||0,t,f));var H,T=t[e],F="get"!==s?s:Wo(T)?E?t[e.indexOf("set")||!Wo(t["get"+e.substr(3)])?e:"get"+e.substr(3)](E):t[e]():T,G=Wo(T)?E?W5:ZN:kR;if(jo(o)&&(~o.indexOf("random(")&&(o=LD(o)),"="===o.charAt(1)&&((H=parseFloat(F)+parseFloat(o.substr(2))*("-"===o.charAt(0)?-1:1)+(Jl(F)||0))||0===H)&&(o=H)),F!==o)return isNaN(F*o)||""===o?(!T&&!(e in t)&&wR(e,o),G5.call(this,t,e,F,o,G,w||Qc.stringFilter,E)):(H=new tc(this._pt,t,e,+F||0,o-(F||0),"boolean"==typeof T?q5:KN,0,G),E&&(H.fp=E),_&&H.modifier(_,this,t),this._pt=H)},YN=function(t,e,s,o,l,f){var _,w,E,T;if(Jc[t]&&!1!==(_=new Jc[t]).init(l,_.rawVars?e[t]:function(t,e,s,o,l){if(Wo(t)&&(t=GD(t,l,e,s,o)),!Hg(t)||t.style&&t.nodeType||Pa(t)||uN(t))return jo(t)?GD(t,l,e,s,o):t;var _,f={};for(_ in t)f[_]=GD(t[_],l,e,s,o);return f}(e[t],o,l,f,s),s,o,f)&&(s._pt=w=new tc(s._pt,l,t,0,1,_.render,_,0,_.priority),s!==Px))for(E=s._ptLookup[s._targets.indexOf(l)],T=_._props.length;T--;)E[_._props[T]]=w;return _},H5=function i(t,e){var ot,bt,$t,Ot,Qn,rr,qr,gr,Or,_s,Nt,on,xn,s=t.vars,o=s.ease,l=s.startAt,f=s.immediateRender,_=s.lazy,w=s.onUpdate,E=s.onUpdateParams,T=s.callbackScope,F=s.runBackwards,G=s.yoyoEase,H=s.keyframes,Y=s.autoRevert,q=t._dur,J=t._startAt,re=t._targets,Me=t.parent,be=Me&&"nested"===Me.data?Me.parent._targets:re,He="auto"===t._overwrite&&!pR,Ve=t.timeline;if(Ve&&(!H||!o)&&(o="none"),t._ease=cb(o,Sx.ease),t._yEase=G?HN(cb(!0===G?o:G,Sx.ease)):0,G&&t._yoyo&&!t._repeat&&(G=t._yEase,t._yEase=t._ease,t._ease=G),t._from=!Ve&&!!s.runBackwards,!Ve||H&&!s.stagger){if(on=(gr=re[0]?ab(re[0]).harness:0)&&s[gr.prop],ot=OA(s,xR),J&&zg(J.render(-1,!0)),l)if(zg(t._startAt=Yo.set(re,Zu({data:"isStart",overwrite:!1,parent:Me,immediateRender:!0,lazy:Ql(_),startAt:null,delay:0,onUpdate:w,onUpdateParams:E,callbackScope:T,stagger:0},l))),e<0&&!f&&!Y&&t._startAt.render(-1,!0),f){if(e>0&&!Y&&(t._startAt=0),q&&e<=0)return void(e&&(t._zTime=e))}else!1===Y&&(t._startAt=0);else if(F&&q)if(J)!Y&&(t._startAt=0);else if(e&&(f=!1),$t=Zu({overwrite:!1,data:"isFromStart",lazy:f&&Ql(_),immediateRender:f,stagger:0,parent:Me},ot),on&&($t[gr.prop]=on),zg(t._startAt=Yo.set(re,$t)),e<0&&t._startAt.render(-1,!0),t._zTime=e,f){if(!e)return}else i(t._startAt,xr);for(t._pt=0,_=q&&Ql(_)||_&&!q,bt=0;bt<re.length;bt++){if(qr=(Qn=re[bt])._gsap||ER(re)[bt]._gsap,t._ptLookup[bt]=_s={},CR[qr.id]&&iv.length&&PA(),Nt=be===re?bt:be.indexOf(Qn),gr&&!1!==(Or=new gr).init(Qn,on||ot,t,Nt,be)&&(t._pt=Ot=new tc(t._pt,Qn,Or.name,0,1,Or.render,Or,0,Or.priority),Or._props.forEach(function(li){_s[li]=Ot}),Or.priority&&(rr=1)),!gr||on)for($t in ot)Jc[$t]&&(Or=YN($t,ot,t,Nt,Qn,be))?Or.priority&&(rr=1):_s[$t]=Ot=OR.call(t,Qn,$t,"get",ot[$t],Nt,be,0,s.stringFilter);t._op&&t._op[bt]&&t.kill(Qn,t._op[bt]),He&&t._pt&&(ov=t,ms.killTweensOf(Qn,_s,t.globalTime(e)),xn=!t.parent,ov=0),t._pt&&_&&(CR[qr.id]=1)}rr&&XN(t),t._onInit&&t._onInit(t)}t._onUpdate=w,t._initted=(!t._op||t._pt)&&!xn,H&&e<=0&&Ve.render($u,!0,!0)},j5=function(t,e,s,o){var f,_,l=e.ease||o||"power1.inOut";if(Pa(e))_=s[t]||(s[t]=[]),e.forEach(function(w,E){return _.push({t:E/(e.length-1)*100,v:w,e:l})});else for(f in e)_=s[f]||(s[f]=[]),"ease"===f||_.push({t:parseFloat(t),v:e[f],e:l})},GD=function(t,e,s,o,l){return Wo(t)?t.call(e,s,o,l):jo(t)&&~t.indexOf("random(")?LD(t):t},qN=DR+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",$N={};Xl(qN+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return $N[i]=1});var Yo=function(i){function t(s,o,l,f){var _;"number"==typeof o&&(l.duration=o,o=l,l=null);var He,Ve,ot,bt,$t,Ot,Qn,rr,w=(_=i.call(this,f?o:OD(o))||this).vars,E=w.duration,T=w.delay,F=w.immediateRender,G=w.stagger,H=w.overwrite,Y=w.keyframes,q=w.defaults,J=w.scrollTrigger,re=w.yoyoEase,Me=o.parent||ms,be=(Pa(s)||uN(s)?Ug(s[0]):"length"in o)?[s]:Qu(s);if(_._targets=be.length?ER(be):IA("GSAP target "+s+" not found. https://greensock.com",!Qc.nullTargetWarn)||[],_._ptLookup=[],_._overwrite=H,Y||G||AA(E)||AA(T)){if(o=_.vars,(He=_.timeline=new ec({data:"nested",defaults:q||{}})).kill(),He.parent=He._dp=Gg(_),He._start=0,G||AA(E)||AA(T)){if(bt=be.length,Qn=G&&PN(G),Hg(G))for($t in G)~qN.indexOf($t)&&(rr||(rr={}),rr[$t]=G[$t]);for(Ve=0;Ve<bt;Ve++)(ot=OA(o,$N)).stagger=0,re&&(ot.yoyoEase=re),rr&&Tx(ot,rr),Ot=be[Ve],ot.duration=+GD(E,Gg(_),Ve,Ot,be),ot.delay=(+GD(T,Gg(_),Ve,Ot,be)||0)-_._delay,!G&&1===bt&&ot.delay&&(_._delay=T=ot.delay,_._start+=T,ot.delay=0),He.to(Ot,ot,Qn?Qn(Ve,Ot,be):0),He._ease=Pi.none;He.duration()?E=T=0:_.timeline=0}else if(Y){OD(Zu(He.vars.defaults,{ease:"none"})),He._ease=cb(Y.ease||o.ease||"none");var gr,Or,_s,qr=0;if(Pa(Y))Y.forEach(function(Nt){return He.to(be,Nt,">")});else{for($t in ot={},Y)"ease"===$t||"easeEach"===$t||j5($t,Y[$t],ot,Y.easeEach);for($t in ot)for(gr=ot[$t].sort(function(Nt,on){return Nt.t-on.t}),qr=0,Ve=0;Ve<gr.length;Ve++)(_s={ease:(Or=gr[Ve]).e,duration:(Or.t-(Ve?gr[Ve-1].t:0))/100*E})[$t]=Or.v,He.to(be,_s,qr),qr+=_s.duration;He.duration()<E&&He.to({},{duration:E-He.duration()})}}E||_.duration(E=He.duration())}else _.timeline=0;return!0===H&&!pR&&(ov=Gg(_),ms.killTweensOf(be),ov=0),Yf(Me,Gg(_),l),o.reversed&&_.reverse(),o.paused&&_.paused(!0),(F||!E&&!Y&&_._start===Oa(Me._time)&&Ql(F)&&y5(Gg(_))&&"nested"!==Me.data)&&(_._tTime=-xr,_.render(Math.max(0,-T))),J&&SN(Gg(_),J),_}aN(t,i);var e=t.prototype;return e.render=function(o,l,f){var F,G,H,Y,q,J,re,Me,be,_=this._time,w=this._tDur,E=this._dur,T=o>w-xr&&o>=0?w:o<xr?0:o;if(E){if(T!==this._tTime||!o||f||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=o<0){if(F=T,Me=this.timeline,this._repeat){if(Y=E+this._rDelay,this._repeat<-1&&o<0)return this.totalTime(100*Y+o,l,f);if(F=Oa(T%Y),T===w?(H=this._repeat,F=E):((H=~~(T/Y))&&H===T/Y&&(F=E,H--),F>E&&(F=E)),(J=this._yoyo&&1&H)&&(be=this._yEase,F=E-F),q=Ix(this._tTime,Y),F===_&&!f&&this._initted)return this;H!==q&&(Me&&this._yEase&&zN(Me,J),this.vars.repeatRefresh&&!J&&!this._lock&&(this._lock=f=1,this.render(Oa(Y*H),!0).invalidate()._lock=0))}if(!this._initted){if(AN(this,o<0?o:F,f,l))return this._tTime=0,this;if(E!==this._dur)return this.render(o,l,f)}if(this._tTime=T,this._time=F,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=re=(be||this._ease)(F/E),this._from&&(this.ratio=re=1-re),F&&!_&&!l&&(Xu(this,"onStart"),this._tTime!==T))return this;for(G=this._pt;G;)G.r(re,G.d),G=G._next;Me&&Me.render(o<0?o:!F&&J?-xr:Me._dur*Me._ease(F/this._dur),l,f)||this._startAt&&(this._zTime=o),this._onUpdate&&!l&&(o<0&&this._startAt&&this._startAt.render(o,!0,f),Xu(this,"onUpdate")),this._repeat&&H!==q&&this.vars.onRepeat&&!l&&this.parent&&Xu(this,"onRepeat"),(T===this._tDur||!T)&&this._tTime===T&&(o<0&&this._startAt&&!this._onUpdate&&this._startAt.render(o,!0,!0),(o||!E)&&(T===this._tDur&&this._ts>0||!T&&this._ts<0)&&zg(this,1),!l&&(!(o<0)||_)&&(T||_)&&(Xu(this,T===w?"onComplete":"onReverseComplete",!0),this._prom&&!(T<w&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,s,o){var E,T,F,l=t.ratio,f=e<0||!e&&(!t._start&&b5(t)&&(t._initted||!SR(t))||(t._ts<0||t._dp._ts<0)&&!SR(t))?0:1,_=t._rDelay,w=0;if(_&&t._repeat&&(w=FD(0,t._tDur,e),T=Ix(w,_),t._yoyo&&1&T&&(f=1-f),T!==Ix(t._tTime,_)&&(l=1-f,t.vars.repeatRefresh&&t._initted&&t.invalidate())),f!==l||o||t._zTime===xr||!e&&t._zTime){if(!t._initted&&AN(t,e,o,s))return;for(F=t._zTime,t._zTime=e||(s?xr:0),s||(s=e&&!F),t.ratio=f,t._from&&(f=1-f),t._time=0,t._tTime=w,E=t._pt;E;)E.r(f,E.d),E=E._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!s&&Xu(t,"onUpdate"),w&&t._repeat&&!s&&t.parent&&Xu(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===f&&(f&&zg(t,1),s||(Xu(t,f?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,o,l,f);return this},e.targets=function(){return this._targets},e.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),i.prototype.invalidate.call(this)},e.kill=function(o,l){if(void 0===l&&(l="all"),!(o||l&&"all"!==l))return this._lazy=this._pt=0,this.parent?ND(this):this;if(this.timeline){var f=this.timeline.totalDuration();return this.timeline.killTweensOf(o,l,ov&&!0!==ov.vars.overwrite)._first||ND(this),this.parent&&f!==this.timeline.totalDuration()&&Rx(this,this._dur*this.timeline._tDur/f,0,1),this}var F,G,H,Y,q,J,re,_=this._targets,w=o?Qu(o):_,E=this._ptLookup,T=this._pt;if((!l||"all"===l)&&function(t,e){for(var s=t.length,o=s===e.length;o&&s--&&t[s]===e[s];);return s<0}(_,w))return"all"===l&&(this._pt=0),ND(this);for(F=this._op=this._op||[],"all"!==l&&(jo(l)&&(q={},Xl(l,function(Me){return q[Me]=1}),l=q),l=function(t,e){var l,f,_,w,s=t[0]?ab(t[0]).harness:0,o=s&&s.aliases;if(!o)return e;for(f in l=Tx({},e),o)if(f in l)for(_=(w=o[f].split(",")).length;_--;)l[w[_]]=l[f];return l}(_,l)),re=_.length;re--;)if(~w.indexOf(_[re]))for(q in G=E[re],"all"===l?(F[re]=l,Y=G,H={}):(H=F[re]=F[re]||{},Y=l),Y)(J=G&&G[q])&&((!("kill"in J.d)||!0===J.d.kill(q))&&kA(this,J,"_pt"),delete G[q]),"all"!==H&&(H[q]=1);return this._initted&&!this._pt&&T&&ND(this),this},t.to=function(o,l){return new t(o,l,arguments[2])},t.from=function(o,l){return kD(1,arguments)},t.delayedCall=function(o,l,f,_){return new t(l,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:o,onComplete:l,onReverseComplete:l,onCompleteParams:f,onReverseCompleteParams:f,callbackScope:_})},t.fromTo=function(o,l,f){return kD(2,arguments)},t.set=function(o,l){return l.duration=0,l.repeatDelay||(l.repeat=0),new t(o,l)},t.killTweensOf=function(o,l,f){return ms.killTweensOf(o,l,f)},t}(VD);Zu(Yo.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Xl("staggerTo,staggerFrom,staggerFromTo",function(i){Yo[i]=function(){var t=new ec,e=AR.call(arguments,0);return e.splice("staggerFromTo"===i?5:4,0,0),t[i].apply(t,e)}});var kR=function(t,e,s){return t[e]=s},ZN=function(t,e,s){return t[e](s)},W5=function(t,e,s,o){return t[e](o.fp,s)},Y5=function(t,e,s){return t.setAttribute(e,s)},FR=function(t,e){return Wo(t[e])?ZN:mR(t[e])&&t.setAttribute?Y5:kR},KN=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},q5=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},QN=function(t,e){var s=e._pt,o="";if(!t&&e.b)o=e.b;else if(1===t&&e.e)o=e.e;else{for(;s;)o=s.p+(s.m?s.m(s.s+s.c*t):Math.round(1e4*(s.s+s.c*t))/1e4)+o,s=s._next;o+=e.c}e.set(e.t,e.p,o,e)},LR=function(t,e){for(var s=e._pt;s;)s.r(t,s.d),s=s._next},$5=function(t,e,s,o){for(var f,l=this._pt;l;)f=l._next,l.p===o&&l.modifier(t,e,s),l=f},Z5=function(t){for(var s,o,e=this._pt;e;)o=e._next,e.p===t&&!e.op||e.op===t?kA(this,e,"_pt"):e.dep||(s=1),e=o;return!s},K5=function(t,e,s,o){o.mSet(t,e,o.m.call(o.tween,s,o.mt),o)},XN=function(t){for(var s,o,l,f,e=t._pt;e;){for(s=e._next,o=l;o&&o.pr>e.pr;)o=o._next;(e._prev=o?o._prev:f)?e._prev._next=e:l=e,(e._next=o)?o._prev=e:f=e,e=s}t._pt=l},tc=function(){function i(e,s,o,l,f,_,w,E,T){this.t=s,this.s=l,this.c=f,this.p=o,this.r=_||KN,this.d=w||this,this.set=E||kR,this.pr=T||0,this._next=e,e&&(e._prev=this)}return i.prototype.modifier=function(s,o,l){this.mSet=this.mSet||this.set,this.set=K5,this.m=s,this.mt=l,this.tween=o},i}();Xl(DR+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return xR[i]=1}),Xc.TweenMax=Xc.TweenLite=Yo,Xc.TimelineLite=Xc.TimelineMax=ec,ms=new ec({sortChildren:!1,defaults:Sx,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Qc.stringFilter=UN;var BA={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];e.forEach(function(o){return O5(o)})},timeline:function(t){return new ec(t)},getTweensOf:function(t,e){return ms.getTweensOf(t,e)},getProperty:function(t,e,s,o){jo(t)&&(t=Qu(t)[0]);var l=ab(t||{}).get,f=s?xN:wN;return"native"===s&&(s=""),t&&(e?f((Jc[e]&&Jc[e].get||l)(t,e,s,o)):function(_,w,E){return f((Jc[_]&&Jc[_].get||l)(t,_,w,E))})},quickSetter:function(t,e,s){if((t=Qu(t)).length>1){var o=t.map(function(T){return qf.quickSetter(T,e,s)}),l=o.length;return function(T){for(var F=l;F--;)o[F](T)}}var f=Jc[e],_=ab(t=t[0]||{}),w=_.harness&&(_.harness.aliases||{})[e]||e,E=f?function(T){var F=new f;Px._pt=0,F.init(t,s?T+s:T,Px,0,[t]),F.render(1,F),Px._pt&&LR(1,Px)}:_.set(t,w);return f?E:function(T){return E(t,w,s?T+s:T,_,1)}},isTweening:function(t){return ms.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=cb(t.ease,Sx.ease)),CN(Sx,t||{})},config:function(t){return CN(Qc,t||{})},registerEffect:function(t){var e=t.name,s=t.effect,l=t.defaults,f=t.extendTimeline;(t.plugins||"").split(",").forEach(function(_){return _&&!Jc[_]&&!Xc[_]&&IA(e+" effect requires "+_+" plugin.")}),MR[e]=function(_,w,E){return s(Qu(_),Zu(w||{},l),E)},f&&(ec.prototype[e]=function(_,w,E){return this.add(MR[e](_,Hg(w)?w:(E=w)&&{},this),E)})},registerEase:function(t,e){Pi[t]=cb(e)},parseEase:function(t,e){return arguments.length?cb(t,e):Pi},getById:function(t){return ms.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var o,l,s=new ec(t);for(s.smoothChildTiming=Ql(t.smoothChildTiming),ms.remove(s),s._dp=0,s._time=s._tTime=ms._time,o=ms._first;o;)l=o._next,(e||!(!o._dur&&o instanceof Yo&&o.vars.onComplete===o._targets[0]))&&Yf(s,o,o._start-o._delay),o=l;return Yf(ms,s,0),s},utils:{wrap:function i(t,e,s){var o=e-t;return Pa(t)?FN(t,i(0,t.length),e):rv(s,function(l){return(o+(l-t)%o)%o+t})},wrapYoyo:function i(t,e,s){var o=e-t,l=2*o;return Pa(t)?FN(t,i(0,t.length-1),e):rv(s,function(f){return t+((f=(l+(f-t)%l)%l||0)>o?l-f:f)})},distribute:PN,random:kN,snap:ON,normalize:function(t,e,s){return LN(t,e,0,1,s)},getUnit:Jl,clamp:function(t,e,s){return rv(s,function(o){return FD(t,e,o)})},splitColor:BN,toArray:Qu,selector:function(t){return t=Qu(t)[0]||IA("Invalid scope")||{},function(e){var s=t.current||t.nativeElement||t;return Qu(e,s.querySelectorAll?s:s===t?IA("Invalid scope")||bR.createElement("div"):t)}},mapRange:LN,pipe:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return function(o){return e.reduce(function(l,f){return f(l)},o)}},unitize:function(t,e){return function(s){return t(parseFloat(s))+(e||Jl(s))}},interpolate:function i(t,e,s,o){var l=isNaN(t+e)?0:function(H){return(1-H)*t+H*e};if(!l){var w,E,T,F,G,f=jo(t),_={};if(!0===s&&(o=1)&&(s=null),f)t={p:t},e={p:e};else if(Pa(t)&&!Pa(e)){for(T=[],G=(F=t.length)-2,E=1;E<F;E++)T.push(i(t[E-1],t[E]));F--,l=function(Y){Y*=F;var q=Math.min(G,~~Y);return T[q](Y-q)},s=e}else o||(t=Tx(Pa(t)?[]:{},t));if(!T){for(w in e)OR.call(_,t,w,"get",e[w]);l=function(Y){return LR(Y,_)||(f?t.p:t)}}}return rv(s,l)},shuffle:RN},install:gN,effects:MR,ticker:Ju,updateRoot:ec.updateRoot,plugins:Jc,globalTimeline:ms,core:{PropTween:tc,globals:mN,Tween:Yo,Timeline:ec,Animation:VD,getCache:ab,_removeLinkedListItem:kA,suppressOverwrites:function(t){return pR=t}}};Xl("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return BA[i]=Yo[i]}),Ju.add(ec.updateRoot),Px=BA.to({},{duration:0});var Q5=function(t,e){for(var s=t._pt;s&&s.p!==e&&s.op!==e&&s.fp!==e;)s=s._next;return s},NR=function(t,e){return{name:t,rawVars:1,init:function(o,l,f){f._onInit=function(_){var w,E;if(jo(l)&&(w={},Xl(l,function(T){return w[T]=1}),l=w),e){for(E in w={},l)w[E]=e(l[E]);l=w}!function(t,e){var o,l,f,s=t._targets;for(o in e)for(l=s.length;l--;)(f=t._ptLookup[l][o])&&(f=f.d)&&(f._pt&&(f=Q5(f,o)),f&&f.modifier&&f.modifier(e[o],t,s[l],o))}(_,l)}}}},qf=BA.registerPlugin({name:"attr",init:function(t,e,s,o,l){var f,_;for(f in e)(_=this.add(t,"setAttribute",(t.getAttribute(f)||0)+"",e[f],o,l,0,0,f))&&(_.op=f),this._props.push(f)}},{name:"endArray",init:function(t,e){for(var s=e.length;s--;)this.add(t,s,t[s]||0,e[s])}},NR("roundProps",TR),NR("modifiers"),NR("snap",ON))||BA;Yo.version=ec.version=qf.version="3.9.1",pN=1,cN()&&Ox();var JN,av,kx,BR,db,e2,a2,lv={},hb=180/Math.PI,Fx=Math.PI/180,Lx=Math.atan2,t2=1e8,n2=/([A-Z])/g,t8=/(?:left|right|width|margin|padding|x)/i,n8=/[\s,\(]\S/,cv={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},r2=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},r8=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},s8=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},o8=function(t,e){var s=e.s+e.c*t;e.set(e.t,e.p,~~(s+(s<0?-.5:.5))+e.u,e)},s2=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},o2=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},a8=function(t,e,s){return t.style[e]=s},l8=function(t,e,s){return t.style.setProperty(e,s)},c8=function(t,e,s){return t._gsap[e]=s},u8=function(t,e,s){return t._gsap.scaleX=t._gsap.scaleY=s},d8=function(t,e,s,o,l){var f=t._gsap;f.scaleX=f.scaleY=s,f.renderTransform(l,f)},h8=function(t,e,s,o,l){var f=t._gsap;f[e]=s,f.renderTransform(l,f)},da="transform",uv=da+"Origin",VR=function(t,e){var s=av.createElementNS?av.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):av.createElement(t);return s.style?s:av.createElement(t)},jg=function i(t,e,s){var o=getComputedStyle(t);return o[e]||o.getPropertyValue(e.replace(n2,"-$1").toLowerCase())||o.getPropertyValue(e)||!s&&i(t,Nx(e)||e,1)||""},l2="O,Moz,ms,Ms,Webkit".split(","),Nx=function(t,e,s){var l=(e||db).style,f=5;if(t in l&&!s)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);f--&&!(l2[f]+t in l););return f<0?null:(3===f?"ms":f>=0?l2[f]:"")+t},GR=function(){"undefined"!=typeof window&&window.document&&(JN=window,kx=(av=JN.document).documentElement,db=VR("div")||{style:{}},VR("div"),da=Nx(da),uv=da+"Origin",db.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",a2=!!Nx("perspective"),BR=1)},UR=function i(t){var f,e=VR("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=this.parentNode,o=this.nextSibling,l=this.style.cssText;if(kx.appendChild(e),e.appendChild(this),this.style.display="block",t)try{f=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch(_){}else this._gsapBBox&&(f=this._gsapBBox());return s&&(o?s.insertBefore(this,o):s.appendChild(this)),kx.removeChild(e),this.style.cssText=l,f},c2=function(t,e){for(var s=e.length;s--;)if(t.hasAttribute(e[s]))return t.getAttribute(e[s])},u2=function(t){var e;try{e=t.getBBox()}catch(s){e=UR.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===UR||(e=UR.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+c2(t,["x","cx","x1"])||0,y:+c2(t,["y","cy","y1"])||0,width:0,height:0}},d2=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!u2(t))},UD=function(t,e){if(e){var s=t.style;e in lv&&e!==uv&&(e=da),s.removeProperty?(("ms"===e.substr(0,2)||"webkit"===e.substr(0,6))&&(e="-"+e),s.removeProperty(e.replace(n2,"-$1").toLowerCase())):s.removeAttribute(e)}},dv=function(t,e,s,o,l,f){var _=new tc(t._pt,e,s,0,1,f?o2:s2);return t._pt=_,_.b=o,_.e=l,t._props.push(s),_},h2={deg:1,rad:1,turn:1},hv=function i(t,e,s,o){var Y,q,J,re,l=parseFloat(s)||0,f=(s+"").trim().substr((l+"").length)||"px",_=db.style,w=t8.test(e),E="svg"===t.tagName.toLowerCase(),T=(E?"client":"offset")+(w?"Width":"Height"),F=100,G="px"===o,H="%"===o;return o===f||!l||h2[o]||h2[f]?l:("px"!==f&&!G&&(l=i(t,e,s,"px")),re=t.getCTM&&d2(t),!H&&"%"!==f||!lv[e]&&!~e.indexOf("adius")?(_[w?"width":"height"]=F+(G?f:o),q=~e.indexOf("adius")||"em"===o&&t.appendChild&&!E?t:t.parentNode,re&&(q=(t.ownerSVGElement||{}).parentNode),(!q||q===av||!q.appendChild)&&(q=av.body),(J=q._gsap)&&H&&J.width&&w&&J.time===Ju.time?ao(l/J.width*F):((H||"%"===f)&&(_.position=jg(t,"position")),q===t&&(_.position="static"),q.appendChild(db),Y=db[T],q.removeChild(db),_.position="absolute",w&&H&&((J=ab(q)).time=Ju.time,J.width=q[T]),ao(G?Y*l/F:Y&&l?F/Y*l:0))):(Y=re?t.getBBox()[w?"width":"height"]:t[T],ao(H?l/Y*F:l/100*Y)))},fb=function(t,e,s,o){var l;return BR||GR(),e in cv&&"transform"!==e&&~(e=cv[e]).indexOf(",")&&(e=e.split(",")[0]),lv[e]&&"transform"!==e?(l=zD(t,o),l="transformOrigin"!==e?l[e]:l.svg?l.origin:GA(jg(t,uv))+" "+l.zOrigin+"px"):(!(l=t.style[e])||"auto"===l||o||~(l+"").indexOf("calc("))&&(l=VA[e]&&VA[e](t,e,s)||jg(t,e)||yN(t,e)||("opacity"===e?1:0)),s&&!~(l+"").trim().indexOf(" ")?hv(t,e,l,s)+s:l},f8=function(t,e,s,o){if(!s||"none"===s){var l=Nx(e,t,1),f=l&&jg(t,l,1);f&&f!==s?(e=l,s=f):"borderColor"===e&&(s=jg(t,"borderTopColor"))}var T,F,G,H,Y,q,J,re,Me,be,He,Ve,_=new tc(this._pt,t.style,e,0,1,QN),w=0,E=0;if(_.b=s,_.e=o,s+="","auto"==(o+="")&&(t.style[e]=o,o=jg(t,e)||o,t.style[e]=s),UN(T=[s,o]),o=T[1],G=(s=T[0]).match(Ax)||[],(o.match(Ax)||[]).length){for(;F=Ax.exec(o);)J=F[0],Me=o.substring(w,F.index),Y?Y=(Y+1)%5:("rgba("===Me.substr(-5)||"hsla("===Me.substr(-5))&&(Y=1),J!==(q=G[E++]||"")&&(H=parseFloat(q)||0,He=q.substr((H+"").length),(Ve="="===J.charAt(1)?+(J.charAt(0)+"1"):0)&&(J=J.substr(2)),re=parseFloat(J),be=J.substr((re+"").length),w=Ax.lastIndex-be.length,be||(be=be||Qc.units[e]||He,w===o.length&&(o+=be,_.e+=be)),He!==be&&(H=hv(t,e,q,be)||0),_._pt={_next:_._pt,p:Me||1===E?Me:",",s:H,c:Ve?Ve*re:re-H,m:Y&&Y<4||"zIndex"===e?Math.round:0});_.c=w<o.length?o.substring(w,o.length):""}else _.r="display"===e&&"none"===o?o2:s2;return hN.test(o)&&(_.e=0),this._pt=_,_},f2={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},p8=function(t){var e=t.split(" "),s=e[0],o=e[1]||"50%";return("top"===s||"bottom"===s||"left"===o||"right"===o)&&(t=s,s=o,o=t),e[0]=f2[s]||s,e[1]=f2[o]||o,e.join(" ")},g8=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var _,w,E,s=e.t,l=e.u,f=s._gsap;if("all"===l||!0===l)s.style.cssText="",w=1;else for(E=(l=l.split(",")).length;--E>-1;)lv[_=l[E]]&&(w=1,_="transformOrigin"===_?uv:da),UD(s,_);w&&(UD(s,da),f&&(f.svg&&s.removeAttribute("transform"),zD(s,1),f.uncache=1))}},VA={clearProps:function(t,e,s,o,l){if("isFromStart"!==l.data){var f=t._pt=new tc(t._pt,e,s,0,0,g8);return f.u=o,f.pr=-10,f.tween=l,t._props.push(s),1}}},HD=[1,0,0,1,0,0],p2={},g2=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},m2=function(t){var e=jg(t,da);return g2(e)?HD:e.substr(7).match(dN).map(ao)},HR=function(t,e){var f,_,w,E,s=t._gsap||ab(t),o=t.style,l=m2(t);return s.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(w=t.transform.baseVal.consolidate().matrix).a,w.b,w.c,w.d,w.e,w.f]).join(",")?HD:l:(l===HD&&!t.offsetParent&&t!==kx&&!s.svg&&(w=o.display,o.display="block",(!(f=t.parentNode)||!t.offsetParent)&&(E=1,_=t.nextSibling,kx.appendChild(t)),l=m2(t),w?o.display=w:UD(t,"display"),E&&(_?f.insertBefore(t,_):f?f.appendChild(t):kx.removeChild(t))),e&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},zR=function(t,e,s,o,l,f){var ot,bt,Ot,_=t._gsap,w=l||HR(t,!0),E=_.xOrigin||0,T=_.yOrigin||0,F=_.xOffset||0,G=_.yOffset||0,H=w[0],Y=w[1],q=w[2],J=w[3],re=w[4],Me=w[5],be=e.split(" "),He=parseFloat(be[0])||0,Ve=parseFloat(be[1])||0;s?w!==HD&&(bt=H*J-Y*q)&&(Ot=He*(-Y/bt)+Ve*(H/bt)-(H*Me-Y*re)/bt,He=He*(J/bt)+Ve*(-q/bt)+(q*Me-J*re)/bt,Ve=Ot):(He=(ot=u2(t)).x+(~be[0].indexOf("%")?He/100*ot.width:He),Ve=ot.y+(~(be[1]||be[0]).indexOf("%")?Ve/100*ot.height:Ve)),o||!1!==o&&_.smooth?(_.xOffset=F+((re=He-E)*H+(Me=Ve-T)*q)-re,_.yOffset=G+(re*Y+Me*J)-Me):_.xOffset=_.yOffset=0,_.xOrigin=He,_.yOrigin=Ve,_.smooth=!!o,_.origin=e,_.originIsAbsolute=!!s,t.style[uv]="0px 0px",f&&(dv(f,_,"xOrigin",E,He),dv(f,_,"yOrigin",T,Ve),dv(f,_,"xOffset",F,_.xOffset),dv(f,_,"yOffset",G,_.yOffset)),t.setAttribute("data-svg-origin",He+" "+Ve)},zD=function(t,e){var s=t._gsap||new WN(t);if("x"in s&&!e&&!s.uncache)return s;var E,T,F,G,H,Y,q,J,re,Me,be,He,Ve,ot,bt,$t,Ot,Qn,rr,qr,gr,Or,_s,Nt,on,xn,li,as,qo,ka,$o,$i,o=t.style,l=s.scaleX<0,f="px",_="deg",w=jg(t,uv)||"0";return E=T=F=Y=q=J=re=Me=be=0,G=H=1,s.svg=!(!t.getCTM||!d2(t)),ot=HR(t,s.svg),s.svg&&(Nt=(!s.uncache||"0px 0px"===w)&&!e&&t.getAttribute("data-svg-origin"),zR(t,Nt||w,!!Nt||s.originIsAbsolute,!1!==s.smooth,ot)),He=s.xOrigin||0,Ve=s.yOrigin||0,ot!==HD&&(Qn=ot[0],rr=ot[1],qr=ot[2],gr=ot[3],E=Or=ot[4],T=_s=ot[5],6===ot.length?(G=Math.sqrt(Qn*Qn+rr*rr),H=Math.sqrt(gr*gr+qr*qr),Y=Qn||rr?Lx(rr,Qn)*hb:0,(re=qr||gr?Lx(qr,gr)*hb+Y:0)&&(H*=Math.abs(Math.cos(re*Fx))),s.svg&&(E-=He-(He*Qn+Ve*qr),T-=Ve-(He*rr+Ve*gr))):(ka=ot[7],li=ot[8],as=ot[9],$o=ot[11],E=ot[12],T=ot[13],F=ot[14],q=(bt=Lx($i=ot[6],qo=ot[10]))*hb,bt&&(Nt=Or*($t=Math.cos(-bt))+li*(Ot=Math.sin(-bt)),on=_s*$t+as*Ot,xn=$i*$t+qo*Ot,li=Or*-Ot+li*$t,as=_s*-Ot+as*$t,qo=$i*-Ot+qo*$t,$o=ka*-Ot+$o*$t,Or=Nt,_s=on,$i=xn),J=(bt=Lx(-qr,qo))*hb,bt&&($t=Math.cos(-bt),$o=gr*(Ot=Math.sin(-bt))+$o*$t,Qn=Nt=Qn*$t-li*Ot,rr=on=rr*$t-as*Ot,qr=xn=qr*$t-qo*Ot),Y=(bt=Lx(rr,Qn))*hb,bt&&(Nt=Qn*($t=Math.cos(bt))+rr*(Ot=Math.sin(bt)),on=Or*$t+_s*Ot,rr=rr*$t-Qn*Ot,_s=_s*$t-Or*Ot,Qn=Nt,Or=on),q&&Math.abs(q)+Math.abs(Y)>359.9&&(q=Y=0,J=180-J),G=ao(Math.sqrt(Qn*Qn+rr*rr+qr*qr)),H=ao(Math.sqrt(_s*_s+$i*$i)),bt=Lx(Or,_s),re=Math.abs(bt)>2e-4?bt*hb:0,be=$o?1/($o<0?-$o:$o):0),s.svg&&(Nt=t.getAttribute("transform"),s.forceCSS=t.setAttribute("transform","")||!g2(jg(t,da)),Nt&&t.setAttribute("transform",Nt))),Math.abs(re)>90&&Math.abs(re)<270&&(l?(G*=-1,re+=Y<=0?180:-180,Y+=Y<=0?180:-180):(H*=-1,re+=re<=0?180:-180)),s.x=E-((s.xPercent=E&&(s.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-E)?-50:0)))?t.offsetWidth*s.xPercent/100:0)+f,s.y=T-((s.yPercent=T&&(s.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-T)?-50:0)))?t.offsetHeight*s.yPercent/100:0)+f,s.z=F+f,s.scaleX=ao(G),s.scaleY=ao(H),s.rotation=ao(Y)+_,s.rotationX=ao(q)+_,s.rotationY=ao(J)+_,s.skewX=re+_,s.skewY=Me+_,s.transformPerspective=be+f,(s.zOrigin=parseFloat(w.split(" ")[2])||0)&&(o[uv]=GA(w)),s.xOffset=s.yOffset=0,s.force3D=Qc.force3D,s.renderTransform=s.svg?_8:a2?_2:m8,s.uncache=0,s},GA=function(t){return(t=t.split(" "))[0]+" "+t[1]},jR=function(t,e,s){var o=Jl(e);return ao(parseFloat(e)+parseFloat(hv(t,"x",s+"px",o)))+o},m8=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,_2(t,e)},pb="0deg",jD="0px",gb=") ",_2=function(t,e){var s=e||this,o=s.xPercent,l=s.yPercent,f=s.x,_=s.y,w=s.z,E=s.rotation,T=s.rotationY,F=s.rotationX,G=s.skewX,H=s.skewY,Y=s.scaleX,q=s.scaleY,J=s.transformPerspective,re=s.force3D,Me=s.target,be=s.zOrigin,He="",Ve="auto"===re&&t&&1!==t||!0===re;if(be&&(F!==pb||T!==pb)){var Ot,ot=parseFloat(T)*Fx,bt=Math.sin(ot),$t=Math.cos(ot);ot=parseFloat(F)*Fx,Ot=Math.cos(ot),f=jR(Me,f,bt*Ot*-be),_=jR(Me,_,-Math.sin(ot)*-be),w=jR(Me,w,$t*Ot*-be+be)}J!==jD&&(He+="perspective("+J+gb),(o||l)&&(He+="translate("+o+"%, "+l+"%) "),(Ve||f!==jD||_!==jD||w!==jD)&&(He+=w!==jD||Ve?"translate3d("+f+", "+_+", "+w+") ":"translate("+f+", "+_+gb),E!==pb&&(He+="rotate("+E+gb),T!==pb&&(He+="rotateY("+T+gb),F!==pb&&(He+="rotateX("+F+gb),(G!==pb||H!==pb)&&(He+="skew("+G+", "+H+gb),(1!==Y||1!==q)&&(He+="scale("+Y+", "+q+gb),Me.style[da]=He||"translate(0, 0)"},_8=function(t,e){var Ve,ot,bt,$t,Ot,s=e||this,o=s.xPercent,l=s.yPercent,f=s.x,_=s.y,w=s.rotation,E=s.skewX,T=s.skewY,F=s.scaleX,G=s.scaleY,H=s.target,Y=s.xOrigin,q=s.yOrigin,J=s.xOffset,re=s.yOffset,Me=s.forceCSS,be=parseFloat(f),He=parseFloat(_);w=parseFloat(w),E=parseFloat(E),(T=parseFloat(T))&&(E+=T=parseFloat(T),w+=T),w||E?(w*=Fx,E*=Fx,Ve=Math.cos(w)*F,ot=Math.sin(w)*F,bt=Math.sin(w-E)*-G,$t=Math.cos(w-E)*G,E&&(T*=Fx,Ot=Math.tan(E-T),bt*=Ot=Math.sqrt(1+Ot*Ot),$t*=Ot,T&&(Ot=Math.tan(T),Ve*=Ot=Math.sqrt(1+Ot*Ot),ot*=Ot)),Ve=ao(Ve),ot=ao(ot),bt=ao(bt),$t=ao($t)):(Ve=F,$t=G,ot=bt=0),(be&&!~(f+"").indexOf("px")||He&&!~(_+"").indexOf("px"))&&(be=hv(H,"x",f,"px"),He=hv(H,"y",_,"px")),(Y||q||J||re)&&(be=ao(be+Y-(Y*Ve+q*bt)+J),He=ao(He+q-(Y*ot+q*$t)+re)),(o||l)&&(Ot=H.getBBox(),be=ao(be+o/100*Ot.width),He=ao(He+l/100*Ot.height)),H.setAttribute("transform",Ot="matrix("+Ve+","+ot+","+bt+","+$t+","+be+","+He+")"),Me&&(H.style[da]=Ot)},v8=function(t,e,s,o,l,f){var G,H,_=360,w=jo(l),E=parseFloat(l)*(w&&~l.indexOf("rad")?hb:1),T=f?E*f:E-o,F=o+T+"deg";return w&&("short"===(G=l.split("_")[1])&&(T%=_)!=T%180&&(T+=T<0?_:-_),"cw"===G&&T<0?T=(T+_*t2)%_-~~(T/_)*_:"ccw"===G&&T>0&&(T=(T-_*t2)%_-~~(T/_)*_)),t._pt=H=new tc(t._pt,e,s,o,T,r8),H.e=F,H.u="deg",t._props.push(s),H},v2=function(t,e){for(var s in e)t[s]=e[s];return t},y8=function(t,e,s){var _,w,E,T,F,G,Y,o=v2({},s._gsap),f=s.style;for(w in o.svg?(E=s.getAttribute("transform"),s.setAttribute("transform",""),f[da]=e,_=zD(s,1),UD(s,da),s.setAttribute("transform",E)):(E=getComputedStyle(s)[da],f[da]=e,_=zD(s,1),f[da]=E),lv)(E=o[w])!==(T=_[w])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(w)<0&&(F=Jl(E)!==(Y=Jl(T))?hv(s,w,E,Y):parseFloat(E),G=parseFloat(T),t._pt=new tc(t._pt,_,w,F,G-F,r2),t._pt.u=Y||0,t._props.push(w));v2(_,o)};Xl("padding,margin,Width,Radius",function(i,t){var e="Top",s="Right",o="Bottom",l="Left",f=(t<3?[e,s,o,l]:[e+l,e+s,o+s,o+l]).map(function(_){return t<2?i+_:"border"+_+i});VA[t>1?"border"+i:i]=function(_,w,E,T,F){var G,H;if(arguments.length<4)return G=f.map(function(Y){return fb(_,Y,E)}),5===(H=G.join(" ")).split(G[0]).length?G[0]:H;G=(T+"").split(" "),H={},f.forEach(function(Y,q){return H[Y]=G[q]=G[q]||G[(q-1)/2|0]}),_.init(w,H,F)}});var y2={name:"css",register:GR,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,s,o,l){var E,T,F,G,H,Y,q,J,re,Me,be,He,Ve,ot,bt,f=this._props,_=t.style,w=s.vars.startAt;for(q in BR||GR(),e)if("autoRound"!==q&&(T=e[q],!Jc[q]||!YN(q,e,s,o,t,l)))if(Y=VA[q],"function"==(H=typeof T)&&(H=typeof(T=T.call(s,o,t,l))),"string"===H&&~T.indexOf("random(")&&(T=LD(T)),Y)Y(this,t,q,T,s)&&(bt=1);else if("--"===q.substr(0,2))E=(getComputedStyle(t).getPropertyValue(q)+"").trim(),T+="",sv.lastIndex=0,sv.test(E)||(J=Jl(E),re=Jl(T)),re?J!==re&&(E=hv(t,q,E,re)+re):J&&(T+=J),this.add(_,"setProperty",E,T,o,l,0,0,q),f.push(q);else if("undefined"!==H){if(w&&q in w?(E="function"==typeof w[q]?w[q].call(s,o,t,l):w[q],jo(E)&&~E.indexOf("random(")&&(E=LD(E)),Jl(E+"")||(E+=Qc.units[q]||Jl(fb(t,q))||""),"="===(E+"").charAt(1)&&(E=fb(t,q))):E=fb(t,q),G=parseFloat(E),(Me="string"===H&&"="===T.charAt(1)?+(T.charAt(0)+"1"):0)&&(T=T.substr(2)),F=parseFloat(T),q in cv&&("autoAlpha"===q&&(1===G&&"hidden"===fb(t,"visibility")&&F&&(G=0),dv(this,_,"visibility",G?"inherit":"hidden",F?"inherit":"hidden",!F)),"scale"!==q&&"transform"!==q&&~(q=cv[q]).indexOf(",")&&(q=q.split(",")[0])),be=q in lv)if(He||((Ve=t._gsap).renderTransform&&!e.parseTransform||zD(t,e.parseTransform),ot=!1!==e.smoothOrigin&&Ve.smooth,(He=this._pt=new tc(this._pt,_,da,0,1,Ve.renderTransform,Ve,0,-1)).dep=1),"scale"===q)this._pt=new tc(this._pt,Ve,"scaleY",Ve.scaleY,(Me?Me*F:F-Ve.scaleY)||0),f.push("scaleY",q),q+="X";else{if("transformOrigin"===q){T=p8(T),Ve.svg?zR(t,T,0,ot,0,this):((re=parseFloat(T.split(" ")[2])||0)!==Ve.zOrigin&&dv(this,Ve,"zOrigin",Ve.zOrigin,re),dv(this,_,q,GA(E),GA(T)));continue}if("svgOrigin"===q){zR(t,T,1,ot,0,this);continue}if(q in p2){v8(this,Ve,q,G,T,Me);continue}if("smoothOrigin"===q){dv(this,Ve,"smooth",Ve.smooth,T);continue}if("force3D"===q){Ve[q]=T;continue}if("transform"===q){y8(this,T,t);continue}}else q in _||(q=Nx(q)||q);if(be||(F||0===F)&&(G||0===G)&&!n8.test(T)&&q in _)F||(F=0),(J=(E+"").substr((G+"").length))!==(re=Jl(T)||(q in Qc.units?Qc.units[q]:J))&&(G=hv(t,q,E,re)),this._pt=new tc(this._pt,be?Ve:_,q,G,Me?Me*F:F-G,be||"px"!==re&&"zIndex"!==q||!1===e.autoRound?r2:o8),this._pt.u=re||0,J!==re&&"%"!==re&&(this._pt.b=E,this._pt.r=s8);else if(q in _)f8.call(this,t,q,E,T);else{if(!(q in t)){wR(q,T);continue}this.add(t,q,E||t[q],T,o,l)}f.push(q)}bt&&XN(this)},get:fb,aliases:cv,getSetter:function(t,e,s){var o=cv[e];return o&&o.indexOf(",")<0&&(e=o),e in lv&&e!==uv&&(t._gsap.x||fb(t,"x"))?s&&e2===s?"scale"===e?u8:c8:(e2=s||{})&&("scale"===e?d8:h8):t.style&&!mR(t.style[e])?a8:~e.indexOf("-")?l8:FR(t,e)},core:{_removeProperty:UD,_getMatrix:HR}};qf.utils.checkPrefix=Nx,function(i,t,e,s){var o=Xl(i+","+t+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(l){lv[l]=1});Xl(t,function(l){Qc.units[l]="deg",p2[l]=1}),cv[o[13]]=i+","+t,Xl("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(l){var f=l.split(":");cv[f[1]]=o[f[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),Xl("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){Qc.units[i]="px"}),qf.registerPlugin(y2);var WD=qf.registerPlugin(y2)||qf,b8=Z(8779),w8=Z.n(b8),x8=Z(5679),C8=Z.n(x8);class M8{constructor(){this.mobile=!1}animate(){let t=window.scrollModel;t.sketchPosition(),window.scrollAnimationId=window.requestAnimationFrame(t.animate)}sketchPosition(){var t;this.render(),this.attractMode?this.position+=.04*-(this.position-this.attractTo):(this.position-=this.speed,this.speed*=.8,this.position>this.reelElements.length-1+.4&&(this.position=this.reelElements.length-1+.4),this.position<-.4&&(this.position=-.4)),this.objs.forEach((o,l)=>{o.distance=Math.min(Math.abs(this.position-l),1),o.distance=1-Math.pow(o.distance,2),this.reelElements[l].style.transform=`scale(${1+.4*o.distance})`;let f=1+.2*o.distance;this.meshes[l].position.y=1.2*l-1.2*this.position,this.meshes[l].scale.set(f,f,f),this.meshes[l].material.uniforms.distanceFromCenter.value=o.distance});let s=Math.round(this.position)-this.position;!1===this.attractMode&&(this.position+=Math.sign(s)*Math.pow(Math.abs(s),.7)*.035),Math.round(this.position)!=this.oldPosition&&(this.oldPosition=Math.round(this.position),null===(t=this.positionUpdate)||void 0===t||t.next(this.oldPosition))}render(){this.renderer.render(this.scene,this.camera)}}const D8=["reelContainer"];function E8(i,t){if(1&i&&(u.TgZ(0,"div",4),u._UZ(1,"img",5),u.qZA()),2&i){const e=t.$implicit;u.xp6(1),u.s9C("src",e,u.LSH)}}let S8=(()=>{class i{constructor(){}get container(){return this.reelContainerRef.nativeElement}ngOnInit(){}ngAfterViewInit(){this.scrollModel=new M8,this.bootstrap(),this.setProperties(),this.setEventHandlers(),window.scrollModel=this.scrollModel,this.scrollModel.animate()}ngOnDestroy(){window.cancelAnimationFrame(window.scrollAnimationId)}setProperties(){this.scrollModel.attractMode=!1,this.scrollModel.attractTo=3,this.scrollModel.speed=0,this.oldIndex=0,this.reelDisplay={rotations:this.groups.map(e=>e.rotation),positions:this.groups.map(e=>e.position)},this.scrollModel.reelElements=document.querySelectorAll(".reel-provider"),this.scrollModel.position=this.scrollModel.reelElements.length-1,this.scrollModel.oldPosition=this.scrollModel.position,this.scrollModel.positionUpdate=this.position,this.scrollModel.objs=Array(this.scrollModel.reelElements.length).fill({distance:0}),this.scrollModel.objs=Array(this.scrollModel.reelElements.length).fill({distance:0}),this.switchScreen()}setEventHandlers(){this.position.subscribe(e=>{this.scrollModel.position=e}),this.canvas.addEventListener("wheel",e=>{this.scrollModel.speed+=3e-4*e.deltaY},{passive:!0}),this.touchPos=0,document.body.ontouchstart=e=>{this.touchPos=e.changedTouches[0].clientY},document.body.ontouchmove=e=>{this.scrollModel.speed+=3e-5*(e.changedTouches[0].clientY-this.touchPos)},window.addEventListener("resize",e=>{this.switchScreen(),this.resize()})}bootstrap(){this.scrollModel.scene=new Yr.Scene,this.scrollModel.width=this.container.offsetWidth,this.scrollModel.height=this.container.offsetHeight,this.scrollModel.renderer=new Yr.WebGLRenderer({antialias:!0,alpha:!0}),this.scrollModel.renderer.setPixelRatio(window.devicePixelRatio),this.scrollModel.renderer.setSize(this.scrollModel.width,this.scrollModel.height),this.scrollModel.renderer.physicallyCorrectLights=!0,this.scrollModel.renderer.outputEncoding=Yr.sRGBEncoding,this.canvas=this.scrollModel.renderer.domElement,this.container.appendChild(this.canvas),this.scrollModel.camera=new Yr.PerspectiveCamera(70,window.innerWidth/window.innerHeight,.001,1e3),this.scrollModel.camera.position.set(0,0,2),this.scrollModel.camera.aspect=this.scrollModel.width/this.scrollModel.height,this.addObjects(),this.resize(),this.groups=[],this.materials=[],this.scrollModel.meshes=[],this.handleImages()}handleImages(){for(let e=0;e<this.imageUrls.length;e++){let s=new Image;s.src=this.imageUrls[e];let o=this.material.clone();this.materials.push(o);let l=new Yr.Group;o.uniforms.texture1.value=new Yr.Texture(s),o.uniforms.texture1.value.needsUpdate=!0;let f=new Yr.PlaneBufferGeometry(1.5,1,20,20),_=new Yr.Mesh(f,o);l.add(_),this.groups.push(l),this.scrollModel.scene.add(l),this.scrollModel.meshes.push(_),_.position.x=.1,_.position.y=1.2*e,_.position.z=.5,l.rotation.x=-.3,l.rotation.y=-.4,l.rotation.z=-.1}}resize(){if(this.container.offsetWidth>0){this.scrollModel.width=this.container.offsetWidth,this.scrollModel.height=this.container.offsetHeight,this.scrollModel.renderer.setSize(this.scrollModel.width,this.scrollModel.height),this.scrollModel.camera.aspect=this.scrollModel.width/this.scrollModel.height;let s,o,e=853/1280;this.scrollModel.height/this.scrollModel.width>e?(s=this.scrollModel.width/this.scrollModel.height*e,o=.5):(s=1,o=this.scrollModel.height/this.scrollModel.width/e),this.material.uniforms.resolution.value.x=this.scrollModel.width,this.material.uniforms.resolution.value.y=this.scrollModel.height,this.material.uniforms.resolution.value.z=s,this.material.uniforms.resolution.value.w=o,this.scrollModel.camera.updateProjectionMatrix()}}addObjects(){this.material=new Yr.ShaderMaterial({extensions:{derivatives:!0},side:Yr.DoubleSide,uniforms:{time:{value:0},distanceFromCenter:{value:0},texture1:{value:null},resolution:{value:new Yr.Vector4},uvRate1:{value:new Yr.Vector2(1,1)}},transparent:!0,vertexShader:C8(),fragmentShader:w8()})}switchScreen(){window.innerWidth<1150?(WD.to(this.reelDisplay.rotations,{duration:.3,x:-.7,y:0,z:0}),WD.to(this.reelDisplay.positions,{duration:.3,x:-.1}),this.scrollModel.mobile=!0):this.scrollModel.mobile&&(WD.to(this.reelDisplay.rotations,{duration:.3,x:-.3,y:-.5,z:-.1}),WD.to(this.reelDisplay.positions,{duration:.3,x:0}),this.scrollModel.mobile=!1)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=u.Xpm({type:i,selectors:[["three-scroll"]],viewQuery:function(e,s){if(1&e&&u.Gf(D8,5),2&e){let o;u.iGM(o=u.CRH())&&(s.reelContainerRef=o.first)}},inputs:{imageUrls:"imageUrls",position:"position"},decls:4,vars:1,consts:[["id","reel-wrap",1,"scroll-container","d-none"],["class","reel-provider",4,"ngFor","ngForOf"],[1,"reel-container"],["reelContainer",""],[1,"reel-provider"],["alt","",1,"scroll-img",3,"src"]],template:function(e,s){1&e&&(u.TgZ(0,"div",0),u.YNc(1,E8,2,1,"div",1),u.qZA(),u._UZ(2,"div",2,3)),2&e&&(u.xp6(1),u.Q6J("ngForOf",s.imageUrls))},directives:[bs],styles:[".reel-container[_ngcontent-%COMP%]{height:calc(100vh - var(--header-height));max-height:calc(100vh - var(--header-height));width:50vw}@media only screen and (max-width: 1000px){.reel-container[_ngcontent-%COMP%]{width:100vw}}"]}),i})();function A8(i,t){if(1&i&&(u.TgZ(0,"mat-option",24),u.TgZ(1,"p"),u._uU(2),u.qZA(),u.qZA()),2&i){const e=t.$implicit;u.Q6J("value",e.title),u.xp6(2),u.Oqu(e.title)}}function T8(i,t){if(1&i&&(u.TgZ(0,"li",25),u.TgZ(1,"p",26),u._uU(2),u.qZA(),u.qZA()),2&i){const e=t.$implicit;u.xp6(2),u.Oqu(e)}}function I8(i,t){if(1&i){const e=u.EpF();u.TgZ(0,"section",1),u.TgZ(1,"div",2),u.TgZ(2,"div",3),u.TgZ(3,"ng-scrollbar",4),u.TgZ(4,"div",5),u.TgZ(5,"div",6),u.TgZ(6,"mat-form-field",7),u.TgZ(7,"mat-label"),u._uU(8),u.ALo(9,"translate"),u.qZA(),u.TgZ(10,"mat-select",8),u.NdJ("selectionChange",function(o){return u.CHM(e),u.oxw().switchProject(o.value)}),u.YNc(11,A8,3,2,"mat-option",9),u.qZA(),u.qZA(),u.TgZ(12,"div",10),u.TgZ(13,"mat-icon",11),u.NdJ("click",function(){return u.CHM(e),u.oxw().openGithubProject()}),u.qZA(),u.TgZ(14,"p",12),u._uU(15),u.ALo(16,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(17,"div",13),u._UZ(18,"p",14),u.qZA(),u.TgZ(19,"div",15),u.TgZ(20,"p",16),u._uU(21),u.ALo(22,"translate"),u.qZA(),u._UZ(23,"hr",17),u.TgZ(24,"ul",18),u.YNc(25,T8,3,1,"li",19),u.qZA(),u.qZA(),u.TgZ(26,"div",20),u._UZ(27,"div",21),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(28,"div",22),u._UZ(29,"three-scroll",23),u.qZA(),u.qZA()}if(2&i){const e=u.oxw();u.xp6(8),u.Oqu(u.lcZ(9,9,"signpost.projects")),u.xp6(2),u.Q6J("value",e.currentProject.title),u.xp6(1),u.Q6J("ngForOf",e.projects.slice().reverse()),u.xp6(4),u.hij(" ",u.lcZ(16,11,"signpost.checkGithub")," "),u.xp6(3),u.Q6J("innerHTML",null==e.currentProject?null:e.currentProject.content,u.oJD),u.xp6(3),u.Oqu(u.lcZ(22,13,"signpost.techStack")),u.xp6(4),u.Q6J("ngForOf",null==e.currentProject?null:e.currentProject.techStack),u.xp6(4),u.Q6J("imageUrls",e.projectImages)("position",e.projectIndex)}}const R8=[{path:"",component:e6,children:[{path:"",component:T6},{path:"projects",component:(()=>{class i{constructor(e,s,o){this.translationService=e,this.router=s,this.changeDectorRef=o}ngOnInit(){return(0,Q.mG)(this,void 0,void 0,function*(){yield this.initProjects(),this.projectIndex=new Hr(this.projects.length-1),this.projectIndex.subscribe(e=>{this.currentProject=this.projects[e],this.changeDectorRef.detectChanges()}),this.translationService.update.subscribe(e=>(0,Q.mG)(this,void 0,void 0,function*(){yield this.initProjects(),this.currentProject=this.projects[this.projectIndex.value]}))})}switchProject(e){this.projectIndex.next(this.projects.findIndex(s=>s.title==e))}openGithubProject(){window.open(this.currentProject.githubUrl,"_blank").focus()}initProjects(){return(0,Q.mG)(this,void 0,void 0,function*(){let e="./assets/images/projects",s=new Cx;s.title=yield this.translationService.get("projects.auth.title"),s.content=yield this.translationService.get("projects.auth.content"),s.imageUrl=`${e}/auth.png`,s.githubUrl="https://github.com/JeroenMBooij/JWT-SSO-Authentication",s.techStack=[".NET 5.0 Web Api","Swagger","MySQL","Docker"];let o=new Cx;o.title=yield this.translationService.get("projects.task.title"),o.content=yield this.translationService.get("projects.task.content"),o.imageUrl=`${e}/task.png`,o.githubUrl="https://github.com/JeroenMBooij/Real-Time-Task-Manager",o.techStack=["Angular","RXJS","Firebase","Material Theme","Karma & Jasmine","Protractor e2e"];let l=new Cx;l.title=yield this.translationService.get("projects.voice.title"),l.content=yield this.translationService.get("projects.voice.content"),l.imageUrl=`${e}/voice.png`,l.githubUrl="https://github.com/JeroenMBooij/Voice-Control-API-Manager",l.techStack=["Node-TS","MongoDB","Mongoose","Express","Swagger","Mocha","Chai.js","TSOA"];let f=new Cx;f.title=yield this.translationService.get("projects.email.title"),f.content=yield this.translationService.get("projects.email.content"),f.imageUrl=`${e}/email.png`,f.githubUrl="https://github.com/JeroenMBooij/Email-Service",f.techStack=[".NET 5.0","Mailkit","Swagger","Docker"];let _=new Cx;_.title=yield this.translationService.get("projects.deeplearning.title"),_.content=yield this.translationService.get("projects.deeplearning.content"),_.imageUrl=`${e}/deeplearning.png`,_.githubUrl="https://colab.research.google.com/drive/16-2RFIBQ-y21aDFI6yFODOpm-GVb44J_#scrollTo=M0v8NLhjnCjf",_.techStack=["Python","Pandas","Keras","OpenCV"];let w=new Cx;w.title=yield this.translationService.get("projects.didac.title"),w.content=yield this.translationService.get("projects.didac.content"),w.imageUrl=`${e}/didac.png`,w.githubUrl="https://github.com/JeroenMBooij/Smart-Learning",w.techStack=["Kubernetes",".NET 5.0","Angular","Django","RXJS","Firebase","Three.js","Monaco Editor","Hangfire (task scheduler)"],this.projects=[w,_,f,l,o,s],this.projectImages=this.projects.map(E=>E.imageUrl)})}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(fx),u.Y36(d),u.Y36(u.sBO))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-projects"]],decls:1,vars:1,consts:[["class","d-flex max-vw-100","aria-labelledby","projects-label",4,"ngIf"],["aria-labelledby","projects-label",1,"d-flex","max-vw-100"],[1,"my-container","pt-md-5","pr-4","pl-4"],[1,"mobile","w-100","pl-4","pr-4","m-0"],[1,"content-scroll-container"],[1,"mr-5"],[1,"d-flex","flex-wrap","justify-content-between","text-center"],["color","accent",1,"my-container","m-0","mt-5"],[3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-5"],["svgIcon","github",1,"my-icon-button",3,"click"],[1,"pt-4"],[1,"pt-4","pr-3","text-justify"],[3,"innerHTML"],[1,"w-100","pt-5"],[1,"font-weight-bold","text-center"],[1,"theme-contrast-background"],[1,"d-flex","flex-wrap","w-100","p-0"],["class","ml-5",4,"ngFor","ngForOf"],[1,"pt-4","pb-4"],[1,"w-100","thick-theme-border","theme-background"],["fxShow","true","fxHide.lt-md","true",1,"ml-auto","position-fixed",2,"right","0"],[3,"imageUrls","position"],[3,"value"],[1,"ml-5"],[1,"m-0"]],template:function(e,s){1&e&&u.YNc(0,I8,30,15,"section",0),2&e&&u.Q6J("ngIf",s.currentProject)},directives:[Kr,X6,Dj,lR,l5,bs,Ck,IL,XS,S8],pipes:[ES],styles:[".content-scroll-container[_ngcontent-%COMP%]{height:calc(100vh - var(--header-height) - 50px);max-height:calc(100vh - var(--header-height) - 50px);overflow:auto}.my-container[_ngcontent-%COMP%]{width:50%;z-index:1}@media only screen and (max-width: 1000px){.my-container[_ngcontent-%COMP%]{width:100%;margin-left:auto;margin-right:auto}.mobile[_ngcontent-%COMP%]{width:100vw!important}}"]}),i})()}]}];let P8=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[ht.forRoot(R8)],ht]}),i})();const b2=new Set;let Bx,O8=(()=>{class i{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):F8}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function k8(i){if(!b2.has(i))try{Bx||(Bx=document.createElement("style"),Bx.setAttribute("type","text/css"),document.head.appendChild(Bx)),Bx.sheet&&(Bx.sheet.insertRule(`@media ${i} {body{ }}`,0),b2.add(i))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(Is))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function F8(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let w2=(()=>{class i{constructor(e,s){this._mediaMatcher=e,this._zone=s,this._queries=new Map,this._destroySubject=new Ft.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return x2(PS(e)).some(o=>this._registerQuery(o).mql.matches)}observe(e){let l=DE(x2(PS(e)).map(f=>this._registerQuery(f).observable));return l=cu(l.pipe((0,Fi.q)(1)),l.pipe(yO(1),gx(0))),l.pipe((0,At.U)(f=>{const _={matches:!1,breakpoints:{}};return f.forEach(({matches:w,query:E})=>{_.matches=_.matches||w,_.breakpoints[E]=w}),_}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const s=this._mediaMatcher.matchMedia(e),l={observable:new Ai.y(f=>{const _=w=>this._zone.run(()=>f.next(w));return s.addListener(_),()=>{s.removeListener(_)}}).pipe(Ji(s),(0,At.U)(({matches:f})=>({query:e,matches:f})),Kn(this._destroySubject)),mql:s};return this._queries.set(e,l),l}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(O8),u.LFG(u.R0b))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function x2(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function N8(i,t){if(1&i){const e=u.EpF();u.TgZ(0,"div",2),u.TgZ(1,"button",3),u.NdJ("click",function(){return u.CHM(e),u.oxw().action()}),u._uU(2),u.qZA(),u.qZA()}if(2&i){const e=u.oxw();u.xp6(2),u.Oqu(e.data.action)}}function B8(i,t){}const WR=new u.OlP("MatSnackBarData");class UA{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const V8=Math.pow(2,31)-1;class HA{constructor(t,e){this._overlayRef=e,this._afterDismissed=new Ft.x,this._afterOpened=new Ft.x,this._onAction=new Ft.x,this._dismissedByAction=!1,this.containerInstance=t,this.onAction().subscribe(()=>this.dismiss()),t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,V8))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let G8=(()=>{class i{constructor(e,s){this.snackBarRef=e,this.data=s}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(HA),u.Y36(WR))},i.\u0275cmp=u.Xpm({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,s){1&e&&(u.TgZ(0,"span",0),u._uU(1),u.qZA(),u.YNc(2,N8,3,1,"div",1)),2&e&&(u.xp6(1),u.Oqu(s.data.message),u.xp6(1),u.Q6J("ngIf",s.hasAction))},directives:[WI,Kr],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),i})();const U8={snackBarState:vl("state",[ro("void, hidden",zn({transform:"scale(0.8)",opacity:0})),ro("visible",zn({transform:"scale(1)",opacity:1})),jr("* => visible",os("150ms cubic-bezier(0, 0, 0.2, 1)")),jr("* => void, * => hidden",os("75ms cubic-bezier(0.4, 0.0, 1, 1)",zn({opacity:0})))])};let H8=(()=>{class i extends CA{constructor(e,s,o,l,f){super(),this._ngZone=e,this._elementRef=s,this._changeDetectorRef=o,this._platform=l,this.snackBarConfig=f,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Ft.x,this._onExit=new Ft.x,this._onEnter=new Ft.x,this._animationState="void",this.attachDomPortal=_=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(_)),this._live="assertive"!==f.politeness||f.announcementMessage?"off"===f.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}onAnimationEnd(e){const{fromState:s,toState:o}=e;if(("void"===o&&"void"!==s||"hidden"===o)&&this._completeExit(),"visible"===o){const l=this._onEnter;this._ngZone.run(()=>{l.next(),l.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,Fi.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const e=this._elementRef.nativeElement,s=this.snackBarConfig.panelClass;s&&(Array.isArray(s)?s.forEach(o=>e.classList.add(o)):e.classList.add(s)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),s=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&s){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(o=document.activeElement),e.removeAttribute("aria-hidden"),s.appendChild(e),null==o||o.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.R0b),u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(Is),u.Y36(UA))},i.\u0275cmp=u.Xpm({type:i,selectors:[["snack-bar-container"]],viewQuery:function(e,s){if(1&e&&u.Gf(MA,7),2&e){let o;u.iGM(o=u.CRH())&&(s._portalOutlet=o.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(e,s){1&e&&u.WFA("@state.done",function(l){return s.onAnimationEnd(l)}),2&e&&u.d8E("@state",s._animationState)},features:[u.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,s){1&e&&(u.TgZ(0,"div",0),u.YNc(1,B8,0,0,"ng-template",1),u.qZA(),u._UZ(2,"div")),2&e&&(u.xp6(2),u.uIk("aria-live",s._live)("role",s._role))},directives:[MA],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[U8.snackBarState]}}),i})(),YR=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Dx,Mx,ws,xD,Li],Li]}),i})();const C2=new u.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function z8(){return new UA}});let j8=(()=>{class i{constructor(e,s,o,l,f,_){this._overlay=e,this._live=s,this._injector=o,this._breakpointObserver=l,this._parentSnackBar=f,this._defaultConfig=_,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,s){return this._attach(e,s)}openFromTemplate(e,s){return this._attach(e,s)}open(e,s="",o){const l=Object.assign(Object.assign({},this._defaultConfig),o);return l.data={message:e,action:s},l.announcementMessage===e&&(l.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,l)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,s){const l=u.zs3.create({parent:s&&s.viewContainerRef&&s.viewContainerRef.injector||this._injector,providers:[{provide:UA,useValue:s}]}),f=new AD(this.snackBarContainerComponent,s.viewContainerRef,l),_=e.attach(f);return _.instance.snackBarConfig=s,_.instance}_attach(e,s){const o=Object.assign(Object.assign(Object.assign({},new UA),this._defaultConfig),s),l=this._createOverlay(o),f=this._attachSnackBarContainer(l,o),_=new HA(f,l);if(e instanceof u.Rgc){const w=new xA(e,null,{$implicit:o.data,snackBarRef:_});_.instance=f.attachTemplatePortal(w)}else{const w=this._createInjector(o,_),E=new AD(e,void 0,w),T=f.attachComponentPortal(E);_.instance=T.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Kn(l.detachments())).subscribe(w=>{l.overlayElement.classList.toggle(this.handsetCssClass,w.matches)}),o.announcementMessage&&f._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(_,o),this._openedSnackBarRef=_,this._openedSnackBarRef}_animateSnackBar(e,s){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),s.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),s.duration&&s.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(s.duration))}_createOverlay(e){const s=new EA;s.direction=e.direction;let o=this._overlay.position().global();const l="rtl"===e.direction,f="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!l||"end"===e.horizontalPosition&&l,_=!f&&"center"!==e.horizontalPosition;return f?o.left("0"):_?o.right("0"):o.centerHorizontally(),"top"===e.verticalPosition?o.top("0"):o.bottom("0"),s.positionStrategy=o,this._overlay.create(s)}_createInjector(e,s){return u.zs3.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:HA,useValue:s},{provide:WR,useValue:e.data}]})}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(uh),u.LFG(H1),u.LFG(u.zs3),u.LFG(w2),u.LFG(i,12),u.LFG(C2))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),W8=(()=>{class i extends j8{constructor(e,s,o,l,f,_){super(e,s,o,l,f,_),this.simpleSnackBarComponent=G8,this.snackBarContainerComponent=H8,this.handsetCssClass="mat-snack-bar-handset"}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(uh),u.LFG(H1),u.LFG(u.zs3),u.LFG(w2),u.LFG(i,12),u.LFG(C2))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:YR}),i})(),Y8=(()=>{class i{constructor(e,s){this.snackBarRef=e,this.data=s}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(HA),u.Y36(WR))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-snack-bar"]],decls:2,vars:1,consts:[[1,"snackbar-container","text-center"],[3,"innerHTML"]],template:function(e,s){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"span",1),u.qZA()),2&e&&(u.xp6(1),u.Q6J("innerHTML",s.data,u.oJD))},styles:[""]}),i})();const fv=new Ai.y(N1.Z),$8={connector:()=>new Ft.x};function M2(i,t=$8){const{connector:e}=t;return(0,ci.e)((s,o)=>{const l=e();(0,Xi.D)(i(function q8(i){return new Ai.y(t=>i.subscribe(t))}(l))).subscribe(o),o.add(s.subscribe(l))})}function D2(i,t){return t?e=>cu(t.pipe((0,Fi.q)(1),function Q8(){return(0,ci.e)((i,t)=>{i.subscribe(new Ci.Q(t,N1.Z))})}()),e.pipe(D2(i))):(0,Ts.z)((e,s)=>i(e,s).pipe((0,Fi.q)(1),KI(e)))}const YD="Service workers are disabled or not supported by this browser";class zA{constructor(t){if(this.serviceWorker=t,t){const s=gs(t,"controllerchange").pipe((0,At.U)(()=>t.controller)),l=cu(rh(()=>it(t.controller)),s);this.worker=l.pipe(Jn(T=>!!T)),this.registration=this.worker.pipe(ki(()=>t.getRegistration()));const E=gs(t,"message").pipe((0,At.U)(T=>T.data)).pipe(Jn(T=>T&&T.type)).pipe(function K8(i){return i?t=>M2(i)(t):t=>function Z8(i,t){const e=(0,Ia.m)(i)?i:()=>i;return(0,Ia.m)(t)?M2(t,{connector:e}):s=>new EE(s,e)}(new Ft.x)(t)}());E.connect(),this.events=E}else this.worker=this.events=this.registration=function J8(i){return rh(()=>ML(new Error(i)))}(YD)}postMessage(t,e){return this.worker.pipe((0,Fi.q)(1),(0,_i.b)(s=>{s.postMessage(Object.assign({action:t},e))})).toPromise().then(()=>{})}postMessageWithOperation(t,e,s){const o=this.waitForOperationCompleted(s),l=this.postMessage(t,e);return Promise.all([l,o]).then(([,f])=>f)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(t){let e;return e="string"==typeof t?s=>s.type===t:s=>t.includes(s.type),this.events.pipe(Jn(e))}nextEventOfType(t){return this.eventsOfType(t).pipe((0,Fi.q)(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(Jn(e=>e.nonce===t),(0,Fi.q)(1),(0,At.U)(e=>{if(void 0!==e.result)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let eW=(()=>{class i{constructor(e){if(this.sw=e,this.subscriptionChanges=new Ft.x,!e.isEnabled)return this.messages=fv,this.notificationClicks=fv,void(this.subscription=fv);this.messages=this.sw.eventsOfType("PUSH").pipe((0,At.U)(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,At.U)(o=>o.data)),this.pushManager=this.sw.registration.pipe((0,At.U)(o=>o.pushManager));const s=this.pushManager.pipe(ki(o=>o.getSubscription()));this.subscription=(0,Hs.T)(s,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(e){if(!this.sw.isEnabled)return Promise.reject(new Error(YD));const s={userVisibleOnly:!0};let o=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),l=new Uint8Array(new ArrayBuffer(o.length));for(let f=0;f<o.length;f++)l[f]=o.charCodeAt(f);return s.applicationServerKey=l,this.pushManager.pipe(ki(f=>f.subscribe(s)),(0,Fi.q)(1)).toPromise().then(f=>(this.subscriptionChanges.next(f),f))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Fi.q)(1),ki(s=>{if(null===s)throw new Error("Not subscribed to push notifications.");return s.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(YD))}decodeBase64(e){return atob(e)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(zA))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),E2=(()=>{class i{constructor(e){if(this.sw=e,!e.isEnabled)return this.versionUpdates=fv,this.available=fv,this.activated=fv,void(this.unrecoverable=fv);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(Jn(s=>"VERSION_READY"===s.type),(0,At.U)(s=>({type:"UPDATE_AVAILABLE",current:s.currentVersion,available:s.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(YD));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(YD));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(zA))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class qR{}const S2=new u.OlP("NGSW_REGISTER_SCRIPT");function tW(i,t,e,s){return()=>{if(!Ki(s)||!("serviceWorker"in navigator)||!1===e.enabled)return;let l;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof e.registrationStrategy)l=e.registrationStrategy();else{const[_,...w]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(_){case"registerImmediately":l=it(null);break;case"registerWithDelay":l=A2(+w[0]||0);break;case"registerWhenStable":l=w[0]?(0,Hs.T)(T2(i),A2(+w[0])):T2(i);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}i.get(u.R0b).runOutsideAngular(()=>l.pipe((0,Fi.q)(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:e.scope}).catch(_=>console.error("Service worker registration failed with:",_))))}}function A2(i){return it(null).pipe(function X8(i,t=Sl.z){const e=qI(i,t);return D2(()=>e)}(i))}function T2(i){return i.get(u.z2F).isStable.pipe(Jn(e=>e))}function nW(i,t){return new zA(Ki(t)&&!1!==i.enabled?navigator.serviceWorker:void 0)}let iW=(()=>{class i{static register(e,s={}){return{ngModule:i,providers:[{provide:S2,useValue:e},{provide:qR,useValue:s},{provide:zA,useFactory:nW,deps:[qR,u.Lbi]},{provide:u.ip1,useFactory:tW,deps:[u.zs3,S2,qR,u.Lbi],multi:!0}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[eW,E2]}),i})(),rW=(()=>{class i{constructor(e,s,o,l,f,_){this.translationService=e,this.themeService=s,this.snackbar=o,this.updates=l,this.iconRegistry=f,this.sanitizer=_,this.update=!1,this.authenticated=!1,this.inProduction=true,this.bootstrapSwUpdates(),this.bootstrapIconRegistry()}ngOnInit(){return(0,Q.mG)(this,void 0,void 0,function*(){yield this.bootstrapNewUser()})}bootstrapNewUser(){return(0,Q.mG)(this,void 0,void 0,function*(){{const e=null==localStorage.getItem("visit"),s="dark-theme"==this.themeService.update.value;if(e&&s){localStorage.setItem("visit","true");let o=yield this.translationService.get("info.welcome");this.snackbar.openFromComponent(Y8,{data:`<p>${o}</p>`,verticalPosition:"top",duration:1e4,panelClass:["mat-toolbar","mat-accent"]})}window.addEventListener("beforeunload",o=>{localStorage.removeItem("visit")})}})}bootstrapSwUpdates(){this.updates.available.subscribe(e=>{this.update=!0,this.updates.activateUpdate().then(()=>document.location.reload())})}bootstrapIconRegistry(){this.iconRegistry.addSvgIcon("github",this.sanitizer.bypassSecurityTrustResourceUrl("assets/icons/github.svg")),this.iconRegistry.addSvgIcon("add-light",this.sanitizer.bypassSecurityTrustResourceUrl("assets/icons/add-light.svg")),this.iconRegistry.addSvgIcon("add-dark",this.sanitizer.bypassSecurityTrustResourceUrl("assets/icons/add-dark.svg")),this.iconRegistry.addSvgIcon("my-info",this.sanitizer.bypassSecurityTrustResourceUrl("assets/icons/info.svg"))}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(fx),u.Y36(TS),u.Y36(W8),u.Y36(E2),u.Y36(SD),u.Y36(Ls))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(e,s){1&e&&u._UZ(0,"router-outlet")},directives:[rx],styles:[""]}),i})(),N2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[vI]]}),i})(),B2=(()=>{class i{constructor(e,s){Qo(s)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,s=[]){return{ngModule:i,providers:e.serverLoaded?[{provide:lh,useValue:Object.assign(Object.assign({},yI),e)},{provide:bI,useValue:s,multi:!0},{provide:ib,useValue:!0}]:[{provide:lh,useValue:Object.assign(Object.assign({},yI),e)},{provide:bI,useValue:s,multi:!0}]}}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(ib),u.LFG(u.Lbi))},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[bL,Kk,N2],bL,Kk,N2]}),i})(),V2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Li],Li]}),i})();function DY(i,t){}class $R{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const EY={dialogContainer:vl("dialogContainer",[ro("void, exit",zn({opacity:0,transform:"scale(0.7)"})),ro("enter",zn({transform:"none"})),jr("* => enter",os("150ms cubic-bezier(0, 0, 0.2, 1)",zn({transform:"none",opacity:1}))),jr("* => void, * => exit",os("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",zn({opacity:0})))])};let SY=(()=>{class i extends CA{constructor(e,s,o,l,f,_,w,E){super(),this._elementRef=e,this._focusTrapFactory=s,this._changeDetectorRef=o,this._config=f,this._interactivityChecker=_,this._ngZone=w,this._focusMonitor=E,this._animationStateChanged=new u.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=T=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(T)),this._ariaLabelledBy=f.ariaLabelledBy||null,this._document=l}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,s){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{e.addEventListener("blur",()=>e.removeAttribute("tabindex")),e.addEventListener("mousedown",()=>e.removeAttribute("tabindex"))})),e.focus(s)}_focusByCssSelector(e,s){let o=this._elementRef.nativeElement.querySelector(e);o&&this._forceFocus(o,s)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(s=>{s||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const s=R1(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=R1())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,s=R1();return e===s||e.contains(s)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(EO),u.Y36(u.sBO),u.Y36(fe,8),u.Y36($R),u.Y36(V1),u.Y36(u.R0b),u.Y36(lD))},i.\u0275dir=u.lG2({type:i,viewQuery:function(e,s){if(1&e&&u.Gf(MA,7),2&e){let o;u.iGM(o=u.CRH())&&(s._portalOutlet=o.first)}},features:[u.qOj]}),i})(),AY=(()=>{class i extends SY{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:s}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:s})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:s}))}_onAnimationStart({toState:e,totalTime:s}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:s}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:s})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,s){1&e&&u.WFA("@dialogContainer.start",function(l){return s._onAnimationStart(l)})("@dialogContainer.done",function(l){return s._onAnimationDone(l)}),2&e&&(u.Ikx("id",s._id),u.uIk("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledBy)("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),u.d8E("@dialogContainer",s._state))},features:[u.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,s){1&e&&u.YNc(0,DY,0,0,"ng-template",0)},directives:[MA],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[EY.dialogContainer]}}),i})(),TY=0;class IY{constructor(t,e,s="mat-dialog-"+TY++){this._overlayRef=t,this._containerInstance=e,this.id=s,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Ft.x,this._afterClosed=new Ft.x,this._beforeClosed=new Ft.x,this._state=0,e._id=s,e._animationStateChanged.pipe(Jn(o=>"opened"===o.state),(0,Fi.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(Jn(o=>"closed"===o.state),(0,Fi.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(Jn(o=>27===o.keyCode&&!this.disableClose&&!K0(o))).subscribe(o=>{o.preventDefault(),G2(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():G2(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Jn(e=>"closing"===e.state),(0,Fi.q)(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function G2(i,t,e){return void 0!==i._containerInstance&&(i._containerInstance._closeInteractionType=t),i.close(e)}const RY=new u.OlP("MatDialogData"),PY=new u.OlP("mat-dialog-default-options"),U2=new u.OlP("mat-dialog-scroll-strategy"),kY={provide:U2,deps:[uh],useFactory:function OY(i){return()=>i.scrollStrategies.block()}};let FY=(()=>{class i{constructor(e,s,o,l,f,_,w,E,T,F){this._overlay=e,this._injector=s,this._defaultOptions=o,this._parentDialog=l,this._overlayContainer=f,this._dialogRefConstructor=w,this._dialogContainerType=E,this._dialogDataToken=T,this._animationMode=F,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ft.x,this._afterOpenedAtThisLevel=new Ft.x,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=rh(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ji(void 0))),this._scrollStrategy=_}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,s){if(s=function NY(i,t){return Object.assign(Object.assign({},t),i)}(s,this._defaultOptions||new $R),s.id&&this.getDialogById(s.id),this._dialogAnimatingOpen)return this._lastDialogRef;const o=this._createOverlay(s),l=this._attachDialogContainer(o,s);if("NoopAnimations"!==this._animationMode){const _=l._animationStateChanged.subscribe(w=>{"opening"===w.state&&(this._dialogAnimatingOpen=!0),"opened"===w.state&&(this._dialogAnimatingOpen=!1,_.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new zr.w0),this._animationStateSubscriptions.add(_)}const f=this._attachDialogContent(e,l,o,s);return this._lastDialogRef=f,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(f),f.afterClosed().subscribe(()=>this._removeOpenDialog(f)),this.afterOpened.next(f),l._initializeWithAttachedContent(),f}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(s=>s.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay(e){const s=this._getOverlayConfig(e);return this._overlay.create(s)}_getOverlayConfig(e){const s=new EA({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(s.backdropClass=e.backdropClass),s}_attachDialogContainer(e,s){const l=u.zs3.create({parent:s&&s.viewContainerRef&&s.viewContainerRef.injector||this._injector,providers:[{provide:$R,useValue:s}]}),f=new AD(this._dialogContainerType,s.viewContainerRef,l,s.componentFactoryResolver);return e.attach(f).instance}_attachDialogContent(e,s,o,l){const f=new this._dialogRefConstructor(o,s,l.id);if(e instanceof u.Rgc)s.attachTemplatePortal(new xA(e,null,{$implicit:l.data,dialogRef:f}));else{const _=this._createInjector(l,f,s),w=s.attachComponentPortal(new AD(e,l.viewContainerRef,_));f.componentInstance=w.instance}return f.updateSize(l.width,l.height).updatePosition(l.position),f}_createInjector(e,s,o){const l=e&&e.viewContainerRef&&e.viewContainerRef.injector,f=[{provide:this._dialogContainerType,useValue:o},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:s}];return e.direction&&(!l||!l.get(qc,null,u.XFs.Optional))&&f.push({provide:qc,useValue:{value:e.direction,change:it()}}),u.zs3.create({parent:l||this._injector,providers:f})}_removeOpenDialog(e){const s=this.openDialogs.indexOf(e);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,l)=>{o?l.setAttribute("aria-hidden",o):l.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const s=e.parentElement.children;for(let o=s.length-1;o>-1;o--){let l=s[o];l!==e&&"SCRIPT"!==l.nodeName&&"STYLE"!==l.nodeName&&!l.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(l,l.getAttribute("aria-hidden")),l.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let s=e.length;for(;s--;)e[s].close()}}return i.\u0275fac=function(e){u.$Z()},i.\u0275dir=u.lG2({type:i}),i})(),LY=(()=>{class i extends FY{constructor(e,s,o,l,f,_,w,E){super(e,s,l,_,w,f,IY,AY,RY,E)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(uh),u.LFG(u.zs3),u.LFG(We,8),u.LFG(PY,8),u.LFG(U2),u.LFG(i,12),u.LFG(dR),u.LFG(zf,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),H2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[LY,kY],imports:[[Dx,Mx,Li],Li]}),i})(),z2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[q0]]}),i})(),j2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[_k],imports:[[z2,TD,Li],z2,TD]}),i})(),XY=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[ZI]]}),i})(),t3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[XY,Li],Li]}),i})();const yq={provide:new u.OlP("mat-tooltip-scroll-strategy"),deps:[uh],useFactory:function vq(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}};let wq=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[yq],imports:[[RO,ws,Dx,Li],Li,Vg]}),i})(),sP=(()=>{class i{constructor(){this.changes=new Ft.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,s,o)=>{if(0==o||0==s)return`0 of ${o}`;const l=e*s;return`${l+1} \u2013 ${l<(o=Math.max(o,0))?Math.min(l+s,o):l+s} of ${o}`}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Eq={provide:sP,deps:[[new u.FiY,new u.tp0,sP]],useFactory:function Dq(i){return i||new sP}};let n3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[Eq],imports:[[ws,xD,fR,wq,Li]]}),i})(),Lq=(()=>{class i{constructor(){this.changes=new Ft.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,s){return`${e} \u2013 ${s}`}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Vq={provide:new u.OlP("mat-datepicker-scroll-strategy"),deps:[uh],useFactory:function Bq(i){return()=>i.scrollStrategies.reposition()}};let a3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[Lq,Vq],imports:[[ws,xD,Dx,RO,Mx,Li],Vg]}),i})(),jq=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})(),c3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[ws,Li,jq,Mx]]}),i})();const $q={provide:new u.OlP("mat-menu-scroll-strategy"),deps:[uh],useFactory:function qq(i){return()=>i.scrollStrategies.reposition()}};let d3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[$q],imports:[[ws,Li,KS,Dx],Vg,Li]}),i})();const Zq=[B2,RL,TD,V2,xD,H2,j2,fR,t3,n3,CL,a3,mk,YR,Ek,gL,c3,d3];let Kq=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Zq],B2,RL,TD,V2,xD,H2,j2,fR,t3,n3,CL,a3,mk,YR,Ek,gL,c3,d3]}),i})();function oP(i,t,e){for(let s in t)if(t.hasOwnProperty(s)){const o=t[s];o?i.setProperty(s,o,(null==e?void 0:e.has(s))?"important":""):i.removeProperty(s)}return i}function zx(i,t){const e=t?"":"none";oP(i.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function h3(i,t,e){oP(i.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function nT(i,t){return t&&"none"!=t?i+" "+t:i}function f3(i){const t=i.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(i)*t}function aP(i,t){return i.getPropertyValue(t).split(",").map(s=>s.trim())}function lP(i){const t=i.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function cP(i,t,e){const{top:s,bottom:o,left:l,right:f}=i;return e>=s&&e<=o&&t>=l&&t<=f}function ZD(i,t,e){i.top+=t,i.bottom=i.top+i.height,i.left+=e,i.right=i.left+i.width}function p3(i,t,e,s){const{top:o,right:l,bottom:f,left:_,width:w,height:E}=i,T=w*t,F=E*t;return s>o-F&&s<f+F&&e>_-T&&e<l+T}class g3{constructor(t,e){this._document=t,this._viewportRuler=e,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:lP(e)})})}handleScroll(t){const e=ah(t),s=this.positions.get(e);if(!s)return null;const o=s.scrollPosition;let l,f;if(e===this._document){const E=this._viewportRuler.getViewportScrollPosition();l=E.top,f=E.left}else l=e.scrollTop,f=e.scrollLeft;const _=o.top-l,w=o.left-f;return this.positions.forEach((E,T)=>{E.clientRect&&e!==T&&e.contains(T)&&ZD(E.clientRect,_,w)}),o.top=l,o.left=f,{top:_,left:w}}}function m3(i){const t=i.cloneNode(!0),e=t.querySelectorAll("[id]"),s=i.nodeName.toLowerCase();t.removeAttribute("id");for(let o=0;o<e.length;o++)e[o].removeAttribute("id");return"canvas"===s?y3(i,t):("input"===s||"select"===s||"textarea"===s)&&v3(i,t),_3("canvas",i,t,y3),_3("input, textarea, select",i,t,v3),t}function _3(i,t,e,s){const o=t.querySelectorAll(i);if(o.length){const l=e.querySelectorAll(i);for(let f=0;f<o.length;f++)s(o[f],l[f])}}let Jq=0;function v3(i,t){"file"!==t.type&&(t.value=i.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${Jq++}`)}function y3(i,t){const e=t.getContext("2d");if(e)try{e.drawImage(i,0,0)}catch(s){}}const b3=Lg({passive:!0}),w3=Lg({passive:!1}),uP=new Set(["position"]);class t9{constructor(t,e,s,o,l,f){this._config=e,this._document=s,this._ngZone=o,this._viewportRuler=l,this._dragDropRegistry=f,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new Ft.x,this._pointerMoveSubscription=zr.w0.EMPTY,this._pointerUpSubscription=zr.w0.EMPTY,this._scrollSubscription=zr.w0.EMPTY,this._resizeSubscription=zr.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new Ft.x,this.started=new Ft.x,this.released=new Ft.x,this.ended=new Ft.x,this.entered=new Ft.x,this.exited=new Ft.x,this.dropped=new Ft.x,this.moved=this._moveEvents,this._pointerDown=_=>{if(this.beforeStarted.next(),this._handles.length){const w=this._handles.find(E=>_.target&&(_.target===E||E.contains(_.target)));w&&!this._disabledHandles.has(w)&&!this.disabled&&this._initializeDragSequence(w,_)}else this.disabled||this._initializeDragSequence(this._rootElement,_)},this._pointerMove=_=>{const w=this._getPointerPositionOnPage(_);if(!this._hasStartedDragging){if(Math.abs(w.x-this._pickupPositionOnPage.x)+Math.abs(w.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const H=Date.now()>=this._dragStartTime+this._getDragStartDelay(_),Y=this._dropContainer;if(!H)return void this._endDragSequence(_);(!Y||!Y.isDragging()&&!Y.isReceiving())&&(_.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(_)))}return}this._boundaryElement&&(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),_.preventDefault();const E=this._getConstrainedPointerPosition(w);if(this._hasMoved=!0,this._lastKnownPointerPosition=w,this._updatePointerDirectionDelta(E),this._dropContainer)this._updateActiveDropContainer(E,w);else{const T=this._activeTransform;T.x=E.x-this._pickupPositionOnPage.x+this._passiveTransform.x,T.y=E.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(T.x,T.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:E,event:_,distance:this._getDragDistance(E),delta:this._pointerDirectionDelta})})},this._pointerUp=_=>{this._endDragSequence(_)},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new g3(s,l),f.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=ri(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(s=>zx(s,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(s=>oo(s)),this._handles.forEach(s=>zx(s,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(s=>{this._handles.indexOf(s)>-1&&e.add(s)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=oo(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,w3),e.addEventListener("touchstart",this._pointerDown,b3)}),this._initialTransform=void 0,this._rootElement=e),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?oo(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){var t,e;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(t=this._rootElement)||void 0===t||t.remove()),null===(e=this._anchor)||void 0===e||e.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),zx(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),zx(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var t,e;null===(t=this._preview)||void 0===t||t.remove(),null===(e=this._previewRef)||void 0===e||e.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var t,e;null===(t=this._placeholder)||void 0===t||t.remove(),null===(e=this._placeholderRef)||void 0===e||e.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){KD(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const s=this._rootElement,o=s.parentNode,l=this._placeholder=this._createPlaceholderElement(),f=this._anchor=this._anchor||this._document.createComment(""),_=this._getShadowRoot();o.insertBefore(f,s),this._initialTransform=s.style.transform||"",this._preview=this._createPreviewElement(),h3(s,!1,uP),this._document.body.appendChild(o.replaceChild(l,s)),this._getPreviewInsertionPoint(o,_).appendChild(this._preview),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const s=this.isDragging(),o=KD(e),l=!o&&0!==e.button,f=this._rootElement,_=ah(e),w=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),E=o?U1(e):G1(e);if(_&&_.draggable&&"mousedown"===e.type&&e.preventDefault(),s||l||w||E)return;if(this._handles.length){const G=f.style;this._rootElementTapHighlight=G.webkitTapHighlightColor||"",G.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(G=>this._updateOnScroll(G)),this._boundaryElement&&(this._boundaryRect=lP(this._boundaryElement));const T=this._previewTemplate;this._pickupPositionInElement=T&&T.template&&!T.matchSize?{x:0,y:0}:this._getPointerPositionInElement(t,e);const F=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:F.x,y:F.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){h3(this._rootElement,!0,uP),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,s=e.getItemIndex(this),o=this._getPointerPositionOnPage(t),l=this._getDragDistance(o),f=e._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:l,dropPoint:o}),this.dropped.next({item:this,currentIndex:s,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:f,distance:l,dropPoint:o}),e.drop(this,s,this._initialIndex,this._initialContainer,f,l,o),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:s,y:o}){let l=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!l&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(l=this._initialContainer),l&&l!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=l,this._dropContainer.enter(this,t,e,l===this._initialContainer&&l.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:l,currentIndex:l.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(s,o),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,s=t?t.template:null;let o;if(s&&t){const l=t.matchSize?this._rootElement.getBoundingClientRect():null,f=t.viewContainer.createEmbeddedView(s,t.context);f.detectChanges(),o=C3(f,this._document),this._previewRef=f,t.matchSize?M3(o,l):o.style.transform=iT(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const l=this._rootElement;o=m3(l),M3(o,l.getBoundingClientRect()),this._initialTransform&&(o.style.transform=this._initialTransform)}return oP(o.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},uP),zx(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(l=>o.classList.add(l)):o.classList.add(e)),o}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const e=function Xq(i){const t=getComputedStyle(i),e=aP(t,"transition-property"),s=e.find(_=>"transform"===_||"all"===_);if(!s)return 0;const o=e.indexOf(s),l=aP(t,"transition-duration"),f=aP(t,"transition-delay");return f3(l[o])+f3(f[o])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(s=>{const o=f=>{var _;(!f||ah(f)===this._preview&&"transform"===f.propertyName)&&(null===(_=this._preview)||void 0===_||_.removeEventListener("transitionend",o),s(),clearTimeout(l))},l=setTimeout(o,1.5*e);this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let s;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),s=C3(this._placeholderRef,this._document)):s=m3(this._rootElement),s.classList.add("cdk-drag-placeholder"),s}_getPointerPositionInElement(t,e){const s=this._rootElement.getBoundingClientRect(),o=t===this._rootElement?null:t,l=o?o.getBoundingClientRect():s,f=KD(e)?e.targetTouches[0]:e,_=this._getViewportScrollPosition();return{x:l.left-s.left+(f.pageX-l.left-_.left),y:l.top-s.top+(f.pageY-l.top-_.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),s=KD(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,o=s.pageX-e.left,l=s.pageY-e.top;if(this._ownerSVGElement){const f=this._ownerSVGElement.getScreenCTM();if(f){const _=this._ownerSVGElement.createSVGPoint();return _.x=o,_.y=l,_.matrixTransform(f.inverse())}}return{x:o,y:l}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:s,y:o}=this.constrainPosition?this.constrainPosition(t,this):t;if("x"===this.lockAxis||"x"===e?o=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(s=this._pickupPositionOnPage.x),this._boundaryRect){const{x:l,y:f}=this._pickupPositionInElement,_=this._boundaryRect,w=this._previewRect,E=_.top+f,T=_.bottom-(w.height-f);s=x3(s,_.left+l,_.right-(w.width-l)),o=x3(o,E,T)}return{x:s,y:o}}_updatePointerDirectionDelta(t){const{x:e,y:s}=t,o=this._pointerDirectionDelta,l=this._pointerPositionAtLastDirectionChange,f=Math.abs(e-l.x),_=Math.abs(s-l.y);return f>this._config.pointerDirectionChangeThreshold&&(o.x=e>l.x?1:-1,l.x=e),_>this._config.pointerDirectionChangeThreshold&&(o.y=s>l.y?1:-1,l.y=s),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,zx(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,w3),t.removeEventListener("touchstart",this._pointerDown,b3)}_applyRootElementTransform(t,e){const s=iT(t,e),o=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=o.transform&&"none"!=o.transform?o.transform:""),o.transform=nT(s,this._initialTransform)}_applyPreviewTransform(t,e){var s;const o=(null===(s=this._previewTemplate)||void 0===s?void 0:s.template)?void 0:this._initialTransform,l=iT(t,e);this._preview.style.transform=nT(l,o)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const s=this._boundaryElement.getBoundingClientRect(),o=this._rootElement.getBoundingClientRect();if(0===s.width&&0===s.height||0===o.width&&0===o.height)return;const l=s.left-o.left,f=o.right-s.right,_=s.top-o.top,w=o.bottom-s.bottom;s.width>o.width?(l>0&&(t+=l),f>0&&(t-=f)):t=0,s.height>o.height?(_>0&&(e+=_),w>0&&(e-=w)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:KD(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const s=ah(t);this._boundaryRect&&s!==this._boundaryElement&&s.contains(this._boundaryElement)&&ZD(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const t=this._parentPositions.positions.get(this._document);return t?t.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=I1(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const s=this._previewContainer||"global";if("parent"===s)return t;if("global"===s){const o=this._document;return e||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return oo(s)}}function iT(i,t){return`translate3d(${Math.round(i)}px, ${Math.round(t)}px, 0)`}function x3(i,t,e){return Math.max(t,Math.min(e,i))}function KD(i){return"t"===i.type[0]}function C3(i,t){const e=i.rootNodes;if(1===e.length&&e[0].nodeType===t.ELEMENT_NODE)return e[0];const s=t.createElement("div");return e.forEach(o=>s.appendChild(o)),s}function M3(i,t){i.style.width=`${t.width}px`,i.style.height=`${t.height}px`,i.style.transform=iT(t.left,t.top)}function QD(i,t){return Math.max(0,Math.min(t,i))}class r9{constructor(t,e,s,o,l){this._dragDropRegistry=e,this._ngZone=o,this._viewportRuler=l,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new Ft.x,this.entered=new Ft.x,this.exited=new Ft.x,this.dropped=new Ft.x,this.sorted=new Ft.x,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=zr.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new Ft.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function Qq(i=0,t=Sl.z){return i<0&&(i=0),qI(i,i,t)}(0,hA).pipe(Kn(this._stopScrollTimers)).subscribe(()=>{const f=this._scrollNode,_=this.autoScrollStep;1===this._verticalScrollDirection?f.scrollBy(0,-_):2===this._verticalScrollDirection&&f.scrollBy(0,_),1===this._horizontalScrollDirection?f.scrollBy(-_,0):2===this._horizontalScrollDirection&&f.scrollBy(_,0)})},this.element=oo(t),this._document=s,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new g3(s,l)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,s,o){let l;this._draggingStarted(),null==o?(l=this.sortingDisabled?this._draggables.indexOf(t):-1,-1===l&&(l=this._getItemIndexFromPointerPosition(t,e,s))):l=o;const f=this._activeDraggables,_=f.indexOf(t),w=t.getPlaceholderElement();let E=f[l];if(E===t&&(E=f[l+1]),!E&&(null==l||-1===l||l<f.length-1)&&this._shouldEnterAsFirstChild(e,s)&&(E=f[0]),_>-1&&f.splice(_,1),E&&!this._dragDropRegistry.isDragging(E)){const T=E.getRootElement();T.parentElement.insertBefore(w,T),f.splice(l,0,t)}else oo(this.element).appendChild(w),f.push(t);w.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,s,o,l,f,_){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:s,container:this,previousContainer:o,isPointerOverContainer:l,distance:f,dropPoint:_})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(s=>s._withDropContainer(this)),this.isDragging()&&(e.filter(o=>o.isDragging()).every(o=>-1===t.indexOf(o))?this._reset():this._cacheItems()),this}withDirection(t){return this._direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._orientation=t,this}withScrollableParents(t){const e=oo(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(s=>s.drag===t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,s,o){if(this.sortingDisabled||!this._clientRect||!p3(this._clientRect,.05,e,s))return;const l=this._itemPositions,f=this._getItemIndexFromPointerPosition(t,e,s,o);if(-1===f&&l.length>0)return;const _="horizontal"===this._orientation,w=l.findIndex(J=>J.drag===t),E=l[f],F=E.clientRect,G=w>f?1:-1,H=this._getItemOffsetPx(l[w].clientRect,F,G),Y=this._getSiblingOffsetPx(w,l,G),q=l.slice();(function n9(i,t,e){const s=QD(t,i.length-1),o=QD(e,i.length-1);if(s===o)return;const l=i[s],f=o<s?-1:1;for(let _=s;_!==o;_+=f)i[_]=i[_+f];i[o]=l})(l,w,f),this.sorted.next({previousIndex:w,currentIndex:f,container:this,item:t}),l.forEach((J,re)=>{if(q[re]===J)return;const Me=J.drag===t,be=Me?H:Y,He=Me?t.getPlaceholderElement():J.drag.getRootElement();J.offset+=be,_?(He.style.transform=nT(`translate3d(${Math.round(J.offset)}px, 0, 0)`,J.initialTransform),ZD(J.clientRect,0,be)):(He.style.transform=nT(`translate3d(0, ${Math.round(J.offset)}px, 0)`,J.initialTransform),ZD(J.clientRect,be,0))}),this._previousSwap.overlaps=cP(F,e,s),this._previousSwap.drag=E.drag,this._previousSwap.delta=_?o.x:o.y}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let s,o=0,l=0;if(this._parentPositions.positions.forEach((f,_)=>{_===this._document||!f.clientRect||s||p3(f.clientRect,.05,t,e)&&([o,l]=function s9(i,t,e,s){const o=S3(t,s),l=A3(t,e);let f=0,_=0;if(o){const w=i.scrollTop;1===o?w>0&&(f=1):i.scrollHeight-w>i.clientHeight&&(f=2)}if(l){const w=i.scrollLeft;1===l?w>0&&(_=1):i.scrollWidth-w>i.clientWidth&&(_=2)}return[f,_]}(_,f.clientRect,t,e),(o||l)&&(s=_))}),!o&&!l){const{width:f,height:_}=this._viewportRuler.getViewportSize(),w={width:f,height:_,top:0,right:f,bottom:_,left:0};o=S3(w,e),l=A3(w,t),s=window}s&&(o!==this._verticalScrollDirection||l!==this._horizontalScrollDirection||s!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=l,this._scrollNode=s,(o||l)&&s?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=oo(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=oo(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_cacheItemPositions(){const t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const s=e.getVisibleElement();return{drag:e,offset:0,initialTransform:s.style.transform||"",clientRect:lP(s)}}).sort((e,s)=>t?e.clientRect.left-s.clientRect.left:e.clientRect.top-s.clientRect.top)}_reset(){this._isDragging=!1;const t=oo(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>{var s;const o=e.getRootElement();if(o){const l=null===(s=this._itemPositions.find(f=>f.drag===e))||void 0===s?void 0:s.initialTransform;o.style.transform=l||""}}),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(t,e,s){const o="horizontal"===this._orientation,l=e[t].clientRect,f=e[t+-1*s];let _=l[o?"width":"height"]*s;if(f){const w=o?"left":"top",E=o?"right":"bottom";-1===s?_-=f.clientRect[w]-l[E]:_+=l[w]-f.clientRect[E]}return _}_getItemOffsetPx(t,e,s){const o="horizontal"===this._orientation;let l=o?e.left-t.left:e.top-t.top;return-1===s&&(l+=o?e.width-t.width:e.height-t.height),l}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const s=this._itemPositions,o="horizontal"===this._orientation;if(s[0].drag!==this._activeDraggables[0]){const f=s[s.length-1].clientRect;return o?t>=f.right:e>=f.bottom}{const f=s[0].clientRect;return o?t<=f.left:e<=f.top}}_getItemIndexFromPointerPosition(t,e,s,o){const l="horizontal"===this._orientation,f=this._itemPositions.findIndex(({drag:_,clientRect:w})=>{if(_===t)return!1;if(o){const E=l?o.x:o.y;if(_===this._previousSwap.drag&&this._previousSwap.overlaps&&E===this._previousSwap.delta)return!1}return l?e>=Math.floor(w.left)&&e<Math.floor(w.right):s>=Math.floor(w.top)&&s<Math.floor(w.bottom)});return-1!==f&&this.sortPredicate(f,t,this)?f:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(t,e){return null!=this._clientRect&&cP(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,s){return this._siblings.find(o=>o._canReceive(t,e,s))}_canReceive(t,e,s){if(!this._clientRect||!cP(this._clientRect,e,s)||!this.enterPredicate(t,this))return!1;const o=this._getShadowRoot().elementFromPoint(e,s);if(!o)return!1;const l=oo(this.element);return o===l||l.contains(o)}_startReceiving(t,e){const s=this._activeSiblings;!s.has(t)&&e.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(s.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&(this._itemPositions.forEach(({clientRect:s})=>{ZD(s,e.top,e.left)}),this._itemPositions.forEach(({drag:s})=>{this._dragDropRegistry.isDragging(s)&&s._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=I1(oo(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._activeDraggables.filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function S3(i,t){const{top:e,bottom:s,height:o}=i,l=.05*o;return t>=e-l&&t<=e+l?1:t>=s-l&&t<=s+l?2:0}function A3(i,t){const{left:e,right:s,width:o}=i,l=.05*o;return t>=e-l&&t<=e+l?1:t>=s-l&&t<=s+l?2:0}const rT=Lg({passive:!1,capture:!0});let o9=(()=>{class i{constructor(e,s){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new Ft.x,this.pointerUp=new Ft.x,this.scroll=new Ft.x,this._preventDefaultWhileDragging=o=>{this._activeDragInstances.length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=s}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,rT)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,rT)}startDragging(e,s){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const o=s.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:l=>this.pointerUp.next(l),options:!0}).set("scroll",{handler:l=>this.scroll.next(l),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:rT}),o||this._globalListeners.set("mousemove",{handler:l=>this.pointerMove.next(l),options:rT}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((l,f)=>{this._document.addEventListener(f,l.handler,l.options)})})}}stopDragging(e){const s=this._activeDragInstances.indexOf(e);s>-1&&(this._activeDragInstances.splice(s,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const s=[this.scroll];return e&&e!==this._document&&s.push(new Ai.y(o=>this._ngZone.runOutsideAngular(()=>{const f=_=>{this._activeDragInstances.length&&o.next(_)};return e.addEventListener("scroll",f,!0),()=>{e.removeEventListener("scroll",f,!0)}}))),(0,Hs.T)(...s)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,s)=>{this._document.removeEventListener(s,e.handler,e.options)}),this._globalListeners.clear()}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(u.R0b),u.LFG(fe))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const a9={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let l9=(()=>{class i{constructor(e,s,o,l){this._document=e,this._ngZone=s,this._viewportRuler=o,this._dragDropRegistry=l}createDrag(e,s=a9){return new t9(e,s,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new r9(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(fe),u.LFG(u.R0b),u.LFG(xx),u.LFG(o9))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),T3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[l9],imports:[Vg]}),i})();const c9=[fk,T3,jI,tL,iL];let u9=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[c9],fk,T3,jI,tL,iL]}),i})(),d9=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i,bootstrap:[rW]}),i.\u0275inj=u.cJS({providers:[],imports:[[Ha,P8,Qi.hO.initializeApp(dc_firebase),CE,K3,iW.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"}),dB,Q3.forRoot({loader:{provide:tD,useFactory:h9,deps:[AS]}}),J6,Kq,u9]]}),i})();function h9(i){return new oO(i,"/Portal/assets/i18n/")}(0,u.G48)(),xh().bootstrapModule(d9).catch(i=>console.error(i))},4312:ft=>{var Ze=Object.prototype.toString;ft.exports=function Z(u){return u.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===Ze.call(u.buffer)||Array.isArray(u)}},7728:ft=>{ft.exports=function(Z,u){return"number"==typeof Z?Z:"number"==typeof u?u:0}},1345:ft=>{var Te="function"==typeof Float32Array;function ze(ye,Ae){return 1-3*Ae+3*ye}function fe(ye,Ae){return 3*Ae-6*ye}function we(ye){return 3*ye}function ce(ye,Ae,at){return((ze(Ae,at)*ye+fe(Ae,at))*ye+we(Ae))*ye}function ue(ye,Ae,at){return 3*ze(Ae,at)*ye*ye+2*fe(Ae,at)*ye+we(Ae)}function Ge(ye){return ye}ft.exports=function(Ae,at,Le,mt){if(!(0<=Ae&&Ae<=1&&0<=Le&&Le<=1))throw new Error("bezier x values must be in [0, 1] range");if(Ae===at&&Le===mt)return Ge;for(var ut=Te?new Float32Array(11):new Array(11),wt=0;wt<11;++wt)ut[wt]=ce(.1*wt,Ae,Le);return function(qe){return 0===qe?0:1===qe?1:ce(function Et(We){for(var qe=0,Bt=1;10!==Bt&&ut[Bt]<=We;++Bt)qe+=.1;--Bt;var Fe=qe+(We-ut[Bt])/(ut[Bt+1]-ut[Bt])*.1,Xe=ue(Fe,Ae,Le);return Xe>=.001?function _e(ye,Ae,at,Le){for(var mt=0;mt<4;++mt){var ut=ue(Ae,at,Le);if(0===ut)return Ae;Ae-=(ce(Ae,at,Le)-ye)/ut}return Ae}(We,Fe,Ae,Le):0===Xe?Fe:function pe(ye,Ae,at,Le,mt){var ut,wt,Et=0;do{(ut=ce(wt=Ae+(at-Ae)/2,Le,mt)-ye)>0?at=wt:Ae=wt}while(Math.abs(ut)>1e-7&&++Et<10);return wt}(We,qe,qe+.1,Ae,Le)}(qe),at,mt)}}},1186:ft=>{ft.exports=function(Ze){switch(Ze){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},5867:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{Z:()=>u.Z});var u=Z(8367);u.Z.registerVersion("firebase","8.10.0","app"),u.Z.SDK_VERSION="8.10.0"},3894:ft=>{ft.exports="function"==typeof Object.create?function(Z,u){u&&(Z.super_=u,Z.prototype=Object.create(u.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}))}:function(Z,u){if(u){Z.super_=u;var me=function(){};me.prototype=u.prototype,Z.prototype=new me,Z.prototype.constructor=Z}}},9964:ft=>{function Ze(u){return!!u.constructor&&"function"==typeof u.constructor.isBuffer&&u.constructor.isBuffer(u)}ft.exports=function(u){return null!=u&&(Ze(u)||function Z(u){return"function"==typeof u.readFloatLE&&"function"==typeof u.slice&&Ze(u.slice(0,0))}(u)||!!u._isBuffer)}},25:(ft,Ze,Z)=>{var u=Z(6535),me=Z(4703),Ee=Z(7728),ve=["x","e","a","o","n","s","r","c","u","m","v","w","z"],Te=["m","w"],ze=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],fe="\t".charCodeAt(0),we=" ".charCodeAt(0);function _e(We){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(We)}function ye(We){return new Function(["return function "+We+"() {","  return this._"+We,"}"].join("\n"))()}function Ae(We,qe){if(!We.chars||0===We.chars.length)return null;var Bt=Et(We.chars,qe);return Bt>=0?We.chars[Bt]:null}function ut(We,qe,Bt){if(!We.kernings||0===We.kernings.length)return 0;for(var Rt=We.kernings,Un=0;Un<Rt.length;Un++){var Fe=Rt[Un];if(Fe.first===qe&&Fe.second===Bt)return Fe.amount}return 0}function Et(We,qe,Bt){for(var Rt=Bt=Bt||0;Rt<We.length;Rt++)if(We[Rt].id===qe)return Rt;return-1}ft.exports=function(qe){return new _e(qe)},_e.prototype.update=function(We){if(We=me({measure:this._measure},We),this._opt=We,this._opt.tabSize=Ee(this._opt.tabSize,4),!We.font)throw new Error("must provide a valid bitmap font");var qe=this.glyphs,Bt=We.text||"",Rt=We.font;this._setupSpaceGlyphs(Rt);var Un=u.lines(Bt,We),Fe=We.width||0;qe.length=0;var Xe=Un.reduce(function(tn,St){return Math.max(tn,St.width,Fe)},0),tt=0,Je=0,gt=Ee(We.lineHeight,Rt.common.lineHeight),Se=Rt.common.base,kt=gt-Se,Vt=We.letterSpacing||0,An=gt*Un.length-kt,Kt=function wt(We){return"center"===We?1:"right"===We?2:0}(this._opt.align);Je-=An,this._width=Xe,this._height=An,this._descender=gt-Se,this._baseline=Se,this._xHeight=function at(We){for(var qe=0;qe<ve.length;qe++){var Bt=ve[qe].charCodeAt(0),Rt=Et(We.chars,Bt);if(Rt>=0)return We.chars[Rt].height}return 0}(Rt),this._capHeight=function mt(We){for(var qe=0;qe<ze.length;qe++){var Bt=ze[qe].charCodeAt(0),Rt=Et(We.chars,Bt);if(Rt>=0)return We.chars[Rt].height}return 0}(Rt),this._lineHeight=gt,this._ascender=gt-kt-this._xHeight;var cn=this;Un.forEach(function(tn,St){for(var mr,pn=tn.end,sr=tn.width,Ni=tn.start;Ni<pn;Ni++){var Zo=Bt.charCodeAt(Ni),Fa=cn.getGlyph(Rt,Zo);if(Fa){mr&&(tt+=ut(Rt,mr.id,Fa.id));var nc=tt;1===Kt?nc+=(Xe-sr)/2:2===Kt&&(nc+=Xe-sr),qe.push({position:[nc,Je],data:Fa,index:Ni,line:St}),tt+=Fa.xadvance+Vt,mr=Fa}}Je+=gt,tt=0}),this._linesTotal=Un.length},_e.prototype._setupSpaceGlyphs=function(We){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,We.chars&&0!==We.chars.length){var qe=Ae(We,we)||function Le(We){for(var qe=0;qe<Te.length;qe++){var Bt=Te[qe].charCodeAt(0),Rt=Et(We.chars,Bt);if(Rt>=0)return We.chars[Rt]}return 0}(We)||We.chars[0],Bt=this._opt.tabSize*qe.xadvance;this._fallbackSpaceGlyph=qe,this._fallbackTabGlyph=me(qe,{x:0,y:0,xadvance:Bt,id:fe,xoffset:0,yoffset:0,width:0,height:0})}},_e.prototype.getGlyph=function(We,qe){return Ae(We,qe)||(qe===fe?this._fallbackTabGlyph:qe===we?this._fallbackSpaceGlyph:null)},_e.prototype.computeMetrics=function(We,qe,Bt,Rt){var Se,Un=this._opt.letterSpacing||0,Fe=this._opt.font,Xe=0,tt=0,Je=0;if(!Fe.chars||0===Fe.chars.length)return{start:qe,end:qe,width:0};Bt=Math.min(We.length,Bt);for(var kt=qe;kt<Bt;kt++){var gt,Vt=We.charCodeAt(kt);if(gt=this.getGlyph(Fe,Vt)){var cn=(Xe+=Se?ut(Fe,Se.id,gt.id):0)+gt.xadvance+Un,tn=Xe+gt.width;if(tn>=Rt||cn>=Rt)break;Xe=cn,tt=tn,Se=gt}Je++}return Se&&(tt+=Se.xoffset),{start:qe,end:qe+Je,width:tt}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(function Ge(We){Object.defineProperty(_e.prototype,We,{get:ye(We),configurable:!0})})},9905:(ft,Ze,Z)=>{var u=Z(1186),me=Z(4312),Ee=Z(9964),ve=[0,2,3],Te=[2,1,3];ft.exports=function(fe,we){(!fe||!me(fe)&&!Ee(fe))&&(we=fe||{},fe=null);for(var pe=(we="number"==typeof we?{count:we}:we||{}).start||0,_e=!1!==we.clockwise?ve:Te,Ge=_e[0],ye=_e[1],Ae=_e[2],at=6*("number"==typeof we.count?we.count:1),Le=fe||new(u("string"==typeof we.type?we.type:"uint16"))(at),mt=0,ut=0;mt<at;mt+=6,ut+=4){var wt=mt+pe;Le[wt+0]=ut+0,Le[wt+1]=ut+1,Le[wt+2]=ut+2,Le[wt+3]=ut+Ge,Le[wt+4]=ut+ye,Le[wt+5]=ut+Ae}return Le}},8306:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{y:()=>ue});var u=Z(930),me=Z(727),Ee=Z(8822),ve=Z(4671);var fe=Z(2416),we=Z(576),ce=Z(2806);let ue=(()=>{class ye{constructor(at){at&&(this._subscribe=at)}lift(at){const Le=new ye;return Le.source=this,Le.operator=at,Le}subscribe(at,Le,mt){const ut=function Ge(ye){return ye&&ye instanceof u.Lv||function _e(ye){return ye&&(0,we.m)(ye.next)&&(0,we.m)(ye.error)&&(0,we.m)(ye.complete)}(ye)&&(0,me.Nn)(ye)}(at)?at:new u.Hp(at,Le,mt);return(0,ce.x)(()=>{const{operator:wt,source:Et}=this;ut.add(wt?wt.call(ut,Et):Et?this._subscribe(ut):this._trySubscribe(ut))}),ut}_trySubscribe(at){try{return this._subscribe(at)}catch(Le){at.error(Le)}}forEach(at,Le){return new(Le=pe(Le))((mt,ut)=>{const wt=new u.Hp({next:Et=>{try{at(Et)}catch(We){ut(We),wt.unsubscribe()}},error:ut,complete:mt});this.subscribe(wt)})}_subscribe(at){var Le;return null===(Le=this.source)||void 0===Le?void 0:Le.subscribe(at)}[Ee.L](){return this}pipe(...at){return function ze(ye){return 0===ye.length?ve.y:1===ye.length?ye[0]:function(at){return ye.reduce((Le,mt)=>mt(Le),at)}}(at)(this)}toPromise(at){return new(at=pe(at))((Le,mt)=>{let ut;this.subscribe(wt=>ut=wt,wt=>mt(wt),()=>Le(ut))})}}return ye.create=Ae=>new ye(Ae),ye})();function pe(ye){var Ae;return null!==(Ae=null!=ye?ye:fe.v.Promise)&&void 0!==Ae?Ae:Promise}},7579:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{x:()=>fe});var u=Z(8306),me=Z(727);const ve=(0,Z(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Te=Z(8737),ze=Z(2806);let fe=(()=>{class ce extends u.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(pe){const _e=new we(this,this);return _e.operator=pe,_e}_throwIfClosed(){if(this.closed)throw new ve}next(pe){(0,ze.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const _e=this.observers.slice();for(const Ge of _e)Ge.next(pe)}})}error(pe){(0,ze.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=pe;const{observers:_e}=this;for(;_e.length;)_e.shift().error(pe)}})}complete(){(0,ze.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:pe}=this;for(;pe.length;)pe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var pe;return(null===(pe=this.observers)||void 0===pe?void 0:pe.length)>0}_trySubscribe(pe){return this._throwIfClosed(),super._trySubscribe(pe)}_subscribe(pe){return this._throwIfClosed(),this._checkFinalizedStatuses(pe),this._innerSubscribe(pe)}_innerSubscribe(pe){const{hasError:_e,isStopped:Ge,observers:ye}=this;return _e||Ge?me.Lc:(ye.push(pe),new me.w0(()=>(0,Te.P)(ye,pe)))}_checkFinalizedStatuses(pe){const{hasError:_e,thrownError:Ge,isStopped:ye}=this;_e?pe.error(Ge):ye&&pe.complete()}asObservable(){const pe=new u.y;return pe.source=this,pe}}return ce.create=(ue,pe)=>new we(ue,pe),ce})();class we extends fe{constructor(ue,pe){super(),this.destination=ue,this.source=pe}next(ue){var pe,_e;null===(_e=null===(pe=this.destination)||void 0===pe?void 0:pe.next)||void 0===_e||_e.call(pe,ue)}error(ue){var pe,_e;null===(_e=null===(pe=this.destination)||void 0===pe?void 0:pe.error)||void 0===_e||_e.call(pe,ue)}complete(){var ue,pe;null===(pe=null===(ue=this.destination)||void 0===ue?void 0:ue.complete)||void 0===pe||pe.call(ue)}_subscribe(ue){var pe,_e;return null!==(_e=null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(ue))&&void 0!==_e?_e:me.Lc}}},930:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{Hp:()=>Ge,Lv:()=>_e});var u=Z(576),me=Z(727),Ee=Z(2416),ve=Z(7849),Te=Z(5032);const ze=ce("C",void 0,void 0);function ce(mt,ut,wt){return{kind:mt,value:ut,error:wt}}var ue=Z(3410),pe=Z(2806);class _e extends me.w0{constructor(ut){super(),this.isStopped=!1,ut?(this.destination=ut,(0,me.Nn)(ut)&&ut.add(this)):this.destination=Le}static create(ut,wt,Et){return new Ge(ut,wt,Et)}next(ut){this.isStopped?at(function we(mt){return ce("N",mt,void 0)}(ut),this):this._next(ut)}error(ut){this.isStopped?at(function fe(mt){return ce("E",void 0,mt)}(ut),this):(this.isStopped=!0,this._error(ut))}complete(){this.isStopped?at(ze,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ut){this.destination.next(ut)}_error(ut){try{this.destination.error(ut)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Ge extends _e{constructor(ut,wt,Et){let We;if(super(),(0,u.m)(ut))We=ut;else if(ut){let qe;({next:We,error:wt,complete:Et}=ut),this&&Ee.v.useDeprecatedNextContext?(qe=Object.create(ut),qe.unsubscribe=()=>this.unsubscribe()):qe=ut,We=null==We?void 0:We.bind(qe),wt=null==wt?void 0:wt.bind(qe),Et=null==Et?void 0:Et.bind(qe)}this.destination={next:We?ye(We):Te.Z,error:ye(null!=wt?wt:Ae),complete:Et?ye(Et):Te.Z}}}function ye(mt,ut){return(...wt)=>{try{mt(...wt)}catch(Et){Ee.v.useDeprecatedSynchronousErrorHandling?(0,pe.O)(Et):(0,ve.h)(Et)}}}function Ae(mt){throw mt}function at(mt,ut){const{onStoppedNotification:wt}=Ee.v;wt&&ue.z.setTimeout(()=>wt(mt,ut))}const Le={closed:!0,next:Te.Z,error:Ae,complete:Te.Z}},727:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{Lc:()=>ze,w0:()=>Te,Nn:()=>fe});var u=Z(576);const Ee=(0,Z(3888).d)(ce=>function(pe){ce(this),this.message=pe?`${pe.length} errors occurred during unsubscription:\n${pe.map((_e,Ge)=>`${Ge+1}) ${_e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=pe});var ve=Z(8737);class Te{constructor(ue){this.initialTeardown=ue,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let ue;if(!this.closed){this.closed=!0;const{_parentage:pe}=this;if(pe)if(this._parentage=null,Array.isArray(pe))for(const ye of pe)ye.remove(this);else pe.remove(this);const{initialTeardown:_e}=this;if((0,u.m)(_e))try{_e()}catch(ye){ue=ye instanceof Ee?ye.errors:[ye]}const{_teardowns:Ge}=this;if(Ge){this._teardowns=null;for(const ye of Ge)try{we(ye)}catch(Ae){ue=null!=ue?ue:[],Ae instanceof Ee?ue=[...ue,...Ae.errors]:ue.push(Ae)}}if(ue)throw new Ee(ue)}}add(ue){var pe;if(ue&&ue!==this)if(this.closed)we(ue);else{if(ue instanceof Te){if(ue.closed||ue._hasParent(this))return;ue._addParent(this)}(this._teardowns=null!==(pe=this._teardowns)&&void 0!==pe?pe:[]).push(ue)}}_hasParent(ue){const{_parentage:pe}=this;return pe===ue||Array.isArray(pe)&&pe.includes(ue)}_addParent(ue){const{_parentage:pe}=this;this._parentage=Array.isArray(pe)?(pe.push(ue),pe):pe?[pe,ue]:ue}_removeParent(ue){const{_parentage:pe}=this;pe===ue?this._parentage=null:Array.isArray(pe)&&(0,ve.P)(pe,ue)}remove(ue){const{_teardowns:pe}=this;pe&&(0,ve.P)(pe,ue),ue instanceof Te&&ue._removeParent(this)}}Te.EMPTY=(()=>{const ce=new Te;return ce.closed=!0,ce})();const ze=Te.EMPTY;function fe(ce){return ce instanceof Te||ce&&"closed"in ce&&(0,u.m)(ce.remove)&&(0,u.m)(ce.add)&&(0,u.m)(ce.unsubscribe)}function we(ce){(0,u.m)(ce)?ce():ce.unsubscribe()}},2416:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{E:()=>me});const me=new(Z(8306).y)(Te=>Te.complete())},8996:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{D:()=>We});var u=Z(8421),me=Z(5363),Ee=Z(9468),ze=Z(8306),we=Z(2202),ce=Z(576),ue=Z(9672);function _e(qe,Bt){if(!qe)throw new Error("Iterable cannot be null");return new ze.y(Rt=>{(0,ue.f)(Rt,Bt,()=>{const Un=qe[Symbol.asyncIterator]();(0,ue.f)(Rt,Bt,()=>{Un.next().then(Fe=>{Fe.done?Rt.complete():Rt.next(Fe.value)})},0,!0)})})}var Ge=Z(3670),ye=Z(8239),Ae=Z(1144),at=Z(6495),Le=Z(2206),mt=Z(4532),ut=Z(3260);function We(qe,Bt){return Bt?function Et(qe,Bt){if(null!=qe){if((0,Ge.c)(qe))return function ve(qe,Bt){return(0,u.Xf)(qe).pipe((0,Ee.R)(Bt),(0,me.Q)(Bt))}(qe,Bt);if((0,Ae.z)(qe))return function fe(qe,Bt){return new ze.y(Rt=>{let Un=0;return Bt.schedule(function(){Un===qe.length?Rt.complete():(Rt.next(qe[Un++]),Rt.closed||this.schedule())})})}(qe,Bt);if((0,ye.t)(qe))return function Te(qe,Bt){return(0,u.Xf)(qe).pipe((0,Ee.R)(Bt),(0,me.Q)(Bt))}(qe,Bt);if((0,Le.D)(qe))return _e(qe,Bt);if((0,at.T)(qe))return function pe(qe,Bt){return new ze.y(Rt=>{let Un;return(0,ue.f)(Rt,Bt,()=>{Un=qe[we.h](),(0,ue.f)(Rt,Bt,()=>{let Fe,Xe;try{({value:Fe,done:Xe}=Un.next())}catch(tt){return void Rt.error(tt)}Xe?Rt.complete():Rt.next(Fe)},0,!0)}),()=>(0,ce.m)(null==Un?void 0:Un.return)&&Un.return()})}(qe,Bt);if((0,ut.L)(qe))return function wt(qe,Bt){return _e((0,ut.Q)(qe),Bt)}(qe,Bt)}throw(0,mt.z)(qe)}(qe,Bt):(0,u.Xf)(qe)}},8421:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{Xf:()=>Ge});var u=Z(655),me=Z(1144),Ee=Z(8239),ve=Z(8306),Te=Z(3670),ze=Z(2206),fe=Z(4532),we=Z(6495),ce=Z(3260),ue=Z(576),pe=Z(7849),_e=Z(8822);function Ge(Et){if(Et instanceof ve.y)return Et;if(null!=Et){if((0,Te.c)(Et))return function ye(Et){return new ve.y(We=>{const qe=Et[_e.L]();if((0,ue.m)(qe.subscribe))return qe.subscribe(We);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Et);if((0,me.z)(Et))return function Ae(Et){return new ve.y(We=>{for(let qe=0;qe<Et.length&&!We.closed;qe++)We.next(Et[qe]);We.complete()})}(Et);if((0,Ee.t)(Et))return function at(Et){return new ve.y(We=>{Et.then(qe=>{We.closed||(We.next(qe),We.complete())},qe=>We.error(qe)).then(null,pe.h)})}(Et);if((0,ze.D)(Et))return mt(Et);if((0,we.T)(Et))return function Le(Et){return new ve.y(We=>{for(const qe of Et)if(We.next(qe),We.closed)return;We.complete()})}(Et);if((0,ce.L)(Et))return function ut(Et){return mt((0,ce.Q)(Et))}(Et)}throw(0,fe.z)(Et)}function mt(Et){return new ve.y(We=>{(function wt(Et,We){var qe,Bt,Rt,Un;return(0,u.mG)(this,void 0,void 0,function*(){try{for(qe=(0,u.KL)(Et);!(Bt=yield qe.next()).done;)if(We.next(Bt.value),We.closed)return}catch(Fe){Rt={error:Fe}}finally{try{Bt&&!Bt.done&&(Un=qe.return)&&(yield Un.call(qe))}finally{if(Rt)throw Rt.error}}We.complete()})})(Et,We).catch(qe=>We.error(qe))})}},6451:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{T:()=>ze});var u=Z(8189),me=Z(8421),Ee=Z(515),ve=Z(3269),Te=Z(8996);function ze(...fe){const we=(0,ve.yG)(fe),ce=(0,ve._6)(fe,1/0),ue=fe;return ue.length?1===ue.length?(0,me.Xf)(ue[0]):(0,u.J)(ce)((0,Te.D)(ue,we)):Ee.E}},5403:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{Q:()=>me});var u=Z(930);class me extends u.Lv{constructor(ve,Te,ze,fe,we){super(ve),this.onFinalize=we,this._next=Te?function(ce){try{Te(ce)}catch(ue){ve.error(ue)}}:super._next,this._error=fe?function(ce){try{fe(ce)}catch(ue){ve.error(ue)}finally{this.unsubscribe()}}:super._error,this._complete=ze?function(){try{ze()}catch(ce){ve.error(ce)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ve;const{closed:Te}=this;super.unsubscribe(),!Te&&(null===(ve=this.onFinalize)||void 0===ve||ve.call(this))}}},4004:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{U:()=>Ee});var u=Z(4482),me=Z(5403);function Ee(ve,Te){return(0,u.e)((ze,fe)=>{let we=0;ze.subscribe(new me.Q(fe,ce=>{fe.next(ve.call(Te,ce,we++))}))})}},8189:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{J:()=>Ee});var u=Z(6099),me=Z(4671);function Ee(ve=1/0){return(0,u.z)(me.y,ve)}},2733:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{p:()=>ve});var u=Z(8421),me=Z(9672),Ee=Z(5403);function ve(Te,ze,fe,we,ce,ue,pe,_e){const Ge=[];let ye=0,Ae=0,at=!1;const Le=()=>{at&&!Ge.length&&!ye&&ze.complete()},mt=wt=>ye<we?ut(wt):Ge.push(wt),ut=wt=>{ue&&ze.next(wt),ye++;let Et=!1;(0,u.Xf)(fe(wt,Ae++)).subscribe(new Ee.Q(ze,We=>{null==ce||ce(We),ue?mt(We):ze.next(We)},()=>{Et=!0},void 0,()=>{if(Et)try{for(ye--;Ge.length&&ye<we;){const We=Ge.shift();pe?(0,me.f)(ze,pe,()=>ut(We)):ut(We)}Le()}catch(We){ze.error(We)}}))};return Te.subscribe(new Ee.Q(ze,mt,()=>{at=!0,Le()})),()=>{null==_e||_e()}}},6099:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{z:()=>ze});var u=Z(4004),me=Z(8421),Ee=Z(4482),ve=Z(2733),Te=Z(576);function ze(fe,we,ce=1/0){return(0,Te.m)(we)?ze((ue,pe)=>(0,u.U)((_e,Ge)=>we(ue,_e,pe,Ge))((0,me.Xf)(fe(ue,pe))),ce):("number"==typeof we&&(ce=we),(0,Ee.e)((ue,pe)=>(0,ve.p)(ue,pe,fe,ce)))}},5363:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{Q:()=>ve});var u=Z(9672),me=Z(4482),Ee=Z(5403);function ve(Te,ze=0){return(0,me.e)((fe,we)=>{fe.subscribe(new Ee.Q(we,ce=>(0,u.f)(we,Te,()=>we.next(ce),ze),()=>(0,u.f)(we,Te,()=>we.complete(),ze),ce=>(0,u.f)(we,Te,()=>we.error(ce),ze)))})}},3099:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{B:()=>ze});var u=Z(8996),me=Z(5698),Ee=Z(7579),ve=Z(930),Te=Z(4482);function ze(we={}){const{connector:ce=(()=>new Ee.x),resetOnError:ue=!0,resetOnComplete:pe=!0,resetOnRefCountZero:_e=!0}=we;return Ge=>{let ye=null,Ae=null,at=null,Le=0,mt=!1,ut=!1;const wt=()=>{null==Ae||Ae.unsubscribe(),Ae=null},Et=()=>{wt(),ye=at=null,mt=ut=!1},We=()=>{const qe=ye;Et(),null==qe||qe.unsubscribe()};return(0,Te.e)((qe,Bt)=>{Le++,!ut&&!mt&&wt();const Rt=at=null!=at?at:ce();Bt.add(()=>{Le--,0===Le&&!ut&&!mt&&(Ae=fe(We,_e))}),Rt.subscribe(Bt),ye||(ye=new ve.Hp({next:Un=>Rt.next(Un),error:Un=>{ut=!0,wt(),Ae=fe(Et,ue,Un),Rt.error(Un)},complete:()=>{mt=!0,wt(),Ae=fe(Et,pe),Rt.complete()}}),(0,u.D)(qe).subscribe(ye))})(Ge)}}function fe(we,ce,...ue){return!0===ce?(we(),null):!1===ce?null:ce(...ue).pipe((0,me.q)(1)).subscribe(()=>we())}},9468:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{R:()=>me});var u=Z(4482);function me(Ee,ve=0){return(0,u.e)((Te,ze)=>{ze.add(Ee.schedule(()=>Te.subscribe(ze),ve))})}},5698:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{q:()=>ve});var u=Z(515),me=Z(4482),Ee=Z(5403);function ve(Te){return Te<=0?()=>u.E:(0,me.e)((ze,fe)=>{let we=0;ze.subscribe(new Ee.Q(fe,ce=>{++we<=Te&&(fe.next(ce),Te<=we&&fe.complete())}))})}},8505:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{b:()=>Te});var u=Z(576),me=Z(4482),Ee=Z(5403),ve=Z(4671);function Te(ze,fe,we){const ce=(0,u.m)(ze)||fe||we?{next:ze,error:fe,complete:we}:ze;return ce?(0,me.e)((ue,pe)=>{var _e;null===(_e=ce.subscribe)||void 0===_e||_e.call(ce);let Ge=!0;ue.subscribe(new Ee.Q(pe,ye=>{var Ae;null===(Ae=ce.next)||void 0===Ae||Ae.call(ce,ye),pe.next(ye)},()=>{var ye;Ge=!1,null===(ye=ce.complete)||void 0===ye||ye.call(ce),pe.complete()},ye=>{var Ae;Ge=!1,null===(Ae=ce.error)||void 0===Ae||Ae.call(ce,ye),pe.error(ye)},()=>{var ye,Ae;Ge&&(null===(ye=ce.unsubscribe)||void 0===ye||ye.call(ce)),null===(Ae=ce.finalize)||void 0===Ae||Ae.call(ce)}))}):ve.y}},4408:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{o:()=>Te});var u=Z(727);class me extends u.w0{constructor(fe,we){super()}schedule(fe,we=0){return this}}const Ee={setInterval(...ze){const{delegate:fe}=Ee;return((null==fe?void 0:fe.setInterval)||setInterval)(...ze)},clearInterval(ze){const{delegate:fe}=Ee;return((null==fe?void 0:fe.clearInterval)||clearInterval)(ze)},delegate:void 0};var ve=Z(8737);class Te extends me{constructor(fe,we){super(fe,we),this.scheduler=fe,this.work=we,this.pending=!1}schedule(fe,we=0){if(this.closed)return this;this.state=fe;const ce=this.id,ue=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(ue,ce,we)),this.pending=!0,this.delay=we,this.id=this.id||this.requestAsyncId(ue,this.id,we),this}requestAsyncId(fe,we,ce=0){return Ee.setInterval(fe.flush.bind(fe,this),ce)}recycleAsyncId(fe,we,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return we;Ee.clearInterval(we)}execute(fe,we){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(fe,we);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,we){let ue,ce=!1;try{this.work(fe)}catch(pe){ce=!0,ue=pe||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),ue}unsubscribe(){if(!this.closed){const{id:fe,scheduler:we}=this,{actions:ce}=we;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ve.P)(ce,this),null!=fe&&(this.id=this.recycleAsyncId(we,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{v:()=>Ee});var u=Z(6063);class me{constructor(Te,ze=me.now){this.schedulerActionCtor=Te,this.now=ze}schedule(Te,ze=0,fe){return new this.schedulerActionCtor(this,Te).schedule(fe,ze)}}me.now=u.l.now;class Ee extends me{constructor(Te,ze=me.now){super(Te,ze),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Te){const{actions:ze}=this;if(this._active)return void ze.push(Te);let fe;this._active=!0;do{if(fe=Te.execute(Te.state,Te.delay))break}while(Te=ze.shift());if(this._active=!1,fe){for(;Te=ze.shift();)Te.unsubscribe();throw fe}}}},4986:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{z:()=>Ee,P:()=>ve});var u=Z(4408);const Ee=new(Z(7565).v)(u.o),ve=Ee},6063:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{z:()=>u});const u={setTimeout(...me){const{delegate:Ee}=u;return((null==Ee?void 0:Ee.setTimeout)||setTimeout)(...me)},clearTimeout(me){const{delegate:Ee}=u;return((null==Ee?void 0:Ee.clearTimeout)||clearTimeout)(me)},delegate:void 0}},2202:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{h:()=>me});const me=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{jO:()=>ve,yG:()=>Te,_6:()=>ze});var u=Z(576),me=Z(3532);function Ee(fe){return fe[fe.length-1]}function ve(fe){return(0,u.m)(Ee(fe))?fe.pop():void 0}function Te(fe){return(0,me.K)(Ee(fe))?fe.pop():void 0}function ze(fe,we){return"number"==typeof Ee(fe)?fe.pop():we}},8737:(ft,Ze,Z)=>{"use strict";function u(me,Ee){if(me){const ve=me.indexOf(Ee);0<=ve&&me.splice(ve,1)}}Z.d(Ze,{P:()=>u})},3888:(ft,Ze,Z)=>{"use strict";function u(me){const ve=me(Te=>{Error.call(Te),Te.stack=(new Error).stack});return ve.prototype=Object.create(Error.prototype),ve.prototype.constructor=ve,ve}Z.d(Ze,{d:()=>u})},2806:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{x:()=>Ee,O:()=>ve});var u=Z(2416);let me=null;function Ee(Te){if(u.v.useDeprecatedSynchronousErrorHandling){const ze=!me;if(ze&&(me={errorThrown:!1,error:null}),Te(),ze){const{errorThrown:fe,error:we}=me;if(me=null,fe)throw we}}else Te()}function ve(Te){u.v.useDeprecatedSynchronousErrorHandling&&me&&(me.errorThrown=!0,me.error=Te)}},9672:(ft,Ze,Z)=>{"use strict";function u(me,Ee,ve,Te=0,ze=!1){const fe=Ee.schedule(function(){ve(),ze?me.add(this.schedule(null,Te)):this.unsubscribe()},Te);if(me.add(fe),!ze)return fe}Z.d(Ze,{f:()=>u})},4671:(ft,Ze,Z)=>{"use strict";function u(me){return me}Z.d(Ze,{y:()=>u})},1144:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{z:()=>u});const u=me=>me&&"number"==typeof me.length&&"function"!=typeof me},2206:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{D:()=>me});var u=Z(576);function me(Ee){return Symbol.asyncIterator&&(0,u.m)(null==Ee?void 0:Ee[Symbol.asyncIterator])}},576:(ft,Ze,Z)=>{"use strict";function u(me){return"function"==typeof me}Z.d(Ze,{m:()=>u})},3670:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{c:()=>Ee});var u=Z(8822),me=Z(576);function Ee(ve){return(0,me.m)(ve[u.L])}},6495:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{T:()=>Ee});var u=Z(2202),me=Z(576);function Ee(ve){return(0,me.m)(null==ve?void 0:ve[u.h])}},8239:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{t:()=>me});var u=Z(576);function me(Ee){return(0,u.m)(null==Ee?void 0:Ee.then)}},3260:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{Q:()=>Ee,L:()=>ve});var u=Z(655),me=Z(576);function Ee(Te){return(0,u.FC)(this,arguments,function*(){const fe=Te.getReader();try{for(;;){const{value:we,done:ce}=yield(0,u.qq)(fe.read());if(ce)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(we)}}finally{fe.releaseLock()}})}function ve(Te){return(0,me.m)(null==Te?void 0:Te.getReader)}},3532:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{K:()=>me});var u=Z(576);function me(Ee){return Ee&&(0,u.m)(Ee.schedule)}},4482:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{A:()=>me,e:()=>Ee});var u=Z(576);function me(ve){return(0,u.m)(null==ve?void 0:ve.lift)}function Ee(ve){return Te=>{if(me(Te))return Te.lift(function(ze){try{return ve(ze,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ft,Ze,Z)=>{"use strict";function u(){}Z.d(Ze,{Z:()=>u})},7849:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{h:()=>Ee});var u=Z(2416),me=Z(3410);function Ee(ve){me.z.setTimeout(()=>{const{onUnhandledError:Te}=u.v;if(!Te)throw ve;Te(ve)})}},4532:(ft,Ze,Z)=>{"use strict";function u(me){return new TypeError(`You provided ${null!==me&&"object"==typeof me?"an invalid object":`'${me}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}Z.d(Ze,{z:()=>u})},6158:(ft,Ze,Z)=>{"use strict";function u(p,a,c,m,v,b,C){try{var D=p[b](C),S=D.value}catch(A){return void c(A)}D.done?a(S):Promise.resolve(S).then(m,v)}Z.r(Ze),Z.d(Ze,{ACESFilmicToneMapping:()=>or,AddEquation:()=>Rt,AddOperation:()=>fi,AdditiveAnimationBlendMode:()=>_v,AdditiveBlending:()=>Et,AlphaFormat:()=>ys,AlwaysDepth:()=>sr,AlwaysStencilFunc:()=>Eo,AmbientLight:()=>Vy,AmbientLightProbe:()=>LC,AnimationClip:()=>pf,AnimationLoader:()=>mf,AnimationMixer:()=>fg,AnimationObjectGroup:()=>Sf,AnimationUtils:()=>ct,ArcCurve:()=>Bo,ArrayCamera:()=>zm,ArrowHelper:()=>jC,Audio:()=>dg,AudioAnalyser:()=>v_,AudioContext:()=>g_,AudioListener:()=>ug,AudioLoader:()=>Wy,AxesHelper:()=>r0,AxisHelper:()=>Sn,BackSide:()=>Ae,BasicDepthPacking:()=>oC,BasicShadowMap:()=>ue,BinaryTextureLoader:()=>Fw,Bone:()=>Od,BooleanKeyframeTrack:()=>hf,BoundingBoxHelper:()=>QC,Box2:()=>Qd,Box3:()=>ho,Box3Helper:()=>HC,BoxBufferGeometry:()=>hu,BoxGeometry:()=>hu,BoxHelper:()=>n0,BufferAttribute:()=>_n,BufferGeometry:()=>Wt,BufferGeometryLoader:()=>og,ByteType:()=>Ln,Cache:()=>sl,Camera:()=>fr,CameraHelper:()=>Ea,CanvasRenderer:()=>Jd,CanvasTexture:()=>Dy,CatmullRomCurve3:()=>Fu,CineonToneMapping:()=>_r,CircleBufferGeometry:()=>Jm,CircleGeometry:()=>Jm,ClampToEdgeWrapping:()=>Ps,Clock:()=>Vu,Color:()=>Jt,ColorKeyframeTrack:()=>Pu,CompressedTexture:()=>Xm,CompressedTextureLoader:()=>jl,ConeBufferGeometry:()=>nf,ConeGeometry:()=>nf,CubeCamera:()=>fu,CubeReflectionMapping:()=>js,CubeRefractionMapping:()=>Ws,CubeTexture:()=>pu,CubeTextureLoader:()=>u_,CubeUVReflectionMapping:()=>bi,CubeUVRefractionMapping:()=>yn,CubicBezierCurve:()=>cl,CubicBezierCurve3:()=>Xp,CubicInterpolant:()=>zl,CullFaceBack:()=>fe,CullFaceFront:()=>we,CullFaceFrontBack:()=>ce,CullFaceNone:()=>ze,Curve:()=>eo,CurvePath:()=>Fy,CustomBlending:()=>Bt,CustomToneMapping:()=>Rs,CylinderBufferGeometry:()=>Bs,CylinderGeometry:()=>Bs,Cylindrical:()=>GC,DataTexture:()=>_c,DataTexture2DArray:()=>Rm,DataTexture3D:()=>Wh,DataTextureLoader:()=>ku,DataUtils:()=>Ew,DecrementStencilOp:()=>vr,DecrementWrapStencilOp:()=>xv,DefaultLoadingManager:()=>c_,DepthFormat:()=>Va,DepthStencilFormat:()=>Ga,DepthTexture:()=>ko,DirectionalLight:()=>By,DirectionalLightHelper:()=>UC,DiscreteInterpolant:()=>Vd,DodecahedronBufferGeometry:()=>e_,DodecahedronGeometry:()=>e_,DoubleSide:()=>at,DstAlphaFactor:()=>Kt,DstColorFactor:()=>tn,DynamicBufferAttribute:()=>Aa,DynamicCopyUsage:()=>wb,DynamicDrawUsage:()=>ga,DynamicReadUsage:()=>bh,EdgesGeometry:()=>jp,EdgesHelper:()=>y0,EllipseCurve:()=>Hd,EqualDepth:()=>Zo,EqualStencilFunc:()=>rm,EquirectangularReflectionMapping:()=>eu,EquirectangularRefractionMapping:()=>qg,Euler:()=>Mh,EventDispatcher:()=>xl,ExtrudeBufferGeometry:()=>Fo,ExtrudeGeometry:()=>Fo,FaceColors:()=>Tw,FileLoader:()=>Gs,FlatShading:()=>Le,Float16BufferAttribute:()=>Er,Float32Attribute:()=>kw,Float32BufferAttribute:()=>Qt,Float64Attribute:()=>dE,Float64BufferAttribute:()=>er,FloatType:()=>Dr,Fog:()=>wa,FogExp2:()=>Np,Font:()=>lg,FontLoader:()=>vw,FrontSide:()=>ye,Frustum:()=>mu,GLBufferAttribute:()=>pg,GLSL1:()=>Cb,GLSL3:()=>Dv,GammaEncoding:()=>vh,GreaterDepth:()=>nc,GreaterEqualDepth:()=>Fa,GreaterEqualStencilFunc:()=>su,GreaterStencilFunc:()=>lC,GridHelper:()=>e0,Group:()=>Mc,HalfFloatType:()=>ls,HemisphereLight:()=>ul,HemisphereLightHelper:()=>E_,HemisphereLightProbe:()=>m_,IcosahedronBufferGeometry:()=>kc,IcosahedronGeometry:()=>kc,ImageBitmapLoader:()=>jy,ImageLoader:()=>Wl,ImageUtils:()=>Cl,ImmediateRenderObject:()=>Af,IncrementStencilOp:()=>sT,IncrementWrapStencilOp:()=>yb,InstancedBufferAttribute:()=>$l,InstancedBufferGeometry:()=>ql,InstancedInterleavedBuffer:()=>fl,InstancedMesh:()=>kd,Int16Attribute:()=>_0,Int16BufferAttribute:()=>hc,Int32Attribute:()=>KC,Int32BufferAttribute:()=>Rl,Int8Attribute:()=>Pw,Int8BufferAttribute:()=>ma,IntType:()=>xi,InterleavedBuffer:()=>Ds,InterleavedBufferAttribute:()=>sa,Interpolant:()=>No,InterpolateDiscrete:()=>Jg,InterpolateLinear:()=>ph,InterpolateSmooth:()=>gh,InvertStencilOp:()=>hr,JSONLoader:()=>Cn,KeepStencilOp:()=>Qf,KeyframeTrack:()=>qi,LOD:()=>Su,LatheBufferGeometry:()=>uf,LatheGeometry:()=>uf,Layers:()=>uc,LensFlare:()=>w0,LessDepth:()=>mr,LessEqualDepth:()=>Ni,LessEqualStencilFunc:()=>Xo,LessStencilFunc:()=>Cv,Light:()=>ua,LightProbe:()=>f_,Line:()=>nl,Line3:()=>rs,LineBasicMaterial:()=>Es,LineCurve:()=>vf,LineCurve3:()=>ky,LineDashedMaterial:()=>Oy,LineLoop:()=>Ac,LinePieces:()=>R_,LineSegments:()=>Bn,LineStrip:()=>Aw,LinearEncoding:()=>Do,LinearFilter:()=>de,LinearInterpolant:()=>df,LinearMipMapLinearFilter:()=>Re,LinearMipMapNearestFilter:()=>ke,LinearMipmapLinearFilter:()=>Ye,LinearMipmapNearestFilter:()=>ae,LinearToneMapping:()=>hn,Loader:()=>br,LoaderUtils:()=>Bu,LoadingManager:()=>l_,LogLuvEncoding:()=>im,LoopOnce:()=>nC,LoopPingPong:()=>rC,LoopRepeat:()=>iC,LuminanceAlphaFormat:()=>rc,LuminanceFormat:()=>Ys,MOUSE:()=>ve,Material:()=>lr,MaterialLoader:()=>Uy,Math:()=>Ne,MathUtils:()=>Ne,Matrix3:()=>cs,Matrix4:()=>fn,MaxEquation:()=>tt,Mesh:()=>ei,MeshBasicMaterial:()=>Ut,MeshDepthMaterial:()=>Td,MeshDistanceMaterial:()=>Id,MeshFaceMaterial:()=>Rw,MeshLambertMaterial:()=>Py,MeshMatcapMaterial:()=>a_,MeshNormalMaterial:()=>Fc,MeshPhongMaterial:()=>aa,MeshPhysicalMaterial:()=>Lo,MeshStandardMaterial:()=>Rr,MeshToonMaterial:()=>Bd,MinEquation:()=>Xe,MirroredRepeatWrapping:()=>ic,MixOperation:()=>hi,MultiMaterial:()=>p0,MultiplyBlending:()=>qe,MultiplyOperation:()=>La,NearestFilter:()=>Tn,NearestMipMapLinearFilter:()=>Fn,NearestMipMapNearestFilter:()=>Na,NearestMipmapLinearFilter:()=>Ba,NearestMipmapNearestFilter:()=>tu,NeverDepth:()=>pn,NeverStencilFunc:()=>aC,NoBlending:()=>ut,NoColors:()=>ZC,NoToneMapping:()=>vs,NormalAnimationBlendMode:()=>wl,NormalBlending:()=>wt,NotEqualDepth:()=>ed,NotEqualStencilFunc:()=>Mv,NumberKeyframeTrack:()=>Gd,Object3D:()=>it,ObjectLoader:()=>Hy,ObjectSpaceNormalMap:()=>vb,OctahedronBufferGeometry:()=>yo,OctahedronGeometry:()=>yo,OneFactor:()=>gt,OneMinusDstAlphaFactor:()=>cn,OneMinusDstColorFactor:()=>St,OneMinusSrcAlphaFactor:()=>An,OneMinusSrcColorFactor:()=>kt,OrthographicCamera:()=>wf,PCFShadowMap:()=>pe,PCFSoftShadowMap:()=>_e,PMREMGenerator:()=>WC,ParametricBufferGeometry:()=>Nd,ParametricGeometry:()=>Nd,Particle:()=>P_,ParticleBasicMaterial:()=>O_,ParticleSystem:()=>yg,ParticleSystemMaterial:()=>k_,Path:()=>yf,PerspectiveCamera:()=>nr,Plane:()=>ci,PlaneBufferGeometry:()=>_d,PlaneGeometry:()=>_d,PlaneHelper:()=>zC,PointCloud:()=>g0,PointCloudMaterial:()=>m0,PointLight:()=>rg,PointLightHelper:()=>Cw,Points:()=>Tc,PointsMaterial:()=>Vl,PolarGridHelper:()=>t0,PolyhedronBufferGeometry:()=>Ic,PolyhedronGeometry:()=>Ic,PositionalAudio:()=>yw,PropertyBinding:()=>Ur,PropertyMixer:()=>$d,QuadraticBezierCurve:()=>Jp,QuadraticBezierCurve3:()=>d_,Quaternion:()=>Fr,QuaternionKeyframeTrack:()=>Ou,QuaternionLinearInterpolant:()=>Ud,REVISION:()=>Ee,RGBADepthPacking:()=>yv,RGBAFormat:()=>$r,RGBAIntegerFormat:()=>ti,RGBA_ASTC_10x10_Format:()=>Zf,RGBA_ASTC_10x5_Format:()=>Qg,RGBA_ASTC_10x6_Format:()=>uo,RGBA_ASTC_10x8_Format:()=>Mo,RGBA_ASTC_12x10_Format:()=>Xg,RGBA_ASTC_12x12_Format:()=>fh,RGBA_ASTC_4x4_Format:()=>Kg,RGBA_ASTC_5x4_Format:()=>id,RGBA_ASTC_5x5_Format:()=>bs,RGBA_ASTC_6x5_Format:()=>rd,RGBA_ASTC_6x6_Format:()=>hh,RGBA_ASTC_8x5_Format:()=>Kr,RGBA_ASTC_8x6_Format:()=>ji,RGBA_ASTC_8x8_Format:()=>mv,RGBA_BPTC_Format:()=>fa,RGBA_ETC2_EAC_Format:()=>ha,RGBA_PVRTC_2BPPV1_Format:()=>ru,RGBA_PVRTC_4BPPV1_Format:()=>iu,RGBA_S3TC_DXT1_Format:()=>co,RGBA_S3TC_DXT3_Format:()=>oc,RGBA_S3TC_DXT5_Format:()=>Zr,RGBDEncoding:()=>Qo,RGBEEncoding:()=>nm,RGBEFormat:()=>$g,RGBFormat:()=>lo,RGBIntegerFormat:()=>Zt,RGBM16Encoding:()=>Ki,RGBM7Encoding:()=>vv,RGB_ETC1_Format:()=>Xn,RGB_ETC2_Format:()=>nd,RGB_PVRTC_2BPPV1_Format:()=>Zi,RGB_PVRTC_4BPPV1_Format:()=>Ua,RGB_S3TC_DXT1_Format:()=>Gi,RGFormat:()=>Zg,RGIntegerFormat:()=>Ko,RawShaderMaterial:()=>Ir,Ray:()=>ud,Raycaster:()=>b_,RectAreaLight:()=>Gy,RedFormat:()=>sc,RedIntegerFormat:()=>Os,ReinhardToneMapping:()=>Mr,RepeatWrapping:()=>Vn,ReplaceStencilOp:()=>wv,ReverseSubtractEquation:()=>Fe,RingBufferGeometry:()=>Hl,RingGeometry:()=>Hl,SRGB8_ALPHA8_ASTC_10x10_Format:()=>Jx,SRGB8_ALPHA8_ASTC_10x5_Format:()=>Kx,SRGB8_ALPHA8_ASTC_10x6_Format:()=>Qx,SRGB8_ALPHA8_ASTC_10x8_Format:()=>Xx,SRGB8_ALPHA8_ASTC_12x10_Format:()=>eC,SRGB8_ALPHA8_ASTC_12x12_Format:()=>tC,SRGB8_ALPHA8_ASTC_4x4_Format:()=>Kf,SRGB8_ALPHA8_ASTC_5x4_Format:()=>jx,SRGB8_ALPHA8_ASTC_5x5_Format:()=>Wx,SRGB8_ALPHA8_ASTC_6x5_Format:()=>pa,SRGB8_ALPHA8_ASTC_6x6_Format:()=>Yx,SRGB8_ALPHA8_ASTC_8x5_Format:()=>qx,SRGB8_ALPHA8_ASTC_8x6_Format:()=>$x,SRGB8_ALPHA8_ASTC_8x8_Format:()=>Zx,Scene:()=>Wm,SceneUtils:()=>XC,ShaderChunk:()=>oi,ShaderLib:()=>Za,ShaderMaterial:()=>Io,ShadowMaterial:()=>Xs,Shape:()=>Nu,ShapeBufferGeometry:()=>oa,ShapeGeometry:()=>oa,ShapePath:()=>_w,ShapeUtils:()=>Ul,ShortType:()=>pi,Skeleton:()=>Jh,SkeletonHelper:()=>Uu,SkinnedMesh:()=>Da,SmoothShading:()=>mt,Sphere:()=>au,SphereBufferGeometry:()=>Vs,SphereGeometry:()=>Vs,Spherical:()=>gg,SphericalHarmonics3:()=>sg,SplineCurve:()=>Lu,SpotLight:()=>qd,SpotLightHelper:()=>Xy,Sprite:()=>Sc,SpriteMaterial:()=>Zh,SrcAlphaFactor:()=>Vt,SrcAlphaSaturateFactor:()=>On,SrcColorFactor:()=>Se,StaticCopyUsage:()=>Nn,StaticDrawUsage:()=>ac,StaticReadUsage:()=>lc,StereoCamera:()=>NC,StreamCopyUsage:()=>xb,StreamDrawUsage:()=>bb,StreamReadUsage:()=>sm,StringKeyframeTrack:()=>ts,SubtractEquation:()=>Un,SubtractiveBlending:()=>We,TOUCH:()=>Te,TangentSpaceNormalMap:()=>yh,TetrahedronBufferGeometry:()=>rl,TetrahedronGeometry:()=>rl,TextBufferGeometry:()=>ii,TextGeometry:()=>ii,Texture:()=>Bi,TextureLoader:()=>Qp,TorusBufferGeometry:()=>Gr,TorusGeometry:()=>Gr,TorusKnotBufferGeometry:()=>Zp,TorusKnotGeometry:()=>Zp,Triangle:()=>Ti,TriangleFanDrawMode:()=>sC,TriangleStripDrawMode:()=>tm,TrianglesDrawMode:()=>_h,TubeBufferGeometry:()=>Kp,TubeGeometry:()=>Kp,UVMapping:()=>dh,Uint16Attribute:()=>F_,Uint16BufferAttribute:()=>_a,Uint32Attribute:()=>v0,Uint32BufferAttribute:()=>va,Uint8Attribute:()=>Ow,Uint8BufferAttribute:()=>Il,Uint8ClampedAttribute:()=>Ff,Uint8ClampedBufferAttribute:()=>fd,Uniform:()=>Zd,UniformsLib:()=>Yt,UniformsUtils:()=>fm,UnsignedByteType:()=>It,UnsignedInt248Type:()=>td,UnsignedIntType:()=>kr,UnsignedShort4444Type:()=>nu,UnsignedShort5551Type:()=>$f,UnsignedShort565Type:()=>gv,UnsignedShortType:()=>wi,VSMShadowMap:()=>Ge,Vector2:()=>et,Vector3:()=>ee,Vector4:()=>Di,VectorKeyframeTrack:()=>ff,Vertex:()=>bg,VertexColors:()=>Iw,VideoTexture:()=>es,WebGL1Renderer:()=>lw,WebGLCubeRenderTarget:()=>kl,WebGLMultisampleRenderTarget:()=>Ev,WebGLRenderTarget:()=>ou,WebGLRenderTargetCube:()=>xg,WebGLRenderer:()=>Yi,WebGLUtils:()=>by,WireframeGeometry:()=>cr,WireframeHelper:()=>b0,WrapAroundEnding:()=>em,XHRLoader:()=>wg,ZeroCurvatureEnding:()=>mh,ZeroFactor:()=>Je,ZeroSlopeEnding:()=>sd,ZeroStencilOp:()=>bv,sRGBEncoding:()=>ws});const Ee="126",ve={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Te={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},ze=0,fe=1,we=2,ce=3,ue=0,pe=1,_e=2,Ge=3,ye=0,Ae=1,at=2,Le=1,mt=2,ut=0,wt=1,Et=2,We=3,qe=4,Bt=5,Rt=100,Un=101,Fe=102,Xe=103,tt=104,Je=200,gt=201,Se=202,kt=203,Vt=204,An=205,Kt=206,cn=207,tn=208,St=209,On=210,pn=0,sr=1,mr=2,Ni=3,Zo=4,Fa=5,nc=6,ed=7,La=0,hi=1,fi=2,vs=0,hn=1,Mr=2,_r=3,or=4,Rs=5,dh=300,js=301,Ws=302,eu=303,qg=304,bi=306,yn=307,Vn=1e3,Ps=1001,ic=1002,Tn=1003,tu=1004,Na=1004,Ba=1005,Fn=1005,de=1006,ae=1007,ke=1007,Ye=1008,Re=1008,It=1009,Ln=1010,pi=1011,wi=1012,xi=1013,kr=1014,Dr=1015,ls=1016,nu=1017,$f=1018,gv=1019,td=1020,ys=1021,lo=1022,$r=1023,Ys=1024,rc=1025,$g=$r,Va=1026,Ga=1027,sc=1028,Os=1029,Zg=1030,Ko=1031,Zt=1032,ti=1033,Gi=33776,co=33777,oc=33778,Zr=33779,Ua=35840,Zi=35841,iu=35842,ru=35843,Xn=36196,nd=37492,ha=37496,Kg=37808,id=37809,bs=37810,rd=37811,hh=37812,Kr=37813,ji=37814,mv=37815,Qg=37816,uo=37817,Mo=37818,Zf=37819,Xg=37820,fh=37821,fa=36492,Kf=37840,jx=37841,Wx=37842,pa=37843,Yx=37844,qx=37845,$x=37846,Zx=37847,Kx=37848,Qx=37849,Xx=37850,Jx=37851,eC=37852,tC=37853,nC=2200,iC=2201,rC=2202,Jg=2300,ph=2301,gh=2302,mh=2400,sd=2401,em=2402,wl=2500,_v=2501,_h=0,tm=1,sC=2,Do=3e3,ws=3001,vh=3007,nm=3002,im=3003,vv=3004,Ki=3005,Qo=3006,oC=3200,yv=3201,yh=0,vb=1,bv=0,Qf=7680,wv=7681,sT=7682,vr=7683,yb=34055,xv=34056,hr=5386,aC=512,Cv=513,rm=514,Xo=515,lC=516,Mv=517,su=518,Eo=519,ac=35044,ga=35048,bb=35040,lc=35045,bh=35049,sm=35041,Nn=35046,wb=35050,xb=35042,Cb="100",Dv="300 es";function xl(){}Object.assign(xl.prototype,{addEventListener:function(p,a){void 0===this._listeners&&(this._listeners={});const c=this._listeners;void 0===c[p]&&(c[p]=[]),-1===c[p].indexOf(a)&&c[p].push(a)},hasEventListener:function(p,a){if(void 0===this._listeners)return!1;const c=this._listeners;return void 0!==c[p]&&-1!==c[p].indexOf(a)},removeEventListener:function(p,a){if(void 0===this._listeners)return;const m=this._listeners[p];if(void 0!==m){const v=m.indexOf(a);-1!==v&&m.splice(v,1)}},dispatchEvent:function(p){if(void 0===this._listeners)return;const c=this._listeners[p.type];if(void 0!==c){p.target=this;const m=c.slice(0);for(let v=0,b=m.length;v<b;v++)m[v].call(this,p)}}});const ks=[];for(let p=0;p<256;p++)ks[p]=(p<16?"0":"")+p.toString(16);let om=1234567;const Ne={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const p=4294967295*Math.random()|0,a=4294967295*Math.random()|0,c=4294967295*Math.random()|0,m=4294967295*Math.random()|0;return(ks[255&p]+ks[p>>8&255]+ks[p>>16&255]+ks[p>>24&255]+"-"+ks[255&a]+ks[a>>8&255]+"-"+ks[a>>16&15|64]+ks[a>>24&255]+"-"+ks[63&c|128]+ks[c>>8&255]+"-"+ks[c>>16&255]+ks[c>>24&255]+ks[255&m]+ks[m>>8&255]+ks[m>>16&255]+ks[m>>24&255]).toUpperCase()},clamp:function(p,a,c){return Math.max(a,Math.min(c,p))},euclideanModulo:function(p,a){return(p%a+a)%a},mapLinear:function(p,a,c,m,v){return m+(p-a)*(v-m)/(c-a)},lerp:function(p,a,c){return(1-c)*p+c*a},damp:function(p,a,c,m){return Ne.lerp(p,a,1-Math.exp(-c*m))},pingpong:function(p,a=1){return a-Math.abs(Ne.euclideanModulo(p,2*a)-a)},smoothstep:function(p,a,c){return p<=a?0:p>=c?1:(p=(p-a)/(c-a))*p*(3-2*p)},smootherstep:function(p,a,c){return p<=a?0:p>=c?1:(p=(p-a)/(c-a))*p*p*(p*(6*p-15)+10)},randInt:function(p,a){return p+Math.floor(Math.random()*(a-p+1))},randFloat:function(p,a){return p+Math.random()*(a-p)},randFloatSpread:function(p){return p*(.5-Math.random())},seededRandom:function(p){return void 0!==p&&(om=p%2147483647),om=16807*om%2147483647,(om-1)/2147483646},degToRad:function(p){return p*Ne.DEG2RAD},radToDeg:function(p){return p*Ne.RAD2DEG},isPowerOfTwo:function(p){return 0==(p&p-1)&&0!==p},ceilPowerOfTwo:function(p){return Math.pow(2,Math.ceil(Math.log(p)/Math.LN2))},floorPowerOfTwo:function(p){return Math.pow(2,Math.floor(Math.log(p)/Math.LN2))},setQuaternionFromProperEuler:function(p,a,c,m,v){const b=Math.cos,C=Math.sin,D=b(c/2),S=C(c/2),A=b((a+m)/2),k=C((a+m)/2),R=b((a-m)/2),O=C((a-m)/2),L=b((m-a)/2),V=C((m-a)/2);switch(v){case"XYX":p.set(D*k,S*R,S*O,D*A);break;case"YZY":p.set(S*O,D*k,S*R,D*A);break;case"ZXZ":p.set(S*R,S*O,D*k,D*A);break;case"XZX":p.set(D*k,S*V,S*L,D*A);break;case"YXY":p.set(S*L,D*k,S*V,D*A);break;case"ZYZ":p.set(S*V,S*L,D*k,D*A);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+v)}}};class et{constructor(a=0,c=0){this.x=a,this.y=c}get width(){return this.x}set width(a){this.x=a}get height(){return this.y}set height(a){this.y=a}set(a,c){return this.x=a,this.y=c,this}setScalar(a){return this.x=a,this.y=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setComponent(a,c){switch(a){case 0:this.x=c;break;case 1:this.y=c;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y)}copy(a){return this.x=a.x,this.y=a.y,this}add(a,c){return void 0!==c?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,c)):(this.x+=a.x,this.y+=a.y,this)}addScalar(a){return this.x+=a,this.y+=a,this}addVectors(a,c){return this.x=a.x+c.x,this.y=a.y+c.y,this}addScaledVector(a,c){return this.x+=a.x*c,this.y+=a.y*c,this}sub(a,c){return void 0!==c?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,c)):(this.x-=a.x,this.y-=a.y,this)}subScalar(a){return this.x-=a,this.y-=a,this}subVectors(a,c){return this.x=a.x-c.x,this.y=a.y-c.y,this}multiply(a){return this.x*=a.x,this.y*=a.y,this}multiplyScalar(a){return this.x*=a,this.y*=a,this}divide(a){return this.x/=a.x,this.y/=a.y,this}divideScalar(a){return this.multiplyScalar(1/a)}applyMatrix3(a){const c=this.x,m=this.y,v=a.elements;return this.x=v[0]*c+v[3]*m+v[6],this.y=v[1]*c+v[4]*m+v[7],this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this}clamp(a,c){return this.x=Math.max(a.x,Math.min(c.x,this.x)),this.y=Math.max(a.y,Math.min(c.y,this.y)),this}clampScalar(a,c){return this.x=Math.max(a,Math.min(c,this.x)),this.y=Math.max(a,Math.min(c,this.y)),this}clampLength(a,c){const m=this.length();return this.divideScalar(m||1).multiplyScalar(Math.max(a,Math.min(c,m)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(a){return this.x*a.x+this.y*a.y}cross(a){return this.x*a.y-this.y*a.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const c=this.x-a.x,m=this.y-a.y;return c*c+m*m}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,c){return this.x+=(a.x-this.x)*c,this.y+=(a.y-this.y)*c,this}lerpVectors(a,c,m){return this.x=a.x+(c.x-a.x)*m,this.y=a.y+(c.y-a.y)*m,this}equals(a){return a.x===this.x&&a.y===this.y}fromArray(a,c=0){return this.x=a[c],this.y=a[c+1],this}toArray(a=[],c=0){return a[c]=this.x,a[c+1]=this.y,a}fromBufferAttribute(a,c,m){return void 0!==m&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(c),this.y=a.getY(c),this}rotateAround(a,c){const m=Math.cos(c),v=Math.sin(c),b=this.x-a.x,C=this.y-a.y;return this.x=b*m-C*v+a.x,this.y=b*v+C*m+a.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}et.prototype.isVector2=!0;class cs{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(a,c,m,v,b,C,D,S,A){const k=this.elements;return k[0]=a,k[1]=v,k[2]=D,k[3]=c,k[4]=b,k[5]=S,k[6]=m,k[7]=C,k[8]=A,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(a){const c=this.elements,m=a.elements;return c[0]=m[0],c[1]=m[1],c[2]=m[2],c[3]=m[3],c[4]=m[4],c[5]=m[5],c[6]=m[6],c[7]=m[7],c[8]=m[8],this}extractBasis(a,c,m){return a.setFromMatrix3Column(this,0),c.setFromMatrix3Column(this,1),m.setFromMatrix3Column(this,2),this}setFromMatrix4(a){const c=a.elements;return this.set(c[0],c[4],c[8],c[1],c[5],c[9],c[2],c[6],c[10]),this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,c){const m=a.elements,v=c.elements,b=this.elements,C=m[0],D=m[3],S=m[6],A=m[1],k=m[4],R=m[7],O=m[2],L=m[5],V=m[8],z=v[0],W=v[3],U=v[6],B=v[1],te=v[4],X=v[7],se=v[2],K=v[5],he=v[8];return b[0]=C*z+D*B+S*se,b[3]=C*W+D*te+S*K,b[6]=C*U+D*X+S*he,b[1]=A*z+k*B+R*se,b[4]=A*W+k*te+R*K,b[7]=A*U+k*X+R*he,b[2]=O*z+L*B+V*se,b[5]=O*W+L*te+V*K,b[8]=O*U+L*X+V*he,this}multiplyScalar(a){const c=this.elements;return c[0]*=a,c[3]*=a,c[6]*=a,c[1]*=a,c[4]*=a,c[7]*=a,c[2]*=a,c[5]*=a,c[8]*=a,this}determinant(){const a=this.elements,c=a[0],m=a[1],v=a[2],b=a[3],C=a[4],D=a[5],S=a[6],A=a[7],k=a[8];return c*C*k-c*D*A-m*b*k+m*D*S+v*b*A-v*C*S}invert(){const a=this.elements,c=a[0],m=a[1],v=a[2],b=a[3],C=a[4],D=a[5],S=a[6],A=a[7],k=a[8],R=k*C-D*A,O=D*S-k*b,L=A*b-C*S,V=c*R+m*O+v*L;if(0===V)return this.set(0,0,0,0,0,0,0,0,0);const z=1/V;return a[0]=R*z,a[1]=(v*A-k*m)*z,a[2]=(D*m-v*C)*z,a[3]=O*z,a[4]=(k*c-v*S)*z,a[5]=(v*b-D*c)*z,a[6]=L*z,a[7]=(m*S-A*c)*z,a[8]=(C*c-m*b)*z,this}transpose(){let a;const c=this.elements;return a=c[1],c[1]=c[3],c[3]=a,a=c[2],c[2]=c[6],c[6]=a,a=c[5],c[5]=c[7],c[7]=a,this}getNormalMatrix(a){return this.setFromMatrix4(a).invert().transpose()}transposeIntoArray(a){const c=this.elements;return a[0]=c[0],a[1]=c[3],a[2]=c[6],a[3]=c[1],a[4]=c[4],a[5]=c[7],a[6]=c[2],a[7]=c[5],a[8]=c[8],this}setUvTransform(a,c,m,v,b,C,D){const S=Math.cos(b),A=Math.sin(b);return this.set(m*S,m*A,-m*(S*C+A*D)+C+a,-v*A,v*S,-v*(-A*C+S*D)+D+c,0,0,1),this}scale(a,c){const m=this.elements;return m[0]*=a,m[3]*=a,m[6]*=a,m[1]*=c,m[4]*=c,m[7]*=c,this}rotate(a){const c=Math.cos(a),m=Math.sin(a),v=this.elements,b=v[0],C=v[3],D=v[6],S=v[1],A=v[4],k=v[7];return v[0]=c*b+m*S,v[3]=c*C+m*A,v[6]=c*D+m*k,v[1]=-m*b+c*S,v[4]=-m*C+c*A,v[7]=-m*D+c*k,this}translate(a,c){const m=this.elements;return m[0]+=a*m[2],m[3]+=a*m[5],m[6]+=a*m[8],m[1]+=c*m[2],m[4]+=c*m[5],m[7]+=c*m[8],this}equals(a){const c=this.elements,m=a.elements;for(let v=0;v<9;v++)if(c[v]!==m[v])return!1;return!0}fromArray(a,c=0){for(let m=0;m<9;m++)this.elements[m]=a[m+c];return this}toArray(a=[],c=0){const m=this.elements;return a[c]=m[0],a[c+1]=m[1],a[c+2]=m[2],a[c+3]=m[3],a[c+4]=m[4],a[c+5]=m[5],a[c+6]=m[6],a[c+7]=m[7],a[c+8]=m[8],a}clone(){return(new this.constructor).fromArray(this.elements)}}let Wi;cs.prototype.isMatrix3=!0;const Cl={getDataURL:function(p){if(/^data:/i.test(p.src)||"undefined"==typeof HTMLCanvasElement)return p.src;let a;if(p instanceof HTMLCanvasElement)a=p;else{void 0===Wi&&(Wi=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Wi.width=p.width,Wi.height=p.height;const c=Wi.getContext("2d");p instanceof ImageData?c.putImageData(p,0,0):c.drawImage(p,0,0,p.width,p.height),a=Wi}return a.width>2048||a.height>2048?a.toDataURL("image/jpeg",.6):a.toDataURL("image/png")}};let Xf=0;class Bi extends xl{constructor(a=Bi.DEFAULT_IMAGE,c=Bi.DEFAULT_MAPPING,m=Ps,v=Ps,b=de,C=Ye,D=$r,S=It,A=1,k=Do){super(),Object.defineProperty(this,"id",{value:Xf++}),this.uuid=Ne.generateUUID(),this.name="",this.image=a,this.mipmaps=[],this.mapping=c,this.wrapS=m,this.wrapT=v,this.magFilter=b,this.minFilter=C,this.anisotropy=A,this.format=D,this.internalFormat=null,this.type=S,this.offset=new et(0,0),this.repeat=new et(1,1),this.center=new et(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new cs,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=k,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(a){return this.name=a.name,this.image=a.image,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.internalFormat=a.internalFormat,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.center.copy(a.center),this.rotation=a.rotation,this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrix.copy(a.matrix),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this.encoding=a.encoding,this}toJSON(a){const c=void 0===a||"string"==typeof a;if(!c&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];const m={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const v=this.image;if(void 0===v.uuid&&(v.uuid=Ne.generateUUID()),!c&&void 0===a.images[v.uuid]){let b;if(Array.isArray(v)){b=[];for(let C=0,D=v.length;C<D;C++)b.push(Jf(v[C].isDataTexture?v[C].image:v[C]))}else b=Jf(v);a.images[v.uuid]={uuid:v.uuid,url:b}}m.image=v.uuid}return c||(a.textures[this.uuid]=m),m}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(a){if(this.mapping!==dh)return a;if(a.applyMatrix3(this.matrix),a.x<0||a.x>1)switch(this.wrapS){case Vn:a.x=a.x-Math.floor(a.x);break;case Ps:a.x=a.x<0?0:1;break;case ic:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(a.y<0||a.y>1)switch(this.wrapT){case Vn:a.y=a.y-Math.floor(a.y);break;case Ps:a.y=a.y<0?0:1;break;case ic:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}return this.flipY&&(a.y=1-a.y),a}set needsUpdate(a){!0===a&&this.version++}}function Jf(p){return"undefined"!=typeof HTMLImageElement&&p instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&p instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&p instanceof ImageBitmap?Cl.getDataURL(p):p.data?{data:Array.prototype.slice.call(p.data),width:p.width,height:p.height,type:p.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Bi.DEFAULT_IMAGE=void 0,Bi.DEFAULT_MAPPING=dh,Bi.prototype.isTexture=!0;class Di{constructor(a=0,c=0,m=0,v=1){this.x=a,this.y=c,this.z=m,this.w=v}get width(){return this.z}set width(a){this.z=a}get height(){return this.w}set height(a){this.w=a}set(a,c,m,v){return this.x=a,this.y=c,this.z=m,this.w=v,this}setScalar(a){return this.x=a,this.y=a,this.z=a,this.w=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setZ(a){return this.z=a,this}setW(a){return this.w=a,this}setComponent(a,c){switch(a){case 0:this.x=c;break;case 1:this.y=c;break;case 2:this.z=c;break;case 3:this.w=c;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=void 0!==a.w?a.w:1,this}add(a,c){return void 0!==c?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,c)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this)}addScalar(a){return this.x+=a,this.y+=a,this.z+=a,this.w+=a,this}addVectors(a,c){return this.x=a.x+c.x,this.y=a.y+c.y,this.z=a.z+c.z,this.w=a.w+c.w,this}addScaledVector(a,c){return this.x+=a.x*c,this.y+=a.y*c,this.z+=a.z*c,this.w+=a.w*c,this}sub(a,c){return void 0!==c?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,c)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this)}subScalar(a){return this.x-=a,this.y-=a,this.z-=a,this.w-=a,this}subVectors(a,c){return this.x=a.x-c.x,this.y=a.y-c.y,this.z=a.z-c.z,this.w=a.w-c.w,this}multiply(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this.w*=a.w,this}multiplyScalar(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this}applyMatrix4(a){const c=this.x,m=this.y,v=this.z,b=this.w,C=a.elements;return this.x=C[0]*c+C[4]*m+C[8]*v+C[12]*b,this.y=C[1]*c+C[5]*m+C[9]*v+C[13]*b,this.z=C[2]*c+C[6]*m+C[10]*v+C[14]*b,this.w=C[3]*c+C[7]*m+C[11]*v+C[15]*b,this}divideScalar(a){return this.multiplyScalar(1/a)}setAxisAngleFromQuaternion(a){this.w=2*Math.acos(a.w);const c=Math.sqrt(1-a.w*a.w);return c<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=a.x/c,this.y=a.y/c,this.z=a.z/c),this}setAxisAngleFromRotationMatrix(a){let c,m,v,b;const C=.01,D=.1,S=a.elements,A=S[0],k=S[4],R=S[8],O=S[1],L=S[5],V=S[9],z=S[2],W=S[6],U=S[10];if(Math.abs(k-O)<C&&Math.abs(R-z)<C&&Math.abs(V-W)<C){if(Math.abs(k+O)<D&&Math.abs(R+z)<D&&Math.abs(V+W)<D&&Math.abs(A+L+U-3)<D)return this.set(1,0,0,0),this;c=Math.PI;const te=(A+1)/2,X=(L+1)/2,se=(U+1)/2,K=(k+O)/4,he=(R+z)/4,Ie=(V+W)/4;return te>X&&te>se?te<C?(m=0,v=.707106781,b=.707106781):(m=Math.sqrt(te),v=K/m,b=he/m):X>se?X<C?(m=.707106781,v=0,b=.707106781):(v=Math.sqrt(X),m=K/v,b=Ie/v):se<C?(m=.707106781,v=.707106781,b=0):(b=Math.sqrt(se),m=he/b,v=Ie/b),this.set(m,v,b,c),this}let B=Math.sqrt((W-V)*(W-V)+(R-z)*(R-z)+(O-k)*(O-k));return Math.abs(B)<.001&&(B=1),this.x=(W-V)/B,this.y=(R-z)/B,this.z=(O-k)/B,this.w=Math.acos((A+L+U-1)/2),this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this.w=Math.min(this.w,a.w),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this.w=Math.max(this.w,a.w),this}clamp(a,c){return this.x=Math.max(a.x,Math.min(c.x,this.x)),this.y=Math.max(a.y,Math.min(c.y,this.y)),this.z=Math.max(a.z,Math.min(c.z,this.z)),this.w=Math.max(a.w,Math.min(c.w,this.w)),this}clampScalar(a,c){return this.x=Math.max(a,Math.min(c,this.x)),this.y=Math.max(a,Math.min(c,this.y)),this.z=Math.max(a,Math.min(c,this.z)),this.w=Math.max(a,Math.min(c,this.w)),this}clampLength(a,c){const m=this.length();return this.divideScalar(m||1).multiplyScalar(Math.max(a,Math.min(c,m)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,c){return this.x+=(a.x-this.x)*c,this.y+=(a.y-this.y)*c,this.z+=(a.z-this.z)*c,this.w+=(a.w-this.w)*c,this}lerpVectors(a,c,m){return this.x=a.x+(c.x-a.x)*m,this.y=a.y+(c.y-a.y)*m,this.z=a.z+(c.z-a.z)*m,this.w=a.w+(c.w-a.w)*m,this}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w}fromArray(a,c=0){return this.x=a[c],this.y=a[c+1],this.z=a[c+2],this.w=a[c+3],this}toArray(a=[],c=0){return a[c]=this.x,a[c+1]=this.y,a[c+2]=this.z,a[c+3]=this.w,a}fromBufferAttribute(a,c,m){return void 0!==m&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(c),this.y=a.getY(c),this.z=a.getZ(c),this.w=a.getW(c),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}Di.prototype.isVector4=!0;class ou extends xl{constructor(a,c,m){super(),this.width=a,this.height=c,this.depth=1,this.scissor=new Di(0,0,a,c),this.scissorTest=!1,this.viewport=new Di(0,0,a,c),this.texture=new Bi(void 0,(m=m||{}).mapping,m.wrapS,m.wrapT,m.magFilter,m.minFilter,m.format,m.type,m.anisotropy,m.encoding),this.texture.image={},this.texture.image.width=a,this.texture.image.height=c,this.texture.image.depth=1,this.texture.generateMipmaps=void 0!==m.generateMipmaps&&m.generateMipmaps,this.texture.minFilter=void 0!==m.minFilter?m.minFilter:de,this.depthBuffer=void 0===m.depthBuffer||m.depthBuffer,this.stencilBuffer=void 0!==m.stencilBuffer&&m.stencilBuffer,this.depthTexture=void 0!==m.depthTexture?m.depthTexture:null}setTexture(a){a.image={width:this.width,height:this.height,depth:this.depth},this.texture=a}setSize(a,c,m=1){(this.width!==a||this.height!==c||this.depth!==m)&&(this.width=a,this.height=c,this.depth=m,this.texture.image.width=a,this.texture.image.height=c,this.texture.image.depth=m,this.dispose()),this.viewport.set(0,0,a,c),this.scissor.set(0,0,a,c)}clone(){return(new this.constructor).copy(this)}copy(a){return this.width=a.width,this.height=a.height,this.depth=a.depth,this.viewport.copy(a.viewport),this.texture=a.texture.clone(),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}ou.prototype.isWebGLRenderTarget=!0;class Ev extends ou{constructor(a,c,m){super(a,c,m),this.samples=4}copy(a){return super.copy.call(this,a),this.samples=a.samples,this}}Ev.prototype.isWebGLMultisampleRenderTarget=!0;class Fr{constructor(a=0,c=0,m=0,v=1){this._x=a,this._y=c,this._z=m,this._w=v}static slerp(a,c,m,v){return m.copy(a).slerp(c,v)}static slerpFlat(a,c,m,v,b,C,D){let S=m[v+0],A=m[v+1],k=m[v+2],R=m[v+3];const O=b[C+0],L=b[C+1],V=b[C+2],z=b[C+3];if(0===D)return a[c+0]=S,a[c+1]=A,a[c+2]=k,void(a[c+3]=R);if(1===D)return a[c+0]=O,a[c+1]=L,a[c+2]=V,void(a[c+3]=z);if(R!==z||S!==O||A!==L||k!==V){let W=1-D;const U=S*O+A*L+k*V+R*z,B=U>=0?1:-1,te=1-U*U;if(te>Number.EPSILON){const se=Math.sqrt(te),K=Math.atan2(se,U*B);W=Math.sin(W*K)/se,D=Math.sin(D*K)/se}const X=D*B;if(S=S*W+O*X,A=A*W+L*X,k=k*W+V*X,R=R*W+z*X,W===1-D){const se=1/Math.sqrt(S*S+A*A+k*k+R*R);S*=se,A*=se,k*=se,R*=se}}a[c]=S,a[c+1]=A,a[c+2]=k,a[c+3]=R}static multiplyQuaternionsFlat(a,c,m,v,b,C){const D=m[v],S=m[v+1],A=m[v+2],k=m[v+3],R=b[C],O=b[C+1],L=b[C+2],V=b[C+3];return a[c]=D*V+k*R+S*L-A*O,a[c+1]=S*V+k*O+A*R-D*L,a[c+2]=A*V+k*L+D*O-S*R,a[c+3]=k*V-D*R-S*O-A*L,a}get x(){return this._x}set x(a){this._x=a,this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a,this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a,this._onChangeCallback()}get w(){return this._w}set w(a){this._w=a,this._onChangeCallback()}set(a,c,m,v){return this._x=a,this._y=c,this._z=m,this._w=v,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(a){return this._x=a.x,this._y=a.y,this._z=a.z,this._w=a.w,this._onChangeCallback(),this}setFromEuler(a,c){if(!a||!a.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const m=a._x,v=a._y,b=a._z,C=a._order,D=Math.cos,S=Math.sin,A=D(m/2),k=D(v/2),R=D(b/2),O=S(m/2),L=S(v/2),V=S(b/2);switch(C){case"XYZ":this._x=O*k*R+A*L*V,this._y=A*L*R-O*k*V,this._z=A*k*V+O*L*R,this._w=A*k*R-O*L*V;break;case"YXZ":this._x=O*k*R+A*L*V,this._y=A*L*R-O*k*V,this._z=A*k*V-O*L*R,this._w=A*k*R+O*L*V;break;case"ZXY":this._x=O*k*R-A*L*V,this._y=A*L*R+O*k*V,this._z=A*k*V+O*L*R,this._w=A*k*R-O*L*V;break;case"ZYX":this._x=O*k*R-A*L*V,this._y=A*L*R+O*k*V,this._z=A*k*V-O*L*R,this._w=A*k*R+O*L*V;break;case"YZX":this._x=O*k*R+A*L*V,this._y=A*L*R+O*k*V,this._z=A*k*V-O*L*R,this._w=A*k*R-O*L*V;break;case"XZY":this._x=O*k*R-A*L*V,this._y=A*L*R-O*k*V,this._z=A*k*V+O*L*R,this._w=A*k*R+O*L*V;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+C)}return!1!==c&&this._onChangeCallback(),this}setFromAxisAngle(a,c){const m=c/2,v=Math.sin(m);return this._x=a.x*v,this._y=a.y*v,this._z=a.z*v,this._w=Math.cos(m),this._onChangeCallback(),this}setFromRotationMatrix(a){const c=a.elements,m=c[0],v=c[4],b=c[8],C=c[1],D=c[5],S=c[9],A=c[2],k=c[6],R=c[10],O=m+D+R;if(O>0){const L=.5/Math.sqrt(O+1);this._w=.25/L,this._x=(k-S)*L,this._y=(b-A)*L,this._z=(C-v)*L}else if(m>D&&m>R){const L=2*Math.sqrt(1+m-D-R);this._w=(k-S)/L,this._x=.25*L,this._y=(v+C)/L,this._z=(b+A)/L}else if(D>R){const L=2*Math.sqrt(1+D-m-R);this._w=(b-A)/L,this._x=(v+C)/L,this._y=.25*L,this._z=(S+k)/L}else{const L=2*Math.sqrt(1+R-m-D);this._w=(C-v)/L,this._x=(b+A)/L,this._y=(S+k)/L,this._z=.25*L}return this._onChangeCallback(),this}setFromUnitVectors(a,c){let v=a.dot(c)+1;return v<1e-6?(v=0,Math.abs(a.x)>Math.abs(a.z)?(this._x=-a.y,this._y=a.x,this._z=0,this._w=v):(this._x=0,this._y=-a.z,this._z=a.y,this._w=v)):(this._x=a.y*c.z-a.z*c.y,this._y=a.z*c.x-a.x*c.z,this._z=a.x*c.y-a.y*c.x,this._w=v),this.normalize()}angleTo(a){return 2*Math.acos(Math.abs(Ne.clamp(this.dot(a),-1,1)))}rotateTowards(a,c){const m=this.angleTo(a);if(0===m)return this;const v=Math.min(1,c/m);return this.slerp(a,v),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let a=this.length();return 0===a?(this._x=0,this._y=0,this._z=0,this._w=1):(a=1/a,this._x=this._x*a,this._y=this._y*a,this._z=this._z*a,this._w=this._w*a),this._onChangeCallback(),this}multiply(a,c){return void 0!==c?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,c)):this.multiplyQuaternions(this,a)}premultiply(a){return this.multiplyQuaternions(a,this)}multiplyQuaternions(a,c){const m=a._x,v=a._y,b=a._z,C=a._w,D=c._x,S=c._y,A=c._z,k=c._w;return this._x=m*k+C*D+v*A-b*S,this._y=v*k+C*S+b*D-m*A,this._z=b*k+C*A+m*S-v*D,this._w=C*k-m*D-v*S-b*A,this._onChangeCallback(),this}slerp(a,c){if(0===c)return this;if(1===c)return this.copy(a);const m=this._x,v=this._y,b=this._z,C=this._w;let D=C*a._w+m*a._x+v*a._y+b*a._z;if(D<0?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,D=-D):this.copy(a),D>=1)return this._w=C,this._x=m,this._y=v,this._z=b,this;const S=1-D*D;if(S<=Number.EPSILON){const L=1-c;return this._w=L*C+c*this._w,this._x=L*m+c*this._x,this._y=L*v+c*this._y,this._z=L*b+c*this._z,this.normalize(),this._onChangeCallback(),this}const A=Math.sqrt(S),k=Math.atan2(A,D),R=Math.sin((1-c)*k)/A,O=Math.sin(c*k)/A;return this._w=C*R+this._w*O,this._x=m*R+this._x*O,this._y=v*R+this._y*O,this._z=b*R+this._z*O,this._onChangeCallback(),this}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w}fromArray(a,c=0){return this._x=a[c],this._y=a[c+1],this._z=a[c+2],this._w=a[c+3],this._onChangeCallback(),this}toArray(a=[],c=0){return a[c]=this._x,a[c+1]=this._y,a[c+2]=this._z,a[c+3]=this._w,a}fromBufferAttribute(a,c){return this._x=a.getX(c),this._y=a.getY(c),this._z=a.getZ(c),this._w=a.getW(c),this}_onChange(a){return this._onChangeCallback=a,this}_onChangeCallback(){}}Fr.prototype.isQuaternion=!0;class ee{constructor(a=0,c=0,m=0){this.x=a,this.y=c,this.z=m}set(a,c,m){return void 0===m&&(m=this.z),this.x=a,this.y=c,this.z=m,this}setScalar(a){return this.x=a,this.y=a,this.z=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setZ(a){return this.z=a,this}setComponent(a,c){switch(a){case 0:this.x=c;break;case 1:this.y=c;break;case 2:this.z=c;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(a){return this.x=a.x,this.y=a.y,this.z=a.z,this}add(a,c){return void 0!==c?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,c)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this)}addScalar(a){return this.x+=a,this.y+=a,this.z+=a,this}addVectors(a,c){return this.x=a.x+c.x,this.y=a.y+c.y,this.z=a.z+c.z,this}addScaledVector(a,c){return this.x+=a.x*c,this.y+=a.y*c,this.z+=a.z*c,this}sub(a,c){return void 0!==c?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,c)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this)}subScalar(a){return this.x-=a,this.y-=a,this.z-=a,this}subVectors(a,c){return this.x=a.x-c.x,this.y=a.y-c.y,this.z=a.z-c.z,this}multiply(a,c){return void 0!==c?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,c)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)}multiplyScalar(a){return this.x*=a,this.y*=a,this.z*=a,this}multiplyVectors(a,c){return this.x=a.x*c.x,this.y=a.y*c.y,this.z=a.z*c.z,this}applyEuler(a){return a&&a.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Ml.setFromEuler(a))}applyAxisAngle(a,c){return this.applyQuaternion(Ml.setFromAxisAngle(a,c))}applyMatrix3(a){const c=this.x,m=this.y,v=this.z,b=a.elements;return this.x=b[0]*c+b[3]*m+b[6]*v,this.y=b[1]*c+b[4]*m+b[7]*v,this.z=b[2]*c+b[5]*m+b[8]*v,this}applyNormalMatrix(a){return this.applyMatrix3(a).normalize()}applyMatrix4(a){const c=this.x,m=this.y,v=this.z,b=a.elements,C=1/(b[3]*c+b[7]*m+b[11]*v+b[15]);return this.x=(b[0]*c+b[4]*m+b[8]*v+b[12])*C,this.y=(b[1]*c+b[5]*m+b[9]*v+b[13])*C,this.z=(b[2]*c+b[6]*m+b[10]*v+b[14])*C,this}applyQuaternion(a){const c=this.x,m=this.y,v=this.z,b=a.x,C=a.y,D=a.z,S=a.w,A=S*c+C*v-D*m,k=S*m+D*c-b*v,R=S*v+b*m-C*c,O=-b*c-C*m-D*v;return this.x=A*S+O*-b+k*-D-R*-C,this.y=k*S+O*-C+R*-b-A*-D,this.z=R*S+O*-D+A*-C-k*-b,this}project(a){return this.applyMatrix4(a.matrixWorldInverse).applyMatrix4(a.projectionMatrix)}unproject(a){return this.applyMatrix4(a.projectionMatrixInverse).applyMatrix4(a.matrixWorld)}transformDirection(a){const c=this.x,m=this.y,v=this.z,b=a.elements;return this.x=b[0]*c+b[4]*m+b[8]*v,this.y=b[1]*c+b[5]*m+b[9]*v,this.z=b[2]*c+b[6]*m+b[10]*v,this.normalize()}divide(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this}divideScalar(a){return this.multiplyScalar(1/a)}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this}clamp(a,c){return this.x=Math.max(a.x,Math.min(c.x,this.x)),this.y=Math.max(a.y,Math.min(c.y,this.y)),this.z=Math.max(a.z,Math.min(c.z,this.z)),this}clampScalar(a,c){return this.x=Math.max(a,Math.min(c,this.x)),this.y=Math.max(a,Math.min(c,this.y)),this.z=Math.max(a,Math.min(c,this.z)),this}clampLength(a,c){const m=this.length();return this.divideScalar(m||1).multiplyScalar(Math.max(a,Math.min(c,m)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,c){return this.x+=(a.x-this.x)*c,this.y+=(a.y-this.y)*c,this.z+=(a.z-this.z)*c,this}lerpVectors(a,c,m){return this.x=a.x+(c.x-a.x)*m,this.y=a.y+(c.y-a.y)*m,this.z=a.z+(c.z-a.z)*m,this}cross(a,c){return void 0!==c?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,c)):this.crossVectors(this,a)}crossVectors(a,c){const m=a.x,v=a.y,b=a.z,C=c.x,D=c.y,S=c.z;return this.x=v*S-b*D,this.y=b*C-m*S,this.z=m*D-v*C,this}projectOnVector(a){const c=a.lengthSq();if(0===c)return this.set(0,0,0);const m=a.dot(this)/c;return this.copy(a).multiplyScalar(m)}projectOnPlane(a){return xs.copy(this).projectOnVector(a),this.sub(xs)}reflect(a){return this.sub(xs.copy(a).multiplyScalar(2*this.dot(a)))}angleTo(a){const c=Math.sqrt(this.lengthSq()*a.lengthSq());if(0===c)return Math.PI/2;const m=this.dot(a)/c;return Math.acos(Ne.clamp(m,-1,1))}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const c=this.x-a.x,m=this.y-a.y,v=this.z-a.z;return c*c+m*m+v*v}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)}setFromSpherical(a){return this.setFromSphericalCoords(a.radius,a.phi,a.theta)}setFromSphericalCoords(a,c,m){const v=Math.sin(c)*a;return this.x=v*Math.sin(m),this.y=Math.cos(c)*a,this.z=v*Math.cos(m),this}setFromCylindrical(a){return this.setFromCylindricalCoords(a.radius,a.theta,a.y)}setFromCylindricalCoords(a,c,m){return this.x=a*Math.sin(c),this.y=m,this.z=a*Math.cos(c),this}setFromMatrixPosition(a){const c=a.elements;return this.x=c[12],this.y=c[13],this.z=c[14],this}setFromMatrixScale(a){const c=this.setFromMatrixColumn(a,0).length(),m=this.setFromMatrixColumn(a,1).length(),v=this.setFromMatrixColumn(a,2).length();return this.x=c,this.y=m,this.z=v,this}setFromMatrixColumn(a,c){return this.fromArray(a.elements,4*c)}setFromMatrix3Column(a,c){return this.fromArray(a.elements,3*c)}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z}fromArray(a,c=0){return this.x=a[c],this.y=a[c+1],this.z=a[c+2],this}toArray(a=[],c=0){return a[c]=this.x,a[c+1]=this.y,a[c+2]=this.z,a}fromBufferAttribute(a,c,m){return void 0!==m&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(c),this.y=a.getY(c),this.z=a.getZ(c),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}ee.prototype.isVector3=!0;const xs=new ee,Ml=new Fr;class ho{constructor(a=new ee(1/0,1/0,1/0),c=new ee(-1/0,-1/0,-1/0)){this.min=a,this.max=c}set(a,c){return this.min.copy(a),this.max.copy(c),this}setFromArray(a){let c=1/0,m=1/0,v=1/0,b=-1/0,C=-1/0,D=-1/0;for(let S=0,A=a.length;S<A;S+=3){const k=a[S],R=a[S+1],O=a[S+2];k<c&&(c=k),R<m&&(m=R),O<v&&(v=O),k>b&&(b=k),R>C&&(C=R),O>D&&(D=O)}return this.min.set(c,m,v),this.max.set(b,C,D),this}setFromBufferAttribute(a){let c=1/0,m=1/0,v=1/0,b=-1/0,C=-1/0,D=-1/0;for(let S=0,A=a.count;S<A;S++){const k=a.getX(S),R=a.getY(S),O=a.getZ(S);k<c&&(c=k),R<m&&(m=R),O<v&&(v=O),k>b&&(b=k),R>C&&(C=R),O>D&&(D=O)}return this.min.set(c,m,v),this.max.set(b,C,D),this}setFromPoints(a){this.makeEmpty();for(let c=0,m=a.length;c<m;c++)this.expandByPoint(a[c]);return this}setFromCenterAndSize(a,c){const m=Jo.copy(c).multiplyScalar(.5);return this.min.copy(a).sub(m),this.max.copy(a).add(m),this}setFromObject(a){return this.makeEmpty(),this.expandByObject(a)}clone(){return(new this.constructor).copy(this)}copy(a){return this.min.copy(a.min),this.max.copy(a.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(a){return void 0===a&&(console.warn("THREE.Box3: .getCenter() target is now required"),a=new ee),this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return void 0===a&&(console.warn("THREE.Box3: .getSize() target is now required"),a=new ee),this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)}expandByPoint(a){return this.min.min(a),this.max.max(a),this}expandByVector(a){return this.min.sub(a),this.max.add(a),this}expandByScalar(a){return this.min.addScalar(-a),this.max.addScalar(a),this}expandByObject(a){a.updateWorldMatrix(!1,!1);const c=a.geometry;void 0!==c&&(null===c.boundingBox&&c.computeBoundingBox(),Sv.copy(c.boundingBox),Sv.applyMatrix4(a.matrixWorld),this.union(Sv));const m=a.children;for(let v=0,b=m.length;v<b;v++)this.expandByObject(m[v]);return this}containsPoint(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z)}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z}getParameter(a,c){return void 0===c&&(console.warn("THREE.Box3: .getParameter() target is now required"),c=new ee),c.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z)}intersectsSphere(a){return this.clampPoint(a.center,Jo),Jo.distanceToSquared(a.center)<=a.radius*a.radius}intersectsPlane(a){let c,m;return a.normal.x>0?(c=a.normal.x*this.min.x,m=a.normal.x*this.max.x):(c=a.normal.x*this.max.x,m=a.normal.x*this.min.x),a.normal.y>0?(c+=a.normal.y*this.min.y,m+=a.normal.y*this.max.y):(c+=a.normal.y*this.max.y,m+=a.normal.y*this.min.y),a.normal.z>0?(c+=a.normal.z*this.min.z,m+=a.normal.z*this.max.z):(c+=a.normal.z*this.max.z,m+=a.normal.z*this.min.z),c<=-a.constant&&m>=-a.constant}intersectsTriangle(a){if(this.isEmpty())return!1;this.getCenter(ld),Av.subVectors(this.max,ld),od.subVectors(a.a,ld),wh.subVectors(a.b,ld),xh.subVectors(a.c,ld),Dl.subVectors(wh,od),Ha.subVectors(xh,wh),ad.subVectors(od,xh);let c=[0,-Dl.z,Dl.y,0,-Ha.z,Ha.y,0,-ad.z,ad.y,Dl.z,0,-Dl.x,Ha.z,0,-Ha.x,ad.z,0,-ad.x,-Dl.y,Dl.x,0,-Ha.y,Ha.x,0,-ad.y,ad.x,0];return!(!am(c,od,wh,xh,Av)||(c=[1,0,0,0,1,0,0,0,1],!am(c,od,wh,xh,Av)))&&(ep.crossVectors(Dl,Ha),c=[ep.x,ep.y,ep.z],am(c,od,wh,xh,Av))}clampPoint(a,c){return void 0===c&&(console.warn("THREE.Box3: .clampPoint() target is now required"),c=new ee),c.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return Jo.copy(a).clamp(this.min,this.max).sub(a).length()}getBoundingSphere(a){return void 0===a&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(a.center),a.radius=.5*this.getSize(Jo).length(),a}intersect(a){return this.min.max(a.min),this.max.min(a.max),this.isEmpty()&&this.makeEmpty(),this}union(a){return this.min.min(a.min),this.max.max(a.max),this}applyMatrix4(a){return this.isEmpty()||(So[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(a),So[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(a),So[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(a),So[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(a),So[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(a),So[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(a),So[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(a),So[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(a),this.setFromPoints(So)),this}translate(a){return this.min.add(a),this.max.add(a),this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}ho.prototype.isBox3=!0;const So=[new ee,new ee,new ee,new ee,new ee,new ee,new ee,new ee],Jo=new ee,Sv=new ho,od=new ee,wh=new ee,xh=new ee,Dl=new ee,Ha=new ee,ad=new ee,ld=new ee,Av=new ee,ep=new ee,za=new ee;function am(p,a,c,m,v){for(let b=0,C=p.length-3;b<=C;b+=3){za.fromArray(p,b);const D=v.x*Math.abs(za.x)+v.y*Math.abs(za.y)+v.z*Math.abs(za.z),S=a.dot(za),A=c.dot(za),k=m.dot(za);if(Math.max(-Math.max(S,A,k),Math.min(S,A,k))>D)return!1}return!0}const Mb=new ho;class au{constructor(a=new ee,c=-1){this.center=a,this.radius=c}set(a,c){return this.center.copy(a),this.radius=c,this}setFromPoints(a,c){const m=this.center;void 0!==c?m.copy(c):Mb.setFromPoints(a).getCenter(m);let v=0;for(let b=0,C=a.length;b<C;b++)v=Math.max(v,m.distanceToSquared(a[b]));return this.radius=Math.sqrt(v),this}copy(a){return this.center.copy(a.center),this.radius=a.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(a){return a.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(a){return a.distanceTo(this.center)-this.radius}intersectsSphere(a){const c=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=c*c}intersectsBox(a){return a.intersectsSphere(this)}intersectsPlane(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius}clampPoint(a,c){const m=this.center.distanceToSquared(a);return void 0===c&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),c=new ee),c.copy(a),m>this.radius*this.radius&&(c.sub(this.center).normalize(),c.multiplyScalar(this.radius).add(this.center)),c}getBoundingBox(a){return void 0===a&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),a=new ho),this.isEmpty()?(a.makeEmpty(),a):(a.set(this.center,this.center),a.expandByScalar(this.radius),a)}applyMatrix4(a){return this.center.applyMatrix4(a),this.radius=this.radius*a.getMaxScaleOnAxis(),this}translate(a){return this.center.add(a),this}equals(a){return a.center.equals(this.center)&&a.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const cc=new ee,cd=new ee,ja=new ee,lu=new ee,Fs=new ee,ea=new ee,ar=new ee;class ud{constructor(a=new ee,c=new ee(0,0,-1)){this.origin=a,this.direction=c}set(a,c){return this.origin.copy(a),this.direction.copy(c),this}copy(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this}at(a,c){return void 0===c&&(console.warn("THREE.Ray: .at() target is now required"),c=new ee),c.copy(this.direction).multiplyScalar(a).add(this.origin)}lookAt(a){return this.direction.copy(a).sub(this.origin).normalize(),this}recast(a){return this.origin.copy(this.at(a,cc)),this}closestPointToPoint(a,c){void 0===c&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),c=new ee),c.subVectors(a,this.origin);const m=c.dot(this.direction);return m<0?c.copy(this.origin):c.copy(this.direction).multiplyScalar(m).add(this.origin)}distanceToPoint(a){return Math.sqrt(this.distanceSqToPoint(a))}distanceSqToPoint(a){const c=cc.subVectors(a,this.origin).dot(this.direction);return c<0?this.origin.distanceToSquared(a):(cc.copy(this.direction).multiplyScalar(c).add(this.origin),cc.distanceToSquared(a))}distanceSqToSegment(a,c,m,v){cd.copy(a).add(c).multiplyScalar(.5),ja.copy(c).sub(a).normalize(),lu.copy(this.origin).sub(cd);const b=.5*a.distanceTo(c),C=-this.direction.dot(ja),D=lu.dot(this.direction),S=-lu.dot(ja),A=lu.lengthSq(),k=Math.abs(1-C*C);let R,O,L,V;if(k>0)if(R=C*S-D,O=C*D-S,V=b*k,R>=0)if(O>=-V)if(O<=V){const z=1/k;R*=z,O*=z,L=R*(R+C*O+2*D)+O*(C*R+O+2*S)+A}else O=b,R=Math.max(0,-(C*O+D)),L=-R*R+O*(O+2*S)+A;else O=-b,R=Math.max(0,-(C*O+D)),L=-R*R+O*(O+2*S)+A;else O<=-V?(R=Math.max(0,-(-C*b+D)),O=R>0?-b:Math.min(Math.max(-b,-S),b),L=-R*R+O*(O+2*S)+A):O<=V?(R=0,O=Math.min(Math.max(-b,-S),b),L=O*(O+2*S)+A):(R=Math.max(0,-(C*b+D)),O=R>0?b:Math.min(Math.max(-b,-S),b),L=-R*R+O*(O+2*S)+A);else O=C>0?-b:b,R=Math.max(0,-(C*O+D)),L=-R*R+O*(O+2*S)+A;return m&&m.copy(this.direction).multiplyScalar(R).add(this.origin),v&&v.copy(ja).multiplyScalar(O).add(cd),L}intersectSphere(a,c){cc.subVectors(a.center,this.origin);const m=cc.dot(this.direction),v=cc.dot(cc)-m*m,b=a.radius*a.radius;if(v>b)return null;const C=Math.sqrt(b-v),D=m-C,S=m+C;return D<0&&S<0?null:this.at(D<0?S:D,c)}intersectsSphere(a){return this.distanceSqToPoint(a.center)<=a.radius*a.radius}distanceToPlane(a){const c=a.normal.dot(this.direction);if(0===c)return 0===a.distanceToPoint(this.origin)?0:null;const m=-(this.origin.dot(a.normal)+a.constant)/c;return m>=0?m:null}intersectPlane(a,c){const m=this.distanceToPlane(a);return null===m?null:this.at(m,c)}intersectsPlane(a){const c=a.distanceToPoint(this.origin);return 0===c||a.normal.dot(this.direction)*c<0}intersectBox(a,c){let m,v,b,C,D,S;const A=1/this.direction.x,k=1/this.direction.y,R=1/this.direction.z,O=this.origin;return A>=0?(m=(a.min.x-O.x)*A,v=(a.max.x-O.x)*A):(m=(a.max.x-O.x)*A,v=(a.min.x-O.x)*A),k>=0?(b=(a.min.y-O.y)*k,C=(a.max.y-O.y)*k):(b=(a.max.y-O.y)*k,C=(a.min.y-O.y)*k),m>C||b>v||((b>m||m!=m)&&(m=b),(C<v||v!=v)&&(v=C),R>=0?(D=(a.min.z-O.z)*R,S=(a.max.z-O.z)*R):(D=(a.max.z-O.z)*R,S=(a.min.z-O.z)*R),m>S||D>v)||((D>m||m!=m)&&(m=D),(S<v||v!=v)&&(v=S),v<0)?null:this.at(m>=0?m:v,c)}intersectsBox(a){return null!==this.intersectBox(a,cc)}intersectTriangle(a,c,m,v,b){Fs.subVectors(c,a),ea.subVectors(m,a),ar.crossVectors(Fs,ea);let D,C=this.direction.dot(ar);if(C>0){if(v)return null;D=1}else{if(!(C<0))return null;D=-1,C=-C}lu.subVectors(this.origin,a);const S=D*this.direction.dot(ea.crossVectors(lu,ea));if(S<0)return null;const A=D*this.direction.dot(Fs.cross(lu));if(A<0||S+A>C)return null;const k=-D*lu.dot(ar);return k<0?null:this.at(k/C,b)}applyMatrix4(a){return this.origin.applyMatrix4(a),this.direction.transformDirection(a),this}equals(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class fn{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(a,c,m,v,b,C,D,S,A,k,R,O,L,V,z,W){const U=this.elements;return U[0]=a,U[4]=c,U[8]=m,U[12]=v,U[1]=b,U[5]=C,U[9]=D,U[13]=S,U[2]=A,U[6]=k,U[10]=R,U[14]=O,U[3]=L,U[7]=V,U[11]=z,U[15]=W,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new fn).fromArray(this.elements)}copy(a){const c=this.elements,m=a.elements;return c[0]=m[0],c[1]=m[1],c[2]=m[2],c[3]=m[3],c[4]=m[4],c[5]=m[5],c[6]=m[6],c[7]=m[7],c[8]=m[8],c[9]=m[9],c[10]=m[10],c[11]=m[11],c[12]=m[12],c[13]=m[13],c[14]=m[14],c[15]=m[15],this}copyPosition(a){const c=this.elements,m=a.elements;return c[12]=m[12],c[13]=m[13],c[14]=m[14],this}setFromMatrix3(a){const c=a.elements;return this.set(c[0],c[3],c[6],0,c[1],c[4],c[7],0,c[2],c[5],c[8],0,0,0,0,1),this}extractBasis(a,c,m){return a.setFromMatrixColumn(this,0),c.setFromMatrixColumn(this,1),m.setFromMatrixColumn(this,2),this}makeBasis(a,c,m){return this.set(a.x,c.x,m.x,0,a.y,c.y,m.y,0,a.z,c.z,m.z,0,0,0,0,1),this}extractRotation(a){const c=this.elements,m=a.elements,v=1/tp.setFromMatrixColumn(a,0).length(),b=1/tp.setFromMatrixColumn(a,1).length(),C=1/tp.setFromMatrixColumn(a,2).length();return c[0]=m[0]*v,c[1]=m[1]*v,c[2]=m[2]*v,c[3]=0,c[4]=m[4]*b,c[5]=m[5]*b,c[6]=m[6]*b,c[7]=0,c[8]=m[8]*C,c[9]=m[9]*C,c[10]=m[10]*C,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,this}makeRotationFromEuler(a){a&&a.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const c=this.elements,m=a.x,v=a.y,b=a.z,C=Math.cos(m),D=Math.sin(m),S=Math.cos(v),A=Math.sin(v),k=Math.cos(b),R=Math.sin(b);if("XYZ"===a.order){const O=C*k,L=C*R,V=D*k,z=D*R;c[0]=S*k,c[4]=-S*R,c[8]=A,c[1]=L+V*A,c[5]=O-z*A,c[9]=-D*S,c[2]=z-O*A,c[6]=V+L*A,c[10]=C*S}else if("YXZ"===a.order){const O=S*k,L=S*R,V=A*k,z=A*R;c[0]=O+z*D,c[4]=V*D-L,c[8]=C*A,c[1]=C*R,c[5]=C*k,c[9]=-D,c[2]=L*D-V,c[6]=z+O*D,c[10]=C*S}else if("ZXY"===a.order){const O=S*k,L=S*R,V=A*k,z=A*R;c[0]=O-z*D,c[4]=-C*R,c[8]=V+L*D,c[1]=L+V*D,c[5]=C*k,c[9]=z-O*D,c[2]=-C*A,c[6]=D,c[10]=C*S}else if("ZYX"===a.order){const O=C*k,L=C*R,V=D*k,z=D*R;c[0]=S*k,c[4]=V*A-L,c[8]=O*A+z,c[1]=S*R,c[5]=z*A+O,c[9]=L*A-V,c[2]=-A,c[6]=D*S,c[10]=C*S}else if("YZX"===a.order){const O=C*S,L=C*A,V=D*S,z=D*A;c[0]=S*k,c[4]=z-O*R,c[8]=V*R+L,c[1]=R,c[5]=C*k,c[9]=-D*k,c[2]=-A*k,c[6]=L*R+V,c[10]=O-z*R}else if("XZY"===a.order){const O=C*S,L=C*A,V=D*S,z=D*A;c[0]=S*k,c[4]=-R,c[8]=A*k,c[1]=O*R+z,c[5]=C*k,c[9]=L*R-V,c[2]=V*R-L,c[6]=D*k,c[10]=z*R+O}return c[3]=0,c[7]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,this}makeRotationFromQuaternion(a){return this.compose(XD,a,cC)}lookAt(a,c,m){const v=this.elements;return fo.subVectors(a,c),0===fo.lengthSq()&&(fo.z=1),fo.normalize(),El.crossVectors(m,fo),0===El.lengthSq()&&(1===Math.abs(m.z)?fo.x+=1e-4:fo.z+=1e-4,fo.normalize(),El.crossVectors(m,fo)),El.normalize(),Ch.crossVectors(fo,El),v[0]=El.x,v[4]=Ch.x,v[8]=fo.x,v[1]=El.y,v[5]=Ch.y,v[9]=fo.y,v[2]=El.z,v[6]=Ch.z,v[10]=fo.z,this}multiply(a,c){return void 0!==c?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,c)):this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,c){const m=a.elements,v=c.elements,b=this.elements,C=m[0],D=m[4],S=m[8],A=m[12],k=m[1],R=m[5],O=m[9],L=m[13],V=m[2],z=m[6],W=m[10],U=m[14],B=m[3],te=m[7],X=m[11],se=m[15],K=v[0],he=v[4],Ie=v[8],xe=v[12],Pe=v[1],Be=v[5],Ke=v[9],Ue=v[13],De=v[2],je=v[6],st=v[10],Ct=v[14],jt=v[3],qt=v[7],an=v[11],nn=v[15];return b[0]=C*K+D*Pe+S*De+A*jt,b[4]=C*he+D*Be+S*je+A*qt,b[8]=C*Ie+D*Ke+S*st+A*an,b[12]=C*xe+D*Ue+S*Ct+A*nn,b[1]=k*K+R*Pe+O*De+L*jt,b[5]=k*he+R*Be+O*je+L*qt,b[9]=k*Ie+R*Ke+O*st+L*an,b[13]=k*xe+R*Ue+O*Ct+L*nn,b[2]=V*K+z*Pe+W*De+U*jt,b[6]=V*he+z*Be+W*je+U*qt,b[10]=V*Ie+z*Ke+W*st+U*an,b[14]=V*xe+z*Ue+W*Ct+U*nn,b[3]=B*K+te*Pe+X*De+se*jt,b[7]=B*he+te*Be+X*je+se*qt,b[11]=B*Ie+te*Ke+X*st+se*an,b[15]=B*xe+te*Ue+X*Ct+se*nn,this}multiplyScalar(a){const c=this.elements;return c[0]*=a,c[4]*=a,c[8]*=a,c[12]*=a,c[1]*=a,c[5]*=a,c[9]*=a,c[13]*=a,c[2]*=a,c[6]*=a,c[10]*=a,c[14]*=a,c[3]*=a,c[7]*=a,c[11]*=a,c[15]*=a,this}determinant(){const a=this.elements,c=a[0],m=a[4],v=a[8],b=a[12],C=a[1],D=a[5],S=a[9],A=a[13],k=a[2],R=a[6],O=a[10],L=a[14];return a[3]*(+b*S*R-v*A*R-b*D*O+m*A*O+v*D*L-m*S*L)+a[7]*(+c*S*L-c*A*O+b*C*O-v*C*L+v*A*k-b*S*k)+a[11]*(+c*A*R-c*D*L-b*C*R+m*C*L+b*D*k-m*A*k)+a[15]*(-v*D*k-c*S*R+c*D*O+v*C*R-m*C*O+m*S*k)}transpose(){const a=this.elements;let c;return c=a[1],a[1]=a[4],a[4]=c,c=a[2],a[2]=a[8],a[8]=c,c=a[6],a[6]=a[9],a[9]=c,c=a[3],a[3]=a[12],a[12]=c,c=a[7],a[7]=a[13],a[13]=c,c=a[11],a[11]=a[14],a[14]=c,this}setPosition(a,c,m){const v=this.elements;return a.isVector3?(v[12]=a.x,v[13]=a.y,v[14]=a.z):(v[12]=a,v[13]=c,v[14]=m),this}invert(){const a=this.elements,c=a[0],m=a[1],v=a[2],b=a[3],C=a[4],D=a[5],S=a[6],A=a[7],k=a[8],R=a[9],O=a[10],L=a[11],V=a[12],z=a[13],W=a[14],U=a[15],B=R*W*A-z*O*A+z*S*L-D*W*L-R*S*U+D*O*U,te=V*O*A-k*W*A-V*S*L+C*W*L+k*S*U-C*O*U,X=k*z*A-V*R*A+V*D*L-C*z*L-k*D*U+C*R*U,se=V*R*S-k*z*S-V*D*O+C*z*O+k*D*W-C*R*W,K=c*B+m*te+v*X+b*se;if(0===K)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const he=1/K;return a[0]=B*he,a[1]=(z*O*b-R*W*b-z*v*L+m*W*L+R*v*U-m*O*U)*he,a[2]=(D*W*b-z*S*b+z*v*A-m*W*A-D*v*U+m*S*U)*he,a[3]=(R*S*b-D*O*b-R*v*A+m*O*A+D*v*L-m*S*L)*he,a[4]=te*he,a[5]=(k*W*b-V*O*b+V*v*L-c*W*L-k*v*U+c*O*U)*he,a[6]=(V*S*b-C*W*b-V*v*A+c*W*A+C*v*U-c*S*U)*he,a[7]=(C*O*b-k*S*b+k*v*A-c*O*A-C*v*L+c*S*L)*he,a[8]=X*he,a[9]=(V*R*b-k*z*b-V*m*L+c*z*L+k*m*U-c*R*U)*he,a[10]=(C*z*b-V*D*b+V*m*A-c*z*A-C*m*U+c*D*U)*he,a[11]=(k*D*b-C*R*b-k*m*A+c*R*A+C*m*L-c*D*L)*he,a[12]=se*he,a[13]=(k*z*v-V*R*v+V*m*O-c*z*O-k*m*W+c*R*W)*he,a[14]=(V*D*v-C*z*v-V*m*S+c*z*S+C*m*W-c*D*W)*he,a[15]=(C*R*v-k*D*v+k*m*S-c*R*S-C*m*O+c*D*O)*he,this}scale(a){const c=this.elements,m=a.x,v=a.y,b=a.z;return c[0]*=m,c[4]*=v,c[8]*=b,c[1]*=m,c[5]*=v,c[9]*=b,c[2]*=m,c[6]*=v,c[10]*=b,c[3]*=m,c[7]*=v,c[11]*=b,this}getMaxScaleOnAxis(){const a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))}makeTranslation(a,c,m){return this.set(1,0,0,a,0,1,0,c,0,0,1,m,0,0,0,1),this}makeRotationX(a){const c=Math.cos(a),m=Math.sin(a);return this.set(1,0,0,0,0,c,-m,0,0,m,c,0,0,0,0,1),this}makeRotationY(a){const c=Math.cos(a),m=Math.sin(a);return this.set(c,0,m,0,0,1,0,0,-m,0,c,0,0,0,0,1),this}makeRotationZ(a){const c=Math.cos(a),m=Math.sin(a);return this.set(c,-m,0,0,m,c,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(a,c){const m=Math.cos(c),v=Math.sin(c),b=1-m,C=a.x,D=a.y,S=a.z,A=b*C,k=b*D;return this.set(A*C+m,A*D-v*S,A*S+v*D,0,A*D+v*S,k*D+m,k*S-v*C,0,A*S-v*D,k*S+v*C,b*S*S+m,0,0,0,0,1),this}makeScale(a,c,m){return this.set(a,0,0,0,0,c,0,0,0,0,m,0,0,0,0,1),this}makeShear(a,c,m){return this.set(1,c,m,0,a,1,m,0,a,c,1,0,0,0,0,1),this}compose(a,c,m){const v=this.elements,b=c._x,C=c._y,D=c._z,S=c._w,A=b+b,k=C+C,R=D+D,O=b*A,L=b*k,V=b*R,z=C*k,W=C*R,U=D*R,B=S*A,te=S*k,X=S*R,se=m.x,K=m.y,he=m.z;return v[0]=(1-(z+U))*se,v[1]=(L+X)*se,v[2]=(V-te)*se,v[3]=0,v[4]=(L-X)*K,v[5]=(1-(O+U))*K,v[6]=(W+B)*K,v[7]=0,v[8]=(V+te)*he,v[9]=(W-B)*he,v[10]=(1-(O+z))*he,v[11]=0,v[12]=a.x,v[13]=a.y,v[14]=a.z,v[15]=1,this}decompose(a,c,m){const v=this.elements;let b=tp.set(v[0],v[1],v[2]).length();const C=tp.set(v[4],v[5],v[6]).length(),D=tp.set(v[8],v[9],v[10]).length();this.determinant()<0&&(b=-b),a.x=v[12],a.y=v[13],a.z=v[14],Wa.copy(this);const A=1/b,k=1/C,R=1/D;return Wa.elements[0]*=A,Wa.elements[1]*=A,Wa.elements[2]*=A,Wa.elements[4]*=k,Wa.elements[5]*=k,Wa.elements[6]*=k,Wa.elements[8]*=R,Wa.elements[9]*=R,Wa.elements[10]*=R,c.setFromRotationMatrix(Wa),m.x=b,m.y=C,m.z=D,this}makePerspective(a,c,m,v,b,C){void 0===C&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const D=this.elements,A=2*b/(m-v),k=(c+a)/(c-a),R=(m+v)/(m-v),O=-(C+b)/(C-b),L=-2*C*b/(C-b);return D[0]=2*b/(c-a),D[4]=0,D[8]=k,D[12]=0,D[1]=0,D[5]=A,D[9]=R,D[13]=0,D[2]=0,D[6]=0,D[10]=O,D[14]=L,D[3]=0,D[7]=0,D[11]=-1,D[15]=0,this}makeOrthographic(a,c,m,v,b,C){const D=this.elements,S=1/(c-a),A=1/(m-v),k=1/(C-b),R=(c+a)*S,O=(m+v)*A,L=(C+b)*k;return D[0]=2*S,D[4]=0,D[8]=0,D[12]=-R,D[1]=0,D[5]=2*A,D[9]=0,D[13]=-O,D[2]=0,D[6]=0,D[10]=-2*k,D[14]=-L,D[3]=0,D[7]=0,D[11]=0,D[15]=1,this}equals(a){const c=this.elements,m=a.elements;for(let v=0;v<16;v++)if(c[v]!==m[v])return!1;return!0}fromArray(a,c=0){for(let m=0;m<16;m++)this.elements[m]=a[m+c];return this}toArray(a=[],c=0){const m=this.elements;return a[c]=m[0],a[c+1]=m[1],a[c+2]=m[2],a[c+3]=m[3],a[c+4]=m[4],a[c+5]=m[5],a[c+6]=m[6],a[c+7]=m[7],a[c+8]=m[8],a[c+9]=m[9],a[c+10]=m[10],a[c+11]=m[11],a[c+12]=m[12],a[c+13]=m[13],a[c+14]=m[14],a[c+15]=m[15],a}}fn.prototype.isMatrix4=!0;const tp=new ee,Wa=new fn,XD=new ee(0,0,0),cC=new ee(1,1,1),El=new ee,Ch=new ee,fo=new ee,lm=new fn,Db=new Fr;class Mh{constructor(a=0,c=0,m=0,v=Mh.DefaultOrder){this._x=a,this._y=c,this._z=m,this._order=v}get x(){return this._x}set x(a){this._x=a,this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a,this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a,this._onChangeCallback()}get order(){return this._order}set order(a){this._order=a,this._onChangeCallback()}set(a,c,m,v){return this._x=a,this._y=c,this._z=m,this._order=v||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._order=a._order,this._onChangeCallback(),this}setFromRotationMatrix(a,c,m){const v=Ne.clamp,b=a.elements,C=b[0],D=b[4],S=b[8],A=b[1],k=b[5],R=b[9],O=b[2],L=b[6],V=b[10];switch(c=c||this._order){case"XYZ":this._y=Math.asin(v(S,-1,1)),Math.abs(S)<.9999999?(this._x=Math.atan2(-R,V),this._z=Math.atan2(-D,C)):(this._x=Math.atan2(L,k),this._z=0);break;case"YXZ":this._x=Math.asin(-v(R,-1,1)),Math.abs(R)<.9999999?(this._y=Math.atan2(S,V),this._z=Math.atan2(A,k)):(this._y=Math.atan2(-O,C),this._z=0);break;case"ZXY":this._x=Math.asin(v(L,-1,1)),Math.abs(L)<.9999999?(this._y=Math.atan2(-O,V),this._z=Math.atan2(-D,k)):(this._y=0,this._z=Math.atan2(A,C));break;case"ZYX":this._y=Math.asin(-v(O,-1,1)),Math.abs(O)<.9999999?(this._x=Math.atan2(L,V),this._z=Math.atan2(A,C)):(this._x=0,this._z=Math.atan2(-D,k));break;case"YZX":this._z=Math.asin(v(A,-1,1)),Math.abs(A)<.9999999?(this._x=Math.atan2(-R,k),this._y=Math.atan2(-O,C)):(this._x=0,this._y=Math.atan2(S,V));break;case"XZY":this._z=Math.asin(-v(D,-1,1)),Math.abs(D)<.9999999?(this._x=Math.atan2(L,k),this._y=Math.atan2(S,C)):(this._x=Math.atan2(-R,V),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+c)}return this._order=c,!1!==m&&this._onChangeCallback(),this}setFromQuaternion(a,c,m){return lm.makeRotationFromQuaternion(a),this.setFromRotationMatrix(lm,c,m)}setFromVector3(a,c){return this.set(a.x,a.y,a.z,c||this._order)}reorder(a){return Db.setFromEuler(this),this.setFromQuaternion(Db,a)}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order}fromArray(a){return this._x=a[0],this._y=a[1],this._z=a[2],void 0!==a[3]&&(this._order=a[3]),this._onChangeCallback(),this}toArray(a=[],c=0){return a[c]=this._x,a[c+1]=this._y,a[c+2]=this._z,a[c+3]=this._order,a}toVector3(a){return a?a.set(this._x,this._y,this._z):new ee(this._x,this._y,this._z)}_onChange(a){return this._onChangeCallback=a,this}_onChangeCallback(){}}Mh.prototype.isEuler=!0,Mh.DefaultOrder="XYZ",Mh.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class uc{constructor(){this.mask=1}set(a){this.mask=1<<a|0}enable(a){this.mask|=1<<a|0}enableAll(){this.mask=-1}toggle(a){this.mask^=1<<a|0}disable(a){this.mask&=~(1<<a|0)}disableAll(){this.mask=0}test(a){return 0!=(this.mask&a.mask)}}let cm=0;const uC=new ee,np=new Fr,Ls=new fn,Dh=new ee,Eh=new ee,JD=new ee,dc=new Fr,Qi=new ee(1,0,0),Sl=new ee(0,1,0),Ai=new ee(0,0,1),Xi={type:"added"},Al={type:"removed"};function it(){Object.defineProperty(this,"id",{value:cm++}),this.uuid=Ne.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=it.DefaultUp.clone();const p=new ee,a=new Mh,c=new Fr,m=new ee(1,1,1);a._onChange(function v(){c.setFromEuler(a,!1)}),c._onChange(function b(){a.setFromQuaternion(c,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:p},rotation:{configurable:!0,enumerable:!0,value:a},quaternion:{configurable:!0,enumerable:!0,value:c},scale:{configurable:!0,enumerable:!0,value:m},modelViewMatrix:{value:new fn},normalMatrix:{value:new cs}}),this.matrix=new fn,this.matrixWorld=new fn,this.matrixAutoUpdate=it.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new uc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}it.DefaultUp=new ee(0,1,0),it.DefaultMatrixAutoUpdate=!0,it.prototype=Object.assign(Object.create(xl.prototype),{constructor:it,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(p){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(p),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(p){return this.quaternion.premultiply(p),this},setRotationFromAxisAngle:function(p,a){this.quaternion.setFromAxisAngle(p,a)},setRotationFromEuler:function(p){this.quaternion.setFromEuler(p,!0)},setRotationFromMatrix:function(p){this.quaternion.setFromRotationMatrix(p)},setRotationFromQuaternion:function(p){this.quaternion.copy(p)},rotateOnAxis:function(p,a){return np.setFromAxisAngle(p,a),this.quaternion.multiply(np),this},rotateOnWorldAxis:function(p,a){return np.setFromAxisAngle(p,a),this.quaternion.premultiply(np),this},rotateX:function(p){return this.rotateOnAxis(Qi,p)},rotateY:function(p){return this.rotateOnAxis(Sl,p)},rotateZ:function(p){return this.rotateOnAxis(Ai,p)},translateOnAxis:function(p,a){return uC.copy(p).applyQuaternion(this.quaternion),this.position.add(uC.multiplyScalar(a)),this},translateX:function(p){return this.translateOnAxis(Qi,p)},translateY:function(p){return this.translateOnAxis(Sl,p)},translateZ:function(p){return this.translateOnAxis(Ai,p)},localToWorld:function(p){return p.applyMatrix4(this.matrixWorld)},worldToLocal:function(p){return p.applyMatrix4(Ls.copy(this.matrixWorld).invert())},lookAt:function(p,a,c){p.isVector3?Dh.copy(p):Dh.set(p,a,c);const m=this.parent;this.updateWorldMatrix(!0,!1),Eh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ls.lookAt(Eh,Dh,this.up):Ls.lookAt(Dh,Eh,this.up),this.quaternion.setFromRotationMatrix(Ls),m&&(Ls.extractRotation(m.matrixWorld),np.setFromRotationMatrix(Ls),this.quaternion.premultiply(np.invert()))},add:function(p){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.add(arguments[a]);return this}return p===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",p),this):(p&&p.isObject3D?(null!==p.parent&&p.parent.remove(p),p.parent=this,this.children.push(p),p.dispatchEvent(Xi)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",p),this)},remove:function(p){if(arguments.length>1){for(let c=0;c<arguments.length;c++)this.remove(arguments[c]);return this}const a=this.children.indexOf(p);return-1!==a&&(p.parent=null,this.children.splice(a,1),p.dispatchEvent(Al)),this},clear:function(){for(let p=0;p<this.children.length;p++){const a=this.children[p];a.parent=null,a.dispatchEvent(Al)}return this.children.length=0,this},attach:function(p){return this.updateWorldMatrix(!0,!1),Ls.copy(this.matrixWorld).invert(),null!==p.parent&&(p.parent.updateWorldMatrix(!0,!1),Ls.multiply(p.parent.matrixWorld)),p.applyMatrix4(Ls),this.add(p),p.updateWorldMatrix(!1,!0),this},getObjectById:function(p){return this.getObjectByProperty("id",p)},getObjectByName:function(p){return this.getObjectByProperty("name",p)},getObjectByProperty:function(p,a){if(this[p]===a)return this;for(let c=0,m=this.children.length;c<m;c++){const b=this.children[c].getObjectByProperty(p,a);if(void 0!==b)return b}},getWorldPosition:function(p){return void 0===p&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),p=new ee),this.updateWorldMatrix(!0,!1),p.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(p){return void 0===p&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),p=new Fr),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Eh,p,JD),p},getWorldScale:function(p){return void 0===p&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),p=new ee),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Eh,dc,p),p},getWorldDirection:function(p){void 0===p&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),p=new ee),this.updateWorldMatrix(!0,!1);const a=this.matrixWorld.elements;return p.set(a[8],a[9],a[10]).normalize()},raycast:function(){},traverse:function(p){p(this);const a=this.children;for(let c=0,m=a.length;c<m;c++)a[c].traverse(p)},traverseVisible:function(p){if(!1===this.visible)return;p(this);const a=this.children;for(let c=0,m=a.length;c<m;c++)a[c].traverseVisible(p)},traverseAncestors:function(p){const a=this.parent;null!==a&&(p(a),a.traverseAncestors(p))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(p){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||p)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,p=!0);const a=this.children;for(let c=0,m=a.length;c<m;c++)a[c].updateMatrixWorld(p)},updateWorldMatrix:function(p,a){const c=this.parent;if(!0===p&&null!==c&&c.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===a){const m=this.children;for(let v=0,b=m.length;v<b;v++)m[v].updateWorldMatrix(!1,!0)}},toJSON:function(p){const a=void 0===p||"string"==typeof p,c={};a&&(p={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},c.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const m={};function v(C,D){return void 0===C[D.uuid]&&(C[D.uuid]=D.toJSON(p)),D.uuid}if(m.uuid=this.uuid,m.type=this.type,""!==this.name&&(m.name=this.name),!0===this.castShadow&&(m.castShadow=!0),!0===this.receiveShadow&&(m.receiveShadow=!0),!1===this.visible&&(m.visible=!1),!1===this.frustumCulled&&(m.frustumCulled=!1),0!==this.renderOrder&&(m.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(m.userData=this.userData),m.layers=this.layers.mask,m.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(m.matrixAutoUpdate=!1),this.isInstancedMesh&&(m.type="InstancedMesh",m.count=this.count,m.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){m.geometry=v(p.geometries,this.geometry);const C=this.geometry.parameters;if(void 0!==C&&void 0!==C.shapes){const D=C.shapes;if(Array.isArray(D))for(let S=0,A=D.length;S<A;S++)v(p.shapes,D[S]);else v(p.shapes,D)}}if(this.isSkinnedMesh&&(m.bindMode=this.bindMode,m.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(v(p.skeletons,this.skeleton),m.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const C=[];for(let D=0,S=this.material.length;D<S;D++)C.push(v(p.materials,this.material[D]));m.material=C}else m.material=v(p.materials,this.material);if(this.children.length>0){m.children=[];for(let C=0;C<this.children.length;C++)m.children.push(this.children[C].toJSON(p).object)}if(this.animations.length>0){m.animations=[];for(let C=0;C<this.animations.length;C++)m.animations.push(v(p.animations,this.animations[C]))}if(a){const C=b(p.geometries),D=b(p.materials),S=b(p.textures),A=b(p.images),k=b(p.shapes),R=b(p.skeletons),O=b(p.animations);C.length>0&&(c.geometries=C),D.length>0&&(c.materials=D),S.length>0&&(c.textures=S),A.length>0&&(c.images=A),k.length>0&&(c.shapes=k),R.length>0&&(c.skeletons=R),O.length>0&&(c.animations=O)}return c.object=m,c;function b(C){const D=[];for(const S in C){const A=C[S];delete A.metadata,D.push(A)}return D}},clone:function(p){return(new this.constructor).copy(this,p)},copy:function(p,a=!0){if(this.name=p.name,this.up.copy(p.up),this.position.copy(p.position),this.rotation.order=p.rotation.order,this.quaternion.copy(p.quaternion),this.scale.copy(p.scale),this.matrix.copy(p.matrix),this.matrixWorld.copy(p.matrixWorld),this.matrixAutoUpdate=p.matrixAutoUpdate,this.matrixWorldNeedsUpdate=p.matrixWorldNeedsUpdate,this.layers.mask=p.layers.mask,this.visible=p.visible,this.castShadow=p.castShadow,this.receiveShadow=p.receiveShadow,this.frustumCulled=p.frustumCulled,this.renderOrder=p.renderOrder,this.userData=JSON.parse(JSON.stringify(p.userData)),!0===a)for(let c=0;c<p.children.length;c++)this.add(p.children[c].clone());return this}});const dd=new ee,Sh=new ee,cu=new cs;class ci{constructor(a=new ee(1,0,0),c=0){this.normal=a,this.constant=c}set(a,c){return this.normal.copy(a),this.constant=c,this}setComponents(a,c,m,v){return this.normal.set(a,c,m),this.constant=v,this}setFromNormalAndCoplanarPoint(a,c){return this.normal.copy(a),this.constant=-c.dot(this.normal),this}setFromCoplanarPoints(a,c,m){const v=dd.subVectors(m,c).cross(Sh.subVectors(a,c)).normalize();return this.setFromNormalAndCoplanarPoint(v,a),this}copy(a){return this.normal.copy(a.normal),this.constant=a.constant,this}normalize(){const a=1/this.normal.length();return this.normal.multiplyScalar(a),this.constant*=a,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(a){return this.normal.dot(a)+this.constant}distanceToSphere(a){return this.distanceToPoint(a.center)-a.radius}projectPoint(a,c){return void 0===c&&(console.warn("THREE.Plane: .projectPoint() target is now required"),c=new ee),c.copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)}intersectLine(a,c){void 0===c&&(console.warn("THREE.Plane: .intersectLine() target is now required"),c=new ee);const m=a.delta(dd),v=this.normal.dot(m);if(0===v)return 0===this.distanceToPoint(a.start)?c.copy(a.start):void 0;const b=-(a.start.dot(this.normal)+this.constant)/v;return b<0||b>1?void 0:c.copy(m).multiplyScalar(b).add(a.start)}intersectsLine(a){const c=this.distanceToPoint(a.start),m=this.distanceToPoint(a.end);return c<0&&m>0||m<0&&c>0}intersectsBox(a){return a.intersectsPlane(this)}intersectsSphere(a){return a.intersectsPlane(this)}coplanarPoint(a){return void 0===a&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),a=new ee),a.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(a,c){const m=c||cu.getNormalMatrix(a),v=this.coplanarPoint(dd).applyMatrix4(a),b=this.normal.applyMatrix3(m).normalize();return this.constant=-v.dot(b),this}translate(a){return this.constant-=a.dot(this.normal),this}equals(a){return a.normal.equals(this.normal)&&a.constant===this.constant}clone(){return(new this.constructor).copy(this)}}ci.prototype.isPlane=!0;const Ji=new ee,Ci=new ee,Ah=new ee,At=new ee,hd=new ee,Tl=new ee,Th=new ee,Ao=new ee,ip=new ee,Jn=new ee;class Ti{constructor(a=new ee,c=new ee,m=new ee){this.a=a,this.b=c,this.c=m}static getNormal(a,c,m,v){void 0===v&&(console.warn("THREE.Triangle: .getNormal() target is now required"),v=new ee),v.subVectors(m,c),Ji.subVectors(a,c),v.cross(Ji);const b=v.lengthSq();return b>0?v.multiplyScalar(1/Math.sqrt(b)):v.set(0,0,0)}static getBarycoord(a,c,m,v,b){Ji.subVectors(v,c),Ci.subVectors(m,c),Ah.subVectors(a,c);const C=Ji.dot(Ji),D=Ji.dot(Ci),S=Ji.dot(Ah),A=Ci.dot(Ci),k=Ci.dot(Ah),R=C*A-D*D;if(void 0===b&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),b=new ee),0===R)return b.set(-2,-1,-1);const O=1/R,L=(A*S-D*k)*O,V=(C*k-D*S)*O;return b.set(1-L-V,V,L)}static containsPoint(a,c,m,v){return this.getBarycoord(a,c,m,v,At),At.x>=0&&At.y>=0&&At.x+At.y<=1}static getUV(a,c,m,v,b,C,D,S){return this.getBarycoord(a,c,m,v,At),S.set(0,0),S.addScaledVector(b,At.x),S.addScaledVector(C,At.y),S.addScaledVector(D,At.z),S}static isFrontFacing(a,c,m,v){return Ji.subVectors(m,c),Ci.subVectors(a,c),Ji.cross(Ci).dot(v)<0}set(a,c,m){return this.a.copy(a),this.b.copy(c),this.c.copy(m),this}setFromPointsAndIndices(a,c,m,v){return this.a.copy(a[c]),this.b.copy(a[m]),this.c.copy(a[v]),this}clone(){return(new this.constructor).copy(this)}copy(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this}getArea(){return Ji.subVectors(this.c,this.b),Ci.subVectors(this.a,this.b),.5*Ji.cross(Ci).length()}getMidpoint(a){return void 0===a&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),a=new ee),a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(a){return Ti.getNormal(this.a,this.b,this.c,a)}getPlane(a){return void 0===a&&(console.warn("THREE.Triangle: .getPlane() target is now required"),a=new ci),a.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(a,c){return Ti.getBarycoord(a,this.a,this.b,this.c,c)}getUV(a,c,m,v,b){return Ti.getUV(a,this.a,this.b,this.c,c,m,v,b)}containsPoint(a){return Ti.containsPoint(a,this.a,this.b,this.c)}isFrontFacing(a){return Ti.isFrontFacing(this.a,this.b,this.c,a)}intersectsBox(a){return a.intersectsTriangle(this)}closestPointToPoint(a,c){void 0===c&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),c=new ee);const m=this.a,v=this.b,b=this.c;let C,D;hd.subVectors(v,m),Tl.subVectors(b,m),Ao.subVectors(a,m);const S=hd.dot(Ao),A=Tl.dot(Ao);if(S<=0&&A<=0)return c.copy(m);ip.subVectors(a,v);const k=hd.dot(ip),R=Tl.dot(ip);if(k>=0&&R<=k)return c.copy(v);const O=S*R-k*A;if(O<=0&&S>=0&&k<=0)return C=S/(S-k),c.copy(m).addScaledVector(hd,C);Jn.subVectors(a,b);const L=hd.dot(Jn),V=Tl.dot(Jn);if(V>=0&&L<=V)return c.copy(b);const z=L*A-S*V;if(z<=0&&A>=0&&V<=0)return D=A/(A-V),c.copy(m).addScaledVector(Tl,D);const W=k*V-L*R;if(W<=0&&R-k>=0&&L-V>=0)return Th.subVectors(b,v),D=(R-k)/(R-k+(L-V)),c.copy(v).addScaledVector(Th,D);const U=1/(W+z+O);return C=z*U,D=O*U,c.copy(m).addScaledVector(hd,C).addScaledVector(Tl,D)}equals(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}}let um=0;function lr(){Object.defineProperty(this,"id",{value:um++}),this.uuid=Ne.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=wt,this.side=ye,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Vt,this.blendDst=An,this.blendEquation=Rt,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ni,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Eo,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Qf,this.stencilZFail=Qf,this.stencilZPass=Qf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}lr.prototype=Object.assign(Object.create(xl.prototype),{constructor:lr,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(p){if(void 0!==p)for(const a in p){const c=p[a];if(void 0===c){console.warn("THREE.Material: '"+a+"' parameter is undefined.");continue}if("shading"===a){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=c===Le;continue}const m=this[a];void 0!==m?m&&m.isColor?m.set(c):m&&m.isVector3&&c&&c.isVector3?m.copy(c):this[a]=c:console.warn("THREE."+this.type+": '"+a+"' is not a property of this material.")}},toJSON:function(p){const a=void 0===p||"string"==typeof p;a&&(p={textures:{},images:{}});const c={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function m(v){const b=[];for(const C in v){const D=v[C];delete D.metadata,b.push(D)}return b}if(c.uuid=this.uuid,c.type=this.type,""!==this.name&&(c.name=this.name),this.color&&this.color.isColor&&(c.color=this.color.getHex()),void 0!==this.roughness&&(c.roughness=this.roughness),void 0!==this.metalness&&(c.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(c.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(c.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(c.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(c.specular=this.specular.getHex()),void 0!==this.shininess&&(c.shininess=this.shininess),void 0!==this.clearcoat&&(c.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(c.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(c.clearcoatMap=this.clearcoatMap.toJSON(p).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(c.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(p).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(c.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(p).uuid,c.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(c.map=this.map.toJSON(p).uuid),this.matcap&&this.matcap.isTexture&&(c.matcap=this.matcap.toJSON(p).uuid),this.alphaMap&&this.alphaMap.isTexture&&(c.alphaMap=this.alphaMap.toJSON(p).uuid),this.lightMap&&this.lightMap.isTexture&&(c.lightMap=this.lightMap.toJSON(p).uuid,c.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(c.aoMap=this.aoMap.toJSON(p).uuid,c.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(c.bumpMap=this.bumpMap.toJSON(p).uuid,c.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(c.normalMap=this.normalMap.toJSON(p).uuid,c.normalMapType=this.normalMapType,c.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(c.displacementMap=this.displacementMap.toJSON(p).uuid,c.displacementScale=this.displacementScale,c.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(c.roughnessMap=this.roughnessMap.toJSON(p).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(c.metalnessMap=this.metalnessMap.toJSON(p).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(c.emissiveMap=this.emissiveMap.toJSON(p).uuid),this.specularMap&&this.specularMap.isTexture&&(c.specularMap=this.specularMap.toJSON(p).uuid),this.envMap&&this.envMap.isTexture&&(c.envMap=this.envMap.toJSON(p).uuid,c.reflectivity=this.reflectivity,c.refractionRatio=this.refractionRatio,void 0!==this.combine&&(c.combine=this.combine),void 0!==this.envMapIntensity&&(c.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(c.gradientMap=this.gradientMap.toJSON(p).uuid),void 0!==this.size&&(c.size=this.size),void 0!==this.sizeAttenuation&&(c.sizeAttenuation=this.sizeAttenuation),this.blending!==wt&&(c.blending=this.blending),this.side!==ye&&(c.side=this.side),this.vertexColors&&(c.vertexColors=!0),this.opacity<1&&(c.opacity=this.opacity),!0===this.transparent&&(c.transparent=this.transparent),c.depthFunc=this.depthFunc,c.depthTest=this.depthTest,c.depthWrite=this.depthWrite,c.stencilWrite=this.stencilWrite,c.stencilWriteMask=this.stencilWriteMask,c.stencilFunc=this.stencilFunc,c.stencilRef=this.stencilRef,c.stencilFuncMask=this.stencilFuncMask,c.stencilFail=this.stencilFail,c.stencilZFail=this.stencilZFail,c.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(c.rotation=this.rotation),!0===this.polygonOffset&&(c.polygonOffset=!0),0!==this.polygonOffsetFactor&&(c.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(c.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(c.linewidth=this.linewidth),void 0!==this.dashSize&&(c.dashSize=this.dashSize),void 0!==this.gapSize&&(c.gapSize=this.gapSize),void 0!==this.scale&&(c.scale=this.scale),!0===this.dithering&&(c.dithering=!0),this.alphaTest>0&&(c.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(c.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(c.wireframe=this.wireframe),this.wireframeLinewidth>1&&(c.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(c.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(c.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(c.morphTargets=!0),!0===this.morphNormals&&(c.morphNormals=!0),!0===this.skinning&&(c.skinning=!0),!0===this.flatShading&&(c.flatShading=this.flatShading),!1===this.visible&&(c.visible=!1),!1===this.toneMapped&&(c.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(c.userData=this.userData),a){const v=m(p.textures),b=m(p.images);v.length>0&&(c.textures=v),b.length>0&&(c.images=b)}return c},clone:function(){return(new this.constructor).copy(this)},copy:function(p){this.name=p.name,this.fog=p.fog,this.blending=p.blending,this.side=p.side,this.vertexColors=p.vertexColors,this.opacity=p.opacity,this.transparent=p.transparent,this.blendSrc=p.blendSrc,this.blendDst=p.blendDst,this.blendEquation=p.blendEquation,this.blendSrcAlpha=p.blendSrcAlpha,this.blendDstAlpha=p.blendDstAlpha,this.blendEquationAlpha=p.blendEquationAlpha,this.depthFunc=p.depthFunc,this.depthTest=p.depthTest,this.depthWrite=p.depthWrite,this.stencilWriteMask=p.stencilWriteMask,this.stencilFunc=p.stencilFunc,this.stencilRef=p.stencilRef,this.stencilFuncMask=p.stencilFuncMask,this.stencilFail=p.stencilFail,this.stencilZFail=p.stencilZFail,this.stencilZPass=p.stencilZPass,this.stencilWrite=p.stencilWrite;const a=p.clippingPlanes;let c=null;if(null!==a){const m=a.length;c=new Array(m);for(let v=0;v!==m;++v)c[v]=a[v].clone()}return this.clippingPlanes=c,this.clipIntersection=p.clipIntersection,this.clipShadows=p.clipShadows,this.shadowSide=p.shadowSide,this.colorWrite=p.colorWrite,this.precision=p.precision,this.polygonOffset=p.polygonOffset,this.polygonOffsetFactor=p.polygonOffsetFactor,this.polygonOffsetUnits=p.polygonOffsetUnits,this.dithering=p.dithering,this.alphaTest=p.alphaTest,this.premultipliedAlpha=p.premultipliedAlpha,this.visible=p.visible,this.toneMapped=p.toneMapped,this.userData=JSON.parse(JSON.stringify(p.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(lr.prototype,"needsUpdate",{set:function(p){!0===p&&this.version++}});const Q={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},$n={h:0,s:0,l:0},Ya={h:0,s:0,l:0};function Ih(p,a,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?p+6*(a-p)*c:c<.5?a:c<2/3?p+6*(a-p)*(2/3-c):p}function Tv(p){return p<.04045?.0773993808*p:Math.pow(.9478672986*p+.0521327014,2.4)}function dm(p){return p<.0031308?12.92*p:1.055*Math.pow(p,.41666)-.055}let Jt=(()=>{class p{constructor(c,m,v){return void 0===m&&void 0===v?this.set(c):this.setRGB(c,m,v)}set(c){return c&&c.isColor?this.copy(c):"number"==typeof c?this.setHex(c):"string"==typeof c&&this.setStyle(c),this}setScalar(c){return this.r=c,this.g=c,this.b=c,this}setHex(c){return c=Math.floor(c),this.r=(c>>16&255)/255,this.g=(c>>8&255)/255,this.b=(255&c)/255,this}setRGB(c,m,v){return this.r=c,this.g=m,this.b=v,this}setHSL(c,m,v){if(c=Ne.euclideanModulo(c,1),m=Ne.clamp(m,0,1),v=Ne.clamp(v,0,1),0===m)this.r=this.g=this.b=v;else{const b=v<=.5?v*(1+m):v+m-v*m,C=2*v-b;this.r=Ih(C,b,c+1/3),this.g=Ih(C,b,c),this.b=Ih(C,b,c-1/3)}return this}setStyle(c){function m(b){void 0!==b&&parseFloat(b)<1&&console.warn("THREE.Color: Alpha component of "+c+" will be ignored.")}let v;if(v=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(c)){let b;const D=v[2];switch(v[1]){case"rgb":case"rgba":if(b=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(D))return this.r=Math.min(255,parseInt(b[1],10))/255,this.g=Math.min(255,parseInt(b[2],10))/255,this.b=Math.min(255,parseInt(b[3],10))/255,m(b[4]),this;if(b=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(D))return this.r=Math.min(100,parseInt(b[1],10))/100,this.g=Math.min(100,parseInt(b[2],10))/100,this.b=Math.min(100,parseInt(b[3],10))/100,m(b[4]),this;break;case"hsl":case"hsla":if(b=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(D)){const S=parseFloat(b[1])/360,A=parseInt(b[2],10)/100,k=parseInt(b[3],10)/100;return m(b[4]),this.setHSL(S,A,k)}}}else if(v=/^\#([A-Fa-f\d]+)$/.exec(c)){const b=v[1],C=b.length;if(3===C)return this.r=parseInt(b.charAt(0)+b.charAt(0),16)/255,this.g=parseInt(b.charAt(1)+b.charAt(1),16)/255,this.b=parseInt(b.charAt(2)+b.charAt(2),16)/255,this;if(6===C)return this.r=parseInt(b.charAt(0)+b.charAt(1),16)/255,this.g=parseInt(b.charAt(2)+b.charAt(3),16)/255,this.b=parseInt(b.charAt(4)+b.charAt(5),16)/255,this}return c&&c.length>0?this.setColorName(c):this}setColorName(c){const m=Q[c];return void 0!==m?this.setHex(m):console.warn("THREE.Color: Unknown color "+c),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(c){return this.r=c.r,this.g=c.g,this.b=c.b,this}copyGammaToLinear(c,m=2){return this.r=Math.pow(c.r,m),this.g=Math.pow(c.g,m),this.b=Math.pow(c.b,m),this}copyLinearToGamma(c,m=2){const v=m>0?1/m:1;return this.r=Math.pow(c.r,v),this.g=Math.pow(c.g,v),this.b=Math.pow(c.b,v),this}convertGammaToLinear(c){return this.copyGammaToLinear(this,c),this}convertLinearToGamma(c){return this.copyLinearToGamma(this,c),this}copySRGBToLinear(c){return this.r=Tv(c.r),this.g=Tv(c.g),this.b=Tv(c.b),this}copyLinearToSRGB(c){return this.r=dm(c.r),this.g=dm(c.g),this.b=dm(c.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(c){void 0===c&&(console.warn("THREE.Color: .getHSL() target is now required"),c={h:0,s:0,l:0});const m=this.r,v=this.g,b=this.b,C=Math.max(m,v,b),D=Math.min(m,v,b);let S,A;const k=(D+C)/2;if(D===C)S=0,A=0;else{const R=C-D;switch(A=k<=.5?R/(C+D):R/(2-C-D),C){case m:S=(v-b)/R+(v<b?6:0);break;case v:S=(b-m)/R+2;break;case b:S=(m-v)/R+4}S/=6}return c.h=S,c.s=A,c.l=k,c}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(c,m,v){return this.getHSL($n),$n.h+=c,$n.s+=m,$n.l+=v,this.setHSL($n.h,$n.s,$n.l),this}add(c){return this.r+=c.r,this.g+=c.g,this.b+=c.b,this}addColors(c,m){return this.r=c.r+m.r,this.g=c.g+m.g,this.b=c.b+m.b,this}addScalar(c){return this.r+=c,this.g+=c,this.b+=c,this}sub(c){return this.r=Math.max(0,this.r-c.r),this.g=Math.max(0,this.g-c.g),this.b=Math.max(0,this.b-c.b),this}multiply(c){return this.r*=c.r,this.g*=c.g,this.b*=c.b,this}multiplyScalar(c){return this.r*=c,this.g*=c,this.b*=c,this}lerp(c,m){return this.r+=(c.r-this.r)*m,this.g+=(c.g-this.g)*m,this.b+=(c.b-this.b)*m,this}lerpColors(c,m,v){return this.r=c.r+(m.r-c.r)*v,this.g=c.g+(m.g-c.g)*v,this.b=c.b+(m.b-c.b)*v,this}lerpHSL(c,m){this.getHSL($n),c.getHSL(Ya);const v=Ne.lerp($n.h,Ya.h,m),b=Ne.lerp($n.s,Ya.s,m),C=Ne.lerp($n.l,Ya.l,m);return this.setHSL(v,b,C),this}equals(c){return c.r===this.r&&c.g===this.g&&c.b===this.b}fromArray(c,m=0){return this.r=c[m],this.g=c[m+1],this.b=c[m+2],this}toArray(c=[],m=0){return c[m]=this.r,c[m+1]=this.g,c[m+2]=this.b,c}fromBufferAttribute(c,m){return this.r=c.getX(m),this.g=c.getY(m),this.b=c.getZ(m),!0===c.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return p.NAMES=Q,p})();Jt.prototype.isColor=!0,Jt.prototype.r=1,Jt.prototype.g=1,Jt.prototype.b=1;class Ut extends lr{constructor(a){super(),this.type="MeshBasicMaterial",this.color=new Jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=La,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this}}Ut.prototype.isMeshBasicMaterial=!0;const Ui=new ee,kn=new et;function _n(p,a,c){if(Array.isArray(p))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=p,this.itemSize=a,this.count=void 0!==p?p.length/a:0,this.normalized=!0===c,this.usage=ac,this.updateRange={offset:0,count:-1},this.version=0}function ma(p,a,c){_n.call(this,new Int8Array(p),a,c)}function Il(p,a,c){_n.call(this,new Uint8Array(p),a,c)}function fd(p,a,c){_n.call(this,new Uint8ClampedArray(p),a,c)}function hc(p,a,c){_n.call(this,new Int16Array(p),a,c)}function _a(p,a,c){_n.call(this,new Uint16Array(p),a,c)}function Rl(p,a,c){_n.call(this,new Int32Array(p),a,c)}function va(p,a,c){_n.call(this,new Uint32Array(p),a,c)}function Er(p,a,c){_n.call(this,new Uint16Array(p),a,c)}function Qt(p,a,c){_n.call(this,new Float32Array(p),a,c)}function er(p,a,c){_n.call(this,new Float64Array(p),a,c)}function uu(p){if(0===p.length)return-1/0;let a=p[0];for(let c=1,m=p.length;c<m;++c)p[c]>a&&(a=p[c]);return a}Object.defineProperty(_n.prototype,"needsUpdate",{set:function(p){!0===p&&this.version++}}),Object.assign(_n.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(p){return this.usage=p,this},copy:function(p){return this.name=p.name,this.array=new p.array.constructor(p.array),this.itemSize=p.itemSize,this.count=p.count,this.normalized=p.normalized,this.usage=p.usage,this},copyAt:function(p,a,c){p*=this.itemSize,c*=a.itemSize;for(let m=0,v=this.itemSize;m<v;m++)this.array[p+m]=a.array[c+m];return this},copyArray:function(p){return this.array.set(p),this},copyColorsArray:function(p){const a=this.array;let c=0;for(let m=0,v=p.length;m<v;m++){let b=p[m];void 0===b&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",m),b=new Jt),a[c++]=b.r,a[c++]=b.g,a[c++]=b.b}return this},copyVector2sArray:function(p){const a=this.array;let c=0;for(let m=0,v=p.length;m<v;m++){let b=p[m];void 0===b&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",m),b=new et),a[c++]=b.x,a[c++]=b.y}return this},copyVector3sArray:function(p){const a=this.array;let c=0;for(let m=0,v=p.length;m<v;m++){let b=p[m];void 0===b&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",m),b=new ee),a[c++]=b.x,a[c++]=b.y,a[c++]=b.z}return this},copyVector4sArray:function(p){const a=this.array;let c=0;for(let m=0,v=p.length;m<v;m++){let b=p[m];void 0===b&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",m),b=new Di),a[c++]=b.x,a[c++]=b.y,a[c++]=b.z,a[c++]=b.w}return this},applyMatrix3:function(p){if(2===this.itemSize)for(let a=0,c=this.count;a<c;a++)kn.fromBufferAttribute(this,a),kn.applyMatrix3(p),this.setXY(a,kn.x,kn.y);else if(3===this.itemSize)for(let a=0,c=this.count;a<c;a++)Ui.fromBufferAttribute(this,a),Ui.applyMatrix3(p),this.setXYZ(a,Ui.x,Ui.y,Ui.z);return this},applyMatrix4:function(p){for(let a=0,c=this.count;a<c;a++)Ui.x=this.getX(a),Ui.y=this.getY(a),Ui.z=this.getZ(a),Ui.applyMatrix4(p),this.setXYZ(a,Ui.x,Ui.y,Ui.z);return this},applyNormalMatrix:function(p){for(let a=0,c=this.count;a<c;a++)Ui.x=this.getX(a),Ui.y=this.getY(a),Ui.z=this.getZ(a),Ui.applyNormalMatrix(p),this.setXYZ(a,Ui.x,Ui.y,Ui.z);return this},transformDirection:function(p){for(let a=0,c=this.count;a<c;a++)Ui.x=this.getX(a),Ui.y=this.getY(a),Ui.z=this.getZ(a),Ui.transformDirection(p),this.setXYZ(a,Ui.x,Ui.y,Ui.z);return this},set:function(p,a=0){return this.array.set(p,a),this},getX:function(p){return this.array[p*this.itemSize]},setX:function(p,a){return this.array[p*this.itemSize]=a,this},getY:function(p){return this.array[p*this.itemSize+1]},setY:function(p,a){return this.array[p*this.itemSize+1]=a,this},getZ:function(p){return this.array[p*this.itemSize+2]},setZ:function(p,a){return this.array[p*this.itemSize+2]=a,this},getW:function(p){return this.array[p*this.itemSize+3]},setW:function(p,a){return this.array[p*this.itemSize+3]=a,this},setXY:function(p,a,c){return this.array[0+(p*=this.itemSize)]=a,this.array[p+1]=c,this},setXYZ:function(p,a,c,m){return this.array[0+(p*=this.itemSize)]=a,this.array[p+1]=c,this.array[p+2]=m,this},setXYZW:function(p,a,c,m,v){return this.array[0+(p*=this.itemSize)]=a,this.array[p+1]=c,this.array[p+2]=m,this.array[p+3]=v,this},onUpload:function(p){return this.onUploadCallback=p,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(ma.prototype=Object.create(_n.prototype)).constructor=ma,(Il.prototype=Object.create(_n.prototype)).constructor=Il,(fd.prototype=Object.create(_n.prototype)).constructor=fd,(hc.prototype=Object.create(_n.prototype)).constructor=hc,(_a.prototype=Object.create(_n.prototype)).constructor=_a,(Rl.prototype=Object.create(_n.prototype)).constructor=Rl,(va.prototype=Object.create(_n.prototype)).constructor=va,(Er.prototype=Object.create(_n.prototype)).constructor=Er,Er.prototype.isFloat16BufferAttribute=!0,(Qt.prototype=Object.create(_n.prototype)).constructor=Qt,(er.prototype=Object.create(_n.prototype)).constructor=er;const dC={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function tr(p,a){return new dC[p](a)}let Eb=0;const Pl=new fn,Sb=new it,Rh=new ee,To=new ho,pd=new ho,Cs=new ee;function Wt(){Object.defineProperty(this,"id",{value:Eb++}),this.uuid=Ne.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Wt.prototype=Object.assign(Object.create(xl.prototype),{constructor:Wt,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(p){return this.index=Array.isArray(p)?new(uu(p)>65535?va:_a)(p,1):p,this},getAttribute:function(p){return this.attributes[p]},setAttribute:function(p,a){return this.attributes[p]=a,this},deleteAttribute:function(p){return delete this.attributes[p],this},hasAttribute:function(p){return void 0!==this.attributes[p]},addGroup:function(p,a,c=0){this.groups.push({start:p,count:a,materialIndex:c})},clearGroups:function(){this.groups=[]},setDrawRange:function(p,a){this.drawRange.start=p,this.drawRange.count=a},applyMatrix4:function(p){const a=this.attributes.position;void 0!==a&&(a.applyMatrix4(p),a.needsUpdate=!0);const c=this.attributes.normal;if(void 0!==c){const v=(new cs).getNormalMatrix(p);c.applyNormalMatrix(v),c.needsUpdate=!0}const m=this.attributes.tangent;return void 0!==m&&(m.transformDirection(p),m.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(p){return Pl.makeRotationX(p),this.applyMatrix4(Pl),this},rotateY:function(p){return Pl.makeRotationY(p),this.applyMatrix4(Pl),this},rotateZ:function(p){return Pl.makeRotationZ(p),this.applyMatrix4(Pl),this},translate:function(p,a,c){return Pl.makeTranslation(p,a,c),this.applyMatrix4(Pl),this},scale:function(p,a,c){return Pl.makeScale(p,a,c),this.applyMatrix4(Pl),this},lookAt:function(p){return Sb.lookAt(p),Sb.updateMatrix(),this.applyMatrix4(Sb.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Rh).negate(),this.translate(Rh.x,Rh.y,Rh.z),this},setFromPoints:function(p){const a=[];for(let c=0,m=p.length;c<m;c++){const v=p[c];a.push(v.x,v.y,v.z||0)}return this.setAttribute("position",new Qt(a,3)),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ho);const p=this.attributes.position,a=this.morphAttributes.position;if(p&&p.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ee(-1/0,-1/0,-1/0),new ee(1/0,1/0,1/0));if(void 0!==p){if(this.boundingBox.setFromBufferAttribute(p),a)for(let c=0,m=a.length;c<m;c++)To.setFromBufferAttribute(a[c]),this.morphTargetsRelative?(Cs.addVectors(this.boundingBox.min,To.min),this.boundingBox.expandByPoint(Cs),Cs.addVectors(this.boundingBox.max,To.max),this.boundingBox.expandByPoint(Cs)):(this.boundingBox.expandByPoint(To.min),this.boundingBox.expandByPoint(To.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new au);const p=this.attributes.position,a=this.morphAttributes.position;if(p&&p.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ee,1/0);if(p){const c=this.boundingSphere.center;if(To.setFromBufferAttribute(p),a)for(let v=0,b=a.length;v<b;v++)pd.setFromBufferAttribute(a[v]),this.morphTargetsRelative?(Cs.addVectors(To.min,pd.min),To.expandByPoint(Cs),Cs.addVectors(To.max,pd.max),To.expandByPoint(Cs)):(To.expandByPoint(pd.min),To.expandByPoint(pd.max));To.getCenter(c);let m=0;for(let v=0,b=p.count;v<b;v++)Cs.fromBufferAttribute(p,v),m=Math.max(m,c.distanceToSquared(Cs));if(a)for(let v=0,b=a.length;v<b;v++){const C=a[v],D=this.morphTargetsRelative;for(let S=0,A=C.count;S<A;S++)Cs.fromBufferAttribute(C,S),D&&(Rh.fromBufferAttribute(p,S),Cs.add(Rh)),m=Math.max(m,c.distanceToSquared(Cs))}this.boundingSphere.radius=Math.sqrt(m),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){const p=this.index,a=this.attributes;if(null===p||void 0===a.position||void 0===a.normal||void 0===a.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const c=p.array,m=a.position.array,v=a.normal.array,b=a.uv.array,C=m.length/3;void 0===a.tangent&&this.setAttribute("tangent",new _n(new Float32Array(4*C),4));const D=a.tangent.array,S=[],A=[];for(let xe=0;xe<C;xe++)S[xe]=new ee,A[xe]=new ee;const k=new ee,R=new ee,O=new ee,L=new et,V=new et,z=new et,W=new ee,U=new ee;function B(xe,Pe,Be){k.fromArray(m,3*xe),R.fromArray(m,3*Pe),O.fromArray(m,3*Be),L.fromArray(b,2*xe),V.fromArray(b,2*Pe),z.fromArray(b,2*Be),R.sub(k),O.sub(k),V.sub(L),z.sub(L);const Ke=1/(V.x*z.y-z.x*V.y);!isFinite(Ke)||(W.copy(R).multiplyScalar(z.y).addScaledVector(O,-V.y).multiplyScalar(Ke),U.copy(O).multiplyScalar(V.x).addScaledVector(R,-z.x).multiplyScalar(Ke),S[xe].add(W),S[Pe].add(W),S[Be].add(W),A[xe].add(U),A[Pe].add(U),A[Be].add(U))}let te=this.groups;0===te.length&&(te=[{start:0,count:c.length}]);for(let xe=0,Pe=te.length;xe<Pe;++xe){const Be=te[xe],Ke=Be.start;for(let De=Ke,je=Ke+Be.count;De<je;De+=3)B(c[De+0],c[De+1],c[De+2])}const X=new ee,se=new ee,K=new ee,he=new ee;function Ie(xe){K.fromArray(v,3*xe),he.copy(K);const Pe=S[xe];X.copy(Pe),X.sub(K.multiplyScalar(K.dot(Pe))).normalize(),se.crossVectors(he,Pe);const Ke=se.dot(A[xe])<0?-1:1;D[4*xe]=X.x,D[4*xe+1]=X.y,D[4*xe+2]=X.z,D[4*xe+3]=Ke}for(let xe=0,Pe=te.length;xe<Pe;++xe){const Be=te[xe],Ke=Be.start;for(let De=Ke,je=Ke+Be.count;De<je;De+=3)Ie(c[De+0]),Ie(c[De+1]),Ie(c[De+2])}},computeVertexNormals:function(){const p=this.index,a=this.getAttribute("position");if(void 0!==a){let c=this.getAttribute("normal");if(void 0===c)c=new _n(new Float32Array(3*a.count),3),this.setAttribute("normal",c);else for(let R=0,O=c.count;R<O;R++)c.setXYZ(R,0,0,0);const m=new ee,v=new ee,b=new ee,C=new ee,D=new ee,S=new ee,A=new ee,k=new ee;if(p)for(let R=0,O=p.count;R<O;R+=3){const L=p.getX(R+0),V=p.getX(R+1),z=p.getX(R+2);m.fromBufferAttribute(a,L),v.fromBufferAttribute(a,V),b.fromBufferAttribute(a,z),A.subVectors(b,v),k.subVectors(m,v),A.cross(k),C.fromBufferAttribute(c,L),D.fromBufferAttribute(c,V),S.fromBufferAttribute(c,z),C.add(A),D.add(A),S.add(A),c.setXYZ(L,C.x,C.y,C.z),c.setXYZ(V,D.x,D.y,D.z),c.setXYZ(z,S.x,S.y,S.z)}else for(let R=0,O=a.count;R<O;R+=3)m.fromBufferAttribute(a,R+0),v.fromBufferAttribute(a,R+1),b.fromBufferAttribute(a,R+2),A.subVectors(b,v),k.subVectors(m,v),A.cross(k),c.setXYZ(R+0,A.x,A.y,A.z),c.setXYZ(R+1,A.x,A.y,A.z),c.setXYZ(R+2,A.x,A.y,A.z);this.normalizeNormals(),c.needsUpdate=!0}},merge:function(p,a){if(!p||!p.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",p);void 0===a&&(a=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const c=this.attributes;for(const m in c){if(void 0===p.attributes[m])continue;const b=c[m].array,C=p.attributes[m],D=C.array,S=C.itemSize*a,A=Math.min(D.length,b.length-S);for(let k=0,R=S;k<A;k++,R++)b[R]=D[k]}return this},normalizeNormals:function(){const p=this.attributes.normal;for(let a=0,c=p.count;a<c;a++)Cs.fromBufferAttribute(p,a),Cs.normalize(),p.setXYZ(a,Cs.x,Cs.y,Cs.z)},toNonIndexed:function(){function p(C,D){const S=C.array,A=C.itemSize,k=C.normalized,R=new S.constructor(D.length*A);let O=0,L=0;for(let V=0,z=D.length;V<z;V++){O=D[V]*A;for(let W=0;W<A;W++)R[L++]=S[O++]}return new _n(R,A,k)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const a=new Wt,c=this.index.array,m=this.attributes;for(const C in m){const S=p(m[C],c);a.setAttribute(C,S)}const v=this.morphAttributes;for(const C in v){const D=[],S=v[C];for(let A=0,k=S.length;A<k;A++){const O=p(S[A],c);D.push(O)}a.morphAttributes[C]=D}a.morphTargetsRelative=this.morphTargetsRelative;const b=this.groups;for(let C=0,D=b.length;C<D;C++){const S=b[C];a.addGroup(S.start,S.count,S.materialIndex)}return a},toJSON:function(){const p={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(p.uuid=this.uuid,p.type=this.type,""!==this.name&&(p.name=this.name),Object.keys(this.userData).length>0&&(p.userData=this.userData),void 0!==this.parameters){const D=this.parameters;for(const S in D)void 0!==D[S]&&(p[S]=D[S]);return p}p.data={attributes:{}};const a=this.index;null!==a&&(p.data.index={type:a.array.constructor.name,array:Array.prototype.slice.call(a.array)});const c=this.attributes;for(const D in c){const S=c[D],A=S.toJSON(p.data);""!==S.name&&(A.name=S.name),p.data.attributes[D]=A}const m={};let v=!1;for(const D in this.morphAttributes){const S=this.morphAttributes[D],A=[];for(let k=0,R=S.length;k<R;k++){const O=S[k],L=O.toJSON(p.data);""!==O.name&&(L.name=O.name),A.push(L)}A.length>0&&(m[D]=A,v=!0)}v&&(p.data.morphAttributes=m,p.data.morphTargetsRelative=this.morphTargetsRelative);const b=this.groups;b.length>0&&(p.data.groups=JSON.parse(JSON.stringify(b)));const C=this.boundingSphere;return null!==C&&(p.data.boundingSphere={center:C.center.toArray(),radius:C.radius}),p},clone:function(){return(new Wt).copy(this)},copy:function(p){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const a={};this.name=p.name;const c=p.index;null!==c&&this.setIndex(c.clone(a));const m=p.attributes;for(const S in m)this.setAttribute(S,m[S].clone(a));const v=p.morphAttributes;for(const S in v){const A=[],k=v[S];for(let R=0,O=k.length;R<O;R++)A.push(k[R].clone(a));this.morphAttributes[S]=A}this.morphTargetsRelative=p.morphTargetsRelative;const b=p.groups;for(let S=0,A=b.length;S<A;S++){const k=b[S];this.addGroup(k.start,k.count,k.materialIndex)}const C=p.boundingBox;null!==C&&(this.boundingBox=C.clone());const D=p.boundingSphere;return null!==D&&(this.boundingSphere=D.clone()),this.drawRange.start=p.drawRange.start,this.drawRange.count=p.drawRange.count,this.userData=p.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const Iv=new fn,si=new ud,Ph=new au,ta=new ee,fc=new ee,pc=new ee,po=new ee,na=new ee,Oh=new ee,gd=new ee,du=new ee,Ol=new ee,rp=new et,kh=new et,hm=new et,Ab=new ee,Fh=new ee;function ei(p=new Wt,a=new Ut){it.call(this),this.type="Mesh",this.geometry=p,this.material=a,this.updateMorphTargets()}function qa(p,a,c,m,v,b,C,D,S,A,k,R){ta.fromBufferAttribute(v,A),fc.fromBufferAttribute(v,k),pc.fromBufferAttribute(v,R);const O=p.morphTargetInfluences;if(a.morphTargets&&b&&O){gd.set(0,0,0),du.set(0,0,0),Ol.set(0,0,0);for(let V=0,z=b.length;V<z;V++){const W=O[V],U=b[V];0!==W&&(po.fromBufferAttribute(U,A),na.fromBufferAttribute(U,k),Oh.fromBufferAttribute(U,R),C?(gd.addScaledVector(po,W),du.addScaledVector(na,W),Ol.addScaledVector(Oh,W)):(gd.addScaledVector(po.sub(ta),W),du.addScaledVector(na.sub(fc),W),Ol.addScaledVector(Oh.sub(pc),W)))}ta.add(gd),fc.add(du),pc.add(Ol)}p.isSkinnedMesh&&a.skinning&&(p.boneTransform(A,ta),p.boneTransform(k,fc),p.boneTransform(R,pc));const L=function sp(p,a,c,m,v,b,C,D){let S;if(S=a.side===Ae?m.intersectTriangle(C,b,v,!0,D):m.intersectTriangle(v,b,C,a.side!==at,D),null===S)return null;Fh.copy(D),Fh.applyMatrix4(p.matrixWorld);const A=c.ray.origin.distanceTo(Fh);return A<c.near||A>c.far?null:{distance:A,point:Fh.clone(),object:p}}(p,a,c,m,ta,fc,pc,Ab);if(L){D&&(rp.fromBufferAttribute(D,A),kh.fromBufferAttribute(D,k),hm.fromBufferAttribute(D,R),L.uv=Ti.getUV(Ab,ta,fc,pc,rp,kh,hm,new et)),S&&(rp.fromBufferAttribute(S,A),kh.fromBufferAttribute(S,k),hm.fromBufferAttribute(S,R),L.uv2=Ti.getUV(Ab,ta,fc,pc,rp,kh,hm,new et));const V={a:A,b:A,c:R,normal:new ee,materialIndex:0};Ti.getNormal(ta,fc,pc,V.normal),L.face=V}return L}ei.prototype=Object.assign(Object.create(it.prototype),{constructor:ei,isMesh:!0,copy:function(p){return it.prototype.copy.call(this,p),void 0!==p.morphTargetInfluences&&(this.morphTargetInfluences=p.morphTargetInfluences.slice()),void 0!==p.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},p.morphTargetDictionary)),this.material=p.material,this.geometry=p.geometry,this},updateMorphTargets:function(){const p=this.geometry;if(p.isBufferGeometry){const a=p.morphAttributes,c=Object.keys(a);if(c.length>0){const m=a[c[0]];if(void 0!==m){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let v=0,b=m.length;v<b;v++){const C=m[v].name||String(v);this.morphTargetInfluences.push(0),this.morphTargetDictionary[C]=v}}}}else{const a=p.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(p,a){const c=this.geometry,m=this.material,v=this.matrixWorld;if(void 0===m||(null===c.boundingSphere&&c.computeBoundingSphere(),Ph.copy(c.boundingSphere),Ph.applyMatrix4(v),!1===p.ray.intersectsSphere(Ph))||(Iv.copy(v).invert(),si.copy(p.ray).applyMatrix4(Iv),null!==c.boundingBox&&!1===si.intersectsBox(c.boundingBox)))return;let b;if(c.isBufferGeometry){const C=c.index,D=c.attributes.position,S=c.morphAttributes.position,A=c.morphTargetsRelative,k=c.attributes.uv,R=c.attributes.uv2,O=c.groups,L=c.drawRange;if(null!==C)if(Array.isArray(m))for(let V=0,z=O.length;V<z;V++){const W=O[V],U=m[W.materialIndex];for(let X=Math.max(W.start,L.start),se=Math.min(W.start+W.count,L.start+L.count);X<se;X+=3){const K=C.getX(X),he=C.getX(X+1),Ie=C.getX(X+2);b=qa(this,U,p,si,D,S,A,k,R,K,he,Ie),b&&(b.faceIndex=Math.floor(X/3),b.face.materialIndex=W.materialIndex,a.push(b))}}else for(let W=Math.max(0,L.start),U=Math.min(C.count,L.start+L.count);W<U;W+=3){const B=C.getX(W),te=C.getX(W+1),X=C.getX(W+2);b=qa(this,m,p,si,D,S,A,k,R,B,te,X),b&&(b.faceIndex=Math.floor(W/3),a.push(b))}else if(void 0!==D)if(Array.isArray(m))for(let V=0,z=O.length;V<z;V++){const W=O[V],U=m[W.materialIndex];for(let X=Math.max(W.start,L.start),se=Math.min(W.start+W.count,L.start+L.count);X<se;X+=3)b=qa(this,U,p,si,D,S,A,k,R,X,X+1,X+2),b&&(b.faceIndex=Math.floor(X/3),b.face.materialIndex=W.materialIndex,a.push(b))}else for(let W=Math.max(0,L.start),U=Math.min(D.count,L.start+L.count);W<U;W+=3)b=qa(this,m,p,si,D,S,A,k,R,W,W+1,W+2),b&&(b.faceIndex=Math.floor(W/3),a.push(b))}else c.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});class hu extends Wt{constructor(a=1,c=1,m=1,v=1,b=1,C=1){super(),this.type="BoxGeometry",this.parameters={width:a,height:c,depth:m,widthSegments:v,heightSegments:b,depthSegments:C};const D=this;v=Math.floor(v),b=Math.floor(b),C=Math.floor(C);const S=[],A=[],k=[],R=[];let O=0,L=0;function V(z,W,U,B,te,X,se,K,he,Ie,xe){const Pe=X/he,Be=se/Ie,Ke=X/2,Ue=se/2,De=K/2,je=he+1,st=Ie+1;let Ct=0,jt=0;const qt=new ee;for(let an=0;an<st;an++){const nn=an*Be-Ue;for(let Wn=0;Wn<je;Wn++)qt[z]=(Wn*Pe-Ke)*B,qt[W]=nn*te,qt[U]=De,A.push(qt.x,qt.y,qt.z),qt[z]=0,qt[W]=0,qt[U]=K>0?1:-1,k.push(qt.x,qt.y,qt.z),R.push(Wn/he),R.push(1-an/Ie),Ct+=1}for(let an=0;an<Ie;an++)for(let nn=0;nn<he;nn++){const Rn=O+nn+je*(an+1),Hi=O+(nn+1)+je*(an+1),yi=O+(nn+1)+je*an;S.push(O+nn+je*an,Rn,yi),S.push(Rn,Hi,yi),jt+=6}D.addGroup(L,jt,xe),L+=jt,O+=Ct}V("z","y","x",-1,-1,m,c,a,C,b,0),V("z","y","x",1,-1,m,c,-a,C,b,1),V("x","z","y",1,1,a,m,c,v,C,2),V("x","z","y",1,-1,a,m,-c,v,C,3),V("x","y","z",1,-1,a,c,m,v,b,4),V("x","y","z",-1,-1,a,c,-m,v,b,5),this.setIndex(S),this.setAttribute("position",new Qt(A,3)),this.setAttribute("normal",new Qt(k,3)),this.setAttribute("uv",new Qt(R,2))}}function md(p){const a={};for(const c in p){a[c]={};for(const m in p[c]){const v=p[c][m];a[c][m]=v&&(v.isColor||v.isMatrix3||v.isMatrix4||v.isVector2||v.isVector3||v.isVector4||v.isTexture||v.isQuaternion)?v.clone():Array.isArray(v)?v.slice():v}}return a}function qs(p){const a={};for(let c=0;c<p.length;c++){const m=md(p[c]);for(const v in m)a[v]=m[v]}return a}const fm={clone:md,merge:qs};function Io(p){lr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==p&&(void 0!==p.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(p))}function fr(){it.call(this),this.type="Camera",this.matrixWorldInverse=new fn,this.projectionMatrix=new fn,this.projectionMatrixInverse=new fn}function nr(p=50,a=1,c=.1,m=2e3){fr.call(this),this.type="PerspectiveCamera",this.fov=p,this.zoom=1,this.near=c,this.far=m,this.focus=10,this.aspect=a,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}(Io.prototype=Object.create(lr.prototype)).constructor=Io,Io.prototype.isShaderMaterial=!0,Io.prototype.copy=function(p){return lr.prototype.copy.call(this,p),this.fragmentShader=p.fragmentShader,this.vertexShader=p.vertexShader,this.uniforms=md(p.uniforms),this.defines=Object.assign({},p.defines),this.wireframe=p.wireframe,this.wireframeLinewidth=p.wireframeLinewidth,this.lights=p.lights,this.clipping=p.clipping,this.skinning=p.skinning,this.morphTargets=p.morphTargets,this.morphNormals=p.morphNormals,this.extensions=Object.assign({},p.extensions),this.glslVersion=p.glslVersion,this},Io.prototype.toJSON=function(p){const a=lr.prototype.toJSON.call(this,p);a.glslVersion=this.glslVersion,a.uniforms={};for(const m in this.uniforms){const b=this.uniforms[m].value;a.uniforms[m]=b&&b.isTexture?{type:"t",value:b.toJSON(p).uuid}:b&&b.isColor?{type:"c",value:b.getHex()}:b&&b.isVector2?{type:"v2",value:b.toArray()}:b&&b.isVector3?{type:"v3",value:b.toArray()}:b&&b.isVector4?{type:"v4",value:b.toArray()}:b&&b.isMatrix3?{type:"m3",value:b.toArray()}:b&&b.isMatrix4?{type:"m4",value:b.toArray()}:{value:b}}Object.keys(this.defines).length>0&&(a.defines=this.defines),a.vertexShader=this.vertexShader,a.fragmentShader=this.fragmentShader;const c={};for(const m in this.extensions)!0===this.extensions[m]&&(c[m]=!0);return Object.keys(c).length>0&&(a.extensions=c),a},fr.prototype=Object.assign(Object.create(it.prototype),{constructor:fr,isCamera:!0,copy:function(p,a){return it.prototype.copy.call(this,p,a),this.matrixWorldInverse.copy(p.matrixWorldInverse),this.projectionMatrix.copy(p.projectionMatrix),this.projectionMatrixInverse.copy(p.projectionMatrixInverse),this},getWorldDirection:function(p){void 0===p&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),p=new ee),this.updateWorldMatrix(!0,!1);const a=this.matrixWorld.elements;return p.set(-a[8],-a[9],-a[10]).normalize()},updateMatrixWorld:function(p){it.prototype.updateMatrixWorld.call(this,p),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(p,a){it.prototype.updateWorldMatrix.call(this,p,a),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),nr.prototype=Object.assign(Object.create(fr.prototype),{constructor:nr,isPerspectiveCamera:!0,copy:function(p,a){return fr.prototype.copy.call(this,p,a),this.fov=p.fov,this.zoom=p.zoom,this.near=p.near,this.far=p.far,this.focus=p.focus,this.aspect=p.aspect,this.view=null===p.view?null:Object.assign({},p.view),this.filmGauge=p.filmGauge,this.filmOffset=p.filmOffset,this},setFocalLength:function(p){const a=.5*this.getFilmHeight()/p;this.fov=2*Ne.RAD2DEG*Math.atan(a),this.updateProjectionMatrix()},getFocalLength:function(){const p=Math.tan(.5*Ne.DEG2RAD*this.fov);return.5*this.getFilmHeight()/p},getEffectiveFOV:function(){return 2*Ne.RAD2DEG*Math.atan(Math.tan(.5*Ne.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(p,a,c,m,v,b){this.aspect=p/a,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=p,this.view.fullHeight=a,this.view.offsetX=c,this.view.offsetY=m,this.view.width=v,this.view.height=b,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const p=this.near;let a=p*Math.tan(.5*Ne.DEG2RAD*this.fov)/this.zoom,c=2*a,m=this.aspect*c,v=-.5*m;const b=this.view;if(null!==this.view&&this.view.enabled){const D=b.fullWidth,S=b.fullHeight;v+=b.offsetX*m/D,a-=b.offsetY*c/S,m*=b.width/D,c*=b.height/S}const C=this.filmOffset;0!==C&&(v+=p*C/this.getFilmWidth()),this.projectionMatrix.makePerspective(v,v+m,a,a-c,p,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(p){const a=it.prototype.toJSON.call(this,p);return a.object.fov=this.fov,a.object.zoom=this.zoom,a.object.near=this.near,a.object.far=this.far,a.object.focus=this.focus,a.object.aspect=this.aspect,null!==this.view&&(a.object.view=Object.assign({},this.view)),a.object.filmGauge=this.filmGauge,a.object.filmOffset=this.filmOffset,a}});class fu extends it{constructor(a,c,m){if(super(),this.type="CubeCamera",!0!==m.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=m;const v=new nr(90,1,a,c);v.layers=this.layers,v.up.set(0,-1,0),v.lookAt(new ee(1,0,0)),this.add(v);const b=new nr(90,1,a,c);b.layers=this.layers,b.up.set(0,-1,0),b.lookAt(new ee(-1,0,0)),this.add(b);const C=new nr(90,1,a,c);C.layers=this.layers,C.up.set(0,0,1),C.lookAt(new ee(0,1,0)),this.add(C);const D=new nr(90,1,a,c);D.layers=this.layers,D.up.set(0,0,-1),D.lookAt(new ee(0,-1,0)),this.add(D);const S=new nr(90,1,a,c);S.layers=this.layers,S.up.set(0,-1,0),S.lookAt(new ee(0,0,1)),this.add(S);const A=new nr(90,1,a,c);A.layers=this.layers,A.up.set(0,-1,0),A.lookAt(new ee(0,0,-1)),this.add(A)}update(a,c){null===this.parent&&this.updateMatrixWorld();const m=this.renderTarget,[v,b,C,D,S,A]=this.children,k=a.xr.enabled,R=a.getRenderTarget();a.xr.enabled=!1;const O=m.texture.generateMipmaps;m.texture.generateMipmaps=!1,a.setRenderTarget(m,0),a.render(c,v),a.setRenderTarget(m,1),a.render(c,b),a.setRenderTarget(m,2),a.render(c,C),a.setRenderTarget(m,3),a.render(c,D),a.setRenderTarget(m,4),a.render(c,S),m.texture.generateMipmaps=O,a.setRenderTarget(m,5),a.render(c,A),a.setRenderTarget(R),a.xr.enabled=k}}class pu extends Bi{constructor(a,c,m,v,b,C,D,S,A,k){super(a=void 0!==a?a:[],c=void 0!==c?c:js,m,v,b,C,D=void 0!==D?D:lo,S,A,k),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(a){this.image=a}}pu.prototype.isCubeTexture=!0;class kl extends ou{constructor(a,c,m){Number.isInteger(c)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),c=m),super(a,a,c),this.texture=new pu(void 0,(c=c||{}).mapping,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding),this.texture.generateMipmaps=void 0!==c.generateMipmaps&&c.generateMipmaps,this.texture.minFilter=void 0!==c.minFilter?c.minFilter:de,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(a,c){this.texture.type=c.type,this.texture.format=$r,this.texture.encoding=c.encoding,this.texture.generateMipmaps=c.generateMipmaps,this.texture.minFilter=c.minFilter,this.texture.magFilter=c.magFilter;const m_uniforms={tEquirect:{value:null}},m_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",m_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",v=new hu(5,5,5),b=new Io({name:"CubemapFromEquirect",uniforms:md(m_uniforms),vertexShader:m_vertexShader,fragmentShader:m_fragmentShader,side:Ae,blending:ut});b.uniforms.tEquirect.value=c;const C=new ei(v,b),D=c.minFilter;return c.minFilter===Ye&&(c.minFilter=de),new fu(1,10,this).update(a,C),c.minFilter=D,C.geometry.dispose(),C.material.dispose(),this}clear(a,c,m,v){const b=a.getRenderTarget();for(let C=0;C<6;C++)a.setRenderTarget(this,C),a.clear(c,m,v);a.setRenderTarget(b)}}kl.prototype.isWebGLCubeRenderTarget=!0;class _c extends Bi{constructor(a,c,m,v,b,C,D,S,A,k,R,O){super(null,C,D,S,A,k,v,b,R,O),this.image={data:a||null,width:c||1,height:m||1},this.magFilter=void 0!==A?A:Tn,this.minFilter=void 0!==k?k:Tn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}_c.prototype.isDataTexture=!0;const gu=new au,Lh=new ee;class mu{constructor(a=new ci,c=new ci,m=new ci,v=new ci,b=new ci,C=new ci){this.planes=[a,c,m,v,b,C]}set(a,c,m,v,b,C){const D=this.planes;return D[0].copy(a),D[1].copy(c),D[2].copy(m),D[3].copy(v),D[4].copy(b),D[5].copy(C),this}copy(a){const c=this.planes;for(let m=0;m<6;m++)c[m].copy(a.planes[m]);return this}setFromProjectionMatrix(a){const c=this.planes,m=a.elements,v=m[0],b=m[1],C=m[2],D=m[3],S=m[4],A=m[5],k=m[6],R=m[7],O=m[8],L=m[9],V=m[10],z=m[11],W=m[12],U=m[13],B=m[14],te=m[15];return c[0].setComponents(D-v,R-S,z-O,te-W).normalize(),c[1].setComponents(D+v,R+S,z+O,te+W).normalize(),c[2].setComponents(D+b,R+A,z+L,te+U).normalize(),c[3].setComponents(D-b,R-A,z-L,te-U).normalize(),c[4].setComponents(D-C,R-k,z-V,te-B).normalize(),c[5].setComponents(D+C,R+k,z+V,te+B).normalize(),this}intersectsObject(a){const c=a.geometry;return null===c.boundingSphere&&c.computeBoundingSphere(),gu.copy(c.boundingSphere).applyMatrix4(a.matrixWorld),this.intersectsSphere(gu)}intersectsSprite(a){return gu.center.set(0,0,0),gu.radius=.7071067811865476,gu.applyMatrix4(a.matrixWorld),this.intersectsSphere(gu)}intersectsSphere(a){const c=this.planes,m=a.center,v=-a.radius;for(let b=0;b<6;b++)if(c[b].distanceToPoint(m)<v)return!1;return!0}intersectsBox(a){const c=this.planes;for(let m=0;m<6;m++){const v=c[m];if(Lh.x=v.normal.x>0?a.max.x:a.min.x,Lh.y=v.normal.y>0?a.max.y:a.min.y,Lh.z=v.normal.z>0?a.max.z:a.min.z,v.distanceToPoint(Lh)<0)return!1}return!0}containsPoint(a){const c=this.planes;for(let m=0;m<6;m++)if(c[m].distanceToPoint(a)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function pm(){let p=null,a=!1,c=null,m=null;function v(b,C){c(b,C),m=p.requestAnimationFrame(v)}return{start:function(){!0!==a&&null!==c&&(m=p.requestAnimationFrame(v),a=!0)},stop:function(){p.cancelAnimationFrame(m),a=!1},setAnimationLoop:function(b){c=b},setContext:function(b){p=b}}}function Nh(p,a){const c=a.isWebGL2,m=new WeakMap;return{get:function C(A){return A.isInterleavedBufferAttribute&&(A=A.data),m.get(A)},remove:function D(A){A.isInterleavedBufferAttribute&&(A=A.data);const k=m.get(A);k&&(p.deleteBuffer(k.buffer),m.delete(A))},update:function S(A,k){if(A.isGLBufferAttribute){const O=m.get(A);return void((!O||O.version<A.version)&&m.set(A,{buffer:A.buffer,type:A.type,bytesPerElement:A.elementSize,version:A.version}))}A.isInterleavedBufferAttribute&&(A=A.data);const R=m.get(A);void 0===R?m.set(A,function v(A,k){const R=A.array,O=A.usage,L=p.createBuffer();p.bindBuffer(k,L),p.bufferData(k,R,O),A.onUploadCallback();let V=5126;return R instanceof Float32Array?V=5126:R instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):R instanceof Uint16Array?A.isFloat16BufferAttribute?c?V=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):V=5123:R instanceof Int16Array?V=5122:R instanceof Uint32Array?V=5125:R instanceof Int32Array?V=5124:R instanceof Int8Array?V=5120:R instanceof Uint8Array&&(V=5121),{buffer:L,type:V,bytesPerElement:R.BYTES_PER_ELEMENT,version:A.version}}(A,k)):R.version<A.version&&(function b(A,k,R){const O=k.array,L=k.updateRange;p.bindBuffer(R,A),-1===L.count?p.bufferSubData(R,0,O):(c?p.bufferSubData(R,L.offset*O.BYTES_PER_ELEMENT,O,L.offset,L.count):p.bufferSubData(R,L.offset*O.BYTES_PER_ELEMENT,O.subarray(L.offset,L.offset+L.count)),L.count=-1)}(R.buffer,A,k),R.version=A.version)}}}class _d extends Wt{constructor(a=1,c=1,m=1,v=1){super(),this.type="PlaneGeometry",this.parameters={width:a,height:c,widthSegments:m,heightSegments:v};const b=a/2,C=c/2,D=Math.floor(m),S=Math.floor(v),A=D+1,k=S+1,R=a/D,O=c/S,L=[],V=[],z=[],W=[];for(let U=0;U<k;U++){const B=U*O-C;for(let te=0;te<A;te++)V.push(te*R-b,-B,0),z.push(0,0,1),W.push(te/D),W.push(1-U/S)}for(let U=0;U<S;U++)for(let B=0;B<D;B++){const X=B+A*(U+1),se=B+1+A*(U+1),K=B+1+A*U;L.push(B+A*U,X,K),L.push(X,se,K)}this.setIndex(L),this.setAttribute("position",new Qt(V,3)),this.setAttribute("normal",new Qt(z,3)),this.setAttribute("uv",new Qt(W,2))}}const oi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Yt={common:{diffuse:{value:new Jt(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new cs},uv2Transform:{value:new cs},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new et(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Jt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Jt(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new cs}},sprite:{diffuse:{value:new Jt(15658734)},opacity:{value:1},center:{value:new et(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new cs}}},Za={basic:{uniforms:qs([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.fog]),vertexShader:oi.meshbasic_vert,fragmentShader:oi.meshbasic_frag},lambert:{uniforms:qs([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.fog,Yt.lights,{emissive:{value:new Jt(0)}}]),vertexShader:oi.meshlambert_vert,fragmentShader:oi.meshlambert_frag},phong:{uniforms:qs([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,Yt.lights,{emissive:{value:new Jt(0)},specular:{value:new Jt(1118481)},shininess:{value:30}}]),vertexShader:oi.meshphong_vert,fragmentShader:oi.meshphong_frag},standard:{uniforms:qs([Yt.common,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.roughnessmap,Yt.metalnessmap,Yt.fog,Yt.lights,{emissive:{value:new Jt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:oi.meshphysical_vert,fragmentShader:oi.meshphysical_frag},toon:{uniforms:qs([Yt.common,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.gradientmap,Yt.fog,Yt.lights,{emissive:{value:new Jt(0)}}]),vertexShader:oi.meshtoon_vert,fragmentShader:oi.meshtoon_frag},matcap:{uniforms:qs([Yt.common,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,{matcap:{value:null}}]),vertexShader:oi.meshmatcap_vert,fragmentShader:oi.meshmatcap_frag},points:{uniforms:qs([Yt.points,Yt.fog]),vertexShader:oi.points_vert,fragmentShader:oi.points_frag},dashed:{uniforms:qs([Yt.common,Yt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:oi.linedashed_vert,fragmentShader:oi.linedashed_frag},depth:{uniforms:qs([Yt.common,Yt.displacementmap]),vertexShader:oi.depth_vert,fragmentShader:oi.depth_frag},normal:{uniforms:qs([Yt.common,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,{opacity:{value:1}}]),vertexShader:oi.normal_vert,fragmentShader:oi.normal_frag},sprite:{uniforms:qs([Yt.sprite,Yt.fog]),vertexShader:oi.sprite_vert,fragmentShader:oi.sprite_frag},background:{uniforms:{uvTransform:{value:new cs},t2D:{value:null}},vertexShader:oi.background_vert,fragmentShader:oi.background_frag},cube:{uniforms:qs([Yt.envmap,{opacity:{value:1}}]),vertexShader:oi.cube_vert,fragmentShader:oi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:oi.equirect_vert,fragmentShader:oi.equirect_frag},distanceRGBA:{uniforms:qs([Yt.common,Yt.displacementmap,{referencePosition:{value:new ee},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:oi.distanceRGBA_vert,fragmentShader:oi.distanceRGBA_frag},shadow:{uniforms:qs([Yt.lights,Yt.fog,{color:{value:new Jt(0)},opacity:{value:1}}]),vertexShader:oi.shadow_vert,fragmentShader:oi.shadow_frag}};function SC(p,a,c,m,v){const b=new Jt(0);let D,S,C=0,A=null,k=0,R=null;function L(V,z){c.buffers.color.setClear(V.r,V.g,V.b,z,v)}return{getClearColor:function(){return b},setClearColor:function(V,z=1){b.set(V),C=z,L(b,C)},getClearAlpha:function(){return C},setClearAlpha:function(V){C=V,L(b,C)},render:function O(V,z,W,U){let B=!0===z.isScene?z.background:null;B&&B.isTexture&&(B=a.get(B));const te=p.xr,X=te.getSession&&te.getSession();X&&"additive"===X.environmentBlendMode&&(B=null),null===B?L(b,C):B&&B.isColor&&(L(B,1),U=!0),(p.autoClear||U)&&p.clear(p.autoClearColor,p.autoClearDepth,p.autoClearStencil),B&&(B.isCubeTexture||B.isWebGLCubeRenderTarget||B.mapping===bi)?(void 0===S&&(S=new ei(new hu(1,1,1),new Io({name:"BackgroundCubeMaterial",uniforms:md(Za.cube.uniforms),vertexShader:Za.cube.vertexShader,fragmentShader:Za.cube.fragmentShader,side:Ae,depthTest:!1,depthWrite:!1,fog:!1})),S.geometry.deleteAttribute("normal"),S.geometry.deleteAttribute("uv"),S.onBeforeRender=function(se,K,he){this.matrixWorld.copyPosition(he.matrixWorld)},Object.defineProperty(S.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),m.update(S)),B.isWebGLCubeRenderTarget&&(B=B.texture),S.material.uniforms.envMap.value=B,S.material.uniforms.flipEnvMap.value=B.isCubeTexture&&B._needsFlipEnvMap?-1:1,(A!==B||k!==B.version||R!==p.toneMapping)&&(S.material.needsUpdate=!0,A=B,k=B.version,R=p.toneMapping),V.unshift(S,S.geometry,S.material,0,0,null)):B&&B.isTexture&&(void 0===D&&(D=new ei(new _d(2,2),new Io({name:"BackgroundMaterial",uniforms:md(Za.background.uniforms),vertexShader:Za.background.vertexShader,fragmentShader:Za.background.fragmentShader,side:ye,depthTest:!1,depthWrite:!1,fog:!1})),D.geometry.deleteAttribute("normal"),Object.defineProperty(D.material,"map",{get:function(){return this.uniforms.t2D.value}}),m.update(D)),D.material.uniforms.t2D.value=B,!0===B.matrixAutoUpdate&&B.updateMatrix(),D.material.uniforms.uvTransform.value.copy(B.matrix),(A!==B||k!==B.version||R!==p.toneMapping)&&(D.material.needsUpdate=!0,A=B,k=B.version,R=p.toneMapping),V.unshift(D,D.geometry,D.material,0,0,null))}}}function sy(p,a,c,m){const v=p.getParameter(34921),b=m.isWebGL2?null:a.get("OES_vertex_array_object"),C=m.isWebGL2||null!==b,D={},S=z(null);let A=S;function O(Ue){return m.isWebGL2?p.bindVertexArray(Ue):b.bindVertexArrayOES(Ue)}function L(Ue){return m.isWebGL2?p.deleteVertexArray(Ue):b.deleteVertexArrayOES(Ue)}function z(Ue){const De=[],je=[],st=[];for(let Ct=0;Ct<v;Ct++)De[Ct]=0,je[Ct]=0,st[Ct]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:De,enabledAttributes:je,attributeDivisors:st,object:Ue,attributes:{},index:null}}function B(){const Ue=A.newAttributes;for(let De=0,je=Ue.length;De<je;De++)Ue[De]=0}function te(Ue){X(Ue,0)}function X(Ue,De){const st=A.enabledAttributes,Ct=A.attributeDivisors;A.newAttributes[Ue]=1,0===st[Ue]&&(p.enableVertexAttribArray(Ue),st[Ue]=1),Ct[Ue]!==De&&((m.isWebGL2?p:a.get("ANGLE_instanced_arrays"))[m.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ue,De),Ct[Ue]=De)}function se(){const Ue=A.newAttributes,De=A.enabledAttributes;for(let je=0,st=De.length;je<st;je++)De[je]!==Ue[je]&&(p.disableVertexAttribArray(je),De[je]=0)}function K(Ue,De,je,st,Ct,jt){!0!==m.isWebGL2||5124!==je&&5125!==je?p.vertexAttribPointer(Ue,De,je,st,Ct,jt):p.vertexAttribIPointer(Ue,De,je,Ct,jt)}function Be(){Ke(),A!==S&&(A=S,O(A.object))}function Ke(){S.geometry=null,S.program=null,S.wireframe=!1}return{setup:function k(Ue,De,je,st,Ct){let jt=!1;if(C){const qt=function V(Ue,De,je){const st=!0===je.wireframe;let Ct=D[Ue.id];void 0===Ct&&(Ct={},D[Ue.id]=Ct);let jt=Ct[De.id];void 0===jt&&(jt={},Ct[De.id]=jt);let qt=jt[st];return void 0===qt&&(qt=z(function R(){return m.isWebGL2?p.createVertexArray():b.createVertexArrayOES()}()),jt[st]=qt),qt}(st,je,De);A!==qt&&(A=qt,O(A.object)),jt=function W(Ue,De){const je=A.attributes,st=Ue.attributes;let Ct=0;for(const jt in st){const qt=je[jt],an=st[jt];if(void 0===qt||qt.attribute!==an||qt.data!==an.data)return!0;Ct++}return A.attributesNum!==Ct||A.index!==De}(st,Ct),jt&&function U(Ue,De){const je={},st=Ue.attributes;let Ct=0;for(const jt in st){const qt=st[jt],an={};an.attribute=qt,qt.data&&(an.data=qt.data),je[jt]=an,Ct++}A.attributes=je,A.attributesNum=Ct,A.index=De}(st,Ct)}else{const qt=!0===De.wireframe;(A.geometry!==st.id||A.program!==je.id||A.wireframe!==qt)&&(A.geometry=st.id,A.program=je.id,A.wireframe=qt,jt=!0)}!0===Ue.isInstancedMesh&&(jt=!0),null!==Ct&&c.update(Ct,34963),jt&&(function he(Ue,De,je,st){if(!1===m.isWebGL2&&(Ue.isInstancedMesh||st.isInstancedBufferGeometry)&&null===a.get("ANGLE_instanced_arrays"))return;B();const Ct=st.attributes,jt=je.getAttributes(),qt=De.defaultAttributeValues;for(const an in jt){const nn=jt[an];if(nn>=0){const Wn=Ct[an];if(void 0!==Wn){const Rn=Wn.normalized,Hi=Wn.itemSize,yi=c.get(Wn);if(void 0===yi)continue;const dt=yi.buffer,dr=yi.type,gi=yi.bytesPerElement;if(Wn.isInterleavedBufferAttribute){const di=Wn.data,Gn=di.stride,mi=Wn.offset;di&&di.isInstancedInterleavedBuffer?(X(nn,di.meshPerAttribute),void 0===st._maxInstanceCount&&(st._maxInstanceCount=di.meshPerAttribute*di.count)):te(nn),p.bindBuffer(34962,dt),K(nn,Hi,dr,Rn,Gn*gi,mi*gi)}else Wn.isInstancedBufferAttribute?(X(nn,Wn.meshPerAttribute),void 0===st._maxInstanceCount&&(st._maxInstanceCount=Wn.meshPerAttribute*Wn.count)):te(nn),p.bindBuffer(34962,dt),K(nn,Hi,dr,Rn,0,0)}else if("instanceMatrix"===an){const Rn=c.get(Ue.instanceMatrix);if(void 0===Rn)continue;const Hi=Rn.buffer,yi=Rn.type;X(nn+0,1),X(nn+1,1),X(nn+2,1),X(nn+3,1),p.bindBuffer(34962,Hi),p.vertexAttribPointer(nn+0,4,yi,!1,64,0),p.vertexAttribPointer(nn+1,4,yi,!1,64,16),p.vertexAttribPointer(nn+2,4,yi,!1,64,32),p.vertexAttribPointer(nn+3,4,yi,!1,64,48)}else if("instanceColor"===an){const Rn=c.get(Ue.instanceColor);if(void 0===Rn)continue;const Hi=Rn.buffer,yi=Rn.type;X(nn,1),p.bindBuffer(34962,Hi),p.vertexAttribPointer(nn,3,yi,!1,12,0)}else if(void 0!==qt){const Rn=qt[an];if(void 0!==Rn)switch(Rn.length){case 2:p.vertexAttrib2fv(nn,Rn);break;case 3:p.vertexAttrib3fv(nn,Rn);break;case 4:p.vertexAttrib4fv(nn,Rn);break;default:p.vertexAttrib1fv(nn,Rn)}}}}se()}(Ue,De,je,st),null!==Ct&&p.bindBuffer(34963,c.get(Ct).buffer))},reset:Be,resetDefaultState:Ke,dispose:function Ie(){Be();for(const Ue in D){const De=D[Ue];for(const je in De){const st=De[je];for(const Ct in st)L(st[Ct].object),delete st[Ct];delete De[je]}delete D[Ue]}},releaseStatesOfGeometry:function xe(Ue){if(void 0===D[Ue.id])return;const De=D[Ue.id];for(const je in De){const st=De[je];for(const Ct in st)L(st[Ct].object),delete st[Ct];delete De[je]}delete D[Ue.id]},releaseStatesOfProgram:function Pe(Ue){for(const De in D){const je=D[De];if(void 0===je[Ue.id])continue;const st=je[Ue.id];for(const Ct in st)L(st[Ct].object),delete st[Ct];delete je[Ue.id]}},initAttributes:B,enableAttribute:te,disableUnusedAttributes:se}}function Qb(p,a,c,m){const v=m.isWebGL2;let b;this.setMode=function C(A){b=A},this.render=function D(A,k){p.drawArrays(b,A,k),c.update(k,b,1)},this.renderInstances=function S(A,k,R){if(0===R)return;let O,L;if(v)O=p,L="drawArraysInstanced";else if(O=a.get("ANGLE_instanced_arrays"),L="drawArraysInstancedANGLE",null===O)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");O[L](b,A,k,R),c.update(k,b,R)}}function oy(p,a,c){let m;function b(K){if("highp"===K){if(p.getShaderPrecisionFormat(35633,36338).precision>0&&p.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";K="mediump"}return"mediump"===K&&p.getShaderPrecisionFormat(35633,36337).precision>0&&p.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const C="undefined"!=typeof WebGL2RenderingContext&&p instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&p instanceof WebGL2ComputeRenderingContext;let D=void 0!==c.precision?c.precision:"highp";const S=b(D);S!==D&&(console.warn("THREE.WebGLRenderer:",D,"not supported, using",S,"instead."),D=S);const A=!0===c.logarithmicDepthBuffer,k=p.getParameter(34930),R=p.getParameter(35660),O=p.getParameter(3379),L=p.getParameter(34076),V=p.getParameter(34921),z=p.getParameter(36347),W=p.getParameter(36348),U=p.getParameter(36349),B=R>0,te=C||a.has("OES_texture_float");return{isWebGL2:C,getMaxAnisotropy:function v(){if(void 0!==m)return m;if(!0===a.has("EXT_texture_filter_anisotropic")){const K=a.get("EXT_texture_filter_anisotropic");m=p.getParameter(K.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else m=0;return m},getMaxPrecision:b,precision:D,logarithmicDepthBuffer:A,maxTextures:k,maxVertexTextures:R,maxTextureSize:O,maxCubemapSize:L,maxAttributes:V,maxVertexUniforms:z,maxVaryings:W,maxFragmentUniforms:U,vertexTextures:B,floatFragmentTextures:te,floatVertexTextures:B&&te,maxSamples:C?p.getParameter(36183):0}}function Am(p){const a=this;let c=null,m=0,v=!1,b=!1;const C=new ci,D=new cs,S={value:null,needsUpdate:!1};function A(){S.value!==c&&(S.value=c,S.needsUpdate=m>0),a.numPlanes=m,a.numIntersection=0}function k(R,O,L,V){const z=null!==R?R.length:0;let W=null;if(0!==z){if(W=S.value,!0!==V||null===W){const U=L+4*z,B=O.matrixWorldInverse;D.getNormalMatrix(B),(null===W||W.length<U)&&(W=new Float32Array(U));for(let te=0,X=L;te!==z;++te,X+=4)C.copy(R[te]).applyMatrix4(B,D),C.normal.toArray(W,X),W[X+3]=C.constant}S.value=W,S.needsUpdate=!0}return a.numPlanes=z,a.numIntersection=0,W}this.uniform=S,this.numPlanes=0,this.numIntersection=0,this.init=function(R,O,L){const V=0!==R.length||O||0!==m||v;return v=O,c=k(R,L,0),m=R.length,V},this.beginShadows=function(){b=!0,k(null)},this.endShadows=function(){b=!1,A()},this.setState=function(R,O,L){const V=R.clippingPlanes,z=R.clipIntersection,W=R.clipShadows,U=p.get(R);if(!v||null===V||0===V.length||b&&!W)b?k(null):A();else{const B=b?0:m,te=4*B;let X=U.clippingState||null;S.value=X,X=k(V,O,te,L);for(let se=0;se!==te;++se)X[se]=c[se];U.clippingState=X,this.numIntersection=z?this.numPlanes:0,this.numPlanes+=B}}}function Md(p){let a=new WeakMap;function c(C,D){return D===eu?C.mapping=js:D===qg&&(C.mapping=Ws),C}function v(C){const D=C.target;D.removeEventListener("dispose",v);const S=a.get(D);void 0!==S&&(a.delete(D),S.dispose())}return{get:function m(C){if(C&&C.isTexture){const D=C.mapping;if(D===eu||D===qg){if(a.has(C))return c(a.get(C).texture,C.mapping);{const S=C.image;if(S&&S.height>0){const A=p.getRenderTarget(),k=new kl(S.height/2);return k.fromEquirectangularTexture(p,C),a.set(C,k),p.setRenderTarget(A),C.addEventListener("dispose",v),c(k.texture,C.mapping)}return null}}}return C},dispose:function b(){a=new WeakMap}}}function Ms(p){const a={};function c(m){if(void 0!==a[m])return a[m];let v;switch(m){case"WEBGL_depth_texture":v=p.getExtension("WEBGL_depth_texture")||p.getExtension("MOZ_WEBGL_depth_texture")||p.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":v=p.getExtension("EXT_texture_filter_anisotropic")||p.getExtension("MOZ_EXT_texture_filter_anisotropic")||p.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":v=p.getExtension("WEBGL_compressed_texture_s3tc")||p.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||p.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":v=p.getExtension("WEBGL_compressed_texture_pvrtc")||p.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:v=p.getExtension(m)}return a[m]=v,v}return{has:function(m){return null!==c(m)},init:function(m){m.isWebGL2?c("EXT_color_buffer_float"):(c("WEBGL_depth_texture"),c("OES_texture_float"),c("OES_texture_half_float"),c("OES_texture_half_float_linear"),c("OES_standard_derivatives"),c("OES_element_index_uint"),c("OES_vertex_array_object"),c("ANGLE_instanced_arrays")),c("OES_texture_float_linear"),c("EXT_color_buffer_half_float")},get:function(m){const v=c(m);return null===v&&console.warn("THREE.WebGLRenderer: "+m+" extension not supported."),v}}}function AC(p,a,c,m){const v={},b=new WeakMap;function C(R){const O=R.target;null!==O.index&&a.remove(O.index);for(const V in O.attributes)a.remove(O.attributes[V]);O.removeEventListener("dispose",C),delete v[O.id];const L=b.get(O);L&&(a.remove(L),b.delete(O)),m.releaseStatesOfGeometry(O),!0===O.isInstancedBufferGeometry&&delete O._maxInstanceCount,c.memory.geometries--}function A(R){const O=[],L=R.index,V=R.attributes.position;let z=0;if(null!==L){const B=L.array;z=L.version;for(let te=0,X=B.length;te<X;te+=3){const se=B[te+0],K=B[te+1],he=B[te+2];O.push(se,K,K,he,he,se)}}else{z=V.version;for(let te=0,X=V.array.length/3-1;te<X;te+=3){const se=te+0,K=te+1,he=te+2;O.push(se,K,K,he,he,se)}}const W=new(uu(O)>65535?va:_a)(O,1);W.version=z;const U=b.get(R);U&&a.remove(U),b.set(R,W)}return{get:function D(R,O){return!0===v[O.id]||(O.addEventListener("dispose",C),v[O.id]=!0,c.memory.geometries++),O},update:function S(R){const O=R.attributes;for(const V in O)a.update(O[V],34962);const L=R.morphAttributes;for(const V in L){const z=L[V];for(let W=0,U=z.length;W<U;W++)a.update(z[W],34962)}},getWireframeAttribute:function k(R){const O=b.get(R);if(O){const L=R.index;null!==L&&O.version<L.version&&A(R)}else A(R);return b.get(R)}}}function sE(p,a,c,m){const v=m.isWebGL2;let b,D,S;this.setMode=function C(O){b=O},this.setIndex=function A(O){D=O.type,S=O.bytesPerElement},this.render=function k(O,L){p.drawElements(b,L,D,O*S),c.update(L,b,1)},this.renderInstances=function R(O,L,V){if(0===V)return;let z,W;if(v)z=p,W="drawElementsInstanced";else if(z=a.get("ANGLE_instanced_arrays"),W="drawElementsInstancedANGLE",null===z)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");z[W](b,L,D,O*S,V),c.update(L,b,V)}}function Tm(p){const c={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:c,programs:null,autoReset:!0,reset:function v(){c.frame++,c.calls=0,c.triangles=0,c.points=0,c.lines=0},update:function m(b,C,D){switch(c.calls++,C){case 4:c.triangles+=D*(b/3);break;case 1:c.lines+=D*(b/2);break;case 3:c.lines+=D*(b-1);break;case 2:c.lines+=D*b;break;case 0:c.points+=D*b;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",C)}}}}function Im(p,a){return p[0]-a[0]}function Ka(p,a){return Math.abs(a[1])-Math.abs(p[1])}function Cp(p){const a={},c=new Float32Array(8),m=[];for(let b=0;b<8;b++)m[b]=[b,0];return{update:function v(b,C,D,S){const A=b.morphTargetInfluences,k=void 0===A?0:A.length;let R=a[C.id];if(void 0===R){R=[];for(let W=0;W<k;W++)R[W]=[W,0];a[C.id]=R}for(let W=0;W<k;W++){const U=R[W];U[0]=W,U[1]=A[W]}R.sort(Ka);for(let W=0;W<8;W++)W<k&&R[W][1]?(m[W][0]=R[W][0],m[W][1]=R[W][1]):(m[W][0]=Number.MAX_SAFE_INTEGER,m[W][1]=0);m.sort(Im);const O=D.morphTargets&&C.morphAttributes.position,L=D.morphNormals&&C.morphAttributes.normal;let V=0;for(let W=0;W<8;W++){const U=m[W],B=U[0],te=U[1];B!==Number.MAX_SAFE_INTEGER&&te?(O&&C.getAttribute("morphTarget"+W)!==O[B]&&C.setAttribute("morphTarget"+W,O[B]),L&&C.getAttribute("morphNormal"+W)!==L[B]&&C.setAttribute("morphNormal"+W,L[B]),c[W]=te,V+=te):(O&&!0===C.hasAttribute("morphTarget"+W)&&C.deleteAttribute("morphTarget"+W),L&&!0===C.hasAttribute("morphNormal"+W)&&C.deleteAttribute("morphNormal"+W),c[W]=0)}const z=C.morphTargetsRelative?1:1-V;S.getUniforms().setValue(p,"morphTargetBaseInfluence",z),S.getUniforms().setValue(p,"morphTargetInfluences",c)}}}function jh(p,a,c,m){let v=new WeakMap;function D(S){const A=S.target;A.removeEventListener("dispose",D),c.remove(A.instanceMatrix),null!==A.instanceColor&&c.remove(A.instanceColor)}return{update:function b(S){const A=m.render.frame,R=a.get(S,S.geometry);return v.get(R)!==A&&(a.update(R),v.set(R,A)),S.isInstancedMesh&&(!1===S.hasEventListener("dispose",D)&&S.addEventListener("dispose",D),c.update(S.instanceMatrix,34962),null!==S.instanceColor&&c.update(S.instanceColor,34962)),R},dispose:function C(){v=new WeakMap}}}Za.physical={uniforms:qs([Za.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new et(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Jt(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:oi.meshphysical_vert,fragmentShader:oi.meshphysical_frag};class Rm extends Bi{constructor(a=null,c=1,m=1,v=1){super(null),this.image={data:a,width:c,height:m,depth:v},this.magFilter=Tn,this.minFilter=Tn,this.wrapR=Ps,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}Rm.prototype.isDataTexture2DArray=!0;class Wh extends Bi{constructor(a=null,c=1,m=1,v=1){super(null),this.image={data:a,width:c,height:m,depth:v},this.magFilter=Tn,this.minFilter=Tn,this.wrapR=Ps,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}Wh.prototype.isDataTexture3D=!0;const xc=new Bi,Xb=new Rm,ay=new Wh,bu=new pu,Mp=[],Pm=[],ly=new Float32Array(16),Cc=new Float32Array(9),Dp=new Float32Array(4);function Nl(p,a,c){const m=p[0];if(m<=0||m>0)return p;const v=a*c;let b=Mp[v];if(void 0===b&&(b=new Float32Array(v),Mp[v]=b),0!==a){m.toArray(b,0);for(let C=1,D=0;C!==a;++C)D+=c,p[C].toArray(b,D)}return b}function ra(p,a){if(p.length!==a.length)return!1;for(let c=0,m=p.length;c<m;c++)if(p[c]!==a[c])return!1;return!0}function $s(p,a){for(let c=0,m=a.length;c<m;c++)p[c]=a[c]}function wu(p,a){let c=Pm[a];void 0===c&&(c=new Int32Array(a),Pm[a]=c);for(let m=0;m!==a;++m)c[m]=p.allocateTextureUnit();return c}function Jb(p,a){const c=this.cache;c[0]!==a&&(p.uniform1f(this.addr,a),c[0]=a)}function ew(p,a){const c=this.cache;if(void 0!==a.x)(c[0]!==a.x||c[1]!==a.y)&&(p.uniform2f(this.addr,a.x,a.y),c[0]=a.x,c[1]=a.y);else{if(ra(c,a))return;p.uniform2fv(this.addr,a),$s(c,a)}}function tw(p,a){const c=this.cache;if(void 0!==a.x)(c[0]!==a.x||c[1]!==a.y||c[2]!==a.z)&&(p.uniform3f(this.addr,a.x,a.y,a.z),c[0]=a.x,c[1]=a.y,c[2]=a.z);else if(void 0!==a.r)(c[0]!==a.r||c[1]!==a.g||c[2]!==a.b)&&(p.uniform3f(this.addr,a.r,a.g,a.b),c[0]=a.r,c[1]=a.g,c[2]=a.b);else{if(ra(c,a))return;p.uniform3fv(this.addr,a),$s(c,a)}}function nw(p,a){const c=this.cache;if(void 0!==a.x)(c[0]!==a.x||c[1]!==a.y||c[2]!==a.z||c[3]!==a.w)&&(p.uniform4f(this.addr,a.x,a.y,a.z,a.w),c[0]=a.x,c[1]=a.y,c[2]=a.z,c[3]=a.w);else{if(ra(c,a))return;p.uniform4fv(this.addr,a),$s(c,a)}}function Om(p,a){const c=this.cache,m=a.elements;if(void 0===m){if(ra(c,a))return;p.uniformMatrix2fv(this.addr,!1,a),$s(c,a)}else{if(ra(c,m))return;Dp.set(m),p.uniformMatrix2fv(this.addr,!1,Dp),$s(c,m)}}function Ro(p,a){const c=this.cache,m=a.elements;if(void 0===m){if(ra(c,a))return;p.uniformMatrix3fv(this.addr,!1,a),$s(c,a)}else{if(ra(c,m))return;Cc.set(m),p.uniformMatrix3fv(this.addr,!1,Cc),$s(c,m)}}function km(p,a){const c=this.cache,m=a.elements;if(void 0===m){if(ra(c,a))return;p.uniformMatrix4fv(this.addr,!1,a),$s(c,a)}else{if(ra(c,m))return;ly.set(m),p.uniformMatrix4fv(this.addr,!1,ly),$s(c,m)}}function cy(p,a,c){const m=this.cache,v=c.allocateTextureUnit();m[0]!==v&&(p.uniform1i(this.addr,v),m[0]=v),c.safeSetTexture2D(a||xc,v)}function xu(p,a,c){const m=this.cache,v=c.allocateTextureUnit();m[0]!==v&&(p.uniform1i(this.addr,v),m[0]=v),c.setTexture2DArray(a||Xb,v)}function iw(p,a,c){const m=this.cache,v=c.allocateTextureUnit();m[0]!==v&&(p.uniform1i(this.addr,v),m[0]=v),c.setTexture3D(a||ay,v)}function rw(p,a,c){const m=this.cache,v=c.allocateTextureUnit();m[0]!==v&&(p.uniform1i(this.addr,v),m[0]=v),c.safeSetTextureCube(a||bu,v)}function Ep(p,a){const c=this.cache;c[0]!==a&&(p.uniform1i(this.addr,a),c[0]=a)}function uy(p,a){const c=this.cache;ra(c,a)||(p.uniform2iv(this.addr,a),$s(c,a))}function Cu(p,a){const c=this.cache;ra(c,a)||(p.uniform3iv(this.addr,a),$s(c,a))}function Fm(p,a){const c=this.cache;ra(c,a)||(p.uniform4iv(this.addr,a),$s(c,a))}function dy(p,a){const c=this.cache;c[0]!==a&&(p.uniform1ui(this.addr,a),c[0]=a)}function Ap(p,a){p.uniform1fv(this.addr,a)}function oE(p,a){p.uniform1iv(this.addr,a)}function TC(p,a){p.uniform2iv(this.addr,a)}function Po(p,a){p.uniform3iv(this.addr,a)}function $e(p,a){p.uniform4iv(this.addr,a)}function _t(p,a){const c=Nl(a,this.size,2);p.uniform2fv(this.addr,c)}function ya(p,a){const c=Nl(a,this.size,3);p.uniform3fv(this.addr,c)}function Yh(p,a){const c=Nl(a,this.size,4);p.uniform4fv(this.addr,c)}function Tt(p,a){const c=Nl(a,this.size,4);p.uniformMatrix2fv(this.addr,!1,c)}function Nr(p,a){const c=Nl(a,this.size,9);p.uniformMatrix3fv(this.addr,!1,c)}function Dd(p,a){const c=Nl(a,this.size,16);p.uniformMatrix4fv(this.addr,!1,c)}function Lm(p,a,c){const m=a.length,v=wu(c,m);p.uniform1iv(this.addr,v);for(let b=0;b!==m;++b)c.safeSetTexture2D(a[b]||xc,v[b])}function dn(p,a,c){const m=a.length,v=wu(c,m);p.uniform1iv(this.addr,v);for(let b=0;b!==m;++b)c.safeSetTextureCube(a[b]||bu,v[b])}function zt(p,a,c){this.id=p,this.addr=c,this.cache=[],this.setValue=function Sp(p){switch(p){case 5126:return Jb;case 35664:return ew;case 35665:return tw;case 35666:return nw;case 35674:return Om;case 35675:return Ro;case 35676:return km;case 5124:case 35670:return Ep;case 35667:case 35671:return uy;case 35668:case 35672:return Cu;case 35669:case 35673:return Fm;case 5125:return dy;case 35678:case 36198:case 36298:case 36306:case 35682:return cy;case 35679:case 36299:case 36307:return iw;case 35680:case 36300:case 36308:case 36293:return rw;case 36289:case 36303:case 36311:case 36292:return xu}}(a.type)}function hy(p,a,c){this.id=p,this.addr=c,this.cache=[],this.size=a.size,this.setValue=function En(p){switch(p){case 5126:return Ap;case 35664:return _t;case 35665:return ya;case 35666:return Yh;case 35674:return Tt;case 35675:return Nr;case 35676:return Dd;case 5124:case 35670:return oE;case 35667:case 35671:return TC;case 35668:case 35672:return Po;case 35669:case 35673:return $e;case 35678:case 36198:case 36298:case 36306:case 35682:return Lm;case 35680:case 36300:case 36308:case 36293:return dn}}(a.type)}function fy(p){this.id=p,this.seq=[],this.map={}}hy.prototype.updateCache=function(p){const a=this.cache;p instanceof Float32Array&&a.length!==p.length&&(this.cache=new Float32Array(p.length)),$s(a,p)},fy.prototype.setValue=function(p,a,c){const m=this.seq;for(let v=0,b=m.length;v!==b;++v){const C=m[v];C.setValue(p,a[C.id],c)}};const ai=/(\w+)(\])?(\[|\.)?/g;function Mu(p,a){p.seq.push(a),p.map[a.id]=a}function Nm(p,a,c){const m=p.name,v=m.length;for(ai.lastIndex=0;;){const b=ai.exec(m),C=ai.lastIndex;let D=b[1];const A=b[3];if("]"===b[2]&&(D|=0),void 0===A||"["===A&&C+2===v){Mu(c,void 0===A?new zt(D,p,a):new hy(D,p,a));break}{let R=c.map[D];void 0===R&&(R=new fy(D),Mu(c,R)),c=R}}}function Tr(p,a){this.seq=[],this.map={};const c=p.getProgramParameter(a,35718);for(let m=0;m<c;++m){const v=p.getActiveUniform(a,m);Nm(v,p.getUniformLocation(a,v.name),this)}}function ni(p,a,c){const m=p.createShader(a);return p.shaderSource(m,c),p.compileShader(m),m}Tr.prototype.setValue=function(p,a,c,m){const v=this.map[a];void 0!==v&&v.setValue(p,c,m)},Tr.prototype.setOptional=function(p,a,c){const m=a[c];void 0!==m&&this.setValue(p,c,m)},Tr.upload=function(p,a,c,m){for(let v=0,b=a.length;v!==b;++v){const C=a[v],D=c[C.id];!1!==D.needsUpdate&&C.setValue(p,D.value,m)}},Tr.seqWithValue=function(p,a){const c=[];for(let m=0,v=p.length;m!==v;++m){const b=p[m];b.id in a&&c.push(b)}return c};let py=0;function Bm(p){switch(p){case Do:return["Linear","( value )"];case ws:return["sRGB","( value )"];case nm:return["RGBE","( value )"];case vv:return["RGBM","( value, 7.0 )"];case Ki:return["RGBM","( value, 16.0 )"];case Qo:return["RGBD","( value, 256.0 )"];case vh:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case im:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",p),["Linear","( value )"]}}function gy(p,a,c){const m=p.getShaderParameter(a,35713),v=p.getShaderInfoLog(a).trim();return m&&""===v?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+c+"\n"+v+function Ed(p){const a=p.split("\n");for(let c=0;c<a.length;c++)a[c]=c+1+": "+a[c];return a.join("\n")}(p.getShaderSource(a))}function ui(p,a){const c=Bm(a);return"vec4 "+p+"( vec4 value ) { return "+c[0]+"ToLinear"+c[1]+"; }"}function Qa(p,a){const c=Bm(a);return"vec4 "+p+"( vec4 value ) { return LinearTo"+c[0]+c[1]+"; }"}function Xa(p,a){let c;switch(a){case hn:c="Linear";break;case Mr:c="Reinhard";break;case _r:c="OptimizedCineon";break;case or:c="ACESFilmic";break;case Rs:c="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",a),c="Linear"}return"vec3 "+p+"( vec3 color ) { return "+c+"ToneMapping( color ); }"}function ba(p){return""!==p}function Br(p,a){return p.replace(/NUM_DIR_LIGHTS/g,a.numDirLights).replace(/NUM_SPOT_LIGHTS/g,a.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,a.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,a.numPointLights).replace(/NUM_HEMI_LIGHTS/g,a.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,a.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,a.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,a.numPointLightShadows)}function Du(p,a){return p.replace(/NUM_CLIPPING_PLANES/g,a.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,a.numClippingPlanes-a.numClipIntersection)}const my=/^[ \t]*#include +<([\w\d./]+)>/gm;function Vm(p){return p.replace(my,Tp)}function Tp(p,a){const c=oi[a];if(void 0===c)throw new Error("Can not resolve #include <"+a+">");return Vm(c)}const In=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Ip=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Gm(p){return p.replace(Ip,Ja).replace(In,gn)}function gn(p,a,c,m){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Ja(0,a,c,m)}function Ja(p,a,c,m){let v="";for(let b=parseInt(a);b<parseInt(c);b++)v+=m.replace(/\[\s*i\s*\]/g,"[ "+b+" ]").replace(/UNROLLED_LOOP_INDEX/g,b);return v}function Vr(p){let a="precision "+p.precision+" float;\nprecision "+p.precision+" int;";return"highp"===p.precision?a+="\n#define HIGH_PRECISION":"mediump"===p.precision?a+="\n#define MEDIUM_PRECISION":"lowp"===p.precision&&(a+="\n#define LOW_PRECISION"),a}function Rp(p,a,c,m){const v=p.getContext(),b=c.defines;let C=c.vertexShader,D=c.fragmentShader;const S=function qh(p){let a="SHADOWMAP_TYPE_BASIC";return p.shadowMapType===pe?a="SHADOWMAP_TYPE_PCF":p.shadowMapType===_e?a="SHADOWMAP_TYPE_PCF_SOFT":p.shadowMapType===Ge&&(a="SHADOWMAP_TYPE_VSM"),a}(c),A=function $h(p){let a="ENVMAP_TYPE_CUBE";if(p.envMap)switch(p.envMapMode){case js:case Ws:a="ENVMAP_TYPE_CUBE";break;case bi:case yn:a="ENVMAP_TYPE_CUBE_UV"}return a}(c),k=function Um(p){let a="ENVMAP_MODE_REFLECTION";if(p.envMap)switch(p.envMapMode){case Ws:case yn:a="ENVMAP_MODE_REFRACTION"}return a}(c),R=function el(p){let a="ENVMAP_BLENDING_NONE";if(p.envMap)switch(p.combine){case La:a="ENVMAP_BLENDING_MULTIPLY";break;case hi:a="ENVMAP_BLENDING_MIX";break;case fi:a="ENVMAP_BLENDING_ADD"}return a}(c),O=p.gammaFactor>0?p.gammaFactor:1,L=c.isWebGL2?"":function Sd(p){return[p.extensionDerivatives||p.envMapCubeUV||p.bumpMap||p.tangentSpaceNormalMap||p.clearcoatNormalMap||p.flatShading||"physical"===p.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(p.extensionFragDepth||p.logarithmicDepthBuffer)&&p.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",p.extensionDrawBuffers&&p.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(p.extensionShaderTextureLOD||p.envMap)&&p.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ba).join("\n")}(c),V=function mo(p){const a=[];for(const c in p){const m=p[c];!1!==m&&a.push("#define "+c+" "+m)}return a.join("\n")}(b),z=v.createProgram();let W,U,B=c.glslVersion?"#version "+c.glslVersion+"\n":"";c.isRawShaderMaterial?(W=[V].filter(ba).join("\n"),W.length>0&&(W+="\n"),U=[L,V].filter(ba).join("\n"),U.length>0&&(U+="\n")):(W=[Vr(c),"#define SHADER_NAME "+c.shaderName,V,c.instancing?"#define USE_INSTANCING":"",c.instancingColor?"#define USE_INSTANCING_COLOR":"",c.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+O,"#define MAX_BONES "+c.maxBones,c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp2?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+k:"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.normalMap&&c.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",c.normalMap&&c.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",c.clearcoatMap?"#define USE_CLEARCOATMAP":"",c.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",c.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",c.displacementMap&&c.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.transmissionMap?"#define USE_TRANSMISSIONMAP":"",c.vertexTangents?"#define USE_TANGENT":"",c.vertexColors?"#define USE_COLOR":"",c.vertexUvs?"#define USE_UV":"",c.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",c.flatShading?"#define FLAT_SHADED":"",c.skinning?"#define USE_SKINNING":"",c.useVertexTexture?"#define BONE_TEXTURE":"",c.morphTargets?"#define USE_MORPHTARGETS":"",c.morphNormals&&!1===c.flatShading?"#define USE_MORPHNORMALS":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+S:"",c.sizeAttenuation?"#define USE_SIZEATTENUATION":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.logarithmicDepthBuffer&&c.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ba).join("\n"),U=[L,Vr(c),"#define SHADER_NAME "+c.shaderName,V,c.alphaTest?"#define ALPHATEST "+c.alphaTest+(c.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+O,c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp2?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.matcap?"#define USE_MATCAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+A:"",c.envMap?"#define "+k:"",c.envMap?"#define "+R:"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.normalMap&&c.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",c.normalMap&&c.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",c.clearcoatMap?"#define USE_CLEARCOATMAP":"",c.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",c.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.sheen?"#define USE_SHEEN":"",c.transmissionMap?"#define USE_TRANSMISSIONMAP":"",c.vertexTangents?"#define USE_TANGENT":"",c.vertexColors||c.instancingColor?"#define USE_COLOR":"",c.vertexUvs?"#define USE_UV":"",c.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",c.gradientMap?"#define USE_GRADIENTMAP":"",c.flatShading?"#define FLAT_SHADED":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+S:"",c.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",c.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.logarithmicDepthBuffer&&c.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(c.extensionShaderTextureLOD||c.envMap)&&c.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",c.toneMapping!==vs?"#define TONE_MAPPING":"",c.toneMapping!==vs?oi.tonemapping_pars_fragment:"",c.toneMapping!==vs?Xa("toneMapping",c.toneMapping):"",c.dithering?"#define DITHERING":"",oi.encodings_pars_fragment,c.map?ui("mapTexelToLinear",c.mapEncoding):"",c.matcap?ui("matcapTexelToLinear",c.matcapEncoding):"",c.envMap?ui("envMapTexelToLinear",c.envMapEncoding):"",c.emissiveMap?ui("emissiveMapTexelToLinear",c.emissiveMapEncoding):"",c.lightMap?ui("lightMapTexelToLinear",c.lightMapEncoding):"",Qa("linearToOutputTexel",c.outputEncoding),c.depthPacking?"#define DEPTH_PACKING "+c.depthPacking:"","\n"].filter(ba).join("\n")),C=Vm(C),C=Br(C,c),C=Du(C,c),D=Vm(D),D=Br(D,c),D=Du(D,c),C=Gm(C),D=Gm(D),c.isWebGL2&&!0!==c.isRawShaderMaterial&&(B="#version 300 es\n",W=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+W,U=["#define varying in",c.glslVersion===Dv?"":"out highp vec4 pc_fragColor;",c.glslVersion===Dv?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+U);const X=B+U+D,se=ni(v,35633,B+W+C),K=ni(v,35632,X);if(v.attachShader(z,se),v.attachShader(z,K),void 0!==c.index0AttributeName?v.bindAttribLocation(z,0,c.index0AttributeName):!0===c.morphTargets&&v.bindAttribLocation(z,0,"position"),v.linkProgram(z),p.debug.checkShaderErrors){const xe=v.getProgramInfoLog(z).trim(),Pe=v.getShaderInfoLog(se).trim(),Be=v.getShaderInfoLog(K).trim();let Ke=!0,Ue=!0;if(!1===v.getProgramParameter(z,35714)){Ke=!1;const De=gy(v,se,"vertex"),je=gy(v,K,"fragment");console.error("THREE.WebGLProgram: shader error: ",v.getError(),"35715",v.getProgramParameter(z,35715),"gl.getProgramInfoLog",xe,De,je)}else""!==xe?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",xe):(""===Pe||""===Be)&&(Ue=!1);Ue&&(this.diagnostics={runnable:Ke,programLog:xe,vertexShader:{log:Pe,prefix:W},fragmentShader:{log:Be,prefix:U}})}let he,Ie;return v.deleteShader(se),v.deleteShader(K),this.getUniforms=function(){return void 0===he&&(he=new Tr(v,z)),he},this.getAttributes=function(){return void 0===Ie&&(Ie=function IC(p,a){const c={},m=p.getProgramParameter(a,35721);for(let v=0;v<m;v++){const C=p.getActiveAttrib(a,v).name;c[C]=p.getAttribLocation(a,C)}return c}(v,z)),Ie},this.destroy=function(){m.releaseStatesOfProgram(this),v.deleteProgram(z),this.program=void 0},this.name=c.shaderName,this.id=py++,this.cacheKey=a,this.usedTimes=1,this.program=z,this.vertexShader=se,this.fragmentShader=K,this}function Pp(p,a,c,m,v,b){const C=[],D=m.isWebGL2,S=m.logarithmicDepthBuffer,A=m.floatVertexTextures,k=m.maxVertexUniforms,R=m.vertexTextures;let O=m.precision;const L={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},V=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function W(K){let he;return K&&K.isTexture?he=K.encoding:K&&K.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),he=K.texture.encoding):he=Do,he}return{getParameters:function U(K,he,Ie,xe,Pe){const Be=xe.fog,Ue=a.get(K.envMap||(K.isMeshStandardMaterial?xe.environment:null)),De=L[K.type],je=Pe.isSkinnedMesh?function z(K){const Ie=K.skeleton.bones;if(A)return 1024;{const Pe=Math.floor((k-20)/4),Be=Math.min(Pe,Ie.length);return Be<Ie.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Ie.length+" bones. This GPU supports "+Be+"."),0):Be}}(Pe):0;let st,Ct;if(null!==K.precision&&(O=m.getMaxPrecision(K.precision),O!==K.precision&&console.warn("THREE.WebGLProgram.getParameters:",K.precision,"not supported, using",O,"instead.")),De){const an=Za[De];st=an.vertexShader,Ct=an.fragmentShader}else st=K.vertexShader,Ct=K.fragmentShader;const jt=p.getRenderTarget();return{isWebGL2:D,shaderID:De,shaderName:K.type,vertexShader:st,fragmentShader:Ct,defines:K.defines,isRawShaderMaterial:!0===K.isRawShaderMaterial,glslVersion:K.glslVersion,precision:O,instancing:!0===Pe.isInstancedMesh,instancingColor:!0===Pe.isInstancedMesh&&null!==Pe.instanceColor,supportsVertexTextures:R,outputEncoding:null!==jt?W(jt.texture):p.outputEncoding,map:!!K.map,mapEncoding:W(K.map),matcap:!!K.matcap,matcapEncoding:W(K.matcap),envMap:!!Ue,envMapMode:Ue&&Ue.mapping,envMapEncoding:W(Ue),envMapCubeUV:!!Ue&&(Ue.mapping===bi||Ue.mapping===yn),lightMap:!!K.lightMap,lightMapEncoding:W(K.lightMap),aoMap:!!K.aoMap,emissiveMap:!!K.emissiveMap,emissiveMapEncoding:W(K.emissiveMap),bumpMap:!!K.bumpMap,normalMap:!!K.normalMap,objectSpaceNormalMap:K.normalMapType===vb,tangentSpaceNormalMap:K.normalMapType===yh,clearcoatMap:!!K.clearcoatMap,clearcoatRoughnessMap:!!K.clearcoatRoughnessMap,clearcoatNormalMap:!!K.clearcoatNormalMap,displacementMap:!!K.displacementMap,roughnessMap:!!K.roughnessMap,metalnessMap:!!K.metalnessMap,specularMap:!!K.specularMap,alphaMap:!!K.alphaMap,gradientMap:!!K.gradientMap,sheen:!!K.sheen,transmissionMap:!!K.transmissionMap,combine:K.combine,vertexTangents:K.normalMap&&K.vertexTangents,vertexColors:K.vertexColors,vertexUvs:!!(K.map||K.bumpMap||K.normalMap||K.specularMap||K.alphaMap||K.emissiveMap||K.roughnessMap||K.metalnessMap||K.clearcoatMap||K.clearcoatRoughnessMap||K.clearcoatNormalMap||K.displacementMap||K.transmissionMap),uvsVertexOnly:!(K.map||K.bumpMap||K.normalMap||K.specularMap||K.alphaMap||K.emissiveMap||K.roughnessMap||K.metalnessMap||K.clearcoatNormalMap||K.transmissionMap||!K.displacementMap),fog:!!Be,useFog:K.fog,fogExp2:Be&&Be.isFogExp2,flatShading:!!K.flatShading,sizeAttenuation:K.sizeAttenuation,logarithmicDepthBuffer:S,skinning:K.skinning&&je>0,maxBones:je,useVertexTexture:A,morphTargets:K.morphTargets,morphNormals:K.morphNormals,maxMorphTargets:p.maxMorphTargets,maxMorphNormals:p.maxMorphNormals,numDirLights:he.directional.length,numPointLights:he.point.length,numSpotLights:he.spot.length,numRectAreaLights:he.rectArea.length,numHemiLights:he.hemi.length,numDirLightShadows:he.directionalShadowMap.length,numPointLightShadows:he.pointShadowMap.length,numSpotLightShadows:he.spotShadowMap.length,numClippingPlanes:b.numPlanes,numClipIntersection:b.numIntersection,dithering:K.dithering,shadowMapEnabled:p.shadowMap.enabled&&Ie.length>0,shadowMapType:p.shadowMap.type,toneMapping:K.toneMapped?p.toneMapping:vs,physicallyCorrectLights:p.physicallyCorrectLights,premultipliedAlpha:K.premultipliedAlpha,alphaTest:K.alphaTest,doubleSided:K.side===at,flipSided:K.side===Ae,depthPacking:void 0!==K.depthPacking&&K.depthPacking,index0AttributeName:K.index0AttributeName,extensionDerivatives:K.extensions&&K.extensions.derivatives,extensionFragDepth:K.extensions&&K.extensions.fragDepth,extensionDrawBuffers:K.extensions&&K.extensions.drawBuffers,extensionShaderTextureLOD:K.extensions&&K.extensions.shaderTextureLOD,rendererExtensionFragDepth:D||c.has("EXT_frag_depth"),rendererExtensionDrawBuffers:D||c.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:D||c.has("EXT_shader_texture_lod"),customProgramCacheKey:K.customProgramCacheKey()}},getProgramCacheKey:function B(K){const he=[];if(K.shaderID?he.push(K.shaderID):(he.push(K.fragmentShader),he.push(K.vertexShader)),void 0!==K.defines)for(const Ie in K.defines)he.push(Ie),he.push(K.defines[Ie]);if(!1===K.isRawShaderMaterial){for(let Ie=0;Ie<V.length;Ie++)he.push(K[V[Ie]]);he.push(p.outputEncoding),he.push(p.gammaFactor)}return he.push(K.customProgramCacheKey),he.join()},getUniforms:function te(K){const he=L[K.type];let Ie;return Ie=he?fm.clone(Za[he].uniforms):K.uniforms,Ie},acquireProgram:function X(K,he){let Ie;for(let xe=0,Pe=C.length;xe<Pe;xe++){const Be=C[xe];if(Be.cacheKey===he){Ie=Be,++Ie.usedTimes;break}}return void 0===Ie&&(Ie=new Rp(p,he,K,v),C.push(Ie)),Ie},releaseProgram:function se(K){if(0==--K.usedTimes){const he=C.indexOf(K);C[he]=C[C.length-1],C.pop(),K.destroy()}},programs:C}}function Op(){let p=new WeakMap;return{get:function a(b){let C=p.get(b);return void 0===C&&(C={},p.set(b,C)),C},remove:function c(b){p.delete(b)},update:function m(b,C,D){p.get(b)[C]=D},dispose:function v(){p=new WeakMap}}}function sw(p,a){return p.groupOrder!==a.groupOrder?p.groupOrder-a.groupOrder:p.renderOrder!==a.renderOrder?p.renderOrder-a.renderOrder:p.program!==a.program?p.program.id-a.program.id:p.material.id!==a.material.id?p.material.id-a.material.id:p.z!==a.z?p.z-a.z:p.id-a.id}function _y(p,a){return p.groupOrder!==a.groupOrder?p.groupOrder-a.groupOrder:p.renderOrder!==a.renderOrder?p.renderOrder-a.renderOrder:p.z!==a.z?a.z-p.z:p.id-a.id}function ow(p){const a=[];let c=0;const m=[],v=[],b={id:-1};function D(O,L,V,z,W,U){let B=a[c];const te=p.get(V);return void 0===B?(B={id:O.id,object:O,geometry:L,material:V,program:te.program||b,groupOrder:z,renderOrder:O.renderOrder,z:W,group:U},a[c]=B):(B.id=O.id,B.object=O,B.geometry=L,B.material=V,B.program=te.program||b,B.groupOrder=z,B.renderOrder=O.renderOrder,B.z=W,B.group=U),c++,B}return{opaque:m,transparent:v,init:function C(){c=0,m.length=0,v.length=0},push:function S(O,L,V,z,W,U){const B=D(O,L,V,z,W,U);(!0===V.transparent?v:m).push(B)},unshift:function A(O,L,V,z,W,U){const B=D(O,L,V,z,W,U);(!0===V.transparent?v:m).unshift(B)},finish:function R(){for(let O=c,L=a.length;O<L;O++){const V=a[O];if(null===V.id)break;V.id=null,V.object=null,V.geometry=null,V.material=null,V.program=null,V.group=null}},sort:function k(O,L){m.length>1&&m.sort(O||sw),v.length>1&&v.sort(L||_y)}}}function Ad(p){let a=new WeakMap;return{get:function c(v,b){let C;return!1===a.has(v)?(C=new ow(p),a.set(v,[C])):b>=a.get(v).length?(C=new ow(p),a.get(v).push(C)):C=a.get(v)[b],C},dispose:function m(){a=new WeakMap}}}function Eu(){const p={};return{get:function(a){if(void 0!==p[a.id])return p[a.id];let c;switch(a.type){case"DirectionalLight":c={direction:new ee,color:new Jt};break;case"SpotLight":c={position:new ee,direction:new ee,color:new Jt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":c={position:new ee,color:new Jt,distance:0,decay:0};break;case"HemisphereLight":c={direction:new ee,skyColor:new Jt,groundColor:new Jt};break;case"RectAreaLight":c={color:new Jt,position:new ee,halfWidth:new ee,halfHeight:new ee}}return p[a.id]=c,c}}}let Hm=0;function ds(p,a){return(a.castShadow?1:0)-(p.castShadow?1:0)}function aE(p,a){const c=new Eu,m=function _o(){const p={};return{get:function(a){if(void 0!==p[a.id])return p[a.id];let c;switch(a.type){case"DirectionalLight":case"SpotLight":c={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et};break;case"PointLight":c={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et,shadowCameraNear:1,shadowCameraFar:1e3}}return p[a.id]=c,c}}}(),v={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let k=0;k<9;k++)v.probe.push(new ee);const b=new ee,C=new fn,D=new fn;return{setup:function S(k){let R=0,O=0,L=0;for(let he=0;he<9;he++)v.probe[he].set(0,0,0);let V=0,z=0,W=0,U=0,B=0,te=0,X=0,se=0;k.sort(ds);for(let he=0,Ie=k.length;he<Ie;he++){const xe=k[he],Pe=xe.color,Be=xe.intensity,Ke=xe.distance,Ue=xe.shadow&&xe.shadow.map?xe.shadow.map.texture:null;if(xe.isAmbientLight)R+=Pe.r*Be,O+=Pe.g*Be,L+=Pe.b*Be;else if(xe.isLightProbe)for(let De=0;De<9;De++)v.probe[De].addScaledVector(xe.sh.coefficients[De],Be);else if(xe.isDirectionalLight){const De=c.get(xe);if(De.color.copy(xe.color).multiplyScalar(xe.intensity),xe.castShadow){const je=xe.shadow,st=m.get(xe);st.shadowBias=je.bias,st.shadowNormalBias=je.normalBias,st.shadowRadius=je.radius,st.shadowMapSize=je.mapSize,v.directionalShadow[V]=st,v.directionalShadowMap[V]=Ue,v.directionalShadowMatrix[V]=xe.shadow.matrix,te++}v.directional[V]=De,V++}else if(xe.isSpotLight){const De=c.get(xe);if(De.position.setFromMatrixPosition(xe.matrixWorld),De.color.copy(Pe).multiplyScalar(Be),De.distance=Ke,De.coneCos=Math.cos(xe.angle),De.penumbraCos=Math.cos(xe.angle*(1-xe.penumbra)),De.decay=xe.decay,xe.castShadow){const je=xe.shadow,st=m.get(xe);st.shadowBias=je.bias,st.shadowNormalBias=je.normalBias,st.shadowRadius=je.radius,st.shadowMapSize=je.mapSize,v.spotShadow[W]=st,v.spotShadowMap[W]=Ue,v.spotShadowMatrix[W]=xe.shadow.matrix,se++}v.spot[W]=De,W++}else if(xe.isRectAreaLight){const De=c.get(xe);De.color.copy(Pe).multiplyScalar(Be),De.halfWidth.set(.5*xe.width,0,0),De.halfHeight.set(0,.5*xe.height,0),v.rectArea[U]=De,U++}else if(xe.isPointLight){const De=c.get(xe);if(De.color.copy(xe.color).multiplyScalar(xe.intensity),De.distance=xe.distance,De.decay=xe.decay,xe.castShadow){const je=xe.shadow,st=m.get(xe);st.shadowBias=je.bias,st.shadowNormalBias=je.normalBias,st.shadowRadius=je.radius,st.shadowMapSize=je.mapSize,st.shadowCameraNear=je.camera.near,st.shadowCameraFar=je.camera.far,v.pointShadow[z]=st,v.pointShadowMap[z]=Ue,v.pointShadowMatrix[z]=xe.shadow.matrix,X++}v.point[z]=De,z++}else if(xe.isHemisphereLight){const De=c.get(xe);De.skyColor.copy(xe.color).multiplyScalar(Be),De.groundColor.copy(xe.groundColor).multiplyScalar(Be),v.hemi[B]=De,B++}}U>0&&(a.isWebGL2||!0===p.has("OES_texture_float_linear")?(v.rectAreaLTC1=Yt.LTC_FLOAT_1,v.rectAreaLTC2=Yt.LTC_FLOAT_2):!0===p.has("OES_texture_half_float_linear")?(v.rectAreaLTC1=Yt.LTC_HALF_1,v.rectAreaLTC2=Yt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),v.ambient[0]=R,v.ambient[1]=O,v.ambient[2]=L;const K=v.hash;(K.directionalLength!==V||K.pointLength!==z||K.spotLength!==W||K.rectAreaLength!==U||K.hemiLength!==B||K.numDirectionalShadows!==te||K.numPointShadows!==X||K.numSpotShadows!==se)&&(v.directional.length=V,v.spot.length=W,v.rectArea.length=U,v.point.length=z,v.hemi.length=B,v.directionalShadow.length=te,v.directionalShadowMap.length=te,v.pointShadow.length=X,v.pointShadowMap.length=X,v.spotShadow.length=se,v.spotShadowMap.length=se,v.directionalShadowMatrix.length=te,v.pointShadowMatrix.length=X,v.spotShadowMatrix.length=se,K.directionalLength=V,K.pointLength=z,K.spotLength=W,K.rectAreaLength=U,K.hemiLength=B,K.numDirectionalShadows=te,K.numPointShadows=X,K.numSpotShadows=se,v.version=Hm++)},setupView:function A(k,R){let O=0,L=0,V=0,z=0,W=0;const U=R.matrixWorldInverse;for(let B=0,te=k.length;B<te;B++){const X=k[B];if(X.isDirectionalLight){const se=v.directional[O];se.direction.setFromMatrixPosition(X.matrixWorld),b.setFromMatrixPosition(X.target.matrixWorld),se.direction.sub(b),se.direction.transformDirection(U),O++}else if(X.isSpotLight){const se=v.spot[V];se.position.setFromMatrixPosition(X.matrixWorld),se.position.applyMatrix4(U),se.direction.setFromMatrixPosition(X.matrixWorld),b.setFromMatrixPosition(X.target.matrixWorld),se.direction.sub(b),se.direction.transformDirection(U),V++}else if(X.isRectAreaLight){const se=v.rectArea[z];se.position.setFromMatrixPosition(X.matrixWorld),se.position.applyMatrix4(U),D.identity(),C.copy(X.matrixWorld),C.premultiply(U),D.extractRotation(C),se.halfWidth.set(.5*X.width,0,0),se.halfHeight.set(0,.5*X.height,0),se.halfWidth.applyMatrix4(D),se.halfHeight.applyMatrix4(D),z++}else if(X.isPointLight){const se=v.point[L];se.position.setFromMatrixPosition(X.matrixWorld),se.position.applyMatrix4(U),L++}else if(X.isHemisphereLight){const se=v.hemi[W];se.direction.setFromMatrixPosition(X.matrixWorld),se.direction.transformDirection(U),se.direction.normalize(),W++}}},state:v}}function vy(p,a){const c=new aE(p,a),m=[],v=[];return{init:function b(){m.length=0,v.length=0},state:{lightsArray:m,shadowsArray:v,lights:c},setupLights:function S(){c.setup(m)},setupLightsView:function A(R){c.setupView(m,R)},pushLight:function C(R){m.push(R)},pushShadow:function D(R){v.push(R)}}}function kp(p,a){let c=new WeakMap;return{get:function m(b,C=0){let D;return!1===c.has(b)?(D=new vy(p,a),c.set(b,[D])):C>=c.get(b).length?(D=new vy(p,a),c.get(b).push(D)):D=c.get(b)[C],D},dispose:function v(){c=new WeakMap}}}class Td extends lr{constructor(a){super(),this.type="MeshDepthMaterial",this.depthPacking=oC,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(a)}copy(a){return super.copy(a),this.depthPacking=a.depthPacking,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this}}Td.prototype.isMeshDepthMaterial=!0;class Id extends lr{constructor(a){super(),this.type="MeshDistanceMaterial",this.referencePosition=new ee,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(a)}copy(a){return super.copy(a),this.referencePosition.copy(a.referencePosition),this.nearDistance=a.nearDistance,this.farDistance=a.farDistance,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this}}function aw(p,a,c){let m=new mu;const v=new et,b=new et,C=new Di,D=[],S=[],A={},k={0:Ae,1:ye,2:at},R=new Io({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new et},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),O=R.clone();O.defines.HORIZONTAL_PASS=1;const L=new Wt;L.setAttribute("position",new _n(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const V=new ei(L,R),z=this;function W(se,K){const he=a.update(V);R.uniforms.shadow_pass.value=se.map.texture,R.uniforms.resolution.value=se.mapSize,R.uniforms.radius.value=se.radius,p.setRenderTarget(se.mapPass),p.clear(),p.renderBufferDirect(K,null,he,R,V,null),O.uniforms.shadow_pass.value=se.mapPass.texture,O.uniforms.resolution.value=se.mapSize,O.uniforms.radius.value=se.radius,p.setRenderTarget(se.map),p.clear(),p.renderBufferDirect(K,null,he,O,V,null)}function U(se,K,he){const Ie=se<<0|K<<1|he<<2;let xe=D[Ie];return void 0===xe&&(xe=new Td({depthPacking:yv,morphTargets:se,skinning:K}),D[Ie]=xe),xe}function B(se,K,he){const Ie=se<<0|K<<1|he<<2;let xe=S[Ie];return void 0===xe&&(xe=new Id({morphTargets:se,skinning:K}),S[Ie]=xe),xe}function te(se,K,he,Ie,xe,Pe,Be){let Ke=null,Ue=U,De=se.customDepthMaterial;if(!0===Ie.isPointLight&&(Ue=B,De=se.customDistanceMaterial),void 0===De){let je=!1;!0===he.morphTargets&&(je=K.morphAttributes&&K.morphAttributes.position&&K.morphAttributes.position.length>0);let st=!1;!0===se.isSkinnedMesh&&(!0===he.skinning?st=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",se)),Ke=Ue(je,st,!0===se.isInstancedMesh)}else Ke=De;if(p.localClippingEnabled&&!0===he.clipShadows&&0!==he.clippingPlanes.length){const je=Ke.uuid,st=he.uuid;let Ct=A[je];void 0===Ct&&(Ct={},A[je]=Ct);let jt=Ct[st];void 0===jt&&(jt=Ke.clone(),Ct[st]=jt),Ke=jt}return Ke.visible=he.visible,Ke.wireframe=he.wireframe,Ke.side=Be===Ge?null!==he.shadowSide?he.shadowSide:he.side:null!==he.shadowSide?he.shadowSide:k[he.side],Ke.clipShadows=he.clipShadows,Ke.clippingPlanes=he.clippingPlanes,Ke.clipIntersection=he.clipIntersection,Ke.wireframeLinewidth=he.wireframeLinewidth,Ke.linewidth=he.linewidth,!0===Ie.isPointLight&&!0===Ke.isMeshDistanceMaterial&&(Ke.referencePosition.setFromMatrixPosition(Ie.matrixWorld),Ke.nearDistance=xe,Ke.farDistance=Pe),Ke}function X(se,K,he,Ie,xe){if(!1===se.visible)return;if(se.layers.test(K.layers)&&(se.isMesh||se.isLine||se.isPoints)&&(se.castShadow||se.receiveShadow&&xe===Ge)&&(!se.frustumCulled||m.intersectsObject(se))){se.modelViewMatrix.multiplyMatrices(he.matrixWorldInverse,se.matrixWorld);const Ke=a.update(se),Ue=se.material;if(Array.isArray(Ue)){const De=Ke.groups;for(let je=0,st=De.length;je<st;je++){const Ct=De[je],jt=Ue[Ct.materialIndex];if(jt&&jt.visible){const qt=te(se,Ke,jt,Ie,he.near,he.far,xe);p.renderBufferDirect(he,null,Ke,qt,se,Ct)}}}else if(Ue.visible){const De=te(se,Ke,Ue,Ie,he.near,he.far,xe);p.renderBufferDirect(he,null,Ke,De,se,null)}}const Be=se.children;for(let Ke=0,Ue=Be.length;Ke<Ue;Ke++)X(Be[Ke],K,he,Ie,xe)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=pe,this.render=function(se,K,he){if(!1===z.enabled||!1===z.autoUpdate&&!1===z.needsUpdate||0===se.length)return;const Ie=p.getRenderTarget(),xe=p.getActiveCubeFace(),Pe=p.getActiveMipmapLevel(),Be=p.state;Be.setBlending(ut),Be.buffers.color.setClear(1,1,1,1),Be.buffers.depth.setTest(!0),Be.setScissorTest(!1);for(let Ke=0,Ue=se.length;Ke<Ue;Ke++){const De=se[Ke],je=De.shadow;if(void 0===je){console.warn("THREE.WebGLShadowMap:",De,"has no shadow.");continue}if(!1===je.autoUpdate&&!1===je.needsUpdate)continue;v.copy(je.mapSize);const st=je.getFrameExtents();if(v.multiply(st),b.copy(je.mapSize),(v.x>c||v.y>c)&&(v.x>c&&(b.x=Math.floor(c/st.x),v.x=b.x*st.x,je.mapSize.x=b.x),v.y>c&&(b.y=Math.floor(c/st.y),v.y=b.y*st.y,je.mapSize.y=b.y)),null===je.map&&!je.isPointLightShadow&&this.type===Ge){const jt={minFilter:de,magFilter:de,format:$r};je.map=new ou(v.x,v.y,jt),je.map.texture.name=De.name+".shadowMap",je.mapPass=new ou(v.x,v.y,jt),je.camera.updateProjectionMatrix()}null===je.map&&(je.map=new ou(v.x,v.y,{minFilter:Tn,magFilter:Tn,format:$r}),je.map.texture.name=De.name+".shadowMap",je.camera.updateProjectionMatrix()),p.setRenderTarget(je.map),p.clear();const Ct=je.getViewportCount();for(let jt=0;jt<Ct;jt++){const qt=je.getViewport(jt);C.set(b.x*qt.x,b.y*qt.y,b.x*qt.z,b.y*qt.w),Be.viewport(C),je.updateMatrices(De,jt),m=je.getFrustum(),X(K,he,je.camera,De,this.type)}!je.isPointLightShadow&&this.type===Ge&&W(je,he),je.needsUpdate=!1}z.needsUpdate=!1,p.setRenderTarget(Ie,xe,Pe)}}function cE(p,a,c){const m=c.isWebGL2,D=new function v(){let Ce=!1;const xt=new Di;let Xt=null;const rn=new Di(0,0,0,0);return{setMask:function(Mt){Xt!==Mt&&!Ce&&(p.colorMask(Mt,Mt,Mt,Mt),Xt=Mt)},setLocked:function(Mt){Ce=Mt},setClear:function(Mt,Mn,bn,mn,vn){!0===vn&&(Mt*=mn,Mn*=mn,bn*=mn),xt.set(Mt,Mn,bn,mn),!1===rn.equals(xt)&&(p.clearColor(Mt,Mn,bn,mn),rn.copy(xt))},reset:function(){Ce=!1,Xt=null,rn.set(-1,0,0,0)}}},S=new function b(){let Ce=!1,xt=null,Xt=null,rn=null;return{setTest:function(Mt){Mt?an(2929):nn(2929)},setMask:function(Mt){xt!==Mt&&!Ce&&(p.depthMask(Mt),xt=Mt)},setFunc:function(Mt){if(Xt!==Mt){if(Mt)switch(Mt){case pn:p.depthFunc(512);break;case sr:p.depthFunc(519);break;case mr:p.depthFunc(513);break;case Ni:p.depthFunc(515);break;case Zo:p.depthFunc(514);break;case Fa:p.depthFunc(518);break;case nc:p.depthFunc(516);break;case ed:p.depthFunc(517);break;default:p.depthFunc(515)}else p.depthFunc(515);Xt=Mt}},setLocked:function(Mt){Ce=Mt},setClear:function(Mt){rn!==Mt&&(p.clearDepth(Mt),rn=Mt)},reset:function(){Ce=!1,xt=null,Xt=null,rn=null}}},A=new function C(){let Ce=!1,xt=null,Xt=null,rn=null,Mt=null,Mn=null,bn=null,mn=null,vn=null;return{setTest:function(wn){Ce||(wn?an(2960):nn(2960))},setMask:function(wn){xt!==wn&&!Ce&&(p.stencilMask(wn),xt=wn)},setFunc:function(wn,pr,to){(Xt!==wn||rn!==pr||Mt!==to)&&(p.stencilFunc(wn,pr,to),Xt=wn,rn=pr,Mt=to)},setOp:function(wn,pr,to){(Mn!==wn||bn!==pr||mn!==to)&&(p.stencilOp(wn,pr,to),Mn=wn,bn=pr,mn=to)},setLocked:function(wn){Ce=wn},setClear:function(wn){vn!==wn&&(p.clearStencil(wn),vn=wn)},reset:function(){Ce=!1,xt=null,Xt=null,rn=null,Mt=null,Mn=null,bn=null,mn=null,vn=null}}};let k={},R=null,O=!1,L=null,V=null,z=null,W=null,U=null,B=null,te=null,X=!1,se=null,K=null,he=null,Ie=null,xe=null;const Pe=p.getParameter(35661);let Be=!1,Ke=0;const Ue=p.getParameter(7938);-1!==Ue.indexOf("WebGL")?(Ke=parseFloat(/^WebGL (\d)/.exec(Ue)[1]),Be=Ke>=1):-1!==Ue.indexOf("OpenGL ES")&&(Ke=parseFloat(/^OpenGL ES (\d)/.exec(Ue)[1]),Be=Ke>=2);let De=null,je={};const st=new Di,Ct=new Di;function jt(Ce,xt,Xt){const rn=new Uint8Array(4),Mt=p.createTexture();p.bindTexture(Ce,Mt),p.texParameteri(Ce,10241,9728),p.texParameteri(Ce,10240,9728);for(let Mn=0;Mn<Xt;Mn++)p.texImage2D(xt+Mn,0,6408,1,1,0,6408,5121,rn);return Mt}const qt={};function an(Ce){!0!==k[Ce]&&(p.enable(Ce),k[Ce]=!0)}function nn(Ce){!1!==k[Ce]&&(p.disable(Ce),k[Ce]=!1)}qt[3553]=jt(3553,3553,1),qt[34067]=jt(34067,34069,6),D.setClear(0,0,0,1),S.setClear(1),A.setClear(0),an(2929),S.setFunc(Ni),dr(!1),gi(fe),an(2884),yi(ut);const Rn={[Rt]:32774,[Un]:32778,[Fe]:32779};if(m)Rn[Xe]=32775,Rn[tt]=32776;else{const Ce=a.get("EXT_blend_minmax");null!==Ce&&(Rn[Xe]=Ce.MIN_EXT,Rn[tt]=Ce.MAX_EXT)}const Hi={[Je]:0,[gt]:1,[Se]:768,[Vt]:770,[On]:776,[tn]:774,[Kt]:772,[kt]:769,[An]:771,[St]:775,[cn]:773};function yi(Ce,xt,Xt,rn,Mt,Mn,bn,mn){if(Ce!==ut){if(!1===O&&(an(3042),O=!0),Ce===Bt)Mt=Mt||xt,Mn=Mn||Xt,bn=bn||rn,(xt!==V||Mt!==U)&&(p.blendEquationSeparate(Rn[xt],Rn[Mt]),V=xt,U=Mt),(Xt!==z||rn!==W||Mn!==B||bn!==te)&&(p.blendFuncSeparate(Hi[Xt],Hi[rn],Hi[Mn],Hi[bn]),z=Xt,W=rn,B=Mn,te=bn),L=Ce,X=null;else if(Ce!==L||mn!==X){if((V!==Rt||U!==Rt)&&(p.blendEquation(32774),V=Rt,U=Rt),mn)switch(Ce){case wt:p.blendFuncSeparate(1,771,1,771);break;case Et:p.blendFunc(1,1);break;case We:p.blendFuncSeparate(0,0,769,771);break;case qe:p.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce)}else switch(Ce){case wt:p.blendFuncSeparate(770,771,1,771);break;case Et:p.blendFunc(770,1);break;case We:p.blendFunc(0,769);break;case qe:p.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce)}z=null,W=null,B=null,te=null,L=Ce,X=mn}}else!0===O&&(nn(3042),O=!1)}function dr(Ce){se!==Ce&&(p.frontFace(Ce?2304:2305),se=Ce)}function gi(Ce){Ce!==ze?(an(2884),Ce!==K&&p.cullFace(Ce===fe?1029:Ce===we?1028:1032)):nn(2884),K=Ce}function Gn(Ce,xt,Xt){Ce?(an(32823),(Ie!==xt||xe!==Xt)&&(p.polygonOffset(xt,Xt),Ie=xt,xe=Xt)):nn(32823)}function yt(Ce){void 0===Ce&&(Ce=33984+Pe-1),De!==Ce&&(p.activeTexture(Ce),De=Ce)}return{buffers:{color:D,depth:S,stencil:A},enable:an,disable:nn,useProgram:function Wn(Ce){return R!==Ce&&(p.useProgram(Ce),R=Ce,!0)},setBlending:yi,setMaterial:function dt(Ce,xt){Ce.side===at?nn(2884):an(2884);let Xt=Ce.side===Ae;xt&&(Xt=!Xt),dr(Xt),Ce.blending===wt&&!1===Ce.transparent?yi(ut):yi(Ce.blending,Ce.blendEquation,Ce.blendSrc,Ce.blendDst,Ce.blendEquationAlpha,Ce.blendSrcAlpha,Ce.blendDstAlpha,Ce.premultipliedAlpha),S.setFunc(Ce.depthFunc),S.setTest(Ce.depthTest),S.setMask(Ce.depthWrite),D.setMask(Ce.colorWrite);const rn=Ce.stencilWrite;A.setTest(rn),rn&&(A.setMask(Ce.stencilWriteMask),A.setFunc(Ce.stencilFunc,Ce.stencilRef,Ce.stencilFuncMask),A.setOp(Ce.stencilFail,Ce.stencilZFail,Ce.stencilZPass)),Gn(Ce.polygonOffset,Ce.polygonOffsetFactor,Ce.polygonOffsetUnits)},setFlipSided:dr,setCullFace:gi,setLineWidth:function di(Ce){Ce!==he&&(Be&&p.lineWidth(Ce),he=Ce)},setPolygonOffset:Gn,setScissorTest:function mi(Ce){Ce?an(3089):nn(3089)},activeTexture:yt,bindTexture:function Pt(Ce,xt){null===De&&yt();let Xt=je[De];void 0===Xt&&(Xt={type:void 0,texture:void 0},je[De]=Xt),(Xt.type!==Ce||Xt.texture!==xt)&&(p.bindTexture(Ce,xt||qt[Ce]),Xt.type=Ce,Xt.texture=xt)},unbindTexture:function Lt(){const Ce=je[De];void 0!==Ce&&void 0!==Ce.type&&(p.bindTexture(Ce.type,null),Ce.type=void 0,Ce.texture=void 0)},compressedTexImage2D:function un(){try{p.compressedTexImage2D.apply(p,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},texImage2D:function en(){try{p.texImage2D.apply(p,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},texImage3D:function le(){try{p.texImage3D.apply(p,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},scissor:function oe(Ce){!1===st.equals(Ce)&&(p.scissor(Ce.x,Ce.y,Ce.z,Ce.w),st.copy(Ce))},viewport:function pt(Ce){!1===Ct.equals(Ce)&&(p.viewport(Ce.x,Ce.y,Ce.z,Ce.w),Ct.copy(Ce))},reset:function vt(){p.disable(3042),p.disable(2884),p.disable(2929),p.disable(32823),p.disable(3089),p.disable(2960),p.blendEquation(32774),p.blendFunc(1,0),p.blendFuncSeparate(1,0,1,0),p.colorMask(!0,!0,!0,!0),p.clearColor(0,0,0,0),p.depthMask(!0),p.depthFunc(513),p.clearDepth(1),p.stencilMask(4294967295),p.stencilFunc(519,0,4294967295),p.stencilOp(7680,7680,7680),p.clearStencil(0),p.cullFace(1029),p.frontFace(2305),p.polygonOffset(0,0),p.activeTexture(33984),p.useProgram(null),p.lineWidth(1),p.scissor(0,0,p.canvas.width,p.canvas.height),p.viewport(0,0,p.canvas.width,p.canvas.height),k={},De=null,je={},R=null,O=!1,L=null,V=null,z=null,W=null,U=null,B=null,te=null,X=!1,se=null,K=null,he=null,Ie=null,xe=null,D.reset(),S.reset(),A.reset()}}}function yy(p,a,c,m,v,b,C){const D=v.isWebGL2,S=v.maxTextures,A=v.maxCubemapSize,k=v.maxTextureSize,R=v.maxSamples,O=new WeakMap;let L,V=!1;try{V="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(le){}function z(le,oe){return V?new OffscreenCanvas(le,oe):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function W(le,oe,pt,vt){let Ce=1;if((le.width>vt||le.height>vt)&&(Ce=vt/Math.max(le.width,le.height)),Ce<1||!0===oe){if("undefined"!=typeof HTMLImageElement&&le instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&le instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&le instanceof ImageBitmap){const xt=oe?Ne.floorPowerOfTwo:Math.floor,Xt=xt(Ce*le.width),rn=xt(Ce*le.height);void 0===L&&(L=z(Xt,rn));const Mt=pt?z(Xt,rn):L;return Mt.width=Xt,Mt.height=rn,Mt.getContext("2d").drawImage(le,0,0,Xt,rn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+le.width+"x"+le.height+") to ("+Xt+"x"+rn+")."),Mt}return"data"in le&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+le.width+"x"+le.height+")."),le}return le}function U(le){return Ne.isPowerOfTwo(le.width)&&Ne.isPowerOfTwo(le.height)}function te(le,oe){return le.generateMipmaps&&oe&&le.minFilter!==Tn&&le.minFilter!==de}function X(le,oe,pt,vt){p.generateMipmap(le),m.get(oe).__maxMipLevel=Math.log2(Math.max(pt,vt))}function se(le,oe,pt){if(!1===D)return oe;if(null!==le){if(void 0!==p[le])return p[le];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+le+"'")}let vt=oe;return 6403===oe&&(5126===pt&&(vt=33326),5131===pt&&(vt=33325),5121===pt&&(vt=33321)),6407===oe&&(5126===pt&&(vt=34837),5131===pt&&(vt=34843),5121===pt&&(vt=32849)),6408===oe&&(5126===pt&&(vt=34836),5131===pt&&(vt=34842),5121===pt&&(vt=32856)),(33325===vt||33326===vt||34842===vt||34836===vt)&&a.get("EXT_color_buffer_float"),vt}function K(le){return le===Tn||le===tu||le===Ba?9728:9729}function he(le){const oe=le.target;oe.removeEventListener("dispose",he),function xe(le){const oe=m.get(le);void 0!==oe.__webglInit&&(p.deleteTexture(oe.__webglTexture),m.remove(le))}(oe),oe.isVideoTexture&&O.delete(oe),C.memory.textures--}function Ie(le){const oe=le.target;oe.removeEventListener("dispose",Ie),function Pe(le){const oe=le.texture,pt=m.get(le),vt=m.get(oe);if(le){if(void 0!==vt.__webglTexture&&p.deleteTexture(vt.__webglTexture),le.depthTexture&&le.depthTexture.dispose(),le.isWebGLCubeRenderTarget)for(let Ce=0;Ce<6;Ce++)p.deleteFramebuffer(pt.__webglFramebuffer[Ce]),pt.__webglDepthbuffer&&p.deleteRenderbuffer(pt.__webglDepthbuffer[Ce]);else p.deleteFramebuffer(pt.__webglFramebuffer),pt.__webglDepthbuffer&&p.deleteRenderbuffer(pt.__webglDepthbuffer),pt.__webglMultisampledFramebuffer&&p.deleteFramebuffer(pt.__webglMultisampledFramebuffer),pt.__webglColorRenderbuffer&&p.deleteRenderbuffer(pt.__webglColorRenderbuffer),pt.__webglDepthRenderbuffer&&p.deleteRenderbuffer(pt.__webglDepthRenderbuffer);m.remove(oe),m.remove(le)}}(oe),C.memory.textures--}let Be=0;function De(le,oe){const pt=m.get(le);if(le.isVideoTexture&&function yt(le){const oe=C.render.frame;O.get(le)!==oe&&(O.set(le,oe),le.update())}(le),le.version>0&&pt.__version!==le.version){const vt=le.image;if(void 0===vt)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==vt.complete)return void Wn(pt,le,oe);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}c.activeTexture(33984+oe),c.bindTexture(3553,pt.__webglTexture)}function Ct(le,oe){const pt=m.get(le);le.version>0&&pt.__version!==le.version?function Rn(le,oe,pt){if(6!==oe.image.length)return;nn(le,oe),c.activeTexture(33984+pt),c.bindTexture(34067,le.__webglTexture),p.pixelStorei(37440,oe.flipY),p.pixelStorei(37441,oe.premultiplyAlpha),p.pixelStorei(3317,oe.unpackAlignment),p.pixelStorei(37443,0);const vt=oe&&(oe.isCompressedTexture||oe.image[0].isCompressedTexture),Ce=oe.image[0]&&oe.image[0].isDataTexture,xt=[];for(let vn=0;vn<6;vn++)xt[vn]=vt||Ce?Ce?oe.image[vn].image:oe.image[vn]:W(oe.image[vn],!1,!0,A);const Xt=xt[0],rn=U(Xt)||D,Mt=b.convert(oe.format),Mn=b.convert(oe.type),bn=se(oe.internalFormat,Mt,Mn);let mn;if(an(34067,oe,rn),vt){for(let vn=0;vn<6;vn++){mn=xt[vn].mipmaps;for(let wn=0;wn<mn.length;wn++){const pr=mn[wn];oe.format!==$r&&oe.format!==lo?null!==Mt?c.compressedTexImage2D(34069+vn,wn,bn,pr.width,pr.height,0,pr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):c.texImage2D(34069+vn,wn,bn,pr.width,pr.height,0,Mt,Mn,pr.data)}}le.__maxMipLevel=mn.length-1}else{mn=oe.mipmaps;for(let vn=0;vn<6;vn++)if(Ce){c.texImage2D(34069+vn,0,bn,xt[vn].width,xt[vn].height,0,Mt,Mn,xt[vn].data);for(let wn=0;wn<mn.length;wn++){const to=mn[wn].image[vn].image;c.texImage2D(34069+vn,wn+1,bn,to.width,to.height,0,Mt,Mn,to.data)}}else{c.texImage2D(34069+vn,0,bn,Mt,Mn,xt[vn]);for(let wn=0;wn<mn.length;wn++)c.texImage2D(34069+vn,wn+1,bn,Mt,Mn,mn[wn].image[vn])}le.__maxMipLevel=mn.length}te(oe,rn)&&X(34067,oe,Xt.width,Xt.height),le.__version=oe.version,oe.onUpdate&&oe.onUpdate(oe)}(pt,le,oe):(c.activeTexture(33984+oe),c.bindTexture(34067,pt.__webglTexture))}const jt={[Vn]:10497,[Ps]:33071,[ic]:33648},qt={[Tn]:9728,[tu]:9984,[Ba]:9986,[de]:9729,[ae]:9985,[Ye]:9987};function an(le,oe,pt){if(pt?(p.texParameteri(le,10242,jt[oe.wrapS]),p.texParameteri(le,10243,jt[oe.wrapT]),(32879===le||35866===le)&&p.texParameteri(le,32882,jt[oe.wrapR]),p.texParameteri(le,10240,qt[oe.magFilter]),p.texParameteri(le,10241,qt[oe.minFilter])):(p.texParameteri(le,10242,33071),p.texParameteri(le,10243,33071),(32879===le||35866===le)&&p.texParameteri(le,32882,33071),(oe.wrapS!==Ps||oe.wrapT!==Ps)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),p.texParameteri(le,10240,K(oe.magFilter)),p.texParameteri(le,10241,K(oe.minFilter)),oe.minFilter!==Tn&&oe.minFilter!==de&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===a.has("EXT_texture_filter_anisotropic")){const vt=a.get("EXT_texture_filter_anisotropic");if(oe.type===Dr&&!1===a.has("OES_texture_float_linear")||!1===D&&oe.type===ls&&!1===a.has("OES_texture_half_float_linear"))return;(oe.anisotropy>1||m.get(oe).__currentAnisotropy)&&(p.texParameterf(le,vt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(oe.anisotropy,v.getMaxAnisotropy())),m.get(oe).__currentAnisotropy=oe.anisotropy)}}function nn(le,oe){void 0===le.__webglInit&&(le.__webglInit=!0,oe.addEventListener("dispose",he),le.__webglTexture=p.createTexture(),C.memory.textures++)}function Wn(le,oe,pt){let vt=3553;oe.isDataTexture2DArray&&(vt=35866),oe.isDataTexture3D&&(vt=32879),nn(le,oe),c.activeTexture(33984+pt),c.bindTexture(vt,le.__webglTexture),p.pixelStorei(37440,oe.flipY),p.pixelStorei(37441,oe.premultiplyAlpha),p.pixelStorei(3317,oe.unpackAlignment),p.pixelStorei(37443,0);const Ce=function B(le){return!D&&(le.wrapS!==Ps||le.wrapT!==Ps||le.minFilter!==Tn&&le.minFilter!==de)}(oe)&&!1===U(oe.image),xt=W(oe.image,Ce,!1,k),Xt=U(xt)||D,rn=b.convert(oe.format);let bn,Mt=b.convert(oe.type),Mn=se(oe.internalFormat,rn,Mt);an(vt,oe,Xt);const mn=oe.mipmaps;if(oe.isDepthTexture)Mn=6402,D?Mn=oe.type===Dr?36012:oe.type===kr?33190:oe.type===td?35056:33189:oe.type===Dr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),oe.format===Va&&6402===Mn&&oe.type!==wi&&oe.type!==kr&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),oe.type=wi,Mt=b.convert(oe.type)),oe.format===Ga&&6402===Mn&&(Mn=34041,oe.type!==td&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),oe.type=td,Mt=b.convert(oe.type))),c.texImage2D(3553,0,Mn,xt.width,xt.height,0,rn,Mt,null);else if(oe.isDataTexture)if(mn.length>0&&Xt){for(let vn=0,wn=mn.length;vn<wn;vn++)bn=mn[vn],c.texImage2D(3553,vn,Mn,bn.width,bn.height,0,rn,Mt,bn.data);oe.generateMipmaps=!1,le.__maxMipLevel=mn.length-1}else c.texImage2D(3553,0,Mn,xt.width,xt.height,0,rn,Mt,xt.data),le.__maxMipLevel=0;else if(oe.isCompressedTexture){for(let vn=0,wn=mn.length;vn<wn;vn++)bn=mn[vn],oe.format!==$r&&oe.format!==lo?null!==rn?c.compressedTexImage2D(3553,vn,Mn,bn.width,bn.height,0,bn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):c.texImage2D(3553,vn,Mn,bn.width,bn.height,0,rn,Mt,bn.data);le.__maxMipLevel=mn.length-1}else if(oe.isDataTexture2DArray)c.texImage3D(35866,0,Mn,xt.width,xt.height,xt.depth,0,rn,Mt,xt.data),le.__maxMipLevel=0;else if(oe.isDataTexture3D)c.texImage3D(32879,0,Mn,xt.width,xt.height,xt.depth,0,rn,Mt,xt.data),le.__maxMipLevel=0;else if(mn.length>0&&Xt){for(let vn=0,wn=mn.length;vn<wn;vn++)bn=mn[vn],c.texImage2D(3553,vn,Mn,rn,Mt,bn);oe.generateMipmaps=!1,le.__maxMipLevel=mn.length-1}else c.texImage2D(3553,0,Mn,rn,Mt,xt),le.__maxMipLevel=0;te(oe,Xt)&&X(vt,oe,xt.width,xt.height),le.__version=oe.version,oe.onUpdate&&oe.onUpdate(oe)}function Hi(le,oe,pt,vt){const Ce=oe.texture,xt=b.convert(Ce.format),Xt=b.convert(Ce.type),rn=se(Ce.internalFormat,xt,Xt);32879===vt||35866===vt?c.texImage3D(vt,0,rn,oe.width,oe.height,oe.depth,0,xt,Xt,null):c.texImage2D(vt,0,rn,oe.width,oe.height,0,xt,Xt,null),p.bindFramebuffer(36160,le),p.framebufferTexture2D(36160,pt,vt,m.get(Ce).__webglTexture,0),p.bindFramebuffer(36160,null)}function yi(le,oe,pt){if(p.bindRenderbuffer(36161,le),oe.depthBuffer&&!oe.stencilBuffer){let vt=33189;if(pt){const Ce=oe.depthTexture;Ce&&Ce.isDepthTexture&&(Ce.type===Dr?vt=36012:Ce.type===kr&&(vt=33190));const xt=mi(oe);p.renderbufferStorageMultisample(36161,xt,vt,oe.width,oe.height)}else p.renderbufferStorage(36161,vt,oe.width,oe.height);p.framebufferRenderbuffer(36160,36096,36161,le)}else if(oe.depthBuffer&&oe.stencilBuffer){if(pt){const vt=mi(oe);p.renderbufferStorageMultisample(36161,vt,35056,oe.width,oe.height)}else p.renderbufferStorage(36161,34041,oe.width,oe.height);p.framebufferRenderbuffer(36160,33306,36161,le)}else{const vt=oe.texture,Ce=b.convert(vt.format),xt=b.convert(vt.type),Xt=se(vt.internalFormat,Ce,xt);if(pt){const rn=mi(oe);p.renderbufferStorageMultisample(36161,rn,Xt,oe.width,oe.height)}else p.renderbufferStorage(36161,Xt,oe.width,oe.height)}p.bindRenderbuffer(36161,null)}function mi(le){return D&&le.isWebGLMultisampleRenderTarget?Math.min(R,le.samples):0}let Pt=!1,Lt=!1;this.allocateTextureUnit=function Ue(){const le=Be;return le>=S&&console.warn("THREE.WebGLTextures: Trying to use "+le+" texture units while this GPU supports only "+S),Be+=1,le},this.resetTextureUnits=function Ke(){Be=0},this.setTexture2D=De,this.setTexture2DArray=function je(le,oe){const pt=m.get(le);le.version>0&&pt.__version!==le.version?Wn(pt,le,oe):(c.activeTexture(33984+oe),c.bindTexture(35866,pt.__webglTexture))},this.setTexture3D=function st(le,oe){const pt=m.get(le);le.version>0&&pt.__version!==le.version?Wn(pt,le,oe):(c.activeTexture(33984+oe),c.bindTexture(32879,pt.__webglTexture))},this.setTextureCube=Ct,this.setupRenderTarget=function gi(le){const oe=le.texture,pt=m.get(le),vt=m.get(oe);le.addEventListener("dispose",Ie),vt.__webglTexture=p.createTexture(),C.memory.textures++;const Ce=!0===le.isWebGLCubeRenderTarget,xt=!0===le.isWebGLMultisampleRenderTarget,Xt=oe.isDataTexture3D||oe.isDataTexture2DArray,rn=U(le)||D;if(D&&oe.format===lo&&(oe.type===Dr||oe.type===ls)&&(oe.format=$r,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Ce){pt.__webglFramebuffer=[];for(let Mt=0;Mt<6;Mt++)pt.__webglFramebuffer[Mt]=p.createFramebuffer()}else if(pt.__webglFramebuffer=p.createFramebuffer(),xt)if(D){pt.__webglMultisampledFramebuffer=p.createFramebuffer(),pt.__webglColorRenderbuffer=p.createRenderbuffer(),p.bindRenderbuffer(36161,pt.__webglColorRenderbuffer);const Mt=b.convert(oe.format),Mn=b.convert(oe.type),bn=se(oe.internalFormat,Mt,Mn),mn=mi(le);p.renderbufferStorageMultisample(36161,mn,bn,le.width,le.height),p.bindFramebuffer(36160,pt.__webglMultisampledFramebuffer),p.framebufferRenderbuffer(36160,36064,36161,pt.__webglColorRenderbuffer),p.bindRenderbuffer(36161,null),le.depthBuffer&&(pt.__webglDepthRenderbuffer=p.createRenderbuffer(),yi(pt.__webglDepthRenderbuffer,le,!0)),p.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Ce){c.bindTexture(34067,vt.__webglTexture),an(34067,oe,rn);for(let Mt=0;Mt<6;Mt++)Hi(pt.__webglFramebuffer[Mt],le,36064,34069+Mt);te(oe,rn)&&X(34067,oe,le.width,le.height),c.bindTexture(34067,null)}else{let Mt=3553;Xt&&(D?Mt=oe.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),c.bindTexture(Mt,vt.__webglTexture),an(Mt,oe,rn),Hi(pt.__webglFramebuffer,le,36064,Mt),te(oe,rn)&&X(3553,oe,le.width,le.height),c.bindTexture(3553,null)}le.depthBuffer&&function dr(le){const oe=m.get(le),pt=!0===le.isWebGLCubeRenderTarget;if(le.depthTexture){if(pt)throw new Error("target.depthTexture not supported in Cube render targets");!function dt(le,oe){if(oe&&oe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(p.bindFramebuffer(36160,le),!oe.depthTexture||!oe.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!m.get(oe.depthTexture).__webglTexture||oe.depthTexture.image.width!==oe.width||oe.depthTexture.image.height!==oe.height)&&(oe.depthTexture.image.width=oe.width,oe.depthTexture.image.height=oe.height,oe.depthTexture.needsUpdate=!0),De(oe.depthTexture,0);const vt=m.get(oe.depthTexture).__webglTexture;if(oe.depthTexture.format===Va)p.framebufferTexture2D(36160,36096,3553,vt,0);else{if(oe.depthTexture.format!==Ga)throw new Error("Unknown depthTexture format");p.framebufferTexture2D(36160,33306,3553,vt,0)}}(oe.__webglFramebuffer,le)}else if(pt){oe.__webglDepthbuffer=[];for(let vt=0;vt<6;vt++)p.bindFramebuffer(36160,oe.__webglFramebuffer[vt]),oe.__webglDepthbuffer[vt]=p.createRenderbuffer(),yi(oe.__webglDepthbuffer[vt],le,!1)}else p.bindFramebuffer(36160,oe.__webglFramebuffer),oe.__webglDepthbuffer=p.createRenderbuffer(),yi(oe.__webglDepthbuffer,le,!1);p.bindFramebuffer(36160,null)}(le)},this.updateRenderTargetMipmap=function di(le){const oe=le.texture;if(te(oe,U(le)||D)){const vt=le.isWebGLCubeRenderTarget?34067:3553,Ce=m.get(oe).__webglTexture;c.bindTexture(vt,Ce),X(vt,oe,le.width,le.height),c.bindTexture(vt,null)}},this.updateMultisampleRenderTarget=function Gn(le){if(le.isWebGLMultisampleRenderTarget)if(D){const oe=m.get(le);p.bindFramebuffer(36008,oe.__webglMultisampledFramebuffer),p.bindFramebuffer(36009,oe.__webglFramebuffer);const pt=le.width,vt=le.height;let Ce=16384;le.depthBuffer&&(Ce|=256),le.stencilBuffer&&(Ce|=1024),p.blitFramebuffer(0,0,pt,vt,0,0,pt,vt,Ce,9728),p.bindFramebuffer(36160,oe.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function un(le,oe){le&&le.isWebGLRenderTarget&&(!1===Pt&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Pt=!0),le=le.texture),De(le,oe)},this.safeSetTextureCube=function en(le,oe){le&&le.isWebGLCubeRenderTarget&&(!1===Lt&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Lt=!0),le=le.texture),Ct(le,oe)}}function by(p,a,c){const m=c.isWebGL2;return{convert:function v(b){let C;if(b===It)return 5121;if(b===nu)return 32819;if(b===$f)return 32820;if(b===gv)return 33635;if(b===Ln)return 5120;if(b===pi)return 5122;if(b===wi)return 5123;if(b===xi)return 5124;if(b===kr)return 5125;if(b===Dr)return 5126;if(b===ls)return m?5131:(C=a.get("OES_texture_half_float"),null!==C?C.HALF_FLOAT_OES:null);if(b===ys)return 6406;if(b===lo)return 6407;if(b===$r)return 6408;if(b===Ys)return 6409;if(b===rc)return 6410;if(b===Va)return 6402;if(b===Ga)return 34041;if(b===sc)return 6403;if(b===Os)return 36244;if(b===Zg)return 33319;if(b===Ko)return 33320;if(b===Zt)return 36248;if(b===ti)return 36249;if(b===Gi||b===co||b===oc||b===Zr){if(C=a.get("WEBGL_compressed_texture_s3tc"),null===C)return null;if(b===Gi)return C.COMPRESSED_RGB_S3TC_DXT1_EXT;if(b===co)return C.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(b===oc)return C.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(b===Zr)return C.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(b===Ua||b===Zi||b===iu||b===ru){if(C=a.get("WEBGL_compressed_texture_pvrtc"),null===C)return null;if(b===Ua)return C.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(b===Zi)return C.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(b===iu)return C.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(b===ru)return C.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(b===Xn)return C=a.get("WEBGL_compressed_texture_etc1"),null!==C?C.COMPRESSED_RGB_ETC1_WEBGL:null;if((b===nd||b===ha)&&(C=a.get("WEBGL_compressed_texture_etc"),null!==C)){if(b===nd)return C.COMPRESSED_RGB8_ETC2;if(b===ha)return C.COMPRESSED_RGBA8_ETC2_EAC}return b===Kg||b===id||b===bs||b===rd||b===hh||b===Kr||b===ji||b===mv||b===Qg||b===uo||b===Mo||b===Zf||b===Xg||b===fh||b===Kf||b===jx||b===Wx||b===pa||b===Yx||b===qx||b===$x||b===Zx||b===Kx||b===Qx||b===Xx||b===Jx||b===eC||b===tC?(C=a.get("WEBGL_compressed_texture_astc"),null!==C?b:null):b===fa?(C=a.get("EXT_texture_compression_bptc"),null!==C?b:null):b===td?m?34042:(C=a.get("WEBGL_depth_texture"),null!==C?C.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function zm(p=[]){nr.call(this),this.cameras=p}Id.prototype.isMeshDistanceMaterial=!0,zm.prototype=Object.assign(Object.create(nr.prototype),{constructor:zm,isArrayCamera:!0});class Mc extends it{constructor(){super(),this.type="Group"}}function jm(){this._targetRay=null,this._grip=null,this._hand=null}function Fp(p,a){const c=this;let m=null,v=1,b=null,C="local-floor",D=null;const S=[],A=new Map,k=new nr;k.layers.enable(1),k.viewport=new Di;const R=new nr;R.layers.enable(2),R.viewport=new Di;const O=[k,R],L=new zm;L.layers.enable(1),L.layers.enable(2);let V=null,z=null;function W(Pe){const Be=A.get(Pe.inputSource);Be&&Be.dispatchEvent({type:Pe.type,data:Pe.inputSource})}function U(){A.forEach(function(Pe,Be){Pe.disconnect(Be)}),A.clear(),V=null,z=null,p.setFramebuffer(null),p.setRenderTarget(p.getRenderTarget()),xe.stop(),c.isPresenting=!1,c.dispatchEvent({type:"sessionend"})}function B(Pe){const Be=m.inputSources;for(let Ke=0;Ke<S.length;Ke++)A.set(Be[Ke],S[Ke]);for(let Ke=0;Ke<Pe.removed.length;Ke++){const Ue=Pe.removed[Ke],De=A.get(Ue);De&&(De.dispatchEvent({type:"disconnected",data:Ue}),A.delete(Ue))}for(let Ke=0;Ke<Pe.added.length;Ke++){const Ue=Pe.added[Ke],De=A.get(Ue);De&&De.dispatchEvent({type:"connected",data:Ue})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(Pe){let Be=S[Pe];return void 0===Be&&(Be=new jm,S[Pe]=Be),Be.getTargetRaySpace()},this.getControllerGrip=function(Pe){let Be=S[Pe];return void 0===Be&&(Be=new jm,S[Pe]=Be),Be.getGripSpace()},this.getHand=function(Pe){let Be=S[Pe];return void 0===Be&&(Be=new jm,S[Pe]=Be),Be.getHandSpace()},this.setFramebufferScaleFactor=function(Pe){v=Pe,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Pe){C=Pe,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return b},this.getSession=function(){return m},this.setSession=function(){var Pe=function me(p){return function(){var a=this,c=arguments;return new Promise(function(m,v){var b=p.apply(a,c);function C(S){u(b,m,v,C,D,"next",S)}function D(S){u(b,m,v,C,D,"throw",S)}C(void 0)})}}(function*(Be){if(m=Be,null!==m){m.addEventListener("select",W),m.addEventListener("selectstart",W),m.addEventListener("selectend",W),m.addEventListener("squeeze",W),m.addEventListener("squeezestart",W),m.addEventListener("squeezeend",W),m.addEventListener("end",U),m.addEventListener("inputsourceschange",B);const Ke=a.getContextAttributes();!0!==Ke.xrCompatible&&(yield a.makeXRCompatible());const De=new XRWebGLLayer(m,a,{antialias:Ke.antialias,alpha:Ke.alpha,depth:Ke.depth,stencil:Ke.stencil,framebufferScaleFactor:v});m.updateRenderState({baseLayer:De}),b=yield m.requestReferenceSpace(C),xe.setContext(m),xe.start(),c.isPresenting=!0,c.dispatchEvent({type:"sessionstart"})}});return function(Be){return Pe.apply(this,arguments)}}();const te=new ee,X=new ee;function K(Pe,Be){null===Be?Pe.matrixWorld.copy(Pe.matrix):Pe.matrixWorld.multiplyMatrices(Be.matrixWorld,Pe.matrix),Pe.matrixWorldInverse.copy(Pe.matrixWorld).invert()}this.getCamera=function(Pe){L.near=R.near=k.near=Pe.near,L.far=R.far=k.far=Pe.far,(V!==L.near||z!==L.far)&&(m.updateRenderState({depthNear:L.near,depthFar:L.far}),V=L.near,z=L.far);const Be=Pe.parent,Ke=L.cameras;K(L,Be);for(let De=0;De<Ke.length;De++)K(Ke[De],Be);Pe.matrixWorld.copy(L.matrixWorld),Pe.matrix.copy(L.matrix),Pe.matrix.decompose(Pe.position,Pe.quaternion,Pe.scale);const Ue=Pe.children;for(let De=0,je=Ue.length;De<je;De++)Ue[De].updateMatrixWorld(!0);return 2===Ke.length?function se(Pe,Be,Ke){te.setFromMatrixPosition(Be.matrixWorld),X.setFromMatrixPosition(Ke.matrixWorld);const Ue=te.distanceTo(X),De=Be.projectionMatrix.elements,je=Ke.projectionMatrix.elements,st=De[14]/(De[10]-1),Ct=De[14]/(De[10]+1),jt=(De[9]+1)/De[5],qt=(De[9]-1)/De[5],an=(De[8]-1)/De[0],nn=(je[8]+1)/je[0],Wn=st*an,Rn=st*nn,Hi=Ue/(-an+nn),yi=Hi*-an;Be.matrixWorld.decompose(Pe.position,Pe.quaternion,Pe.scale),Pe.translateX(yi),Pe.translateZ(Hi),Pe.matrixWorld.compose(Pe.position,Pe.quaternion,Pe.scale),Pe.matrixWorldInverse.copy(Pe.matrixWorld).invert();const dt=st+Hi,dr=Ct+Hi;Pe.projectionMatrix.makePerspective(Wn-yi,Rn+(Ue-yi),jt*Ct/dr*dt,qt*Ct/dr*dt,dt,dr)}(L,k,R):L.projectionMatrix.copy(k.projectionMatrix),L};let he=null;const xe=new pm;xe.setAnimationLoop(function Ie(Pe,Be){if(D=Be.getViewerPose(b),null!==D){const Ue=D.views,De=m.renderState.baseLayer;p.setFramebuffer(De.framebuffer);let je=!1;Ue.length!==L.cameras.length&&(L.cameras.length=0,je=!0);for(let st=0;st<Ue.length;st++){const Ct=Ue[st],jt=De.getViewport(Ct),qt=O[st];qt.matrix.fromArray(Ct.transform.matrix),qt.projectionMatrix.fromArray(Ct.projectionMatrix),qt.viewport.set(jt.x,jt.y,jt.width,jt.height),0===st&&L.matrix.copy(qt.matrix),!0===je&&L.cameras.push(qt)}}const Ke=m.inputSources;for(let Ue=0;Ue<S.length;Ue++)S[Ue].update(Ke[Ue],Be,b);he&&he(Pe,Be)}),this.setAnimationLoop=function(Pe){he=Pe},this.dispose=function(){}}function wy(p){function m(U,B){U.opacity.value=B.opacity,B.color&&U.diffuse.value.copy(B.color),B.emissive&&U.emissive.value.copy(B.emissive).multiplyScalar(B.emissiveIntensity),B.map&&(U.map.value=B.map),B.alphaMap&&(U.alphaMap.value=B.alphaMap),B.specularMap&&(U.specularMap.value=B.specularMap);const te=p.get(B).envMap;if(te){U.envMap.value=te,U.flipEnvMap.value=te.isCubeTexture&&te._needsFlipEnvMap?-1:1,U.reflectivity.value=B.reflectivity,U.refractionRatio.value=B.refractionRatio;const K=p.get(te).__maxMipLevel;void 0!==K&&(U.maxMipLevel.value=K)}let X,se;B.lightMap&&(U.lightMap.value=B.lightMap,U.lightMapIntensity.value=B.lightMapIntensity),B.aoMap&&(U.aoMap.value=B.aoMap,U.aoMapIntensity.value=B.aoMapIntensity),B.map?X=B.map:B.specularMap?X=B.specularMap:B.displacementMap?X=B.displacementMap:B.normalMap?X=B.normalMap:B.bumpMap?X=B.bumpMap:B.roughnessMap?X=B.roughnessMap:B.metalnessMap?X=B.metalnessMap:B.alphaMap?X=B.alphaMap:B.emissiveMap?X=B.emissiveMap:B.clearcoatMap?X=B.clearcoatMap:B.clearcoatNormalMap?X=B.clearcoatNormalMap:B.clearcoatRoughnessMap&&(X=B.clearcoatRoughnessMap),void 0!==X&&(X.isWebGLRenderTarget&&(X=X.texture),!0===X.matrixAutoUpdate&&X.updateMatrix(),U.uvTransform.value.copy(X.matrix)),B.aoMap?se=B.aoMap:B.lightMap&&(se=B.lightMap),void 0!==se&&(se.isWebGLRenderTarget&&(se=se.texture),!0===se.matrixAutoUpdate&&se.updateMatrix(),U.uv2Transform.value.copy(se.matrix))}function R(U,B){U.roughness.value=B.roughness,U.metalness.value=B.metalness,B.roughnessMap&&(U.roughnessMap.value=B.roughnessMap),B.metalnessMap&&(U.metalnessMap.value=B.metalnessMap),B.emissiveMap&&(U.emissiveMap.value=B.emissiveMap),B.bumpMap&&(U.bumpMap.value=B.bumpMap,U.bumpScale.value=B.bumpScale,B.side===Ae&&(U.bumpScale.value*=-1)),B.normalMap&&(U.normalMap.value=B.normalMap,U.normalScale.value.copy(B.normalScale),B.side===Ae&&U.normalScale.value.negate()),B.displacementMap&&(U.displacementMap.value=B.displacementMap,U.displacementScale.value=B.displacementScale,U.displacementBias.value=B.displacementBias),p.get(B).envMap&&(U.envMapIntensity.value=B.envMapIntensity)}return{refreshFogUniforms:function a(U,B){U.fogColor.value.copy(B.color),B.isFog?(U.fogNear.value=B.near,U.fogFar.value=B.far):B.isFogExp2&&(U.fogDensity.value=B.density)},refreshMaterialUniforms:function c(U,B,te,X){B.isMeshBasicMaterial?m(U,B):B.isMeshLambertMaterial?(m(U,B),function S(U,B){B.emissiveMap&&(U.emissiveMap.value=B.emissiveMap)}(U,B)):B.isMeshToonMaterial?(m(U,B),function k(U,B){B.gradientMap&&(U.gradientMap.value=B.gradientMap),B.emissiveMap&&(U.emissiveMap.value=B.emissiveMap),B.bumpMap&&(U.bumpMap.value=B.bumpMap,U.bumpScale.value=B.bumpScale,B.side===Ae&&(U.bumpScale.value*=-1)),B.normalMap&&(U.normalMap.value=B.normalMap,U.normalScale.value.copy(B.normalScale),B.side===Ae&&U.normalScale.value.negate()),B.displacementMap&&(U.displacementMap.value=B.displacementMap,U.displacementScale.value=B.displacementScale,U.displacementBias.value=B.displacementBias)}(U,B)):B.isMeshPhongMaterial?(m(U,B),function A(U,B){U.specular.value.copy(B.specular),U.shininess.value=Math.max(B.shininess,1e-4),B.emissiveMap&&(U.emissiveMap.value=B.emissiveMap),B.bumpMap&&(U.bumpMap.value=B.bumpMap,U.bumpScale.value=B.bumpScale,B.side===Ae&&(U.bumpScale.value*=-1)),B.normalMap&&(U.normalMap.value=B.normalMap,U.normalScale.value.copy(B.normalScale),B.side===Ae&&U.normalScale.value.negate()),B.displacementMap&&(U.displacementMap.value=B.displacementMap,U.displacementScale.value=B.displacementScale,U.displacementBias.value=B.displacementBias)}(U,B)):B.isMeshStandardMaterial?(m(U,B),B.isMeshPhysicalMaterial?function O(U,B){R(U,B),U.reflectivity.value=B.reflectivity,U.clearcoat.value=B.clearcoat,U.clearcoatRoughness.value=B.clearcoatRoughness,B.sheen&&U.sheen.value.copy(B.sheen),B.clearcoatMap&&(U.clearcoatMap.value=B.clearcoatMap),B.clearcoatRoughnessMap&&(U.clearcoatRoughnessMap.value=B.clearcoatRoughnessMap),B.clearcoatNormalMap&&(U.clearcoatNormalScale.value.copy(B.clearcoatNormalScale),U.clearcoatNormalMap.value=B.clearcoatNormalMap,B.side===Ae&&U.clearcoatNormalScale.value.negate()),U.transmission.value=B.transmission,B.transmissionMap&&(U.transmissionMap.value=B.transmissionMap)}(U,B):R(U,B)):B.isMeshMatcapMaterial?(m(U,B),function L(U,B){B.matcap&&(U.matcap.value=B.matcap),B.bumpMap&&(U.bumpMap.value=B.bumpMap,U.bumpScale.value=B.bumpScale,B.side===Ae&&(U.bumpScale.value*=-1)),B.normalMap&&(U.normalMap.value=B.normalMap,U.normalScale.value.copy(B.normalScale),B.side===Ae&&U.normalScale.value.negate()),B.displacementMap&&(U.displacementMap.value=B.displacementMap,U.displacementScale.value=B.displacementScale,U.displacementBias.value=B.displacementBias)}(U,B)):B.isMeshDepthMaterial?(m(U,B),function V(U,B){B.displacementMap&&(U.displacementMap.value=B.displacementMap,U.displacementScale.value=B.displacementScale,U.displacementBias.value=B.displacementBias)}(U,B)):B.isMeshDistanceMaterial?(m(U,B),function z(U,B){B.displacementMap&&(U.displacementMap.value=B.displacementMap,U.displacementScale.value=B.displacementScale,U.displacementBias.value=B.displacementBias),U.referencePosition.value.copy(B.referencePosition),U.nearDistance.value=B.nearDistance,U.farDistance.value=B.farDistance}(U,B)):B.isMeshNormalMaterial?(m(U,B),function W(U,B){B.bumpMap&&(U.bumpMap.value=B.bumpMap,U.bumpScale.value=B.bumpScale,B.side===Ae&&(U.bumpScale.value*=-1)),B.normalMap&&(U.normalMap.value=B.normalMap,U.normalScale.value.copy(B.normalScale),B.side===Ae&&U.normalScale.value.negate()),B.displacementMap&&(U.displacementMap.value=B.displacementMap,U.displacementScale.value=B.displacementScale,U.displacementBias.value=B.displacementBias)}(U,B)):B.isLineBasicMaterial?(function v(U,B){U.diffuse.value.copy(B.color),U.opacity.value=B.opacity}(U,B),B.isLineDashedMaterial&&function b(U,B){U.dashSize.value=B.dashSize,U.totalSize.value=B.dashSize+B.gapSize,U.scale.value=B.scale}(U,B)):B.isPointsMaterial?function C(U,B,te,X){let se;U.diffuse.value.copy(B.color),U.opacity.value=B.opacity,U.size.value=B.size*te,U.scale.value=.5*X,B.map&&(U.map.value=B.map),B.alphaMap&&(U.alphaMap.value=B.alphaMap),B.map?se=B.map:B.alphaMap&&(se=B.alphaMap),void 0!==se&&(!0===se.matrixAutoUpdate&&se.updateMatrix(),U.uvTransform.value.copy(se.matrix))}(U,B,te,X):B.isSpriteMaterial?function D(U,B){let te;U.diffuse.value.copy(B.color),U.opacity.value=B.opacity,U.rotation.value=B.rotation,B.map&&(U.map.value=B.map),B.alphaMap&&(U.alphaMap.value=B.alphaMap),B.map?te=B.map:B.alphaMap&&(te=B.alphaMap),void 0!==te&&(!0===te.matrixAutoUpdate&&te.updateMatrix(),U.uvTransform.value.copy(te.matrix))}(U,B):B.isShadowMaterial?(U.color.value.copy(B.color),U.opacity.value=B.opacity):B.isShaderMaterial&&(B.uniformsNeedUpdate=!1)}}}function Yi(p){const a=void 0!==(p=p||{}).canvas?p.canvas:function Lp(){const p=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return p.style.display="block",p}(),c=void 0!==p.context?p.context:null,m=void 0!==p.alpha&&p.alpha,v=void 0===p.depth||p.depth,b=void 0===p.stencil||p.stencil,C=void 0!==p.antialias&&p.antialias,D=void 0===p.premultipliedAlpha||p.premultipliedAlpha,S=void 0!==p.preserveDrawingBuffer&&p.preserveDrawingBuffer,A=void 0!==p.powerPreference?p.powerPreference:"default",k=void 0!==p.failIfMajorPerformanceCaveat&&p.failIfMajorPerformanceCaveat;let R=null,O=null;const L=[],V=[];this.domElement=a,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Do,this.physicallyCorrectLights=!1,this.toneMapping=vs,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const z=this;let W=!1,U=null,B=0,te=0,X=null,se=null,K=-1,he=null;const Ie=new Di,xe=new Di;let Pe=null,Be=a.width,Ke=a.height,Ue=1,De=null,je=null;const st=new Di(0,0,Be,Ke),Ct=new Di(0,0,Be,Ke);let jt=!1;const qt=new mu;let an=!1,nn=!1;const Wn=new fn,Rn=new ee,Hi={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function yi(){return null===X?Ue:1}let gi,di,Gn,mi,yt,Pt,Lt,un,en,le,oe,pt,vt,Ce,xt,Xt,rn,Mt,Mn,bn,mn,dt=c;function dr(ie,rt){for(let Qe=0;Qe<ie.length;Qe++){const Gt=a.getContext(ie[Qe],rt);if(null!==Gt)return Gt}return null}try{const ie={alpha:m,depth:v,stencil:b,antialias:C,premultipliedAlpha:D,preserveDrawingBuffer:S,powerPreference:A,failIfMajorPerformanceCaveat:k};if(a.addEventListener("webglcontextlost",to,!1),a.addEventListener("webglcontextrestored",Cg,!1),null===dt){const rt=["webgl2","webgl","experimental-webgl"];if(!0===z.isWebGL1Renderer&&rt.shift(),dt=dr(rt,ie),null===dt)throw dr(rt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===dt.getShaderPrecisionFormat&&(dt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ie){throw console.error("THREE.WebGLRenderer: "+ie.message),ie}function vn(){gi=new Ms(dt),di=new oy(dt,gi,p),gi.init(di),bn=new by(dt,gi,di),Gn=new cE(dt,gi,di),Gn.scissor(xe.copy(Ct).multiplyScalar(Ue).floor()),Gn.viewport(Ie.copy(st).multiplyScalar(Ue).floor()),mi=new Tm(dt),yt=new Op,Pt=new yy(dt,gi,Gn,yt,di,bn,mi),Lt=new Md(z),un=new Nh(dt,di),mn=new sy(dt,gi,un,di),en=new AC(dt,un,mi,mn),le=new jh(dt,en,un,mi),rn=new Cp(dt),xt=new Am(yt),oe=new Pp(z,Lt,gi,di,mn,xt),pt=new wy(yt),vt=new Ad(yt),Ce=new kp(gi,di),Xt=new SC(z,Lt,Gn,le,D),Mt=new Qb(dt,gi,mi,di),Mn=new sE(dt,gi,mi,di),mi.programs=oe.programs,z.capabilities=di,z.extensions=gi,z.properties=yt,z.renderLists=vt,z.state=Gn,z.info=mi}vn();const wn=new Fp(z,dt);this.xr=wn;const pr=new aw(z,le,di.maxTextureSize);function to(ie){ie.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),W=!0}function Cg(){console.log("THREE.WebGLRenderer: Context Restored."),W=!1,vn()}function Lw(ie){const rt=ie.target;rt.removeEventListener("dispose",Lw),function JC(ie){Uc(ie),yt.remove(ie)}(rt)}function Uc(ie){const rt=yt.get(ie).program;void 0!==rt&&oe.releaseProgram(rt)}this.shadowMap=pr,this.getContext=function(){return dt},this.getContextAttributes=function(){return dt.getContextAttributes()},this.forceContextLoss=function(){const ie=gi.get("WEBGL_lose_context");ie&&ie.loseContext()},this.forceContextRestore=function(){const ie=gi.get("WEBGL_lose_context");ie&&ie.restoreContext()},this.getPixelRatio=function(){return Ue},this.setPixelRatio=function(ie){void 0!==ie&&(Ue=ie,this.setSize(Be,Ke,!1))},this.getSize=function(ie){return void 0===ie&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),ie=new et),ie.set(Be,Ke)},this.setSize=function(ie,rt,Qe){wn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Be=ie,Ke=rt,a.width=Math.floor(ie*Ue),a.height=Math.floor(rt*Ue),!1!==Qe&&(a.style.width=ie+"px",a.style.height=rt+"px"),this.setViewport(0,0,ie,rt))},this.getDrawingBufferSize=function(ie){return void 0===ie&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),ie=new et),ie.set(Be*Ue,Ke*Ue).floor()},this.setDrawingBufferSize=function(ie,rt,Qe){Be=ie,Ke=rt,Ue=Qe,a.width=Math.floor(ie*Qe),a.height=Math.floor(rt*Qe),this.setViewport(0,0,ie,rt)},this.getCurrentViewport=function(ie){return void 0===ie&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),ie=new Di),ie.copy(Ie)},this.getViewport=function(ie){return ie.copy(st)},this.setViewport=function(ie,rt,Qe,lt){ie.isVector4?st.set(ie.x,ie.y,ie.z,ie.w):st.set(ie,rt,Qe,lt),Gn.viewport(Ie.copy(st).multiplyScalar(Ue).floor())},this.getScissor=function(ie){return ie.copy(Ct)},this.setScissor=function(ie,rt,Qe,lt){ie.isVector4?Ct.set(ie.x,ie.y,ie.z,ie.w):Ct.set(ie,rt,Qe,lt),Gn.scissor(xe.copy(Ct).multiplyScalar(Ue).floor())},this.getScissorTest=function(){return jt},this.setScissorTest=function(ie){Gn.setScissorTest(jt=ie)},this.setOpaqueSort=function(ie){De=ie},this.setTransparentSort=function(ie){je=ie},this.getClearColor=function(ie){return void 0===ie&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),ie=new Jt),ie.copy(Xt.getClearColor())},this.setClearColor=function(){Xt.setClearColor.apply(Xt,arguments)},this.getClearAlpha=function(){return Xt.getClearAlpha()},this.setClearAlpha=function(){Xt.setClearAlpha.apply(Xt,arguments)},this.clear=function(ie,rt,Qe){let lt=0;(void 0===ie||ie)&&(lt|=16384),(void 0===rt||rt)&&(lt|=256),(void 0===Qe||Qe)&&(lt|=1024),dt.clear(lt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){a.removeEventListener("webglcontextlost",to,!1),a.removeEventListener("webglcontextrestored",Cg,!1),vt.dispose(),Ce.dispose(),yt.dispose(),Lt.dispose(),le.dispose(),mn.dispose(),wn.dispose(),Hc.stop()},this.renderBufferImmediate=function(ie,rt){mn.initAttributes();const Qe=yt.get(ie);ie.hasPositions&&!Qe.position&&(Qe.position=dt.createBuffer()),ie.hasNormals&&!Qe.normal&&(Qe.normal=dt.createBuffer()),ie.hasUvs&&!Qe.uv&&(Qe.uv=dt.createBuffer()),ie.hasColors&&!Qe.color&&(Qe.color=dt.createBuffer());const lt=rt.getAttributes();ie.hasPositions&&(dt.bindBuffer(34962,Qe.position),dt.bufferData(34962,ie.positionArray,35048),mn.enableAttribute(lt.position),dt.vertexAttribPointer(lt.position,3,5126,!1,0,0)),ie.hasNormals&&(dt.bindBuffer(34962,Qe.normal),dt.bufferData(34962,ie.normalArray,35048),mn.enableAttribute(lt.normal),dt.vertexAttribPointer(lt.normal,3,5126,!1,0,0)),ie.hasUvs&&(dt.bindBuffer(34962,Qe.uv),dt.bufferData(34962,ie.uvArray,35048),mn.enableAttribute(lt.uv),dt.vertexAttribPointer(lt.uv,2,5126,!1,0,0)),ie.hasColors&&(dt.bindBuffer(34962,Qe.color),dt.bufferData(34962,ie.colorArray,35048),mn.enableAttribute(lt.color),dt.vertexAttribPointer(lt.color,3,5126,!1,0,0)),mn.disableUnusedAttributes(),dt.drawArrays(4,0,ie.count),ie.count=0},this.renderBufferDirect=function(ie,rt,Qe,lt,Gt,Zn){null===rt&&(rt=Hi);const ln=Gt.isMesh&&Gt.matrixWorld.determinant()<0,Yn=D0(ie,rt,lt,Gt);Gn.setMaterial(lt,ln);let qn=Qe.index;const ir=Qe.attributes.position;if(null===qn){if(void 0===ir||0===ir.count)return}else if(0===qn.count)return;let Ri=1;!0===lt.wireframe&&(qn=en.getWireframeAttribute(Qe),Ri=2),(lt.morphTargets||lt.morphNormals)&&rn.update(Gt,Qe,lt,Yn),mn.setup(Gt,lt,Yn,Qe,qn);let Hn,Oi=Mt;null!==qn&&(Hn=un.get(qn),Oi=Mn,Oi.setIndex(Hn));const Us=null!==qn?qn.count:ir.count,Vi=Qe.drawRange.start*Ri,ss=Qe.drawRange.count*Ri,Pr=null!==Zn?Zn.start*Ri:0,S0=null!==Zn?Zn.count*Ri:1/0,Ta=Math.max(Vi,Pr),Dg=Math.min(Us,Vi+ss,Pr+S0)-1,Lf=Math.max(0,Dg-Ta+1);if(0!==Lf){if(Gt.isMesh)!0===lt.wireframe?(Gn.setLineWidth(lt.wireframeLinewidth*yi()),Oi.setMode(1)):Oi.setMode(4);else if(Gt.isLine){let Eg=lt.linewidth;void 0===Eg&&(Eg=1),Gn.setLineWidth(Eg*yi()),Oi.setMode(Gt.isLineSegments?1:Gt.isLineLoop?2:3)}else Gt.isPoints?Oi.setMode(0):Gt.isSprite&&Oi.setMode(4);if(Gt.isInstancedMesh)Oi.renderInstances(Ta,Lf,Gt.count);else if(Qe.isInstancedBufferGeometry){const Eg=Math.min(Qe.instanceCount,Qe._maxInstanceCount);Oi.renderInstances(Ta,Lf,Eg)}else Oi.render(Ta,Lf)}},this.compile=function(ie,rt){O=Ce.get(ie),O.init(),ie.traverseVisible(function(lt){lt.isLight&&lt.layers.test(rt.layers)&&(O.pushLight(lt),lt.castShadow&&O.pushShadow(lt))}),O.setupLights();const Qe=new WeakMap;ie.traverse(function(lt){const Gt=lt.material;if(Gt)if(Array.isArray(Gt))for(let Zn=0;Zn<Gt.length;Zn++){const ln=Gt[Zn];!1===Qe.has(ln)&&(Kl(ln,ie,lt),Qe.set(ln))}else!1===Qe.has(Gt)&&(Kl(Gt,ie,lt),Qe.set(Gt))})};let Mg=null;const Hc=new pm;function L_(ie,rt,Qe,lt){if(!1===ie.visible)return;if(ie.layers.test(rt.layers))if(ie.isGroup)Qe=ie.renderOrder;else if(ie.isLOD)!0===ie.autoUpdate&&ie.update(rt);else if(ie.isLight)O.pushLight(ie),ie.castShadow&&O.pushShadow(ie);else if(ie.isSprite){if(!ie.frustumCulled||qt.intersectsSprite(ie)){lt&&Rn.setFromMatrixPosition(ie.matrixWorld).applyMatrix4(Wn);const ln=le.update(ie),Yn=ie.material;Yn.visible&&R.push(ie,ln,Yn,Qe,Rn.z,null)}}else if(ie.isImmediateRenderObject)lt&&Rn.setFromMatrixPosition(ie.matrixWorld).applyMatrix4(Wn),R.push(ie,null,ie.material,Qe,Rn.z,null);else if((ie.isMesh||ie.isLine||ie.isPoints)&&(ie.isSkinnedMesh&&ie.skeleton.frame!==mi.render.frame&&(ie.skeleton.update(),ie.skeleton.frame=mi.render.frame),!ie.frustumCulled||qt.intersectsObject(ie))){lt&&Rn.setFromMatrixPosition(ie.matrixWorld).applyMatrix4(Wn);const ln=le.update(ie),Yn=ie.material;if(Array.isArray(Yn)){const qn=ln.groups;for(let ir=0,Ri=qn.length;ir<Ri;ir++){const Hn=qn[ir],Oi=Yn[Hn.materialIndex];Oi&&Oi.visible&&R.push(ie,ln,Oi,Qe,Rn.z,Hn)}}else Yn.visible&&R.push(ie,ln,Yn,Qe,Rn.z,null)}const Zn=ie.children;for(let ln=0,Yn=Zn.length;ln<Yn;ln++)L_(Zn[ln],rt,Qe,lt)}function C0(ie,rt,Qe){const lt=!0===rt.isScene?rt.overrideMaterial:null;for(let Gt=0,Zn=ie.length;Gt<Zn;Gt++){const ln=ie[Gt],Yn=ln.object,qn=ln.geometry,ir=null===lt?ln.material:lt,Ri=ln.group;if(Qe.isArrayCamera){const Hn=Qe.cameras;for(let Oi=0,Us=Hn.length;Oi<Us;Oi++){const Vi=Hn[Oi];Yn.layers.test(Vi.layers)&&(Gn.viewport(Ie.copy(Vi.viewport)),O.setupLightsView(Vi),M0(Yn,rt,Vi,qn,ir,Ri))}}else M0(Yn,rt,Qe,qn,ir,Ri)}}function M0(ie,rt,Qe,lt,Gt,Zn){if(ie.onBeforeRender(z,rt,Qe,lt,Gt,Zn),ie.modelViewMatrix.multiplyMatrices(Qe.matrixWorldInverse,ie.matrixWorld),ie.normalMatrix.getNormalMatrix(ie.modelViewMatrix),ie.isImmediateRenderObject){const ln=D0(Qe,rt,Gt,ie);Gn.setMaterial(Gt),mn.reset(),function eh(ie,rt){ie.render(function(Qe){z.renderBufferImmediate(Qe,rt)})}(ie,ln)}else z.renderBufferDirect(Qe,rt,lt,Gt,ie,Zn);ie.onAfterRender(z,rt,Qe,lt,Gt,Zn)}function Kl(ie,rt,Qe){!0!==rt.isScene&&(rt=Hi);const lt=yt.get(ie),Gt=O.state.lights,ln=Gt.state.version,Yn=oe.getParameters(ie,Gt.state,O.state.shadowsArray,rt,Qe),qn=oe.getProgramCacheKey(Yn);let ir=lt.program,Ri=!0;if(lt.environment=ie.isMeshStandardMaterial?rt.environment:null,lt.fog=rt.fog,lt.envMap=Lt.get(ie.envMap||lt.environment),void 0===ir)ie.addEventListener("dispose",Lw);else if(ir.cacheKey!==qn)Uc(ie);else if(lt.lightsStateVersion!==ln)Ri=!1;else{if(void 0!==Yn.shaderID)return;Ri=!1}Ri&&(Yn.uniforms=oe.getUniforms(ie),ie.onBeforeCompile(Yn,z),ir=oe.acquireProgram(Yn,qn),lt.program=ir,lt.uniforms=Yn.uniforms,lt.outputEncoding=Yn.outputEncoding);const Hn=lt.uniforms;(!ie.isShaderMaterial&&!ie.isRawShaderMaterial||!0===ie.clipping)&&(lt.numClippingPlanes=xt.numPlanes,lt.numIntersection=xt.numIntersection,Hn.clippingPlanes=xt.uniform),lt.needsLights=function N_(ie){return ie.isMeshLambertMaterial||ie.isMeshToonMaterial||ie.isMeshPhongMaterial||ie.isMeshStandardMaterial||ie.isShadowMaterial||ie.isShaderMaterial&&!0===ie.lights}(ie),lt.lightsStateVersion=ln,lt.needsLights&&(Hn.ambientLightColor.value=Gt.state.ambient,Hn.lightProbe.value=Gt.state.probe,Hn.directionalLights.value=Gt.state.directional,Hn.directionalLightShadows.value=Gt.state.directionalShadow,Hn.spotLights.value=Gt.state.spot,Hn.spotLightShadows.value=Gt.state.spotShadow,Hn.rectAreaLights.value=Gt.state.rectArea,Hn.ltc_1.value=Gt.state.rectAreaLTC1,Hn.ltc_2.value=Gt.state.rectAreaLTC2,Hn.pointLights.value=Gt.state.point,Hn.pointLightShadows.value=Gt.state.pointShadow,Hn.hemisphereLights.value=Gt.state.hemi,Hn.directionalShadowMap.value=Gt.state.directionalShadowMap,Hn.directionalShadowMatrix.value=Gt.state.directionalShadowMatrix,Hn.spotShadowMap.value=Gt.state.spotShadowMap,Hn.spotShadowMatrix.value=Gt.state.spotShadowMatrix,Hn.pointShadowMap.value=Gt.state.pointShadowMap,Hn.pointShadowMatrix.value=Gt.state.pointShadowMatrix);const Oi=lt.program.getUniforms(),Us=Tr.seqWithValue(Oi.seq,Hn);lt.uniformsList=Us}function D0(ie,rt,Qe,lt){!0!==rt.isScene&&(rt=Hi),Pt.resetTextureUnits();const Gt=rt.fog,Zn=Qe.isMeshStandardMaterial?rt.environment:null,ln=null===X?z.outputEncoding:X.texture.encoding,Yn=Lt.get(Qe.envMap||Zn),qn=yt.get(Qe),ir=O.state.lights;!0!==an||!0!==nn&&ie===he||xt.setState(Qe,ie,ie===he&&Qe.id===K),Qe.version===qn.__version?(Qe.fog&&qn.fog!==Gt||qn.environment!==Zn||qn.needsLights&&qn.lightsStateVersion!==ir.state.version||void 0!==qn.numClippingPlanes&&(qn.numClippingPlanes!==xt.numPlanes||qn.numIntersection!==xt.numIntersection)||qn.outputEncoding!==ln||qn.envMap!==Yn)&&Kl(Qe,rt,lt):(Kl(Qe,rt,lt),qn.__version=Qe.version);let Ri=!1,Hn=!1,Oi=!1;const Us=qn.program,Vi=Us.getUniforms(),ss=qn.uniforms;if(Gn.useProgram(Us.program)&&(Ri=!0,Hn=!0,Oi=!0),Qe.id!==K&&(K=Qe.id,Hn=!0),Ri||he!==ie){if(Vi.setValue(dt,"projectionMatrix",ie.projectionMatrix),di.logarithmicDepthBuffer&&Vi.setValue(dt,"logDepthBufFC",2/(Math.log(ie.far+1)/Math.LN2)),he!==ie&&(he=ie,Hn=!0,Oi=!0),Qe.isShaderMaterial||Qe.isMeshPhongMaterial||Qe.isMeshToonMaterial||Qe.isMeshStandardMaterial||Qe.envMap){const Pr=Vi.map.cameraPosition;void 0!==Pr&&Pr.setValue(dt,Rn.setFromMatrixPosition(ie.matrixWorld))}(Qe.isMeshPhongMaterial||Qe.isMeshToonMaterial||Qe.isMeshLambertMaterial||Qe.isMeshBasicMaterial||Qe.isMeshStandardMaterial||Qe.isShaderMaterial)&&Vi.setValue(dt,"isOrthographic",!0===ie.isOrthographicCamera),(Qe.isMeshPhongMaterial||Qe.isMeshToonMaterial||Qe.isMeshLambertMaterial||Qe.isMeshBasicMaterial||Qe.isMeshStandardMaterial||Qe.isShaderMaterial||Qe.isShadowMaterial||Qe.skinning)&&Vi.setValue(dt,"viewMatrix",ie.matrixWorldInverse)}if(Qe.skinning){Vi.setOptional(dt,lt,"bindMatrix"),Vi.setOptional(dt,lt,"bindMatrixInverse");const Pr=lt.skeleton;if(Pr){const S0=Pr.bones;if(di.floatVertexTextures){if(null===Pr.boneTexture){let Ta=Math.sqrt(4*S0.length);Ta=Ne.ceilPowerOfTwo(Ta),Ta=Math.max(Ta,4);const Dg=new Float32Array(Ta*Ta*4);Dg.set(Pr.boneMatrices);const Lf=new _c(Dg,Ta,Ta,$r,Dr);Pr.boneMatrices=Dg,Pr.boneTexture=Lf,Pr.boneTextureSize=Ta}Vi.setValue(dt,"boneTexture",Pr.boneTexture,Pt),Vi.setValue(dt,"boneTextureSize",Pr.boneTextureSize)}else Vi.setOptional(dt,Pr,"boneMatrices")}}return(Hn||qn.receiveShadow!==lt.receiveShadow)&&(qn.receiveShadow=lt.receiveShadow,Vi.setValue(dt,"receiveShadow",lt.receiveShadow)),Hn&&(Vi.setValue(dt,"toneMappingExposure",z.toneMappingExposure),qn.needsLights&&function E0(ie,rt){ie.ambientLightColor.needsUpdate=rt,ie.lightProbe.needsUpdate=rt,ie.directionalLights.needsUpdate=rt,ie.directionalLightShadows.needsUpdate=rt,ie.pointLights.needsUpdate=rt,ie.pointLightShadows.needsUpdate=rt,ie.spotLights.needsUpdate=rt,ie.spotLightShadows.needsUpdate=rt,ie.rectAreaLights.needsUpdate=rt,ie.hemisphereLights.needsUpdate=rt}(ss,Oi),Gt&&Qe.fog&&pt.refreshFogUniforms(ss,Gt),pt.refreshMaterialUniforms(ss,Qe,Ue,Ke),Tr.upload(dt,qn.uniformsList,ss,Pt)),Qe.isShaderMaterial&&!0===Qe.uniformsNeedUpdate&&(Tr.upload(dt,qn.uniformsList,ss,Pt),Qe.uniformsNeedUpdate=!1),Qe.isSpriteMaterial&&Vi.setValue(dt,"center",lt.center),Vi.setValue(dt,"modelViewMatrix",lt.modelViewMatrix),Vi.setValue(dt,"normalMatrix",lt.normalMatrix),Vi.setValue(dt,"modelMatrix",lt.matrixWorld),Us}Hc.setAnimationLoop(function x0(ie){wn.isPresenting||Mg&&Mg(ie)}),"undefined"!=typeof window&&Hc.setContext(window),this.setAnimationLoop=function(ie){Mg=ie,wn.setAnimationLoop(ie),null===ie?Hc.stop():Hc.start()},this.render=function(ie,rt){let Qe,lt;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Qe=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),lt=arguments[3]),void 0!==rt&&!0!==rt.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===W)return;mn.resetDefaultState(),K=-1,he=null,!0===ie.autoUpdate&&ie.updateMatrixWorld(),null===rt.parent&&rt.updateMatrixWorld(),!0===wn.enabled&&!0===wn.isPresenting&&(rt=wn.getCamera(rt)),!0===ie.isScene&&ie.onBeforeRender(z,ie,rt,Qe||X),O=Ce.get(ie,V.length),O.init(),V.push(O),Wn.multiplyMatrices(rt.projectionMatrix,rt.matrixWorldInverse),qt.setFromProjectionMatrix(Wn),nn=this.localClippingEnabled,an=xt.init(this.clippingPlanes,nn,rt),R=vt.get(ie,L.length),R.init(),L.push(R),L_(ie,rt,0,z.sortObjects),R.finish(),!0===z.sortObjects&&R.sort(De,je),!0===an&&xt.beginShadows();const Gt=O.state.shadowsArray;pr.render(Gt,ie,rt),O.setupLights(),O.setupLightsView(rt),!0===an&&xt.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==Qe&&this.setRenderTarget(Qe),Xt.render(R,ie,rt,lt);const Zn=R.opaque,ln=R.transparent;Zn.length>0&&C0(Zn,ie,rt),ln.length>0&&C0(ln,ie,rt),!0===ie.isScene&&ie.onAfterRender(z,ie,rt),null!==X&&(Pt.updateRenderTargetMipmap(X),Pt.updateMultisampleRenderTarget(X)),Gn.buffers.depth.setTest(!0),Gn.buffers.depth.setMask(!0),Gn.buffers.color.setMask(!0),Gn.setPolygonOffset(!1),V.pop(),O=V.length>0?V[V.length-1]:null,L.pop(),R=L.length>0?L[L.length-1]:null},this.setFramebuffer=function(ie){U!==ie&&null===X&&dt.bindFramebuffer(36160,ie),U=ie},this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return te},this.getRenderTarget=function(){return X},this.setRenderTarget=function(ie,rt=0,Qe=0){X=ie,B=rt,te=Qe,ie&&void 0===yt.get(ie).__webglFramebuffer&&Pt.setupRenderTarget(ie);let lt=U,Gt=!1,Zn=!1;if(ie){const ln=ie.texture;(ln.isDataTexture3D||ln.isDataTexture2DArray)&&(Zn=!0);const Yn=yt.get(ie).__webglFramebuffer;ie.isWebGLCubeRenderTarget?(lt=Yn[rt],Gt=!0):lt=ie.isWebGLMultisampleRenderTarget?yt.get(ie).__webglMultisampledFramebuffer:Yn,Ie.copy(ie.viewport),xe.copy(ie.scissor),Pe=ie.scissorTest}else Ie.copy(st).multiplyScalar(Ue).floor(),xe.copy(Ct).multiplyScalar(Ue).floor(),Pe=jt;if(se!==lt&&(dt.bindFramebuffer(36160,lt),se=lt),Gn.viewport(Ie),Gn.scissor(xe),Gn.setScissorTest(Pe),Gt){const ln=yt.get(ie.texture);dt.framebufferTexture2D(36160,36064,34069+rt,ln.__webglTexture,Qe)}else if(Zn){const ln=yt.get(ie.texture);dt.framebufferTextureLayer(36160,36064,ln.__webglTexture,Qe||0,rt||0)}},this.readRenderTargetPixels=function(ie,rt,Qe,lt,Gt,Zn,ln){if(!ie||!ie.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Yn=yt.get(ie).__webglFramebuffer;if(ie.isWebGLCubeRenderTarget&&void 0!==ln&&(Yn=Yn[ln]),Yn){let qn=!1;Yn!==se&&(dt.bindFramebuffer(36160,Yn),qn=!0);try{const ir=ie.texture,Ri=ir.format,Hn=ir.type;if(Ri!==$r&&bn.convert(Ri)!==dt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Oi=Hn===ls&&(gi.has("EXT_color_buffer_half_float")||di.isWebGL2&&gi.has("EXT_color_buffer_float"));if(!(Hn===It||bn.convert(Hn)===dt.getParameter(35738)||Hn===Dr&&(di.isWebGL2||gi.has("OES_texture_float")||gi.has("WEBGL_color_buffer_float"))||Oi))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===dt.checkFramebufferStatus(36160)?rt>=0&&rt<=ie.width-lt&&Qe>=0&&Qe<=ie.height-Gt&&dt.readPixels(rt,Qe,lt,Gt,bn.convert(Ri),bn.convert(Hn),Zn):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{qn&&dt.bindFramebuffer(36160,se)}}},this.copyFramebufferToTexture=function(ie,rt,Qe=0){const lt=Math.pow(2,-Qe),Gt=Math.floor(rt.image.width*lt),Zn=Math.floor(rt.image.height*lt),ln=bn.convert(rt.format);Pt.setTexture2D(rt,0),dt.copyTexImage2D(3553,Qe,ln,ie.x,ie.y,Gt,Zn,0),Gn.unbindTexture()},this.copyTextureToTexture=function(ie,rt,Qe,lt=0){const Gt=rt.image.width,Zn=rt.image.height,ln=bn.convert(Qe.format),Yn=bn.convert(Qe.type);Pt.setTexture2D(Qe,0),dt.pixelStorei(37440,Qe.flipY),dt.pixelStorei(37441,Qe.premultiplyAlpha),dt.pixelStorei(3317,Qe.unpackAlignment),rt.isDataTexture?dt.texSubImage2D(3553,lt,ie.x,ie.y,Gt,Zn,ln,Yn,rt.image.data):rt.isCompressedTexture?dt.compressedTexSubImage2D(3553,lt,ie.x,ie.y,rt.mipmaps[0].width,rt.mipmaps[0].height,ln,rt.mipmaps[0].data):dt.texSubImage2D(3553,lt,ie.x,ie.y,ln,Yn,rt.image),0===lt&&Qe.generateMipmaps&&dt.generateMipmap(3553),Gn.unbindTexture()},this.copyTextureToTexture3D=function(ie,rt,Qe,lt,Gt=0){if(z.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const{width:Zn,height:ln,data:Yn}=Qe.image,qn=bn.convert(lt.format),ir=bn.convert(lt.type);let Ri;if(lt.isDataTexture3D)Pt.setTexture3D(lt,0),Ri=32879;else{if(!lt.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Pt.setTexture2DArray(lt,0),Ri=35866}dt.pixelStorei(37440,lt.flipY),dt.pixelStorei(37441,lt.premultiplyAlpha),dt.pixelStorei(3317,lt.unpackAlignment);const Hn=dt.getParameter(3314),Oi=dt.getParameter(32878),Us=dt.getParameter(3316),Vi=dt.getParameter(3315),ss=dt.getParameter(32877);dt.pixelStorei(3314,Zn),dt.pixelStorei(32878,ln),dt.pixelStorei(3316,ie.min.x),dt.pixelStorei(3315,ie.min.y),dt.pixelStorei(32877,ie.min.z),dt.texSubImage3D(Ri,Gt,rt.x,rt.y,rt.z,ie.max.x-ie.min.x+1,ie.max.y-ie.min.y+1,ie.max.z-ie.min.z+1,qn,ir,Yn),dt.pixelStorei(3314,Hn),dt.pixelStorei(32878,Oi),dt.pixelStorei(3316,Us),dt.pixelStorei(3315,Vi),dt.pixelStorei(32877,ss),0===Gt&&lt.generateMipmaps&&dt.generateMipmap(Ri),Gn.unbindTexture()},this.initTexture=function(ie){Pt.setTexture2D(ie,0),Gn.unbindTexture()},this.resetState=function(){Gn.reset(),mn.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Mc.prototype.isGroup=!0,Object.assign(jm.prototype,{constructor:jm,getHandSpace:function(){return null===this._hand&&(this._hand=new Mc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Mc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Mc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(p){return null!==this._targetRay&&this._targetRay.dispatchEvent(p),null!==this._grip&&this._grip.dispatchEvent(p),null!==this._hand&&this._hand.dispatchEvent(p),this},disconnect:function(p){return this.dispatchEvent({type:"disconnected",data:p}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(p,a,c){let m=null,v=null,b=null;const C=this._targetRay,D=this._grip,S=this._hand;if(p&&"visible-blurred"!==a.session.visibilityState)if(S&&p.hand){b=!0;for(const V of p.hand.values()){const z=a.getJointPose(V,c);if(void 0===S.joints[V.jointName]){const U=new Mc;U.matrixAutoUpdate=!1,U.visible=!1,S.joints[V.jointName]=U,S.add(U)}const W=S.joints[V.jointName];null!==z&&(W.matrix.fromArray(z.transform.matrix),W.matrix.decompose(W.position,W.rotation,W.scale),W.jointRadius=z.radius),W.visible=null!==z}const R=S.joints["index-finger-tip"].position.distanceTo(S.joints["thumb-tip"].position),O=.02,L=.005;S.inputState.pinching&&R>O+L?(S.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:p.handedness,target:this})):!S.inputState.pinching&&R<=O-L&&(S.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:p.handedness,target:this}))}else null!==C&&(m=a.getPose(p.targetRaySpace,c),null!==m&&(C.matrix.fromArray(m.transform.matrix),C.matrix.decompose(C.position,C.rotation,C.scale))),null!==D&&p.gripSpace&&(v=a.getPose(p.gripSpace,c),null!==v&&(D.matrix.fromArray(v.transform.matrix),D.matrix.decompose(D.position,D.rotation,D.scale)));return null!==C&&(C.visible=null!==m),null!==D&&(D.visible=null!==v),null!==S&&(S.visible=null!==b),this}}),Object.assign(Fp.prototype,xl.prototype);class lw extends Yi{}lw.prototype.isWebGL1Renderer=!0;class Np{constructor(a,c){this.name="",this.color=new Jt(a),this.density=void 0!==c?c:25e-5}clone(){return new Np(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Np.prototype.isFogExp2=!0;class wa{constructor(a,c,m){this.name="",this.color=new Jt(a),this.near=void 0!==c?c:1,this.far=void 0!==m?m:1e3}clone(){return new wa(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}wa.prototype.isFog=!0;class Wm extends it{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(a,c){return super.copy(a,c),null!==a.background&&(this.background=a.background.clone()),null!==a.environment&&(this.environment=a.environment.clone()),null!==a.fog&&(this.fog=a.fog.clone()),null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this}toJSON(a){const c=super.toJSON(a);return null!==this.background&&(c.object.background=this.background.toJSON(a)),null!==this.environment&&(c.object.environment=this.environment.toJSON(a)),null!==this.fog&&(c.object.fog=this.fog.toJSON()),c}}function Ds(p,a){this.array=p,this.stride=a,this.count=void 0!==p?p.length/a:0,this.usage=ac,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ne.generateUUID()}Wm.prototype.isScene=!0,Object.defineProperty(Ds.prototype,"needsUpdate",{set:function(p){!0===p&&this.version++}}),Object.assign(Ds.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(p){return this.usage=p,this},copy:function(p){return this.array=new p.array.constructor(p.array),this.count=p.count,this.stride=p.stride,this.usage=p.usage,this},copyAt:function(p,a,c){p*=this.stride,c*=a.stride;for(let m=0,v=this.stride;m<v;m++)this.array[p+m]=a.array[c+m];return this},set:function(p,a=0){return this.array.set(p,a),this},clone:function(p){void 0===p.arrayBuffers&&(p.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ne.generateUUID()),void 0===p.arrayBuffers[this.array.buffer._uuid]&&(p.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const c=new Ds(new this.array.constructor(p.arrayBuffers[this.array.buffer._uuid]),this.stride);return c.setUsage(this.usage),c},onUpload:function(p){return this.onUploadCallback=p,this},toJSON:function(p){return void 0===p.arrayBuffers&&(p.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ne.generateUUID()),void 0===p.arrayBuffers[this.array.buffer._uuid]&&(p.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Ns=new ee;function sa(p,a,c,m){this.name="",this.data=p,this.itemSize=a,this.offset=c,this.normalized=!0===m}Object.defineProperties(sa.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(p){this.data.needsUpdate=p}}}),Object.assign(sa.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(p){for(let a=0,c=this.data.count;a<c;a++)Ns.x=this.getX(a),Ns.y=this.getY(a),Ns.z=this.getZ(a),Ns.applyMatrix4(p),this.setXYZ(a,Ns.x,Ns.y,Ns.z);return this},setX:function(p,a){return this.data.array[p*this.data.stride+this.offset]=a,this},setY:function(p,a){return this.data.array[p*this.data.stride+this.offset+1]=a,this},setZ:function(p,a){return this.data.array[p*this.data.stride+this.offset+2]=a,this},setW:function(p,a){return this.data.array[p*this.data.stride+this.offset+3]=a,this},getX:function(p){return this.data.array[p*this.data.stride+this.offset]},getY:function(p){return this.data.array[p*this.data.stride+this.offset+1]},getZ:function(p){return this.data.array[p*this.data.stride+this.offset+2]},getW:function(p){return this.data.array[p*this.data.stride+this.offset+3]},setXY:function(p,a,c){return this.data.array[(p=p*this.data.stride+this.offset)+0]=a,this.data.array[p+1]=c,this},setXYZ:function(p,a,c,m){return this.data.array[(p=p*this.data.stride+this.offset)+0]=a,this.data.array[p+1]=c,this.data.array[p+2]=m,this},setXYZW:function(p,a,c,m,v){return this.data.array[(p=p*this.data.stride+this.offset)+0]=a,this.data.array[p+1]=c,this.data.array[p+2]=m,this.data.array[p+3]=v,this},clone:function(p){if(void 0===p){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const a=[];for(let c=0;c<this.count;c++){const m=c*this.data.stride+this.offset;for(let v=0;v<this.itemSize;v++)a.push(this.data.array[m+v])}return new _n(new this.array.constructor(a),this.itemSize,this.normalized)}return void 0===p.interleavedBuffers&&(p.interleavedBuffers={}),void 0===p.interleavedBuffers[this.data.uuid]&&(p.interleavedBuffers[this.data.uuid]=this.data.clone(p)),new sa(p.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(p){if(void 0===p){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const a=[];for(let c=0;c<this.count;c++){const m=c*this.data.stride+this.offset;for(let v=0;v<this.itemSize;v++)a.push(this.data.array[m+v])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:a,normalized:this.normalized}}return void 0===p.interleavedBuffers&&(p.interleavedBuffers={}),void 0===p.interleavedBuffers[this.data.uuid]&&(p.interleavedBuffers[this.data.uuid]=this.data.toJSON(p)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});class Zh extends lr{constructor(a){super(),this.type="SpriteMaterial",this.color=new Jt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.rotation=a.rotation,this.sizeAttenuation=a.sizeAttenuation,this}}let Dc;Zh.prototype.isSpriteMaterial=!0;const Ec=new ee,xa=new ee,hs=new ee,Rd=new et,Zs=new et,Ym=new fn,Kh=new ee,tl=new ee,Bp=new ee,xy=new et,qm=new et,Cy=new et;class Sc extends it{constructor(a){if(super(),this.type="Sprite",void 0===Dc){Dc=new Wt;const m=new Ds(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Dc.setIndex([0,1,2,0,2,3]),Dc.setAttribute("position",new sa(m,3,0,!1)),Dc.setAttribute("uv",new sa(m,2,3,!1))}this.geometry=Dc,this.material=void 0!==a?a:new Zh,this.center=new et(.5,.5)}raycast(a,c){null===a.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xa.setFromMatrixScale(this.matrixWorld),Ym.copy(a.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(a.camera.matrixWorldInverse,this.matrixWorld),hs.setFromMatrixPosition(this.modelViewMatrix),a.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&xa.multiplyScalar(-hs.z);const m=this.material.rotation;let v,b;0!==m&&(b=Math.cos(m),v=Math.sin(m));const C=this.center;Ca(Kh.set(-.5,-.5,0),hs,C,xa,v,b),Ca(tl.set(.5,-.5,0),hs,C,xa,v,b),Ca(Bp.set(.5,.5,0),hs,C,xa,v,b),xy.set(0,0),qm.set(1,0),Cy.set(1,1);let D=a.ray.intersectTriangle(Kh,tl,Bp,!1,Ec);if(null===D&&(Ca(tl.set(-.5,.5,0),hs,C,xa,v,b),qm.set(0,1),D=a.ray.intersectTriangle(Kh,Bp,tl,!1,Ec),null===D))return;const S=a.ray.origin.distanceTo(Ec);S<a.near||S>a.far||c.push({distance:S,point:Ec.clone(),uv:Ti.getUV(Ec,Kh,tl,Bp,xy,qm,Cy,new et),face:null,object:this})}copy(a){return super.copy(a),void 0!==a.center&&this.center.copy(a.center),this.material=a.material,this}}function Ca(p,a,c,m,v,b){Rd.subVectors(p,c).addScalar(.5).multiply(m),void 0!==v?(Zs.x=b*Rd.x-v*Rd.y,Zs.y=v*Rd.x+b*Rd.y):Zs.copy(Rd),p.copy(a),p.x+=Zs.x,p.y+=Zs.y,p.applyMatrix4(Ym)}Sc.prototype.isSprite=!0;const Qh=new ee,Pd=new ee;class Su extends it{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(a){super.copy(a,!1);const c=a.levels;for(let m=0,v=c.length;m<v;m++){const b=c[m];this.addLevel(b.object.clone(),b.distance)}return this.autoUpdate=a.autoUpdate,this}addLevel(a,c=0){c=Math.abs(c);const m=this.levels;let v;for(v=0;v<m.length&&!(c<m[v].distance);v++);return m.splice(v,0,{distance:c,object:a}),this.add(a),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(a){const c=this.levels;if(c.length>0){let m,v;for(m=1,v=c.length;m<v&&!(a<c[m].distance);m++);return c[m-1].object}return null}raycast(a,c){if(this.levels.length>0){Qh.setFromMatrixPosition(this.matrixWorld);const v=a.ray.origin.distanceTo(Qh);this.getObjectForDistance(v).raycast(a,c)}}update(a){const c=this.levels;if(c.length>1){Qh.setFromMatrixPosition(a.matrixWorld),Pd.setFromMatrixPosition(this.matrixWorld);const m=Qh.distanceTo(Pd)/a.zoom;let v,b;for(c[0].object.visible=!0,v=1,b=c.length;v<b&&m>=c[v].distance;v++)c[v-1].object.visible=!1,c[v].object.visible=!0;for(this._currentLevel=v-1;v<b;v++)c[v].object.visible=!1}}toJSON(a){const c=super.toJSON(a);!1===this.autoUpdate&&(c.object.autoUpdate=!1),c.object.levels=[];const m=this.levels;for(let v=0,b=m.length;v<b;v++){const C=m[v];c.object.levels.push({object:C.object.uuid,distance:C.distance})}return c}}const Ma=new ee,Au=new Di,$m=new Di,Tu=new ee,Vp=new fn;function Da(p,a){ei.call(this,p,a),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new fn,this.bindMatrixInverse=new fn}function Od(){it.call(this),this.type="Bone"}Da.prototype=Object.assign(Object.create(ei.prototype),{constructor:Da,isSkinnedMesh:!0,copy:function(p){return ei.prototype.copy.call(this,p),this.bindMode=p.bindMode,this.bindMatrix.copy(p.bindMatrix),this.bindMatrixInverse.copy(p.bindMatrixInverse),this.skeleton=p.skeleton,this},bind:function(p,a){this.skeleton=p,void 0===a&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),a=this.matrixWorld),this.bindMatrix.copy(a),this.bindMatrixInverse.copy(a).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const p=new Di,a=this.geometry.attributes.skinWeight;for(let c=0,m=a.count;c<m;c++){p.x=a.getX(c),p.y=a.getY(c),p.z=a.getZ(c),p.w=a.getW(c);const v=1/p.manhattanLength();v!==1/0?p.multiplyScalar(v):p.set(1,0,0,0),a.setXYZW(c,p.x,p.y,p.z,p.w)}},updateMatrixWorld:function(p){ei.prototype.updateMatrixWorld.call(this,p),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(p,a){const c=this.skeleton,m=this.geometry;Au.fromBufferAttribute(m.attributes.skinIndex,p),$m.fromBufferAttribute(m.attributes.skinWeight,p),Ma.fromBufferAttribute(m.attributes.position,p).applyMatrix4(this.bindMatrix),a.set(0,0,0);for(let v=0;v<4;v++){const b=$m.getComponent(v);if(0!==b){const C=Au.getComponent(v);Vp.multiplyMatrices(c.bones[C].matrixWorld,c.boneInverses[C]),a.addScaledVector(Tu.copy(Ma).applyMatrix4(Vp),b)}}return a.applyMatrix4(this.bindMatrixInverse)}}),Od.prototype=Object.assign(Object.create(it.prototype),{constructor:Od,isBone:!0});const Xh=new fn,Gp=new fn;class Jh{constructor(a=[],c=[]){this.uuid=Ne.generateUUID(),this.bones=a.slice(0),this.boneInverses=c,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const a=this.bones,c=this.boneInverses;if(this.boneMatrices=new Float32Array(16*a.length),0===c.length)this.calculateInverses();else if(a.length!==c.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let m=0,v=this.bones.length;m<v;m++)this.boneInverses.push(new fn)}}calculateInverses(){this.boneInverses.length=0;for(let a=0,c=this.bones.length;a<c;a++){const m=new fn;this.bones[a]&&m.copy(this.bones[a].matrixWorld).invert(),this.boneInverses.push(m)}}pose(){for(let a=0,c=this.bones.length;a<c;a++){const m=this.bones[a];m&&m.matrixWorld.copy(this.boneInverses[a]).invert()}for(let a=0,c=this.bones.length;a<c;a++){const m=this.bones[a];m&&(m.parent&&m.parent.isBone?(m.matrix.copy(m.parent.matrixWorld).invert(),m.matrix.multiply(m.matrixWorld)):m.matrix.copy(m.matrixWorld),m.matrix.decompose(m.position,m.quaternion,m.scale))}}update(){const a=this.bones,c=this.boneInverses,m=this.boneMatrices,v=this.boneTexture;for(let b=0,C=a.length;b<C;b++)Xh.multiplyMatrices(a[b]?a[b].matrixWorld:Gp,c[b]),Xh.toArray(m,16*b);null!==v&&(v.needsUpdate=!0)}clone(){return new Jh(this.bones,this.boneInverses)}getBoneByName(a){for(let c=0,m=this.bones.length;c<m;c++){const v=this.bones[c];if(v.name===a)return v}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(a,c){this.uuid=a.uuid;for(let m=0,v=a.bones.length;m<v;m++){const b=a.bones[m];let C=c[b];void 0===C&&(console.warn("THREE.Skeleton: No bone found with UUID:",b),C=new Od),this.bones.push(C),this.boneInverses.push((new fn).fromArray(a.boneInverses[m]))}return this.init(),this}toJSON(){const a={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};a.uuid=this.uuid;const c=this.bones,m=this.boneInverses;for(let v=0,b=c.length;v<b;v++)a.bones.push(c[v].uuid),a.boneInverses.push(m[v].toArray());return a}}const Ks=new fn,ef=new fn,Iu=[],Up=new ei;function kd(p,a,c){ei.call(this,p,a),this.instanceMatrix=new _n(new Float32Array(16*c),16),this.instanceColor=null,this.count=c,this.frustumCulled=!1}kd.prototype=Object.assign(Object.create(ei.prototype),{constructor:kd,isInstancedMesh:!0,copy:function(p){return ei.prototype.copy.call(this,p),this.instanceMatrix.copy(p.instanceMatrix),null!==p.instanceColor&&(this.instanceColor=p.instanceColor.clone()),this.count=p.count,this},getColorAt:function(p,a){a.fromArray(this.instanceColor.array,3*p)},getMatrixAt:function(p,a){a.fromArray(this.instanceMatrix.array,16*p)},raycast:function(p,a){const c=this.matrixWorld,m=this.count;if(Up.geometry=this.geometry,Up.material=this.material,void 0!==Up.material)for(let v=0;v<m;v++){this.getMatrixAt(v,Ks),ef.multiplyMatrices(c,Ks),Up.matrixWorld=ef,Up.raycast(p,Iu);for(let b=0,C=Iu.length;b<C;b++){const D=Iu[b];D.instanceId=v,D.object=this,a.push(D)}Iu.length=0}},setColorAt:function(p,a){null===this.instanceColor&&(this.instanceColor=new _n(new Float32Array(3*this.count),3)),a.toArray(this.instanceColor.array,3*p)},setMatrixAt:function(p,a){a.toArray(this.instanceMatrix.array,16*p)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});class Es extends lr{constructor(a){super(),this.type="LineBasicMaterial",this.color=new Jt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.linewidth=a.linewidth,this.linecap=a.linecap,this.linejoin=a.linejoin,this.morphTargets=a.morphTargets,this}}Es.prototype.isLineBasicMaterial=!0;const My=new ee,vo=new ee,tf=new fn,Bl=new ud,Zm=new au;function nl(p=new Wt,a=new Es){it.call(this),this.type="Line",this.geometry=p,this.material=a,this.updateMorphTargets()}nl.prototype=Object.assign(Object.create(it.prototype),{constructor:nl,isLine:!0,copy:function(p){return it.prototype.copy.call(this,p),this.material=p.material,this.geometry=p.geometry,this},computeLineDistances:function(){const p=this.geometry;if(p.isBufferGeometry)if(null===p.index){const a=p.attributes.position,c=[0];for(let m=1,v=a.count;m<v;m++)My.fromBufferAttribute(a,m-1),vo.fromBufferAttribute(a,m),c[m]=c[m-1],c[m]+=My.distanceTo(vo);p.setAttribute("lineDistance",new Qt(c,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else p.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},raycast:function(p,a){const c=this.geometry,m=this.matrixWorld,v=p.params.Line.threshold;if(null===c.boundingSphere&&c.computeBoundingSphere(),Zm.copy(c.boundingSphere),Zm.applyMatrix4(m),Zm.radius+=v,!1===p.ray.intersectsSphere(Zm))return;tf.copy(m).invert(),Bl.copy(p.ray).applyMatrix4(tf);const b=v/((this.scale.x+this.scale.y+this.scale.z)/3),C=b*b,D=new ee,S=new ee,A=new ee,k=new ee,R=this.isLineSegments?2:1;if(c.isBufferGeometry){const O=c.index,V=c.attributes.position;if(null!==O){const z=O.array;for(let W=0,U=z.length-1;W<U;W+=R){const te=z[W+1];if(D.fromBufferAttribute(V,z[W]),S.fromBufferAttribute(V,te),Bl.distanceSqToSegment(D,S,k,A)>C)continue;k.applyMatrix4(this.matrixWorld);const se=p.ray.origin.distanceTo(k);se<p.near||se>p.far||a.push({distance:se,point:A.clone().applyMatrix4(this.matrixWorld),index:W,face:null,faceIndex:null,object:this})}}else for(let z=0,W=V.count-1;z<W;z+=R){if(D.fromBufferAttribute(V,z),S.fromBufferAttribute(V,z+1),Bl.distanceSqToSegment(D,S,k,A)>C)continue;k.applyMatrix4(this.matrixWorld);const B=p.ray.origin.distanceTo(k);B<p.near||B>p.far||a.push({distance:B,point:A.clone().applyMatrix4(this.matrixWorld),index:z,face:null,faceIndex:null,object:this})}}else c.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const p=this.geometry;if(p.isBufferGeometry){const a=p.morphAttributes,c=Object.keys(a);if(c.length>0){const m=a[c[0]];if(void 0!==m){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let v=0,b=m.length;v<b;v++){const C=m[v].name||String(v);this.morphTargetInfluences.push(0),this.morphTargetDictionary[C]=v}}}}else{const a=p.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Km=new ee,Xr=new ee;function Bn(p,a){nl.call(this,p,a),this.type="LineSegments"}Bn.prototype=Object.assign(Object.create(nl.prototype),{constructor:Bn,isLineSegments:!0,computeLineDistances:function(){const p=this.geometry;if(p.isBufferGeometry)if(null===p.index){const a=p.attributes.position,c=[];for(let m=0,v=a.count;m<v;m+=2)Km.fromBufferAttribute(a,m),Xr.fromBufferAttribute(a,m+1),c[m]=0===m?0:c[m-1],c[m+1]=c[m]+Km.distanceTo(Xr);p.setAttribute("lineDistance",new Qt(c,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else p.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}});class Ac extends nl{constructor(a,c){super(a,c),this.type="LineLoop"}}Ac.prototype.isLineLoop=!0;class Vl extends lr{constructor(a){super(),this.type="PointsMaterial",this.color=new Jt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.size=a.size,this.sizeAttenuation=a.sizeAttenuation,this.morphTargets=a.morphTargets,this}}Vl.prototype.isPointsMaterial=!0;const cw=new fn,Qm=new ud,Hp=new au,Jr=new ee;function Tc(p=new Wt,a=new Vl){it.call(this),this.type="Points",this.geometry=p,this.material=a,this.updateMorphTargets()}function Gl(p,a,c,m,v,b,C){const D=Qm.distanceSqToPoint(p);if(D<c){const S=new ee;Qm.closestPointToPoint(p,S),S.applyMatrix4(m);const A=v.ray.origin.distanceTo(S);if(A<v.near||A>v.far)return;b.push({distance:A,distanceToRay:Math.sqrt(D),point:S,index:a,face:null,object:C})}}Tc.prototype=Object.assign(Object.create(it.prototype),{constructor:Tc,isPoints:!0,copy:function(p){return it.prototype.copy.call(this,p),this.material=p.material,this.geometry=p.geometry,this},raycast:function(p,a){const c=this.geometry,m=this.matrixWorld,v=p.params.Points.threshold;if(null===c.boundingSphere&&c.computeBoundingSphere(),Hp.copy(c.boundingSphere),Hp.applyMatrix4(m),Hp.radius+=v,!1===p.ray.intersectsSphere(Hp))return;cw.copy(m).invert(),Qm.copy(p.ray).applyMatrix4(cw);const b=v/((this.scale.x+this.scale.y+this.scale.z)/3),C=b*b;if(c.isBufferGeometry){const D=c.index,A=c.attributes.position;if(null!==D){const k=D.array;for(let R=0,O=k.length;R<O;R++){const L=k[R];Jr.fromBufferAttribute(A,L),Gl(Jr,L,C,m,p,a,this)}}else for(let k=0,R=A.count;k<R;k++)Jr.fromBufferAttribute(A,k),Gl(Jr,k,C,m,p,a,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const p=this.geometry;if(p.isBufferGeometry){const a=p.morphAttributes,c=Object.keys(a);if(c.length>0){const m=a[c[0]];if(void 0!==m){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let v=0,b=m.length;v<b;v++){const C=m[v].name||String(v);this.morphTargetInfluences.push(0),this.morphTargetDictionary[C]=v}}}}else{const a=p.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});class es extends Bi{constructor(a,c,m,v,b,C,D,S,A){super(a,c,m,v,b,C,D,S,A),this.format=void 0!==D?D:lo,this.minFilter=void 0!==C?C:de,this.magFilter=void 0!==b?b:de,this.generateMipmaps=!1;const k=this;"requestVideoFrameCallback"in a&&a.requestVideoFrameCallback(function R(){k.needsUpdate=!0,a.requestVideoFrameCallback(R)})}clone(){return new this.constructor(this.image).copy(this)}update(){const a=this.image;"requestVideoFrameCallback"in a==0&&a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}es.prototype.isVideoTexture=!0;class Xm extends Bi{constructor(a,c,m,v,b,C,D,S,A,k,R,O){super(null,C,D,S,A,k,v,b,R,O),this.image={width:c,height:m},this.mipmaps=a,this.flipY=!1,this.generateMipmaps=!1}}Xm.prototype.isCompressedTexture=!0;class Dy extends Bi{constructor(a,c,m,v,b,C,D,S,A){super(a,c,m,v,b,C,D,S,A),this.needsUpdate=!0}}Dy.prototype.isCanvasTexture=!0;class ko extends Bi{constructor(a,c,m,v,b,C,D,S,A,k){if((k=void 0!==k?k:Va)!==Va&&k!==Ga)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===m&&k===Va&&(m=wi),void 0===m&&k===Ga&&(m=td),super(null,v,b,C,D,S,k,m,A),this.image={width:a,height:c},this.magFilter=void 0!==D?D:Tn,this.minFilter=void 0!==S?S:Tn,this.flipY=!1,this.generateMipmaps=!1}}ko.prototype.isDepthTexture=!0;class Jm extends Wt{constructor(a=1,c=8,m=0,v=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:a,segments:c,thetaStart:m,thetaLength:v},c=Math.max(3,c);const b=[],C=[],D=[],S=[],A=new ee,k=new et;C.push(0,0,0),D.push(0,0,1),S.push(.5,.5);for(let R=0,O=3;R<=c;R++,O+=3){const L=m+R/c*v;A.x=a*Math.cos(L),A.y=a*Math.sin(L),C.push(A.x,A.y,A.z),D.push(0,0,1),k.x=(C[O]/a+1)/2,k.y=(C[O+1]/a+1)/2,S.push(k.x,k.y)}for(let R=1;R<=c;R++)b.push(R,R+1,0);this.setIndex(b),this.setAttribute("position",new Qt(C,3)),this.setAttribute("normal",new Qt(D,3)),this.setAttribute("uv",new Qt(S,2))}}class Bs extends Wt{constructor(a=1,c=1,m=1,v=8,b=1,C=!1,D=0,S=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:a,radiusBottom:c,height:m,radialSegments:v,heightSegments:b,openEnded:C,thetaStart:D,thetaLength:S};const A=this;v=Math.floor(v),b=Math.floor(b);const k=[],R=[],O=[],L=[];let V=0;const z=[],W=m/2;let U=0;function te(X){const se=V,K=new et,he=new ee;let Ie=0;const xe=!0===X?a:c,Pe=!0===X?1:-1;for(let Ke=1;Ke<=v;Ke++)R.push(0,W*Pe,0),O.push(0,Pe,0),L.push(.5,.5),V++;const Be=V;for(let Ke=0;Ke<=v;Ke++){const De=Ke/v*S+D,je=Math.cos(De),st=Math.sin(De);he.x=xe*st,he.y=W*Pe,he.z=xe*je,R.push(he.x,he.y,he.z),O.push(0,Pe,0),K.x=.5*je+.5,K.y=.5*st*Pe+.5,L.push(K.x,K.y),V++}for(let Ke=0;Ke<v;Ke++){const Ue=se+Ke,De=Be+Ke;!0===X?k.push(De,De+1,Ue):k.push(De+1,De,Ue),Ie+=3}A.addGroup(U,Ie,!0===X?1:2),U+=Ie}(function B(){const X=new ee,se=new ee;let K=0;const he=(c-a)/m;for(let Ie=0;Ie<=b;Ie++){const xe=[],Pe=Ie/b,Be=Pe*(c-a)+a;for(let Ke=0;Ke<=v;Ke++){const Ue=Ke/v,De=Ue*S+D,je=Math.sin(De),st=Math.cos(De);se.x=Be*je,se.y=-Pe*m+W,se.z=Be*st,R.push(se.x,se.y,se.z),X.set(je,he,st).normalize(),O.push(X.x,X.y,X.z),L.push(Ue,1-Pe),xe.push(V++)}z.push(xe)}for(let Ie=0;Ie<v;Ie++)for(let xe=0;xe<b;xe++){const Be=z[xe+1][Ie],Ke=z[xe+1][Ie+1],Ue=z[xe][Ie+1];k.push(z[xe][Ie],Be,Ue),k.push(Be,Ke,Ue),K+=6}A.addGroup(U,K,0),U+=K})(),!1===C&&(a>0&&te(!0),c>0&&te(!1)),this.setIndex(k),this.setAttribute("position",new Qt(R,3)),this.setAttribute("normal",new Qt(O,3)),this.setAttribute("uv",new Qt(L,2))}}class nf extends Bs{constructor(a=1,c=1,m=8,v=1,b=!1,C=0,D=2*Math.PI){super(0,a,c,m,v,b,C,D),this.type="ConeGeometry",this.parameters={radius:a,height:c,radialSegments:m,heightSegments:v,openEnded:b,thetaStart:C,thetaLength:D}}}class Ic extends Wt{constructor(a,c,m=1,v=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:a,indices:c,radius:m,detail:v};const b=[],C=[];function S(B,te,X,se){const K=se+1,he=[];for(let Ie=0;Ie<=K;Ie++){he[Ie]=[];const xe=B.clone().lerp(X,Ie/K),Pe=te.clone().lerp(X,Ie/K),Be=K-Ie;for(let Ke=0;Ke<=Be;Ke++)he[Ie][Ke]=0===Ke&&Ie===K?xe:xe.clone().lerp(Pe,Ke/Be)}for(let Ie=0;Ie<K;Ie++)for(let xe=0;xe<2*(K-Ie)-1;xe++){const Pe=Math.floor(xe/2);xe%2==0?(O(he[Ie][Pe+1]),O(he[Ie+1][Pe]),O(he[Ie][Pe])):(O(he[Ie][Pe+1]),O(he[Ie+1][Pe+1]),O(he[Ie+1][Pe]))}}function O(B){b.push(B.x,B.y,B.z)}function L(B,te){const X=3*B;te.x=a[X+0],te.y=a[X+1],te.z=a[X+2]}function z(B,te,X,se){se<0&&1===B.x&&(C[te]=B.x-1),0===X.x&&0===X.z&&(C[te]=se/2/Math.PI+.5)}function W(B){return Math.atan2(B.z,-B.x)}function U(B){return Math.atan2(-B.y,Math.sqrt(B.x*B.x+B.z*B.z))}(function D(B){const te=new ee,X=new ee,se=new ee;for(let K=0;K<c.length;K+=3)L(c[K+0],te),L(c[K+1],X),L(c[K+2],se),S(te,X,se,B)})(v),function A(B){const te=new ee;for(let X=0;X<b.length;X+=3)te.x=b[X+0],te.y=b[X+1],te.z=b[X+2],te.normalize().multiplyScalar(B),b[X+0]=te.x,b[X+1]=te.y,b[X+2]=te.z}(m),function k(){const B=new ee;for(let te=0;te<b.length;te+=3){B.x=b[te+0],B.y=b[te+1],B.z=b[te+2];const X=W(B)/2/Math.PI+.5,se=U(B)/Math.PI+.5;C.push(X,1-se)}(function V(){const B=new ee,te=new ee,X=new ee,se=new ee,K=new et,he=new et,Ie=new et;for(let xe=0,Pe=0;xe<b.length;xe+=9,Pe+=6){B.set(b[xe+0],b[xe+1],b[xe+2]),te.set(b[xe+3],b[xe+4],b[xe+5]),X.set(b[xe+6],b[xe+7],b[xe+8]),K.set(C[Pe+0],C[Pe+1]),he.set(C[Pe+2],C[Pe+3]),Ie.set(C[Pe+4],C[Pe+5]),se.copy(B).add(te).add(X).divideScalar(3);const Be=W(se);z(K,Pe+0,B,Be),z(he,Pe+2,te,Be),z(Ie,Pe+4,X,Be)}})(),function R(){for(let B=0;B<C.length;B+=6){const te=C[B+0],X=C[B+2],se=C[B+4],K=Math.max(te,X,se),he=Math.min(te,X,se);K>.9&&he<.1&&(te<.2&&(C[B+0]+=1),X<.2&&(C[B+2]+=1),se<.2&&(C[B+4]+=1))}}()}(),this.setAttribute("position",new Qt(b,3)),this.setAttribute("normal",new Qt(b.slice(),3)),this.setAttribute("uv",new Qt(C,2)),0===v?this.computeVertexNormals():this.normalizeNormals()}}class e_ extends Ic{constructor(a=1,c=0){const m=(1+Math.sqrt(5))/2,v=1/m;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-v,-m,0,-v,m,0,v,-m,0,v,m,-v,-m,0,-v,m,0,v,-m,0,v,m,0,-m,0,-v,m,0,-v,-m,0,v,m,0,v],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,c),this.type="DodecahedronGeometry",this.parameters={radius:a,detail:c}}}const Ii=new ee,zp=new ee,rf=new ee,sf=new Ti;class jp extends Wt{constructor(a,c){if(super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:c},c=void 0!==c?c:1,!0===a.isGeometry)return void console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const v=Math.pow(10,4),b=Math.cos(Ne.DEG2RAD*c),C=a.getIndex(),D=a.getAttribute("position"),S=C?C.count:D.count,A=[0,0,0],k=["a","b","c"],R=new Array(3),O={},L=[];for(let V=0;V<S;V+=3){C?(A[0]=C.getX(V),A[1]=C.getX(V+1),A[2]=C.getX(V+2)):(A[0]=V,A[1]=V+1,A[2]=V+2);const{a:z,b:W,c:U}=sf;if(z.fromBufferAttribute(D,A[0]),W.fromBufferAttribute(D,A[1]),U.fromBufferAttribute(D,A[2]),sf.getNormal(rf),R[0]=`${Math.round(z.x*v)},${Math.round(z.y*v)},${Math.round(z.z*v)}`,R[1]=`${Math.round(W.x*v)},${Math.round(W.y*v)},${Math.round(W.z*v)}`,R[2]=`${Math.round(U.x*v)},${Math.round(U.y*v)},${Math.round(U.z*v)}`,R[0]!==R[1]&&R[1]!==R[2]&&R[2]!==R[0])for(let B=0;B<3;B++){const te=(B+1)%3,X=R[B],se=R[te],K=sf[k[B]],he=sf[k[te]],Ie=`${X}_${se}`,xe=`${se}_${X}`;xe in O&&O[xe]?(rf.dot(O[xe].normal)<=b&&(L.push(K.x,K.y,K.z),L.push(he.x,he.y,he.z)),O[xe]=null):Ie in O||(O[Ie]={index0:A[B],index1:A[te],normal:rf.clone()})}}for(const V in O)if(O[V]){const{index0:z,index1:W}=O[V];Ii.fromBufferAttribute(D,z),zp.fromBufferAttribute(D,W),L.push(Ii.x,Ii.y,Ii.z),L.push(zp.x,zp.y,zp.z)}this.setAttribute("position",new Qt(L,3))}}function Ey(p,a,c,m,v){let b,C;if(v===function Ry(p,a,c,m){let v=0;for(let b=a,C=c-m;b<c;b+=m)v+=(p[C]-p[b])*(p[b+1]+p[C+1]),C=b;return v}(p,a,c,m)>0)for(b=a;b<c;b+=m)C=Iy(b,p[b],p[b+1],C);else for(b=c-m;b>=a;b-=m)C=Iy(b,p[b],p[b+1],C);return C&&il(C,C.next)&&(Ru(C),C=C.next),C}function Rc(p,a){if(!p)return p;a||(a=p);let m,c=p;do{if(m=!1,c.steiner||!il(c,c.next)&&0!==Ei(c.prev,c,c.next))c=c.next;else{if(Ru(c),c=a=c.prev,c===c.next)break;m=!0}}while(m||c!==a);return a}function Pc(p,a,c,m,v,b,C){if(!p)return;!C&&b&&function Ss(p,a,c,m){let v=p;do{null===v.z&&(v.z=Yp(v.x,v.y,a,c,m)),v.prevZ=v.prev,v.nextZ=v.next,v=v.next}while(v!==p);v.prevZ.nextZ=null,v.prevZ=null,function i_(p){let a,c,m,v,b,C,D,S,A=1;do{for(c=p,p=null,b=null,C=0;c;){for(C++,m=c,D=0,a=0;a<A&&(D++,m=m.nextZ,m);a++);for(S=A;D>0||S>0&&m;)0!==D&&(0===S||!m||c.z<=m.z)?(v=c,c=c.nextZ,D--):(v=m,m=m.nextZ,S--),b?b.nextZ=v:p=v,v.prevZ=b,b=v;c=m}b.nextZ=null,A*=2}while(C>1)}(v)}(p,m,v,b);let S,A,D=p;for(;p.prev!==p.next;)if(S=p.prev,A=p.next,b?uw(p,m,v,b):Sy(p))a.push(S.i/c),a.push(p.i/c),a.push(A.i/c),Ru(p),p=A.next,D=A.next;else if((p=A)===D){C?1===C?Pc(p=t_(Rc(p),a,c),a,c,m,v,b,2):2===C&&Ay(p,a,c,m,v,b):Pc(Rc(p),a,c,m,v,b,1);break}}function Sy(p){const a=p.prev,c=p,m=p.next;if(Ei(a,c,m)>=0)return!1;let v=p.next.next;for(;v!==p.prev;){if(Qs(a.x,a.y,c.x,c.y,m.x,m.y,v.x,v.y)&&Ei(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function uw(p,a,c,m){const v=p.prev,b=p,C=p.next;if(Ei(v,b,C)>=0)return!1;const A=v.x>b.x?v.x>C.x?v.x:C.x:b.x>C.x?b.x:C.x,k=v.y>b.y?v.y>C.y?v.y:C.y:b.y>C.y?b.y:C.y,R=Yp(v.x<b.x?v.x<C.x?v.x:C.x:b.x<C.x?b.x:C.x,v.y<b.y?v.y<C.y?v.y:C.y:b.y<C.y?b.y:C.y,a,c,m),O=Yp(A,k,a,c,m);let L=p.prevZ,V=p.nextZ;for(;L&&L.z>=R&&V&&V.z<=O;){if(L!==p.prev&&L!==p.next&&Qs(v.x,v.y,b.x,b.y,C.x,C.y,L.x,L.y)&&Ei(L.prev,L,L.next)>=0||(L=L.prevZ,V!==p.prev&&V!==p.next&&Qs(v.x,v.y,b.x,b.y,C.x,C.y,V.x,V.y)&&Ei(V.prev,V,V.next)>=0))return!1;V=V.nextZ}for(;L&&L.z>=R;){if(L!==p.prev&&L!==p.next&&Qs(v.x,v.y,b.x,b.y,C.x,C.y,L.x,L.y)&&Ei(L.prev,L,L.next)>=0)return!1;L=L.prevZ}for(;V&&V.z<=O;){if(V!==p.prev&&V!==p.next&&Qs(v.x,v.y,b.x,b.y,C.x,C.y,V.x,V.y)&&Ei(V.prev,V,V.next)>=0)return!1;V=V.nextZ}return!0}function t_(p,a,c){let m=p;do{const v=m.prev,b=m.next.next;!il(v,b)&&Ty(v,m,m.next,b)&&Fd(v,b)&&Fd(b,v)&&(a.push(v.i/c),a.push(m.i/c),a.push(b.i/c),Ru(m),Ru(m.next),m=p=b),m=m.next}while(m!==p);return Rc(m)}function Ay(p,a,c,m,v,b){let C=p;do{let D=C.next.next;for(;D!==C.prev;){if(C.i!==D.i&&r_(C,D)){let S=Ld(C,D);return C=Rc(C,C.next),S=Rc(S,S.next),Pc(C,a,c,m,v,b),void Pc(S,a,c,m,v,b)}D=D.next}C=C.next}while(C!==p)}function RC(p,a){return p.x-a.x}function Wp(p,a){if(a=function n_(p,a){let c=a;const m=p.x,v=p.y;let C,b=-1/0;do{if(v<=c.y&&v>=c.next.y&&c.next.y!==c.y){const O=c.x+(v-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(O<=m&&O>b){if(b=O,O===m){if(v===c.y)return c;if(v===c.next.y)return c.next}C=c.x<c.next.x?c:c.next}}c=c.next}while(c!==a);if(!C)return null;if(m===b)return C;const D=C,S=C.x,A=C.y;let R,k=1/0;c=C;do{m>=c.x&&c.x>=S&&m!==c.x&&Qs(v<A?m:b,v,S,A,v<A?b:m,v,c.x,c.y)&&(R=Math.abs(v-c.y)/(m-c.x),Fd(c,p)&&(R<k||R===k&&(c.x>C.x||c.x===C.x&&uE(C,c)))&&(C=c,k=R)),c=c.next}while(c!==D);return C}(p,a),a){const c=Ld(a,p);Rc(a,a.next),Rc(c,c.next)}}function uE(p,a){return Ei(p.prev,p,a.prev)<0&&Ei(a.next,p,p.next)<0}function Yp(p,a,c,m,v){return(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=32767*(p-c)*v)|p<<8))|p<<4))|p<<2))|p<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-m)*v)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function lf(p){let a=p,c=p;do{(a.x<c.x||a.x===c.x&&a.y<c.y)&&(c=a),a=a.next}while(a!==p);return c}function Qs(p,a,c,m,v,b,C,D){return(v-C)*(a-D)-(p-C)*(b-D)>=0&&(p-C)*(m-D)-(c-C)*(a-D)>=0&&(c-C)*(b-D)-(v-C)*(m-D)>=0}function r_(p,a){return p.next.i!==a.i&&p.prev.i!==a.i&&!function cf(p,a){let c=p;do{if(c.i!==p.i&&c.next.i!==p.i&&c.i!==a.i&&c.next.i!==a.i&&Ty(c,c.next,p,a))return!0;c=c.next}while(c!==p);return!1}(p,a)&&(Fd(p,a)&&Fd(a,p)&&function o_(p,a){let c=p,m=!1;const v=(p.x+a.x)/2,b=(p.y+a.y)/2;do{c.y>b!=c.next.y>b&&c.next.y!==c.y&&v<(c.next.x-c.x)*(b-c.y)/(c.next.y-c.y)+c.x&&(m=!m),c=c.next}while(c!==p);return m}(p,a)&&(Ei(p.prev,p,a.prev)||Ei(p,a.prev,a))||il(p,a)&&Ei(p.prev,p,p.next)>0&&Ei(a.prev,a,a.next)>0)}function Ei(p,a,c){return(a.y-p.y)*(c.x-a.x)-(a.x-p.x)*(c.y-a.y)}function il(p,a){return p.x===a.x&&p.y===a.y}function Ty(p,a,c,m){const v=s_(Ei(p,a,c)),b=s_(Ei(p,a,m)),C=s_(Ei(c,m,p)),D=s_(Ei(c,m,a));return!!(v!==b&&C!==D||0===v&&qp(p,c,a)||0===b&&qp(p,m,a)||0===C&&qp(c,p,m)||0===D&&qp(c,a,m))}function qp(p,a,c){return a.x<=Math.max(p.x,c.x)&&a.x>=Math.min(p.x,c.x)&&a.y<=Math.max(p.y,c.y)&&a.y>=Math.min(p.y,c.y)}function s_(p){return p>0?1:p<0?-1:0}function Fd(p,a){return Ei(p.prev,p,p.next)<0?Ei(p,a,p.next)>=0&&Ei(p,p.prev,a)>=0:Ei(p,a,p.prev)<0||Ei(p,p.next,a)<0}function Ld(p,a){const c=new $p(p.i,p.x,p.y),m=new $p(a.i,a.x,a.y),v=p.next,b=a.prev;return p.next=a,a.prev=p,c.next=v,v.prev=c,m.next=c,c.prev=m,b.next=m,m.prev=b,m}function Iy(p,a,c,m){const v=new $p(p,a,c);return m?(v.next=m.next,v.prev=m,m.next.prev=v,m.next=v):(v.prev=v,v.next=v),v}function Ru(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function $p(p,a,c){this.i=p,this.x=a,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const Ul={area:function(p){const a=p.length;let c=0;for(let m=a-1,v=0;v<a;m=v++)c+=p[m].x*p[v].y-p[v].x*p[m].y;return.5*c},isClockWise:function(p){return Ul.area(p)<0},triangulateShape:function(p,a){const c=[],m=[],v=[];hw(p),Oc(c,p);let b=p.length;a.forEach(hw);for(let D=0;D<a.length;D++)m.push(b),b+=a[D].length,Oc(c,a[D]);const C=function(p,a,c){c=c||2;const m=a&&a.length,v=m?a[0]*c:p.length;let b=Ey(p,0,v,c,!0);const C=[];if(!b||b.next===b.prev)return C;let D,S,A,k,R,O,L;if(m&&(b=function dw(p,a,c,m){const v=[];let b,C,D,S,A;for(b=0,C=a.length;b<C;b++)D=a[b]*m,S=b<C-1?a[b+1]*m:p.length,A=Ey(p,D,S,m,!1),A===A.next&&(A.steiner=!0),v.push(lf(A));for(v.sort(RC),b=0;b<v.length;b++)Wp(v[b],c),c=Rc(c,c.next);return c}(p,a,b,c)),p.length>80*c){D=A=p[0],S=k=p[1];for(let V=c;V<v;V+=c)R=p[V],O=p[V+1],R<D&&(D=R),O<S&&(S=O),R>A&&(A=R),O>k&&(k=O);L=Math.max(A-D,k-S),L=0!==L?1/L:0}return Pc(b,C,c,D,S,L),C}(c,m);for(let D=0;D<C.length;D+=3)v.push(C.slice(D,D+3));return v}};function hw(p){const a=p.length;a>2&&p[a-1].equals(p[0])&&p.pop()}function Oc(p,a){for(let c=0;c<a.length;c++)p.push(a[c].x),p.push(a[c].y)}class Fo extends Wt{constructor(a,c){super(),this.type="ExtrudeGeometry",this.parameters={shapes:a,options:c},a=Array.isArray(a)?a:[a];const m=this,v=[],b=[];for(let D=0,S=a.length;D<S;D++)C(a[D]);function C(D){const S=[],A=void 0!==c.curveSegments?c.curveSegments:12,k=void 0!==c.steps?c.steps:1;let R=void 0!==c.depth?c.depth:100,O=void 0===c.bevelEnabled||c.bevelEnabled,L=void 0!==c.bevelThickness?c.bevelThickness:6,V=void 0!==c.bevelSize?c.bevelSize:L-2,z=void 0!==c.bevelOffset?c.bevelOffset:0,W=void 0!==c.bevelSegments?c.bevelSegments:3;const U=c.extrudePath,B=void 0!==c.UVGenerator?c.UVGenerator:PC;void 0!==c.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),R=c.amount);let te,se,K,he,Ie,X=!1;U&&(te=U.getSpacedPoints(k),X=!0,O=!1,se=U.computeFrenetFrames(k,!1),K=new ee,he=new ee,Ie=new ee),O||(W=0,L=0,V=0,z=0);const xe=D.extractPoints(A);let Pe=xe.shape;const Be=xe.holes;if(!Ul.isClockWise(Pe)){Pe=Pe.reverse();for(let yt=0,Pt=Be.length;yt<Pt;yt++){const Lt=Be[yt];Ul.isClockWise(Lt)&&(Be[yt]=Lt.reverse())}}const Ue=Ul.triangulateShape(Pe,Be),De=Pe;for(let yt=0,Pt=Be.length;yt<Pt;yt++)Pe=Pe.concat(Be[yt]);function je(yt,Pt,Lt){return Pt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Pt.clone().multiplyScalar(Lt).add(yt)}const st=Pe.length,Ct=Ue.length;function jt(yt,Pt,Lt){let un,en,le;const oe=yt.x-Pt.x,pt=yt.y-Pt.y,vt=Lt.x-yt.x,Ce=Lt.y-yt.y,xt=oe*oe+pt*pt;if(Math.abs(oe*Ce-pt*vt)>Number.EPSILON){const rn=Math.sqrt(xt),Mt=Math.sqrt(vt*vt+Ce*Ce),Mn=Pt.x-pt/rn,bn=Pt.y+oe/rn,wn=((Lt.x-Ce/Mt-Mn)*Ce-(Lt.y+vt/Mt-bn)*vt)/(oe*Ce-pt*vt);un=Mn+oe*wn-yt.x,en=bn+pt*wn-yt.y;const pr=un*un+en*en;if(pr<=2)return new et(un,en);le=Math.sqrt(pr/2)}else{let rn=!1;oe>Number.EPSILON?vt>Number.EPSILON&&(rn=!0):oe<-Number.EPSILON?vt<-Number.EPSILON&&(rn=!0):Math.sign(pt)===Math.sign(Ce)&&(rn=!0),rn?(un=-pt,en=oe,le=Math.sqrt(xt)):(un=oe,en=pt,le=Math.sqrt(xt/2))}return new et(un/le,en/le)}const qt=[];for(let yt=0,Pt=De.length,Lt=Pt-1,un=yt+1;yt<Pt;yt++,Lt++,un++)Lt===Pt&&(Lt=0),un===Pt&&(un=0),qt[yt]=jt(De[yt],De[Lt],De[un]);const an=[];let nn,Wn=qt.concat();for(let yt=0,Pt=Be.length;yt<Pt;yt++){const Lt=Be[yt];nn=[];for(let un=0,en=Lt.length,le=en-1,oe=un+1;un<en;un++,le++,oe++)le===en&&(le=0),oe===en&&(oe=0),nn[un]=jt(Lt[un],Lt[le],Lt[oe]);an.push(nn),Wn=Wn.concat(nn)}for(let yt=0;yt<W;yt++){const Pt=yt/W,Lt=L*Math.cos(Pt*Math.PI/2),un=V*Math.sin(Pt*Math.PI/2)+z;for(let en=0,le=De.length;en<le;en++){const oe=je(De[en],qt[en],un);dr(oe.x,oe.y,-Lt)}for(let en=0,le=Be.length;en<le;en++){const oe=Be[en];nn=an[en];for(let pt=0,vt=oe.length;pt<vt;pt++){const Ce=je(oe[pt],nn[pt],un);dr(Ce.x,Ce.y,-Lt)}}}const Rn=V+z;for(let yt=0;yt<st;yt++){const Pt=O?je(Pe[yt],Wn[yt],Rn):Pe[yt];X?(he.copy(se.normals[0]).multiplyScalar(Pt.x),K.copy(se.binormals[0]).multiplyScalar(Pt.y),Ie.copy(te[0]).add(he).add(K),dr(Ie.x,Ie.y,Ie.z)):dr(Pt.x,Pt.y,0)}for(let yt=1;yt<=k;yt++)for(let Pt=0;Pt<st;Pt++){const Lt=O?je(Pe[Pt],Wn[Pt],Rn):Pe[Pt];X?(he.copy(se.normals[yt]).multiplyScalar(Lt.x),K.copy(se.binormals[yt]).multiplyScalar(Lt.y),Ie.copy(te[yt]).add(he).add(K),dr(Ie.x,Ie.y,Ie.z)):dr(Lt.x,Lt.y,R/k*yt)}for(let yt=W-1;yt>=0;yt--){const Pt=yt/W,Lt=L*Math.cos(Pt*Math.PI/2),un=V*Math.sin(Pt*Math.PI/2)+z;for(let en=0,le=De.length;en<le;en++){const oe=je(De[en],qt[en],un);dr(oe.x,oe.y,R+Lt)}for(let en=0,le=Be.length;en<le;en++){const oe=Be[en];nn=an[en];for(let pt=0,vt=oe.length;pt<vt;pt++){const Ce=je(oe[pt],nn[pt],un);X?dr(Ce.x,Ce.y+te[k-1].y,te[k-1].x+Lt):dr(Ce.x,Ce.y,R+Lt)}}}function dt(yt,Pt){let Lt=yt.length;for(;--Lt>=0;){const un=Lt;let en=Lt-1;en<0&&(en=yt.length-1);for(let le=0,oe=k+2*W;le<oe;le++){const pt=st*le,vt=st*(le+1);di(Pt+un+pt,Pt+en+pt,Pt+en+vt,Pt+un+vt)}}}function dr(yt,Pt,Lt){S.push(yt),S.push(Pt),S.push(Lt)}function gi(yt,Pt,Lt){Gn(yt),Gn(Pt),Gn(Lt);const un=v.length/3,en=B.generateTopUV(m,v,un-3,un-2,un-1);mi(en[0]),mi(en[1]),mi(en[2])}function di(yt,Pt,Lt,un){Gn(yt),Gn(Pt),Gn(un),Gn(Pt),Gn(Lt),Gn(un);const en=v.length/3,le=B.generateSideWallUV(m,v,en-6,en-3,en-2,en-1);mi(le[0]),mi(le[1]),mi(le[3]),mi(le[1]),mi(le[2]),mi(le[3])}function Gn(yt){v.push(S[3*yt+0]),v.push(S[3*yt+1]),v.push(S[3*yt+2])}function mi(yt){b.push(yt.x),b.push(yt.y)}(function Hi(){const yt=v.length/3;if(O){let Pt=0,Lt=st*Pt;for(let un=0;un<Ct;un++){const en=Ue[un];gi(en[2]+Lt,en[1]+Lt,en[0]+Lt)}Pt=k+2*W,Lt=st*Pt;for(let un=0;un<Ct;un++){const en=Ue[un];gi(en[0]+Lt,en[1]+Lt,en[2]+Lt)}}else{for(let Pt=0;Pt<Ct;Pt++){const Lt=Ue[Pt];gi(Lt[2],Lt[1],Lt[0])}for(let Pt=0;Pt<Ct;Pt++){const Lt=Ue[Pt];gi(Lt[0]+st*k,Lt[1]+st*k,Lt[2]+st*k)}}m.addGroup(yt,v.length/3-yt,0)})(),function yi(){const yt=v.length/3;let Pt=0;dt(De,Pt),Pt+=De.length;for(let Lt=0,un=Be.length;Lt<un;Lt++){const en=Be[Lt];dt(en,Pt),Pt+=en.length}m.addGroup(yt,v.length/3-yt,1)}()}this.setAttribute("position",new Qt(v,3)),this.setAttribute("uv",new Qt(b,2)),this.computeVertexNormals()}toJSON(){const a=Wt.prototype.toJSON.call(this);return function fw(p,a,c){if(c.shapes=[],Array.isArray(p))for(let m=0,v=p.length;m<v;m++)c.shapes.push(p[m].uuid);else c.shapes.push(p.uuid);return void 0!==a.extrudePath&&(c.options.extrudePath=a.extrudePath.toJSON()),c}(this.parameters.shapes,this.parameters.options,a)}}const PC={generateTopUV:function(p,a,c,m,v){const D=a[3*m],S=a[3*m+1],A=a[3*v],k=a[3*v+1];return[new et(a[3*c],a[3*c+1]),new et(D,S),new et(A,k)]},generateSideWallUV:function(p,a,c,m,v,b){const C=a[3*c],D=a[3*c+1],S=a[3*c+2],A=a[3*m],k=a[3*m+1],R=a[3*m+2],O=a[3*v],L=a[3*v+1],V=a[3*v+2],z=a[3*b],W=a[3*b+1],U=a[3*b+2];return Math.abs(D-k)<.01?[new et(C,1-S),new et(A,1-R),new et(O,1-V),new et(z,1-U)]:[new et(D,1-S),new et(k,1-R),new et(L,1-V),new et(W,1-U)]}};class kc extends Ic{constructor(a=1,c=0){const m=(1+Math.sqrt(5))/2;super([-1,m,0,1,m,0,-1,-m,0,1,-m,0,0,-1,m,0,1,m,0,-1,-m,0,1,-m,m,0,-1,m,0,1,-m,0,-1,-m,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,c),this.type="IcosahedronGeometry",this.parameters={radius:a,detail:c}}}class uf extends Wt{constructor(a,c=12,m=0,v=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:a,segments:c,phiStart:m,phiLength:v},c=Math.floor(c),v=Ne.clamp(v,0,2*Math.PI);const b=[],C=[],D=[],S=1/c,A=new ee,k=new et;for(let R=0;R<=c;R++){const O=m+R*S*v,L=Math.sin(O),V=Math.cos(O);for(let z=0;z<=a.length-1;z++)A.x=a[z].x*L,A.y=a[z].y,A.z=a[z].x*V,C.push(A.x,A.y,A.z),k.x=R/c,k.y=z/(a.length-1),D.push(k.x,k.y)}for(let R=0;R<c;R++)for(let O=0;O<a.length-1;O++){const L=O+R*a.length,z=L+a.length,W=L+a.length+1,U=L+1;b.push(L,z,U),b.push(z,W,U)}if(this.setIndex(b),this.setAttribute("position",new Qt(C,3)),this.setAttribute("uv",new Qt(D,2)),this.computeVertexNormals(),v===2*Math.PI){const R=this.attributes.normal.array,O=new ee,L=new ee,V=new ee,z=c*a.length*3;for(let W=0,U=0;W<a.length;W++,U+=3)O.x=R[U+0],O.y=R[U+1],O.z=R[U+2],L.x=R[z+U+0],L.y=R[z+U+1],L.z=R[z+U+2],V.addVectors(O,L).normalize(),R[U+0]=R[z+U+0]=V.x,R[U+1]=R[z+U+1]=V.y,R[U+2]=R[z+U+2]=V.z}}}class yo extends Ic{constructor(a=1,c=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,c),this.type="OctahedronGeometry",this.parameters={radius:a,detail:c}}}function Nd(p,a,c){Wt.call(this),this.type="ParametricGeometry",this.parameters={func:p,slices:a,stacks:c};const m=[],v=[],b=[],C=[],D=1e-5,S=new ee,A=new ee,k=new ee,R=new ee,O=new ee;p.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const L=a+1;for(let V=0;V<=c;V++){const z=V/c;for(let W=0;W<=a;W++){const U=W/a;p(U,z,A),v.push(A.x,A.y,A.z),U-D>=0?(p(U-D,z,k),R.subVectors(A,k)):(p(U+D,z,k),R.subVectors(k,A)),z-D>=0?(p(U,z-D,k),O.subVectors(A,k)):(p(U,z+D,k),O.subVectors(k,A)),S.crossVectors(R,O).normalize(),b.push(S.x,S.y,S.z),C.push(U,z)}}for(let V=0;V<c;V++)for(let z=0;z<a;z++){const U=V*L+z+1,B=(V+1)*L+z+1,te=(V+1)*L+z;m.push(V*L+z,U,te),m.push(U,B,te)}this.setIndex(m),this.setAttribute("position",new Qt(v,3)),this.setAttribute("normal",new Qt(b,3)),this.setAttribute("uv",new Qt(C,2))}(Nd.prototype=Object.create(Wt.prototype)).constructor=Nd;class Hl extends Wt{constructor(a=.5,c=1,m=8,v=1,b=0,C=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:a,outerRadius:c,thetaSegments:m,phiSegments:v,thetaStart:b,thetaLength:C},m=Math.max(3,m);const D=[],S=[],A=[],k=[];let R=a;const O=(c-a)/(v=Math.max(1,v)),L=new ee,V=new et;for(let z=0;z<=v;z++){for(let W=0;W<=m;W++){const U=b+W/m*C;L.x=R*Math.cos(U),L.y=R*Math.sin(U),S.push(L.x,L.y,L.z),A.push(0,0,1),V.x=(L.x/c+1)/2,V.y=(L.y/c+1)/2,k.push(V.x,V.y)}R+=O}for(let z=0;z<v;z++){const W=z*(m+1);for(let U=0;U<m;U++){const B=U+W,X=B+m+1,se=B+m+2,K=B+1;D.push(B,X,K),D.push(X,se,K)}}this.setIndex(D),this.setAttribute("position",new Qt(S,3)),this.setAttribute("normal",new Qt(A,3)),this.setAttribute("uv",new Qt(k,2))}}class oa extends Wt{constructor(a,c=12){super(),this.type="ShapeGeometry",this.parameters={shapes:a,curveSegments:c};const m=[],v=[],b=[],C=[];let D=0,S=0;if(!1===Array.isArray(a))A(a);else for(let k=0;k<a.length;k++)A(a[k]),this.addGroup(D,S,k),D+=S,S=0;function A(k){const R=v.length/3,O=k.extractPoints(c);let L=O.shape;const V=O.holes;!1===Ul.isClockWise(L)&&(L=L.reverse());for(let W=0,U=V.length;W<U;W++){const B=V[W];!0===Ul.isClockWise(B)&&(V[W]=B.reverse())}const z=Ul.triangulateShape(L,V);for(let W=0,U=V.length;W<U;W++)L=L.concat(V[W]);for(let W=0,U=L.length;W<U;W++){const B=L[W];v.push(B.x,B.y,0),b.push(0,0,1),C.push(B.x,B.y)}for(let W=0,U=z.length;W<U;W++){const B=z[W];m.push(B[0]+R,B[1]+R,B[2]+R),S+=3}}this.setIndex(m),this.setAttribute("position",new Qt(v,3)),this.setAttribute("normal",new Qt(b,3)),this.setAttribute("uv",new Qt(C,2))}toJSON(){const a=Wt.prototype.toJSON.call(this);return function OC(p,a){if(a.shapes=[],Array.isArray(p))for(let c=0,m=p.length;c<m;c++)a.shapes.push(p[c].uuid);else a.shapes.push(p.uuid);return a}(this.parameters.shapes,a)}}class Vs extends Wt{constructor(a=1,c=8,m=6,v=0,b=2*Math.PI,C=0,D=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:a,widthSegments:c,heightSegments:m,phiStart:v,phiLength:b,thetaStart:C,thetaLength:D},c=Math.max(3,Math.floor(c)),m=Math.max(2,Math.floor(m));const S=Math.min(C+D,Math.PI);let A=0;const k=[],R=new ee,O=new ee,L=[],V=[],z=[],W=[];for(let U=0;U<=m;U++){const B=[],te=U/m;let X=0;0==U&&0==C?X=.5/c:U==m&&S==Math.PI&&(X=-.5/c);for(let se=0;se<=c;se++){const K=se/c;R.x=-a*Math.cos(v+K*b)*Math.sin(C+te*D),R.y=a*Math.cos(C+te*D),R.z=a*Math.sin(v+K*b)*Math.sin(C+te*D),V.push(R.x,R.y,R.z),O.copy(R).normalize(),z.push(O.x,O.y,O.z),W.push(K+X,1-te),B.push(A++)}k.push(B)}for(let U=0;U<m;U++)for(let B=0;B<c;B++){const te=k[U][B+1],X=k[U][B],se=k[U+1][B],K=k[U+1][B+1];(0!==U||C>0)&&L.push(te,X,K),(U!==m-1||S<Math.PI)&&L.push(X,se,K)}this.setIndex(L),this.setAttribute("position",new Qt(V,3)),this.setAttribute("normal",new Qt(z,3)),this.setAttribute("uv",new Qt(W,2))}}class rl extends Ic{constructor(a=1,c=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,c),this.type="TetrahedronGeometry",this.parameters={radius:a,detail:c}}}class ii extends Fo{constructor(a,c={}){const m=c.font;if(!m||!m.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Wt;const v=m.generateShapes(a,c.size);c.depth=void 0!==c.height?c.height:50,void 0===c.bevelThickness&&(c.bevelThickness=10),void 0===c.bevelSize&&(c.bevelSize=8),void 0===c.bevelEnabled&&(c.bevelEnabled=!1),super(v,c),this.type="TextGeometry"}}class Gr extends Wt{constructor(a=1,c=.4,m=8,v=6,b=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:a,tube:c,radialSegments:m,tubularSegments:v,arc:b},m=Math.floor(m),v=Math.floor(v);const C=[],D=[],S=[],A=[],k=new ee,R=new ee,O=new ee;for(let L=0;L<=m;L++)for(let V=0;V<=v;V++){const z=V/v*b,W=L/m*Math.PI*2;R.x=(a+c*Math.cos(W))*Math.cos(z),R.y=(a+c*Math.cos(W))*Math.sin(z),R.z=c*Math.sin(W),D.push(R.x,R.y,R.z),k.x=a*Math.cos(z),k.y=a*Math.sin(z),O.subVectors(R,k).normalize(),S.push(O.x,O.y,O.z),A.push(V/v),A.push(L/m)}for(let L=1;L<=m;L++)for(let V=1;V<=v;V++){const W=(v+1)*(L-1)+V-1,U=(v+1)*(L-1)+V,B=(v+1)*L+V;C.push((v+1)*L+V-1,W,B),C.push(W,U,B)}this.setIndex(C),this.setAttribute("position",new Qt(D,3)),this.setAttribute("normal",new Qt(S,3)),this.setAttribute("uv",new Qt(A,2))}}class Zp extends Wt{constructor(a=1,c=.4,m=64,v=8,b=2,C=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:a,tube:c,tubularSegments:m,radialSegments:v,p:b,q:C},m=Math.floor(m),v=Math.floor(v);const D=[],S=[],A=[],k=[],R=new ee,O=new ee,L=new ee,V=new ee,z=new ee,W=new ee,U=new ee;for(let te=0;te<=m;++te){const X=te/m*b*Math.PI*2;B(X,b,C,a,L),B(X+.01,b,C,a,V),W.subVectors(V,L),U.addVectors(V,L),z.crossVectors(W,U),U.crossVectors(z,W),z.normalize(),U.normalize();for(let se=0;se<=v;++se){const K=se/v*Math.PI*2,he=-c*Math.cos(K),Ie=c*Math.sin(K);R.x=L.x+(he*U.x+Ie*z.x),R.y=L.y+(he*U.y+Ie*z.y),R.z=L.z+(he*U.z+Ie*z.z),S.push(R.x,R.y,R.z),O.subVectors(R,L).normalize(),A.push(O.x,O.y,O.z),k.push(te/m),k.push(se/v)}}for(let te=1;te<=m;te++)for(let X=1;X<=v;X++){const K=(v+1)*te+(X-1),he=(v+1)*te+X,Ie=(v+1)*(te-1)+X;D.push((v+1)*(te-1)+(X-1),K,Ie),D.push(K,he,Ie)}function B(te,X,se,K,he){const Ie=Math.cos(te),xe=Math.sin(te),Pe=se/X*te,Be=Math.cos(Pe);he.x=K*(2+Be)*.5*Ie,he.y=K*(2+Be)*xe*.5,he.z=K*Math.sin(Pe)*.5}this.setIndex(D),this.setAttribute("position",new Qt(S,3)),this.setAttribute("normal",new Qt(A,3)),this.setAttribute("uv",new Qt(k,2))}}class Kp extends Wt{constructor(a,c=64,m=1,v=8,b=!1){super(),this.type="TubeGeometry",this.parameters={path:a,tubularSegments:c,radius:m,radialSegments:v,closed:b};const C=a.computeFrenetFrames(c,b);this.tangents=C.tangents,this.normals=C.normals,this.binormals=C.binormals;const D=new ee,S=new ee,A=new et;let k=new ee;const R=[],O=[],L=[],V=[];function W(te){k=a.getPointAt(te/c,k);const X=C.normals[te],se=C.binormals[te];for(let K=0;K<=v;K++){const he=K/v*Math.PI*2,Ie=Math.sin(he),xe=-Math.cos(he);S.x=xe*X.x+Ie*se.x,S.y=xe*X.y+Ie*se.y,S.z=xe*X.z+Ie*se.z,S.normalize(),O.push(S.x,S.y,S.z),D.x=k.x+m*S.x,D.y=k.y+m*S.y,D.z=k.z+m*S.z,R.push(D.x,D.y,D.z)}}(function z(){for(let te=0;te<c;te++)W(te);W(!1===b?c:0),function B(){for(let te=0;te<=c;te++)for(let X=0;X<=v;X++)A.x=te/c,A.y=X/v,L.push(A.x,A.y)}(),function U(){for(let te=1;te<=c;te++)for(let X=1;X<=v;X++){const K=(v+1)*te+(X-1),he=(v+1)*te+X,Ie=(v+1)*(te-1)+X;V.push((v+1)*(te-1)+(X-1),K,Ie),V.push(K,he,Ie)}}()})(),this.setIndex(V),this.setAttribute("position",new Qt(R,3)),this.setAttribute("normal",new Qt(O,3)),this.setAttribute("uv",new Qt(L,2))}toJSON(){const a=Wt.prototype.toJSON.call(this);return a.path=this.parameters.path.toJSON(),a}}class cr extends Wt{constructor(a){if(super(),this.type="WireframeGeometry",!0===a.isGeometry)return void console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const c=[],m=[0,0],v={},b=new ee;if(null!==a.index){const C=a.attributes.position,D=a.index;let S=a.groups;0===S.length&&(S=[{start:0,count:D.count,materialIndex:0}]);for(let A=0,k=S.length;A<k;++A){const R=S[A],O=R.start;for(let V=O,z=O+R.count;V<z;V+=3)for(let W=0;W<3;W++){const U=D.getX(V+W),B=D.getX(V+(W+1)%3);m[0]=Math.min(U,B),m[1]=Math.max(U,B);const te=m[0]+","+m[1];void 0===v[te]&&(v[te]={index1:m[0],index2:m[1]})}}for(const A in v){const k=v[A];b.fromBufferAttribute(C,k.index1),c.push(b.x,b.y,b.z),b.fromBufferAttribute(C,k.index2),c.push(b.x,b.y,b.z)}}else{const C=a.attributes.position;for(let D=0,S=C.count/3;D<S;D++)for(let A=0;A<3;A++)b.fromBufferAttribute(C,3*D+A),c.push(b.x,b.y,b.z),b.fromBufferAttribute(C,3*D+(A+1)%3),c.push(b.x,b.y,b.z)}this.setAttribute("position",new Qt(c,3))}}var ur=Object.freeze({__proto__:null,BoxGeometry:hu,BoxBufferGeometry:hu,CircleGeometry:Jm,CircleBufferGeometry:Jm,ConeGeometry:nf,ConeBufferGeometry:nf,CylinderGeometry:Bs,CylinderBufferGeometry:Bs,DodecahedronGeometry:e_,DodecahedronBufferGeometry:e_,EdgesGeometry:jp,ExtrudeGeometry:Fo,ExtrudeBufferGeometry:Fo,IcosahedronGeometry:kc,IcosahedronBufferGeometry:kc,LatheGeometry:uf,LatheBufferGeometry:uf,OctahedronGeometry:yo,OctahedronBufferGeometry:yo,ParametricGeometry:Nd,ParametricBufferGeometry:Nd,PlaneGeometry:_d,PlaneBufferGeometry:_d,PolyhedronGeometry:Ic,PolyhedronBufferGeometry:Ic,RingGeometry:Hl,RingBufferGeometry:Hl,ShapeGeometry:oa,ShapeBufferGeometry:oa,SphereGeometry:Vs,SphereBufferGeometry:Vs,TetrahedronGeometry:rl,TetrahedronBufferGeometry:rl,TextGeometry:ii,TextBufferGeometry:ii,TorusGeometry:Gr,TorusBufferGeometry:Gr,TorusKnotGeometry:Zp,TorusKnotBufferGeometry:Zp,TubeGeometry:Kp,TubeBufferGeometry:Kp,WireframeGeometry:cr});class Xs extends lr{constructor(a){super(),this.type="ShadowMaterial",this.color=new Jt(0),this.transparent=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this}}Xs.prototype.isShadowMaterial=!0;class Ir extends Io{constructor(a){super(a),this.type="RawShaderMaterial"}}function Rr(p){lr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Jt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yh,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(p)}function Lo(p){Rr.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new et(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(a){this.reflectivity=Ne.clamp(2.5*(a-1)/(a+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(p)}Ir.prototype.isRawShaderMaterial=!0,(Rr.prototype=Object.create(lr.prototype)).constructor=Rr,Rr.prototype.isMeshStandardMaterial=!0,Rr.prototype.copy=function(p){return lr.prototype.copy.call(this,p),this.defines={STANDARD:""},this.color.copy(p.color),this.roughness=p.roughness,this.metalness=p.metalness,this.map=p.map,this.lightMap=p.lightMap,this.lightMapIntensity=p.lightMapIntensity,this.aoMap=p.aoMap,this.aoMapIntensity=p.aoMapIntensity,this.emissive.copy(p.emissive),this.emissiveMap=p.emissiveMap,this.emissiveIntensity=p.emissiveIntensity,this.bumpMap=p.bumpMap,this.bumpScale=p.bumpScale,this.normalMap=p.normalMap,this.normalMapType=p.normalMapType,this.normalScale.copy(p.normalScale),this.displacementMap=p.displacementMap,this.displacementScale=p.displacementScale,this.displacementBias=p.displacementBias,this.roughnessMap=p.roughnessMap,this.metalnessMap=p.metalnessMap,this.alphaMap=p.alphaMap,this.envMap=p.envMap,this.envMapIntensity=p.envMapIntensity,this.refractionRatio=p.refractionRatio,this.wireframe=p.wireframe,this.wireframeLinewidth=p.wireframeLinewidth,this.wireframeLinecap=p.wireframeLinecap,this.wireframeLinejoin=p.wireframeLinejoin,this.skinning=p.skinning,this.morphTargets=p.morphTargets,this.morphNormals=p.morphNormals,this.flatShading=p.flatShading,this.vertexTangents=p.vertexTangents,this},(Lo.prototype=Object.create(Rr.prototype)).constructor=Lo,Lo.prototype.isMeshPhysicalMaterial=!0,Lo.prototype.copy=function(p){return Rr.prototype.copy.call(this,p),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=p.clearcoat,this.clearcoatMap=p.clearcoatMap,this.clearcoatRoughness=p.clearcoatRoughness,this.clearcoatRoughnessMap=p.clearcoatRoughnessMap,this.clearcoatNormalMap=p.clearcoatNormalMap,this.clearcoatNormalScale.copy(p.clearcoatNormalScale),this.reflectivity=p.reflectivity,this.sheen=p.sheen?(this.sheen||new Jt).copy(p.sheen):null,this.transmission=p.transmission,this.transmissionMap=p.transmissionMap,this};class aa extends lr{constructor(a){super(),this.type="MeshPhongMaterial",this.color=new Jt(16777215),this.specular=new Jt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yh,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=La,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this.flatShading=a.flatShading,this}}aa.prototype.isMeshPhongMaterial=!0;class Bd extends lr{constructor(a){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Jt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yh,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.gradientMap=a.gradientMap,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this}}Bd.prototype.isMeshToonMaterial=!0;class Fc extends lr{constructor(a){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yh,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(a)}copy(a){return super.copy(a),this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this.flatShading=a.flatShading,this}}Fc.prototype.isMeshNormalMaterial=!0;class Py extends lr{constructor(a){super(),this.type="MeshLambertMaterial",this.color=new Jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=La,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this}}Py.prototype.isMeshLambertMaterial=!0;class a_ extends lr{constructor(a){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Jt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yh,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(a)}copy(a){return super.copy(a),this.defines={MATCAP:""},this.color.copy(a.color),this.matcap=a.matcap,this.map=a.map,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this.flatShading=a.flatShading,this}}a_.prototype.isMeshMatcapMaterial=!0;class Oy extends Es{constructor(a){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(a)}copy(a){return super.copy(a),this.scale=a.scale,this.dashSize=a.dashSize,this.gapSize=a.gapSize,this}}Oy.prototype.isLineDashedMaterial=!0;var bo=Object.freeze({__proto__:null,ShadowMaterial:Xs,SpriteMaterial:Zh,RawShaderMaterial:Ir,ShaderMaterial:Io,PointsMaterial:Vl,MeshPhysicalMaterial:Lo,MeshStandardMaterial:Rr,MeshPhongMaterial:aa,MeshToonMaterial:Bd,MeshNormalMaterial:Fc,MeshLambertMaterial:Py,MeshDepthMaterial:Td,MeshDistanceMaterial:Id,MeshBasicMaterial:Ut,MeshMatcapMaterial:a_,LineDashedMaterial:Oy,LineBasicMaterial:Es,Material:lr});const ct={arraySlice:function(p,a,c){return ct.isTypedArray(p)?new p.constructor(p.subarray(a,void 0!==c?c:p.length)):p.slice(a,c)},convertArray:function(p,a,c){return!p||!c&&p.constructor===a?p:"number"==typeof a.BYTES_PER_ELEMENT?new a(p):Array.prototype.slice.call(p)},isTypedArray:function(p){return ArrayBuffer.isView(p)&&!(p instanceof DataView)},getKeyframeOrder:function(p){const c=p.length,m=new Array(c);for(let v=0;v!==c;++v)m[v]=v;return m.sort(function a(v,b){return p[v]-p[b]}),m},sortedArray:function(p,a,c){const m=p.length,v=new p.constructor(m);for(let b=0,C=0;C!==m;++b){const D=c[b]*a;for(let S=0;S!==a;++S)v[C++]=p[D+S]}return v},flattenJSON:function(p,a,c,m){let v=1,b=p[0];for(;void 0!==b&&void 0===b[m];)b=p[v++];if(void 0===b)return;let C=b[m];if(void 0!==C)if(Array.isArray(C))do{C=b[m],void 0!==C&&(a.push(b.time),c.push.apply(c,C)),b=p[v++]}while(void 0!==b);else if(void 0!==C.toArray)do{C=b[m],void 0!==C&&(a.push(b.time),C.toArray(c,c.length)),b=p[v++]}while(void 0!==b);else do{C=b[m],void 0!==C&&(a.push(b.time),c.push(C)),b=p[v++]}while(void 0!==b)},subclip:function(p,a,c,m,v=30){const b=p.clone();b.name=a;const C=[];for(let S=0;S<b.tracks.length;++S){const A=b.tracks[S],k=A.getValueSize(),R=[],O=[];for(let L=0;L<A.times.length;++L){const V=A.times[L]*v;if(!(V<c||V>=m)){R.push(A.times[L]);for(let z=0;z<k;++z)O.push(A.values[L*k+z])}}0!==R.length&&(A.times=ct.convertArray(R,A.times.constructor),A.values=ct.convertArray(O,A.values.constructor),C.push(A))}b.tracks=C;let D=1/0;for(let S=0;S<b.tracks.length;++S)D>b.tracks[S].times[0]&&(D=b.tracks[S].times[0]);for(let S=0;S<b.tracks.length;++S)b.tracks[S].shift(-1*D);return b.resetDuration(),b},makeClipAdditive:function(p,a=0,c=p,m=30){m<=0&&(m=30);const v=c.tracks.length,b=a/m;for(let C=0;C<v;++C){const D=c.tracks[C],S=D.ValueTypeName;if("bool"===S||"string"===S)continue;const A=p.tracks.find(function(U){return U.name===D.name&&U.ValueTypeName===S});if(void 0===A)continue;let k=0;const R=D.getValueSize();D.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(k=R/3);let O=0;const L=A.getValueSize();A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(O=L/3);const V=D.times.length-1;let z;if(b<=D.times[0])z=ct.arraySlice(D.values,k,R-k);else if(b>=D.times[V]){const U=V*R+k;z=ct.arraySlice(D.values,U,U+R-k)}else{const U=D.createInterpolant(),B=k,te=R-k;U.evaluate(b),z=ct.arraySlice(U.resultBuffer,B,te)}"quaternion"===S&&(new Fr).fromArray(z).normalize().conjugate().toArray(z);const W=A.times.length;for(let U=0;U<W;++U){const B=U*L+O;if("quaternion"===S)Fr.multiplyQuaternionsFlat(A.values,B,z,0,A.values,B);else{const te=L-2*O;for(let X=0;X<te;++X)A.values[B+X]-=z[X]}}}return p.blendMode=_v,p}};function No(p,a,c,m){this.parameterPositions=p,this._cachedIndex=0,this.resultBuffer=void 0!==m?m:new a.constructor(c),this.sampleValues=a,this.valueSize=c}function zl(p,a,c,m){No.call(this,p,a,c,m),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function df(p,a,c,m){No.call(this,p,a,c,m)}function Vd(p,a,c,m){No.call(this,p,a,c,m)}Object.assign(No.prototype,{evaluate:function(p){const a=this.parameterPositions;let c=this._cachedIndex,m=a[c],v=a[c-1];e:{t:{let b;n:{i:if(!(p<m)){for(let C=c+2;;){if(void 0===m){if(p<v)break i;return c=a.length,this._cachedIndex=c,this.afterEnd_(c-1,p,v)}if(c===C)break;if(v=m,m=a[++c],p<m)break t}b=a.length;break n}if(p>=v)break e;{const C=a[1];p<C&&(c=2,v=C);for(let D=c-2;;){if(void 0===v)return this._cachedIndex=0,this.beforeStart_(0,p,m);if(c===D)break;if(m=v,v=a[--c-1],p>=v)break t}b=c,c=0}}for(;c<b;){const C=c+b>>>1;p<a[C]?b=C:c=C+1}if(m=a[c],v=a[c-1],void 0===v)return this._cachedIndex=0,this.beforeStart_(0,p,m);if(void 0===m)return c=a.length,this._cachedIndex=c,this.afterEnd_(c-1,v,p)}this._cachedIndex=c,this.intervalChanged_(c,v,m)}return this.interpolate_(c,v,p,m)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(p){const a=this.resultBuffer,c=this.sampleValues,m=this.valueSize,v=p*m;for(let b=0;b!==m;++b)a[b]=c[v+b];return a},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(No.prototype,{beforeStart_:No.prototype.copySampleValue_,afterEnd_:No.prototype.copySampleValue_}),zl.prototype=Object.assign(Object.create(No.prototype),{constructor:zl,DefaultSettings_:{endingStart:mh,endingEnd:mh},intervalChanged_:function(p,a,c){const m=this.parameterPositions;let v=p-2,b=p+1,C=m[v],D=m[b];if(void 0===C)switch(this.getSettings_().endingStart){case sd:v=p,C=2*a-c;break;case em:v=m.length-2,C=a+m[v]-m[v+1];break;default:v=p,C=c}if(void 0===D)switch(this.getSettings_().endingEnd){case sd:b=p,D=2*c-a;break;case em:b=1,D=c+m[1]-m[0];break;default:b=p-1,D=a}const S=.5*(c-a),A=this.valueSize;this._weightPrev=S/(a-C),this._weightNext=S/(D-c),this._offsetPrev=v*A,this._offsetNext=b*A},interpolate_:function(p,a,c,m){const v=this.resultBuffer,b=this.sampleValues,C=this.valueSize,D=p*C,S=D-C,A=this._offsetPrev,k=this._offsetNext,R=this._weightPrev,O=this._weightNext,L=(c-a)/(m-a),V=L*L,z=V*L,W=-R*z+2*R*V-R*L,U=(1+R)*z+(-1.5-2*R)*V+(-.5+R)*L+1,B=(-1-O)*z+(1.5+O)*V+.5*L,te=O*z-O*V;for(let X=0;X!==C;++X)v[X]=W*b[A+X]+U*b[S+X]+B*b[D+X]+te*b[k+X];return v}}),df.prototype=Object.assign(Object.create(No.prototype),{constructor:df,interpolate_:function(p,a,c,m){const v=this.resultBuffer,b=this.sampleValues,C=this.valueSize,D=p*C,S=D-C,A=(c-a)/(m-a),k=1-A;for(let R=0;R!==C;++R)v[R]=b[S+R]*k+b[D+R]*A;return v}}),Vd.prototype=Object.assign(Object.create(No.prototype),{constructor:Vd,interpolate_:function(p){return this.copySampleValue_(p-1)}});class qi{constructor(a,c,m,v){if(void 0===a)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===c||0===c.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a,this.times=ct.convertArray(c,this.TimeBufferType),this.values=ct.convertArray(m,this.ValueBufferType),this.setInterpolation(v||this.DefaultInterpolation)}static toJSON(a){const c=a.constructor;let m;if(c.toJSON!==this.toJSON)m=c.toJSON(a);else{m={name:a.name,times:ct.convertArray(a.times,Array),values:ct.convertArray(a.values,Array)};const v=a.getInterpolation();v!==a.DefaultInterpolation&&(m.interpolation=v)}return m.type=a.ValueTypeName,m}InterpolantFactoryMethodDiscrete(a){return new Vd(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodLinear(a){return new df(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodSmooth(a){return new zl(this.times,this.values,this.getValueSize(),a)}setInterpolation(a){let c;switch(a){case Jg:c=this.InterpolantFactoryMethodDiscrete;break;case ph:c=this.InterpolantFactoryMethodLinear;break;case gh:c=this.InterpolantFactoryMethodSmooth}if(void 0===c){const m="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(a===this.DefaultInterpolation)throw new Error(m);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",m),this}return this.createInterpolant=c,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Jg;case this.InterpolantFactoryMethodLinear:return ph;case this.InterpolantFactoryMethodSmooth:return gh}}getValueSize(){return this.values.length/this.times.length}shift(a){if(0!==a){const c=this.times;for(let m=0,v=c.length;m!==v;++m)c[m]+=a}return this}scale(a){if(1!==a){const c=this.times;for(let m=0,v=c.length;m!==v;++m)c[m]*=a}return this}trim(a,c){const m=this.times,v=m.length;let b=0,C=v-1;for(;b!==v&&m[b]<a;)++b;for(;-1!==C&&m[C]>c;)--C;if(++C,0!==b||C!==v){b>=C&&(C=Math.max(C,1),b=C-1);const D=this.getValueSize();this.times=ct.arraySlice(m,b,C),this.values=ct.arraySlice(this.values,b*D,C*D)}return this}validate(){let a=!0;const c=this.getValueSize();c-Math.floor(c)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);const m=this.times,v=this.values,b=m.length;0===b&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);let C=null;for(let D=0;D!==b;D++){const S=m[D];if("number"==typeof S&&isNaN(S)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,D,S),a=!1;break}if(null!==C&&C>S){console.error("THREE.KeyframeTrack: Out of order keys.",this,D,S,C),a=!1;break}C=S}if(void 0!==v&&ct.isTypedArray(v))for(let D=0,S=v.length;D!==S;++D){const A=v[D];if(isNaN(A)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,D,A),a=!1;break}}return a}optimize(){const a=ct.arraySlice(this.times),c=ct.arraySlice(this.values),m=this.getValueSize(),v=this.getInterpolation()===gh,b=a.length-1;let C=1;for(let D=1;D<b;++D){let S=!1;const A=a[D];if(A!==a[D+1]&&(1!==D||A!==a[0]))if(v)S=!0;else{const R=D*m,O=R-m,L=R+m;for(let V=0;V!==m;++V){const z=c[R+V];if(z!==c[O+V]||z!==c[L+V]){S=!0;break}}}if(S){if(D!==C){a[C]=a[D];const R=D*m,O=C*m;for(let L=0;L!==m;++L)c[O+L]=c[R+L]}++C}}if(b>0){a[C]=a[b];for(let D=b*m,S=C*m,A=0;A!==m;++A)c[S+A]=c[D+A];++C}return C!==a.length?(this.times=ct.arraySlice(a,0,C),this.values=ct.arraySlice(c,0,C*m)):(this.times=a,this.values=c),this}clone(){const a=ct.arraySlice(this.times,0),c=ct.arraySlice(this.values,0),v=new(0,this.constructor)(this.name,a,c);return v.createInterpolant=this.createInterpolant,v}}qi.prototype.TimeBufferType=Float32Array,qi.prototype.ValueBufferType=Float32Array,qi.prototype.DefaultInterpolation=ph;class hf extends qi{}hf.prototype.ValueTypeName="bool",hf.prototype.ValueBufferType=Array,hf.prototype.DefaultInterpolation=Jg,hf.prototype.InterpolantFactoryMethodLinear=void 0,hf.prototype.InterpolantFactoryMethodSmooth=void 0;class Pu extends qi{}Pu.prototype.ValueTypeName="color";class Gd extends qi{}function Ud(p,a,c,m){No.call(this,p,a,c,m)}Gd.prototype.ValueTypeName="number",Ud.prototype=Object.assign(Object.create(No.prototype),{constructor:Ud,interpolate_:function(p,a,c,m){const v=this.resultBuffer,b=this.sampleValues,C=this.valueSize,D=(c-a)/(m-a);let S=p*C;for(let A=S+C;S!==A;S+=4)Fr.slerpFlat(v,0,b,S-C,b,S,D);return v}});class Ou extends qi{InterpolantFactoryMethodLinear(a){return new Ud(this.times,this.values,this.getValueSize(),a)}}Ou.prototype.ValueTypeName="quaternion",Ou.prototype.DefaultInterpolation=ph,Ou.prototype.InterpolantFactoryMethodSmooth=void 0;class ts extends qi{}ts.prototype.ValueTypeName="string",ts.prototype.ValueBufferType=Array,ts.prototype.DefaultInterpolation=Jg,ts.prototype.InterpolantFactoryMethodLinear=void 0,ts.prototype.InterpolantFactoryMethodSmooth=void 0;class ff extends qi{}ff.prototype.ValueTypeName="vector";class pf{constructor(a,c=-1,m,v=wl){this.name=a,this.tracks=m,this.duration=c,this.blendMode=v,this.uuid=Ne.generateUUID(),this.duration<0&&this.resetDuration()}static parse(a){const c=[],m=a.tracks,v=1/(a.fps||1);for(let C=0,D=m.length;C!==D;++C)c.push(pw(m[C]).scale(v));const b=new this(a.name,a.duration,c,a.blendMode);return b.uuid=a.uuid,b}static toJSON(a){const c=[],m=a.tracks,v={name:a.name,duration:a.duration,tracks:c,uuid:a.uuid,blendMode:a.blendMode};for(let b=0,C=m.length;b!==C;++b)c.push(qi.toJSON(m[b]));return v}static CreateFromMorphTargetSequence(a,c,m,v){const b=c.length,C=[];for(let D=0;D<b;D++){let S=[],A=[];S.push((D+b-1)%b,D,(D+1)%b),A.push(0,1,0);const k=ct.getKeyframeOrder(S);S=ct.sortedArray(S,1,k),A=ct.sortedArray(A,1,k),!v&&0===S[0]&&(S.push(b),A.push(A[0])),C.push(new Gd(".morphTargetInfluences["+c[D].name+"]",S,A).scale(1/m))}return new this(a,-1,C)}static findByName(a,c){let m=a;if(!Array.isArray(a)){const v=a;m=v.geometry&&v.geometry.animations||v.animations}for(let v=0;v<m.length;v++)if(m[v].name===c)return m[v];return null}static CreateClipsFromMorphTargetSequences(a,c,m){const v={},b=/^([\w-]*?)([\d]+)$/;for(let D=0,S=a.length;D<S;D++){const A=a[D],k=A.name.match(b);if(k&&k.length>1){const R=k[1];let O=v[R];O||(v[R]=O=[]),O.push(A)}}const C=[];for(const D in v)C.push(this.CreateFromMorphTargetSequence(D,v[D],c,m));return C}static parseAnimation(a,c){if(!a)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const m=function(R,O,L,V,z){if(0!==L.length){const W=[],U=[];ct.flattenJSON(L,W,U,V),0!==W.length&&z.push(new R(O,W,U))}},v=[],b=a.name||"default",C=a.fps||30,D=a.blendMode;let S=a.length||-1;const A=a.hierarchy||[];for(let R=0;R<A.length;R++){const O=A[R].keys;if(O&&0!==O.length)if(O[0].morphTargets){const L={};let V;for(V=0;V<O.length;V++)if(O[V].morphTargets)for(let z=0;z<O[V].morphTargets.length;z++)L[O[V].morphTargets[z]]=-1;for(const z in L){const W=[],U=[];for(let B=0;B!==O[V].morphTargets.length;++B){const te=O[V];W.push(te.time),U.push(te.morphTarget===z?1:0)}v.push(new Gd(".morphTargetInfluence["+z+"]",W,U))}S=L.length*(C||1)}else{const L=".bones["+c[R].name+"]";m(ff,L+".position",O,"pos",v),m(Ou,L+".quaternion",O,"rot",v),m(ff,L+".scale",O,"scl",v)}}return 0===v.length?null:new this(b,S,v,D)}resetDuration(){let c=0;for(let m=0,v=this.tracks.length;m!==v;++m){const b=this.tracks[m];c=Math.max(c,b.times[b.times.length-1])}return this.duration=c,this}trim(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this}validate(){let a=!0;for(let c=0;c<this.tracks.length;c++)a=a&&this.tracks[c].validate();return a}optimize(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}clone(){const a=[];for(let c=0;c<this.tracks.length;c++)a.push(this.tracks[c].clone());return new this.constructor(this.name,this.duration,a,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function pw(p){if(void 0===p.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const a=function gf(p){switch(p.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Gd;case"vector":case"vector2":case"vector3":case"vector4":return ff;case"color":return Pu;case"quaternion":return Ou;case"bool":case"boolean":return hf;case"string":return ts}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+p)}(p.type);if(void 0===p.times){const c=[],m=[];ct.flattenJSON(p.keys,c,m,"value"),p.times=c,p.values=m}return void 0!==a.parse?a.parse(p):new a(p.name,p.times,p.values,p.interpolation)}const sl={enabled:!1,files:{},add:function(p,a){!1!==this.enabled&&(this.files[p]=a)},get:function(p){if(!1!==this.enabled)return this.files[p]},remove:function(p){delete this.files[p]},clear:function(){this.files={}}};function l_(p,a,c){const m=this;let D,v=!1,b=0,C=0;const S=[];this.onStart=void 0,this.onLoad=p,this.onProgress=a,this.onError=c,this.itemStart=function(A){C++,!1===v&&void 0!==m.onStart&&m.onStart(A,b,C),v=!0},this.itemEnd=function(A){b++,void 0!==m.onProgress&&m.onProgress(A,b,C),b===C&&(v=!1,void 0!==m.onLoad&&m.onLoad())},this.itemError=function(A){void 0!==m.onError&&m.onError(A)},this.resolveURL=function(A){return D?D(A):A},this.setURLModifier=function(A){return D=A,this},this.addHandler=function(A,k){return S.push(A,k),this},this.removeHandler=function(A){const k=S.indexOf(A);return-1!==k&&S.splice(k,2),this},this.getHandler=function(A){for(let k=0,R=S.length;k<R;k+=2){const O=S[k],L=S[k+1];if(O.global&&(O.lastIndex=0),O.test(A))return L}return null}}const c_=new l_;function br(p){this.manager=void 0!==p?p:c_,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(br.prototype,{load:function(){},loadAsync:function(p,a){const c=this;return new Promise(function(m,v){c.load(p,m,a,v)})},parse:function(){},setCrossOrigin:function(p){return this.crossOrigin=p,this},setWithCredentials:function(p){return this.withCredentials=p,this},setPath:function(p){return this.path=p,this},setResourcePath:function(p){return this.resourcePath=p,this},setRequestHeader:function(p){return this.requestHeader=p,this}});const Js={};function Gs(p){br.call(this,p)}Gs.prototype=Object.assign(Object.create(br.prototype),{constructor:Gs,load:function(p,a,c,m){void 0===p&&(p=""),void 0!==this.path&&(p=this.path+p),p=this.manager.resolveURL(p);const v=this,b=sl.get(p);if(void 0!==b)return v.manager.itemStart(p),setTimeout(function(){a&&a(b),v.manager.itemEnd(p)},0),b;if(void 0!==Js[p])return void Js[p].push({onLoad:a,onProgress:c,onError:m});const D=p.match(/^data:(.*?)(;base64)?,(.*)$/);let S;if(D){const A=D[1],k=!!D[2];let R=D[3];R=decodeURIComponent(R),k&&(R=atob(R));try{let O;const L=(this.responseType||"").toLowerCase();switch(L){case"arraybuffer":case"blob":const V=new Uint8Array(R.length);for(let W=0;W<R.length;W++)V[W]=R.charCodeAt(W);O="blob"===L?new Blob([V.buffer],{type:A}):V.buffer;break;case"document":O=(new DOMParser).parseFromString(R,A);break;case"json":O=JSON.parse(R);break;default:O=R}setTimeout(function(){a&&a(O),v.manager.itemEnd(p)},0)}catch(O){setTimeout(function(){m&&m(O),v.manager.itemError(p),v.manager.itemEnd(p)},0)}}else{Js[p]=[],Js[p].push({onLoad:a,onProgress:c,onError:m}),S=new XMLHttpRequest,S.open("GET",p,!0),S.addEventListener("load",function(A){const k=this.response,R=Js[p];if(delete Js[p],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),sl.add(p,k);for(let O=0,L=R.length;O<L;O++){const V=R[O];V.onLoad&&V.onLoad(k)}v.manager.itemEnd(p)}else{for(let O=0,L=R.length;O<L;O++){const V=R[O];V.onError&&V.onError(A)}v.manager.itemError(p),v.manager.itemEnd(p)}},!1),S.addEventListener("progress",function(A){const k=Js[p];for(let R=0,O=k.length;R<O;R++){const L=k[R];L.onProgress&&L.onProgress(A)}},!1),S.addEventListener("error",function(A){const k=Js[p];delete Js[p];for(let R=0,O=k.length;R<O;R++){const L=k[R];L.onError&&L.onError(A)}v.manager.itemError(p),v.manager.itemEnd(p)},!1),S.addEventListener("abort",function(A){const k=Js[p];delete Js[p];for(let R=0,O=k.length;R<O;R++){const L=k[R];L.onError&&L.onError(A)}v.manager.itemError(p),v.manager.itemEnd(p)},!1),void 0!==this.responseType&&(S.responseType=this.responseType),void 0!==this.withCredentials&&(S.withCredentials=this.withCredentials),S.overrideMimeType&&S.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const A in this.requestHeader)S.setRequestHeader(A,this.requestHeader[A]);S.send(null)}return v.manager.itemStart(p),S},setResponseType:function(p){return this.responseType=p,this},setMimeType:function(p){return this.mimeType=p,this}});class mf extends br{constructor(a){super(a)}load(a,c,m,v){const b=this,C=new Gs(this.manager);C.setPath(this.path),C.setRequestHeader(this.requestHeader),C.setWithCredentials(this.withCredentials),C.load(a,function(D){try{c(b.parse(JSON.parse(D)))}catch(S){v?v(S):console.error(S),b.manager.itemError(a)}},m,v)}parse(a){const c=[];for(let m=0;m<a.length;m++){const v=pf.parse(a[m]);c.push(v)}return c}}function jl(p){br.call(this,p)}jl.prototype=Object.assign(Object.create(br.prototype),{constructor:jl,load:function(p,a,c,m){const v=this,b=[],C=new Xm,D=new Gs(this.manager);D.setPath(this.path),D.setResponseType("arraybuffer"),D.setRequestHeader(this.requestHeader),D.setWithCredentials(v.withCredentials);let S=0;function A(k){D.load(p[k],function(R){const O=v.parse(R,!0);b[k]={width:O.width,height:O.height,format:O.format,mipmaps:O.mipmaps},S+=1,6===S&&(1===O.mipmapCount&&(C.minFilter=de),C.image=b,C.format=O.format,C.needsUpdate=!0,a&&a(C))},c,m)}if(Array.isArray(p))for(let k=0,R=p.length;k<R;++k)A(k);else D.load(p,function(k){const R=v.parse(k,!0);if(R.isCubemap){const O=R.mipmaps.length/R.mipmapCount;for(let L=0;L<O;L++){b[L]={mipmaps:[]};for(let V=0;V<R.mipmapCount;V++)b[L].mipmaps.push(R.mipmaps[L*R.mipmapCount+V]),b[L].format=R.format,b[L].width=R.width,b[L].height=R.height}C.image=b}else C.image.width=R.width,C.image.height=R.height,C.mipmaps=R.mipmaps;1===R.mipmapCount&&(C.minFilter=de),C.format=R.format,C.needsUpdate=!0,a&&a(C)},c,m);return C}});class Wl extends br{constructor(a){super(a)}load(a,c,m,v){void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);const b=this,C=sl.get(a);if(void 0!==C)return b.manager.itemStart(a),setTimeout(function(){c&&c(C),b.manager.itemEnd(a)},0),C;const D=document.createElementNS("http://www.w3.org/1999/xhtml","img");function S(){D.removeEventListener("load",S,!1),D.removeEventListener("error",A,!1),sl.add(a,this),c&&c(this),b.manager.itemEnd(a)}function A(k){D.removeEventListener("load",S,!1),D.removeEventListener("error",A,!1),v&&v(k),b.manager.itemError(a),b.manager.itemEnd(a)}return D.addEventListener("load",S,!1),D.addEventListener("error",A,!1),"data:"!==a.substr(0,5)&&void 0!==this.crossOrigin&&(D.crossOrigin=this.crossOrigin),b.manager.itemStart(a),D.src=a,D}}class u_ extends br{constructor(a){super(a)}load(a,c,m,v){const b=new pu,C=new Wl(this.manager);C.setCrossOrigin(this.crossOrigin),C.setPath(this.path);let D=0;function S(A){C.load(a[A],function(k){b.images[A]=k,D++,6===D&&(b.needsUpdate=!0,c&&c(b))},void 0,v)}for(let A=0;A<a.length;++A)S(A);return b}}function ku(p){br.call(this,p)}function Qp(p){br.call(this,p)}function eo(){this.type="Curve",this.arcLengthDivisions=200}ku.prototype=Object.assign(Object.create(br.prototype),{constructor:ku,load:function(p,a,c,m){const v=this,b=new _c,C=new Gs(this.manager);return C.setResponseType("arraybuffer"),C.setRequestHeader(this.requestHeader),C.setPath(this.path),C.setWithCredentials(v.withCredentials),C.load(p,function(D){const S=v.parse(D);!S||(void 0!==S.image?b.image=S.image:void 0!==S.data&&(b.image.width=S.width,b.image.height=S.height,b.image.data=S.data),b.wrapS=void 0!==S.wrapS?S.wrapS:Ps,b.wrapT=void 0!==S.wrapT?S.wrapT:Ps,b.magFilter=void 0!==S.magFilter?S.magFilter:de,b.minFilter=void 0!==S.minFilter?S.minFilter:de,b.anisotropy=void 0!==S.anisotropy?S.anisotropy:1,void 0!==S.encoding&&(b.encoding=S.encoding),void 0!==S.flipY&&(b.flipY=S.flipY),void 0!==S.format&&(b.format=S.format),void 0!==S.type&&(b.type=S.type),void 0!==S.mipmaps&&(b.mipmaps=S.mipmaps,b.minFilter=Ye),1===S.mipmapCount&&(b.minFilter=de),b.needsUpdate=!0,a&&a(b,S))},c,m),b}}),Qp.prototype=Object.assign(Object.create(br.prototype),{constructor:Qp,load:function(p,a,c,m){const v=new Bi,b=new Wl(this.manager);return b.setCrossOrigin(this.crossOrigin),b.setPath(this.path),b.load(p,function(C){v.image=C;const D=p.search(/\.jpe?g($|\?)/i)>0||0===p.search(/^data\:image\/jpeg/);v.format=D?lo:$r,v.needsUpdate=!0,void 0!==a&&a(v)},c,m),v}}),Object.assign(eo.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(p,a){const c=this.getUtoTmapping(p);return this.getPoint(c,a)},getPoints:function(p=5){const a=[];for(let c=0;c<=p;c++)a.push(this.getPoint(c/p));return a},getSpacedPoints:function(p=5){const a=[];for(let c=0;c<=p;c++)a.push(this.getPointAt(c/p));return a},getLength:function(){const p=this.getLengths();return p[p.length-1]},getLengths:function(p){if(void 0===p&&(p=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===p+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const a=[];let c,m=this.getPoint(0),v=0;a.push(0);for(let b=1;b<=p;b++)c=this.getPoint(b/p),v+=c.distanceTo(m),a.push(v),m=c;return this.cacheArcLengths=a,a},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(p,a){const c=this.getLengths();let m=0;const v=c.length;let b;b=a||p*c[v-1];let S,C=0,D=v-1;for(;C<=D;)if(m=Math.floor(C+(D-C)/2),S=c[m]-b,S<0)C=m+1;else{if(!(S>0)){D=m;break}D=m-1}if(m=D,c[m]===b)return m/(v-1);const A=c[m];return(m+(b-A)/(c[m+1]-A))/(v-1)},getTangent:function(p,a){const c=1e-4;let m=p-c,v=p+c;m<0&&(m=0),v>1&&(v=1);const b=this.getPoint(m),C=this.getPoint(v),D=a||(b.isVector2?new et:new ee);return D.copy(C).sub(b).normalize(),D},getTangentAt:function(p,a){const c=this.getUtoTmapping(p);return this.getTangent(c,a)},computeFrenetFrames:function(p,a){const c=new ee,m=[],v=[],b=[],C=new ee,D=new fn;for(let O=0;O<=p;O++)m[O]=this.getTangentAt(O/p,new ee),m[O].normalize();v[0]=new ee,b[0]=new ee;let S=Number.MAX_VALUE;const A=Math.abs(m[0].x),k=Math.abs(m[0].y),R=Math.abs(m[0].z);A<=S&&(S=A,c.set(1,0,0)),k<=S&&(S=k,c.set(0,1,0)),R<=S&&c.set(0,0,1),C.crossVectors(m[0],c).normalize(),v[0].crossVectors(m[0],C),b[0].crossVectors(m[0],v[0]);for(let O=1;O<=p;O++){if(v[O]=v[O-1].clone(),b[O]=b[O-1].clone(),C.crossVectors(m[O-1],m[O]),C.length()>Number.EPSILON){C.normalize();const L=Math.acos(Ne.clamp(m[O-1].dot(m[O]),-1,1));v[O].applyMatrix4(D.makeRotationAxis(C,L))}b[O].crossVectors(m[O],v[O])}if(!0===a){let O=Math.acos(Ne.clamp(v[0].dot(v[p]),-1,1));O/=p,m[0].dot(C.crossVectors(v[0],v[p]))>0&&(O=-O);for(let L=1;L<=p;L++)v[L].applyMatrix4(D.makeRotationAxis(m[L],O*L)),b[L].crossVectors(m[L],v[L])}return{tangents:m,normals:v,binormals:b}},clone:function(){return(new this.constructor).copy(this)},copy:function(p){return this.arcLengthDivisions=p.arcLengthDivisions,this},toJSON:function(){const p={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return p.arcLengthDivisions=this.arcLengthDivisions,p.type=this.type,p},fromJSON:function(p){return this.arcLengthDivisions=p.arcLengthDivisions,this}});class Hd extends eo{constructor(a=0,c=0,m=1,v=1,b=0,C=2*Math.PI,D=!1,S=0){super(),this.type="EllipseCurve",this.aX=a,this.aY=c,this.xRadius=m,this.yRadius=v,this.aStartAngle=b,this.aEndAngle=C,this.aClockwise=D,this.aRotation=S}getPoint(a,c){const m=c||new et,v=2*Math.PI;let b=this.aEndAngle-this.aStartAngle;const C=Math.abs(b)<Number.EPSILON;for(;b<0;)b+=v;for(;b>v;)b-=v;b<Number.EPSILON&&(b=C?0:v),!0===this.aClockwise&&!C&&(b===v?b=-v:b-=v);const D=this.aStartAngle+a*b;let S=this.aX+this.xRadius*Math.cos(D),A=this.aY+this.yRadius*Math.sin(D);if(0!==this.aRotation){const k=Math.cos(this.aRotation),R=Math.sin(this.aRotation),O=S-this.aX,L=A-this.aY;S=O*k-L*R+this.aX,A=O*R+L*k+this.aY}return m.set(S,A)}copy(a){return super.copy(a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}toJSON(){const a=super.toJSON();return a.aX=this.aX,a.aY=this.aY,a.xRadius=this.xRadius,a.yRadius=this.yRadius,a.aStartAngle=this.aStartAngle,a.aEndAngle=this.aEndAngle,a.aClockwise=this.aClockwise,a.aRotation=this.aRotation,a}fromJSON(a){return super.fromJSON(a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}}Hd.prototype.isEllipseCurve=!0;class Bo extends Hd{constructor(a,c,m,v,b,C){super(a,c,m,m,v,b,C),this.type="ArcCurve"}}function zd(){let p=0,a=0,c=0,m=0;function v(b,C,D,S){p=b,a=D,c=-3*b+3*C-2*D-S,m=2*b-2*C+D+S}return{initCatmullRom:function(b,C,D,S,A){v(C,D,A*(D-b),A*(S-C))},initNonuniformCatmullRom:function(b,C,D,S,A,k,R){let O=(C-b)/A-(D-b)/(A+k)+(D-C)/k,L=(D-C)/k-(S-C)/(k+R)+(S-D)/R;O*=k,L*=k,v(C,D,O,L)},calc:function(b){const C=b*b;return p+a*b+c*C+m*(C*b)}}}Bo.prototype.isArcCurve=!0;const ns=new ee,Yl=new zd,wo=new zd,xo=new zd;class Fu extends eo{constructor(a=[],c=!1,m="centripetal",v=.5){super(),this.type="CatmullRomCurve3",this.points=a,this.closed=c,this.curveType=m,this.tension=v}getPoint(a,c=new ee){const m=c,v=this.points,b=v.length,C=(b-(this.closed?0:1))*a;let A,k,D=Math.floor(C),S=C-D;this.closed?D+=D>0?0:(Math.floor(Math.abs(D)/b)+1)*b:0===S&&D===b-1&&(D=b-2,S=1),this.closed||D>0?A=v[(D-1)%b]:(ns.subVectors(v[0],v[1]).add(v[0]),A=ns);const R=v[D%b],O=v[(D+1)%b];if(this.closed||D+2<b?k=v[(D+2)%b]:(ns.subVectors(v[b-1],v[b-2]).add(v[b-1]),k=ns),"centripetal"===this.curveType||"chordal"===this.curveType){const L="chordal"===this.curveType?.5:.25;let V=Math.pow(A.distanceToSquared(R),L),z=Math.pow(R.distanceToSquared(O),L),W=Math.pow(O.distanceToSquared(k),L);z<1e-4&&(z=1),V<1e-4&&(V=z),W<1e-4&&(W=z),Yl.initNonuniformCatmullRom(A.x,R.x,O.x,k.x,V,z,W),wo.initNonuniformCatmullRom(A.y,R.y,O.y,k.y,V,z,W),xo.initNonuniformCatmullRom(A.z,R.z,O.z,k.z,V,z,W)}else"catmullrom"===this.curveType&&(Yl.initCatmullRom(A.x,R.x,O.x,k.x,this.tension),wo.initCatmullRom(A.y,R.y,O.y,k.y,this.tension),xo.initCatmullRom(A.z,R.z,O.z,k.z,this.tension));return m.set(Yl.calc(S),wo.calc(S),xo.calc(S)),m}copy(a){super.copy(a),this.points=[];for(let c=0,m=a.points.length;c<m;c++)this.points.push(a.points[c].clone());return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}toJSON(){const a=super.toJSON();a.points=[];for(let c=0,m=this.points.length;c<m;c++)a.points.push(this.points[c].toArray());return a.closed=this.closed,a.curveType=this.curveType,a.tension=this.tension,a}fromJSON(a){super.fromJSON(a),this.points=[];for(let c=0,m=a.points.length;c<m;c++){const v=a.points[c];this.points.push((new ee).fromArray(v))}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}}function jd(p,a,c,m,v){const b=.5*(m-a),C=.5*(v-c),D=p*p;return(2*c-2*m+b+C)*(p*D)+(-3*c+3*m-2*b-C)*D+b*p+c}function al(p,a,c,m){return function Wd(p,a){const c=1-p;return c*c*a}(p,a)+function la(p,a){return 2*(1-p)*p*a}(p,c)+function ol(p,a){return p*p*a}(p,m)}function ca(p,a,c,m,v){return function Lc(p,a){const c=1-p;return c*c*c*a}(p,a)+function _f(p,a){const c=1-p;return 3*c*c*p*a}(p,c)+function ll(p,a){return 3*(1-p)*p*p*a}(p,m)+function Yd(p,a){return p*p*p*a}(p,v)}Fu.prototype.isCatmullRomCurve3=!0;class cl extends eo{constructor(a=new et,c=new et,m=new et,v=new et){super(),this.type="CubicBezierCurve",this.v0=a,this.v1=c,this.v2=m,this.v3=v}getPoint(a,c=new et){const m=c,v=this.v0,b=this.v1,C=this.v2,D=this.v3;return m.set(ca(a,v.x,b.x,C.x,D.x),ca(a,v.y,b.y,C.y,D.y)),m}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}}cl.prototype.isCubicBezierCurve=!0;class Xp extends eo{constructor(a=new ee,c=new ee,m=new ee,v=new ee){super(),this.type="CubicBezierCurve3",this.v0=a,this.v1=c,this.v2=m,this.v3=v}getPoint(a,c=new ee){const m=c,v=this.v0,b=this.v1,C=this.v2,D=this.v3;return m.set(ca(a,v.x,b.x,C.x,D.x),ca(a,v.y,b.y,C.y,D.y),ca(a,v.z,b.z,C.z,D.z)),m}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}}Xp.prototype.isCubicBezierCurve3=!0;class vf extends eo{constructor(a=new et,c=new et){super(),this.type="LineCurve",this.v1=a,this.v2=c}getPoint(a,c=new et){const m=c;return 1===a?m.copy(this.v2):(m.copy(this.v2).sub(this.v1),m.multiplyScalar(a).add(this.v1)),m}getPointAt(a,c){return this.getPoint(a,c)}getTangent(a,c){const m=c||new et;return m.copy(this.v2).sub(this.v1).normalize(),m}copy(a){return super.copy(a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}vf.prototype.isLineCurve=!0;class ky extends eo{constructor(a=new ee,c=new ee){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=a,this.v2=c}getPoint(a,c=new ee){const m=c;return 1===a?m.copy(this.v2):(m.copy(this.v2).sub(this.v1),m.multiplyScalar(a).add(this.v1)),m}getPointAt(a,c){return this.getPoint(a,c)}copy(a){return super.copy(a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}class Jp extends eo{constructor(a=new et,c=new et,m=new et){super(),this.type="QuadraticBezierCurve",this.v0=a,this.v1=c,this.v2=m}getPoint(a,c=new et){const m=c,v=this.v0,b=this.v1,C=this.v2;return m.set(al(a,v.x,b.x,C.x),al(a,v.y,b.y,C.y)),m}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}Jp.prototype.isQuadraticBezierCurve=!0;class d_ extends eo{constructor(a=new ee,c=new ee,m=new ee){super(),this.type="QuadraticBezierCurve3",this.v0=a,this.v1=c,this.v2=m}getPoint(a,c=new ee){const m=c,v=this.v0,b=this.v1,C=this.v2;return m.set(al(a,v.x,b.x,C.x),al(a,v.y,b.y,C.y),al(a,v.z,b.z,C.z)),m}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}d_.prototype.isQuadraticBezierCurve3=!0;class Lu extends eo{constructor(a=[]){super(),this.type="SplineCurve",this.points=a}getPoint(a,c=new et){const m=c,v=this.points,b=(v.length-1)*a,C=Math.floor(b),D=b-C,S=v[0===C?C:C-1],A=v[C],k=v[C>v.length-2?v.length-1:C+1],R=v[C>v.length-3?v.length-1:C+2];return m.set(jd(D,S.x,A.x,k.x,R.x),jd(D,S.y,A.y,k.y,R.y)),m}copy(a){super.copy(a),this.points=[];for(let c=0,m=a.points.length;c<m;c++)this.points.push(a.points[c].clone());return this}toJSON(){const a=super.toJSON();a.points=[];for(let c=0,m=this.points.length;c<m;c++)a.points.push(this.points[c].toArray());return a}fromJSON(a){super.fromJSON(a),this.points=[];for(let c=0,m=a.points.length;c<m;c++){const v=a.points[c];this.points.push((new et).fromArray(v))}return this}}Lu.prototype.isSplineCurve=!0;var Nc=Object.freeze({__proto__:null,ArcCurve:Bo,CatmullRomCurve3:Fu,CubicBezierCurve:cl,CubicBezierCurve3:Xp,EllipseCurve:Hd,LineCurve:vf,LineCurve3:ky,QuadraticBezierCurve:Jp,QuadraticBezierCurve3:d_,SplineCurve:Lu});class Fy extends eo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(a){this.curves.push(a)}closePath(){const a=this.curves[0].getPoint(0),c=this.curves[this.curves.length-1].getPoint(1);a.equals(c)||this.curves.push(new vf(c,a))}getPoint(a){const c=a*this.getLength(),m=this.getCurveLengths();let v=0;for(;v<m.length;){if(m[v]>=c){const b=m[v]-c,C=this.curves[v],D=C.getLength();return C.getPointAt(0===D?0:1-b/D)}v++}return null}getLength(){const a=this.getCurveLengths();return a[a.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const a=[];let c=0;for(let m=0,v=this.curves.length;m<v;m++)c+=this.curves[m].getLength(),a.push(c);return this.cacheLengths=a,a}getSpacedPoints(a=40){const c=[];for(let m=0;m<=a;m++)c.push(this.getPoint(m/a));return this.autoClose&&c.push(c[0]),c}getPoints(a=12){const c=[];let m;for(let v=0,b=this.curves;v<b.length;v++){const C=b[v],S=C.getPoints(C&&C.isEllipseCurve?2*a:C&&(C.isLineCurve||C.isLineCurve3)?1:C&&C.isSplineCurve?a*C.points.length:a);for(let A=0;A<S.length;A++){const k=S[A];m&&m.equals(k)||(c.push(k),m=k)}}return this.autoClose&&c.length>1&&!c[c.length-1].equals(c[0])&&c.push(c[0]),c}copy(a){super.copy(a),this.curves=[];for(let c=0,m=a.curves.length;c<m;c++)this.curves.push(a.curves[c].clone());return this.autoClose=a.autoClose,this}toJSON(){const a=super.toJSON();a.autoClose=this.autoClose,a.curves=[];for(let c=0,m=this.curves.length;c<m;c++)a.curves.push(this.curves[c].toJSON());return a}fromJSON(a){super.fromJSON(a),this.autoClose=a.autoClose,this.curves=[];for(let c=0,m=a.curves.length;c<m;c++){const v=a.curves[c];this.curves.push((new Nc[v.type]).fromJSON(v))}return this}}class yf extends Fy{constructor(a){super(),this.type="Path",this.currentPoint=new et,a&&this.setFromPoints(a)}setFromPoints(a){this.moveTo(a[0].x,a[0].y);for(let c=1,m=a.length;c<m;c++)this.lineTo(a[c].x,a[c].y);return this}moveTo(a,c){return this.currentPoint.set(a,c),this}lineTo(a,c){const m=new vf(this.currentPoint.clone(),new et(a,c));return this.curves.push(m),this.currentPoint.set(a,c),this}quadraticCurveTo(a,c,m,v){const b=new Jp(this.currentPoint.clone(),new et(a,c),new et(m,v));return this.curves.push(b),this.currentPoint.set(m,v),this}bezierCurveTo(a,c,m,v,b,C){const D=new cl(this.currentPoint.clone(),new et(a,c),new et(m,v),new et(b,C));return this.curves.push(D),this.currentPoint.set(b,C),this}splineThru(a){const c=[this.currentPoint.clone()].concat(a),m=new Lu(c);return this.curves.push(m),this.currentPoint.copy(a[a.length-1]),this}arc(a,c,m,v,b,C){return this.absarc(a+this.currentPoint.x,c+this.currentPoint.y,m,v,b,C),this}absarc(a,c,m,v,b,C){return this.absellipse(a,c,m,m,v,b,C),this}ellipse(a,c,m,v,b,C,D,S){return this.absellipse(a+this.currentPoint.x,c+this.currentPoint.y,m,v,b,C,D,S),this}absellipse(a,c,m,v,b,C,D,S){const A=new Hd(a,c,m,v,b,C,D,S);if(this.curves.length>0){const R=A.getPoint(0);R.equals(this.currentPoint)||this.lineTo(R.x,R.y)}this.curves.push(A);const k=A.getPoint(1);return this.currentPoint.copy(k),this}copy(a){return super.copy(a),this.currentPoint.copy(a.currentPoint),this}toJSON(){const a=super.toJSON();return a.currentPoint=this.currentPoint.toArray(),a}fromJSON(a){return super.fromJSON(a),this.currentPoint.fromArray(a.currentPoint),this}}class Nu extends yf{constructor(a){super(a),this.uuid=Ne.generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(a){const c=[];for(let m=0,v=this.holes.length;m<v;m++)c[m]=this.holes[m].getPoints(a);return c}extractPoints(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}}copy(a){super.copy(a),this.holes=[];for(let c=0,m=a.holes.length;c<m;c++)this.holes.push(a.holes[c].clone());return this}toJSON(){const a=super.toJSON();a.uuid=this.uuid,a.holes=[];for(let c=0,m=this.holes.length;c<m;c++)a.holes.push(this.holes[c].toJSON());return a}fromJSON(a){super.fromJSON(a),this.uuid=a.uuid,this.holes=[];for(let c=0,m=a.holes.length;c<m;c++){const v=a.holes[c];this.holes.push((new yf).fromJSON(v))}return this}}class ua extends it{constructor(a,c=1){super(),this.type="Light",this.color=new Jt(a),this.intensity=c}copy(a){return super.copy(a),this.color.copy(a.color),this.intensity=a.intensity,this}toJSON(a){const c=super.toJSON(a);return c.object.color=this.color.getHex(),c.object.intensity=this.intensity,void 0!==this.groundColor&&(c.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(c.object.distance=this.distance),void 0!==this.angle&&(c.object.angle=this.angle),void 0!==this.decay&&(c.object.decay=this.decay),void 0!==this.penumbra&&(c.object.penumbra=this.penumbra),void 0!==this.shadow&&(c.object.shadow=this.shadow.toJSON()),c}}ua.prototype.isLight=!0;class ul extends ua{constructor(a,c,m){super(a,m),this.type="HemisphereLight",this.position.copy(it.DefaultUp),this.updateMatrix(),this.groundColor=new Jt(c)}copy(a){return ua.prototype.copy.call(this,a),this.groundColor.copy(a.groundColor),this}}ul.prototype.isHemisphereLight=!0;const eg=new fn,gw=new ee,h_=new ee;class tg{constructor(a){this.camera=a,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new et(512,512),this.map=null,this.mapPass=null,this.matrix=new fn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new mu,this._frameExtents=new et(1,1),this._viewportCount=1,this._viewports=[new Di(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(a){const c=this.camera,m=this.matrix;gw.setFromMatrixPosition(a.matrixWorld),c.position.copy(gw),h_.setFromMatrixPosition(a.target.matrixWorld),c.lookAt(h_),c.updateMatrixWorld(),eg.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),this._frustum.setFromProjectionMatrix(eg),m.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),m.multiply(c.projectionMatrix),m.multiply(c.matrixWorldInverse)}getViewport(a){return this._viewports[a]}getFrameExtents(){return this._frameExtents}copy(a){return this.camera=a.camera.clone(),this.bias=a.bias,this.radius=a.radius,this.mapSize.copy(a.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const a={};return 0!==this.bias&&(a.bias=this.bias),0!==this.normalBias&&(a.normalBias=this.normalBias),1!==this.radius&&(a.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(a.mapSize=this.mapSize.toArray()),a.camera=this.camera.toJSON(!1).object,delete a.camera.matrix,a}}class Ly extends tg{constructor(){super(new nr(50,1,.5,500)),this.focus=1}updateMatrices(a){const c=this.camera,m=2*Ne.RAD2DEG*a.angle*this.focus,v=this.mapSize.width/this.mapSize.height,b=a.distance||c.far;(m!==c.fov||v!==c.aspect||b!==c.far)&&(c.fov=m,c.aspect=v,c.far=b,c.updateProjectionMatrix()),super.updateMatrices(a)}}Ly.prototype.isSpotLightShadow=!0;class qd extends ua{constructor(a,c,m=0,v=Math.PI/3,b=0,C=1){super(a,c),this.type="SpotLight",this.position.copy(it.DefaultUp),this.updateMatrix(),this.target=new it,this.distance=m,this.angle=v,this.penumbra=b,this.decay=C,this.shadow=new Ly}get power(){return this.intensity*Math.PI}set power(a){this.intensity=a/Math.PI}copy(a){return super.copy(a),this.distance=a.distance,this.angle=a.angle,this.penumbra=a.penumbra,this.decay=a.decay,this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}qd.prototype.isSpotLight=!0;const ng=new fn,bf=new ee,Ny=new ee;class ig extends tg{constructor(){super(new nr(90,1,.5,500)),this._frameExtents=new et(4,2),this._viewportCount=6,this._viewports=[new Di(2,1,1,1),new Di(0,1,1,1),new Di(3,1,1,1),new Di(1,1,1,1),new Di(3,0,1,1),new Di(1,0,1,1)],this._cubeDirections=[new ee(1,0,0),new ee(-1,0,0),new ee(0,0,1),new ee(0,0,-1),new ee(0,1,0),new ee(0,-1,0)],this._cubeUps=[new ee(0,1,0),new ee(0,1,0),new ee(0,1,0),new ee(0,1,0),new ee(0,0,1),new ee(0,0,-1)]}updateMatrices(a,c=0){const m=this.camera,v=this.matrix;bf.setFromMatrixPosition(a.matrixWorld),m.position.copy(bf),Ny.copy(m.position),Ny.add(this._cubeDirections[c]),m.up.copy(this._cubeUps[c]),m.lookAt(Ny),m.updateMatrixWorld(),v.makeTranslation(-bf.x,-bf.y,-bf.z),ng.multiplyMatrices(m.projectionMatrix,m.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ng)}}ig.prototype.isPointLightShadow=!0;class rg extends ua{constructor(a,c,m=0,v=1){super(a,c),this.type="PointLight",this.distance=m,this.decay=v,this.shadow=new ig}get power(){return 4*this.intensity*Math.PI}set power(a){this.intensity=a/(4*Math.PI)}copy(a){return super.copy(a),this.distance=a.distance,this.decay=a.decay,this.shadow=a.shadow.clone(),this}}rg.prototype.isPointLight=!0;class wf extends fr{constructor(a=-1,c=1,m=1,v=-1,b=.1,C=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=a,this.right=c,this.top=m,this.bottom=v,this.near=b,this.far=C,this.updateProjectionMatrix()}copy(a,c){return super.copy(a,c),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=null===a.view?null:Object.assign({},a.view),this}setViewOffset(a,c,m,v,b,C){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=c,this.view.offsetX=m,this.view.offsetY=v,this.view.width=b,this.view.height=C,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const a=(this.right-this.left)/(2*this.zoom),c=(this.top-this.bottom)/(2*this.zoom),m=(this.right+this.left)/2,v=(this.top+this.bottom)/2;let b=m-a,C=m+a,D=v+c,S=v-c;if(null!==this.view&&this.view.enabled){const A=(this.right-this.left)/this.view.fullWidth/this.zoom,k=(this.top-this.bottom)/this.view.fullHeight/this.zoom;b+=A*this.view.offsetX,C=b+A*this.view.width,D-=k*this.view.offsetY,S=D-k*this.view.height}this.projectionMatrix.makeOrthographic(b,C,D,S,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){const c=it.prototype.toJSON.call(this,a);return c.object.zoom=this.zoom,c.object.left=this.left,c.object.right=this.right,c.object.top=this.top,c.object.bottom=this.bottom,c.object.near=this.near,c.object.far=this.far,null!==this.view&&(c.object.view=Object.assign({},this.view)),c}}wf.prototype.isOrthographicCamera=!0;class kC extends tg{constructor(){super(new wf(-5,5,5,-5,.5,500))}}kC.prototype.isDirectionalLightShadow=!0;class By extends ua{constructor(a,c){super(a,c),this.type="DirectionalLight",this.position.copy(it.DefaultUp),this.updateMatrix(),this.target=new it,this.shadow=new kC}copy(a){return super.copy(a),this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}By.prototype.isDirectionalLight=!0;class Vy extends ua{constructor(a,c){super(a,c),this.type="AmbientLight"}}Vy.prototype.isAmbientLight=!0;class Gy extends ua{constructor(a,c,m=10,v=10){super(a,c),this.type="RectAreaLight",this.width=m,this.height=v}copy(a){return super.copy(a),this.width=a.width,this.height=a.height,this}toJSON(a){const c=super.toJSON(a);return c.object.width=this.width,c.object.height=this.height,c}}Gy.prototype.isRectAreaLight=!0;class sg{constructor(){this.coefficients=[];for(let a=0;a<9;a++)this.coefficients.push(new ee)}set(a){for(let c=0;c<9;c++)this.coefficients[c].copy(a[c]);return this}zero(){for(let a=0;a<9;a++)this.coefficients[a].set(0,0,0);return this}getAt(a,c){const m=a.x,v=a.y,b=a.z,C=this.coefficients;return c.copy(C[0]).multiplyScalar(.282095),c.addScaledVector(C[1],.488603*v),c.addScaledVector(C[2],.488603*b),c.addScaledVector(C[3],.488603*m),c.addScaledVector(C[4],m*v*1.092548),c.addScaledVector(C[5],v*b*1.092548),c.addScaledVector(C[6],.315392*(3*b*b-1)),c.addScaledVector(C[7],m*b*1.092548),c.addScaledVector(C[8],.546274*(m*m-v*v)),c}getIrradianceAt(a,c){const m=a.x,v=a.y,b=a.z,C=this.coefficients;return c.copy(C[0]).multiplyScalar(.886227),c.addScaledVector(C[1],1.023328*v),c.addScaledVector(C[2],1.023328*b),c.addScaledVector(C[3],1.023328*m),c.addScaledVector(C[4],.858086*m*v),c.addScaledVector(C[5],.858086*v*b),c.addScaledVector(C[6],.743125*b*b-.247708),c.addScaledVector(C[7],.858086*m*b),c.addScaledVector(C[8],.429043*(m*m-v*v)),c}add(a){for(let c=0;c<9;c++)this.coefficients[c].add(a.coefficients[c]);return this}addScaledSH(a,c){for(let m=0;m<9;m++)this.coefficients[m].addScaledVector(a.coefficients[m],c);return this}scale(a){for(let c=0;c<9;c++)this.coefficients[c].multiplyScalar(a);return this}lerp(a,c){for(let m=0;m<9;m++)this.coefficients[m].lerp(a.coefficients[m],c);return this}equals(a){for(let c=0;c<9;c++)if(!this.coefficients[c].equals(a.coefficients[c]))return!1;return!0}copy(a){return this.set(a.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(a,c=0){const m=this.coefficients;for(let v=0;v<9;v++)m[v].fromArray(a,c+3*v);return this}toArray(a=[],c=0){const m=this.coefficients;for(let v=0;v<9;v++)m[v].toArray(a,c+3*v);return a}static getBasisAt(a,c){const m=a.x,v=a.y,b=a.z;c[0]=.282095,c[1]=.488603*v,c[2]=.488603*b,c[3]=.488603*m,c[4]=1.092548*m*v,c[5]=1.092548*v*b,c[6]=.315392*(3*b*b-1),c[7]=1.092548*m*b,c[8]=.546274*(m*m-v*v)}}sg.prototype.isSphericalHarmonics3=!0;class f_ extends ua{constructor(a=new sg,c=1){super(void 0,c),this.sh=a}copy(a){return super.copy(a),this.sh.copy(a.sh),this}fromJSON(a){return this.intensity=a.intensity,this.sh.fromArray(a.sh),this}toJSON(a){const c=super.toJSON(a);return c.object.sh=this.sh.toArray(),c}}f_.prototype.isLightProbe=!0;class Uy extends br{constructor(a){super(a),this.textures={}}load(a,c,m,v){const b=this,C=new Gs(b.manager);C.setPath(b.path),C.setRequestHeader(b.requestHeader),C.setWithCredentials(b.withCredentials),C.load(a,function(D){try{c(b.parse(JSON.parse(D)))}catch(S){v?v(S):console.error(S),b.manager.itemError(a)}},m,v)}parse(a){const c=this.textures;function m(b){return void 0===c[b]&&console.warn("THREE.MaterialLoader: Undefined texture",b),c[b]}const v=new bo[a.type];if(void 0!==a.uuid&&(v.uuid=a.uuid),void 0!==a.name&&(v.name=a.name),void 0!==a.color&&void 0!==v.color&&v.color.setHex(a.color),void 0!==a.roughness&&(v.roughness=a.roughness),void 0!==a.metalness&&(v.metalness=a.metalness),void 0!==a.sheen&&(v.sheen=(new Jt).setHex(a.sheen)),void 0!==a.emissive&&void 0!==v.emissive&&v.emissive.setHex(a.emissive),void 0!==a.specular&&void 0!==v.specular&&v.specular.setHex(a.specular),void 0!==a.shininess&&(v.shininess=a.shininess),void 0!==a.clearcoat&&(v.clearcoat=a.clearcoat),void 0!==a.clearcoatRoughness&&(v.clearcoatRoughness=a.clearcoatRoughness),void 0!==a.fog&&(v.fog=a.fog),void 0!==a.flatShading&&(v.flatShading=a.flatShading),void 0!==a.blending&&(v.blending=a.blending),void 0!==a.combine&&(v.combine=a.combine),void 0!==a.side&&(v.side=a.side),void 0!==a.opacity&&(v.opacity=a.opacity),void 0!==a.transparent&&(v.transparent=a.transparent),void 0!==a.alphaTest&&(v.alphaTest=a.alphaTest),void 0!==a.depthTest&&(v.depthTest=a.depthTest),void 0!==a.depthWrite&&(v.depthWrite=a.depthWrite),void 0!==a.colorWrite&&(v.colorWrite=a.colorWrite),void 0!==a.stencilWrite&&(v.stencilWrite=a.stencilWrite),void 0!==a.stencilWriteMask&&(v.stencilWriteMask=a.stencilWriteMask),void 0!==a.stencilFunc&&(v.stencilFunc=a.stencilFunc),void 0!==a.stencilRef&&(v.stencilRef=a.stencilRef),void 0!==a.stencilFuncMask&&(v.stencilFuncMask=a.stencilFuncMask),void 0!==a.stencilFail&&(v.stencilFail=a.stencilFail),void 0!==a.stencilZFail&&(v.stencilZFail=a.stencilZFail),void 0!==a.stencilZPass&&(v.stencilZPass=a.stencilZPass),void 0!==a.wireframe&&(v.wireframe=a.wireframe),void 0!==a.wireframeLinewidth&&(v.wireframeLinewidth=a.wireframeLinewidth),void 0!==a.wireframeLinecap&&(v.wireframeLinecap=a.wireframeLinecap),void 0!==a.wireframeLinejoin&&(v.wireframeLinejoin=a.wireframeLinejoin),void 0!==a.rotation&&(v.rotation=a.rotation),1!==a.linewidth&&(v.linewidth=a.linewidth),void 0!==a.dashSize&&(v.dashSize=a.dashSize),void 0!==a.gapSize&&(v.gapSize=a.gapSize),void 0!==a.scale&&(v.scale=a.scale),void 0!==a.polygonOffset&&(v.polygonOffset=a.polygonOffset),void 0!==a.polygonOffsetFactor&&(v.polygonOffsetFactor=a.polygonOffsetFactor),void 0!==a.polygonOffsetUnits&&(v.polygonOffsetUnits=a.polygonOffsetUnits),void 0!==a.skinning&&(v.skinning=a.skinning),void 0!==a.morphTargets&&(v.morphTargets=a.morphTargets),void 0!==a.morphNormals&&(v.morphNormals=a.morphNormals),void 0!==a.dithering&&(v.dithering=a.dithering),void 0!==a.vertexTangents&&(v.vertexTangents=a.vertexTangents),void 0!==a.visible&&(v.visible=a.visible),void 0!==a.toneMapped&&(v.toneMapped=a.toneMapped),void 0!==a.userData&&(v.userData=a.userData),void 0!==a.vertexColors&&(v.vertexColors="number"==typeof a.vertexColors?a.vertexColors>0:a.vertexColors),void 0!==a.uniforms)for(const b in a.uniforms){const C=a.uniforms[b];switch(v.uniforms[b]={},C.type){case"t":v.uniforms[b].value=m(C.value);break;case"c":v.uniforms[b].value=(new Jt).setHex(C.value);break;case"v2":v.uniforms[b].value=(new et).fromArray(C.value);break;case"v3":v.uniforms[b].value=(new ee).fromArray(C.value);break;case"v4":v.uniforms[b].value=(new Di).fromArray(C.value);break;case"m3":v.uniforms[b].value=(new cs).fromArray(C.value);break;case"m4":v.uniforms[b].value=(new fn).fromArray(C.value);break;default:v.uniforms[b].value=C.value}}if(void 0!==a.defines&&(v.defines=a.defines),void 0!==a.vertexShader&&(v.vertexShader=a.vertexShader),void 0!==a.fragmentShader&&(v.fragmentShader=a.fragmentShader),void 0!==a.extensions)for(const b in a.extensions)v.extensions[b]=a.extensions[b];if(void 0!==a.shading&&(v.flatShading=1===a.shading),void 0!==a.size&&(v.size=a.size),void 0!==a.sizeAttenuation&&(v.sizeAttenuation=a.sizeAttenuation),void 0!==a.map&&(v.map=m(a.map)),void 0!==a.matcap&&(v.matcap=m(a.matcap)),void 0!==a.alphaMap&&(v.alphaMap=m(a.alphaMap)),void 0!==a.bumpMap&&(v.bumpMap=m(a.bumpMap)),void 0!==a.bumpScale&&(v.bumpScale=a.bumpScale),void 0!==a.normalMap&&(v.normalMap=m(a.normalMap)),void 0!==a.normalMapType&&(v.normalMapType=a.normalMapType),void 0!==a.normalScale){let b=a.normalScale;!1===Array.isArray(b)&&(b=[b,b]),v.normalScale=(new et).fromArray(b)}return void 0!==a.displacementMap&&(v.displacementMap=m(a.displacementMap)),void 0!==a.displacementScale&&(v.displacementScale=a.displacementScale),void 0!==a.displacementBias&&(v.displacementBias=a.displacementBias),void 0!==a.roughnessMap&&(v.roughnessMap=m(a.roughnessMap)),void 0!==a.metalnessMap&&(v.metalnessMap=m(a.metalnessMap)),void 0!==a.emissiveMap&&(v.emissiveMap=m(a.emissiveMap)),void 0!==a.emissiveIntensity&&(v.emissiveIntensity=a.emissiveIntensity),void 0!==a.specularMap&&(v.specularMap=m(a.specularMap)),void 0!==a.envMap&&(v.envMap=m(a.envMap)),void 0!==a.envMapIntensity&&(v.envMapIntensity=a.envMapIntensity),void 0!==a.reflectivity&&(v.reflectivity=a.reflectivity),void 0!==a.refractionRatio&&(v.refractionRatio=a.refractionRatio),void 0!==a.lightMap&&(v.lightMap=m(a.lightMap)),void 0!==a.lightMapIntensity&&(v.lightMapIntensity=a.lightMapIntensity),void 0!==a.aoMap&&(v.aoMap=m(a.aoMap)),void 0!==a.aoMapIntensity&&(v.aoMapIntensity=a.aoMapIntensity),void 0!==a.gradientMap&&(v.gradientMap=m(a.gradientMap)),void 0!==a.clearcoatMap&&(v.clearcoatMap=m(a.clearcoatMap)),void 0!==a.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap=m(a.clearcoatRoughnessMap)),void 0!==a.clearcoatNormalMap&&(v.clearcoatNormalMap=m(a.clearcoatNormalMap)),void 0!==a.clearcoatNormalScale&&(v.clearcoatNormalScale=(new et).fromArray(a.clearcoatNormalScale)),void 0!==a.transmission&&(v.transmission=a.transmission),void 0!==a.transmissionMap&&(v.transmissionMap=m(a.transmissionMap)),v}setTextures(a){return this.textures=a,this}}const Bu={decodeText:function(p){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(p);let a="";for(let c=0,m=p.length;c<m;c++)a+=String.fromCharCode(p[c]);try{return decodeURIComponent(escape(a))}catch(c){return a}},extractUrlBase:function(p){const a=p.lastIndexOf("/");return-1===a?"./":p.substr(0,a+1)}};function ql(){Wt.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function $l(p,a,c,m){"number"==typeof c&&(m=c,c=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),_n.call(this,p,a,c),this.meshPerAttribute=m||1}ql.prototype=Object.assign(Object.create(Wt.prototype),{constructor:ql,isInstancedBufferGeometry:!0,copy:function(p){return Wt.prototype.copy.call(this,p),this.instanceCount=p.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const p=Wt.prototype.toJSON.call(this);return p.instanceCount=this.instanceCount,p.isInstancedBufferGeometry=!0,p}}),$l.prototype=Object.assign(Object.create(_n.prototype),{constructor:$l,isInstancedBufferAttribute:!0,copy:function(p){return _n.prototype.copy.call(this,p),this.meshPerAttribute=p.meshPerAttribute,this},toJSON:function(){const p=_n.prototype.toJSON.call(this);return p.meshPerAttribute=this.meshPerAttribute,p.isInstancedBufferAttribute=!0,p}});class og extends br{constructor(a){super(a)}load(a,c,m,v){const b=this,C=new Gs(b.manager);C.setPath(b.path),C.setRequestHeader(b.requestHeader),C.setWithCredentials(b.withCredentials),C.load(a,function(D){try{c(b.parse(JSON.parse(D)))}catch(S){v?v(S):console.error(S),b.manager.itemError(a)}},m,v)}parse(a){const c={},m={};function v(L,V){if(void 0!==c[V])return c[V];const W=L.interleavedBuffers[V],U=function b(L,V){if(void 0!==m[V])return m[V];const U=new Uint32Array(L.arrayBuffers[V]).buffer;return m[V]=U,U}(L,W.buffer),te=new Ds(tr(W.type,U),W.stride);return te.uuid=W.uuid,c[V]=te,te}const C=a.isInstancedBufferGeometry?new ql:new Wt,D=a.data.index;if(void 0!==D){const L=tr(D.type,D.array);C.setIndex(new _n(L,1))}const S=a.data.attributes;for(const L in S){const V=S[L];let z;if(V.isInterleavedBufferAttribute)z=new sa(v(a.data,V.data),V.itemSize,V.offset,V.normalized);else{const W=tr(V.type,V.array);z=new(V.isInstancedBufferAttribute?$l:_n)(W,V.itemSize,V.normalized)}void 0!==V.name&&(z.name=V.name),C.setAttribute(L,z)}const A=a.data.morphAttributes;if(A)for(const L in A){const V=A[L],z=[];for(let W=0,U=V.length;W<U;W++){const B=V[W];let te;te=B.isInterleavedBufferAttribute?new sa(v(a.data,B.data),B.itemSize,B.offset,B.normalized):new _n(tr(B.type,B.array),B.itemSize,B.normalized),void 0!==B.name&&(te.name=B.name),z.push(te)}C.morphAttributes[L]=z}a.data.morphTargetsRelative&&(C.morphTargetsRelative=!0);const R=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==R)for(let L=0,V=R.length;L!==V;++L){const z=R[L];C.addGroup(z.start,z.count,z.materialIndex)}const O=a.data.boundingSphere;if(void 0!==O){const L=new ee;void 0!==O.center&&L.fromArray(O.center),C.boundingSphere=new au(L,O.radius)}return a.name&&(C.name=a.name),a.userData&&(C.userData=a.userData),C}}class Hy extends br{constructor(a){super(a)}load(a,c,m,v){const b=this,C=""===this.path?Bu.extractUrlBase(a):this.path;this.resourcePath=this.resourcePath||C;const D=new Gs(this.manager);D.setPath(this.path),D.setRequestHeader(this.requestHeader),D.setWithCredentials(this.withCredentials),D.load(a,function(S){let A=null;try{A=JSON.parse(S)}catch(R){return void 0!==v&&v(R),void console.error("THREE:ObjectLoader: Can't parse "+a+".",R.message)}const k=A.metadata;void 0!==k&&void 0!==k.type&&"geometry"!==k.type.toLowerCase()?b.parse(A,c):console.error("THREE.ObjectLoader: Can't load "+a)},m,v)}parse(a,c){const m=this.parseAnimations(a.animations),v=this.parseShapes(a.shapes),b=this.parseGeometries(a.geometries,v),C=this.parseImages(a.images,function(){void 0!==c&&c(A)}),D=this.parseTextures(a.textures,C),S=this.parseMaterials(a.materials,D),A=this.parseObject(a.object,b,S,m),k=this.parseSkeletons(a.skeletons,A);if(this.bindSkeletons(A,k),void 0!==c){let R=!1;for(const O in C)if(C[O]instanceof HTMLImageElement){R=!0;break}!1===R&&c(A)}return A}parseShapes(a){const c={};if(void 0!==a)for(let m=0,v=a.length;m<v;m++){const b=(new Nu).fromJSON(a[m]);c[b.uuid]=b}return c}parseSkeletons(a,c){const m={},v={};if(c.traverse(function(b){b.isBone&&(v[b.uuid]=b)}),void 0!==a)for(let b=0,C=a.length;b<C;b++){const D=(new Jh).fromJSON(a[b],v);m[D.uuid]=D}return m}parseGeometries(a,c){const m={};let v;if(void 0!==a){const b=new og;for(let C=0,D=a.length;C<D;C++){let S;const A=a[C];switch(A.type){case"PlaneGeometry":case"PlaneBufferGeometry":S=new ur[A.type](A.width,A.height,A.widthSegments,A.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":S=new ur[A.type](A.width,A.height,A.depth,A.widthSegments,A.heightSegments,A.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":S=new ur[A.type](A.radius,A.segments,A.thetaStart,A.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":S=new ur[A.type](A.radiusTop,A.radiusBottom,A.height,A.radialSegments,A.heightSegments,A.openEnded,A.thetaStart,A.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":S=new ur[A.type](A.radius,A.height,A.radialSegments,A.heightSegments,A.openEnded,A.thetaStart,A.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":S=new ur[A.type](A.radius,A.widthSegments,A.heightSegments,A.phiStart,A.phiLength,A.thetaStart,A.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":S=new ur[A.type](A.radius,A.detail);break;case"RingGeometry":case"RingBufferGeometry":S=new ur[A.type](A.innerRadius,A.outerRadius,A.thetaSegments,A.phiSegments,A.thetaStart,A.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":S=new ur[A.type](A.radius,A.tube,A.radialSegments,A.tubularSegments,A.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":S=new ur[A.type](A.radius,A.tube,A.tubularSegments,A.radialSegments,A.p,A.q);break;case"TubeGeometry":case"TubeBufferGeometry":S=new ur[A.type]((new Nc[A.path.type]).fromJSON(A.path),A.tubularSegments,A.radius,A.radialSegments,A.closed);break;case"LatheGeometry":case"LatheBufferGeometry":S=new ur[A.type](A.points,A.segments,A.phiStart,A.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":S=new ur[A.type](A.vertices,A.indices,A.radius,A.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":v=[];for(let R=0,O=A.shapes.length;R<O;R++)v.push(c[A.shapes[R]]);S=new ur[A.type](v,A.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":v=[];for(let R=0,O=A.shapes.length;R<O;R++)v.push(c[A.shapes[R]]);const k=A.options.extrudePath;void 0!==k&&(A.options.extrudePath=(new Nc[k.type]).fromJSON(k)),S=new ur[A.type](v,A.options);break;case"BufferGeometry":case"InstancedBufferGeometry":S=b.parse(A);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+A.type+'"');continue}S.uuid=A.uuid,void 0!==A.name&&(S.name=A.name),!0===S.isBufferGeometry&&void 0!==A.userData&&(S.userData=A.userData),m[A.uuid]=S}}return m}parseMaterials(a,c){const m={},v={};if(void 0!==a){const b=new Uy;b.setTextures(c);for(let C=0,D=a.length;C<D;C++){const S=a[C];if("MultiMaterial"===S.type){const A=[];for(let k=0;k<S.materials.length;k++){const R=S.materials[k];void 0===m[R.uuid]&&(m[R.uuid]=b.parse(R)),A.push(m[R.uuid])}v[S.uuid]=A}else void 0===m[S.uuid]&&(m[S.uuid]=b.parse(S)),v[S.uuid]=m[S.uuid]}}return v}parseAnimations(a){const c={};if(void 0!==a)for(let m=0;m<a.length;m++){const b=pf.parse(a[m]);c[b.uuid]=b}return c}parseImages(a,c){const m=this,v={};let b;function D(S){if("string"==typeof S){const A=S;return function C(S){return m.manager.itemStart(S),b.load(S,function(){m.manager.itemEnd(S)},void 0,function(){m.manager.itemError(S),m.manager.itemEnd(S)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(A)?A:m.resourcePath+A)}return S.data?{data:tr(S.type,S.data),width:S.width,height:S.height}:null}if(void 0!==a&&a.length>0){const S=new l_(c);b=new Wl(S),b.setCrossOrigin(this.crossOrigin);for(let A=0,k=a.length;A<k;A++){const R=a[A],O=R.url;if(Array.isArray(O)){v[R.uuid]=[];for(let L=0,V=O.length;L<V;L++){const W=D(O[L]);null!==W&&(W instanceof HTMLImageElement?v[R.uuid].push(W):v[R.uuid].push(new _c(W.data,W.width,W.height)))}}else{const L=D(R.url);null!==L&&(v[R.uuid]=L)}}}return v}parseTextures(a,c){function m(b,C){return"number"==typeof b?b:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",b),C[b])}const v={};if(void 0!==a)for(let b=0,C=a.length;b<C;b++){const D=a[b];let S;void 0===D.image&&console.warn('THREE.ObjectLoader: No "image" specified for',D.uuid),void 0===c[D.image]&&console.warn("THREE.ObjectLoader: Undefined image",D.image);const A=c[D.image];Array.isArray(A)?(S=new pu(A),6===A.length&&(S.needsUpdate=!0)):(S=A&&A.data?new _c(A.data,A.width,A.height):new Bi(A),A&&(S.needsUpdate=!0)),S.uuid=D.uuid,void 0!==D.name&&(S.name=D.name),void 0!==D.mapping&&(S.mapping=m(D.mapping,ag)),void 0!==D.offset&&S.offset.fromArray(D.offset),void 0!==D.repeat&&S.repeat.fromArray(D.repeat),void 0!==D.center&&S.center.fromArray(D.center),void 0!==D.rotation&&(S.rotation=D.rotation),void 0!==D.wrap&&(S.wrapS=m(D.wrap[0],mw),S.wrapT=m(D.wrap[1],mw)),void 0!==D.format&&(S.format=D.format),void 0!==D.type&&(S.type=D.type),void 0!==D.encoding&&(S.encoding=D.encoding),void 0!==D.minFilter&&(S.minFilter=m(D.minFilter,zy)),void 0!==D.magFilter&&(S.magFilter=m(D.magFilter,zy)),void 0!==D.anisotropy&&(S.anisotropy=D.anisotropy),void 0!==D.flipY&&(S.flipY=D.flipY),void 0!==D.premultiplyAlpha&&(S.premultiplyAlpha=D.premultiplyAlpha),void 0!==D.unpackAlignment&&(S.unpackAlignment=D.unpackAlignment),v[D.uuid]=S}return v}parseObject(a,c,m,v){let b,S,A;function C(k){return void 0===c[k]&&console.warn("THREE.ObjectLoader: Undefined geometry",k),c[k]}function D(k){if(void 0!==k){if(Array.isArray(k)){const R=[];for(let O=0,L=k.length;O<L;O++){const V=k[O];void 0===m[V]&&console.warn("THREE.ObjectLoader: Undefined material",V),R.push(m[V])}return R}return void 0===m[k]&&console.warn("THREE.ObjectLoader: Undefined material",k),m[k]}}switch(a.type){case"Scene":b=new Wm,void 0!==a.background&&Number.isInteger(a.background)&&(b.background=new Jt(a.background)),void 0!==a.fog&&("Fog"===a.fog.type?b.fog=new wa(a.fog.color,a.fog.near,a.fog.far):"FogExp2"===a.fog.type&&(b.fog=new Np(a.fog.color,a.fog.density)));break;case"PerspectiveCamera":b=new nr(a.fov,a.aspect,a.near,a.far),void 0!==a.focus&&(b.focus=a.focus),void 0!==a.zoom&&(b.zoom=a.zoom),void 0!==a.filmGauge&&(b.filmGauge=a.filmGauge),void 0!==a.filmOffset&&(b.filmOffset=a.filmOffset),void 0!==a.view&&(b.view=Object.assign({},a.view));break;case"OrthographicCamera":b=new wf(a.left,a.right,a.top,a.bottom,a.near,a.far),void 0!==a.zoom&&(b.zoom=a.zoom),void 0!==a.view&&(b.view=Object.assign({},a.view));break;case"AmbientLight":b=new Vy(a.color,a.intensity);break;case"DirectionalLight":b=new By(a.color,a.intensity);break;case"PointLight":b=new rg(a.color,a.intensity,a.distance,a.decay);break;case"RectAreaLight":b=new Gy(a.color,a.intensity,a.width,a.height);break;case"SpotLight":b=new qd(a.color,a.intensity,a.distance,a.angle,a.penumbra,a.decay);break;case"HemisphereLight":b=new ul(a.color,a.groundColor,a.intensity);break;case"LightProbe":b=(new f_).fromJSON(a);break;case"SkinnedMesh":S=C(a.geometry),A=D(a.material),b=new Da(S,A),void 0!==a.bindMode&&(b.bindMode=a.bindMode),void 0!==a.bindMatrix&&b.bindMatrix.fromArray(a.bindMatrix),void 0!==a.skeleton&&(b.skeleton=a.skeleton);break;case"Mesh":S=C(a.geometry),A=D(a.material),b=new ei(S,A);break;case"InstancedMesh":S=C(a.geometry),A=D(a.material);const R=a.instanceMatrix;b=new kd(S,A,a.count),b.instanceMatrix=new _n(new Float32Array(R.array),16);break;case"LOD":b=new Su;break;case"Line":b=new nl(C(a.geometry),D(a.material));break;case"LineLoop":b=new Ac(C(a.geometry),D(a.material));break;case"LineSegments":b=new Bn(C(a.geometry),D(a.material));break;case"PointCloud":case"Points":b=new Tc(C(a.geometry),D(a.material));break;case"Sprite":b=new Sc(D(a.material));break;case"Group":b=new Mc;break;case"Bone":b=new Od;break;default:b=new it}if(b.uuid=a.uuid,void 0!==a.name&&(b.name=a.name),void 0!==a.matrix?(b.matrix.fromArray(a.matrix),void 0!==a.matrixAutoUpdate&&(b.matrixAutoUpdate=a.matrixAutoUpdate),b.matrixAutoUpdate&&b.matrix.decompose(b.position,b.quaternion,b.scale)):(void 0!==a.position&&b.position.fromArray(a.position),void 0!==a.rotation&&b.rotation.fromArray(a.rotation),void 0!==a.quaternion&&b.quaternion.fromArray(a.quaternion),void 0!==a.scale&&b.scale.fromArray(a.scale)),void 0!==a.castShadow&&(b.castShadow=a.castShadow),void 0!==a.receiveShadow&&(b.receiveShadow=a.receiveShadow),a.shadow&&(void 0!==a.shadow.bias&&(b.shadow.bias=a.shadow.bias),void 0!==a.shadow.normalBias&&(b.shadow.normalBias=a.shadow.normalBias),void 0!==a.shadow.radius&&(b.shadow.radius=a.shadow.radius),void 0!==a.shadow.mapSize&&b.shadow.mapSize.fromArray(a.shadow.mapSize),void 0!==a.shadow.camera&&(b.shadow.camera=this.parseObject(a.shadow.camera))),void 0!==a.visible&&(b.visible=a.visible),void 0!==a.frustumCulled&&(b.frustumCulled=a.frustumCulled),void 0!==a.renderOrder&&(b.renderOrder=a.renderOrder),void 0!==a.userData&&(b.userData=a.userData),void 0!==a.layers&&(b.layers.mask=a.layers),void 0!==a.children){const k=a.children;for(let R=0;R<k.length;R++)b.add(this.parseObject(k[R],c,m,v))}if(void 0!==a.animations){const k=a.animations;for(let R=0;R<k.length;R++)b.animations.push(v[k[R]])}if("LOD"===a.type){void 0!==a.autoUpdate&&(b.autoUpdate=a.autoUpdate);const k=a.levels;for(let R=0;R<k.length;R++){const O=k[R],L=b.getObjectByProperty("uuid",O.object);void 0!==L&&b.addLevel(L,O.distance)}}return b}bindSkeletons(a,c){0!==Object.keys(c).length&&a.traverse(function(m){if(!0===m.isSkinnedMesh&&void 0!==m.skeleton){const v=c[m.skeleton];void 0===v?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",m.skeleton):m.bind(v,m.bindMatrix)}})}setTexturePath(a){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(a)}}const ag={UVMapping:dh,CubeReflectionMapping:js,CubeRefractionMapping:Ws,EquirectangularReflectionMapping:eu,EquirectangularRefractionMapping:qg,CubeUVReflectionMapping:bi,CubeUVRefractionMapping:yn},mw={RepeatWrapping:Vn,ClampToEdgeWrapping:Ps,MirroredRepeatWrapping:ic},zy={NearestFilter:Tn,NearestMipmapNearestFilter:tu,NearestMipmapLinearFilter:Ba,LinearFilter:de,LinearMipmapNearestFilter:ae,LinearMipmapLinearFilter:Ye};function jy(p){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),br.call(this,p),this.options={premultiplyAlpha:"none"}}jy.prototype=Object.assign(Object.create(br.prototype),{constructor:jy,isImageBitmapLoader:!0,setOptions:function(a){return this.options=a,this},load:function(p,a,c,m){void 0===p&&(p=""),void 0!==this.path&&(p=this.path+p),p=this.manager.resolveURL(p);const v=this,b=sl.get(p);if(void 0!==b)return v.manager.itemStart(p),setTimeout(function(){a&&a(b),v.manager.itemEnd(p)},0),b;const C={};C.credentials="anonymous"===this.crossOrigin?"same-origin":"include",C.headers=this.requestHeader,fetch(p,C).then(function(D){return D.blob()}).then(function(D){return createImageBitmap(D,Object.assign(v.options,{colorSpaceConversion:"none"}))}).then(function(D){sl.add(p,D),a&&a(D),v.manager.itemEnd(p)}).catch(function(D){m&&m(D),v.manager.itemError(p),v.manager.itemEnd(p)}),v.manager.itemStart(p)}});class _w{constructor(){this.type="ShapePath",this.color=new Jt,this.subPaths=[],this.currentPath=null}moveTo(a,c){return this.currentPath=new yf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(a,c),this}lineTo(a,c){return this.currentPath.lineTo(a,c),this}quadraticCurveTo(a,c,m,v){return this.currentPath.quadraticCurveTo(a,c,m,v),this}bezierCurveTo(a,c,m,v,b,C){return this.currentPath.bezierCurveTo(a,c,m,v,b,C),this}splineThru(a){return this.currentPath.splineThru(a),this}toShapes(a,c){function m(B){const te=[];for(let X=0,se=B.length;X<se;X++){const K=B[X],he=new Nu;he.curves=K.curves,te.push(he)}return te}function v(B,te){const X=te.length;let se=!1;for(let K=X-1,he=0;he<X;K=he++){let Ie=te[K],xe=te[he],Pe=xe.x-Ie.x,Be=xe.y-Ie.y;if(Math.abs(Be)>Number.EPSILON){if(Be<0&&(Ie=te[he],Pe=-Pe,xe=te[K],Be=-Be),B.y<Ie.y||B.y>xe.y)continue;if(B.y===Ie.y){if(B.x===Ie.x)return!0}else{const Ke=Be*(B.x-Ie.x)-Pe*(B.y-Ie.y);if(0===Ke)return!0;if(Ke<0)continue;se=!se}}else{if(B.y!==Ie.y)continue;if(xe.x<=B.x&&B.x<=Ie.x||Ie.x<=B.x&&B.x<=xe.x)return!0}}return se}const b=Ul.isClockWise,C=this.subPaths;if(0===C.length)return[];if(!0===c)return m(C);let D,S,A;const k=[];if(1===C.length)return S=C[0],A=new Nu,A.curves=S.curves,k.push(A),k;let R=!b(C[0].getPoints());R=a?!R:R;const O=[],L=[];let W,U,V=[],z=0;L[z]=void 0,V[z]=[];for(let B=0,te=C.length;B<te;B++)S=C[B],W=S.getPoints(),D=b(W),D=a?!D:D,D?(!R&&L[z]&&z++,L[z]={s:new Nu,p:W},L[z].s.curves=S.curves,R&&z++,V[z]=[]):V[z].push({h:S,p:W[0]});if(!L[0])return m(C);if(L.length>1){let B=!1;const te=[];for(let X=0,se=L.length;X<se;X++)O[X]=[];for(let X=0,se=L.length;X<se;X++){const K=V[X];for(let he=0;he<K.length;he++){const Ie=K[he];let xe=!0;for(let Pe=0;Pe<L.length;Pe++)v(Ie.p,L[Pe].p)&&(X!==Pe&&te.push({froms:X,tos:Pe,hole:he}),xe?(xe=!1,O[Pe].push(Ie)):B=!0);xe&&O[X].push(Ie)}}te.length>0&&(B||(V=O))}for(let B=0,te=L.length;B<te;B++){A=L[B].s,k.push(A),U=V[B];for(let X=0,se=U.length;X<se;X++)A.holes.push(U[X].h)}return k}}class lg{constructor(a){this.type="Font",this.data=a}generateShapes(a,c=100){const m=[],v=function As(p,a,c){const m=Array.from(p),v=a/c.resolution,b=(c.boundingBox.yMax-c.boundingBox.yMin+c.underlineThickness)*v,C=[];let D=0,S=0;for(let A=0;A<m.length;A++){const k=m[A];if("\n"===k)D=0,S-=b;else{const R=FC(k,v,D,S,c);D+=R.offsetX,C.push(R.path)}}return C}(a,c,this.data);for(let b=0,C=v.length;b<C;b++)Array.prototype.push.apply(m,v[b].toShapes());return m}}function FC(p,a,c,m,v){const b=v.glyphs[p]||v.glyphs["?"];if(!b)return void console.error('THREE.Font: character "'+p+'" does not exists in font family '+v.familyName+".");const C=new _w;let D,S,A,k,R,O,L,V;if(b.o){const z=b._cachedOutline||(b._cachedOutline=b.o.split(" "));for(let W=0,U=z.length;W<U;)switch(z[W++]){case"m":D=z[W++]*a+c,S=z[W++]*a+m,C.moveTo(D,S);break;case"l":D=z[W++]*a+c,S=z[W++]*a+m,C.lineTo(D,S);break;case"q":A=z[W++]*a+c,k=z[W++]*a+m,R=z[W++]*a+c,O=z[W++]*a+m,C.quadraticCurveTo(R,O,A,k);break;case"b":A=z[W++]*a+c,k=z[W++]*a+m,R=z[W++]*a+c,O=z[W++]*a+m,L=z[W++]*a+c,V=z[W++]*a+m,C.bezierCurveTo(R,O,L,V,A,k)}}return{offsetX:b.ha*a,path:C}}lg.prototype.isFont=!0;class vw extends br{constructor(a){super(a)}load(a,c,m,v){const b=this,C=new Gs(this.manager);C.setPath(this.path),C.setRequestHeader(this.requestHeader),C.setWithCredentials(b.withCredentials),C.load(a,function(D){let S;try{S=JSON.parse(D)}catch(k){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),S=JSON.parse(D.substring(65,D.length-2))}const A=b.parse(S);c&&c(A)},m,v)}parse(a){return new lg(a)}}let p_;const g_={getContext:function(){return void 0===p_&&(p_=new(window.AudioContext||window.webkitAudioContext)),p_},setContext:function(p){p_=p}};class Wy extends br{constructor(a){super(a)}load(a,c,m,v){const b=this,C=new Gs(this.manager);C.setResponseType("arraybuffer"),C.setPath(this.path),C.setRequestHeader(this.requestHeader),C.setWithCredentials(this.withCredentials),C.load(a,function(D){try{const S=D.slice(0);g_.getContext().decodeAudioData(S,function(k){c(k)})}catch(S){v?v(S):console.error(S),b.manager.itemError(a)}},m,v)}}class m_ extends f_{constructor(a,c,m=1){super(void 0,m);const v=(new Jt).set(a),b=(new Jt).set(c),C=new ee(v.r,v.g,v.b),D=new ee(b.r,b.g,b.b),S=Math.sqrt(Math.PI),A=S*Math.sqrt(.75);this.sh.coefficients[0].copy(C).add(D).multiplyScalar(S),this.sh.coefficients[1].copy(C).sub(D).multiplyScalar(A)}}m_.prototype.isHemisphereLightProbe=!0;class LC extends f_{constructor(a,c=1){super(void 0,c);const m=(new Jt).set(a);this.sh.coefficients[0].set(m.r,m.g,m.b).multiplyScalar(2*Math.sqrt(Math.PI))}}LC.prototype.isAmbientLightProbe=!0;const is=new fn,Yy=new fn;class NC{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new nr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new nr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(a){const c=this._cache;if(c.focus!==a.focus||c.fov!==a.fov||c.aspect!==a.aspect*this.aspect||c.near!==a.near||c.far!==a.far||c.zoom!==a.zoom||c.eyeSep!==this.eyeSep){c.focus=a.focus,c.fov=a.fov,c.aspect=a.aspect*this.aspect,c.near=a.near,c.far=a.far,c.zoom=a.zoom,c.eyeSep=this.eyeSep;const v=a.projectionMatrix.clone(),b=c.eyeSep/2,C=b*c.near/c.focus,D=c.near*Math.tan(Ne.DEG2RAD*c.fov*.5)/c.zoom;let S,A;Yy.elements[12]=-b,is.elements[12]=b,S=-D*c.aspect+C,A=D*c.aspect+C,v.elements[0]=2*c.near/(A-S),v.elements[8]=(A+S)/(A-S),this.cameraL.projectionMatrix.copy(v),S=-D*c.aspect-C,A=D*c.aspect-C,v.elements[0]=2*c.near/(A-S),v.elements[8]=(A+S)/(A-S),this.cameraR.projectionMatrix.copy(v)}this.cameraL.matrixWorld.copy(a.matrixWorld).multiply(Yy),this.cameraR.matrixWorld.copy(a.matrixWorld).multiply(is)}}class Vu{constructor(a){this.autoStart=void 0===a||a,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=__(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const c=__();a=(c-this.oldTime)/1e3,this.oldTime=c,this.elapsedTime+=a}return a}}function __(){return("undefined"==typeof performance?Date:performance).now()}const dl=new ee,cg=new Fr,BC=new ee,hl=new ee;class ug extends it{constructor(){super(),this.type="AudioListener",this.context=g_.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Vu}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(a){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=a,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(a){return this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01),this}updateMatrixWorld(a){super.updateMatrixWorld(a);const c=this.context.listener,m=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(dl,cg,BC),hl.set(0,0,-1).applyQuaternion(cg),c.positionX){const v=this.context.currentTime+this.timeDelta;c.positionX.linearRampToValueAtTime(dl.x,v),c.positionY.linearRampToValueAtTime(dl.y,v),c.positionZ.linearRampToValueAtTime(dl.z,v),c.forwardX.linearRampToValueAtTime(hl.x,v),c.forwardY.linearRampToValueAtTime(hl.y,v),c.forwardZ.linearRampToValueAtTime(hl.z,v),c.upX.linearRampToValueAtTime(m.x,v),c.upY.linearRampToValueAtTime(m.y,v),c.upZ.linearRampToValueAtTime(m.z,v)}else c.setPosition(dl.x,dl.y,dl.z),c.setOrientation(hl.x,hl.y,hl.z,m.x,m.y,m.z)}}class dg extends it{constructor(a){super(),this.type="Audio",this.listener=a,this.context=a.context,this.gain=this.context.createGain(),this.gain.connect(a.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(a){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=a,this.connect(),this}setMediaElementSource(a){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(a),this.connect(),this}setMediaStreamSource(a){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(a),this.connect(),this}setBuffer(a){return this.buffer=a,this.sourceType="buffer",this.autoplay&&this.play(),this}play(a=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+a;const c=this.context.createBufferSource();return c.buffer=this.buffer,c.loop=this.loop,c.loopStart=this.loopStart,c.loopEnd=this.loopEnd,c.onended=this.onEnded.bind(this),c.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=c,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let a=1,c=this.filters.length;a<c;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let a=1,c=this.filters.length;a<c;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(a){return a||(a=[]),!0===this._connected?(this.disconnect(),this.filters=a.slice(),this.connect()):this.filters=a.slice(),this}setDetune(a){if(this.detune=a,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(a){return this.setFilters(a?[a]:[])}setPlaybackRate(a){if(!1!==this.hasPlaybackControl)return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(a){if(!1!==this.hasPlaybackControl)return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(a){return this.loopStart=a,this}setLoopEnd(a){return this.loopEnd=a,this}getVolume(){return this.gain.gain.value}setVolume(a){return this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01),this}}const xf=new ee,qy=new Fr,$y=new ee,Bc=new ee;class yw extends dg{constructor(a){super(a),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(a){return this.panner.refDistance=a,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(a){return this.panner.rolloffFactor=a,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(a){return this.panner.distanceModel=a,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(a){return this.panner.maxDistance=a,this}setDirectionalCone(a,c,m){return this.panner.coneInnerAngle=a,this.panner.coneOuterAngle=c,this.panner.coneOuterGain=m,this}updateMatrixWorld(a){if(super.updateMatrixWorld(a),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(xf,qy,$y),Bc.set(0,0,1).applyQuaternion(qy);const c=this.panner;if(c.positionX){const m=this.context.currentTime+this.listener.timeDelta;c.positionX.linearRampToValueAtTime(xf.x,m),c.positionY.linearRampToValueAtTime(xf.y,m),c.positionZ.linearRampToValueAtTime(xf.z,m),c.orientationX.linearRampToValueAtTime(Bc.x,m),c.orientationY.linearRampToValueAtTime(Bc.y,m),c.orientationZ.linearRampToValueAtTime(Bc.z,m)}else c.setPosition(xf.x,xf.y,xf.z),c.setOrientation(Bc.x,Bc.y,Bc.z)}}class v_{constructor(a,c=2048){this.analyser=a.context.createAnalyser(),this.analyser.fftSize=c,this.data=new Uint8Array(this.analyser.frequencyBinCount),a.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let a=0;const c=this.getFrequencyData();for(let m=0;m<c.length;m++)a+=c[m];return a/c.length}}class $d{constructor(a,c,m){let v,b,C;switch(this.binding=a,this.valueSize=m,c){case"quaternion":v=this._slerp,b=this._slerpAdditive,C=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*m),this._workIndex=5;break;case"string":case"bool":v=this._select,b=this._select,C=this._setAdditiveIdentityOther,this.buffer=new Array(5*m);break;default:v=this._lerp,b=this._lerpAdditive,C=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*m)}this._mixBufferRegion=v,this._mixBufferRegionAdditive=b,this._setIdentity=C,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(a,c){const m=this.buffer,v=this.valueSize,b=a*v+v;let C=this.cumulativeWeight;if(0===C){for(let D=0;D!==v;++D)m[b+D]=m[D];C=c}else C+=c,this._mixBufferRegion(m,b,0,c/C,v);this.cumulativeWeight=C}accumulateAdditive(a){const c=this.buffer,m=this.valueSize,v=m*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(c,v,0,a,m),this.cumulativeWeightAdditive+=a}apply(a){const c=this.valueSize,m=this.buffer,v=a*c+c,b=this.cumulativeWeight,C=this.cumulativeWeightAdditive,D=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,b<1&&this._mixBufferRegion(m,v,c*this._origIndex,1-b,c),C>0&&this._mixBufferRegionAdditive(m,v,this._addIndex*c,1,c);for(let S=c,A=c+c;S!==A;++S)if(m[S]!==m[S+c]){D.setValue(m,v);break}}saveOriginalState(){const c=this.buffer,m=this.valueSize,v=m*this._origIndex;this.binding.getValue(c,v);for(let b=m,C=v;b!==C;++b)c[b]=c[v+b%m];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const a=this._addIndex*this.valueSize,c=a+this.valueSize;for(let m=a;m<c;m++)this.buffer[m]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const a=this._origIndex*this.valueSize,c=this._addIndex*this.valueSize;for(let m=0;m<this.valueSize;m++)this.buffer[c+m]=this.buffer[a+m]}_select(a,c,m,v,b){if(v>=.5)for(let C=0;C!==b;++C)a[c+C]=a[m+C]}_slerp(a,c,m,v){Fr.slerpFlat(a,c,a,c,a,m,v)}_slerpAdditive(a,c,m,v,b){const C=this._workIndex*b;Fr.multiplyQuaternionsFlat(a,C,a,c,a,m),Fr.slerpFlat(a,c,a,c,a,C,v)}_lerp(a,c,m,v,b){const C=1-v;for(let D=0;D!==b;++D){const S=c+D;a[S]=a[S]*C+a[m+D]*v}}_lerpAdditive(a,c,m,v,b){for(let C=0;C!==b;++C){const D=c+C;a[D]=a[D]+a[m+C]*v}}}const Gu="\\[\\]\\.:\\/",y_=new RegExp("["+Gu+"]","g"),Cf="[^"+Gu+"]",Zy="[^"+Gu.replace("\\.","")+"]",VC=/((?:WC+[\/:])*)/.source.replace("WC",Cf),bw=/(WCOD+)?/.source.replace("WCOD",Zy),ww=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Cf),Ky=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Cf),Mf=new RegExp("^"+VC+bw+ww+Ky+"$"),Df=["material","materials","bones"];function Ef(p,a,c){const m=c||Ur.parseTrackName(a);this._targetGroup=p,this._bindings=p.subscribe_(a,m)}function Ur(p,a,c){this.path=a,this.parsedPath=c||Ur.parseTrackName(a),this.node=Ur.findNode(p,this.parsedPath.nodeName)||p,this.rootNode=p}Object.assign(Ef.prototype,{getValue:function(p,a){this.bind();const m=this._bindings[this._targetGroup.nCachedObjects_];void 0!==m&&m.getValue(p,a)},setValue:function(p,a){const c=this._bindings;for(let m=this._targetGroup.nCachedObjects_,v=c.length;m!==v;++m)c[m].setValue(p,a)},bind:function(){const p=this._bindings;for(let a=this._targetGroup.nCachedObjects_,c=p.length;a!==c;++a)p[a].bind()},unbind:function(){const p=this._bindings;for(let a=this._targetGroup.nCachedObjects_,c=p.length;a!==c;++a)p[a].unbind()}}),Object.assign(Ur,{Composite:Ef,create:function(p,a,c){return p&&p.isAnimationObjectGroup?new Ur.Composite(p,a,c):new Ur(p,a,c)},sanitizeNodeName:function(p){return p.replace(/\s/g,"_").replace(y_,"")},parseTrackName:function(p){const a=Mf.exec(p);if(!a)throw new Error("PropertyBinding: Cannot parse trackName: "+p);const c={nodeName:a[2],objectName:a[3],objectIndex:a[4],propertyName:a[5],propertyIndex:a[6]},m=c.nodeName&&c.nodeName.lastIndexOf(".");if(void 0!==m&&-1!==m){const v=c.nodeName.substring(m+1);-1!==Df.indexOf(v)&&(c.nodeName=c.nodeName.substring(0,m),c.objectName=v)}if(null===c.propertyName||0===c.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+p);return c},findNode:function(p,a){if(!a||""===a||"."===a||-1===a||a===p.name||a===p.uuid)return p;if(p.skeleton){const c=p.skeleton.getBoneByName(a);if(void 0!==c)return c}if(p.children){const c=function(v){for(let b=0;b<v.length;b++){const C=v[b];if(C.name===a||C.uuid===a)return C;const D=c(C.children);if(D)return D}return null},m=c(p.children);if(m)return m}return null}}),Object.assign(Ur.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(a,c){a[c]=this.node[this.propertyName]},function(a,c){const m=this.resolvedProperty;for(let v=0,b=m.length;v!==b;++v)a[c++]=m[v]},function(a,c){a[c]=this.resolvedProperty[this.propertyIndex]},function(a,c){this.resolvedProperty.toArray(a,c)}],SetterByBindingTypeAndVersioning:[[function(a,c){this.targetObject[this.propertyName]=a[c]},function(a,c){this.targetObject[this.propertyName]=a[c],this.targetObject.needsUpdate=!0},function(a,c){this.targetObject[this.propertyName]=a[c],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,c){const m=this.resolvedProperty;for(let v=0,b=m.length;v!==b;++v)m[v]=a[c++]},function(a,c){const m=this.resolvedProperty;for(let v=0,b=m.length;v!==b;++v)m[v]=a[c++];this.targetObject.needsUpdate=!0},function(a,c){const m=this.resolvedProperty;for(let v=0,b=m.length;v!==b;++v)m[v]=a[c++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,c){this.resolvedProperty[this.propertyIndex]=a[c]},function(a,c){this.resolvedProperty[this.propertyIndex]=a[c],this.targetObject.needsUpdate=!0},function(a,c){this.resolvedProperty[this.propertyIndex]=a[c],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,c){this.resolvedProperty.fromArray(a,c)},function(a,c){this.resolvedProperty.fromArray(a,c),this.targetObject.needsUpdate=!0},function(a,c){this.resolvedProperty.fromArray(a,c),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(a,c){this.bind(),this.getValue(a,c)},setValue:function(a,c){this.bind(),this.setValue(a,c)},bind:function(){let p=this.node;const a=this.parsedPath,c=a.objectName,m=a.propertyName;let v=a.propertyIndex;if(p||(p=Ur.findNode(this.rootNode,a.nodeName)||this.rootNode,this.node=p),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!p)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(c){let S=a.objectIndex;switch(c){case"materials":if(!p.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!p.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);p=p.material.materials;break;case"bones":if(!p.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);p=p.skeleton.bones;for(let A=0;A<p.length;A++)if(p[A].name===S){S=A;break}break;default:if(void 0===p[c])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);p=p[c]}if(void 0!==S){if(void 0===p[S])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,p);p=p[S]}}const b=p[m];if(void 0===b)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+a.nodeName+"."+m+" but it wasn't found.",p);let C=this.Versioning.None;this.targetObject=p,void 0!==p.needsUpdate?C=this.Versioning.NeedsUpdate:void 0!==p.matrixWorldNeedsUpdate&&(C=this.Versioning.MatrixWorldNeedsUpdate);let D=this.BindingType.Direct;if(void 0!==v){if("morphTargetInfluences"===m){if(!p.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!p.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!p.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==p.morphTargetDictionary[v]&&(v=p.morphTargetDictionary[v])}D=this.BindingType.ArrayElement,this.resolvedProperty=b,this.propertyIndex=v}else void 0!==b.fromArray&&void 0!==b.toArray?(D=this.BindingType.HasFromToArray,this.resolvedProperty=b):Array.isArray(b)?(D=this.BindingType.EntireArray,this.resolvedProperty=b):this.propertyName=m;this.getValue=this.GetterByBindingType[D],this.setValue=this.SetterByBindingTypeAndVersioning[D][C]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Ur.prototype,{_getValue_unbound:Ur.prototype.getValue,_setValue_unbound:Ur.prototype.setValue});class Sf{constructor(){this.uuid=Ne.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const a={};this._indicesByUUID=a;for(let m=0,v=arguments.length;m!==v;++m)a[arguments[m].uuid]=m;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const c=this;this.stats={objects:{get total(){return c._objects.length},get inUse(){return this.total-c.nCachedObjects_}},get bindingsPerObject(){return c._bindings.length}}}add(){const a=this._objects,c=this._indicesByUUID,m=this._paths,v=this._parsedPaths,b=this._bindings,C=b.length;let D,S=a.length,A=this.nCachedObjects_;for(let k=0,R=arguments.length;k!==R;++k){const O=arguments[k],L=O.uuid;let V=c[L];if(void 0===V){V=S++,c[L]=V,a.push(O);for(let z=0,W=C;z!==W;++z)b[z].push(new Ur(O,m[z],v[z]))}else if(V<A){D=a[V];const z=--A,W=a[z];c[W.uuid]=V,a[V]=W,c[L]=z,a[z]=O;for(let U=0,B=C;U!==B;++U){const te=b[U];let se=te[V];te[V]=te[z],void 0===se&&(se=new Ur(O,m[U],v[U])),te[z]=se}}else a[V]!==D&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=A}remove(){const a=this._objects,c=this._indicesByUUID,m=this._bindings,v=m.length;let b=this.nCachedObjects_;for(let C=0,D=arguments.length;C!==D;++C){const S=arguments[C],A=S.uuid,k=c[A];if(void 0!==k&&k>=b){const R=b++,O=a[R];c[O.uuid]=k,a[k]=O,c[A]=R,a[R]=S;for(let L=0,V=v;L!==V;++L){const z=m[L],U=z[k];z[k]=z[R],z[R]=U}}}this.nCachedObjects_=b}uncache(){const a=this._objects,c=this._indicesByUUID,m=this._bindings,v=m.length;let b=this.nCachedObjects_,C=a.length;for(let D=0,S=arguments.length;D!==S;++D){const k=arguments[D].uuid,R=c[k];if(void 0!==R)if(delete c[k],R<b){const O=--b,L=a[O],V=--C,z=a[V];c[L.uuid]=R,a[R]=L,c[z.uuid]=O,a[O]=z,a.pop();for(let W=0,U=v;W!==U;++W){const B=m[W],X=B[V];B[R]=B[O],B[O]=X,B.pop()}}else{const O=--C,L=a[O];O>0&&(c[L.uuid]=R),a[R]=L,a.pop();for(let V=0,z=v;V!==z;++V){const W=m[V];W[R]=W[O],W.pop()}}}this.nCachedObjects_=b}subscribe_(a,c){const m=this._bindingsIndicesByPath;let v=m[a];const b=this._bindings;if(void 0!==v)return b[v];const C=this._paths,D=this._parsedPaths,S=this._objects,k=this.nCachedObjects_,R=new Array(S.length);v=b.length,m[a]=v,C.push(a),D.push(c),b.push(R);for(let O=k,L=S.length;O!==L;++O)R[O]=new Ur(S[O],a,c);return R}unsubscribe_(a){const c=this._bindingsIndicesByPath,m=c[a];if(void 0!==m){const v=this._paths,b=this._parsedPaths,C=this._bindings,D=C.length-1,S=C[D];c[a[D]]=m,C[m]=S,C.pop(),b[m]=b[D],b.pop(),v[m]=v[D],v.pop()}}}Sf.prototype.isAnimationObjectGroup=!0;class hg{constructor(a,c,m=null,v=c.blendMode){this._mixer=a,this._clip=c,this._localRoot=m,this.blendMode=v;const b=c.tracks,C=b.length,D=new Array(C),S={endingStart:mh,endingEnd:mh};for(let A=0;A!==C;++A){const k=b[A].createInterpolant(null);D[A]=k,k.settings=S}this._interpolantSettings=S,this._interpolants=D,this._propertyBindings=new Array(C),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=iC,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(a){return this._startTime=a,this}setLoop(a,c){return this.loop=a,this.repetitions=c,this}setEffectiveWeight(a){return this.weight=a,this._effectiveWeight=this.enabled?a:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(a){return this._scheduleFading(a,0,1)}fadeOut(a){return this._scheduleFading(a,1,0)}crossFadeFrom(a,c,m){if(a.fadeOut(c),this.fadeIn(c),m){const v=this._clip.duration,b=a._clip.duration,D=v/b;a.warp(1,b/v,c),this.warp(D,1,c)}return this}crossFadeTo(a,c,m){return a.crossFadeFrom(this,c,m)}stopFading(){const a=this._weightInterpolant;return null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this}setEffectiveTimeScale(a){return this.timeScale=a,this._effectiveTimeScale=this.paused?0:a,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(a){return this.timeScale=this._clip.duration/a,this.stopWarping()}syncWith(a){return this.time=a.time,this.timeScale=a.timeScale,this.stopWarping()}halt(a){return this.warp(this._effectiveTimeScale,0,a)}warp(a,c,m){const v=this._mixer,b=v.time,C=this.timeScale;let D=this._timeScaleInterpolant;null===D&&(D=v._lendControlInterpolant(),this._timeScaleInterpolant=D);const S=D.parameterPositions,A=D.sampleValues;return S[0]=b,S[1]=b+m,A[0]=a/C,A[1]=c/C,this}stopWarping(){const a=this._timeScaleInterpolant;return null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(a,c,m,v){if(!this.enabled)return void this._updateWeight(a);const b=this._startTime;if(null!==b){const S=(a-b)*m;if(S<0||0===m)return;this._startTime=null,c=m*S}c*=this._updateTimeScale(a);const C=this._updateTime(c),D=this._updateWeight(a);if(D>0){const S=this._interpolants,A=this._propertyBindings;if(this.blendMode===_v)for(let k=0,R=S.length;k!==R;++k)S[k].evaluate(C),A[k].accumulateAdditive(D);else for(let k=0,R=S.length;k!==R;++k)S[k].evaluate(C),A[k].accumulate(v,D)}}_updateWeight(a){let c=0;if(this.enabled){c=this.weight;const m=this._weightInterpolant;if(null!==m){const v=m.evaluate(a)[0];c*=v,a>m.parameterPositions[1]&&(this.stopFading(),0===v&&(this.enabled=!1))}}return this._effectiveWeight=c,c}_updateTimeScale(a){let c=0;if(!this.paused){c=this.timeScale;const m=this._timeScaleInterpolant;null!==m&&(c*=m.evaluate(a)[0],a>m.parameterPositions[1]&&(this.stopWarping(),0===c?this.paused=!0:this.timeScale=c))}return this._effectiveTimeScale=c,c}_updateTime(a){const c=this._clip.duration,m=this.loop;let v=this.time+a,b=this._loopCount;const C=m===rC;if(0===a)return-1===b?v:C&&1==(1&b)?c-v:v;if(m===nC){-1===b&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(v>=c)v=c;else{if(!(v<0)){this.time=v;break e}v=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=v,this._mixer.dispatchEvent({type:"finished",action:this,direction:a<0?-1:1})}}else{if(-1===b&&(a>=0?(b=0,this._setEndings(!0,0===this.repetitions,C)):this._setEndings(0===this.repetitions,!0,C)),v>=c||v<0){const D=Math.floor(v/c);v-=c*D,b+=Math.abs(D);const S=this.repetitions-b;if(S<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,v=a>0?c:0,this.time=v,this._mixer.dispatchEvent({type:"finished",action:this,direction:a>0?1:-1});else{if(1===S){const A=a<0;this._setEndings(A,!A,C)}else this._setEndings(!1,!1,C);this._loopCount=b,this.time=v,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:D})}}else this.time=v;if(C&&1==(1&b))return c-v}return v}_setEndings(a,c,m){const v=this._interpolantSettings;m?(v.endingStart=sd,v.endingEnd=sd):(v.endingStart=a?this.zeroSlopeAtStart?sd:mh:em,v.endingEnd=c?this.zeroSlopeAtEnd?sd:mh:em)}_scheduleFading(a,c,m){const v=this._mixer,b=v.time;let C=this._weightInterpolant;null===C&&(C=v._lendControlInterpolant(),this._weightInterpolant=C);const D=C.parameterPositions,S=C.sampleValues;return D[0]=b,S[0]=c,D[1]=b+a,S[1]=m,this}}class fg extends xl{constructor(a){super(),this._root=a,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(a,c){const m=a._localRoot||this._root,v=a._clip.tracks,b=v.length,C=a._propertyBindings,D=a._interpolants,S=m.uuid,A=this._bindingsByRootAndName;let k=A[S];void 0===k&&(k={},A[S]=k);for(let R=0;R!==b;++R){const O=v[R],L=O.name;let V=k[L];if(void 0!==V)C[R]=V;else{if(V=C[R],void 0!==V){null===V._cacheIndex&&(++V.referenceCount,this._addInactiveBinding(V,S,L));continue}V=new $d(Ur.create(m,L,c&&c._propertyBindings[R].binding.parsedPath),O.ValueTypeName,O.getValueSize()),++V.referenceCount,this._addInactiveBinding(V,S,L),C[R]=V}D[R].resultBuffer=V.buffer}}_activateAction(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){const m=(a._localRoot||this._root).uuid,v=a._clip.uuid,b=this._actionsByClip[v];this._bindAction(a,b&&b.knownActions[0]),this._addInactiveAction(a,v,m)}const c=a._propertyBindings;for(let m=0,v=c.length;m!==v;++m){const b=c[m];0==b.useCount++&&(this._lendBinding(b),b.saveOriginalState())}this._lendAction(a)}}_deactivateAction(a){if(this._isActiveAction(a)){const c=a._propertyBindings;for(let m=0,v=c.length;m!==v;++m){const b=c[m];0==--b.useCount&&(b.restoreOriginalState(),this._takeBackBinding(b))}this._takeBackAction(a)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}}_isActiveAction(a){const c=a._cacheIndex;return null!==c&&c<this._nActiveActions}_addInactiveAction(a,c,m){const v=this._actions,b=this._actionsByClip;let C=b[c];if(void 0===C)C={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,b[c]=C;else{const D=C.knownActions;a._byClipCacheIndex=D.length,D.push(a)}a._cacheIndex=v.length,v.push(a),C.actionByRoot[m]=a}_removeInactiveAction(a){const c=this._actions,m=c[c.length-1],v=a._cacheIndex;m._cacheIndex=v,c[v]=m,c.pop(),a._cacheIndex=null;const b=a._clip.uuid,C=this._actionsByClip,D=C[b],S=D.knownActions,A=S[S.length-1],k=a._byClipCacheIndex;A._byClipCacheIndex=k,S[k]=A,S.pop(),a._byClipCacheIndex=null,delete D.actionByRoot[(a._localRoot||this._root).uuid],0===S.length&&delete C[b],this._removeInactiveBindingsForAction(a)}_removeInactiveBindingsForAction(a){const c=a._propertyBindings;for(let m=0,v=c.length;m!==v;++m){const b=c[m];0==--b.referenceCount&&this._removeInactiveBinding(b)}}_lendAction(a){const c=this._actions,m=a._cacheIndex,v=this._nActiveActions++,b=c[v];a._cacheIndex=v,c[v]=a,b._cacheIndex=m,c[m]=b}_takeBackAction(a){const c=this._actions,m=a._cacheIndex,v=--this._nActiveActions,b=c[v];a._cacheIndex=v,c[v]=a,b._cacheIndex=m,c[m]=b}_addInactiveBinding(a,c,m){const v=this._bindingsByRootAndName,b=this._bindings;let C=v[c];void 0===C&&(C={},v[c]=C),C[m]=a,a._cacheIndex=b.length,b.push(a)}_removeInactiveBinding(a){const c=this._bindings,m=a.binding,v=m.rootNode.uuid,b=m.path,C=this._bindingsByRootAndName,D=C[v],S=c[c.length-1],A=a._cacheIndex;S._cacheIndex=A,c[A]=S,c.pop(),delete D[b],0===Object.keys(D).length&&delete C[v]}_lendBinding(a){const c=this._bindings,m=a._cacheIndex,v=this._nActiveBindings++,b=c[v];a._cacheIndex=v,c[v]=a,b._cacheIndex=m,c[m]=b}_takeBackBinding(a){const c=this._bindings,m=a._cacheIndex,v=--this._nActiveBindings,b=c[v];a._cacheIndex=v,c[v]=a,b._cacheIndex=m,c[m]=b}_lendControlInterpolant(){const a=this._controlInterpolants,c=this._nActiveControlInterpolants++;let m=a[c];return void 0===m&&(m=new df(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),m.__cacheIndex=c,a[c]=m),m}_takeBackControlInterpolant(a){const c=this._controlInterpolants,m=a.__cacheIndex,v=--this._nActiveControlInterpolants,b=c[v];a.__cacheIndex=v,c[v]=a,b.__cacheIndex=m,c[m]=b}clipAction(a,c,m){const v=c||this._root,b=v.uuid;let C="string"==typeof a?pf.findByName(v,a):a;const D=null!==C?C.uuid:a,S=this._actionsByClip[D];let A=null;if(void 0===m&&(m=null!==C?C.blendMode:wl),void 0!==S){const R=S.actionByRoot[b];if(void 0!==R&&R.blendMode===m)return R;A=S.knownActions[0],null===C&&(C=A._clip)}if(null===C)return null;const k=new hg(this,C,c,m);return this._bindAction(k,A),this._addInactiveAction(k,D,b),k}existingAction(a,c){const m=c||this._root,v=m.uuid,b="string"==typeof a?pf.findByName(m,a):a,D=this._actionsByClip[b?b.uuid:a];return void 0!==D&&D.actionByRoot[v]||null}stopAllAction(){const a=this._actions;for(let m=this._nActiveActions-1;m>=0;--m)a[m].stop();return this}update(a){const c=this._actions,m=this._nActiveActions,v=this.time+=a*=this.timeScale,b=Math.sign(a),C=this._accuIndex^=1;for(let A=0;A!==m;++A)c[A]._update(v,a,b,C);const D=this._bindings,S=this._nActiveBindings;for(let A=0;A!==S;++A)D[A].apply(C);return this}setTime(a){this.time=0;for(let c=0;c<this._actions.length;c++)this._actions[c].time=0;return this.update(a)}getRoot(){return this._root}uncacheClip(a){const c=this._actions,m=a.uuid,v=this._actionsByClip,b=v[m];if(void 0!==b){const C=b.knownActions;for(let D=0,S=C.length;D!==S;++D){const A=C[D];this._deactivateAction(A);const k=A._cacheIndex,R=c[c.length-1];A._cacheIndex=null,A._byClipCacheIndex=null,R._cacheIndex=k,c[k]=R,c.pop(),this._removeInactiveBindingsForAction(A)}delete v[m]}}uncacheRoot(a){const c=a.uuid,m=this._actionsByClip;for(const C in m){const S=m[C].actionByRoot[c];void 0!==S&&(this._deactivateAction(S),this._removeInactiveAction(S))}const b=this._bindingsByRootAndName[c];if(void 0!==b)for(const C in b){const D=b[C];D.restoreOriginalState(),this._removeInactiveBinding(D)}}uncacheAction(a,c){const m=this.existingAction(a,c);null!==m&&(this._deactivateAction(m),this._removeInactiveAction(m))}}fg.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Zd{constructor(a){"string"==typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=arguments[1]),this.value=a}clone(){return new Zd(void 0===this.value.clone?this.value:this.value.clone())}}function fl(p,a,c){Ds.call(this,p,a),this.meshPerAttribute=c||1}function pg(p,a,c,m,v){this.buffer=p,this.type=a,this.itemSize=c,this.elementSize=m,this.count=v,this.version=0}function b_(p,a,c=0,m=1/0){this.ray=new ud(p,a),this.near=c,this.far=m,this.camera=null,this.layers=new uc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Qy(p,a){return p.distance-a.distance}function w_(p,a,c,m){if(p.layers.test(a.layers)&&p.raycast(a,c),!0===m){const v=p.children;for(let b=0,C=v.length;b<C;b++)w_(v[b],a,c,!0)}}fl.prototype=Object.assign(Object.create(Ds.prototype),{constructor:fl,isInstancedInterleavedBuffer:!0,copy:function(p){return Ds.prototype.copy.call(this,p),this.meshPerAttribute=p.meshPerAttribute,this},clone:function(p){const a=Ds.prototype.clone.call(this,p);return a.meshPerAttribute=this.meshPerAttribute,a},toJSON:function(p){const a=Ds.prototype.toJSON.call(this,p);return a.isInstancedInterleavedBuffer=!0,a.meshPerAttribute=this.meshPerAttribute,a}}),Object.defineProperty(pg.prototype,"needsUpdate",{set:function(p){!0===p&&this.version++}}),Object.assign(pg.prototype,{isGLBufferAttribute:!0,setBuffer:function(p){return this.buffer=p,this},setType:function(p,a){return this.type=p,this.elementSize=a,this},setItemSize:function(p){return this.itemSize=p,this},setCount:function(p){return this.count=p,this}}),Object.assign(b_.prototype,{set:function(p,a){this.ray.set(p,a)},setFromCamera:function(p,a){a&&a.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(a.matrixWorld),this.ray.direction.set(p.x,p.y,.5).unproject(a).sub(this.ray.origin).normalize(),this.camera=a):a&&a.isOrthographicCamera?(this.ray.origin.set(p.x,p.y,(a.near+a.far)/(a.near-a.far)).unproject(a),this.ray.direction.set(0,0,-1).transformDirection(a.matrixWorld),this.camera=a):console.error("THREE.Raycaster: Unsupported camera type: "+a.type)},intersectObject:function(p,a=!1,c=[]){return w_(p,this,c,a),c.sort(Qy),c},intersectObjects:function(p,a=!1,c=[]){for(let m=0,v=p.length;m<v;m++)w_(p[m],this,c,a);return c.sort(Qy),c}});class gg{constructor(a=1,c=0,m=0){return this.radius=a,this.phi=c,this.theta=m,this}set(a,c,m){return this.radius=a,this.phi=c,this.theta=m,this}copy(a){return this.radius=a.radius,this.phi=a.phi,this.theta=a.theta,this}makeSafe(){const a=1e-6;return this.phi=Math.max(a,Math.min(Math.PI-a,this.phi)),this}setFromVector3(a){return this.setFromCartesianCoords(a.x,a.y,a.z)}setFromCartesianCoords(a,c,m){return this.radius=Math.sqrt(a*a+c*c+m*m),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(a,m),this.phi=Math.acos(Ne.clamp(c/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class GC{constructor(a=1,c=0,m=0){return this.radius=a,this.theta=c,this.y=m,this}set(a,c,m){return this.radius=a,this.theta=c,this.y=m,this}copy(a){return this.radius=a.radius,this.theta=a.theta,this.y=a.y,this}setFromVector3(a){return this.setFromCartesianCoords(a.x,a.y,a.z)}setFromCartesianCoords(a,c,m){return this.radius=Math.sqrt(a*a+m*m),this.theta=Math.atan2(a,m),this.y=c,this}clone(){return(new this.constructor).copy(this)}}const Kd=new et;class Qd{constructor(a=new et(1/0,1/0),c=new et(-1/0,-1/0)){this.min=a,this.max=c}set(a,c){return this.min.copy(a),this.max.copy(c),this}setFromPoints(a){this.makeEmpty();for(let c=0,m=a.length;c<m;c++)this.expandByPoint(a[c]);return this}setFromCenterAndSize(a,c){const m=Kd.copy(c).multiplyScalar(.5);return this.min.copy(a).sub(m),this.max.copy(a).add(m),this}clone(){return(new this.constructor).copy(this)}copy(a){return this.min.copy(a.min),this.max.copy(a.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(a){return void 0===a&&(console.warn("THREE.Box2: .getCenter() target is now required"),a=new et),this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return void 0===a&&(console.warn("THREE.Box2: .getSize() target is now required"),a=new et),this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)}expandByPoint(a){return this.min.min(a),this.max.max(a),this}expandByVector(a){return this.min.sub(a),this.max.add(a),this}expandByScalar(a){return this.min.addScalar(-a),this.max.addScalar(a),this}containsPoint(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y)}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y}getParameter(a,c){return void 0===c&&(console.warn("THREE.Box2: .getParameter() target is now required"),c=new et),c.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y)}clampPoint(a,c){return void 0===c&&(console.warn("THREE.Box2: .clampPoint() target is now required"),c=new et),c.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return Kd.copy(a).clamp(this.min,this.max).sub(a).length()}intersect(a){return this.min.max(a.min),this.max.min(a.max),this}union(a){return this.min.min(a.min),this.max.max(a.max),this}translate(a){return this.min.add(a),this.max.add(a),this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}Qd.prototype.isBox2=!0;const x_=new ee,C_=new ee;class rs{constructor(a=new ee,c=new ee){this.start=a,this.end=c}set(a,c){return this.start.copy(a),this.end.copy(c),this}copy(a){return this.start.copy(a.start),this.end.copy(a.end),this}getCenter(a){return void 0===a&&(console.warn("THREE.Line3: .getCenter() target is now required"),a=new ee),a.addVectors(this.start,this.end).multiplyScalar(.5)}delta(a){return void 0===a&&(console.warn("THREE.Line3: .delta() target is now required"),a=new ee),a.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(a,c){return void 0===c&&(console.warn("THREE.Line3: .at() target is now required"),c=new ee),this.delta(c).multiplyScalar(a).add(this.start)}closestPointToPointParameter(a,c){x_.subVectors(a,this.start),C_.subVectors(this.end,this.start);const m=C_.dot(C_);let b=C_.dot(x_)/m;return c&&(b=Ne.clamp(b,0,1)),b}closestPointToPoint(a,c,m){const v=this.closestPointToPointParameter(a,c);return void 0===m&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),m=new ee),this.delta(m).multiplyScalar(v).add(this.start)}applyMatrix4(a){return this.start.applyMatrix4(a),this.end.applyMatrix4(a),this}equals(a){return a.start.equals(this.start)&&a.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}function Af(p){it.call(this),this.material=p,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}(Af.prototype=Object.create(it.prototype)).constructor=Af,Af.prototype.isImmediateRenderObject=!0;const xw=new ee;class Xy extends it{constructor(a,c){super(),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.color=c;const m=new Wt,v=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let C=0,D=1,S=32;C<S;C++,D++){const A=C/S*Math.PI*2,k=D/S*Math.PI*2;v.push(Math.cos(A),Math.sin(A),1,Math.cos(k),Math.sin(k),1)}m.setAttribute("position",new Qt(v,3));const b=new Es({fog:!1,toneMapped:!1});this.cone=new Bn(m,b),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const a=this.light.distance?this.light.distance:1e3,c=a*Math.tan(this.light.angle);this.cone.scale.set(c,c,a),xw.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(xw),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Vo=new ee,pl=new fn,M_=new fn;class Uu extends Bn{constructor(a){const c=Hu(a),m=new Wt,v=[],b=[],C=new Jt(0,0,1),D=new Jt(0,1,0);for(let A=0;A<c.length;A++){const k=c[A];k.parent&&k.parent.isBone&&(v.push(0,0,0),v.push(0,0,0),b.push(C.r,C.g,C.b),b.push(D.r,D.g,D.b))}m.setAttribute("position",new Qt(v,3)),m.setAttribute("color",new Qt(b,3)),super(m,new Es({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=a,this.bones=c,this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(a){const c=this.bones,m=this.geometry,v=m.getAttribute("position");M_.copy(this.root.matrixWorld).invert();for(let b=0,C=0;b<c.length;b++){const D=c[b];D.parent&&D.parent.isBone&&(pl.multiplyMatrices(M_,D.matrixWorld),Vo.setFromMatrixPosition(pl),v.setXYZ(C,Vo.x,Vo.y,Vo.z),pl.multiplyMatrices(M_,D.parent.matrixWorld),Vo.setFromMatrixPosition(pl),v.setXYZ(C+1,Vo.x,Vo.y,Vo.z),C+=2)}m.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(a)}}function Hu(p){const a=[];p&&p.isBone&&a.push(p);for(let c=0;c<p.children.length;c++)a.push.apply(a,Hu(p.children[c]));return a}class Cw extends ei{constructor(a,c,m){super(new Vs(c,4,2),new Ut({wireframe:!0,fog:!1,toneMapped:!1})),this.light=a,this.light.updateMatrixWorld(),this.color=m,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const D_=new ee,Jy=new Jt,Mw=new Jt;class E_ extends it{constructor(a,c,m){super(),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.color=m;const v=new yo(c);v.rotateY(.5*Math.PI),this.material=new Ut({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const b=v.getAttribute("position"),C=new Float32Array(3*b.count);v.setAttribute("color",new _n(C,3)),this.add(new ei(v,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const a=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const c=a.geometry.getAttribute("color");Jy.copy(this.light.color),Mw.copy(this.light.groundColor);for(let m=0,v=c.count;m<v;m++){const b=m<v/2?Jy:Mw;c.setXYZ(m,b.r,b.g,b.b)}c.needsUpdate=!0}a.lookAt(D_.setFromMatrixPosition(this.light.matrixWorld).negate())}}class e0 extends Bn{constructor(a=10,c=10,m=4473924,v=8947848){m=new Jt(m),v=new Jt(v);const b=c/2,C=a/c,D=a/2,S=[],A=[];for(let O=0,L=0,V=-D;O<=c;O++,V+=C){S.push(-D,0,V,D,0,V),S.push(V,0,-D,V,0,D);const z=O===b?m:v;z.toArray(A,L),L+=3,z.toArray(A,L),L+=3,z.toArray(A,L),L+=3,z.toArray(A,L),L+=3}const k=new Wt;k.setAttribute("position",new Qt(S,3)),k.setAttribute("color",new Qt(A,3)),super(k,new Es({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class t0 extends Bn{constructor(a=10,c=16,m=8,v=64,b=4473924,C=8947848){b=new Jt(b),C=new Jt(C);const D=[],S=[];for(let R=0;R<=c;R++){const O=R/c*(2*Math.PI),L=Math.sin(O)*a,V=Math.cos(O)*a;D.push(0,0,0),D.push(L,0,V);const z=1&R?b:C;S.push(z.r,z.g,z.b),S.push(z.r,z.g,z.b)}for(let R=0;R<=m;R++){const O=1&R?b:C,L=a-a/m*R;for(let V=0;V<v;V++){let z=V/v*(2*Math.PI),W=Math.sin(z)*L,U=Math.cos(z)*L;D.push(W,0,U),S.push(O.r,O.g,O.b),z=(V+1)/v*(2*Math.PI),W=Math.sin(z)*L,U=Math.cos(z)*L,D.push(W,0,U),S.push(O.r,O.g,O.b)}}const A=new Wt;A.setAttribute("position",new Qt(D,3)),A.setAttribute("color",new Qt(S,3)),super(A,new Es({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const S_=new ee,Co=new ee,A_=new ee;class UC extends it{constructor(a,c,m){super(),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.color=m,void 0===c&&(c=1);let v=new Wt;v.setAttribute("position",new Qt([-c,c,0,c,c,0,c,-c,0,-c,-c,0,-c,c,0],3));const b=new Es({fog:!1,toneMapped:!1});this.lightPlane=new nl(v,b),this.add(this.lightPlane),v=new Wt,v.setAttribute("position",new Qt([0,0,0,0,0,1],3)),this.targetLine=new nl(v,b),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){S_.setFromMatrixPosition(this.light.matrixWorld),Co.setFromMatrixPosition(this.light.target.matrixWorld),A_.subVectors(Co,S_),this.lightPlane.lookAt(Co),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Co),this.targetLine.scale.z=A_.length()}}const Go=new ee,Si=new fr;class Ea extends Bn{constructor(a){const c=new Wt,m=new Es({color:16777215,vertexColors:!0,toneMapped:!1}),v=[],b=[],C={},D=new Jt(16755200),S=new Jt(16711680),A=new Jt(43775),k=new Jt(16777215),R=new Jt(3355443);function O(V,z,W){L(V,W),L(z,W)}function L(V,z){v.push(0,0,0),b.push(z.r,z.g,z.b),void 0===C[V]&&(C[V]=[]),C[V].push(v.length/3-1)}O("n1","n2",D),O("n2","n4",D),O("n4","n3",D),O("n3","n1",D),O("f1","f2",D),O("f2","f4",D),O("f4","f3",D),O("f3","f1",D),O("n1","f1",D),O("n2","f2",D),O("n3","f3",D),O("n4","f4",D),O("p","n1",S),O("p","n2",S),O("p","n3",S),O("p","n4",S),O("u1","u2",A),O("u2","u3",A),O("u3","u1",A),O("c","t",k),O("p","c",R),O("cn1","cn2",R),O("cn3","cn4",R),O("cf1","cf2",R),O("cf3","cf4",R),c.setAttribute("position",new Qt(v,3)),c.setAttribute("color",new Qt(b,3)),super(c,m),this.type="CameraHelper",this.camera=a,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=C,this.update()}update(){const a=this.geometry,c=this.pointMap;Si.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),wr("c",c,a,Si,0,0,-1),wr("t",c,a,Si,0,0,1),wr("n1",c,a,Si,-1,-1,-1),wr("n2",c,a,Si,1,-1,-1),wr("n3",c,a,Si,-1,1,-1),wr("n4",c,a,Si,1,1,-1),wr("f1",c,a,Si,-1,-1,1),wr("f2",c,a,Si,1,-1,1),wr("f3",c,a,Si,-1,1,1),wr("f4",c,a,Si,1,1,1),wr("u1",c,a,Si,.7,1.1,-1),wr("u2",c,a,Si,-.7,1.1,-1),wr("u3",c,a,Si,0,2,-1),wr("cf1",c,a,Si,-1,0,1),wr("cf2",c,a,Si,1,0,1),wr("cf3",c,a,Si,0,-1,1),wr("cf4",c,a,Si,0,1,1),wr("cn1",c,a,Si,-1,0,-1),wr("cn2",c,a,Si,1,0,-1),wr("cn3",c,a,Si,0,-1,-1),wr("cn4",c,a,Si,0,1,-1),a.getAttribute("position").needsUpdate=!0}}function wr(p,a,c,m,v,b,C){Go.set(v,b,C).unproject(m);const D=a[p];if(void 0!==D){const S=c.getAttribute("position");for(let A=0,k=D.length;A<k;A++)S.setXYZ(D[A],Go.x,Go.y,Go.z)}}const Tf=new ho;class n0 extends Bn{constructor(a,c=16776960){const m=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),v=new Float32Array(24),b=new Wt;b.setIndex(new _n(m,1)),b.setAttribute("position",new _n(v,3)),super(b,new Es({color:c,toneMapped:!1})),this.object=a,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(a){if(void 0!==a&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Tf.setFromObject(this.object),Tf.isEmpty())return;const c=Tf.min,m=Tf.max,v=this.geometry.attributes.position,b=v.array;b[0]=m.x,b[1]=m.y,b[2]=m.z,b[3]=c.x,b[4]=m.y,b[5]=m.z,b[6]=c.x,b[7]=c.y,b[8]=m.z,b[9]=m.x,b[10]=c.y,b[11]=m.z,b[12]=m.x,b[13]=m.y,b[14]=c.z,b[15]=c.x,b[16]=m.y,b[17]=c.z,b[18]=c.x,b[19]=c.y,b[20]=c.z,b[21]=m.x,b[22]=c.y,b[23]=c.z,v.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(a){return this.object=a,this.update(),this}copy(a){return Bn.prototype.copy.call(this,a),this.object=a.object,this}}class HC extends Bn{constructor(a,c=16776960){const m=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),b=new Wt;b.setIndex(new _n(m,1)),b.setAttribute("position",new Qt([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(b,new Es({color:c,toneMapped:!1})),this.box=a,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(a){const c=this.box;c.isEmpty()||(c.getCenter(this.position),c.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(a))}}class zC extends nl{constructor(a,c=1,m=16776960){const v=m,C=new Wt;C.setAttribute("position",new Qt([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),C.computeBoundingSphere(),super(C,new Es({color:v,toneMapped:!1})),this.type="PlaneHelper",this.plane=a,this.size=c;const S=new Wt;S.setAttribute("position",new Qt([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),S.computeBoundingSphere(),this.add(new ei(S,new Ut({color:v,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(a){let c=-this.plane.constant;Math.abs(c)<1e-8&&(c=1e-8),this.scale.set(.5*this.size,.5*this.size,c),this.children[0].material.side=c<0?Ae:ye,this.lookAt(this.plane.normal),super.updateMatrixWorld(a)}}const Dw=new ee;let If,Vc;class jC extends it{constructor(a=new ee(0,0,1),c=new ee(0,0,0),m=1,v=16776960,b=.2*m,C=.2*b){super(),this.type="ArrowHelper",void 0===If&&(If=new Wt,If.setAttribute("position",new Qt([0,0,0,0,1,0],3)),Vc=new Bs(0,.5,1,5,1),Vc.translate(0,-.5,0)),this.position.copy(c),this.line=new nl(If,new Es({color:v,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ei(Vc,new Ut({color:v,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(a),this.setLength(m,b,C)}setDirection(a){if(a.y>.99999)this.quaternion.set(0,0,0,1);else if(a.y<-.99999)this.quaternion.set(1,0,0,0);else{Dw.set(a.z,0,-a.x).normalize();const c=Math.acos(a.y);this.quaternion.setFromAxisAngle(Dw,c)}}setLength(a,c=.2*a,m=.2*c){this.line.scale.set(1,Math.max(1e-4,a-c),1),this.line.updateMatrix(),this.cone.scale.set(m,c,m),this.cone.position.y=a,this.cone.updateMatrix()}setColor(a){this.line.material.color.set(a),this.cone.material.color.set(a)}copy(a){return super.copy(a,!1),this.line.copy(a.line),this.cone.copy(a.cone),this}}class r0 extends Bn{constructor(a=1){const c=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a],v=new Wt;v.setAttribute("position",new Qt(c,3)),v.setAttribute("color",new Qt([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(v,new Es({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}const s0=new Float32Array(1),o0=new Int32Array(s0.buffer),Ew={toHalfFloat:function(p){s0[0]=p;const a=o0[0];let c=a>>16&32768,m=a>>12&2047;const v=a>>23&255;return v<103?c:v>142?(c|=31744,c|=(255==v?0:1)&&8388607&a,c):v<113?(m|=2048,c|=(m>>114-v)+(m>>113-v&1),c):(c|=v-112<<10|m>>1,c+=1&m,c)}},gl=Math.pow(2,8),mg=[.125,.215,.35,.446,.526,.582],Rf=5+mg.length,Sa={[Do]:0,[ws]:1,[nm]:2,[vv]:3,[Ki]:4,[Qo]:5,[vh]:6},Zl=new Ut({side:Ae,depthWrite:!1,depthTest:!1}),Sw=new ei(new hu,Zl),Pf=new wf,{_lodPlanes:Ho,_sizeLods:a0,_sigmas:_g}=qC(),l0=new Jt;let T_=null;const Xd=(1+Math.sqrt(5))/2,Of=1/Xd,c0=[new ee(1,1,1),new ee(-1,1,1),new ee(1,1,-1),new ee(-1,1,-1),new ee(0,Xd,Of),new ee(0,Xd,-Of),new ee(Of,0,Xd),new ee(-Of,0,Xd),new ee(Xd,Of,0),new ee(-Xd,Of,0)];function u0(p){const a=Math.max(p.r,p.g,p.b),c=Math.min(Math.max(Math.ceil(Math.log2(a)),-128),127);return p.multiplyScalar(Math.pow(2,-c)),(c+128)/255}class WC{constructor(a){this._renderer=a,this._pingPongRenderTarget=null,this._blurMaterial=function $C(p){const a=new Float32Array(p),c=new ee(0,1,0);return new Ir({name:"SphericalGaussianBlur",defines:{n:p},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:a},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:c},inputEncoding:{value:Sa[Do]},outputEncoding:{value:Sa[Do]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:ut,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(a,c=0,m=.1,v=100){T_=this._renderer.getRenderTarget();const b=this._allocateTargets();return this._sceneToCubeUV(a,m,v,b),c>0&&this._blur(b,0,0,c),this._applyPMREM(b),this._cleanup(b),b}fromEquirectangular(a){return this._fromTexture(a)}fromCubemap(a){return this._fromTexture(a)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=h0(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=d0(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let a=0;a<Ho.length;a++)Ho[a].dispose()}_cleanup(a){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(T_),a.scissorTest=!1,kf(a,0,0,a.width,a.height)}_fromTexture(a){T_=this._renderer.getRenderTarget();const c=this._allocateTargets(a);return this._textureToCubeUV(a,c),this._applyPMREM(c),this._cleanup(c),c}_allocateTargets(a){const c={magFilter:Tn,minFilter:Tn,generateMipmaps:!1,type:It,format:$g,encoding:(p=a,void 0===p||p.type!==It||p.encoding!==Do&&p.encoding!==ws&&p.encoding!==vh?nm:a.encoding),depthBuffer:!1},m=I_(c);var p;return m.depthBuffer=!a,this._pingPongRenderTarget=I_(c),m}_compileMaterial(a){const c=new ei(Ho[0],a);this._renderer.compile(c,Pf)}_sceneToCubeUV(a,c,m,v){const D=new nr(90,1,c,m),S=[1,-1,1,1,1,1],A=[1,1,1,-1,-1,-1],k=this._renderer,R=k.autoClear,O=k.outputEncoding,L=k.toneMapping;k.getClearColor(l0),k.toneMapping=vs,k.outputEncoding=Do,k.autoClear=!1;let V=!1;const z=a.background;if(z){if(z.isColor){Zl.color.copy(z).convertSRGBToLinear(),a.background=null;const W=u0(Zl.color);Zl.opacity=W,V=!0}}else{Zl.color.copy(l0).convertSRGBToLinear();const W=u0(Zl.color);Zl.opacity=W,V=!0}for(let W=0;W<6;W++){const U=W%3;0==U?(D.up.set(0,S[W],0),D.lookAt(A[W],0,0)):1==U?(D.up.set(0,0,S[W]),D.lookAt(0,A[W],0)):(D.up.set(0,S[W],0),D.lookAt(0,0,A[W])),kf(v,U*gl,W>2?gl:0,gl,gl),k.setRenderTarget(v),V&&k.render(Sw,D),k.render(a,D)}k.toneMapping=L,k.outputEncoding=O,k.autoClear=R}_textureToCubeUV(a,c){const m=this._renderer;a.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=h0()):null==this._equirectShader&&(this._equirectShader=d0());const v=a.isCubeTexture?this._cubemapShader:this._equirectShader,b=new ei(Ho[0],v),C=v.uniforms;C.envMap.value=a,a.isCubeTexture||C.texelSize.value.set(1/a.image.width,1/a.image.height),C.inputEncoding.value=Sa[a.encoding],C.outputEncoding.value=Sa[c.texture.encoding],kf(c,0,0,3*gl,2*gl),m.setRenderTarget(c),m.render(b,Pf)}_applyPMREM(a){const c=this._renderer,m=c.autoClear;c.autoClear=!1;for(let v=1;v<Rf;v++){const b=Math.sqrt(_g[v]*_g[v]-_g[v-1]*_g[v-1]);this._blur(a,v-1,v,b,c0[(v-1)%c0.length])}c.autoClear=m}_blur(a,c,m,v,b){const C=this._pingPongRenderTarget;this._halfBlur(a,C,c,m,v,"latitudinal",b),this._halfBlur(C,a,m,m,v,"longitudinal",b)}_halfBlur(a,c,m,v,b,C,D){const S=this._renderer,A=this._blurMaterial;"latitudinal"!==C&&"longitudinal"!==C&&console.error("blur direction must be either latitudinal or longitudinal!");const R=new ei(Ho[v],A),O=A.uniforms,L=a0[m]-1,V=isFinite(b)?Math.PI/(2*L):2*Math.PI/39,z=b/V,W=isFinite(b)?1+Math.floor(3*z):20;W>20&&console.warn(`sigmaRadians, ${b}, is too large and will clip, as it requested ${W} samples when the maximum is set to 20`);const U=[];let B=0;for(let K=0;K<20;++K){const he=K/z,Ie=Math.exp(-he*he/2);U.push(Ie),0==K?B+=Ie:K<W&&(B+=2*Ie)}for(let K=0;K<U.length;K++)U[K]=U[K]/B;O.envMap.value=a.texture,O.samples.value=W,O.weights.value=U,O.latitudinal.value="latitudinal"===C,D&&(O.poleAxis.value=D),O.dTheta.value=V,O.mipInt.value=8-m,O.inputEncoding.value=Sa[a.texture.encoding],O.outputEncoding.value=Sa[a.texture.encoding];const te=a0[v];kf(c,3*Math.max(0,gl-2*te),(0===v?0:2*gl)+2*te*(v>4?v-8+4:0),3*te,2*te),S.setRenderTarget(c),S.render(R,Pf)}}function qC(){const p=[],a=[],c=[];let m=8;for(let v=0;v<Rf;v++){const b=Math.pow(2,m);a.push(b);let C=1/b;v>4?C=mg[v-8+4-1]:0==v&&(C=0),c.push(C);const D=1/(b-1),S=-D/2,A=1+D/2,k=[S,S,A,S,A,A,S,S,A,A,S,A],R=6,O=6,L=3,V=2,z=1,W=new Float32Array(L*O*R),U=new Float32Array(V*O*R),B=new Float32Array(z*O*R);for(let X=0;X<R;X++){const se=X%3*2/3-1,K=X>2?0:-1;W.set([se,K,0,se+2/3,K,0,se+2/3,K+1,0,se,K,0,se+2/3,K+1,0,se,K+1,0],L*O*X),U.set(k,V*O*X),B.set([X,X,X,X,X,X],z*O*X)}const te=new Wt;te.setAttribute("position",new _n(W,L)),te.setAttribute("uv",new _n(U,V)),te.setAttribute("faceIndex",new _n(B,z)),p.push(te),m>4&&m--}return{_lodPlanes:p,_sizeLods:a,_sigmas:c}}function I_(p){const a=new ou(3*gl,3*gl,p);return a.texture.mapping=bi,a.texture.name="PMREM.cubeUv",a.scissorTest=!0,a}function kf(p,a,c,m,v){p.viewport.set(a,c,m,v),p.scissor.set(a,c,m,v)}function d0(){const p=new et(1,1);return new Ir({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:p},inputEncoding:{value:Sa[Do]},outputEncoding:{value:Sa[Do]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:ut,depthTest:!1,depthWrite:!1})}function h0(){return new Ir({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Sa[Do]},outputEncoding:{value:Sa[Do]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:ut,depthTest:!1,depthWrite:!1})}const Aw=0,R_=1,ZC=0,Tw=1,Iw=2;function Rw(p){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),p}function p0(p=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),p.isMultiMaterial=!0,p.materials=p,p.clone=function(){return p.slice()},p}function g0(p,a){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Tc(p,a)}function P_(p){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sc(p)}function yg(p,a){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Tc(p,a)}function m0(p){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Vl(p)}function O_(p){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Vl(p)}function k_(p){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Vl(p)}function bg(p,a,c){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new ee(p,a,c)}function Aa(p,a){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new _n(p,a).setUsage(ga)}function Pw(p,a){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new ma(p,a)}function Ow(p,a){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Il(p,a)}function Ff(p,a){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new fd(p,a)}function _0(p,a){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new hc(p,a)}function F_(p,a){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new _a(p,a)}function KC(p,a){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Rl(p,a)}function v0(p,a){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new va(p,a)}function kw(p,a){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Qt(p,a)}function dE(p,a){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new er(p,a)}function Sn(p){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new r0(p)}function QC(p,a){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new n0(p,a)}function y0(p,a){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Bn(new jp(p.geometry),new Es({color:void 0!==a?a:16777215}))}function b0(p,a){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Bn(new cr(p.geometry),new Es({color:void 0!==a?a:16777215}))}function wg(p){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Gs(p)}function Fw(p){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new ku(p)}function xg(p,a,c){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new kl(p,c)}function Jd(){console.error("THREE.CanvasRenderer has been removed")}function Cn(){console.error("THREE.JSONLoader has been removed.")}eo.create=function(p,a){return console.log("THREE.Curve.create() has been deprecated"),p.prototype=Object.create(eo.prototype),p.prototype.constructor=p,p.prototype.getPoint=a,p},yf.prototype.fromPoints=function(p){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(p)},e0.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Uu.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},br.prototype.extractUrlBase=function(p){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Bu.extractUrlBase(p)},br.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Qd.prototype.center=function(p){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(p)},Qd.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Qd.prototype.isIntersectionBox=function(p){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(p)},Qd.prototype.size=function(p){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(p)},ho.prototype.center=function(p){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(p)},ho.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},ho.prototype.isIntersectionBox=function(p){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(p)},ho.prototype.isIntersectionSphere=function(p){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(p)},ho.prototype.size=function(p){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(p)},au.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},mu.prototype.setFromMatrix=function(p){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(p)},rs.prototype.center=function(p){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(p)},Ne.random16=function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},Ne.nearestPowerOfTwo=function(p){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ne.floorPowerOfTwo(p)},Ne.nextPowerOfTwo=function(p){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ne.ceilPowerOfTwo(p)},cs.prototype.flattenToArrayOffset=function(p,a){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(p,a)},cs.prototype.multiplyVector3=function(p){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),p.applyMatrix3(this)},cs.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},cs.prototype.applyToBufferAttribute=function(p){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),p.applyMatrix3(this)},cs.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},cs.prototype.getInverse=function(p){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(p).invert()},fn.prototype.extractPosition=function(p){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(p)},fn.prototype.flattenToArrayOffset=function(p,a){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(p,a)},fn.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new ee).setFromMatrixColumn(this,3)},fn.prototype.setRotationFromQuaternion=function(p){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(p)},fn.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},fn.prototype.multiplyVector3=function(p){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),p.applyMatrix4(this)},fn.prototype.multiplyVector4=function(p){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),p.applyMatrix4(this)},fn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},fn.prototype.rotateAxis=function(p){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),p.transformDirection(this)},fn.prototype.crossVector=function(p){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),p.applyMatrix4(this)},fn.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},fn.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},fn.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},fn.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},fn.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},fn.prototype.applyToBufferAttribute=function(p){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),p.applyMatrix4(this)},fn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},fn.prototype.makeFrustum=function(p,a,c,m,v,b){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(p,a,m,c,v,b)},fn.prototype.getInverse=function(p){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(p).invert()},ci.prototype.isIntersectionLine=function(p){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(p)},Fr.prototype.multiplyVector3=function(p){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),p.applyQuaternion(this)},Fr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},ud.prototype.isIntersectionBox=function(p){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(p)},ud.prototype.isIntersectionPlane=function(p){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(p)},ud.prototype.isIntersectionSphere=function(p){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(p)},Ti.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Ti.prototype.barycoordFromPoint=function(p,a){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(p,a)},Ti.prototype.midpoint=function(p){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(p)},Ti.prototypenormal=function(p){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(p)},Ti.prototype.plane=function(p){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(p)},Ti.barycoordFromPoint=function(p,a,c,m,v){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ti.getBarycoord(p,a,c,m,v)},Ti.normal=function(p,a,c,m){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ti.getNormal(p,a,c,m)},Nu.prototype.extractAllPoints=function(p){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(p)},Nu.prototype.extrude=function(p){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Fo(this,p)},Nu.prototype.makeGeometry=function(p){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new oa(this,p)},et.prototype.fromAttribute=function(p,a,c){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(p,a,c)},et.prototype.distanceToManhattan=function(p){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(p)},et.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ee.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},ee.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},ee.prototype.getPositionFromMatrix=function(p){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(p)},ee.prototype.getScaleFromMatrix=function(p){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(p)},ee.prototype.getColumnFromMatrix=function(p,a){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(a,p)},ee.prototype.applyProjection=function(p){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(p)},ee.prototype.fromAttribute=function(p,a,c){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(p,a,c)},ee.prototype.distanceToManhattan=function(p){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(p)},ee.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Di.prototype.fromAttribute=function(p,a,c){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(p,a,c)},Di.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},it.prototype.getChildByName=function(p){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(p)},it.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},it.prototype.translate=function(p,a){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(a,p)},it.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},it.prototype.applyMatrix=function(p){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(p)},Object.defineProperties(it.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(p){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=p}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),ei.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(ei.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),_h},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Su.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Jh.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Da.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(eo.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(p){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=p}}),nr.prototype.setLens=function(p,a){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==a&&(this.filmGauge=a),this.setFocalLength(p)},Object.defineProperties(ua.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(p){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=p}},shadowCameraLeft:{set:function(p){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=p}},shadowCameraRight:{set:function(p){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=p}},shadowCameraTop:{set:function(p){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=p}},shadowCameraBottom:{set:function(p){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=p}},shadowCameraNear:{set:function(p){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=p}},shadowCameraFar:{set:function(p){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=p}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(p){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=p}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(p){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=p}},shadowMapHeight:{set:function(p){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=p}}}),Object.defineProperties(_n.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===ga},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(ga)}}}),_n.prototype.setDynamic=function(p){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===p?ga:ac),this},_n.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},_n.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Wt.prototype.addIndex=function(p){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(p)},Wt.prototype.addAttribute=function(p,a){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),a&&a.isBufferAttribute||a&&a.isInterleavedBufferAttribute?"index"===p?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(a),this):this.setAttribute(p,a):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(p,new _n(arguments[1],arguments[2])))},Wt.prototype.addDrawCall=function(p,a,c){void 0!==c&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(p,a)},Wt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Wt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Wt.prototype.removeAttribute=function(p){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(p)},Wt.prototype.applyMatrix=function(p){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(p)},Object.defineProperties(Wt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(ql.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(p){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=p}}}),Object.defineProperties(b_.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(p){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=p}}}),Object.defineProperties(Ds.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===ga},set:function(p){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(p)}}}),Ds.prototype.setDynamic=function(p){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===p?ga:ac),this},Ds.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Fo.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Fo.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Fo.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Wm.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Object.defineProperties(Zd.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(lr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Jt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(p){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=p===Le}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(p){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=p}}}),Object.defineProperties(aa.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Lo.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(p){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=p}}}),Object.defineProperties(Io.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(p){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=p}}}),Yi.prototype.clearTarget=function(p,a,c,m){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(p),this.clear(a,c,m)},Yi.prototype.animate=function(p){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(p)},Yi.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Yi.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Yi.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Yi.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Yi.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Yi.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Yi.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Yi.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Yi.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Yi.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Yi.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Yi.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Yi.prototype.enableScissorTest=function(p){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(p)},Yi.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Yi.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Yi.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Yi.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Yi.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Yi.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Yi.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Yi.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Yi.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Yi.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Yi.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(p){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=p}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(p){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=p}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(p){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===p?ws:Do}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(aw.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ou.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(p){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=p}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(p){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=p}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(p){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=p}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(p){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=p}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(p){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=p}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(p){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=p}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(p){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=p}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(p){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=p}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(p){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=p}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(p){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=p}}}),Object.defineProperties(dg.prototype,{load:{value:function(p){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const a=this;return(new Wy).load(p,function(m){a.setBuffer(m)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),v_.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},fu.prototype.updateCubeMap=function(p,a){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(p,a)},fu.prototype.clear=function(p,a,c,m){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(p,a,c,m)},Cl.crossOrigin=void 0,Cl.loadTexture=function(p,a,c,m){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const v=new Qp;v.setCrossOrigin(this.crossOrigin);const b=v.load(p,c,void 0,m);return a&&(b.mapping=a),b},Cl.loadTextureCube=function(p,a,c,m){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const v=new u_;v.setCrossOrigin(this.crossOrigin);const b=v.load(p,c,void 0,m);return a&&(b.mapping=a),b},Cl.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Cl.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const XC={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function w0(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ee}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ee)},9444:(ft,Ze,Z)=>{var u=Z(4542),me=Z(6926),Ee=me;Ee.v1=u,Ee.v4=me,ft.exports=Ee},7805:ft=>{for(var Ze=[],Z=0;Z<256;++Z)Ze[Z]=(Z+256).toString(16).substr(1);ft.exports=function u(me,Ee){var ve=Ee||0;return[Ze[me[ve++]],Ze[me[ve++]],Ze[me[ve++]],Ze[me[ve++]],"-",Ze[me[ve++]],Ze[me[ve++]],"-",Ze[me[ve++]],Ze[me[ve++]],"-",Ze[me[ve++]],Ze[me[ve++]],"-",Ze[me[ve++]],Ze[me[ve++]],Ze[me[ve++]],Ze[me[ve++]],Ze[me[ve++]],Ze[me[ve++]]].join("")}},7142:ft=>{var Ze="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(Ze){var Z=new Uint8Array(16);ft.exports=function(){return Ze(Z),Z}}else{var u=new Array(16);ft.exports=function(){for(var ve,Ee=0;Ee<16;Ee++)0==(3&Ee)&&(ve=4294967296*Math.random()),u[Ee]=ve>>>((3&Ee)<<3)&255;return u}}},4542:(ft,Ze,Z)=>{var Ee,ve,u=Z(7142),me=Z(7805),Te=0,ze=0;ft.exports=function fe(we,ce,ue){var pe=ce&&ue||0,_e=ce||[],Ge=(we=we||{}).node||Ee,ye=void 0!==we.clockseq?we.clockseq:ve;if(null==Ge||null==ye){var Ae=u();null==Ge&&(Ge=Ee=[1|Ae[0],Ae[1],Ae[2],Ae[3],Ae[4],Ae[5]]),null==ye&&(ye=ve=16383&(Ae[6]<<8|Ae[7]))}var at=void 0!==we.msecs?we.msecs:(new Date).getTime(),Le=void 0!==we.nsecs?we.nsecs:ze+1,mt=at-Te+(Le-ze)/1e4;if(mt<0&&void 0===we.clockseq&&(ye=ye+1&16383),(mt<0||at>Te)&&void 0===we.nsecs&&(Le=0),Le>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Te=at,ze=Le,ve=ye;var ut=(1e4*(268435455&(at+=122192928e5))+Le)%4294967296;_e[pe++]=ut>>>24&255,_e[pe++]=ut>>>16&255,_e[pe++]=ut>>>8&255,_e[pe++]=255&ut;var wt=at/4294967296*1e4&268435455;_e[pe++]=wt>>>8&255,_e[pe++]=255&wt,_e[pe++]=wt>>>24&15|16,_e[pe++]=wt>>>16&255,_e[pe++]=ye>>>8|128,_e[pe++]=255&ye;for(var Et=0;Et<6;++Et)_e[pe+Et]=Ge[Et];return ce||me(_e)}},6926:(ft,Ze,Z)=>{var u=Z(7142),me=Z(7805);ft.exports=function Ee(ve,Te,ze){var fe=Te&&ze||0;"string"==typeof ve&&(Te="binary"===ve?new Array(16):null,ve=null);var we=(ve=ve||{}).random||(ve.rng||u)();if(we[6]=15&we[6]|64,we[8]=63&we[8]|128,Te)for(var ce=0;ce<16;++ce)Te[fe+ce]=we[ce];return Te||me(we)}},6535:ft=>{var Ze=/\n/,Z="\n",u=/\s/;function me(fe,we,ce,ue){var pe=fe.indexOf(we,ce);return-1===pe||pe>ue?ue:pe}function Ee(fe){return u.test(fe)}function ze(fe,we,ce,ue){return{start:we,end:we+Math.min(ue,ce-we)}}ft.exports=function(fe,we){return ft.exports.lines(fe,we).map(function(ue){return fe.substring(ue.start,ue.end)}).join("\n")},ft.exports.lines=function(we,ce){if(0===(ce=ce||{}).width&&"nowrap"!==ce.mode)return[];we=we||"";var ue="number"==typeof ce.width?ce.width:Number.MAX_VALUE,pe=Math.max(0,ce.start||0),_e="number"==typeof ce.end?ce.end:we.length,Ge=ce.mode,ye=ce.measure||ze;return"pre"===Ge?function ve(fe,we,ce,ue,pe){for(var _e=[],Ge=ce,ye=ce;ye<ue&&ye<we.length;ye++){var Ae=we.charAt(ye),at=Ze.test(Ae);if(at||ye===ue-1){var mt=fe(we,Ge,at?ye:ye+1,pe);_e.push(mt),Ge=ye+1}}return _e}(ye,we,pe,_e,ue):function Te(fe,we,ce,ue,pe,_e){var Ge=[],ye=pe;for("nowrap"===_e&&(ye=Number.MAX_VALUE);ce<ue&&ce<we.length;){for(var Ae=me(we,Z,ce,ue);ce<Ae&&Ee(we.charAt(ce));)ce++;var at=fe(we,ce,Ae,ye),Le=ce+(at.end-at.start),mt=Le+Z.length;if(Le<Ae){for(;Le>ce&&!Ee(we.charAt(Le));)Le--;if(Le===ce)mt>ce+Z.length&&mt--,Le=mt;else for(mt=Le;Le>ce&&Ee(we.charAt(Le-Z.length));)Le--}if(Le>=ce){var ut=fe(we,ce,Le,ye);Ge.push(ut)}ce=mt}return Ge}(ye,we,pe,_e,ue,Ge)}},4703:ft=>{ft.exports=function Z(){for(var u={},me=0;me<arguments.length;me++){var Ee=arguments[me];for(var ve in Ee)Ze.call(Ee,ve)&&(u[ve]=Ee[ve])}return u};var Ze=Object.prototype.hasOwnProperty},5542:(ft,Ze,Z)=>{var u=Z(25),me=Z(3894),Ee=Z(9905),ve=Z(2867),Te=Z(7897),ze=Z(6158),fe=ze.BufferGeometry;function we(ce){fe.call(this),"string"==typeof ce&&(ce={text:ce}),this._opt=Object.assign({},ce),ce&&this.update(ce)}ft.exports=function(ue){return new we(ue)},me(we,fe),we.prototype.update=function(ce){if("string"==typeof ce&&(ce={text:ce}),!(ce=Object.assign({},this._opt,ce)).font)throw new TypeError("must specify a { font } in options");this.layout=u(ce);var ue=!1!==ce.flipY,pe=ce.font,_e=pe.common.scaleW,Ge=pe.common.scaleH,ye=this.layout.glyphs.filter(function(ut){var wt=ut.data;return wt.width*wt.height>0});this.visibleGlyphs=ye;var Ae=ve.positions(ye),at=ve.uvs(ye,_e,Ge,ue),Le=Ee([],{clockwise:!0,type:"uint16",count:ye.length});if(this.setIndex(Le),this.setAttribute("position",new ze.BufferAttribute(Ae,2)),this.setAttribute("uv",new ze.BufferAttribute(at,2)),!ce.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(ce.multipage){var mt=ve.pages(ye);this.setAttribute("page",new ze.BufferAttribute(mt,1))}},we.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new ze.Sphere);var ce=this.attributes.position.array;if(!ce||!this.attributes.position.itemSize||ce.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);Te.computeSphere(ce,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')},we.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new ze.Box3);var ce=this.boundingBox,ue=this.attributes.position.array;!ue||!this.attributes.position.itemSize||ue.length<2?ce.makeEmpty():Te.computeBox(ue,ce)}},7897:ft=>{var Z={min:[0,0],max:[0,0]};function u(me){var Ee=me.length/2;Z.min[0]=me[0],Z.min[1]=me[1],Z.max[0]=me[0],Z.max[1]=me[1];for(var ve=0;ve<Ee;ve++){var Te=me[2*ve+0],ze=me[2*ve+1];Z.min[0]=Math.min(Te,Z.min[0]),Z.min[1]=Math.min(ze,Z.min[1]),Z.max[0]=Math.max(Te,Z.max[0]),Z.max[1]=Math.max(ze,Z.max[1])}}ft.exports.computeBox=function(me,Ee){u(me),Ee.min.set(Z.min[0],Z.min[1],0),Ee.max.set(Z.max[0],Z.max[1],0)},ft.exports.computeSphere=function(me,Ee){u(me);var ve=Z.min[0],Te=Z.min[1],we=Z.max[0]-ve,ce=Z.max[1]-Te,ue=Math.sqrt(we*we+ce*ce);Ee.center.set(ve+we/2,Te+ce/2,0),Ee.radius=ue/2}},2867:ft=>{ft.exports.pages=function(Z){var u=new Float32Array(4*Z.length*1),me=0;return Z.forEach(function(Ee){var ve=Ee.data.page||0;u[me++]=ve,u[me++]=ve,u[me++]=ve,u[me++]=ve}),u},ft.exports.uvs=function(Z,u,me,Ee){var ve=new Float32Array(4*Z.length*2),Te=0;return Z.forEach(function(ze){var fe=ze.data,ce=fe.y+fe.height,ue=fe.x/u,pe=fe.y/me,_e=(fe.x+fe.width)/u,Ge=ce/me;Ee&&(pe=(me-fe.y)/me,Ge=(me-ce)/me),ve[Te++]=ue,ve[Te++]=pe,ve[Te++]=ue,ve[Te++]=Ge,ve[Te++]=_e,ve[Te++]=Ge,ve[Te++]=_e,ve[Te++]=pe}),ve},ft.exports.positions=function(Z){var u=new Float32Array(4*Z.length*2),me=0;return Z.forEach(function(Ee){var ve=Ee.data,Te=Ee.position[0]+ve.xoffset,ze=Ee.position[1]+ve.yoffset,fe=ve.width,we=ve.height;u[me++]=Te,u[me++]=ze,u[me++]=Te,u[me++]=ze+we,u[me++]=Te+fe,u[me++]=ze+we,u[me++]=Te+fe,u[me++]=ze}),u}},655:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{ZT:()=>me,pi:()=>Ee,mG:()=>we,Jh:()=>ce,XA:()=>_e,CR:()=>Ge,ev:()=>at,qq:()=>Le,FC:()=>mt,KL:()=>wt});var u=function(Fe,Xe){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tt,Je){tt.__proto__=Je}||function(tt,Je){for(var gt in Je)Object.prototype.hasOwnProperty.call(Je,gt)&&(tt[gt]=Je[gt])})(Fe,Xe)};function me(Fe,Xe){if("function"!=typeof Xe&&null!==Xe)throw new TypeError("Class extends value "+String(Xe)+" is not a constructor or null");function tt(){this.constructor=Fe}u(Fe,Xe),Fe.prototype=null===Xe?Object.create(Xe):(tt.prototype=Xe.prototype,new tt)}var Ee=function(){return Ee=Object.assign||function(Xe){for(var tt,Je=1,gt=arguments.length;Je<gt;Je++)for(var Se in tt=arguments[Je])Object.prototype.hasOwnProperty.call(tt,Se)&&(Xe[Se]=tt[Se]);return Xe},Ee.apply(this,arguments)};function we(Fe,Xe,tt,Je){return new(tt||(tt=Promise))(function(Se,kt){function Vt(cn){try{Kt(Je.next(cn))}catch(tn){kt(tn)}}function An(cn){try{Kt(Je.throw(cn))}catch(tn){kt(tn)}}function Kt(cn){cn.done?Se(cn.value):function gt(Se){return Se instanceof tt?Se:new tt(function(kt){kt(Se)})}(cn.value).then(Vt,An)}Kt((Je=Je.apply(Fe,Xe||[])).next())})}function ce(Fe,Xe){var Je,gt,Se,kt,tt={label:0,sent:function(){if(1&Se[0])throw Se[1];return Se[1]},trys:[],ops:[]};return kt={next:Vt(0),throw:Vt(1),return:Vt(2)},"function"==typeof Symbol&&(kt[Symbol.iterator]=function(){return this}),kt;function Vt(Kt){return function(cn){return function An(Kt){if(Je)throw new TypeError("Generator is already executing.");for(;tt;)try{if(Je=1,gt&&(Se=2&Kt[0]?gt.return:Kt[0]?gt.throw||((Se=gt.return)&&Se.call(gt),0):gt.next)&&!(Se=Se.call(gt,Kt[1])).done)return Se;switch(gt=0,Se&&(Kt=[2&Kt[0],Se.value]),Kt[0]){case 0:case 1:Se=Kt;break;case 4:return tt.label++,{value:Kt[1],done:!1};case 5:tt.label++,gt=Kt[1],Kt=[0];continue;case 7:Kt=tt.ops.pop(),tt.trys.pop();continue;default:if(!(Se=(Se=tt.trys).length>0&&Se[Se.length-1])&&(6===Kt[0]||2===Kt[0])){tt=0;continue}if(3===Kt[0]&&(!Se||Kt[1]>Se[0]&&Kt[1]<Se[3])){tt.label=Kt[1];break}if(6===Kt[0]&&tt.label<Se[1]){tt.label=Se[1],Se=Kt;break}if(Se&&tt.label<Se[2]){tt.label=Se[2],tt.ops.push(Kt);break}Se[2]&&tt.ops.pop(),tt.trys.pop();continue}Kt=Xe.call(Fe,tt)}catch(cn){Kt=[6,cn],gt=0}finally{Je=Se=0}if(5&Kt[0])throw Kt[1];return{value:Kt[0]?Kt[1]:void 0,done:!0}}([Kt,cn])}}}function _e(Fe){var Xe="function"==typeof Symbol&&Symbol.iterator,tt=Xe&&Fe[Xe],Je=0;if(tt)return tt.call(Fe);if(Fe&&"number"==typeof Fe.length)return{next:function(){return Fe&&Je>=Fe.length&&(Fe=void 0),{value:Fe&&Fe[Je++],done:!Fe}}};throw new TypeError(Xe?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ge(Fe,Xe){var tt="function"==typeof Symbol&&Fe[Symbol.iterator];if(!tt)return Fe;var gt,kt,Je=tt.call(Fe),Se=[];try{for(;(void 0===Xe||Xe-- >0)&&!(gt=Je.next()).done;)Se.push(gt.value)}catch(Vt){kt={error:Vt}}finally{try{gt&&!gt.done&&(tt=Je.return)&&tt.call(Je)}finally{if(kt)throw kt.error}}return Se}function at(Fe,Xe,tt){if(tt||2===arguments.length)for(var Se,Je=0,gt=Xe.length;Je<gt;Je++)(Se||!(Je in Xe))&&(Se||(Se=Array.prototype.slice.call(Xe,0,Je)),Se[Je]=Xe[Je]);return Fe.concat(Se||Array.prototype.slice.call(Xe))}function Le(Fe){return this instanceof Le?(this.v=Fe,this):new Le(Fe)}function mt(Fe,Xe,tt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var gt,Je=tt.apply(Fe,Xe||[]),Se=[];return gt={},kt("next"),kt("throw"),kt("return"),gt[Symbol.asyncIterator]=function(){return this},gt;function kt(St){Je[St]&&(gt[St]=function(On){return new Promise(function(pn,sr){Se.push([St,On,pn,sr])>1||Vt(St,On)})})}function Vt(St,On){try{!function An(St){St.value instanceof Le?Promise.resolve(St.value.v).then(Kt,cn):tn(Se[0][2],St)}(Je[St](On))}catch(pn){tn(Se[0][3],pn)}}function Kt(St){Vt("next",St)}function cn(St){Vt("throw",St)}function tn(St,On){St(On),Se.shift(),Se.length&&Vt(Se[0][0],Se[0][1])}}function wt(Fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var tt,Xe=Fe[Symbol.asyncIterator];return Xe?Xe.call(Fe):(Fe=_e(Fe),tt={},Je("next"),Je("throw"),Je("return"),tt[Symbol.asyncIterator]=function(){return this},tt);function Je(Se){tt[Se]=Fe[Se]&&function(kt){return new Promise(function(Vt,An){!function gt(Se,kt,Vt,An){Promise.resolve(An).then(function(Kt){Se({value:Kt,done:Vt})},kt)}(Vt,An,(kt=Fe[Se](kt)).done,kt.value)})}}}},8779:ft=>{ft.exports="uniform float time;\nuniform float progress;\nuniform float distanceFromCenter;\nuniform sampler2D texture1;\nuniform vec4 resolution;\nvarying vec2 vUv;\nvarying vec3 vPosition;\nfloat PI = 3.141592653589793238;\n\nvoid main() {\n  vec4 t = texture2D(texture1, vUv);\n  float bw = (t.r + t.b + t.g)/3.;\n  vec4 another = vec4(bw,bw,bw,1.);\n  gl_FragColor = mix(another,t,distanceFromCenter);\n  gl_FragColor.a = clamp(distanceFromCenter,0.2,1.);\n}"},5679:ft=>{ft.exports="uniform float time;\nvarying vec2 vUv;\nvarying vec3 vPosition;\nuniform vec2 pixels;\nfloat PI = 3.141592653589793238;\nuniform float distanceFromCenter;\n\nvoid main() {\n  vUv = (uv - vec2(0.5))*(0.8 - 0.2*distanceFromCenter*(2. - distanceFromCenter)) + vec2(0.5);\n  vec3 pos = position;\n  pos.y += sin(PI*uv.x)*0.01;\n  pos.z += sin(PI*uv.x)*0.02;\n  \n  pos.y += sin(time*0.3)*0.02;\n  vUv.y -= sin(time*0.3)*0.02;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n}"},3028:ft=>{ft.exports="uniform vec2 u_mouse;\nuniform vec2 u_viewport;\nuniform float u_time;\nuniform vec3 u_color;\nuniform sampler2D u_map;\nuniform sampler2D u_gradientMap;\nuniform float u_radius;\n\nvarying vec2 v_uv;\n\nfloat median(float r, float g, float b) \n{\n    return max(min(r, g), min(max(r, g), b));\n}\n\nfloat createCircle() \n{\n    vec2 viewportUv = gl_FragCoord.xy / u_viewport;\n    float viewportAspect = u_viewport.x / u_viewport.y;\n\n    vec2 mousePoint = vec2(u_mouse.x , 1.1 - u_mouse.y);\n    float circleRadius = max(0.0, u_radius / u_viewport.x) ;\n\n    vec2 shapeUv = viewportUv - mousePoint;\n    shapeUv /= vec2(1.0, viewportAspect);\n    shapeUv += mousePoint;\n\n    float dist = distance(shapeUv, mousePoint);\n    dist = smoothstep(circleRadius, circleRadius, dist);\n    \n    return dist;\n}\n\nvoid main() \n{\n    float circle = createCircle();\n    float width = 0.1;\n    float lineProgress = 0.3;\n    vec3 mysample = texture2D(u_map, v_uv).rgb;\n    float gr = texture2D(u_gradientMap, v_uv).r;\n\n    float sigDist = median(mysample.r, mysample.g, mysample.b) - 0.5;\n    float fill = clamp(sigDist/fwidth(sigDist) + 0.5, 0.0, 1.0);\n    \n\n    // stroke\n    float border = sigDist;\n    float outline  = smoothstep(0.0, border, sigDist);\n    outline  *= 1.0 - smoothstep(width - border, width, sigDist);\n\n\n    // gradient\n    float grgr = fract(3.0 * gr + u_time / 10.0);\n    float start = smoothstep(0.0, 0.01, grgr);\n    float end = smoothstep(lineProgress, lineProgress, grgr);\n    float mask = start * end;\n    mask = max(0.2, mask);\n\n    float finalAlpha = outline * mask + fill * circle;\n\n    gl_FragColor = vec4(u_color.xyz, finalAlpha);\n}"},3645:ft=>{ft.exports="\n\nvarying vec2 v_uv;\n\nvoid main() \n{\n    v_uv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}"},5e3:(ft,Ze,Z)=>{"use strict";Z.d(Ze,{deG:()=>Eb,tb:()=>AM,AFp:()=>SM,ip1:()=>Gf,CZH:()=>Sg,hGG:()=>s1,z2F:()=>Tg,sBO:()=>VT,Sil:()=>IM,_Vd:()=>Us,EJc:()=>Qw,SBq:()=>Pr,qLn:()=>Cd,vpe:()=>ju,tBr:()=>Sr,XFs:()=>hn,OlP:()=>tr,zs3:()=>ii,ZZ4:()=>dx,aQg:()=>WM,soG:()=>q_,YKP:()=>mE,h0i:()=>Nf,PXZ:()=>FT,R0b:()=>ml,FiY:()=>yr,Lbi:()=>V0,g9A:()=>ZE,n_E:()=>T0,Qsj:()=>Lf,FYo:()=>Dg,JOm:()=>Ka,q3G:()=>jn,tp0:()=>_u,Rgc:()=>I0,dDg:()=>JE,q4F:()=>th,GfV:()=>Hs,s_b:()=>jw,ifc:()=>bi,eFA:()=>tS,G48:()=>oS,Gpc:()=>pe,f3M:()=>Pv,X6Q:()=>sS,_c5:()=>JT,VLi:()=>OT,c2e:()=>TM,zSh:()=>o_,wAp:()=>Sn,vHH:()=>Ae,EiD:()=>mp,mCW:()=>yu,qzn:()=>yc,JVY:()=>Hv,pB0:()=>zv,eBb:()=>Gb,L6k:()=>Vb,LAX:()=>hp,cg1:()=>F_,kL8:()=>v0,yhl:()=>Uv,dqk:()=>Tn,sIi:()=>ku,CqO:()=>y_,QGY:()=>$d,F4k:()=>Gu,RDi:()=>Qf,AaK:()=>we,z3N:()=>ia,qOj:()=>gf,TTD:()=>_h,_Bn:()=>ln,xp6:()=>Ip,uIk:()=>Fu,Gre:()=>T_,ekj:()=>S_,Suo:()=>RE,Xpm:()=>pi,lG2:()=>gv,Yz7:()=>pn,cJS:()=>mr,oAB:()=>ls,Yjl:()=>td,Y36:()=>Vu,_UZ:()=>dg,GkF:()=>yw,BQk:()=>Bc,ynx:()=>$y,qZA:()=>ug,TgZ:()=>hl,EpF:()=>v_,n5z:()=>Il,Ikx:()=>k_,LFG:()=>us,$8M:()=>hc,$Z:()=>__,NdJ:()=>Cf,CRH:()=>gM,oxw:()=>Mf,ALo:()=>aM,lcZ:()=>CE,xi3:()=>ih,Dn7:()=>ME,Hsn:()=>Ur,F$t:()=>Ef,Q6J:()=>dl,s9C:()=>Sf,MGl:()=>hg,DdM:()=>iM,VKq:()=>vE,WLB:()=>Gw,iGM:()=>TE,MAs:()=>ua,evT:()=>oy,CHM:()=>cs,oJD:()=>_p,LSH:()=>Zv,kYT:()=>nu,Udp:()=>t0,WFA:()=>Zy,d8E:()=>bg,YNc:()=>yf,_uU:()=>mg,Oqu:()=>Rf,hij:()=>Uo,Gf:()=>IE});var u=Z(7579),me=Z(727),Ee=Z(8306),ve=Z(6451),Te=Z(3099);function ze(d){for(let h in d)if(d[h]===ze)return h;throw Error("Could not find renamed property on target object.")}function fe(d,h){for(const g in h)h.hasOwnProperty(g)&&!d.hasOwnProperty(g)&&(d[g]=h[g])}function we(d){if("string"==typeof d)return d;if(Array.isArray(d))return"["+d.map(we).join(", ")+"]";if(null==d)return""+d;if(d.overriddenName)return`${d.overriddenName}`;if(d.name)return`${d.name}`;const h=d.toString();if(null==h)return""+h;const g=h.indexOf("\n");return-1===g?h:h.substring(0,g)}function ce(d,h){return null==d||""===d?null===h?"":h:null==h||""===h?d:d+" "+h}const ue=ze({__forward_ref__:ze});function pe(d){return d.__forward_ref__=pe,d.toString=function(){return we(this())},d}function _e(d){return Ge(d)?d():d}function Ge(d){return"function"==typeof d&&d.hasOwnProperty(ue)&&d.__forward_ref__===pe}class Ae extends Error{constructor(h,g){super(function at(d,h){return`NG0${Math.abs(d)}${h?": "+h:""}`}(h,g)),this.code=h}}function Le(d){return"string"==typeof d?d:null==d?"":String(d)}function mt(d){return"function"==typeof d?d.name||d.toString():"object"==typeof d&&null!=d&&"function"==typeof d.type?d.type.name||d.type.toString():Le(d)}function We(d,h){const g=h?` in ${h}`:"";throw new Ae(-201,`No provider for ${mt(d)} found${g}`)}function Kt(d,h){null==d&&function cn(d,h,g,y){throw new Error(`ASSERTION ERROR: ${d}`+(null==y?"":` [Expected=> ${g} ${y} ${h} <=Actual]`))}(h,d,null,"!=")}function pn(d){return{token:d.token,providedIn:d.providedIn||null,factory:d.factory,value:void 0}}function mr(d){return{providers:d.providers||[],imports:d.imports||[]}}function Ni(d){return Zo(d,La)||Zo(d,fi)}function Zo(d,h){return d.hasOwnProperty(h)?d[h]:null}function ed(d){return d&&(d.hasOwnProperty(hi)||d.hasOwnProperty(vs))?d[hi]:null}const La=ze({\u0275prov:ze}),hi=ze({\u0275inj:ze}),fi=ze({ngInjectableDef:ze}),vs=ze({ngInjectorDef:ze});var hn=(()=>((hn=hn||{})[hn.Default=0]="Default",hn[hn.Host=1]="Host",hn[hn.Self=2]="Self",hn[hn.SkipSelf=4]="SkipSelf",hn[hn.Optional=8]="Optional",hn))();let Mr;function or(d){const h=Mr;return Mr=d,h}function Rs(d,h,g){const y=Ni(d);return y&&"root"==y.providedIn?void 0===y.value?y.value=y.factory():y.value:g&hn.Optional?null:void 0!==h?h:void We(we(d),"Injector")}function js(d){return{toString:d}.toString()}var Ws=(()=>((Ws=Ws||{})[Ws.OnPush=0]="OnPush",Ws[Ws.Default=1]="Default",Ws))(),bi=(()=>{return(d=bi||(bi={}))[d.Emulated=0]="Emulated",d[d.None=2]="None",d[d.ShadowDom=3]="ShadowDom",bi;var d})();const yn="undefined"!=typeof globalThis&&globalThis,Vn="undefined"!=typeof window&&window,Ps="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Tn=yn||"undefined"!=typeof global&&global||Vn||Ps,Ba={},Fn=[],de=ze({\u0275cmp:ze}),ae=ze({\u0275dir:ze}),ke=ze({\u0275pipe:ze}),Ye=ze({\u0275mod:ze}),Re=ze({\u0275fac:ze}),It=ze({__NG_ELEMENT_ID__:ze});let Ln=0;function pi(d){return js(()=>{const g={},y={type:d.type,providersResolver:null,decls:d.decls,vars:d.vars,factory:null,template:d.template||null,consts:d.consts||null,ngContentSelectors:d.ngContentSelectors,hostBindings:d.hostBindings||null,hostVars:d.hostVars||0,hostAttrs:d.hostAttrs||null,contentQueries:d.contentQueries||null,declaredInputs:g,inputs:null,outputs:null,exportAs:d.exportAs||null,onPush:d.changeDetection===Ws.OnPush,directiveDefs:null,pipeDefs:null,selectors:d.selectors||Fn,viewQuery:d.viewQuery||null,features:d.features||null,data:d.data||{},encapsulation:d.encapsulation||bi.Emulated,id:"c",styles:d.styles||Fn,_:null,setInput:null,schemas:d.schemas||null,tView:null},x=d.directives,M=d.features,I=d.pipes;return y.id+=Ln++,y.inputs=$f(d.inputs,g),y.outputs=$f(d.outputs),M&&M.forEach(P=>P(y)),y.directiveDefs=x?()=>("function"==typeof x?x():x).map(xi):null,y.pipeDefs=I?()=>("function"==typeof I?I():I).map(kr):null,y})}function xi(d){return ys(d)||function lo(d){return d[ae]||null}(d)}function kr(d){return function $r(d){return d[ke]||null}(d)}const Dr={};function ls(d){return js(()=>{const h={type:d.type,bootstrap:d.bootstrap||Fn,declarations:d.declarations||Fn,imports:d.imports||Fn,exports:d.exports||Fn,transitiveCompileScopes:null,schemas:d.schemas||null,id:d.id||null};return null!=d.id&&(Dr[d.id]=d.type),h})}function nu(d,h){return js(()=>{const g=Ys(d,!0);g.declarations=h.declarations||Fn,g.imports=h.imports||Fn,g.exports=h.exports||Fn})}function $f(d,h){if(null==d)return Ba;const g={};for(const y in d)if(d.hasOwnProperty(y)){let x=d[y],M=x;Array.isArray(x)&&(M=x[1],x=x[0]),g[x]=y,h&&(h[x]=M)}return g}const gv=pi;function td(d){return{type:d.type,name:d.name,factory:null,pure:!1!==d.pure,onDestroy:d.type.prototype.ngOnDestroy||null}}function ys(d){return d[de]||null}function Ys(d,h){const g=d[Ye]||null;if(!g&&!0===h)throw new Error(`Type ${we(d)} does not have '\u0275mod' property.`);return g}function uo(d){return Array.isArray(d)&&"object"==typeof d[1]}function Mo(d){return Array.isArray(d)&&!0===d[1]}function Zf(d){return 0!=(8&d.flags)}function Xg(d){return 2==(2&d.flags)}function fh(d){return 1==(1&d.flags)}function fa(d){return null!==d.template}function Kf(d){return 0!=(512&d[2])}function wl(d,h){return d.hasOwnProperty(Re)?d[Re]:null}class _v{constructor(h,g,y){this.previousValue=h,this.currentValue=g,this.firstChange=y}isFirstChange(){return this.firstChange}}function _h(){return tm}function tm(d){return d.type.prototype.ngOnChanges&&(d.setInput=Do),sC}function sC(){const d=vh(this),h=null==d?void 0:d.current;if(h){const g=d.previous;if(g===Ba)d.previous=h;else for(let y in h)g[y]=h[y];d.current=null,this.ngOnChanges(h)}}function Do(d,h,g,y){const x=vh(d)||function nm(d,h){return d[ws]=h}(d,{previous:Ba,current:null}),M=x.current||(x.current={}),I=x.previous,P=this.declaredInputs[g],N=I[P];M[P]=new _v(N&&N.currentValue,h,I===Ba),d[y]=h}_h.ngInherit=!0;const ws="__ngSimpleChanges__";function vh(d){return d[ws]||null}let bv;function Qf(d){bv=d}function wv(){return void 0!==bv?bv:"undefined"!=typeof document?document:void 0}function vr(d){return!!d.listen}const yb={createRenderer:(d,h)=>wv()};function hr(d){for(;Array.isArray(d);)d=d[0];return d}function rm(d,h){return hr(h[d])}function Xo(d,h){return hr(h[d.index])}function Mv(d,h){return d.data[h]}function su(d,h){return d[h]}function Eo(d,h){const g=h[d];return uo(g)?g:g[0]}function ac(d){return 4==(4&d[2])}function ga(d){return 128==(128&d[2])}function lc(d,h){return null==h?null:d[h]}function bh(d){d[18]=0}function sm(d,h){d[5]+=h;let g=d,y=d[3];for(;null!==y&&(1===h&&1===g[5]||-1===h&&0===g[5]);)y[5]+=h,g=y,y=y[3]}const Nn={lFrame:Mb(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function xl(){return Nn.bindingsEnabled}function Ne(){return Nn.lFrame.lView}function et(){return Nn.lFrame.tView}function cs(d){return Nn.lFrame.contextLView=d,d[8]}function Wi(){let d=Cl();for(;null!==d&&64===d.type;)d=d.parent;return d}function Cl(){return Nn.lFrame.currentTNode}function Bi(d,h){const g=Nn.lFrame;g.currentTNode=d,g.isParent=h}function Jf(){return Nn.lFrame.isParent}function Di(){Nn.lFrame.isParent=!1}function Fr(){return Nn.isInCheckNoChangesMode}function ee(d){Nn.isInCheckNoChangesMode=d}function xs(){const d=Nn.lFrame;let h=d.bindingRootIndex;return-1===h&&(h=d.bindingRootIndex=d.tView.bindingStartIndex),h}function So(){return Nn.lFrame.bindingIndex++}function Jo(d){const h=Nn.lFrame,g=h.bindingIndex;return h.bindingIndex=h.bindingIndex+d,g}function wh(d,h){const g=Nn.lFrame;g.bindingIndex=g.bindingRootIndex=d,Dl(h)}function Dl(d){Nn.lFrame.currentDirectiveIndex=d}function Ha(d){const h=Nn.lFrame.currentDirectiveIndex;return-1===h?null:d[h]}function ad(){return Nn.lFrame.currentQueryIndex}function ld(d){Nn.lFrame.currentQueryIndex=d}function Av(d){const h=d[1];return 2===h.type?h.declTNode:1===h.type?d[6]:null}function ep(d,h,g){if(g&hn.SkipSelf){let x=h,M=d;for(;!(x=x.parent,null!==x||g&hn.Host||(x=Av(M),null===x||(M=M[15],10&x.type))););if(null===x)return!1;h=x,d=M}const y=Nn.lFrame=am();return y.currentTNode=h,y.lView=d,!0}function za(d){const h=am(),g=d[1];Nn.lFrame=h,h.currentTNode=g.firstChild,h.lView=d,h.tView=g,h.contextLView=d,h.bindingIndex=g.bindingStartIndex,h.inI18n=!1}function am(){const d=Nn.lFrame,h=null===d?null:d.child;return null===h?Mb(d):h}function Mb(d){const h={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:d,child:null,inI18n:!1};return null!==d&&(d.child=h),h}function au(){const d=Nn.lFrame;return Nn.lFrame=d.parent,d.currentTNode=null,d.lView=null,d}const cc=au;function cd(){const d=au();d.isParent=!0,d.tView=null,d.selectedIndex=-1,d.contextLView=null,d.elementDepthCount=0,d.currentDirectiveIndex=-1,d.currentNamespace=null,d.bindingRootIndex=-1,d.bindingIndex=-1,d.currentQueryIndex=0}function Fs(){return Nn.lFrame.selectedIndex}function ea(d){Nn.lFrame.selectedIndex=d}function ar(){const d=Nn.lFrame;return Mv(d.tView,d.selectedIndex)}function El(d,h){for(let g=h.directiveStart,y=h.directiveEnd;g<y;g++){const M=d.data[g].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:P,ngAfterViewInit:N,ngAfterViewChecked:j,ngOnDestroy:$}=M;I&&(d.contentHooks||(d.contentHooks=[])).push(-g,I),P&&((d.contentHooks||(d.contentHooks=[])).push(g,P),(d.contentCheckHooks||(d.contentCheckHooks=[])).push(g,P)),N&&(d.viewHooks||(d.viewHooks=[])).push(-g,N),j&&((d.viewHooks||(d.viewHooks=[])).push(g,j),(d.viewCheckHooks||(d.viewCheckHooks=[])).push(g,j)),null!=$&&(d.destroyHooks||(d.destroyHooks=[])).push(g,$)}}function Ch(d,h,g){Db(d,h,3,g)}function fo(d,h,g,y){(3&d[2])===g&&Db(d,h,g,y)}function lm(d,h){let g=d[2];(3&g)===h&&(g&=2047,g+=1,d[2]=g)}function Db(d,h,g,y){const M=null!=y?y:-1,I=h.length-1;let P=0;for(let N=void 0!==y?65535&d[18]:0;N<I;N++)if("number"==typeof h[N+1]){if(P=h[N],null!=y&&P>=y)break}else h[N]<0&&(d[18]+=65536),(P<M||-1==M)&&(Mh(d,g,h,N),d[18]=(4294901760&d[18])+N+2),N++}function Mh(d,h,g,y){const x=g[y]<0,M=g[y+1],P=d[x?-g[y]:g[y]];if(x){if(d[2]>>11<d[18]>>16&&(3&d[2])===h){d[2]+=2048;try{M.call(P)}finally{}}}else try{M.call(P)}finally{}}class cm{constructor(h,g,y){this.factory=h,this.resolving=!1,this.canSeeViewProviders=g,this.injectImpl=y}}function Sl(d,h,g){const y=vr(d);let x=0;for(;x<g.length;){const M=g[x];if("number"==typeof M){if(0!==M)break;x++;const I=g[x++],P=g[x++],N=g[x++];y?d.setAttribute(h,P,N,I):h.setAttributeNS(I,P,N)}else{const I=M,P=g[++x];Xi(I)?y&&d.setProperty(h,I,P):y?d.setAttribute(h,I,P):h.setAttribute(I,P),x++}}return x}function Ai(d){return 3===d||4===d||6===d}function Xi(d){return 64===d.charCodeAt(0)}function Al(d,h){if(null!==h&&0!==h.length)if(null===d||0===d.length)d=h.slice();else{let g=-1;for(let y=0;y<h.length;y++){const x=h[y];"number"==typeof x?g=x:0===g||it(d,g,x,null,-1===g||2===g?h[++y]:null)}}return d}function it(d,h,g,y,x){let M=0,I=d.length;if(-1===h)I=-1;else for(;M<d.length;){const P=d[M++];if("number"==typeof P){if(P===h){I=-1;break}if(P>h){I=M-1;break}}}for(;M<d.length;){const P=d[M];if("number"==typeof P)break;if(P===g){if(null===y)return void(null!==x&&(d[M+1]=x));if(y===d[M+1])return void(d[M+2]=x)}M++,null!==y&&M++,null!==x&&M++}-1!==I&&(d.splice(I,0,h),M=I+1),d.splice(M++,0,g),null!==y&&d.splice(M++,0,y),null!==x&&d.splice(M++,0,x)}function dd(d){return-1!==d}function Sh(d){return 32767&d}function ci(d,h){let g=function cu(d){return d>>16}(d),y=h;for(;g>0;)y=y[15],g--;return y}let Ji=!0;function Ci(d){const h=Ji;return Ji=d,h}let Tl=0;function Ao(d,h){const g=Jn(d,h);if(-1!==g)return g;const y=h[1];y.firstCreatePass&&(d.injectorIndex=h.length,ip(y.data,d),ip(h,null),ip(y.blueprint,null));const x=Ti(d,h),M=d.injectorIndex;if(dd(x)){const I=Sh(x),P=ci(x,h),N=P[1].data;for(let j=0;j<8;j++)h[M+j]=P[I+j]|N[I+j]}return h[M+8]=x,M}function ip(d,h){d.push(0,0,0,0,0,0,0,0,h)}function Jn(d,h){return-1===d.injectorIndex||d.parent&&d.parent.injectorIndex===d.injectorIndex||null===h[d.injectorIndex+8]?-1:d.injectorIndex}function Ti(d,h){if(d.parent&&-1!==d.parent.injectorIndex)return d.parent.injectorIndex;let g=0,y=null,x=h;for(;null!==x;){const M=x[1],I=M.type;if(y=2===I?M.declTNode:1===I?x[6]:null,null===y)return-1;if(g++,x=x[15],-1!==y.injectorIndex)return y.injectorIndex|g<<16}return-1}function um(d,h,g){!function Th(d,h,g){let y;"string"==typeof g?y=g.charCodeAt(0)||0:g.hasOwnProperty(It)&&(y=g[It]),null==y&&(y=g[It]=Tl++);const x=255&y;h.data[d+(x>>5)]|=1<<x}(d,h,g)}function Q(d,h,g){if(g&hn.Optional)return d;We(h,"NodeInjector")}function $n(d,h,g,y){if(g&hn.Optional&&void 0===y&&(y=null),0==(g&(hn.Self|hn.Host))){const x=d[9],M=or(void 0);try{return x?x.get(h,y,g&hn.Optional):Rs(h,y,g&hn.Optional)}finally{or(M)}}return Q(y,h,g)}function Ya(d,h,g,y=hn.Default,x){if(null!==d){const M=function Ui(d){if("string"==typeof d)return d.charCodeAt(0)||0;const h=d.hasOwnProperty(It)?d[It]:void 0;return"number"==typeof h?h>=0?255&h:Tv:h}(g);if("function"==typeof M){if(!ep(h,d,y))return y&hn.Host?Q(x,g,y):$n(h,g,y,x);try{const I=M(y);if(null!=I||y&hn.Optional)return I;We(g)}finally{cc()}}else if("number"==typeof M){let I=null,P=Jn(d,h),N=-1,j=y&hn.Host?h[16][6]:null;for((-1===P||y&hn.SkipSelf)&&(N=-1===P?Ti(d,h):h[P+8],-1!==N&&_n(y,!1)?(I=h[1],P=Sh(N),h=ci(N,h)):P=-1);-1!==P;){const $=h[1];if(kn(M,P,$.data)){const ne=dm(P,h,g,I,y,j);if(ne!==Ih)return ne}N=h[P+8],-1!==N&&_n(y,h[1].data[P+8]===j)&&kn(M,P,h)?(I=$,P=Sh(N),h=ci(N,h)):P=-1}}}return $n(h,g,y,x)}const Ih={};function Tv(){return new ma(Wi(),Ne())}function dm(d,h,g,y,x,M){const I=h[1],P=I.data[d+8],$=Jt(P,I,g,null==y?Xg(P)&&Ji:y!=I&&0!=(3&P.type),x&hn.Host&&M===P);return null!==$?Ut(h,I,$,P):Ih}function Jt(d,h,g,y,x){const M=d.providerIndexes,I=h.data,P=1048575&M,N=d.directiveStart,$=M>>20,ge=x?P+$:d.directiveEnd;for(let Oe=y?P:P+$;Oe<ge;Oe++){const nt=I[Oe];if(Oe<N&&g===nt||Oe>=N&&nt.type===g)return Oe}if(x){const Oe=I[N];if(Oe&&fa(Oe)&&Oe.type===g)return N}return null}function Ut(d,h,g,y){let x=d[g];const M=h.data;if(function uC(d){return d instanceof cm}(x)){const I=x;I.resolving&&function ut(d,h){const g=h?`. Dependency path: ${h.join(" > ")} > ${d}`:"";throw new Ae(-200,`Circular dependency in DI detected for ${d}${g}`)}(mt(M[g]));const P=Ci(I.canSeeViewProviders);I.resolving=!0;const N=I.injectImpl?or(I.injectImpl):null;ep(d,y,hn.Default);try{x=d[g]=I.factory(void 0,M,d,y),h.firstCreatePass&&g>=y.directiveStart&&function cC(d,h,g){const{ngOnChanges:y,ngOnInit:x,ngDoCheck:M}=h.type.prototype;if(y){const I=tm(h);(g.preOrderHooks||(g.preOrderHooks=[])).push(d,I),(g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(d,I)}x&&(g.preOrderHooks||(g.preOrderHooks=[])).push(0-d,x),M&&((g.preOrderHooks||(g.preOrderHooks=[])).push(d,M),(g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(d,M))}(g,M[g],h)}finally{null!==N&&or(N),Ci(P),I.resolving=!1,cc()}}return x}function kn(d,h,g){return!!(g[h+(d>>5)]&1<<d)}function _n(d,h){return!(d&hn.Self||d&hn.Host&&h)}class ma{constructor(h,g){this._tNode=h,this._lView=g}get(h,g,y){return Ya(this._tNode,this._lView,h,y,g)}}function Il(d){return js(()=>{const h=d.prototype.constructor,g=h[Re]||fd(h),y=Object.prototype;let x=Object.getPrototypeOf(d.prototype).constructor;for(;x&&x!==y;){const M=x[Re]||fd(x);if(M&&M!==g)return M;x=Object.getPrototypeOf(x)}return M=>new M})}function fd(d){return Ge(d)?()=>{const h=fd(_e(d));return h&&h()}:wl(d)}function hc(d){return function lr(d,h){if("class"===h)return d.classes;if("style"===h)return d.styles;const g=d.attrs;if(g){const y=g.length;let x=0;for(;x<y;){const M=g[x];if(Ai(M))break;if(0===M)x+=2;else if("number"==typeof M)for(x++;x<y&&"string"==typeof g[x];)x++;else{if(M===h)return g[x+1];x+=2}}}return null}(Wi(),d)}const Rl="__parameters__";function er(d,h,g){return js(()=>{const y=function Qt(d){return function(...g){if(d){const y=d(...g);for(const x in y)this[x]=y[x]}}}(h);function x(...M){if(this instanceof x)return y.apply(this,M),this;const I=new x(...M);return P.annotation=I,P;function P(N,j,$){const ne=N.hasOwnProperty(Rl)?N[Rl]:Object.defineProperty(N,Rl,{value:[]})[Rl];for(;ne.length<=$;)ne.push(null);return(ne[$]=ne[$]||[]).push(I),N}}return g&&(x.prototype=Object.create(g.prototype)),x.prototype.ngMetadataName=d,x.annotationCls=x,x})}class tr{constructor(h,g){this._desc=h,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof g?this.__NG_ELEMENT_ID__=g:void 0!==g&&(this.\u0275prov=pn({token:this,providedIn:g.providedIn||"root",factory:g.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Eb=new tr("AnalyzeForEntryComponents");function po(d,h){void 0===h&&(h=d);for(let g=0;g<d.length;g++){let y=d[g];Array.isArray(y)?(h===d&&(h=d.slice(0,g)),po(y,h)):h!==d&&h.push(y)}return h}function na(d,h){d.forEach(g=>Array.isArray(g)?na(g,h):h(g))}function Oh(d,h,g){h>=d.length?d.push(g):d.splice(h,0,g)}function gd(d,h){return h>=d.length-1?d.pop():d.splice(h,1)[0]}function du(d,h){const g=[];for(let y=0;y<d;y++)g.push(h);return g}function ei(d,h,g){let y=qa(d,h);return y>=0?d[1|y]=g:(y=~y,function kh(d,h,g,y){let x=d.length;if(x==h)d.push(g,y);else if(1===x)d.push(y,d[0]),d[0]=g;else{for(x--,d.push(d[x-1],d[x]);x>h;)d[x]=d[x-2],x--;d[h]=g,d[h+1]=y}}(d,y,h,g)),y}function sp(d,h){const g=qa(d,h);if(g>=0)return d[1|g]}function qa(d,h){return function md(d,h,g){let y=0,x=d.length>>g;for(;x!==y;){const M=y+(x-y>>1),I=d[M<<g];if(h===I)return M<<g;I>h?x=M:y=M+1}return~(x<<g)}(d,h,1)}const fu={},pu="__NG_DI_FLAG__",kl="ngTempTokenPath",gu=/\n/gm,mu="__source",pm=ze({provide:String,useValue:ze});let Nh;function _d(d){const h=Nh;return Nh=d,h}function fC(d,h=hn.Default){if(void 0===Nh)throw new Ae(203,"");return null===Nh?Rs(d,void 0,h):Nh.get(d,h&hn.Optional?null:void 0,h)}function us(d,h=hn.Default){return(function _r(){return Mr}()||fC)(_e(d),h)}const Pv=us;function gm(d){const h=[];for(let g=0;g<d.length;g++){const y=_e(d[g]);if(Array.isArray(y)){if(0===y.length)throw new Ae(900,"");let x,M=hn.Default;for(let I=0;I<y.length;I++){const P=y[I],N=Ov(P);"number"==typeof N?-1===N?x=P.token:M|=N:x=P}h.push(us(x,M))}else h.push(us(y))}return h}function op(d,h){return d[pu]=h,d.prototype[pu]=h,d}function Ov(d){return d[pu]}const Sr=op(er("Inject",d=>({token:d})),-1),yr=op(er("Optional"),8),_u=op(er("SkipSelf"),4);let up,vc;function yd(d){var h;return(null===(h=function vm(){if(void 0===up&&(up=null,Tn.trustedTypes))try{up=Tn.trustedTypes.createPolicy("angular",{createHTML:d=>d,createScript:d=>d,createScriptURL:d=>d})}catch(d){}return up}())||void 0===h?void 0:h.createHTML(d))||d}function Fb(d){var h;return(null===(h=function Vv(){if(void 0===vc&&(vc=null,Tn.trustedTypes))try{vc=Tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:d=>d,createScript:d=>d,createScriptURL:d=>d})}catch(d){}return vc}())||void 0===h?void 0:h.createHTML(d))||d}class Fl{constructor(h){this.changingThisBreaksApplicationSecurity=h}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Lb extends Fl{getTypeName(){return"HTML"}}class dp extends Fl{getTypeName(){return"Style"}}class Nb extends Fl{getTypeName(){return"Script"}}class go extends Fl{getTypeName(){return"URL"}}class Bb extends Fl{getTypeName(){return"ResourceURL"}}function ia(d){return d instanceof Fl?d.changingThisBreaksApplicationSecurity:d}function yc(d,h){const g=Uv(d);if(null!=g&&g!==h){if("ResourceURL"===g&&"URL"===h)return!0;throw new Error(`Required a safe ${h}, got a ${g} (see https://g.co/ng/security#xss)`)}return g===h}function Uv(d){return d instanceof Fl&&d.getTypeName()||null}function Hv(d){return new Lb(d)}function Vb(d){return new dp(d)}function Gb(d){return new Nb(d)}function hp(d){return new go(d)}function zv(d){return new Bb(d)}class jv{constructor(h){this.inertDocumentHelper=h}getInertBodyElement(h){h="<body><remove></remove>"+h;try{const g=(new window.DOMParser).parseFromString(yd(h),"text/html").body;return null===g?this.inertDocumentHelper.getInertBodyElement(h):(g.removeChild(g.firstChild),g)}catch(g){return null}}}class wm{constructor(h){if(this.defaultDoc=h,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const g=this.inertDocument.createElement("html");this.inertDocument.appendChild(g);const y=this.inertDocument.createElement("body");g.appendChild(y)}}getInertBodyElement(h){const g=this.inertDocument.createElement("template");if("content"in g)return g.innerHTML=yd(h),g;const y=this.inertDocument.createElement("body");return y.innerHTML=yd(h),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(y),y}stripCustomNsAttrs(h){const g=h.attributes;for(let x=g.length-1;0<x;x--){const I=g.item(x).name;("xmlns:ns1"===I||0===I.indexOf("ns1:"))&&h.removeAttribute(I)}let y=h.firstChild;for(;y;)y.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(y),y=y.nextSibling}}const Ub=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Wv=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function yu(d){return(d=String(d)).match(Ub)||d.match(Wv)?d:"unsafe:"+d}function $a(d){const h={};for(const g of d.split(","))h[g]=!0;return h}function Vh(...d){const h={};for(const g of d)for(const y in g)g.hasOwnProperty(y)&&(h[y]=!0);return h}const Yv=$a("area,br,col,hr,img,wbr"),Hb=$a("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Gh=$a("rp,rt"),bc=Vh(Yv,Vh(Hb,$a("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Vh(Gh,$a("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Vh(Gh,Hb)),pp=$a("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$v=$a("srcset"),Mm=Vh(pp,$v,$a("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$a("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),bd=$a("script,style,template");class jb{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(h){let g=h.firstChild,y=!0;for(;g;)if(g.nodeType===Node.ELEMENT_NODE?y=this.startElement(g):g.nodeType===Node.TEXT_NODE?this.chars(g.nodeValue):this.sanitizedSomething=!0,y&&g.firstChild)g=g.firstChild;else for(;g;){g.nodeType===Node.ELEMENT_NODE&&this.endElement(g);let x=this.checkClobberedElement(g,g.nextSibling);if(x){g=x;break}g=this.checkClobberedElement(g,g.parentNode)}return this.buf.join("")}startElement(h){const g=h.nodeName.toLowerCase();if(!bc.hasOwnProperty(g))return this.sanitizedSomething=!0,!bd.hasOwnProperty(g);this.buf.push("<"),this.buf.push(g);const y=h.attributes;for(let x=0;x<y.length;x++){const M=y.item(x),I=M.name,P=I.toLowerCase();if(!Mm.hasOwnProperty(P)){this.sanitizedSomething=!0;continue}let N=M.value;pp[P]&&(N=yu(N)),$v[P]&&(d=N,N=(d=String(d)).split(",").map(h=>yu(h.trim())).join(", ")),this.buf.push(" ",I,'="',Ll(N),'"')}var d;return this.buf.push(">"),!0}endElement(h){const g=h.nodeName.toLowerCase();bc.hasOwnProperty(g)&&!Yv.hasOwnProperty(g)&&(this.buf.push("</"),this.buf.push(g),this.buf.push(">"))}chars(h){this.buf.push(Ll(h))}checkClobberedElement(h,g){if(g&&(h.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${h.outerHTML}`);return g}}const vC=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wd=/([^\#-~ |!])/g;function Ll(d){return d.replace(/&/g,"&amp;").replace(vC,function(h){return"&#"+(1024*(h.charCodeAt(0)-55296)+(h.charCodeAt(1)-56320)+65536)+";"}).replace(wd,function(h){return"&#"+h.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let xd;function mp(d,h){let g=null;try{xd=xd||function bm(d){const h=new wm(d);return function fp(){try{return!!(new window.DOMParser).parseFromString(yd(""),"text/html")}catch(d){return!1}}()?new jv(h):h}(d);let y=h?String(h):"";g=xd.getInertBodyElement(y);let x=5,M=y;do{if(0===x)throw new Error("Failed to sanitize html because the input is unstable");x--,y=M,M=g.innerHTML,g=xd.getInertBodyElement(y)}while(y!==M);return yd((new jb).sanitizeChildren(Uh(g)||g))}finally{if(g){const y=Uh(g)||g;for(;y.firstChild;)y.removeChild(y.firstChild)}}}function Uh(d){return"content"in d&&function Wb(d){return d.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===d.nodeName}(d)?d.content:null}var jn=(()=>((jn=jn||{})[jn.NONE=0]="NONE",jn[jn.HTML=1]="HTML",jn[jn.STYLE=2]="STYLE",jn[jn.SCRIPT=3]="SCRIPT",jn[jn.URL=4]="URL",jn[jn.RESOURCE_URL=5]="RESOURCE_URL",jn))();function _p(d){const h=wc();return h?Fb(h.sanitize(jn.HTML,d)||""):yc(d,"HTML")?Fb(ia(d)):mp(wv(),Le(d))}function Zv(d){const h=wc();return h?h.sanitize(jn.URL,d)||"":yc(d,"URL")?ia(d):yu(Le(d))}function wc(){const d=Ne();return d&&d[12]}const Qv="__ngContext__";function Lr(d,h){d[Qv]=h}function Xv(d){const h=function yp(d){return d[Qv]||null}(d);return h?Array.isArray(h)?h:h.lView:null}function zh(d){return d.ngOriginalError}function Sm(d,...h){d.error(...h)}class Cd{constructor(){this._console=console}handleError(h){const g=this._findOriginalError(h),y=function bp(d){return d&&d.ngErrorLogger||Sm}(h);y(this._console,"ERROR",h),g&&y(this._console,"ORIGINAL ERROR",g)}_findOriginalError(h){let g=h&&zh(h);for(;g&&zh(g);)g=zh(g);return g||null}}const sy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Tn))();function oy(d){return d.ownerDocument}function Ms(d){return d instanceof Function?d():d}var Ka=(()=>((Ka=Ka||{})[Ka.Important=1]="Important",Ka[Ka.DashCase=2]="DashCase",Ka))();function jh(d,h){return undefined(d,h)}function xc(d){const h=d[3];return Mo(h)?h[3]:h}function bu(d){return Pm(d[13])}function Mp(d){return Pm(d[4])}function Pm(d){for(;null!==d&&!Mo(d);)d=d[4];return d}function Cc(d,h,g,y,x){if(null!=y){let M,I=!1;Mo(y)?M=y:uo(y)&&(I=!0,y=y[0]);const P=hr(y);0===d&&null!==g?null==x?Fm(h,g,P):Cu(h,g,P,x||null,!0):1===d&&null!==g?Cu(h,g,P,x||null,!0):2===d?function Lm(d,h,g){const y=Ap(d,h);y&&function Sp(d,h,g,y){vr(d)?d.removeChild(h,g,y):h.removeChild(g)}(d,y,h,g)}(h,P,I):3===d&&h.destroyNode(P),null!=M&&function fy(d,h,g,y,x){const M=g[7];M!==hr(g)&&Cc(h,d,y,M,x);for(let P=10;P<g.length;P++){const N=g[P];En(N[1],N,d,h,y,M)}}(h,d,M,g,x)}}function $s(d,h,g){if(vr(d))return d.createElement(h,g);{const y=null!==g?function vb(d){const h=d.toLowerCase();return"svg"===h?"http://www.w3.org/2000/svg":"math"===h?"http://www.w3.org/1998/MathML/":null}(g):null;return null===y?d.createElement(h):d.createElementNS(y,h)}}function Ro(d,h){const g=d[9],y=g.indexOf(h),x=h[3];1024&h[2]&&(h[2]&=-1025,sm(x,-1)),g.splice(y,1)}function km(d,h){if(d.length<=10)return;const g=10+h,y=d[g];if(y){const x=y[17];null!==x&&x!==d&&Ro(x,y),h>0&&(d[g-1][4]=y[4]);const M=gd(d,10+h);!function wu(d,h){En(d,h,h[11],2,null,null),h[0]=null,h[6]=null}(y[1],y);const I=M[19];null!==I&&I.detachView(M[1]),y[3]=null,y[4]=null,y[2]&=-129}return y}function cy(d,h){if(!(256&h[2])){const g=h[11];vr(g)&&g.destroyNode&&En(d,h,g,3,null,null),function tw(d){let h=d[13];if(!h)return xu(d[1],d);for(;h;){let g=null;if(uo(h))g=h[13];else{const y=h[10];y&&(g=y)}if(!g){for(;h&&!h[4]&&h!==d;)uo(h)&&xu(h[1],h),h=h[3];null===h&&(h=d),uo(h)&&xu(h[1],h),g=h&&h[4]}h=g}}(h)}}function xu(d,h){if(!(256&h[2])){h[2]&=-129,h[2]|=256,function rw(d,h){let g;if(null!=d&&null!=(g=d.destroyHooks))for(let y=0;y<g.length;y+=2){const x=h[g[y]];if(!(x instanceof cm)){const M=g[y+1];if(Array.isArray(M))for(let I=0;I<M.length;I+=2){const P=x[M[I]],N=M[I+1];try{N.call(P)}finally{}}else try{M.call(x)}finally{}}}}(d,h),function iw(d,h){const g=d.cleanup,y=h[7];let x=-1;if(null!==g)for(let M=0;M<g.length-1;M+=2)if("string"==typeof g[M]){const I=g[M+1],P="function"==typeof I?I(h):hr(h[I]),N=y[x=g[M+2]],j=g[M+3];"boolean"==typeof j?P.removeEventListener(g[M],N,j):j>=0?y[x=j]():y[x=-j].unsubscribe(),M+=2}else{const I=y[x=g[M+1]];g[M].call(I)}if(null!==y){for(let M=x+1;M<y.length;M++)y[M]();h[7]=null}}(d,h),1===h[1].type&&vr(h[11])&&h[11].destroy();const g=h[17];if(null!==g&&Mo(h[3])){g!==h[3]&&Ro(g,h);const y=h[19];null!==y&&y.detachView(d)}}}function Ep(d,h,g){return function uy(d,h,g){let y=h;for(;null!==y&&40&y.type;)y=(h=y).parent;if(null===y)return g[0];if(2&y.flags){const x=d.data[y.directiveStart].encapsulation;if(x===bi.None||x===bi.Emulated)return null}return Xo(y,g)}(d,h.parent,g)}function Cu(d,h,g,y,x){vr(d)?d.insertBefore(h,g,y,x):h.insertBefore(g,y,x)}function Fm(d,h,g){vr(d)?d.appendChild(h,g):h.appendChild(g)}function dy(d,h,g,y,x){null!==y?Cu(d,h,g,y,x):Fm(d,h,g)}function Ap(d,h){return vr(d)?d.parentNode(h):h.parentNode}function TC(d,h,g){return $e(d,h,g)}let $e=function Po(d,h,g){return 40&d.type?Xo(d,g):null};function Yh(d,h,g,y){const x=Ep(d,y,h),M=h[11],P=TC(y.parent||h[6],y,h);if(null!=x)if(Array.isArray(g))for(let N=0;N<g.length;N++)dy(M,x,g[N],P,!1);else dy(M,x,g,P,!1)}function Tt(d,h){if(null!==h){const g=h.type;if(3&g)return Xo(h,d);if(4&g)return Dd(-1,d[h.index]);if(8&g){const y=h.child;if(null!==y)return Tt(d,y);{const x=d[h.index];return Mo(x)?Dd(-1,x):hr(x)}}if(32&g)return jh(h,d)()||hr(d[h.index]);{const y=Nr(d,h);return null!==y?Array.isArray(y)?y[0]:Tt(xc(d[16]),y):Tt(d,h.next)}}return null}function Nr(d,h){return null!==h?d[16][6].projection[h.projection]:null}function Dd(d,h){const g=10+d+1;if(g<h.length){const y=h[g],x=y[1].firstChild;if(null!==x)return Tt(y,x)}return h[7]}function dn(d,h,g,y,x,M,I){for(;null!=g;){const P=y[g.index],N=g.type;if(I&&0===h&&(P&&Lr(hr(P),y),g.flags|=4),64!=(64&g.flags))if(8&N)dn(d,h,g.child,y,x,M,!1),Cc(h,d,x,P,M);else if(32&N){const j=jh(g,y);let $;for(;$=j();)Cc(h,d,x,$,M);Cc(h,d,x,P,M)}else 16&N?hy(d,h,y,g,x,M):Cc(h,d,x,P,M);g=I?g.projectionNext:g.next}}function En(d,h,g,y,x,M){dn(g,y,d.firstChild,h,x,M,!1)}function hy(d,h,g,y,x,M){const I=g[16],N=I[6].projection[y.projection];if(Array.isArray(N))for(let j=0;j<N.length;j++)Cc(h,d,x,N[j],M);else dn(d,h,N,I[3],x,M,!0)}function Mu(d,h,g){vr(d)?d.setAttribute(h,"style",g):h.style.cssText=g}function Nm(d,h,g){vr(d)?""===g?d.removeAttribute(h,"class"):d.setAttribute(h,"class",g):h.className=g}function Tr(d,h,g){let y=d.length;for(;;){const x=d.indexOf(h,g);if(-1===x)return x;if(0===x||d.charCodeAt(x-1)<=32){const M=h.length;if(x+M===y||d.charCodeAt(x+M)<=32)return x}g=x+1}}const py="ng-template";function Ed(d,h,g){let y=0;for(;y<d.length;){let x=d[y++];if(g&&"class"===x){if(x=d[y],-1!==Tr(x.toLowerCase(),h,0))return!0}else if(1===x){for(;y<d.length&&"string"==typeof(x=d[y++]);)if(x.toLowerCase()===h)return!0;return!1}}return!1}function Bm(d){return 4===d.type&&d.value!==py}function gy(d,h,g){return h===(4!==d.type||g?d.value:py)}function ui(d,h,g){let y=4;const x=d.attrs||[],M=function IC(d){for(let h=0;h<d.length;h++)if(Ai(d[h]))return h;return d.length}(x);let I=!1;for(let P=0;P<h.length;P++){const N=h[P];if("number"!=typeof N){if(!I)if(4&y){if(y=2|1&y,""!==N&&!gy(d,N,g)||""===N&&1===h.length){if(Qa(y))return!1;I=!0}}else{const j=8&y?N:h[++P];if(8&y&&null!==d.attrs){if(!Ed(d.attrs,j,g)){if(Qa(y))return!1;I=!0}continue}const ne=Xa(8&y?"class":N,x,Bm(d),g);if(-1===ne){if(Qa(y))return!1;I=!0;continue}if(""!==j){let ge;ge=ne>M?"":x[ne+1].toLowerCase();const Oe=8&y?ge:null;if(Oe&&-1!==Tr(Oe,j,0)||2&y&&j!==ge){if(Qa(y))return!1;I=!0}}}}else{if(!I&&!Qa(y)&&!Qa(N))return!1;if(I&&Qa(N))continue;I=!1,y=N|1&y}}return Qa(y)||I}function Qa(d){return 0==(1&d)}function Xa(d,h,g,y){if(null===h)return-1;let x=0;if(y||!g){let M=!1;for(;x<h.length;){const I=h[x];if(I===d)return x;if(3===I||6===I)M=!0;else{if(1===I||2===I){let P=h[++x];for(;"string"==typeof P;)P=h[++x];continue}if(4===I)break;if(0===I){x+=4;continue}}x+=M?1:2}return-1}return function ba(d,h){let g=d.indexOf(4);if(g>-1)for(g++;g<d.length;){const y=d[g];if("number"==typeof y)return-1;if(y===h)return g;g++}return-1}(h,d)}function Sd(d,h,g=!1){for(let y=0;y<h.length;y++)if(ui(d,h[y],g))return!0;return!1}function Br(d,h){e:for(let g=0;g<h.length;g++){const y=h[g];if(d.length===y.length){for(let x=0;x<d.length;x++)if(d[x]!==y[x])continue e;return!0}}return!1}function Du(d,h){return d?":not("+h.trim()+")":h}function my(d){let h=d[0],g=1,y=2,x="",M=!1;for(;g<d.length;){let I=d[g];if("string"==typeof I)if(2&y){const P=d[++g];x+="["+I+(P.length>0?'="'+P+'"':"")+"]"}else 8&y?x+="."+I:4&y&&(x+=" "+I);else""!==x&&!Qa(I)&&(h+=Du(M,x),x=""),y=I,M=M||!Qa(y);g++}return""!==x&&(h+=Du(M,x)),h}const In={};function Ip(d){Gm(et(),Ne(),Fs()+d,Fr())}function Gm(d,h,g,y){if(!y)if(3==(3&h[2])){const M=d.preOrderCheckHooks;null!==M&&Ch(h,M,g)}else{const M=d.preOrderHooks;null!==M&&fo(h,M,0,g)}ea(g)}function Ja(d,h){return d<<17|h<<2}function Vr(d){return d>>17&32767}function Um(d){return 2|d}function el(d){return(131068&d)>>2}function Rp(d,h){return-131069&d|h<<2}function Op(d){return 1|d}function xy(d,h){const g=d.contentQueries;if(null!==g)for(let y=0;y<g.length;y+=2){const x=g[y],M=g[y+1];if(-1!==M){const I=d.data[M];ld(x),I.contentQueries(2,h[M],M)}}}function Sc(d,h,g,y,x,M,I,P,N,j){const $=h.blueprint.slice();return $[0]=x,$[2]=140|y,bh($),$[3]=$[15]=d,$[8]=g,$[10]=I||d&&d[10],$[11]=P||d&&d[11],$[12]=N||d&&d[12]||null,$[9]=j||d&&d[9]||null,$[6]=M,$[16]=2==h.type?d[16]:$,$}function Ca(d,h,g,y,x){let M=d.data[h];if(null===M)M=function Qh(d,h,g,y,x){const M=Cl(),I=Jf(),N=d.data[h]=function Up(d,h,g,y,x,M){return{type:g,index:y,insertBeforeIndex:null,injectorIndex:h?h.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:x,attrs:M,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:h,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?M:M&&M.parent,g,h,y,x);return null===d.firstChild&&(d.firstChild=N),null!==M&&(I?null==M.child&&null!==N.parent&&(M.child=N):null===M.next&&(M.next=N)),N}(d,h,g,y,x),function Sv(){return Nn.lFrame.inI18n}()&&(M.flags|=64);else if(64&M.type){M.type=g,M.value=y,M.attrs=x;const I=function Xf(){const d=Nn.lFrame,h=d.currentTNode;return d.isParent?h:h.parent}();M.injectorIndex=null===I?-1:I.injectorIndex}return Bi(M,!0),M}function Pd(d,h,g,y){if(0===g)return-1;const x=h.length;for(let M=0;M<g;M++)h.push(y),d.blueprint.push(y),d.data.push(null);return x}function Su(d,h,g){za(h);try{const y=d.viewQuery;null!==y&&n_(1,y,g);const x=d.template;null!==x&&$m(d,h,x,1,g),d.firstCreatePass&&(d.firstCreatePass=!1),d.staticContentQueries&&xy(d,h),d.staticViewQueries&&n_(2,d.viewQuery,g);const M=d.components;null!==M&&function Cy(d,h){for(let g=0;g<h.length;g++)Ey(d,h[g])}(h,M)}catch(y){throw d.firstCreatePass&&(d.incompleteFirstPass=!0,d.firstCreatePass=!1),y}finally{h[2]&=-5,cd()}}function Ma(d,h,g,y){const x=h[2];if(256==(256&x))return;za(h);const M=Fr();try{bh(h),function ho(d){return Nn.lFrame.bindingIndex=d}(d.bindingStartIndex),null!==g&&$m(d,h,g,2,y);const I=3==(3&x);if(!M)if(I){const j=d.preOrderCheckHooks;null!==j&&Ch(h,j,null)}else{const j=d.preOrderHooks;null!==j&&fo(h,j,0,null),lm(h,0)}if(function sf(d){for(let h=bu(d);null!==h;h=Mp(h)){if(!h[2])continue;const g=h[9];for(let y=0;y<g.length;y++){const x=g[y],M=x[3];0==(1024&x[2])&&sm(M,1),x[2]|=1024}}}(h),function rf(d){for(let h=bu(d);null!==h;h=Mp(h))for(let g=10;g<h.length;g++){const y=h[g],x=y[1];ga(y)&&Ma(x,y,x.template,y[8])}}(h),null!==d.contentQueries&&xy(d,h),!M)if(I){const j=d.contentCheckHooks;null!==j&&Ch(h,j)}else{const j=d.contentHooks;null!==j&&fo(h,j,1),lm(h,1)}!function Bp(d,h){const g=d.hostBindingOpCodes;if(null!==g)try{for(let y=0;y<g.length;y++){const x=g[y];if(x<0)ea(~x);else{const M=x,I=g[++y],P=g[++y];wh(I,M),P(2,h[M])}}}finally{ea(-1)}}(d,h);const P=d.components;null!==P&&function qm(d,h){for(let g=0;g<h.length;g++)jp(d,h[g])}(h,P);const N=d.viewQuery;if(null!==N&&n_(2,N,y),!M)if(I){const j=d.viewCheckHooks;null!==j&&Ch(h,j)}else{const j=d.viewHooks;null!==j&&fo(h,j,2),lm(h,2)}!0===d.firstUpdatePass&&(d.firstUpdatePass=!1),M||(h[2]&=-73),1024&h[2]&&(h[2]&=-1025,sm(h[3],-1))}finally{cd()}}function Au(d,h,g,y){const x=h[10],M=!Fr(),I=ac(h);try{M&&!I&&x.begin&&x.begin(),I&&Su(d,h,y),Ma(d,h,g,y)}finally{M&&!I&&x.end&&x.end()}}function $m(d,h,g,y,x){const M=Fs(),I=2&y;try{ea(-1),I&&h.length>20&&Gm(d,h,20,Fr()),g(y,x)}finally{ea(M)}}function Tu(d,h,g){if(Zf(h)){const x=h.directiveEnd;for(let M=h.directiveStart;M<x;M++){const I=d.data[M];I.contentQueries&&I.contentQueries(1,g[M],M)}}}function Vp(d,h,g){!xl()||(function Qm(d,h,g,y){const x=g.directiveStart,M=g.directiveEnd;d.firstCreatePass||Ao(g,h),Lr(y,h);const I=g.initialInputs;for(let P=x;P<M;P++){const N=d.data[P],j=fa(N);j&&Jm(h,g,N);const $=Ut(h,d,P,g);Lr($,h),null!==I&&Ic(0,P-x,$,N,0,I),j&&(Eo(g.index,h)[8]=$)}}(d,h,g,Xo(g,h)),128==(128&g.flags)&&function Hp(d,h,g){const y=g.directiveStart,x=g.directiveEnd,I=g.index,P=function xh(){return Nn.lFrame.currentDirectiveIndex}();try{ea(I);for(let N=y;N<x;N++){const j=d.data[N],$=h[N];Dl(N),(null!==j.hostBindings||0!==j.hostVars||null!==j.hostAttrs)&&Jr(j,$)}}finally{ea(-1),Dl(P)}}(d,h,g))}function Da(d,h,g=Xo){const y=h.localNames;if(null!==y){let x=h.index+1;for(let M=0;M<y.length;M+=2){const I=y[M+1],P=-1===I?g(h,d):d[I];d[x++]=P}}}function Od(d){const h=d.tView;return null===h||h.incompleteFirstPass?d.tView=Xh(1,null,d.template,d.decls,d.vars,d.directiveDefs,d.pipeDefs,d.viewQuery,d.schemas,d.consts):h}function Xh(d,h,g,y,x,M,I,P,N,j){const $=20+y,ne=$+x,ge=function Gp(d,h){const g=[];for(let y=0;y<h;y++)g.push(y<d?null:In);return g}($,ne),Oe="function"==typeof j?j():j;return ge[1]={type:d,blueprint:ge,template:g,queries:null,viewQuery:P,declTNode:h,data:ge.slice().fill(null,$),bindingStartIndex:$,expandoStartIndex:ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof M?M():M,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:N,consts:Oe,incompleteFirstPass:!1}}function Iu(d,h,g,y){const x=i_(h);null===g?x.push(y):(x.push(g),d.firstCreatePass&&Yp(d).push(y,x.length-1))}function kd(d,h,g){for(let y in d)if(d.hasOwnProperty(y)){const x=d[y];(g=null===g?{}:g).hasOwnProperty(y)?g[y].push(h,x):g[y]=[h,x]}return g}function vo(d,h,g,y,x,M,I,P){const N=Xo(h,g);let $,j=h.inputs;!P&&null!=j&&($=j[y])?(r_(d,g,$,y,x),Xg(h)&&function tf(d,h){const g=Eo(h,d);16&g[2]||(g[2]|=64)}(g,h.index)):3&h.type&&(y=function My(d){return"class"===d?"className":"for"===d?"htmlFor":"formaction"===d?"formAction":"innerHtml"===d?"innerHTML":"readonly"===d?"readOnly":"tabindex"===d?"tabIndex":d}(y),x=null!=I?I(x,h.value||"",y):x,vr(M)?M.setProperty(N,y,x):Xi(y)||(N.setProperty?N.setProperty(y,x):N[y]=x))}function Ac(d,h,g,y){let x=!1;if(xl()){const M=function Tc(d,h,g){const y=d.directiveRegistry;let x=null;if(y)for(let M=0;M<y.length;M++){const I=y[M];Sd(g,I.selectors,!1)&&(x||(x=[]),um(Ao(g,h),d,I.type),fa(I)?(Gl(d,g),x.unshift(I)):x.push(I))}return x}(d,h,g),I=null===y?null:{"":-1};if(null!==M){x=!0,Dy(g,d.data.length,M.length);for(let $=0;$<M.length;$++){const ne=M[$];ne.providersResolver&&ne.providersResolver(ne)}let P=!1,N=!1,j=Pd(d,h,M.length,null);for(let $=0;$<M.length;$++){const ne=M[$];g.mergedAttrs=Al(g.mergedAttrs,ne.hostAttrs),ko(d,g,h,j,ne),Xm(j,ne,I),null!==ne.contentQueries&&(g.flags|=8),(null!==ne.hostBindings||null!==ne.hostAttrs||0!==ne.hostVars)&&(g.flags|=128);const ge=ne.type.prototype;!P&&(ge.ngOnChanges||ge.ngOnInit||ge.ngDoCheck)&&((d.preOrderHooks||(d.preOrderHooks=[])).push(g.index),P=!0),!N&&(ge.ngOnChanges||ge.ngDoCheck)&&((d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(g.index),N=!0),j++}!function Es(d,h){const y=h.directiveEnd,x=d.data,M=h.attrs,I=[];let P=null,N=null;for(let j=h.directiveStart;j<y;j++){const $=x[j],ne=$.inputs,ge=null===M||Bm(h)?null:e_(ne,M);I.push(ge),P=kd(ne,j,P),N=kd($.outputs,j,N)}null!==P&&(P.hasOwnProperty("class")&&(h.flags|=16),P.hasOwnProperty("style")&&(h.flags|=32)),h.initialInputs=I,h.inputs=P,h.outputs=N}(d,g)}I&&function es(d,h,g){if(h){const y=d.localNames=[];for(let x=0;x<h.length;x+=2){const M=g[h[x+1]];if(null==M)throw new Ae(-301,!1);y.push(h[x],M)}}}(g,y,I)}return g.mergedAttrs=Al(g.mergedAttrs,g.attrs),x}function Vl(d,h,g,y,x,M){const I=M.hostBindings;if(I){let P=d.hostBindingOpCodes;null===P&&(P=d.hostBindingOpCodes=[]);const N=~h.index;(function cw(d){let h=d.length;for(;h>0;){const g=d[--h];if("number"==typeof g&&g<0)return g}return 0})(P)!=N&&P.push(N),P.push(y,x,I)}}function Jr(d,h){null!==d.hostBindings&&d.hostBindings(1,h)}function Gl(d,h){h.flags|=2,(d.components||(d.components=[])).push(h.index)}function Xm(d,h,g){if(g){if(h.exportAs)for(let y=0;y<h.exportAs.length;y++)g[h.exportAs[y]]=d;fa(h)&&(g[""]=d)}}function Dy(d,h,g){d.flags|=1,d.directiveStart=h,d.directiveEnd=h+g,d.providerIndexes=h}function ko(d,h,g,y,x){d.data[y]=x;const M=x.factory||(x.factory=wl(x.type)),I=new cm(M,fa(x),null);d.blueprint[y]=I,g[y]=I,Vl(d,h,0,y,Pd(d,g,x.hostVars,In),x)}function Jm(d,h,g){const y=Xo(h,d),x=Od(g),M=d[10],I=Pc(d,Sc(d,x,null,g.onPush?64:16,y,h,M,M.createRenderer(y,g),null,null));d[h.index]=I}function Bs(d,h,g,y,x,M){const I=Xo(d,h);!function nf(d,h,g,y,x,M,I){if(null==M)vr(d)?d.removeAttribute(h,x,g):h.removeAttribute(x);else{const P=null==I?Le(M):I(M,y||"",x);vr(d)?d.setAttribute(h,x,P,g):g?h.setAttributeNS(g,x,P):h.setAttribute(x,P)}}(h[11],I,M,d.value,g,y,x)}function Ic(d,h,g,y,x,M){const I=M[h];if(null!==I){const P=y.setInput;for(let N=0;N<I.length;){const j=I[N++],$=I[N++],ne=I[N++];null!==P?y.setInput(g,ne,j,$):g[$]=ne}}}function e_(d,h){let g=null,y=0;for(;y<h.length;){const x=h[y];if(0!==x)if(5!==x){if("number"==typeof x)break;d.hasOwnProperty(x)&&(null===g&&(g=[]),g.push(x,d[x],h[y+1])),y+=2}else y+=2;else y+=4}return g}function zp(d,h,g,y){return new Array(d,!0,!1,h,null,0,y,g,null,null)}function jp(d,h){const g=Eo(h,d);if(ga(g)){const y=g[1];80&g[2]?Ma(y,g,y.template,g[8]):g[5]>0&&af(g)}}function af(d){for(let y=bu(d);null!==y;y=Mp(y))for(let x=10;x<y.length;x++){const M=y[x];if(1024&M[2]){const I=M[1];Ma(I,M,I.template,M[8])}else M[5]>0&&af(M)}const g=d[1].components;if(null!==g)for(let y=0;y<g.length;y++){const x=Eo(g[y],d);ga(x)&&x[5]>0&&af(x)}}function Ey(d,h){const g=Eo(h,d),y=g[1];(function Rc(d,h){for(let g=h.length;g<d.blueprint.length;g++)h.push(d.blueprint[g])})(y,g),Su(y,g,g[8])}function Pc(d,h){return d[13]?d[14][4]=h:d[13]=h,d[14]=h,h}function Sy(d){for(;d;){d[2]|=64;const h=xc(d);if(Kf(d)&&!h)return d;d=h}return null}function Ay(d,h,g){const y=h[10];y.begin&&y.begin();try{Ma(d,h,d.template,g)}catch(x){throw Qs(h,x),x}finally{y.end&&y.end()}}function dw(d){!function t_(d){for(let h=0;h<d.components.length;h++){const g=d.components[h],y=Xv(g),x=y[1];Au(x,y,x.template,g)}}(d[8])}function n_(d,h,g){ld(0),h(d,g)}const Ss=(()=>Promise.resolve(null))();function i_(d){return d[7]||(d[7]=[])}function Yp(d){return d.cleanup||(d.cleanup=[])}function lf(d,h,g){return(null===d||fa(d))&&(g=function aC(d){for(;Array.isArray(d);){if("object"==typeof d[1])return d;d=d[0]}return null}(g[h.index])),g[11]}function Qs(d,h){const g=d[9],y=g?g.get(Cd,null):null;y&&y.handleError(h)}function r_(d,h,g,y,x){for(let M=0;M<g.length;){const I=g[M++],P=g[M++],N=h[I],j=d.data[I];null!==j.setInput?j.setInput(N,x,y,P):N[P]=x}}function Ei(d,h,g){const y=rm(h,d);!function Nl(d,h,g){vr(d)?d.setValue(h,g):h.textContent=g}(d[11],y,g)}function il(d,h,g){let y=g?d.styles:null,x=g?d.classes:null,M=0;if(null!==h)for(let I=0;I<h.length;I++){const P=h[I];"number"==typeof P?M=P:1==M?x=ce(x,P):2==M&&(y=ce(y,P+": "+h[++I]+";"))}g?d.styles=y:d.stylesWithoutHost=y,g?d.classes=x:d.classesWithoutHost=x}const cf=new tr("INJECTOR",-1);class Fd{get(h,g=fu){if(g===fu){const y=new Error(`NullInjectorError: No provider for ${we(h)}!`);throw y.name="NullInjectorError",y}return g}}const o_=new tr("Set Injector scope."),Ld={},Iy={};let Ru;function $p(){return void 0===Ru&&(Ru=new Fd),Ru}function Ry(d,h=null,g=null,y){const x=Ul(d,h,g,y);return x._resolveInjectorDefTypes(),x}function Ul(d,h=null,g=null,y){return new hw(d,g,h||$p(),y)}class hw{constructor(h,g,y,x=null){this.parent=y,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const M=[];g&&na(g,P=>this.processProvider(P,h,g)),na([h],P=>this.processInjectorType(P,[],M)),this.records.set(cf,kc(void 0,this));const I=this.records.get(o_);this.scope=null!=I?I.value:null,this.source=x||("object"==typeof h?null:we(h))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(h=>h.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(h,g=fu,y=hn.Default){this.assertNotDestroyed();const x=_d(this),M=or(void 0);try{if(!(y&hn.SkipSelf)){let P=this.records.get(h);if(void 0===P){const N=function rl(d){return"function"==typeof d||"object"==typeof d&&d instanceof tr}(h)&&Ni(h);P=N&&this.injectableDefInScope(N)?kc(Oc(h),Ld):null,this.records.set(h,P)}if(null!=P)return this.hydrate(h,P)}return(y&hn.Self?$p():this.parent).get(h,g=y&hn.Optional&&g===fu?null:g)}catch(I){if("NullInjectorError"===I.name){if((I[kl]=I[kl]||[]).unshift(we(h)),x)throw I;return function kv(d,h,g,y){const x=d[kl];throw h[mu]&&x.unshift(h[mu]),d.message=function Fv(d,h,g,y=null){d=d&&"\n"===d.charAt(0)&&"\u0275"==d.charAt(1)?d.substr(2):d;let x=we(h);if(Array.isArray(h))x=h.map(we).join(" -> ");else if("object"==typeof h){let M=[];for(let I in h)if(h.hasOwnProperty(I)){let P=h[I];M.push(I+":"+("string"==typeof P?JSON.stringify(P):we(P)))}x=`{${M.join(", ")}}`}return`${g}${y?"("+y+")":""}[${x}]: ${d.replace(gu,"\n  ")}`}("\n"+d.message,x,g,y),d.ngTokenPath=x,d[kl]=null,d}(I,h,"R3InjectorError",this.source)}throw I}finally{or(M),_d(x)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(h=>this.get(h))}toString(){const h=[];return this.records.forEach((y,x)=>h.push(we(x))),`R3Injector[${h.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ae(205,!1)}processInjectorType(h,g,y){if(!(h=_e(h)))return!1;let x=ed(h);const M=null==x&&h.ngModule||void 0,I=void 0===M?h:M,P=-1!==y.indexOf(I);if(void 0!==M&&(x=ed(M)),null==x)return!1;if(null!=x.imports&&!P){let $;y.push(I);try{na(x.imports,ne=>{this.processInjectorType(ne,g,y)&&(void 0===$&&($=[]),$.push(ne))})}finally{}if(void 0!==$)for(let ne=0;ne<$.length;ne++){const{ngModule:ge,providers:Oe}=$[ne];na(Oe,nt=>this.processProvider(nt,ge,Oe||Fn))}}this.injectorDefTypes.add(I);const N=wl(I)||(()=>new I);this.records.set(I,kc(N,Ld));const j=x.providers;if(null!=j&&!P){const $=h;na(j,ne=>this.processProvider(ne,$,j))}return void 0!==M&&void 0!==h.providers}processProvider(h,g,y){let x=Hl(h=_e(h))?h:_e(h&&h.provide);const M=function PC(d,h,g){return uf(d)?kc(void 0,d.useValue):kc(fw(d),Ld)}(h);if(Hl(h)||!0!==h.multi)this.records.get(x);else{let I=this.records.get(x);I||(I=kc(void 0,Ld,!0),I.factory=()=>gm(I.multi),this.records.set(x,I)),x=h,I.multi.push(h)}this.records.set(x,M)}hydrate(h,g){return g.value===Ld&&(g.value=Iy,g.value=g.factory()),"object"==typeof g.value&&g.value&&function Vs(d){return null!==d&&"object"==typeof d&&"function"==typeof d.ngOnDestroy}(g.value)&&this.onDestroy.add(g.value),g.value}injectableDefInScope(h){if(!h.providedIn)return!1;const g=_e(h.providedIn);return"string"==typeof g?"any"===g||g===this.scope:this.injectorDefTypes.has(g)}}function Oc(d){const h=Ni(d),g=null!==h?h.factory:wl(d);if(null!==g)return g;if(d instanceof tr)throw new Ae(204,!1);if(d instanceof Function)return function Fo(d){const h=d.length;if(h>0)throw du(h,"?"),new Ae(204,!1);const g=function Fa(d){const h=d&&(d[La]||d[fi]);if(h){const g=function nc(d){if(d.hasOwnProperty("name"))return d.name;const h=(""+d).match(/^function\s*([^\s(]+)/);return null===h?"":h[1]}(d);return console.warn(`DEPRECATED: DI is instantiating a token "${g}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${g}" class.`),h}return null}(d);return null!==g?()=>g.factory(d):()=>new d}(d);throw new Ae(204,!1)}function fw(d,h,g){let y;if(Hl(d)){const x=_e(d);return wl(x)||Oc(x)}if(uf(d))y=()=>_e(d.useValue);else if(function Nd(d){return!(!d||!d.useFactory)}(d))y=()=>d.useFactory(...gm(d.deps||[]));else if(function yo(d){return!(!d||!d.useExisting)}(d))y=()=>us(_e(d.useExisting));else{const x=_e(d&&(d.useClass||d.provide));if(!function OC(d){return!!d.deps}(d))return wl(x)||Oc(x);y=()=>new x(...gm(d.deps))}return y}function kc(d,h,g=!1){return{factory:d,value:h,multi:g?[]:void 0}}function uf(d){return null!==d&&"object"==typeof d&&pm in d}function Hl(d){return"function"==typeof d}let ii=(()=>{class d{static create(g,y){var x;if(Array.isArray(g))return Ry({name:""},y,g,"");{const M=null!==(x=g.name)&&void 0!==x?x:"";return Ry({name:M},g.parent,g.providers,M)}}}return d.THROW_IF_NOT_FOUND=fu,d.NULL=new Fd,d.\u0275prov=pn({token:d,providedIn:"any",factory:()=>us(cf)}),d.__NG_ELEMENT_ID__=-1,d})();function ts(d,h){El(Xv(d)[1],Wi())}function gf(d){let h=function pf(d){return Object.getPrototypeOf(d.prototype).constructor}(d.type),g=!0;const y=[d];for(;h;){let x;if(fa(d))x=h.\u0275cmp||h.\u0275dir;else{if(h.\u0275cmp)throw new Ae(903,"");x=h.\u0275dir}if(x){if(g){y.push(x);const I=d;I.inputs=sl(d.inputs),I.declaredInputs=sl(d.declaredInputs),I.outputs=sl(d.outputs);const P=x.hostBindings;P&&br(d,P);const N=x.viewQuery,j=x.contentQueries;if(N&&l_(d,N),j&&c_(d,j),fe(d.inputs,x.inputs),fe(d.declaredInputs,x.declaredInputs),fe(d.outputs,x.outputs),fa(x)&&x.data.animation){const $=d.data;$.animation=($.animation||[]).concat(x.data.animation)}}const M=x.features;if(M)for(let I=0;I<M.length;I++){const P=M[I];P&&P.ngInherit&&P(d),P===gf&&(g=!1)}}h=Object.getPrototypeOf(h)}!function pw(d){let h=0,g=null;for(let y=d.length-1;y>=0;y--){const x=d[y];x.hostVars=h+=x.hostVars,x.hostAttrs=Al(x.hostAttrs,g=Al(g,x.hostAttrs))}}(y)}function sl(d){return d===Ba?{}:d===Fn?[]:d}function l_(d,h){const g=d.viewQuery;d.viewQuery=g?(y,x)=>{h(y,x),g(y,x)}:h}function c_(d,h){const g=d.contentQueries;d.contentQueries=g?(y,x,M)=>{h(y,x,M),g(y,x,M)}:h}function br(d,h){const g=d.hostBindings;d.hostBindings=g?(y,x)=>{h(y,x),g(y,x)}:h}let jl=null;function Wl(){if(!jl){const d=Tn.Symbol;if(d&&d.iterator)jl=d.iterator;else{const h=Object.getOwnPropertyNames(Map.prototype);for(let g=0;g<h.length;++g){const y=h[g];"entries"!==y&&"size"!==y&&Map.prototype[y]===Map.prototype.entries&&(jl=y)}}}return jl}function ku(d){return!!Hd(d)&&(Array.isArray(d)||!(d instanceof Map)&&Wl()in d)}function Hd(d){return null!==d&&("function"==typeof d||"object"==typeof d)}function Bo(d,h,g){return d[h]=g}function ns(d,h,g){return!Object.is(d[h],g)&&(d[h]=g,!0)}function Yl(d,h,g,y){const x=ns(d,h,g);return ns(d,h+1,y)||x}function Fu(d,h,g,y){const x=Ne();return ns(x,So(),h)&&(et(),Bs(ar(),x,d,h,g,y)),Fu}function Wd(d,h,g,y){return ns(d,So(),g)?h+Le(g)+y:In}function yf(d,h,g,y,x,M,I,P){const N=Ne(),j=et(),$=d+20,ne=j.firstCreatePass?function Fy(d,h,g,y,x,M,I,P,N){const j=h.consts,$=Ca(h,d,4,I||null,lc(j,P));Ac(h,g,$,lc(j,N)),El(h,$);const ne=$.tViews=Xh(2,$,y,x,M,h.directiveRegistry,h.pipeRegistry,null,h.schemas,j);return null!==h.queries&&(h.queries.template(h,$),ne.queries=h.queries.embeddedTView($)),$}($,j,N,h,g,y,x,M,I):j.data[$];Bi(ne,!1);const ge=N[11].createComment("");Yh(j,N,ge,ne),Lr(ge,N),Pc(N,N[$]=zp(ge,N,ge,ne)),fh(ne)&&Vp(j,N,ne),null!=I&&Da(N,ne,P)}function ua(d){return su(function Ev(){return Nn.lFrame.contextLView}(),20+d)}function Vu(d,h=hn.Default){const g=Ne();return null===g?us(d,h):Ya(Wi(),g,_e(d),h)}function __(){throw new Error("invalid")}function dl(d,h,g){const y=Ne();return ns(y,So(),h)&&vo(et(),ar(),y,d,h,y[11],g,!1),dl}function cg(d,h,g,y,x){const I=x?"class":"style";r_(d,g,h.inputs[I],I,y)}function hl(d,h,g,y){const x=Ne(),M=et(),I=20+d,P=x[11],N=x[I]=$s(P,h,function XD(){return Nn.lFrame.currentNamespace}()),j=M.firstCreatePass?function BC(d,h,g,y,x,M,I){const P=h.consts,j=Ca(h,d,2,x,lc(P,M));return Ac(h,g,j,lc(P,I)),null!==j.attrs&&il(j,j.attrs,!1),null!==j.mergedAttrs&&il(j,j.mergedAttrs,!0),null!==h.queries&&h.queries.elementStart(h,j),j}(I,M,x,0,h,g,y):M.data[I];Bi(j,!0);const $=j.mergedAttrs;null!==$&&Sl(P,N,$);const ne=j.classes;null!==ne&&Nm(P,N,ne);const ge=j.styles;null!==ge&&Mu(P,N,ge),64!=(64&j.flags)&&Yh(M,x,N,j),0===function xb(){return Nn.lFrame.elementDepthCount}()&&Lr(N,x),function Cb(){Nn.lFrame.elementDepthCount++}(),fh(j)&&(Vp(M,x,j),Tu(M,j,x)),null!==y&&Da(x,j)}function ug(){let d=Wi();Jf()?Di():(d=d.parent,Bi(d,!1));const h=d;!function Dv(){Nn.lFrame.elementDepthCount--}();const g=et();g.firstCreatePass&&(El(g,d),Zf(d)&&g.queries.elementEnd(d)),null!=h.classesWithoutHost&&function Eh(d){return 0!=(16&d.flags)}(h)&&cg(g,h,Ne(),h.classesWithoutHost,!0),null!=h.stylesWithoutHost&&function JD(d){return 0!=(32&d.flags)}(h)&&cg(g,h,Ne(),h.stylesWithoutHost,!1)}function dg(d,h,g,y){hl(d,h,g,y),ug()}function $y(d,h,g){const y=Ne(),x=et(),M=d+20,I=x.firstCreatePass?function qy(d,h,g,y,x){const M=h.consts,I=lc(M,y),P=Ca(h,d,8,"ng-container",I);return null!==I&&il(P,I,!0),Ac(h,g,P,lc(M,x)),null!==h.queries&&h.queries.elementStart(h,P),P}(M,x,y,h,g):x.data[M];Bi(I,!0);const P=y[M]=y[11].createComment("");Yh(x,y,P,I),Lr(P,y),fh(I)&&(Vp(x,y,I),Tu(x,I,y)),null!=g&&Da(y,I)}function Bc(){let d=Wi();const h=et();Jf()?Di():(d=d.parent,Bi(d,!1)),h.firstCreatePass&&(El(h,d),Zf(d)&&h.queries.elementEnd(d))}function yw(d,h,g){$y(d,h,g),Bc()}function v_(){return Ne()}function $d(d){return!!d&&"function"==typeof d.then}function Gu(d){return!!d&&"function"==typeof d.subscribe}const y_=Gu;function Cf(d,h,g,y){const x=Ne(),M=et(),I=Wi();return bw(M,x,x[11],I,d,h,!!g,y),Cf}function Zy(d,h){const g=Wi(),y=Ne(),x=et();return bw(x,y,lf(Ha(x.data),g,y),g,d,h,!1),Zy}function bw(d,h,g,y,x,M,I,P){const N=fh(y),$=d.firstCreatePass&&Yp(d),ne=h[8],ge=i_(h);let Oe=!0;if(3&y.type||P){const Ht=Xo(y,h),sn=P?P(Ht):Ht,ht=ge.length,Dn=P?vi=>P(hr(vi[y.index])):y.index;if(vr(g)){let vi=null;if(!P&&N&&(vi=function VC(d,h,g,y){const x=d.cleanup;if(null!=x)for(let M=0;M<x.length-1;M+=2){const I=x[M];if(I===g&&x[M+1]===y){const P=h[7],N=x[M+2];return P.length>N?P[N]:null}"string"==typeof I&&(M+=2)}return null}(d,h,x,y.index)),null!==vi)(vi.__ngLastListenerFn__||vi).__ngNextListenerFn__=M,vi.__ngLastListenerFn__=M,Oe=!1;else{M=Ky(y,h,ne,M,!1);const zi=g.listen(sn,x,M);ge.push(M,zi),$&&$.push(x,Dn,ht,ht+1)}}else M=Ky(y,h,ne,M,!0),sn.addEventListener(x,M,I),ge.push(M),$&&$.push(x,Dn,ht,I)}else M=Ky(y,h,ne,M,!1);const nt=y.outputs;let Dt;if(Oe&&null!==nt&&(Dt=nt[x])){const Ht=Dt.length;if(Ht)for(let sn=0;sn<Ht;sn+=2){const Ra=h[Dt[sn]][Dt[sn+1]].subscribe(M),Rg=ge.length;ge.push(M,Ra),$&&$.push(x,y.index,Rg,-(Rg+1))}}}function ww(d,h,g,y){try{return!1!==g(y)}catch(x){return Qs(d,x),!1}}function Ky(d,h,g,y,x){return function M(I){if(I===Function)return y;const P=2&d.flags?Eo(d.index,h):h;0==(32&h[2])&&Sy(P);let N=ww(h,0,y,I),j=M.__ngNextListenerFn__;for(;j;)N=ww(h,0,j,I)&&N,j=j.__ngNextListenerFn__;return x&&!1===N&&(I.preventDefault(),I.returnValue=!1),N}}function Mf(d=1){return function ja(d){return(Nn.lFrame.contextLView=function lu(d,h){for(;d>0;)h=h[15],d--;return h}(d,Nn.lFrame.contextLView))[8]}(d)}function Df(d,h){let g=null;const y=function mo(d){const h=d.attrs;if(null!=h){const g=h.indexOf(5);if(0==(1&g))return h[g+1]}return null}(d);for(let x=0;x<h.length;x++){const M=h[x];if("*"!==M){if(null===y?Sd(d,M,!0):Br(y,M))return x}else g=x}return g}function Ef(d){const h=Ne()[16][6];if(!h.projection){const y=h.projection=du(d?d.length:1,null),x=y.slice();let M=h.child;for(;null!==M;){const I=d?Df(M,d):0;null!==I&&(x[I]?x[I].projectionNext=M:y[I]=M,x[I]=M),M=M.next}}}function Ur(d,h=0,g){const y=Ne(),x=et(),M=Ca(x,20+d,16,null,g||null);null===M.projection&&(M.projection=h),Di(),64!=(64&M.flags)&&function zt(d,h,g){hy(h[11],0,h,g,Ep(d,g,h),TC(g.parent||h[6],g,h))}(x,y,M)}function Sf(d,h,g){return hg(d,"",h,"",g),Sf}function hg(d,h,g,y,x){const M=Ne(),I=Wd(M,h,g,y);return I!==In&&vo(et(),ar(),M,d,I,M[11],x,!1),hg}function x_(d,h,g,y,x){const M=d[g+1],I=null===h;let P=y?Vr(M):el(M),N=!1;for(;0!==P&&(!1===N||I);){const $=d[P+1];C_(d[P],h)&&(N=!0,d[P+1]=y?Op($):Um($)),P=y?Vr($):el($)}N&&(d[g+1]=y?Um(M):Op(M))}function C_(d,h){return null===d||null==h||(Array.isArray(d)?d[1]:d)===h||!(!Array.isArray(d)||"string"!=typeof h)&&qa(d,h)>=0}const rs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Af(d){return d.substring(rs.key,rs.keyEnd)}function Vo(d,h){const g=rs.textEnd;return g===h?-1:(h=rs.keyEnd=function Cw(d,h,g){for(;h<g&&d.charCodeAt(h)>32;)h++;return h}(d,rs.key=h,g),Hu(d,h,g))}function Hu(d,h,g){for(;h<g&&d.charCodeAt(h)<=32;)h++;return h}function t0(d,h,g){return Si(d,h,g,!1),t0}function S_(d,h){return Si(d,h,null,!0),S_}function Go(d,h){for(let g=function Xy(d){return function Uu(d){rs.key=0,rs.keyEnd=0,rs.value=0,rs.valueEnd=0,rs.textEnd=d.length}(d),Vo(d,Hu(d,0,rs.textEnd))}(h);g>=0;g=Vo(h,g))ei(d,Af(h),!0)}function Si(d,h,g,y){const x=Ne(),M=et(),I=Jo(2);M.firstUpdatePass&&Tf(M,d,I,y),h!==In&&ns(x,I,h)&&o0(M,M.data[Fs()],x,x[11],d,x[I+1]=function zu(d,h){return null==d||("string"==typeof h?d+=h:"object"==typeof d&&(d=we(ia(d)))),d}(h,g),y,I)}function wr(d,h){return h>=d.expandoStartIndex}function Tf(d,h,g,y){const x=d.data;if(null===x[g+1]){const M=x[Fs()],I=wr(d,g);gl(M,y)&&null===h&&!I&&(h=!1),h=function n0(d,h,g,y){const x=Ha(d);let M=y?h.residualClasses:h.residualStyles;if(null===x)0===(y?h.classBindings:h.styleBindings)&&(g=Vc(g=If(null,d,h,g,y),h.attrs,y),M=null);else{const I=h.directiveStylingLast;if(-1===I||d[I]!==x)if(g=If(x,d,h,g,y),null===M){let N=function HC(d,h,g){const y=g?h.classBindings:h.styleBindings;if(0!==el(y))return d[Vr(y)]}(d,h,y);void 0!==N&&Array.isArray(N)&&(N=If(null,d,h,N[1],y),N=Vc(N,h.attrs,y),function zC(d,h,g,y){d[Vr(g?h.classBindings:h.styleBindings)]=y}(d,h,y,N))}else M=function Dw(d,h,g){let y;const x=h.directiveEnd;for(let M=1+h.directiveStylingLast;M<x;M++)y=Vc(y,d[M].hostAttrs,g);return Vc(y,h.attrs,g)}(d,h,y)}return void 0!==M&&(y?h.residualClasses=M:h.residualStyles=M),g}(x,M,h,y),function Kd(d,h,g,y,x,M){let I=M?h.classBindings:h.styleBindings,P=Vr(I),N=el(I);d[y]=g;let $,j=!1;if(Array.isArray(g)){const ne=g;$=ne[1],(null===$||qa(ne,$)>0)&&(j=!0)}else $=g;if(x)if(0!==N){const ge=Vr(d[P+1]);d[y+1]=Ja(ge,P),0!==ge&&(d[ge+1]=Rp(d[ge+1],y)),d[P+1]=function $h(d,h){return 131071&d|h<<17}(d[P+1],y)}else d[y+1]=Ja(P,0),0!==P&&(d[P+1]=Rp(d[P+1],y)),P=y;else d[y+1]=Ja(N,0),0===P?P=y:d[N+1]=Rp(d[N+1],y),N=y;j&&(d[y+1]=Um(d[y+1])),x_(d,$,y,!0),x_(d,$,y,!1),function Qd(d,h,g,y,x){const M=x?d.residualClasses:d.residualStyles;null!=M&&"string"==typeof h&&qa(M,h)>=0&&(g[y+1]=Op(g[y+1]))}(h,$,d,y,M),I=Ja(P,N),M?h.classBindings=I:h.styleBindings=I}(x,M,h,g,I,y)}}function If(d,h,g,y,x){let M=null;const I=g.directiveEnd;let P=g.directiveStylingLast;for(-1===P?P=g.directiveStart:P++;P<I&&(M=h[P],y=Vc(y,M.hostAttrs,x),M!==d);)P++;return null!==d&&(g.directiveStylingLast=P),y}function Vc(d,h,g){const y=g?1:2;let x=-1;if(null!==h)for(let M=0;M<h.length;M++){const I=h[M];"number"==typeof I?x=I:x===y&&(Array.isArray(d)||(d=void 0===d?[]:["",d]),ei(d,I,!!g||h[++M]))}return void 0===d?null:d}function o0(d,h,g,y,x,M,I,P){if(!(3&h.type))return;const N=d.data,j=N[P+1];Gc(function Pp(d){return 1==(1&d)}(j)?Ew(N,h,g,x,el(j),I):void 0)||(Gc(M)||function qh(d){return 2==(2&d)}(j)&&(M=Ew(N,null,g,x,P,I)),function ai(d,h,g,y,x){const M=vr(d);if(h)x?M?d.addClass(g,y):g.classList.add(y):M?d.removeClass(g,y):g.classList.remove(y);else{let I=-1===y.indexOf("-")?void 0:Ka.DashCase;if(null==x)M?d.removeStyle(g,y,I):g.style.removeProperty(y);else{const P="string"==typeof x&&x.endsWith("!important");P&&(x=x.slice(0,-10),I|=Ka.Important),M?d.setStyle(g,y,x,I):g.style.setProperty(y,x,P?"important":"")}}}(y,I,rm(Fs(),g),x,M))}function Ew(d,h,g,y,x,M){const I=null===h;let P;for(;x>0;){const N=d[x],j=Array.isArray(N),$=j?N[1]:N,ne=null===$;let ge=g[x+1];ge===In&&(ge=ne?Fn:void 0);let Oe=ne?sp(ge,y):$===y?ge:void 0;if(j&&!Gc(Oe)&&(Oe=sp(N,y)),Gc(Oe)&&(P=Oe,I))return P;const nt=d[x+1];x=I?Vr(nt):el(nt)}if(null!==h){let N=M?h.residualClasses:h.residualStyles;null!=N&&(P=sp(N,y))}return P}function Gc(d){return void 0!==d}function gl(d,h){return 0!=(d.flags&(h?16:32))}function mg(d,h=""){const g=Ne(),y=et(),x=d+20,M=y.firstCreatePass?Ca(y,x,1,h,null):y.data[x],I=g[x]=function Dp(d,h){return vr(d)?d.createText(h):d.createTextNode(h)}(g[11],h);Yh(y,g,I,M),Bi(M,!1)}function Rf(d){return Uo("",d,""),Rf}function Uo(d,h,g){const y=Ne(),x=Wd(y,d,h,g);return x!==In&&Ei(y,Fs(),x),Uo}function T_(d,h,g){!function Ea(d,h,g,y){const x=et(),M=Jo(2);x.firstUpdatePass&&Tf(x,null,M,y);const I=Ne();if(g!==In&&ns(I,M,g)){const P=x.data[Fs()];if(gl(P,y)&&!wr(x,M)){let N=y?P.classesWithoutHost:P.stylesWithoutHost;null!==N&&(g=ce(N,g||"")),cg(x,P,I,g,y)}else!function s0(d,h,g,y,x,M,I,P){x===In&&(x=Fn);let N=0,j=0,$=0<x.length?x[0]:null,ne=0<M.length?M[0]:null;for(;null!==$||null!==ne;){const ge=N<x.length?x[N+1]:void 0,Oe=j<M.length?M[j+1]:void 0;let Dt,nt=null;$===ne?(N+=2,j+=2,ge!==Oe&&(nt=ne,Dt=Oe)):null===ne||null!==$&&$<ne?(N+=2,nt=$):(j+=2,nt=ne,Dt=Oe),null!==nt&&o0(d,h,g,y,nt,Dt,I,P),$=N<x.length?x[N]:null,ne=j<M.length?M[j]:null}}(x,P,I,I[11],I[M+1],I[M+1]=function jC(d,h,g){if(null==g||""===g)return Fn;const y=[],x=ia(g);if(Array.isArray(x))for(let M=0;M<x.length;M++)d(y,x[M],!0);else if("object"==typeof x)for(const M in x)x.hasOwnProperty(M)&&d(y,M,x[M]);else"string"==typeof x&&h(y,x);return y}(d,h,g),y,M)}}(ei,Go,Wd(Ne(),d,h,g),!0)}function k_(d,h,g){const y=Ne();return ns(y,So(),h)&&vo(et(),ar(),y,d,h,y[11],g,!0),k_}function bg(d,h,g){const y=Ne();if(ns(y,So(),h)){const M=et(),I=ar();vo(M,I,y,d,h,lf(Ha(M.data),I,y),g,!0)}return bg}const Aa=void 0;var Ow=["en",[["a","p"],["AM","PM"],Aa],[["AM","PM"],Aa,Aa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Aa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Aa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Aa,"{1} 'at' {0}",Aa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Pw(d){const g=Math.floor(Math.abs(d)),y=d.toString().replace(/^[^.]*\.?/,"").length;return 1===g&&0===y?1:5}];let Ff={};function F_(d){const h=function QC(d){return d.toLowerCase().replace(/_/g,"-")}(d);let g=kw(h);if(g)return g;const y=h.split("-")[0];if(g=kw(y),g)return g;if("en"===y)return Ow;throw new Error(`Missing locale data for the locale "${d}".`)}function v0(d){return F_(d)[Sn.PluralCase]}function kw(d){return d in Ff||(Ff[d]=Tn.ng&&Tn.ng.common&&Tn.ng.common.locales&&Tn.ng.common.locales[d]),Ff[d]}var Sn=(()=>((Sn=Sn||{})[Sn.LocaleId=0]="LocaleId",Sn[Sn.DayPeriodsFormat=1]="DayPeriodsFormat",Sn[Sn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Sn[Sn.DaysFormat=3]="DaysFormat",Sn[Sn.DaysStandalone=4]="DaysStandalone",Sn[Sn.MonthsFormat=5]="MonthsFormat",Sn[Sn.MonthsStandalone=6]="MonthsStandalone",Sn[Sn.Eras=7]="Eras",Sn[Sn.FirstDayOfWeek=8]="FirstDayOfWeek",Sn[Sn.WeekendRange=9]="WeekendRange",Sn[Sn.DateFormat=10]="DateFormat",Sn[Sn.TimeFormat=11]="TimeFormat",Sn[Sn.DateTimeFormat=12]="DateTimeFormat",Sn[Sn.NumberSymbols=13]="NumberSymbols",Sn[Sn.NumberFormats=14]="NumberFormats",Sn[Sn.CurrencyCode=15]="CurrencyCode",Sn[Sn.CurrencySymbol=16]="CurrencySymbol",Sn[Sn.CurrencyName=17]="CurrencyName",Sn[Sn.Currencies=18]="Currencies",Sn[Sn.Directionality=19]="Directionality",Sn[Sn.PluralCase=20]="PluralCase",Sn[Sn.ExtraData=21]="ExtraData",Sn))();const wg="en-US";let w0=wg;function E0(d,h,g,y,x){if(d=_e(d),Array.isArray(d))for(let M=0;M<d.length;M++)E0(d[M],h,g,y,x);else{const M=et(),I=Ne();let P=Hl(d)?d:_e(d.provide),N=fw(d);const j=Wi(),$=1048575&j.providerIndexes,ne=j.directiveStart,ge=j.providerIndexes>>20;if(Hl(d)||!d.multi){const Oe=new cm(N,x,Vu),nt=rt(P,h,x?$:$+ge,ne);-1===nt?(um(Ao(j,I),M,P),N_(M,d,h.length),h.push(P),j.directiveStart++,j.directiveEnd++,x&&(j.providerIndexes+=1048576),g.push(Oe),I.push(Oe)):(g[nt]=Oe,I[nt]=Oe)}else{const Oe=rt(P,h,$+ge,ne),nt=rt(P,h,$,$+ge),Dt=Oe>=0&&g[Oe],Ht=nt>=0&&g[nt];if(x&&!Ht||!x&&!Dt){um(Ao(j,I),M,P);const sn=function Zn(d,h,g,y,x){const M=new cm(d,g,Vu);return M.multi=[],M.index=h,M.componentProviders=0,ie(M,x,y&&!g),M}(x?lt:Qe,g.length,x,y,N);!x&&Ht&&(g[nt].providerFactory=sn),N_(M,d,h.length,0),h.push(P),j.directiveStart++,j.directiveEnd++,x&&(j.providerIndexes+=1048576),g.push(sn),I.push(sn)}else N_(M,d,Oe>-1?Oe:nt,ie(g[x?nt:Oe],N,!x&&y));!x&&y&&Ht&&g[nt].componentProviders++}}}function N_(d,h,g,y){const x=Hl(h),M=function oa(d){return!!d.useClass}(h);if(x||M){const N=(M?_e(h.useClass):h).prototype.ngOnDestroy;if(N){const j=d.destroyHooks||(d.destroyHooks=[]);if(!x&&h.multi){const $=j.indexOf(g);-1===$?j.push(g,[y,N]):j[$+1].push(y,N)}else j.push(g,N)}}}function ie(d,h,g){return g&&d.componentProviders++,d.multi.push(h)-1}function rt(d,h,g,y){for(let x=g;x<y;x++)if(h[x]===d)return x;return-1}function Qe(d,h,g,y){return Gt(this.multi,[])}function lt(d,h,g,y){const x=this.multi;let M;if(this.providerFactory){const I=this.providerFactory.componentProviders,P=Ut(g,g[1],this.providerFactory.index,y);M=P.slice(0,I),Gt(x,M);for(let N=I;N<P.length;N++)M.push(P[N])}else M=[],Gt(x,M);return M}function Gt(d,h){for(let g=0;g<d.length;g++)h.push((0,d[g])());return h}function ln(d,h=[]){return g=>{g.providersResolver=(y,x)=>function D0(d,h,g){const y=et();if(y.firstCreatePass){const x=fa(d);E0(g,y.data,y.blueprint,x,!0),E0(h,y.data,y.blueprint,x,!1)}}(y,x?x(d):d,h)}}class qn{}class Oi{resolveComponentFactory(h){throw function ir(d){const h=Error(`No component factory found for ${we(d)}. Did you add it to @NgModule.entryComponents?`);return h.ngComponent=d,h}(h)}}let Us=(()=>{class d{}return d.NULL=new Oi,d})();function Vi(){return ss(Wi(),Ne())}function ss(d,h){return new Pr(Xo(d,h))}let Pr=(()=>{class d{constructor(g){this.nativeElement=g}}return d.__NG_ELEMENT_ID__=Vi,d})();function S0(d){return d instanceof Pr?d.nativeElement:d}class Dg{}let Lf=(()=>{class d{}return d.__NG_ELEMENT_ID__=()=>function oT(){const d=Ne(),g=Eo(Wi().index,d);return function Eg(d){return d[11]}(uo(g)?g:d)}(),d})(),Ft=(()=>{class d{}return d.\u0275prov=pn({token:d,providedIn:"root",factory:()=>null}),d})();class Hs{constructor(h){this.full=h,this.major=h.split(".")[0],this.minor=h.split(".")[1],this.patch=h.split(".").slice(2).join(".")}}const th=new Hs("13.2.1"),ki={};function Nw(d,h,g,y,x=!1){for(;null!==g;){const M=h[g.index];if(null!==M&&y.push(hr(M)),Mo(M))for(let P=10;P<M.length;P++){const N=M[P],j=N[1].firstChild;null!==j&&Nw(N[1],N,j,y)}const I=g.type;if(8&I)Nw(d,h,g.child,y);else if(32&I){const P=jh(g,h);let N;for(;N=P();)y.push(N)}else if(16&I){const P=Nr(h,g);if(Array.isArray(P))y.push(...P);else{const N=xc(h[16]);Nw(N[1],N,P,y,!0)}}g=x?g.projectionNext:g.next}return y}class A0{constructor(h,g){this._lView=h,this._cdRefInjectingView=g,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const h=this._lView,g=h[1];return Nw(g,h,g.firstChild,[])}get context(){return this._lView[8]}set context(h){this._lView[8]=h}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const h=this._lView[3];if(Mo(h)){const g=h[8],y=g?g.indexOf(this):-1;y>-1&&(km(h,y),gd(g,y))}this._attachedToViewContainer=!1}cy(this._lView[1],this._lView)}onDestroy(h){Iu(this._lView[1],this._lView,null,h)}markForCheck(){Sy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ay(this._lView[1],this._lView,this.context)}checkNoChanges(){!function RC(d,h,g){ee(!0);try{Ay(d,h,g)}finally{ee(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ew(d,h){En(d,h,h[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(h){if(this._attachedToViewContainer)throw new Ae(902,"");this._appRef=h}}class hE extends A0{constructor(h){super(h),this._view=h}detectChanges(){dw(this._view)}checkNoChanges(){!function Wp(d){ee(!0);try{dw(d)}finally{ee(!1)}}(this._view)}get context(){return null}}class B_ extends Us{constructor(h){super(),this.ngModule=h}resolveComponentFactory(h){const g=ys(h);return new Vw(g,this.ngModule)}}function fE(d){const h=[];for(let g in d)d.hasOwnProperty(g)&&h.push({propName:d[g],templateName:g});return h}const Fi=new tr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>sy});class Vw extends qn{constructor(h,g){super(),this.componentDef=h,this.ngModule=g,this.componentType=h.type,this.selector=function Vm(d){return d.map(my).join(",")}(h.selectors),this.ngContentSelectors=h.ngContentSelectors?h.ngContentSelectors:[],this.isBoundToModule=!!g}get inputs(){return fE(this.componentDef.inputs)}get outputs(){return fE(this.componentDef.outputs)}create(h,g,y,x){const M=(x=x||this.ngModule)?function pE(d,h){return{get:(g,y,x)=>{const M=d.get(g,ki,x);return M!==ki||y===ki?M:h.get(g,y,x)}}}(h,x.injector):h,I=M.get(Dg,yb),P=M.get(Ft,null),N=I.createRenderer(null,this.componentDef),j=this.componentDef.selectors[0][0]||"div",$=y?function ef(d,h,g){if(vr(d))return d.selectRootElement(h,g===bi.ShadowDom);let y="string"==typeof h?d.querySelector(h):h;return y.textContent="",y}(N,y,this.componentDef.encapsulation):$s(I.createRenderer(null,this.componentDef),j,function Bw(d){const h=d.toLowerCase();return"svg"===h?"svg":"math"===h?"math":null}(j)),ne=this.componentDef.onPush?576:528,ge=function Ou(d,h){return{components:[],scheduler:d||sy,clean:Ss,playerHandler:h||null,flags:0}}(),Oe=Xh(0,null,null,1,0,null,null,null,null,null),nt=Sc(null,Oe,ge,ne,null,null,I,N,P,M);let Dt,Ht;za(nt);try{const sn=function Gd(d,h,g,y,x,M){const I=g[1];g[20]=d;const N=Ca(I,20,2,"#host",null),j=N.mergedAttrs=h.hostAttrs;null!==j&&(il(N,j,!0),null!==d&&(Sl(x,d,j),null!==N.classes&&Nm(x,d,N.classes),null!==N.styles&&Mu(x,d,N.styles)));const $=y.createRenderer(d,h),ne=Sc(g,Od(h),null,h.onPush?64:16,g[20],N,y,$,M||null,null);return I.firstCreatePass&&(um(Ao(N,g),I,h.type),Gl(I,N),Dy(N,g.length,1)),Pc(g,ne),g[20]=ne}($,this.componentDef,nt,I,N);if($)if(y)Sl(N,$,["ng-version",th.full]);else{const{attrs:ht,classes:Dn}=function Tp(d){const h=[],g=[];let y=1,x=2;for(;y<d.length;){let M=d[y];if("string"==typeof M)2===x?""!==M&&h.push(M,d[++y]):8===x&&g.push(M);else{if(!Qa(x))break;x=M}y++}return{attrs:h,classes:g}}(this.componentDef.selectors[0]);ht&&Sl(N,$,ht),Dn&&Dn.length>0&&Nm(N,$,Dn.join(" "))}if(Ht=Mv(Oe,20),void 0!==g){const ht=Ht.projection=[];for(let Dn=0;Dn<this.ngContentSelectors.length;Dn++){const vi=g[Dn];ht.push(null!=vi?Array.from(vi):null)}}Dt=function Ud(d,h,g,y,x){const M=g[1],I=function Bn(d,h,g){const y=Wi();d.firstCreatePass&&(g.providersResolver&&g.providersResolver(g),ko(d,y,h,Pd(d,h,1,null),g));const x=Ut(h,d,y.directiveStart,y);Lr(x,h);const M=Xo(y,h);return M&&Lr(M,h),x}(M,g,h);if(y.components.push(I),d[8]=I,x&&x.forEach(N=>N(I,h)),h.contentQueries){const N=Wi();h.contentQueries(1,I,N.directiveStart)}const P=Wi();return!M.firstCreatePass||null===h.hostBindings&&null===h.hostAttrs||(ea(P.index),Vl(g[1],P,0,P.directiveStart,P.directiveEnd,h),Jr(h,I)),I}(sn,this.componentDef,nt,ge,[ts]),Su(Oe,nt,null)}finally{cd()}return new Ia(this.componentType,Dt,ss(Ht,nt),nt,Ht)}}class Ia extends class Yn{}{constructor(h,g,y,x,M){super(),this.location=y,this._rootLView=x,this._tNode=M,this.instance=g,this.hostView=this.changeDetectorRef=new hE(x),this.componentType=h}get injector(){return new ma(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(h){this.hostView.onDestroy(h)}}class Nf{}class mE{}const nh=new Map;class dT extends Nf{constructor(h,g){super(),this._parent=g,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new B_(this);const y=Ys(h);this._bootstrapComponents=Ms(y.bootstrap),this._r3Injector=Ul(h,g,[{provide:Nf,useValue:this},{provide:Us,useValue:this.componentFactoryResolver}],we(h)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(h)}get(h,g=ii.THROW_IF_NOT_FOUND,y=hn.Default){return h===ii||h===Nf||h===cf?this:this._r3Injector.get(h,g,y)}destroy(){const h=this._r3Injector;!h.destroyed&&h.destroy(),this.destroyCbs.forEach(g=>g()),this.destroyCbs=null}onDestroy(h){this.destroyCbs.push(h)}}class nM extends mE{constructor(h){super(),this.moduleType=h,null!==Ys(h)&&function _E(d){const h=new Set;!function g(y){const x=Ys(y,!0),M=x.id;null!==M&&(function eM(d,h,g){if(h&&h!==g)throw new Error(`Duplicate module registered for ${d} - ${we(h)} vs ${we(h.name)}`)}(M,nh.get(M),y),nh.set(M,y));const I=Ms(x.imports);for(const P of I)h.has(P)||(h.add(P),g(P))}(d)}(h)}create(h){return new dT(this.moduleType,h)}}function iM(d,h,g){const y=xs()+d,x=Ne();return x[y]===In?Bo(x,y,g?h.call(g):h()):function zd(d,h){return d[h]}(x,y)}function vE(d,h,g,y){return xE(Ne(),xs(),d,h,g,y)}function Gw(d,h,g,y,x){return Hw(Ne(),xs(),d,h,g,y,x)}function G_(d,h){const g=d[h];return g===In?void 0:g}function xE(d,h,g,y,x,M){const I=h+g;return ns(d,I,x)?Bo(d,I+1,M?y.call(M,x):y(x)):G_(d,I+1)}function Hw(d,h,g,y,x,M,I){const P=h+g;return Yl(d,P,x,M)?Bo(d,P+2,I?y.call(I,x,M):y(x,M)):G_(d,P+2)}function zw(d,h,g,y,x,M,I,P){const N=h+g;return function wo(d,h,g,y,x){const M=Yl(d,h,g,y);return ns(d,h+2,x)||M}(d,N,x,M,I)?Bo(d,N+3,P?y.call(P,x,M,I):y(x,M,I)):G_(d,N+3)}function aM(d,h){const g=et();let y;const x=d+20;g.firstCreatePass?(y=function pT(d,h){if(h)for(let g=h.length-1;g>=0;g--){const y=h[g];if(d===y.name)return y}}(h,g.pipeRegistry),g.data[x]=y,y.onDestroy&&(g.destroyHooks||(g.destroyHooks=[])).push(x,y.onDestroy)):y=g.data[x];const M=y.factory||(y.factory=wl(y.type)),I=or(Vu);try{const P=Ci(!1),N=M();return Ci(P),function Nu(d,h,g,y){g>=d.data.length&&(d.data[g]=null,d.blueprint[g]=null),h[g]=y}(g,Ne(),x,N),N}finally{or(I)}}function CE(d,h,g){const y=d+20,x=Ne(),M=su(x,y);return Hr(x,y)?xE(x,xs(),h,M.transform,g,M):M.transform(g)}function ih(d,h,g,y){const x=d+20,M=Ne(),I=su(M,x);return Hr(M,x)?Hw(M,xs(),h,I.transform,g,y,I):I.transform(g,y)}function ME(d,h,g,y,x){const M=d+20,I=Ne(),P=su(I,M);return Hr(I,M)?zw(I,xs(),h,P.transform,g,y,x,P):P.transform(g,y,x)}function Hr(d,h){return d[1].data[h].pure}function lM(d){return h=>{setTimeout(d,void 0,h)}}const ju=class mT extends u.x{constructor(h=!1){super(),this.__isAsync=h}emit(h){super.next(h)}subscribe(h,g,y){var x,M,I;let P=h,N=g||(()=>null),j=y;if(h&&"object"==typeof h){const ne=h;P=null===(x=ne.next)||void 0===x?void 0:x.bind(ne),N=null===(M=ne.error)||void 0===M?void 0:M.bind(ne),j=null===(I=ne.complete)||void 0===I?void 0:I.bind(ne)}this.__isAsync&&(N=lM(N),P&&(P=lM(P)),j&&(j=lM(j)));const $=super.subscribe({next:P,error:N,complete:j});return h instanceof me.w0&&h.add($),$}};function _T(){return this._results[Wl()]()}class T0{constructor(h=!1){this._emitDistinctChangesOnly=h,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const g=Wl(),y=T0.prototype;y[g]||(y[g]=_T)}get changes(){return this._changes||(this._changes=new ju)}get(h){return this._results[h]}map(h){return this._results.map(h)}filter(h){return this._results.filter(h)}find(h){return this._results.find(h)}reduce(h,g){return this._results.reduce(h,g)}forEach(h){this._results.forEach(h)}some(h){return this._results.some(h)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(h,g){const y=this;y.dirty=!1;const x=po(h);(this._changesDetected=!function pc(d,h,g){if(d.length!==h.length)return!1;for(let y=0;y<d.length;y++){let x=d[y],M=h[y];if(g&&(x=g(x),M=g(M)),M!==x)return!1}return!0}(y._results,x,g))&&(y._results=x,y.length=x.length,y.last=x[this.length-1],y.first=x[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let I0=(()=>{class d{}return d.__NG_ELEMENT_ID__=cM,d})();const vT=I0,yT=class extends vT{constructor(h,g,y){super(),this._declarationLView=h,this._declarationTContainer=g,this.elementRef=y}createEmbeddedView(h){const g=this._declarationTContainer.tViews,y=Sc(this._declarationLView,g,h,16,null,g.declTNode,null,null,null,null);y[17]=this._declarationLView[this._declarationTContainer.index];const M=this._declarationLView[19];return null!==M&&(y[19]=M.createEmbeddedView(g)),Su(g,y,h),new A0(y)}};function cM(){return R0(Wi(),Ne())}function R0(d,h){return 4&d.type?new yT(h,d,ss(d,h)):null}let jw=(()=>{class d{}return d.__NG_ELEMENT_ID__=DE,d})();function DE(){return dM(Wi(),Ne())}const bT=jw,uM=class extends bT{constructor(h,g,y){super(),this._lContainer=h,this._hostTNode=g,this._hostLView=y}get element(){return ss(this._hostTNode,this._hostLView)}get injector(){return new ma(this._hostTNode,this._hostLView)}get parentInjector(){const h=Ti(this._hostTNode,this._hostLView);if(dd(h)){const g=ci(h,this._hostLView),y=Sh(h);return new ma(g[1].data[y+8],g)}return new ma(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(h){const g=rh(this._lContainer);return null!==g&&g[h]||null}get length(){return this._lContainer.length-10}createEmbeddedView(h,g,y){const x=h.createEmbeddedView(g||{});return this.insert(x,y),x}createComponent(h,g,y,x,M){const I=h&&!function ta(d){return"function"==typeof d}(h);let P;if(I)P=g;else{const ne=g||{};P=ne.index,y=ne.injector,x=ne.projectableNodes,M=ne.ngModuleRef}const N=I?h:new Vw(ys(h)),j=y||this.parentInjector;if(!M&&null==N.ngModule&&j){const ne=j.get(Nf,null);ne&&(M=ne)}const $=N.create(j,x,void 0,M);return this.insert($.hostView,P),$}insert(h,g){const y=h._lView,x=y[1];if(function bb(d){return Mo(d[3])}(y)){const $=this.indexOf(h);if(-1!==$)this.detach($);else{const ne=y[3],ge=new uM(ne,ne[6],ne[3]);ge.detach(ge.indexOf(h))}}const M=this._adjustIndex(g),I=this._lContainer;!function nw(d,h,g,y){const x=10+y,M=g.length;y>0&&(g[x-1][4]=h),y<M-10?(h[4]=g[x],Oh(g,10+y,h)):(g.push(h),h[4]=null),h[3]=g;const I=h[17];null!==I&&g!==I&&function Om(d,h){const g=d[9];h[16]!==h[3][3][16]&&(d[2]=!0),null===g?d[9]=[h]:g.push(h)}(I,h);const P=h[19];null!==P&&P.insertView(d),h[2]|=128}(x,y,I,M);const P=Dd(M,I),N=y[11],j=Ap(N,I[7]);return null!==j&&function Jb(d,h,g,y,x,M){y[0]=x,y[6]=h,En(d,y,g,1,x,M)}(x,I[6],N,y,j,P),h.attachToViewContainerRef(),Oh(zr(I),M,h),h}move(h,g){return this.insert(h,g)}indexOf(h){const g=rh(this._lContainer);return null!==g?g.indexOf(h):-1}remove(h){const g=this._adjustIndex(h,-1),y=km(this._lContainer,g);y&&(gd(zr(this._lContainer),g),cy(y[1],y))}detach(h){const g=this._adjustIndex(h,-1),y=km(this._lContainer,g);return y&&null!=gd(zr(this._lContainer),g)?new A0(y):null}_adjustIndex(h,g=0){return null==h?this.length+g:h}};function rh(d){return d[8]}function zr(d){return d[8]||(d[8]=[])}function dM(d,h){let g;const y=h[d.index];if(Mo(y))g=y;else{let x;if(8&d.type)x=hr(y);else{const M=h[11];x=M.createComment("");const I=Xo(d,h);Cu(M,Ap(M,I),x,function oE(d,h){return vr(d)?d.nextSibling(h):h.nextSibling}(M,I),!1)}h[d.index]=g=zp(y,h,x,d),Pc(h,g)}return new uM(g,d,h)}class P0{constructor(h){this.queryList=h,this.matches=null}clone(){return new P0(this.queryList)}setDirty(){this.queryList.setDirty()}}class hM{constructor(h=[]){this.queries=h}createEmbeddedView(h){const g=h.queries;if(null!==g){const y=null!==h.contentQueries?h.contentQueries[0]:g.length,x=[];for(let M=0;M<y;M++){const I=g.getByIndex(M);x.push(this.queries[I.indexInDeclarationView].clone())}return new hM(x)}return null}insertView(h){this.dirtyQueriesWithMatches(h)}detachView(h){this.dirtyQueriesWithMatches(h)}dirtyQueriesWithMatches(h){for(let g=0;g<this.queries.length;g++)null!==mM(h,g).matches&&this.queries[g].setDirty()}}class _i{constructor(h,g,y=null){this.predicate=h,this.flags=g,this.read=y}}class O0{constructor(h=[]){this.queries=h}elementStart(h,g){for(let y=0;y<this.queries.length;y++)this.queries[y].elementStart(h,g)}elementEnd(h){for(let g=0;g<this.queries.length;g++)this.queries[g].elementEnd(h)}embeddedTView(h){let g=null;for(let y=0;y<this.length;y++){const x=null!==g?g.length:0,M=this.getByIndex(y).embeddedTView(h,x);M&&(M.indexInDeclarationView=y,null!==g?g.push(M):g=[M])}return null!==g?new O0(g):null}template(h,g){for(let y=0;y<this.queries.length;y++)this.queries[y].template(h,g)}getByIndex(h){return this.queries[h]}get length(){return this.queries.length}track(h){this.queries.push(h)}}class zc{constructor(h,g=-1){this.metadata=h,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=g}elementStart(h,g){this.isApplyingToNode(g)&&this.matchTNode(h,g)}elementEnd(h){this._declarationNodeIndex===h.index&&(this._appliesToNextNode=!1)}template(h,g){this.elementStart(h,g)}embeddedTView(h,g){return this.isApplyingToNode(h)?(this.crossesNgTemplate=!0,this.addMatch(-h.index,g),new zc(this.metadata)):null}isApplyingToNode(h){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const g=this._declarationNodeIndex;let y=h.parent;for(;null!==y&&8&y.type&&y.index!==g;)y=y.parent;return g===(null!==y?y.index:-1)}return this._appliesToNextNode}matchTNode(h,g){const y=this.metadata.predicate;if(Array.isArray(y))for(let x=0;x<y.length;x++){const M=y[x];this.matchTNodeWithReadOption(h,g,fM(g,M)),this.matchTNodeWithReadOption(h,g,Jt(g,h,M,!1,!1))}else y===I0?4&g.type&&this.matchTNodeWithReadOption(h,g,-1):this.matchTNodeWithReadOption(h,g,Jt(g,h,y,!1,!1))}matchTNodeWithReadOption(h,g,y){if(null!==y){const x=this.metadata.read;if(null!==x)if(x===Pr||x===jw||x===I0&&4&g.type)this.addMatch(g.index,-2);else{const M=Jt(g,h,x,!1,!1);null!==M&&this.addMatch(g.index,M)}else this.addMatch(g.index,y)}}addMatch(h,g){null===this.matches?this.matches=[h,g]:this.matches.push(h,g)}}function fM(d,h){const g=d.localNames;if(null!==g)for(let y=0;y<g.length;y+=2)if(g[y]===h)return g[y+1];return null}function SE(d,h,g,y){return-1===g?function k0(d,h){return 11&d.type?ss(d,h):4&d.type?R0(d,h):null}(h,d):-2===g?function wT(d,h,g){return g===Pr?ss(h,d):g===I0?R0(h,d):g===jw?dM(h,d):void 0}(d,h,y):Ut(d,d[1],g,h)}function AE(d,h,g,y){const x=h[19].queries[y];if(null===x.matches){const M=d.data,I=g.matches,P=[];for(let N=0;N<I.length;N+=2){const j=I[N];P.push(j<0?null:SE(h,M[j],I[N+1],g.metadata.read))}x.matches=P}return x.matches}function pM(d,h,g,y){const x=d.queries.getByIndex(g),M=x.matches;if(null!==M){const I=AE(d,h,x,g);for(let P=0;P<M.length;P+=2){const N=M[P];if(N>0)y.push(I[P/2]);else{const j=M[P+1],$=h[-N];for(let ne=10;ne<$.length;ne++){const ge=$[ne];ge[17]===ge[3]&&pM(ge[1],ge,j,y)}if(null!==$[9]){const ne=$[9];for(let ge=0;ge<ne.length;ge++){const Oe=ne[ge];pM(Oe[1],Oe,j,y)}}}}}return y}function TE(d){const h=Ne(),g=et(),y=ad();ld(y+1);const x=mM(g,y);if(d.dirty&&ac(h)===(2==(2&x.metadata.flags))){if(null===x.matches)d.reset([]);else{const M=x.crossesNgTemplate?pM(g,h,y,[]):AE(g,h,x,y);d.reset(M,S0),d.notifyOnChanges()}return!0}return!1}function IE(d,h,g){const y=et();y.firstCreatePass&&(kE(y,new _i(d,h,g),-1),2==(2&h)&&(y.staticViewQueries=!0)),OE(y,Ne(),h)}function RE(d,h,g,y){const x=et();if(x.firstCreatePass){const M=Wi();kE(x,new _i(h,g,y),M.index),function xT(d,h){const g=d.contentQueries||(d.contentQueries=[]);h!==(g.length?g[g.length-1]:-1)&&g.push(d.queries.length-1,h)}(x,d),2==(2&g)&&(x.staticContentQueries=!0)}OE(x,Ne(),g)}function gM(){return function PE(d,h){return d[19].queries[h].queryList}(Ne(),ad())}function OE(d,h,g){const y=new T0(4==(4&g));Iu(d,h,y,y.destroy),null===h[19]&&(h[19]=new hM),h[19].queries.push(new P0(y))}function kE(d,h,g){null===d.queries&&(d.queries=new O0),d.queries.track(new zc(h,g))}function mM(d,h){return d.queries.getByIndex(h)}function W_(...d){}const Gf=new tr("Application Initializer");let Sg=(()=>{class d{constructor(g){this.appInits=g,this.resolve=W_,this.reject=W_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((y,x)=>{this.resolve=y,this.reject=x})}runInitializers(){if(this.initialized)return;const g=[],y=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let x=0;x<this.appInits.length;x++){const M=this.appInits[x]();if($d(M))g.push(M);else if(y_(M)){const I=new Promise((P,N)=>{M.subscribe({complete:P,error:N})});g.push(I)}}Promise.all(g).then(()=>{y()}).catch(x=>{this.reject(x)}),0===g.length&&y(),this.initialized=!0}}return d.\u0275fac=function(g){return new(g||d)(us(Gf,8))},d.\u0275prov=pn({token:d,factory:d.\u0275fac}),d})();const SM=new tr("AppId"),Y_={provide:SM,useFactory:function TT(){return`${Kw()}${Kw()}${Kw()}`},deps:[]};function Kw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ZE=new tr("Platform Initializer"),V0=new tr("Platform ID"),AM=new tr("appBootstrapListener");let TM=(()=>{class d{log(g){console.log(g)}warn(g){console.warn(g)}}return d.\u0275fac=function(g){return new(g||d)},d.\u0275prov=pn({token:d,factory:d.\u0275fac}),d})();const q_=new tr("LocaleId"),Qw=new tr("DefaultCurrencyCode");class IT{constructor(h,g){this.ngModuleFactory=h,this.componentFactories=g}}let IM=(()=>{class d{compileModuleSync(g){return new nM(g)}compileModuleAsync(g){return Promise.resolve(this.compileModuleSync(g))}compileModuleAndAllComponentsSync(g){const y=this.compileModuleSync(g),M=Ms(Ys(g).declarations).reduce((I,P)=>{const N=ys(P);return N&&I.push(new Vw(N)),I},[]);return new IT(y,M)}compileModuleAndAllComponentsAsync(g){return Promise.resolve(this.compileModuleAndAllComponentsSync(g))}clearCache(){}clearCacheFor(g){}getModuleId(g){}}return d.\u0275fac=function(g){return new(g||d)},d.\u0275prov=pn({token:d,factory:d.\u0275fac}),d})();const RM=(()=>Promise.resolve(0))();function tx(d){"undefined"==typeof Zone?RM.then(()=>{d&&d.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",d)}class ml{constructor({enableLongStackTrace:h=!1,shouldCoalesceEventChangeDetection:g=!1,shouldCoalesceRunChangeDetection:y=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ju(!1),this.onMicrotaskEmpty=new ju(!1),this.onStable=new ju(!1),this.onError=new ju(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const x=this;x._nesting=0,x._outer=x._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(x._inner=x._inner.fork(new Zone.TaskTrackingZoneSpec)),h&&Zone.longStackTraceZoneSpec&&(x._inner=x._inner.fork(Zone.longStackTraceZoneSpec)),x.shouldCoalesceEventChangeDetection=!y&&g,x.shouldCoalesceRunChangeDetection=y,x.lastRequestAnimationFrameId=-1,x.nativeRequestAnimationFrame=function QE(){let d=Tn.requestAnimationFrame,h=Tn.cancelAnimationFrame;if("undefined"!=typeof Zone&&d&&h){const g=d[Zone.__symbol__("OriginalDelegate")];g&&(d=g);const y=h[Zone.__symbol__("OriginalDelegate")];y&&(h=y)}return{nativeRequestAnimationFrame:d,nativeCancelAnimationFrame:h}}().nativeRequestAnimationFrame,function PT(d){const h=()=>{!function RT(d){d.isCheckStableRunning||-1!==d.lastRequestAnimationFrameId||(d.lastRequestAnimationFrameId=d.nativeRequestAnimationFrame.call(Tn,()=>{d.fakeTopEventTask||(d.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{d.lastRequestAnimationFrameId=-1,nx(d),d.isCheckStableRunning=!0,OM(d),d.isCheckStableRunning=!1},void 0,()=>{},()=>{})),d.fakeTopEventTask.invoke()}),nx(d))}(d)};d._inner=d._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(g,y,x,M,I,P)=>{try{return G0(d),g.invokeTask(x,M,I,P)}finally{(d.shouldCoalesceEventChangeDetection&&"eventTask"===M.type||d.shouldCoalesceRunChangeDetection)&&h(),XE(d)}},onInvoke:(g,y,x,M,I,P,N)=>{try{return G0(d),g.invoke(x,M,I,P,N)}finally{d.shouldCoalesceRunChangeDetection&&h(),XE(d)}},onHasTask:(g,y,x,M)=>{g.hasTask(x,M),y===x&&("microTask"==M.change?(d._hasPendingMicrotasks=M.microTask,nx(d),OM(d)):"macroTask"==M.change&&(d.hasPendingMacrotasks=M.macroTask))},onHandleError:(g,y,x,M)=>(g.handleError(x,M),d.runOutsideAngular(()=>d.onError.emit(M)),!1)})}(x)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ml.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ml.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(h,g,y){return this._inner.run(h,g,y)}runTask(h,g,y,x){const M=this._inner,I=M.scheduleEventTask("NgZoneEvent: "+x,h,PM,W_,W_);try{return M.runTask(I,g,y)}finally{M.cancelTask(I)}}runGuarded(h,g,y){return this._inner.runGuarded(h,g,y)}runOutsideAngular(h){return this._outer.run(h)}}const PM={};function OM(d){if(0==d._nesting&&!d.hasPendingMicrotasks&&!d.isStable)try{d._nesting++,d.onMicrotaskEmpty.emit(null)}finally{if(d._nesting--,!d.hasPendingMicrotasks)try{d.runOutsideAngular(()=>d.onStable.emit(null))}finally{d.isStable=!0}}}function nx(d){d.hasPendingMicrotasks=!!(d._hasPendingMicrotasks||(d.shouldCoalesceEventChangeDetection||d.shouldCoalesceRunChangeDetection)&&-1!==d.lastRequestAnimationFrameId)}function G0(d){d._nesting++,d.isStable&&(d.isStable=!1,d.onUnstable.emit(null))}function XE(d){d._nesting--,OM(d)}class kM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ju,this.onMicrotaskEmpty=new ju,this.onStable=new ju,this.onError=new ju}run(h,g,y){return h.apply(g,y)}runGuarded(h,g,y){return h.apply(g,y)}runOutsideAngular(h){return h()}runTask(h,g,y,x){return h.apply(g,y)}}let JE=(()=>{class d{constructor(g){this._ngZone=g,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),g.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ml.assertNotInAngularZone(),tx(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())tx(()=>{for(;0!==this._callbacks.length;){let g=this._callbacks.pop();clearTimeout(g.timeoutId),g.doneCb(this._didWork)}this._didWork=!1});else{let g=this.getPendingTasks();this._callbacks=this._callbacks.filter(y=>!y.updateCb||!y.updateCb(g)||(clearTimeout(y.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(g=>({source:g.source,creationLocation:g.creationLocation,data:g.data})):[]}addCallback(g,y,x){let M=-1;y&&y>0&&(M=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==M),g(this._didWork,this.getPendingTasks())},y)),this._callbacks.push({doneCb:g,timeoutId:M,updateCb:x})}whenStable(g,y,x){if(x&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(g,y,x),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(g,y,x){return[]}}return d.\u0275fac=function(g){return new(g||d)(us(ml))},d.\u0275prov=pn({token:d,factory:d.\u0275fac}),d})(),FM=(()=>{class d{constructor(){this._applications=new Map,LM.addToWindow(this)}registerApplication(g,y){this._applications.set(g,y)}unregisterApplication(g){this._applications.delete(g)}unregisterAllApplications(){this._applications.clear()}getTestability(g){return this._applications.get(g)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(g,y=!0){return LM.findTestabilityInTree(this,g,y)}}return d.\u0275fac=function(g){return new(g||d)},d.\u0275prov=pn({token:d,factory:d.\u0275fac}),d})();class eS{addToWindow(h){}findTestabilityInTree(h,g,y){return null}}function OT(d){LM=d}let Wc,LM=new eS;const Uf=new tr("AllowMultipleToken");class FT{constructor(h,g){this.name=h,this.token=g}}function tS(d,h,g=[]){const y=`Platform: ${h}`,x=new tr(y);return(M=[])=>{let I=$_();if(!I||I.injector.get(Uf,!1))if(d)d(g.concat(M).concat({provide:x,useValue:!0}));else{const P=g.concat(M).concat({provide:x,useValue:!0},{provide:o_,useValue:"platform"});!function LT(d){if(Wc&&!Wc.destroyed&&!Wc.injector.get(Uf,!1))throw new Ae(400,"");Wc=d.get(nS);const h=d.get(ZE,null);h&&h.forEach(g=>g())}(ii.create({providers:P,name:y}))}return function NT(d){const h=$_();if(!h)throw new Ae(401,"");return h}()}}function $_(){return Wc&&!Wc.destroyed?Wc:null}let nS=(()=>{class d{constructor(g){this._injector=g,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(g,y){const P=function U0(d,h){let g;return g="noop"===d?new kM:("zone.js"===d?void 0:d)||new ml({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==h?void 0:h.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==h?void 0:h.ngZoneRunCoalescing)}),g}(y?y.ngZone:void 0,{ngZoneEventCoalescing:y&&y.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:y&&y.ngZoneRunCoalescing||!1}),N=[{provide:ml,useValue:P}];return P.run(()=>{const j=ii.create({providers:N,parent:this.injector,name:g.moduleType.name}),$=g.create(j),ne=$.injector.get(Cd,null);if(!ne)throw new Ae(402,"");return P.runOutsideAngular(()=>{const ge=P.onError.subscribe({next:Oe=>{ne.handleError(Oe)}});$.onDestroy(()=>{sx(this._modules,$),ge.unsubscribe()})}),function rx(d,h,g){try{const y=g();return $d(y)?y.catch(x=>{throw h.runOutsideAngular(()=>d.handleError(x)),x}):y}catch(y){throw h.runOutsideAngular(()=>d.handleError(y)),y}}(ne,P,()=>{const ge=$.injector.get(Sg);return ge.runInitializers(),ge.donePromise.then(()=>(function p(d){Kt(d,"Expected localeId to be defined"),"string"==typeof d&&(w0=d.toLowerCase().replace(/_/g,"-"))}($.injector.get(q_,wg)||wg),this._moduleDoBootstrap($),$))})})}bootstrapModule(g,y=[]){const x=iS({},y);return function NM(d,h,g){const y=new nM(g);return Promise.resolve(y)}(0,0,g).then(M=>this.bootstrapModuleFactory(M,x))}_moduleDoBootstrap(g){const y=g.injector.get(Tg);if(g._bootstrapComponents.length>0)g._bootstrapComponents.forEach(x=>y.bootstrap(x));else{if(!g.instance.ngDoBootstrap)throw new Ae(403,"");g.instance.ngDoBootstrap(y)}this._modules.push(g)}onDestroy(g){this._destroyListeners.push(g)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ae(404,"");this._modules.slice().forEach(g=>g.destroy()),this._destroyListeners.forEach(g=>g()),this._destroyed=!0}get destroyed(){return this._destroyed}}return d.\u0275fac=function(g){return new(g||d)(us(ii))},d.\u0275prov=pn({token:d,factory:d.\u0275fac}),d})();function iS(d,h){return Array.isArray(h)?h.reduce(iS,d):Object.assign(Object.assign({},d),h)}let Tg=(()=>{class d{constructor(g,y,x,M,I){this._zone=g,this._injector=y,this._exceptionHandler=x,this._componentFactoryResolver=M,this._initStatus=I,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const P=new Ee.y(j=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{j.next(this._stable),j.complete()})}),N=new Ee.y(j=>{let $;this._zone.runOutsideAngular(()=>{$=this._zone.onStable.subscribe(()=>{ml.assertNotInAngularZone(),tx(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,j.next(!0))})})});const ne=this._zone.onUnstable.subscribe(()=>{ml.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{j.next(!1)}))});return()=>{$.unsubscribe(),ne.unsubscribe()}});this.isStable=(0,ve.T)(P,N.pipe((0,Te.B)()))}bootstrap(g,y){if(!this._initStatus.done)throw new Ae(405,"");let x;x=g instanceof qn?g:this._componentFactoryResolver.resolveComponentFactory(g),this.componentTypes.push(x.componentType);const M=function kT(d){return d.isBoundToModule}(x)?void 0:this._injector.get(Nf),P=x.create(ii.NULL,[],y||x.selector,M),N=P.location.nativeElement,j=P.injector.get(JE,null),$=j&&P.injector.get(FM);return j&&$&&$.registerApplication(N,j),P.onDestroy(()=>{this.detachView(P.hostView),sx(this.components,P),$&&$.unregisterApplication(N)}),this._loadComponent(P),P}tick(){if(this._runningTick)throw new Ae(101,"");try{this._runningTick=!0;for(let g of this._views)g.detectChanges()}catch(g){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(g))}finally{this._runningTick=!1}}attachView(g){const y=g;this._views.push(y),y.attachToAppRef(this)}detachView(g){const y=g;sx(this._views,y),y.detachFromAppRef()}_loadComponent(g){this.attachView(g.hostView),this.tick(),this.components.push(g),this._injector.get(AM,[]).concat(this._bootstrapListeners).forEach(x=>x(g))}ngOnDestroy(){this._views.slice().forEach(g=>g.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return d.\u0275fac=function(g){return new(g||d)(us(ml),us(ii),us(Cd),us(Us),us(Sg))},d.\u0275prov=pn({token:d,factory:d.\u0275fac}),d})();function sx(d,h){const g=d.indexOf(h);g>-1&&d.splice(g,1)}let ox=!0,_l=!1;function sS(){return _l=!0,ox}function oS(){if(_l)throw new Error("Cannot enable prod mode after platform setup.");ox=!1}let VT=(()=>{class d{}return d.__NG_ELEMENT_ID__=GT,d})();function GT(d){return function UT(d,h,g){if(Xg(d)&&!g){const y=Eo(d.index,h);return new A0(y,y)}return 47&d.type?new A0(h[16],h):null}(Wi(),Ne(),16==(16&d))}class hS{constructor(){}supports(h){return ku(h)}create(h){return new $T(h)}}const qT=(d,h)=>h;class $T{constructor(h){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=h||qT}forEachItem(h){let g;for(g=this._itHead;null!==g;g=g._next)h(g)}forEachOperation(h){let g=this._itHead,y=this._removalsHead,x=0,M=null;for(;g||y;){const I=!y||g&&g.currentIndex<pS(y,x,M)?g:y,P=pS(I,x,M),N=I.currentIndex;if(I===y)x--,y=y._nextRemoved;else if(g=g._next,null==I.previousIndex)x++;else{M||(M=[]);const j=P-x,$=N-x;if(j!=$){for(let ge=0;ge<j;ge++){const Oe=ge<M.length?M[ge]:M[ge]=0,nt=Oe+ge;$<=nt&&nt<j&&(M[ge]=Oe+1)}M[I.previousIndex]=$-j}}P!==N&&h(I,P,N)}}forEachPreviousItem(h){let g;for(g=this._previousItHead;null!==g;g=g._nextPrevious)h(g)}forEachAddedItem(h){let g;for(g=this._additionsHead;null!==g;g=g._nextAdded)h(g)}forEachMovedItem(h){let g;for(g=this._movesHead;null!==g;g=g._nextMoved)h(g)}forEachRemovedItem(h){let g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)h(g)}forEachIdentityChange(h){let g;for(g=this._identityChangesHead;null!==g;g=g._nextIdentityChange)h(g)}diff(h){if(null==h&&(h=[]),!ku(h))throw new Ae(900,"");return this.check(h)?this:null}onDestroy(){}check(h){this._reset();let x,M,I,g=this._itHead,y=!1;if(Array.isArray(h)){this.length=h.length;for(let P=0;P<this.length;P++)M=h[P],I=this._trackByFn(P,M),null!==g&&Object.is(g.trackById,I)?(y&&(g=this._verifyReinsertion(g,M,I,P)),Object.is(g.item,M)||this._addIdentityChange(g,M)):(g=this._mismatch(g,M,I,P),y=!0),g=g._next}else x=0,function eo(d,h){if(Array.isArray(d))for(let g=0;g<d.length;g++)h(d[g]);else{const g=d[Wl()]();let y;for(;!(y=g.next()).done;)h(y.value)}}(h,P=>{I=this._trackByFn(x,P),null!==g&&Object.is(g.trackById,I)?(y&&(g=this._verifyReinsertion(g,P,I,x)),Object.is(g.item,P)||this._addIdentityChange(g,P)):(g=this._mismatch(g,P,I,x),y=!0),g=g._next,x++}),this.length=x;return this._truncate(g),this.collection=h,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let h;for(h=this._previousItHead=this._itHead;null!==h;h=h._next)h._nextPrevious=h._next;for(h=this._additionsHead;null!==h;h=h._nextAdded)h.previousIndex=h.currentIndex;for(this._additionsHead=this._additionsTail=null,h=this._movesHead;null!==h;h=h._nextMoved)h.previousIndex=h.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(h,g,y,x){let M;return null===h?M=this._itTail:(M=h._prev,this._remove(h)),null!==(h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(y,null))?(Object.is(h.item,g)||this._addIdentityChange(h,g),this._reinsertAfter(h,M,x)):null!==(h=null===this._linkedRecords?null:this._linkedRecords.get(y,x))?(Object.is(h.item,g)||this._addIdentityChange(h,g),this._moveAfter(h,M,x)):h=this._addAfter(new ZT(g,y),M,x),h}_verifyReinsertion(h,g,y,x){let M=null===this._unlinkedRecords?null:this._unlinkedRecords.get(y,null);return null!==M?h=this._reinsertAfter(M,h._prev,x):h.currentIndex!=x&&(h.currentIndex=x,this._addToMoves(h,x)),h}_truncate(h){for(;null!==h;){const g=h._next;this._addToRemovals(this._unlink(h)),h=g}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(h,g,y){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(h);const x=h._prevRemoved,M=h._nextRemoved;return null===x?this._removalsHead=M:x._nextRemoved=M,null===M?this._removalsTail=x:M._prevRemoved=x,this._insertAfter(h,g,y),this._addToMoves(h,y),h}_moveAfter(h,g,y){return this._unlink(h),this._insertAfter(h,g,y),this._addToMoves(h,y),h}_addAfter(h,g,y){return this._insertAfter(h,g,y),this._additionsTail=null===this._additionsTail?this._additionsHead=h:this._additionsTail._nextAdded=h,h}_insertAfter(h,g,y){const x=null===g?this._itHead:g._next;return h._next=x,h._prev=g,null===x?this._itTail=h:x._prev=h,null===g?this._itHead=h:g._next=h,null===this._linkedRecords&&(this._linkedRecords=new fS),this._linkedRecords.put(h),h.currentIndex=y,h}_remove(h){return this._addToRemovals(this._unlink(h))}_unlink(h){null!==this._linkedRecords&&this._linkedRecords.remove(h);const g=h._prev,y=h._next;return null===g?this._itHead=y:g._next=y,null===y?this._itTail=g:y._prev=g,h}_addToMoves(h,g){return h.previousIndex===g||(this._movesTail=null===this._movesTail?this._movesHead=h:this._movesTail._nextMoved=h),h}_addToRemovals(h){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fS),this._unlinkedRecords.put(h),h.currentIndex=null,h._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=h,h._prevRemoved=null):(h._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=h),h}_addIdentityChange(h,g){return h.item=g,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=h:this._identityChangesTail._nextIdentityChange=h,h}}class ZT{constructor(h,g){this.item=h,this.trackById=g,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class KT{constructor(){this._head=null,this._tail=null}add(h){null===this._head?(this._head=this._tail=h,h._nextDup=null,h._prevDup=null):(this._tail._nextDup=h,h._prevDup=this._tail,h._nextDup=null,this._tail=h)}get(h,g){let y;for(y=this._head;null!==y;y=y._nextDup)if((null===g||g<=y.currentIndex)&&Object.is(y.trackById,h))return y;return null}remove(h){const g=h._prevDup,y=h._nextDup;return null===g?this._head=y:g._nextDup=y,null===y?this._tail=g:y._prevDup=g,null===this._head}}class fS{constructor(){this.map=new Map}put(h){const g=h.trackById;let y=this.map.get(g);y||(y=new KT,this.map.set(g,y)),y.add(h)}get(h,g){const x=this.map.get(h);return x?x.get(h,g):null}remove(h){const g=h.trackById;return this.map.get(g).remove(h)&&this.map.delete(g),h}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pS(d,h,g){const y=d.previousIndex;if(null===y)return y;let x=0;return g&&y<g.length&&(x=g[y]),y+h+x}class zM{constructor(){}supports(h){return h instanceof Map||Hd(h)}create(){return new QT}}class QT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(h){let g;for(g=this._mapHead;null!==g;g=g._next)h(g)}forEachPreviousItem(h){let g;for(g=this._previousMapHead;null!==g;g=g._nextPrevious)h(g)}forEachChangedItem(h){let g;for(g=this._changesHead;null!==g;g=g._nextChanged)h(g)}forEachAddedItem(h){let g;for(g=this._additionsHead;null!==g;g=g._nextAdded)h(g)}forEachRemovedItem(h){let g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)h(g)}diff(h){if(h){if(!(h instanceof Map||Hd(h)))throw new Ae(900,"")}else h=new Map;return this.check(h)?this:null}onDestroy(){}check(h){this._reset();let g=this._mapHead;if(this._appendAfter=null,this._forEach(h,(y,x)=>{if(g&&g.key===x)this._maybeAddToChanges(g,y),this._appendAfter=g,g=g._next;else{const M=this._getOrCreateRecordForKey(x,y);g=this._insertBeforeOrAppend(g,M)}}),g){g._prev&&(g._prev._next=null),this._removalsHead=g;for(let y=g;null!==y;y=y._nextRemoved)y===this._mapHead&&(this._mapHead=null),this._records.delete(y.key),y._nextRemoved=y._next,y.previousValue=y.currentValue,y.currentValue=null,y._prev=null,y._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(h,g){if(h){const y=h._prev;return g._next=h,g._prev=y,h._prev=g,y&&(y._next=g),h===this._mapHead&&(this._mapHead=g),this._appendAfter=h,h}return this._appendAfter?(this._appendAfter._next=g,g._prev=this._appendAfter):this._mapHead=g,this._appendAfter=g,null}_getOrCreateRecordForKey(h,g){if(this._records.has(h)){const x=this._records.get(h);this._maybeAddToChanges(x,g);const M=x._prev,I=x._next;return M&&(M._next=I),I&&(I._prev=M),x._next=null,x._prev=null,x}const y=new XT(h);return this._records.set(h,y),y.currentValue=g,this._addToAdditions(y),y}_reset(){if(this.isDirty){let h;for(this._previousMapHead=this._mapHead,h=this._previousMapHead;null!==h;h=h._next)h._nextPrevious=h._next;for(h=this._changesHead;null!==h;h=h._nextChanged)h.previousValue=h.currentValue;for(h=this._additionsHead;null!=h;h=h._nextAdded)h.previousValue=h.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(h,g){Object.is(g,h.currentValue)||(h.previousValue=h.currentValue,h.currentValue=g,this._addToChanges(h))}_addToAdditions(h){null===this._additionsHead?this._additionsHead=this._additionsTail=h:(this._additionsTail._nextAdded=h,this._additionsTail=h)}_addToChanges(h){null===this._changesHead?this._changesHead=this._changesTail=h:(this._changesTail._nextChanged=h,this._changesTail=h)}_forEach(h,g){h instanceof Map?h.forEach(g):Object.keys(h).forEach(y=>g(h[y],y))}}class XT{constructor(h){this.key=h,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function gS(){return new dx([new hS])}let dx=(()=>{class d{constructor(g){this.factories=g}static create(g,y){if(null!=y){const x=y.factories.slice();g=g.concat(x)}return new d(g)}static extend(g){return{provide:d,useFactory:y=>d.create(g,y||gS()),deps:[[d,new _u,new yr]]}}find(g){const y=this.factories.find(x=>x.supports(g));if(null!=y)return y;throw new Ae(901,"")}}return d.\u0275prov=pn({token:d,providedIn:"root",factory:gS}),d})();function jM(){return new WM([new zM])}let WM=(()=>{class d{constructor(g){this.factories=g}static create(g,y){if(y){const x=y.factories.slice();g=g.concat(x)}return new d(g)}static extend(g){return{provide:d,useFactory:y=>d.create(g,y||jM()),deps:[[d,new _u,new yr]]}}find(g){const y=this.factories.find(M=>M.supports(g));if(y)return y;throw new Ae(901,"")}}return d.\u0275prov=pn({token:d,providedIn:"root",factory:jM}),d})();const mS=[new zM],vS=new dx([new hS]),yS=new WM(mS),JT=tS(null,"core",[{provide:V0,useValue:"unknown"},{provide:nS,deps:[ii]},{provide:FM,deps:[]},{provide:TM,deps:[]}]),YM=[{provide:Tg,useClass:Tg,deps:[ml,ii,Cd,Us,Sg]},{provide:Fi,deps:[ml],useFactory:function r1(d){let h=[];return d.onStable.subscribe(()=>{for(;h.length;)h.pop()()}),function(g){h.push(g)}}},{provide:Sg,useClass:Sg,deps:[[new yr,Gf]]},{provide:IM,useClass:IM,deps:[]},Y_,{provide:dx,useFactory:function e1(){return vS},deps:[]},{provide:WM,useFactory:function t1(){return yS},deps:[]},{provide:q_,useFactory:function bS(d){return d||function n1(){return"undefined"!=typeof $localize&&$localize.locale||wg}()},deps:[[new Sr(q_),new yr,new _u]]},{provide:Qw,useValue:"USD"}];let s1=(()=>{class d{constructor(g){}}return d.\u0275fac=function(g){return new(g||d)(us(Tg))},d.\u0275mod=ls({type:d}),d.\u0275inj=mr({providers:YM}),d})()}},ft=>{ft(ft.s=91)}]);
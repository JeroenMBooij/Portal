"use strict";var Z4=Math.pow;(self.webpackChunkportal=self.webpackChunkportal||[]).push([[179],{2816:(tn,tt,Q)=>{Q.d(tt,{hO:()=>ut,xv:()=>xt,Dh:()=>Lt,Ot:()=>ot,HU:()=>Pt,GT:()=>un,sI:()=>$,on:()=>Xt,ss:()=>qe,pX:()=>Ot,yq:()=>Nn});var u=Q(4408),Ve=Q(7565);const je=new class Te extends Ve.v{}(class z extends u.o{constructor(vt,bt){super(vt,bt),this.scheduler=vt,this.work=bt}schedule(vt,bt=0){return bt>0?super.schedule(vt,bt):(this.delay=bt,this.state=vt,this.scheduler.flush(this),this)}execute(vt,bt){return bt>0||this.closed?super.execute(vt,bt):this._execute(vt,bt)}requestAsyncId(vt,bt,wn=0){return null!=wn&&wn>0||null==wn&&this.delay>0?super.requestAsyncId(vt,bt,wn):vt.flush(this)}});var _e=Q(4986),We=Q(8505),Me=Q(9468),Y=Q(5363),fe=Q(5e3),le=Q(5867);function ke(){}tn=Q.hmd(tn);class Ce{constructor(vt,bt=je){this.zone=vt,this.delegate=bt}now(){return this.delegate.now()}schedule(vt,bt,wn){const Nt=this.zone;return this.delegate.schedule(function(Qt){Nt.runGuarded(()=>{vt.apply(this,[Qt])})},bt,wn)}}class Be{constructor(vt){this.zone=vt,this.task=null}call(vt,bt){const wn=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ke,{},ke,ke)),bt.pipe((0,We.b)({next:wn,complete:wn,error:wn})).subscribe(vt).add(wn)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class Pt{constructor(vt){this.ngZone=vt,this.outsideAngular=vt.runOutsideAngular(()=>new Ce(Zone.current)),this.insideAngular=vt.run(()=>new Ce(Zone.current,_e.z))}}function qe(ve){return function(bt){return(bt=bt.lift(new Be(ve.ngZone))).pipe((0,Me.R)(ve.outsideAngular),(0,Y.Q)(ve.insideAngular))}}const st=["ngOnDestroy"],Ot=(ve,vt,bt,wn={})=>new Proxy(ve,{get:(Nt,Bt)=>bt.runOutsideAngular(()=>{var Qt;if(ve[Bt])return(null===(Qt=null==wn?void 0:wn.spy)||void 0===Qt?void 0:Qt.get)&&wn.spy.get(Bt,ve[Bt]),ve[Bt];if(st.indexOf(Bt)>-1)return()=>{};const pt=vt.toPromise().then(xn=>{const nn=xn&&xn[Bt];return"function"==typeof nn?nn.bind(xn):nn&&nn.then?nn.then(mr=>bt.run(()=>mr)):bt.run(()=>nn)});return new Proxy(()=>{},{get:(xn,nn)=>pt[nn],apply:(xn,nn,mr)=>pt.then(Yr=>{var Mr;const pa=Yr&&Yr(...mr);return(null===(Mr=null==wn?void 0:wn.spy)||void 0===Mr?void 0:Mr.apply)&&wn.spy.apply(Bt,mr,pa),pa})})})}),un=(ve,vt)=>{vt.forEach(bt=>{Object.getOwnPropertyNames(bt.prototype||bt).forEach(wn=>{Object.defineProperty(ve.prototype,wn,Object.getOwnPropertyDescriptor(bt.prototype||bt,wn))})})},Lt=new fe.OlP("angularfire2.app.options"),xt=new fe.OlP("angularfire2.app.nameOrConfig");class ot{}const lt=new fe.GfV("6.1.5");function Xt(ve,vt,bt){const Nt="object"==typeof bt&&bt||{};Nt.name=Nt.name||"string"==typeof bt&&bt||"[DEFAULT]";const Qt=le.Z.apps.filter(pt=>pt&&pt.name===Nt.name)[0]||vt.runOutsideAngular(()=>le.Z.initializeApp(ve,Nt));try{JSON.stringify(ve)!==JSON.stringify(Qt.options)&&ue("error",`${Qt.name} Firebase App already initialized with different options${tn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(pt){}return Qt}const Nn=()=>{ue("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},ue=(ve,...vt)=>{(0,fe.X6Q)()&&"undefined"!=typeof console&&console[ve](...vt)};function $(ve,vt,bt,wn,Nt){const[Bt,...Qt]=globalThis.\u0275AngularfireInstanceCache.get(ve)||[];if(Bt){try{Nt.some((pt,xn)=>{const nn=Qt[xn];return pt&&"object"==typeof pt?JSON.stringify(pt)!==JSON.stringify(nn):pt!==nn})&&ue("error",`${vt} was already initialized on the ${bt.name} Firebase App instance with different settings.${tn.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(pt){}return Bt}{const pt=wn();return globalThis.\u0275AngularfireInstanceCache.set(ve,[pt,...Nt]),pt}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const Ne={provide:ot,useFactory:Xt,deps:[Lt,fe.R0b,[new fe.FiY,xt]]};let ut=(()=>{class ve{constructor(bt){le.Z.registerVersion("angularfire",lt.full,bt.toString()),le.Z.registerVersion("angular",fe.q4F.full)}static initializeApp(bt,wn){return{ngModule:ve,providers:[{provide:Lt,useValue:bt},{provide:xt,useValue:wn}]}}}return ve.\u0275fac=function(bt){return new(bt||ve)(fe.LFG(fe.Lbi))},ve.\u0275mod=fe.oAB({type:ve}),ve.\u0275inj=fe.cJS({providers:[Ne]}),ve})()},8367:(tn,tt,Q)=>{Q.d(tt,{Z:()=>Bt});var je,xt,u=Q(655),z=Q(492),Ve=Q(2461),Te=Q(4003),$e=((je={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",je["bad-app-name"]="Illegal App name: '{$appName}",je["duplicate-app"]="Firebase App named '{$appName}' already exists",je["app-deleted"]="Firebase App named '{$appName}' already deleted",je["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",je["invalid-log-argument"]="First argument to `onLog` must be null or a function.",je),_e=new z.LL("app","Firebase",$e),We="@firebase/app",ot="[DEFAULT]",lt=((xt={})[We]="fire-core",xt["@firebase/analytics"]="fire-analytics",xt["@firebase/app-check"]="fire-app-check",xt["@firebase/auth"]="fire-auth",xt["@firebase/database"]="fire-rtdb",xt["@firebase/functions"]="fire-fn",xt["@firebase/installations"]="fire-iid",xt["@firebase/messaging"]="fire-fcm",xt["@firebase/performance"]="fire-perf",xt["@firebase/remote-config"]="fire-rc",xt["@firebase/storage"]="fire-gcs",xt["@firebase/firestore"]="fire-fst",xt["fire-js"]="fire-js",xt["firebase-wrapper"]="fire-js-all",xt),Xt=new Te.Yd("@firebase/app"),Nn=function(){function Qt(pt,xn,nn){var mr=this;this.firebase_=nn,this.isDeleted_=!1,this.name_=xn.name,this.automaticDataCollectionEnabled_=xn.automaticDataCollectionEnabled||!1,this.options_=(0,z.p$)(pt),this.container=new Ve.H0(xn.name),this._addComponent(new Ve.wA("app",function(){return mr},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(Yr){return mr._addComponent(Yr)})}return Object.defineProperty(Qt.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(pt){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=pt},enumerable:!1,configurable:!0}),Object.defineProperty(Qt.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Qt.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Qt.prototype.delete=function(){var pt=this;return new Promise(function(xn){pt.checkDestroyed_(),xn()}).then(function(){return pt.firebase_.INTERNAL.removeApp(pt.name_),Promise.all(pt.container.getProviders().map(function(xn){return xn.delete()}))}).then(function(){pt.isDeleted_=!0})},Qt.prototype._getService=function(pt,xn){var nn;void 0===xn&&(xn=ot),this.checkDestroyed_();var mr=this.container.getProvider(pt);return!mr.isInitialized()&&"EXPLICIT"===(null===(nn=mr.getComponent())||void 0===nn?void 0:nn.instantiationMode)&&mr.initialize(),mr.getImmediate({identifier:xn})},Qt.prototype._removeServiceInstance=function(pt,xn){void 0===xn&&(xn=ot),this.container.getProvider(pt).clearInstance(xn)},Qt.prototype._addComponent=function(pt){try{this.container.addComponent(pt)}catch(xn){Xt.debug("Component "+pt.name+" failed to register with FirebaseApp "+this.name,xn)}},Qt.prototype._addOrOverwriteComponent=function(pt){this.container.addOrOverwriteComponent(pt)},Qt.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Qt.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw _e.create("app-deleted",{appName:this.name_})},Qt}();Nn.prototype.name&&Nn.prototype.options||Nn.prototype.delete||console.log("dc");var Ne=function $(){var Qt=function Ue(Qt){var pt={},xn=new Map,nn={__esModule:!0,initializeApp:function Mr($n,ai){void 0===ai&&(ai={}),("object"!=typeof ai||null===ai)&&(ai={name:ai});var jt=ai;void 0===jt.name&&(jt.name=ot);var ir=jt.name;if("string"!=typeof ir||!ir)throw _e.create("bad-app-name",{appName:String(ir)});if((0,z.r3)(pt,ir))throw _e.create("duplicate-app",{appName:ir});var fi=new Qt($n,jt,nn);return pt[ir]=fi,fi},app:Yr,registerVersion:function zi($n,ai,ga){var jt,ir=null!==(jt=lt[$n])&&void 0!==jt?jt:$n;ga&&(ir+="-"+ga);var fi=ir.match(/\s|\//),ji=ai.match(/\s|\//);if(fi||ji){var vr=['Unable to register library "'+ir+'" with version "'+ai+'":'];return fi&&vr.push('library name "'+ir+'" contains illegal characters (whitespace or "/")'),fi&&ji&&vr.push("and"),ji&&vr.push('version name "'+ai+'" contains illegal characters (whitespace or "/")'),void Xt.warn(vr.join(" "))}Cf(new Ve.wA(ir+"-version",function(){return{library:ir,version:ai}},"VERSION"))},setLogLevel:Te.Ub,onLog:function Xd($n,ai){if(null!==$n&&"function"!=typeof $n)throw _e.create("invalid-log-argument");(0,Te.Am)($n,ai)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:Cf,removeApp:function mr($n){delete pt[$n]},components:xn,useAsService:function zu($n,ai){return"serverAuth"===ai?null:ai}}};function Yr($n){if(!(0,z.r3)(pt,$n=$n||ot))throw _e.create("no-app",{appName:$n});return pt[$n]}function Cf($n){var ai=$n.name;if(xn.has(ai))return Xt.debug("There were multiple attempts to register component "+ai+"."),"PUBLIC"===$n.type?nn[ai]:null;if(xn.set(ai,$n),"PUBLIC"===$n.type){var ga=function(ji){if(void 0===ji&&(ji=Yr()),"function"!=typeof ji[ai])throw _e.create("invalid-app-argument",{appName:ai});return ji[ai]()};void 0!==$n.serviceProps&&(0,z.ZB)(ga,$n.serviceProps),nn[ai]=ga,Qt.prototype[ai]=function(){for(var ji=[],vr=0;vr<arguments.length;vr++)ji[vr]=arguments[vr];return this._getService.bind(this,ai).apply(this,$n.multipleInstances?ji:[])}}for(var jt=0,ir=Object.keys(pt);jt<ir.length;jt++)pt[ir[jt]]._addComponent($n);return"PUBLIC"===$n.type?nn[ai]:null}return nn.default=nn,Object.defineProperty(nn,"apps",{get:function pa(){return Object.keys(pt).map(function($n){return pt[$n]})}}),Yr.App=Qt,nn}(Nn);return Qt.INTERNAL=(0,u.pi)((0,u.pi)({},Qt.INTERNAL),{createFirebaseNamespace:$,extendNamespace:function pt(xn){(0,z.ZB)(Qt,xn)},createSubscribe:z.ne,ErrorFactory:z.LL,deepExtend:z.ZB}),Qt}(),ut=function(){function Qt(pt){this.container=pt}return Qt.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(xn){if(function ve(Qt){var pt=Qt.getComponent();return"VERSION"===(null==pt?void 0:pt.type)}(xn)){var nn=xn.getImmediate();return nn.library+"/"+nn.version}return null}).filter(function(xn){return xn}).join(" ")},Qt}();if((0,z.jU)()&&void 0!==self.firebase){Xt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var bt=self.firebase.SDK_VERSION;bt&&bt.indexOf("LITE")>=0&&Xt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var wn=Ne.initializeApp;Ne.initializeApp=function(){for(var Qt=[],pt=0;pt<arguments.length;pt++)Qt[pt]=arguments[pt];return(0,z.UG)()&&Xt.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),wn.apply(void 0,Qt)};var Nt=Ne;!function vt(Qt,pt){Qt.INTERNAL.registerComponent(new Ve.wA("platform-logger",function(xn){return new ut(xn)},"PRIVATE")),Qt.registerVersion(We,"0.6.30",pt),Qt.registerVersion("fire-js","")}(Nt);const Bt=Nt},2461:(tn,tt,Q)=>{Q.d(tt,{wA:()=>Ve,H0:()=>We});var u=Q(655),z=Q(492),Ve=function(){function Me(Y,fe,le){this.name=Y,this.instanceFactory=fe,this.type=le,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Me.prototype.setInstantiationMode=function(Y){return this.instantiationMode=Y,this},Me.prototype.setMultipleInstances=function(Y){return this.multipleInstances=Y,this},Me.prototype.setServiceProps=function(Y){return this.serviceProps=Y,this},Me.prototype.setInstanceCreatedCallback=function(Y){return this.onInstanceCreated=Y,this},Me}(),Te="[DEFAULT]",je=function(){function Me(Y,fe){this.name=Y,this.container=fe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Me.prototype.get=function(Y){var fe=this.normalizeInstanceIdentifier(Y);if(!this.instancesDeferred.has(fe)){var le=new z.BH;if(this.instancesDeferred.set(fe,le),this.isInitialized(fe)||this.shouldAutoInitialize())try{var ke=this.getOrInitializeService({instanceIdentifier:fe});ke&&le.resolve(ke)}catch(Ce){}}return this.instancesDeferred.get(fe).promise},Me.prototype.getImmediate=function(Y){var fe,le=this.normalizeInstanceIdentifier(null==Y?void 0:Y.identifier),ke=null!==(fe=null==Y?void 0:Y.optional)&&void 0!==fe&&fe;if(!this.isInitialized(le)&&!this.shouldAutoInitialize()){if(ke)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:le})}catch(Ce){if(ke)return null;throw Ce}},Me.prototype.getComponent=function(){return this.component},Me.prototype.setComponent=function(Y){var fe,le;if(Y.name!==this.name)throw Error("Mismatching Component "+Y.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=Y,this.shouldAutoInitialize()){if(function _e(Me){return"EAGER"===Me.instantiationMode}(Y))try{this.getOrInitializeService({instanceIdentifier:Te})}catch(un){}try{for(var ke=(0,u.XA)(this.instancesDeferred.entries()),Ce=ke.next();!Ce.done;Ce=ke.next()){var Be=(0,u.CR)(Ce.value,2),qe=Be[1],st=this.normalizeInstanceIdentifier(Be[0]);try{var Ot=this.getOrInitializeService({instanceIdentifier:st});qe.resolve(Ot)}catch(un){}}}catch(un){fe={error:un}}finally{try{Ce&&!Ce.done&&(le=ke.return)&&le.call(ke)}finally{if(fe)throw fe.error}}}},Me.prototype.clearInstance=function(Y){void 0===Y&&(Y=Te),this.instancesDeferred.delete(Y),this.instancesOptions.delete(Y),this.instances.delete(Y)},Me.prototype.delete=function(){return(0,u.mG)(this,void 0,void 0,function(){var Y;return(0,u.Jh)(this,function(fe){switch(fe.label){case 0:return Y=Array.from(this.instances.values()),[4,Promise.all((0,u.ev)((0,u.ev)([],(0,u.CR)(Y.filter(function(le){return"INTERNAL"in le}).map(function(le){return le.INTERNAL.delete()}))),(0,u.CR)(Y.filter(function(le){return"_delete"in le}).map(function(le){return le._delete()}))))];case 1:return fe.sent(),[2]}})})},Me.prototype.isComponentSet=function(){return null!=this.component},Me.prototype.isInitialized=function(Y){return void 0===Y&&(Y=Te),this.instances.has(Y)},Me.prototype.getOptions=function(Y){return void 0===Y&&(Y=Te),this.instancesOptions.get(Y)||{}},Me.prototype.initialize=function(Y){var fe,le;void 0===Y&&(Y={});var ke=Y.options,Ce=void 0===ke?{}:ke,Be=this.normalizeInstanceIdentifier(Y.instanceIdentifier);if(this.isInitialized(Be))throw Error(this.name+"("+Be+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Pt=this.getOrInitializeService({instanceIdentifier:Be,options:Ce});try{for(var qe=(0,u.XA)(this.instancesDeferred.entries()),st=qe.next();!st.done;st=qe.next()){var Ot=(0,u.CR)(st.value,2),Lt=Ot[1];Be===this.normalizeInstanceIdentifier(Ot[0])&&Lt.resolve(Pt)}}catch(ot){fe={error:ot}}finally{try{st&&!st.done&&(le=qe.return)&&le.call(qe)}finally{if(fe)throw fe.error}}return Pt},Me.prototype.onInit=function(Y,fe){var le,ke=this.normalizeInstanceIdentifier(fe),Ce=null!==(le=this.onInitCallbacks.get(ke))&&void 0!==le?le:new Set;Ce.add(Y),this.onInitCallbacks.set(ke,Ce);var Be=this.instances.get(ke);return Be&&Y(Be,ke),function(){Ce.delete(Y)}},Me.prototype.invokeOnInitCallbacks=function(Y,fe){var le,ke,Ce=this.onInitCallbacks.get(fe);if(Ce)try{for(var Be=(0,u.XA)(Ce),Pt=Be.next();!Pt.done;Pt=Be.next()){var qe=Pt.value;try{qe(Y,fe)}catch(st){}}}catch(st){le={error:st}}finally{try{Pt&&!Pt.done&&(ke=Be.return)&&ke.call(Be)}finally{if(le)throw le.error}}},Me.prototype.getOrInitializeService=function(Y){var fe=Y.instanceIdentifier,le=Y.options,ke=void 0===le?{}:le,Ce=this.instances.get(fe);if(!Ce&&this.component&&(Ce=this.component.instanceFactory(this.container,{instanceIdentifier:$e(fe),options:ke}),this.instances.set(fe,Ce),this.instancesOptions.set(fe,ke),this.invokeOnInitCallbacks(Ce,fe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,fe,Ce)}catch(Be){}return Ce||null},Me.prototype.normalizeInstanceIdentifier=function(Y){return void 0===Y&&(Y=Te),this.component?this.component.multipleInstances?Y:Te:Y},Me.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},Me}();function $e(Me){return Me===Te?void 0:Me}var We=function(){function Me(Y){this.name=Y,this.providers=new Map}return Me.prototype.addComponent=function(Y){var fe=this.getProvider(Y.name);if(fe.isComponentSet())throw new Error("Component "+Y.name+" has already been registered with "+this.name);fe.setComponent(Y)},Me.prototype.addOrOverwriteComponent=function(Y){this.getProvider(Y.name).isComponentSet()&&this.providers.delete(Y.name),this.addComponent(Y)},Me.prototype.getProvider=function(Y){if(this.providers.has(Y))return this.providers.get(Y);var fe=new je(Y,this);return this.providers.set(Y,fe),fe},Me.prototype.getProviders=function(){return Array.from(this.providers.values())},Me}()},4003:(tn,tt,Q)=>{function u(){for(var le=0,ke=0,Ce=arguments.length;ke<Ce;ke++)le+=arguments[ke].length;var Be=Array(le),Pt=0;for(ke=0;ke<Ce;ke++)for(var qe=arguments[ke],st=0,Ot=qe.length;st<Ot;st++,Pt++)Be[Pt]=qe[st];return Be}Q.d(tt,{in:()=>Te,Yd:()=>Me,Ub:()=>Y,Am:()=>fe});var z,Ve=[],Te=(()=>{return(le=Te||(Te={}))[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",Te;var le})(),je={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},$e=Te.INFO,_e=((z={})[Te.DEBUG]="log",z[Te.VERBOSE]="log",z[Te.INFO]="info",z[Te.WARN]="warn",z[Te.ERROR]="error",z),We=function(le,ke){for(var Ce=[],Be=2;Be<arguments.length;Be++)Ce[Be-2]=arguments[Be];if(!(ke<le.logLevel)){var Pt=(new Date).toISOString(),qe=_e[ke];if(!qe)throw new Error("Attempted to log a message with an invalid logType (value: "+ke+")");console[qe].apply(console,u(["["+Pt+"]  "+le.name+":"],Ce))}},Me=function(){function le(ke){this.name=ke,this._logLevel=$e,this._logHandler=We,this._userLogHandler=null,Ve.push(this)}return Object.defineProperty(le.prototype,"logLevel",{get:function(){return this._logLevel},set:function(ke){if(!(ke in Te))throw new TypeError('Invalid value "'+ke+'" assigned to `logLevel`');this._logLevel=ke},enumerable:!1,configurable:!0}),le.prototype.setLogLevel=function(ke){this._logLevel="string"==typeof ke?je[ke]:ke},Object.defineProperty(le.prototype,"logHandler",{get:function(){return this._logHandler},set:function(ke){if("function"!=typeof ke)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ke},enumerable:!1,configurable:!0}),Object.defineProperty(le.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(ke){this._userLogHandler=ke},enumerable:!1,configurable:!0}),le.prototype.debug=function(){for(var ke=[],Ce=0;Ce<arguments.length;Ce++)ke[Ce]=arguments[Ce];this._userLogHandler&&this._userLogHandler.apply(this,u([this,Te.DEBUG],ke)),this._logHandler.apply(this,u([this,Te.DEBUG],ke))},le.prototype.log=function(){for(var ke=[],Ce=0;Ce<arguments.length;Ce++)ke[Ce]=arguments[Ce];this._userLogHandler&&this._userLogHandler.apply(this,u([this,Te.VERBOSE],ke)),this._logHandler.apply(this,u([this,Te.VERBOSE],ke))},le.prototype.info=function(){for(var ke=[],Ce=0;Ce<arguments.length;Ce++)ke[Ce]=arguments[Ce];this._userLogHandler&&this._userLogHandler.apply(this,u([this,Te.INFO],ke)),this._logHandler.apply(this,u([this,Te.INFO],ke))},le.prototype.warn=function(){for(var ke=[],Ce=0;Ce<arguments.length;Ce++)ke[Ce]=arguments[Ce];this._userLogHandler&&this._userLogHandler.apply(this,u([this,Te.WARN],ke)),this._logHandler.apply(this,u([this,Te.WARN],ke))},le.prototype.error=function(){for(var ke=[],Ce=0;Ce<arguments.length;Ce++)ke[Ce]=arguments[Ce];this._userLogHandler&&this._userLogHandler.apply(this,u([this,Te.ERROR],ke)),this._logHandler.apply(this,u([this,Te.ERROR],ke))},le}();function Y(le){Ve.forEach(function(ke){ke.setLogLevel(le)})}function fe(le,ke){for(var Ce=function(st){var Ot=null;ke&&ke.level&&(Ot=je[ke.level]),st.userLogHandler=null===le?null:function(un,Lt){for(var xt=[],ot=2;ot<arguments.length;ot++)xt[ot-2]=arguments[ot];var lt=xt.map(function(Xt){if(null==Xt)return null;if("string"==typeof Xt)return Xt;if("number"==typeof Xt||"boolean"==typeof Xt)return Xt.toString();if(Xt instanceof Error)return Xt.message;try{return JSON.stringify(Xt)}catch(Nn){return null}}).filter(function(Xt){return Xt}).join(" ");Lt>=(null!=Ot?Ot:un.logLevel)&&le({level:Te[Lt].toLowerCase(),message:lt,args:xt,type:un.name})}},Be=0,Pt=Ve;Be<Pt.length;Be++)Ce(Pt[Be])}},492:(tn,tt,Q)=>{Q.d(tt,{BH:()=>Ce,LL:()=>vt,ZR:()=>ve,zI:()=>$,$s:()=>eh,r3:()=>Yr,Sg:()=>Be,ne:()=>jt,p$:()=>fe,ZB:()=>le,m9:()=>_n,z$:()=>Pt,jU:()=>Ot,ru:()=>un,d:()=>xt,w1:()=>ot,hl:()=>ue,uI:()=>qe,UG:()=>st,b$:()=>Lt,G6:()=>Nn,Mn:()=>lt,eu:()=>Ue});var u=Q(655),je=function(oe){for(var ie=[],me=0,we=0;we<oe.length;we++){var pe=oe.charCodeAt(we);pe<128?ie[me++]=pe:pe<2048?(ie[me++]=pe>>6|192,ie[me++]=63&pe|128):55296==(64512&pe)&&we+1<oe.length&&56320==(64512&oe.charCodeAt(we+1))?(pe=65536+((1023&pe)<<10)+(1023&oe.charCodeAt(++we)),ie[me++]=pe>>18|240,ie[me++]=pe>>12&63|128,ie[me++]=pe>>6&63|128,ie[me++]=63&pe|128):(ie[me++]=pe>>12|224,ie[me++]=pe>>6&63|128,ie[me++]=63&pe|128)}return ie},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(oe,ie){if(!Array.isArray(oe))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var me=ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,we=[],pe=0;pe<oe.length;pe+=3){var dt=oe[pe],yn=pe+1<oe.length,ti=yn?oe[pe+1]:0,pi=pe+2<oe.length,ni=pi?oe[pe+2]:0,Vs=(15&ti)<<2|ni>>6,Fl=63&ni;pi||(Fl=64,yn||(Vs=64)),we.push(me[dt>>2],me[(3&dt)<<4|ti>>4],me[Vs],me[Fl])}return we.join("")},encodeString:function(oe,ie){return this.HAS_NATIVE_SUPPORT&&!ie?btoa(oe):this.encodeByteArray(je(oe),ie)},decodeString:function(oe,ie){return this.HAS_NATIVE_SUPPORT&&!ie?atob(oe):function(oe){for(var ie=[],me=0,we=0;me<oe.length;){var pe=oe[me++];if(pe<128)ie[we++]=String.fromCharCode(pe);else if(pe>191&&pe<224){var dt=oe[me++];ie[we++]=String.fromCharCode((31&pe)<<6|63&dt)}else if(pe>239&&pe<365){var pi=((7&pe)<<18|(63&(dt=oe[me++]))<<12|(63&(yn=oe[me++]))<<6|63&oe[me++])-65536;ie[we++]=String.fromCharCode(55296+(pi>>10)),ie[we++]=String.fromCharCode(56320+(1023&pi))}else{dt=oe[me++];var yn=oe[me++];ie[we++]=String.fromCharCode((15&pe)<<12|(63&dt)<<6|63&yn)}}return ie.join("")}(this.decodeStringToByteArray(oe,ie))},decodeStringToByteArray:function(oe,ie){this.init_();for(var me=ie?this.charToByteMapWebSafe_:this.charToByteMap_,we=[],pe=0;pe<oe.length;){var dt=me[oe.charAt(pe++)],ti=pe<oe.length?me[oe.charAt(pe)]:0,ni=++pe<oe.length?me[oe.charAt(pe)]:64,$r=++pe<oe.length?me[oe.charAt(pe)]:64;if(++pe,null==dt||null==ti||null==ni||null==$r)throw Error();we.push(dt<<2|ti>>4),64!==ni&&(we.push(ti<<4&240|ni>>2),64!==$r&&we.push(ni<<6&192|$r))}return we},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var oe=0;oe<this.ENCODED_VALS.length;oe++)this.byteToCharMap_[oe]=this.ENCODED_VALS.charAt(oe),this.charToByteMap_[this.byteToCharMap_[oe]]=oe,this.byteToCharMapWebSafe_[oe]=this.ENCODED_VALS_WEBSAFE.charAt(oe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[oe]]=oe,oe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(oe)]=oe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(oe)]=oe)}}},Me=function(oe){return function(oe){var ie=je(oe);return _e.encodeByteArray(ie,!0)}(oe).replace(/\./g,"")};function fe(oe){return le(void 0,oe)}function le(oe,ie){if(!(ie instanceof Object))return ie;switch(ie.constructor){case Date:return new Date(ie.getTime());case Object:void 0===oe&&(oe={});break;case Array:oe=[];break;default:return ie}for(var we in ie)!ie.hasOwnProperty(we)||!ke(we)||(oe[we]=le(oe[we],ie[we]));return oe}function ke(oe){return"__proto__"!==oe}var Ce=function(){function oe(){var ie=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(me,we){ie.resolve=me,ie.reject=we})}return oe.prototype.wrapCallback=function(ie){var me=this;return function(we,pe){we?me.reject(we):me.resolve(pe),"function"==typeof ie&&(me.promise.catch(function(){}),1===ie.length?ie(we):ie(we,pe))}},oe}();function Be(oe,ie){if(oe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var we=ie||"demo-project",pe=oe.iat||0,dt=oe.sub||oe.user_id;if(!dt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var yn=(0,u.pi)({iss:"https://securetoken.google.com/"+we,aud:we,iat:pe,exp:pe+3600,auth_time:pe,sub:dt,user_id:dt,firebase:{sign_in_provider:"custom",identities:{}}},oe);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(yn)),""].join(".")}function Pt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function qe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function st(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(oe){return!1}}function Ot(){return"object"==typeof self&&self.self===self}function un(){var oe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof oe&&void 0!==oe.id}function Lt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xt(){return Pt().indexOf("Electron/")>=0}function ot(){var oe=Pt();return oe.indexOf("MSIE ")>=0||oe.indexOf("Trident/")>=0}function lt(){return Pt().indexOf("MSAppHost/")>=0}function Nn(){return!st()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ue(){return"indexedDB"in self&&null!=indexedDB}function Ue(){return new Promise(function(oe,ie){try{var me=!0,we="validate-browser-context-for-indexeddb-analytics-module",pe=self.indexedDB.open(we);pe.onsuccess=function(){pe.result.close(),me||self.indexedDB.deleteDatabase(we),oe(!0)},pe.onupgradeneeded=function(){me=!1},pe.onerror=function(){var dt;ie((null===(dt=pe.error)||void 0===dt?void 0:dt.message)||"")}}catch(dt){ie(dt)}})}function $(){return!(!navigator||!navigator.cookieEnabled)}var ve=function(oe){function ie(me,we,pe){var dt=oe.call(this,we)||this;return dt.code=me,dt.customData=pe,dt.name="FirebaseError",Object.setPrototypeOf(dt,ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(dt,vt.prototype.create),dt}return(0,u.ZT)(ie,oe),ie}(Error),vt=function(){function oe(ie,me,we){this.service=ie,this.serviceName=me,this.errors=we}return oe.prototype.create=function(ie){for(var me=[],we=1;we<arguments.length;we++)me[we-1]=arguments[we];var pe=me[0]||{},dt=this.service+"/"+ie,yn=this.errors[ie],ti=yn?bt(yn,pe):"Error",pi=this.serviceName+": "+ti+" ("+dt+").",ni=new ve(dt,pi,pe);return ni},oe}();function bt(oe,ie){return oe.replace(wn,function(me,we){var pe=ie[we];return null!=pe?String(pe):"<"+we+"?>"})}var wn=/\{\$([^}]+)}/g;function Yr(oe,ie){return Object.prototype.hasOwnProperty.call(oe,ie)}function jt(oe,ie){var me=new ir(oe,ie);return me.subscribe.bind(me)}!function(){function oe(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var ie=1;ie<this.blockSize;++ie)this.pad_[ie]=0;this.reset()}oe.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},oe.prototype.compress_=function(ie,me){me||(me=0);var we=this.W_;if("string"==typeof ie)for(var pe=0;pe<16;pe++)we[pe]=ie.charCodeAt(me)<<24|ie.charCodeAt(me+1)<<16|ie.charCodeAt(me+2)<<8|ie.charCodeAt(me+3),me+=4;else for(pe=0;pe<16;pe++)we[pe]=ie[me]<<24|ie[me+1]<<16|ie[me+2]<<8|ie[me+3],me+=4;for(pe=16;pe<80;pe++)we[pe]=4294967295&((dt=we[pe-3]^we[pe-8]^we[pe-14]^we[pe-16])<<1|dt>>>31);var $r,Vs,yn=this.chain_[0],ti=this.chain_[1],pi=this.chain_[2],ni=this.chain_[3],ss=this.chain_[4];for(pe=0;pe<80;pe++){pe<40?pe<20?($r=ni^ti&(pi^ni),Vs=1518500249):($r=ti^pi^ni,Vs=1859775393):pe<60?($r=ti&pi|ni&(ti|pi),Vs=2400959708):($r=ti^pi^ni,Vs=3395469782);var dt=(yn<<5|yn>>>27)+$r+ss+Vs+we[pe]&4294967295;ss=ni,ni=pi,pi=4294967295&(ti<<30|ti>>>2),ti=yn,yn=dt}this.chain_[0]=this.chain_[0]+yn&4294967295,this.chain_[1]=this.chain_[1]+ti&4294967295,this.chain_[2]=this.chain_[2]+pi&4294967295,this.chain_[3]=this.chain_[3]+ni&4294967295,this.chain_[4]=this.chain_[4]+ss&4294967295},oe.prototype.update=function(ie,me){if(null!=ie){void 0===me&&(me=ie.length);for(var we=me-this.blockSize,pe=0,dt=this.buf_,yn=this.inbuf_;pe<me;){if(0===yn)for(;pe<=we;)this.compress_(ie,pe),pe+=this.blockSize;if("string"==typeof ie){for(;pe<me;)if(dt[yn]=ie.charCodeAt(pe),++pe,++yn===this.blockSize){this.compress_(dt),yn=0;break}}else for(;pe<me;)if(dt[yn]=ie[pe],++pe,++yn===this.blockSize){this.compress_(dt),yn=0;break}}this.inbuf_=yn,this.total_+=me}},oe.prototype.digest=function(){var ie=[],me=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var we=this.blockSize-1;we>=56;we--)this.buf_[we]=255&me,me/=256;this.compress_(this.buf_);var pe=0;for(we=0;we<5;we++)for(var dt=24;dt>=0;dt-=8)ie[pe]=this.chain_[we]>>dt&255,++pe;return ie}}();var ir=function(){function oe(ie,me){var we=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=me,this.task.then(function(){ie(we)}).catch(function(pe){we.error(pe)})}return oe.prototype.next=function(ie){this.forEachObserver(function(me){me.next(ie)})},oe.prototype.error=function(ie){this.forEachObserver(function(me){me.error(ie)}),this.close(ie)},oe.prototype.complete=function(){this.forEachObserver(function(ie){ie.complete()}),this.close()},oe.prototype.subscribe=function(ie,me,we){var dt,pe=this;if(void 0===ie&&void 0===me&&void 0===we)throw new Error("Missing Observer.");dt=function ji(oe,ie){if("object"!=typeof oe||null===oe)return!1;for(var me=0,we=ie;me<we.length;me++){var pe=we[me];if(pe in oe&&"function"==typeof oe[pe])return!0}return!1}(ie,["next","error","complete"])?ie:{next:ie,error:me,complete:we},void 0===dt.next&&(dt.next=vr),void 0===dt.error&&(dt.error=vr),void 0===dt.complete&&(dt.complete=vr);var yn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{pe.finalError?dt.error(pe.finalError):dt.complete()}catch(ti){}}),this.observers.push(dt),yn},oe.prototype.unsubscribeOne=function(ie){void 0===this.observers||void 0===this.observers[ie]||(delete this.observers[ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},oe.prototype.forEachObserver=function(ie){if(!this.finalized)for(var me=0;me<this.observers.length;me++)this.sendOne(me,ie)},oe.prototype.sendOne=function(ie,me){var we=this;this.task.then(function(){if(void 0!==we.observers&&void 0!==we.observers[ie])try{me(we.observers[ie])}catch(pe){"undefined"!=typeof console&&console.error&&console.error(pe)}})},oe.prototype.close=function(ie){var me=this;this.finalized||(this.finalized=!0,void 0!==ie&&(this.finalError=ie),this.task.then(function(){me.observers=void 0,me.onNoObservers=void 0}))},oe}();function vr(){}function eh(oe,ie,me){void 0===ie&&(ie=1e3),void 0===me&&(me=2);var we=ie*Math.pow(me,oe),pe=Math.round(.5*we*(Math.random()-.5)*2);return Math.min(144e5,we+pe)}function _n(oe){return oe&&oe._delegate?oe._delegate:oe}},580:(tn,tt,Q)=>{var u=Q(5e3);let z=null;function Ve(){return z}const _e=new u.OlP("DocumentToken");let We=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=u.Yz7({token:i,factory:function(){return function Me(){return(0,u.LFG)(fe)}()},providedIn:"platform"}),i})();const Y=new u.OlP("Location Initialized");let fe=(()=>{class i extends We{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ve().getBaseHref(this._doc)}onPopState(t){const s=Ve().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",t,!1),()=>s.removeEventListener("popstate",t)}onHashChange(t){const s=Ve().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",t,!1),()=>s.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,s,o){le()?this._history.pushState(t,s,o):this.location.hash=o}replaceState(t,s,o){le()?this._history.replaceState(t,s,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_e))},i.\u0275prov=u.Yz7({token:i,factory:function(){return function ke(){return new fe((0,u.LFG)(_e))}()},providedIn:"platform"}),i})();function le(){return!!window.history.pushState}function Ce(i,e){if(0==i.length)return e;if(0==e.length)return i;let t=0;return i.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?i+e.substring(1):1==t?i+e:i+"/"+e}function Be(i){const e=i.match(/#|\?|$/),t=e&&e.index||i.length;return i.slice(0,t-("/"===i[t-1]?1:0))+i.slice(t)}function Pt(i){return i&&"?"!==i[0]?"?"+i:i}let qe=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=u.Yz7({token:i,factory:function(){return function st(i){const e=(0,u.LFG)(_e).location;return new un((0,u.LFG)(We),e&&e.origin||"")}()},providedIn:"root"}),i})();const Ot=new u.OlP("appBaseHref");let un=(()=>{class i extends qe{constructor(t,s){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ce(this._baseHref,t)}path(t=!1){const s=this._platformLocation.pathname+Pt(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${s}${o}`:s}pushState(t,s,o,a){const l=this.prepareExternalUrl(o+Pt(a));this._platformLocation.pushState(t,s,l)}replaceState(t,s,o,a){const l=this.prepareExternalUrl(o+Pt(a));this._platformLocation.replaceState(t,s,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var s,o;null===(o=(s=this._platformLocation).historyGo)||void 0===o||o.call(s,t)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(We),u.LFG(Ot,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),Lt=(()=>{class i extends qe{constructor(t,s){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(t){const s=Ce(this._baseHref,t);return s.length>0?"#"+s:s}pushState(t,s,o,a){let l=this.prepareExternalUrl(o+Pt(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,s,l)}replaceState(t,s,o,a){let l=this.prepareExternalUrl(o+Pt(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,s,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var s,o;null===(o=(s=this._platformLocation).historyGo)||void 0===o||o.call(s,t)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(We),u.LFG(Ot,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),xt=(()=>{class i{constructor(t,s){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=Be(Xt(o)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,s=""){return this.path()==this.normalize(t+Pt(s))}normalize(t){return i.stripTrailingSlash(function lt(i,e){return i&&e.startsWith(i)?e.substring(i.length):e}(this._baseHref,Xt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,s="",o=null){this._platformStrategy.pushState(o,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pt(s)),o)}replaceState(t,s="",o=null){this._platformStrategy.replaceState(o,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pt(s)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var s,o;null===(o=(s=this._platformStrategy).historyGo)||void 0===o||o.call(s,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(t="",s){this._urlChangeListeners.forEach(o=>o(t,s))}subscribe(t,s,o){return this._subject.subscribe({next:t,error:s,complete:o})}}return i.normalizeQueryParams=Pt,i.joinWithSlash=Ce,i.stripTrailingSlash=Be,i.\u0275fac=function(t){return new(t||i)(u.LFG(qe),u.LFG(We))},i.\u0275prov=u.Yz7({token:i,factory:function(){return function ot(){return new xt((0,u.LFG)(qe),(0,u.LFG)(We))}()},providedIn:"root"}),i})();function Xt(i){return i.replace(/\/index.html$/,"")}var Ue=(()=>((Ue=Ue||{})[Ue.Zero=0]="Zero",Ue[Ue.One=1]="One",Ue[Ue.Two=2]="Two",Ue[Ue.Few=3]="Few",Ue[Ue.Many=4]="Many",Ue[Ue.Other=5]="Other",Ue))();const $n=u.kL8;class rr{}let qu=(()=>{class i extends rr{constructor(t){super(),this.locale=t}getPluralCategory(t,s){switch($n(s||this.locale)(t)){case Ue.Zero:return"zero";case Ue.One:return"one";case Ue.Two:return"two";case Ue.Few:return"few";case Ue.Many:return"many";default:return"other"}}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(u.soG))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();function nh(i,e){e=encodeURIComponent(e);for(const t of i.split(";")){const s=t.indexOf("="),[o,a]=-1==s?[t,""]:[t.slice(0,s),t.slice(s+1)];if(o.trim()===e)return decodeURIComponent(a)}return null}let Bl=(()=>{class i{constructor(t,s,o,a){this._iterableDiffers=t,this._keyValueDiffers=s,this._ngEl=o,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(s=>this._toggleClass(s.key,s.currentValue)),t.forEachChangedItem(s=>this._toggleClass(s.key,s.currentValue)),t.forEachRemovedItem(s=>{s.previousValue&&this._toggleClass(s.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(s=>{if("string"!=typeof s.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,u.AaK)(s.item)}`);this._toggleClass(s.item,!0)}),t.forEachRemovedItem(s=>this._toggleClass(s.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(s=>this._toggleClass(s,!0)):Object.keys(t).forEach(s=>this._toggleClass(s,!!t[s])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(s=>this._toggleClass(s,!1)):Object.keys(t).forEach(s=>this._toggleClass(s,!1)))}_toggleClass(t,s){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{s?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},i.\u0275dir=u.lG2({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),i})();class Vl{constructor(e,t,s,o){this.$implicit=e,this.ngForOf=t,this.index=s,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Cs=(()=>{class i{constructor(t,s,o){this._viewContainer=t,this._template=s,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const s=this._viewContainer;t.forEachOperation((o,a,l)=>{if(null==o.previousIndex)s.createEmbeddedView(this._template,new Vl(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)s.remove(null===a?void 0:a);else if(null!==a){const h=s.get(a);s.move(h,l),Ic(h,o)}});for(let o=0,a=s.length;o<a;o++){const h=s.get(o).context;h.index=o,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Ic(s.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,s){return!0}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},i.\u0275dir=u.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i})();function Ic(i,e){i.context.$implicit=e.item}let dr=(()=>{class i{constructor(t,s){this._viewContainer=t,this._context=new Bi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){wg("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){wg("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,s){return!0}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.s_b),u.Y36(u.Rgc))},i.\u0275dir=u.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class Bi{constructor(){this.$implicit=null,this.ngIf=null}}function wg(i,e){if(e&&!e.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}class xg{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Lr=(()=>{class i{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const s=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||s,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),s}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let s=0;s<this._defaultViews.length;s++)this._defaultViews[s].enforceState(t)}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=u.lG2({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),i})(),wa=(()=>{class i{constructor(t,s,o){this.ngSwitch=o,o._addCase(),this._view=new xg(t,s)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(Lr,9))},i.\u0275dir=u.lG2({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),i})(),Io=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[{provide:rr,useClass:qu}]}),i})();const Mg="browser";function sr(i){return i===Mg}function Gs(i){return"server"===i}let q0=(()=>{class i{}return i.\u0275prov=(0,u.Yz7)({token:i,providedIn:"root",factory:()=>new l_((0,u.LFG)(_e),window)}),i})();class l_{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function u_(i,e){const t=i.getElementById(e)||i.getElementsByName(e)[0];if(t)return t;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const s=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let o=s.currentNode;for(;o;){const a=o.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}o=s.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),s=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(s-a[0],o-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=c_(this.window.history)||c_(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function c_(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class Qn{}class d_ extends class kc extends class $e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function je(i){z||(z=i)}(new d_)}onAndCancel(e,t,s){return e.addEventListener(t,s,!1),()=>{e.removeEventListener(t,s,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function MC(){return Ii=Ii||document.querySelector("base"),Ii?Ii.getAttribute("href"):null}();return null==t?null:function Zu(i){h_=h_||document.createElement("a"),h_.setAttribute("href",i);const e=h_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ii=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return nh(document.cookie,e)}}let h_,Ii=null;const Hs=new u.OlP("TRANSITION_ID"),Mf=[{provide:u.ip1,useFactory:function f_(i,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const s=Ve(),o=e.querySelectorAll(`style[ng-transition="${i}"]`);for(let a=0;a<o.length;a++)s.remove(o[a])})}},deps:[Hs,_e,u.zs3],multi:!0}];class dl{static init(){(0,u.VLi)(new dl)}addToWindow(e){u.dqk.getAngularTestability=(s,o=!0)=>{const a=e.findTestabilityInTree(s,o);if(null==a)throw new Error("Could not find testability for element.");return a},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(s=>{const o=u.dqk.getAllAngularTestabilities();let a=o.length,l=!1;const h=function(g){l=l||g,a--,0==a&&s(l)};o.forEach(function(g){g.whenStable(h)})})}findTestabilityInTree(e,t,s){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:s?Ve().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let fo=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const oh=new u.OlP("EventManagerPlugins");let Ss=(()=>{class i{constructor(t,s){this._zone=s,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,s,o){return this._findPluginFor(s).addEventListener(t,s,o)}addGlobalEventListener(t,s,o){return this._findPluginFor(s).addGlobalEventListener(t,s,o)}getZone(){return this._zone}_findPluginFor(t){const s=this._eventNameToPlugin.get(t);if(s)return s;const o=this._plugins;for(let a=0;a<o.length;a++){const l=o[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(oh),u.LFG(u.R0b))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class p_{constructor(e){this._doc=e}addGlobalEventListener(e,t,s){const o=Ve().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,s)}}let Ul=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(t){const s=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),s.add(o))}),this.onStylesAdded(s)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),Oc=(()=>{class i extends Ul{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,s,o){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,o.push(s.appendChild(l))})}addHost(t){const s=[];this._addStylesToHost(this._stylesSet,t,s),this._hostNodes.set(t,s)}removeHost(t){const s=this._hostNodes.get(t);s&&s.forEach(zs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((s,o)=>{this._addStylesToHost(t,o,s)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(zs))}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_e))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();function zs(i){Ve().remove(i)}const bn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},g_=/%COMP%/g;function He(i,e,t){for(let s=0;s<e.length;s++){let o=e[s];Array.isArray(o)?He(i,o,t):(o=o.replace(g_,i),t.push(o))}return t}function Xn(i){return e=>{if("__ngUnwrap__"===e)return i;!1===i(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ji=(()=>{class i{constructor(t,s,o){this.eventManager=t,this.sharedStylesHost=s,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new ah(t)}createRenderer(t,s){if(!t||!s)return this.defaultRenderer;switch(s.encapsulation){case u.ifc.Emulated:{let o=this.rendererByCompId.get(s.id);return o||(o=new Ag(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,o)),o.applyToHost(t),o}case 1:case u.ifc.ShadowDom:return new w_(this.eventManager,this.sharedStylesHost,t,s);default:if(!this.rendererByCompId.has(s.id)){const o=He(s.id,s.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(Ss),u.LFG(Oc),u.LFG(u.AFp))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class ah{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(bn[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,s){e&&e.insertBefore(t,s)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let s="string"==typeof e?document.querySelector(e):e;if(!s)throw new Error(`The selector "${e}" did not match any elements`);return t||(s.textContent=""),s}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,s,o){if(o){t=o+":"+t;const a=bn[o];a?e.setAttributeNS(a,t,s):e.setAttribute(t,s)}else e.setAttribute(t,s)}removeAttribute(e,t,s){if(s){const o=bn[s];o?e.removeAttributeNS(o,t):e.removeAttribute(`${s}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,s,o){o&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,s,o&u.JOm.Important?"important":""):e.style[t]=s}removeStyle(e,t,s){s&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,s){e[t]=s}setValue(e,t){e.nodeValue=t}listen(e,t,s){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Xn(s)):this.eventManager.addEventListener(e,t,Xn(s))}}class Ag extends ah{constructor(e,t,s,o){super(e),this.component=s;const a=He(o+"-"+s.id,s.styles,[]);t.addStyles(a),this.contentAttr=function __(i){return"_ngcontent-%COMP%".replace(g_,i)}(o+"-"+s.id),this.hostAttr=function y_(i){return"_nghost-%COMP%".replace(g_,i)}(o+"-"+s.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const s=super.createElement(e,t);return super.setAttribute(s,this.contentAttr,""),s}}class w_ extends ah{constructor(e,t,s,o){super(e),this.sharedStylesHost=t,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=He(o.id,o.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,s){return super.insertBefore(this.nodeOrShadowRoot(e),t,s)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Df=(()=>{class i extends p_{constructor(t){super(t)}supports(t){return!0}addEventListener(t,s,o){return t.addEventListener(s,o,!1),()=>this.removeEventListener(t,s,o)}removeEventListener(t,s,o){return t.removeEventListener(s,o)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_e))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const Tg=["alt","control","meta","shift"],Af={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},js={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ws={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let lh=(()=>{class i extends p_{constructor(t){super(t)}supports(t){return null!=i.parseEventName(t)}addEventListener(t,s,o){const a=i.parseEventName(s),l=i.eventCallback(a.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ve().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const s=t.toLowerCase().split("."),o=s.shift();if(0===s.length||"keydown"!==o&&"keyup"!==o)return null;const a=i._normalizeKey(s.pop());let l="";if(Tg.forEach(g=>{const _=s.indexOf(g);_>-1&&(s.splice(_,1),l+=g+".")}),l+=a,0!=s.length||0===a.length)return null;const h={};return h.domEventName=o,h.fullKey=l,h}static getEventFullKey(t){let s="",o=function pl(i){let e=i.key;if(null==e){if(e=i.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===i.location&&js.hasOwnProperty(e)&&(e=js[e]))}return Af[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Tg.forEach(a=>{a!=o&&Ws[a](t)&&(s+=a+".")}),s+=o,s}static eventCallback(t,s,o){return a=>{i.getEventFullKey(a)===t&&o.runGuarded(()=>s(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_e))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const Ig=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:Mg},{provide:u.g9A,useValue:function qa(){d_.makeCurrent(),dl.init()},multi:!0},{provide:_e,useFactory:function $o(){return(0,u.RDi)(document),document},deps:[]}]),Ku=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function Dr(){return new u.qLn},deps:[]},{provide:oh,useClass:Df,multi:!0,deps:[_e,u.R0b,u.Lbi]},{provide:oh,useClass:lh,multi:!0,deps:[_e]},{provide:Ji,useClass:Ji,deps:[Ss,Oc,u.AFp]},{provide:u.FYo,useExisting:Ji},{provide:Ul,useExisting:Oc},{provide:Oc,useClass:Oc,deps:[_e]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:Ss,useClass:Ss,deps:[oh,u.R0b]},{provide:Qn,useClass:fo,deps:[]}];let Fc=(()=>{class i{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:i,providers:[{provide:u.AFp,useValue:t.appId},{provide:Hs,useExisting:u.AFp},Mf]}}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(i,12))},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:Ku,imports:[Io,u.hGG]}),i})(),Tf=(()=>{class i{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_e))},i.\u0275prov=u.Yz7({token:i,factory:function(t){let s=null;return s=t?new t:function Y0(){return new Tf((0,u.LFG)(_e))}(),s},providedIn:"root"}),i})();"undefined"!=typeof window&&window;let Gl=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=u.Yz7({token:i,factory:function(t){let s=null;return s=t?new(t||i):u.LFG(eb),s},providedIn:"root"}),i})(),eb=(()=>{class i extends Gl{constructor(t){super(),this._doc=t}sanitize(t,s){if(null==s)return null;switch(t){case u.q3G.NONE:return s;case u.q3G.HTML:return(0,u.qzn)(s,"HTML")?(0,u.z3N)(s):(0,u.EiD)(this._doc,String(s)).toString();case u.q3G.STYLE:return(0,u.qzn)(s,"Style")?(0,u.z3N)(s):s;case u.q3G.SCRIPT:if((0,u.qzn)(s,"Script"))return(0,u.z3N)(s);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.yhl)(s),(0,u.qzn)(s,"URL")?(0,u.z3N)(s):(0,u.mCW)(String(s));case u.q3G.RESOURCE_URL:if((0,u.qzn)(s,"ResourceURL"))return(0,u.z3N)(s);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,u.JVY)(t)}bypassSecurityTrustStyle(t){return(0,u.L6k)(t)}bypassSecurityTrustScript(t){return(0,u.eBb)(t)}bypassSecurityTrustUrl(t){return(0,u.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,u.pB0)(t)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_e))},i.\u0275prov=u.Yz7({token:i,factory:function(t){let s=null;return s=t?new t:function ch(i){return new eb(i.get(_e))}(u.LFG(u.zs3)),s},providedIn:"root"}),i})();const _i_firebase={apiKey:"AIzaSyBtmCJxbdeQTQEsI0T8e-xBbKoGRH-LUZ0",authDomain:"starter-1c7d5.firebaseapp.com",projectId:"starter-1c7d5",storageBucket:"starter-1c7d5.appspot.com",messagingSenderId:"881006190092",appId:"1:881006190092:web:16e42cc5fd7c157ab2d829",measurementId:"G-6PWFVHMVFH"},_i_authenticationClient_baseUrl="https://authenticationserver.web";var ii=Q(2816),os=Q(4986),Ri=Q(9751),Yi=Q(8996),Ya=Q(3269);function at(...i){const e=(0,Ya.yG)(i);return(0,Yi.D)(i,e)}var ml=Q(8189);function Ko(...i){return function Qu(){return(0,ml.J)(1)}()((0,Yi.D)(i,(0,Ya.yG)(i)))}var Un=Q(4482);function zn(...i){const e=(0,Ya.yG)(i);return(0,Un.e)((t,s)=>{(e?Ko(i,t,e):Ko(i,t)).subscribe(s)})}var $i=Q(5403);function Hl(){return(0,Un.e)((i,e)=>{let t,s=!1;i.subscribe(new $i.Q(e,o=>{const a=t;t=o,s&&e.next([a,o]),s=!0}))})}var Dt=Q(4004);function Xu(i,e,t,s,o){return(a,l)=>{let h=t,g=e,_=0;a.subscribe(new $i.Q(l,b=>{const x=_++;g=h?i(g,b,x):(h=!0,b),s&&l.next(g)},o&&(()=>{h&&l.next(g),l.complete()})))}}function zl(i,e){return(0,Un.e)(Xu(i,e,arguments.length>=2,!0))}var jl=Q(4671);function vl(i,e=jl.y){return i=null!=i?i:Bc,(0,Un.e)((t,s)=>{let o,a=!0;t.subscribe(new $i.Q(s,l=>{const h=e(l);(a||!i(o,h))&&(a=!1,o=h,s.next(l))}))})}function Bc(i,e){return i===e}function Dn(i,e){return(0,Un.e)((t,s)=>{let o=0;t.subscribe(new $i.Q(s,a=>i.call(e,a,o++)&&s.next(a)))})}var Ca=Q(5363),Pf=Q(5867),Vc=Q(8367),q=Q(655),gi=Q(492),Sa=Q(4003),kf=function(i,e){return(kf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])})(i,e)};function nb(i){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Tt,Of="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ff=Ff||{},Cn=Of||self;function Ut(){}function _r(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function go(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Lf="closure_uid_"+(1e9*Math.random()>>>0),Uc=0;function Gc(i,e,t){return i.call.apply(i.bind,arguments)}function Hc(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,s),i.apply(e,o)}}return function(){return i.apply(e,arguments)}}function Zr(i,e,t){return(Zr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Gc:Hc).apply(null,arguments)}function zc(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function or(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(s,o,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[o].apply(s,l)}}function Wl(){this.s=this.s,this.o=this.o}var yr={};Wl.prototype.s=!1,Wl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function x_(i){return Object.prototype.hasOwnProperty.call(i,Lf)&&i[Lf]||(i[Lf]=++Uc)}(this);delete yr[i]}},Wl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Og=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(var t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},Fg=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){for(var s=i.length,o="string"==typeof i?i.split(""):i,a=0;a<s;a++)a in o&&e.call(t,o[a],a,i)};function PC(i){return Array.prototype.concat.apply([],arguments)}function ib(i){var e=i.length;if(0<e){for(var t=Array(e),s=0;s<e;s++)t[s]=i[s];return t}return[]}function C_(i){return/^[\s\xa0]*$/.test(i)}var ui,kC=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Nr(i,e){return-1!=i.indexOf(e)}function S_(i,e){return i<e?-1:i>e?1:0}e:{var Bf=Cn.navigator;if(Bf){var uh=Bf.userAgent;if(uh){ui=uh;break e}}ui=""}function rb(i,e,t){for(var s in i)e.call(t,i[s],s,i)}function Ng(i){var e={};for(var t in i)e[t]=i[t];return e}var ko="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ma(i,e){for(var t,s,o=1;o<arguments.length;o++){for(t in s=arguments[o])i[t]=s[t];for(var a=0;a<ko.length;a++)t=ko[a],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function Bg(i){return Bg[" "](i),i}Bg[" "]=Ut;var as,i,dh=Nr(ui,"Opera"),ed=Nr(ui,"Trident")||Nr(ui,"MSIE"),sb=Nr(ui,"Edge"),Ug=sb||ed,Gg=Nr(ui,"Gecko")&&!(Nr(ui.toLowerCase(),"webkit")&&!Nr(ui,"Edge"))&&!(Nr(ui,"Trident")||Nr(ui,"MSIE"))&&!Nr(ui,"Edge"),OC=Nr(ui.toLowerCase(),"webkit")&&!Nr(ui,"Edge");function Hg(){var i=Cn.document;return i?i.documentMode:void 0}e:{var hh="",jc=(i=ui,Gg?/rv:([^\);]+)(\)|;)/.exec(i):sb?/Edge\/([\d\.]+)/.exec(i):ed?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):OC?/WebKit\/(\S+)/.exec(i):dh?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(jc&&(hh=jc?jc[1]:""),ed){var M_=Hg();if(null!=M_&&M_>parseFloat(hh)){as=String(M_);break e}}as=hh}var E_={};var FC=Cn.document&&ed&&(Hg()||parseInt(as,10))||void 0,Uf=function(){if(!Cn.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Cn.addEventListener("test",Ut,e),Cn.removeEventListener("test",Ut,e)}catch(t){}return i}();function Ms(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function td(i,e){if(Ms.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Gg){e:{try{Bg(e.nodeName);var o=!0;break e}catch(a){}o=!1}o||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:jg[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&td.Z.h.call(this)}}Ms.prototype.h=function(){this.defaultPrevented=!0},or(td,Ms);var jg={2:"touch",3:"pen",4:"mouse"};td.prototype.h=function(){td.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var nd="closure_listenable_"+(1e6*Math.random()|0),Wc=0;function Wg(i,e,t,s,o){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=o,this.key=++Wc,this.ca=this.fa=!1}function qc(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function id(i){this.src=i,this.g={},this.h=0}function Gf(i,e){var t=e.type;if(t in i.g){var a,s=i.g[t],o=Og(s,e);(a=0<=o)&&Array.prototype.splice.call(s,o,1),a&&(qc(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Hf(i,e,t,s){for(var o=0;o<i.length;++o){var a=i[o];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==s)return o}return-1}id.prototype.add=function(i,e,t,s,o){var a=i.toString();(i=this.g[a])||(i=this.g[a]=[],this.h++);var l=Hf(i,e,s,o);return-1<l?(e=i[l],t||(e.fa=!1)):((e=new Wg(e,this.src,a,!!s,o)).fa=t,i.push(e)),e};var zf="closure_lm_"+(1e6*Math.random()|0),jf={};function rd(i,e,t,s,o){if(s&&s.once)return Br(i,e,t,s,o);if(Array.isArray(e)){for(var a=0;a<e.length;a++)rd(i,e[a],t,s,o);return null}return t=gh(t),i&&i[nd]?i.N(e,t,go(s)?!!s.capture:!!s,o):Wf(i,e,t,!1,s,o)}function Wf(i,e,t,s,o,a){if(!e)throw Error("Invalid event type");var l=go(o)?!!o.capture:!!o,h=ph(i);if(h||(i[zf]=h=new id(i)),(t=h.add(e,t,s,l,a)).proxy)return t;if(s=function _l(){var e=fh;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)Uf||(o=l),void 0===o&&(o=!1),i.addEventListener(e.toString(),s,o);else if(i.attachEvent)i.attachEvent(qf(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function Br(i,e,t,s,o){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Br(i,e[a],t,s,o);return null}return t=gh(t),i&&i[nd]?i.O(e,t,go(s)?!!s.capture:!!s,o):Wf(i,e,t,!0,s,o)}function qg(i,e,t,s,o){if(Array.isArray(e))for(var a=0;a<e.length;a++)qg(i,e[a],t,s,o);else s=go(s)?!!s.capture:!!s,t=gh(t),i&&i[nd]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Hf(a=i.g[e],t,s,o))&&(qc(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete i.g[e],i.h--))):i&&(i=ph(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Hf(e,t,s,o)),(t=-1<i?e[i]:null)&&Yg(t))}function Yg(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[nd])Gf(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(qf(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=ph(e))?(Gf(t,i),0==t.h&&(t.src=null,e[zf]=null)):qc(i)}}}function qf(i){return i in jf?jf[i]:jf[i]="on"+i}function fh(i,e){if(i.ca)i=!0;else{e=new td(e,this);var t=i.listener,s=i.ia||i.src;i.fa&&Yg(i),i=t.call(s,e)}return i}function ph(i){return(i=i[zf])instanceof id?i:null}var sd="__closure_events_fn_"+(1e9*Math.random()>>>0);function gh(i){return"function"==typeof i?i:(i[sd]||(i[sd]=function(e){return i.handleEvent(e)}),i[sd])}function Vi(){Wl.call(this),this.i=new id(this),this.P=this,this.I=null}function Pi(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new Ms(e,i);else if(e instanceof Ms)e.target=e.target||i;else{var o=e;Ma(e=new Ms(s,i),o)}if(o=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];o=$a(l,s,!0,e)&&o}if(o=$a(l=e.g=i,s,!0,e)&&o,o=$a(l,s,!1,e)&&o,t)for(a=0;a<t.length;a++)o=$a(l=e.g=t[a],s,!1,e)&&o}function $a(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var h=l.listener,g=l.ia||l.src;l.fa&&Gf(i.i,l),o=!1!==h.call(g,s)&&o}}return o&&!s.defaultPrevented}or(Vi,Wl),Vi.prototype[nd]=!0,Vi.prototype.removeEventListener=function(i,e,t,s){qg(this,i,e,t,s)},Vi.prototype.M=function(){if(Vi.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)qc(t[s]);delete i.g[e],i.h--}}this.I=null},Vi.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},Vi.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var yl=Cn.JSON.stringify;function LC(){var i=Zc,e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var mo,bl=function(){function i(){this.h=this.g=null}return i.prototype.add=function(e,t){var s=mh.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s},i}(),mh=new(function(){function i(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return i.prototype.get=function(){var e;return 0<this.h?(this.h--,this.g=(e=this.g).next,e.next=null):e=this.i(),e},i}())(function(){return new $g},function(i){return i.reset()}),$g=function(){function i(){this.next=this.g=this.h=null}return i.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},i.prototype.reset=function(){this.next=this.g=this.h=null},i}();function Yc(i){Cn.setTimeout(function(){throw i},0)}function Zg(i,e){mo||function Ea(){var i=Cn.Promise.resolve(void 0);mo=function(){i.then(NC)}}(),$c||(mo(),$c=!0),Zc.add(i,e)}var $c=!1,Zc=new bl;function NC(){for(var i;i=LC();){try{i.h.call(i.g)}catch(t){Yc(t)}var e=mh;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}$c=!1}function Za(i,e){Vi.call(this),this.h=i||1,this.g=e||Cn,this.j=Zr(this.kb,this),this.l=Date.now()}function Kg(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function od(i,e,t){if("function"==typeof i)t&&(i=Zr(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Zr(i.handleEvent,i)}return 2147483647<Number(e)?-1:Cn.setTimeout(i,e||0)}function D_(i){i.g=od(function(){i.g=null,i.i&&(i.i=!1,D_(i))},i.j);var e=i.h;i.h=null,i.m.apply(null,e)}or(Za,Vi),(Tt=Za.prototype).da=!1,Tt.S=null,Tt.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Pi(this,"tick"),this.da&&(Kg(this),this.start()))}},Tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Tt.M=function(){Za.Z.M.call(this),Kg(this),delete this.g};var Kc=function(i){function e(t,s){var o=i.call(this)||this;return o.m=t,o.j=s,o.h=null,o.i=!1,o.g=null,o}return function RC(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}kf(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:D_(this)},e.prototype.M=function(){i.prototype.M.call(this),this.g&&(Cn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Wl);function Yf(i){Wl.call(this),this.h=i,this.g={}}or(Yf,Wl);var Ys=[];function $f(i,e,t,s){Array.isArray(t)||(t&&(Ys[0]=t.toString()),t=Ys);for(var o=0;o<t.length;o++){var a=rd(e,t[o],s||i.handleEvent,!1,i.h||i);if(!a)break;i.g[a.key]=a}}function ql(i){rb(i.g,function(e,t){this.g.hasOwnProperty(t)&&Yg(e)},i),i.g={}}function Ka(){this.g=!0}function Es(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Xg(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var o=s[1];if(Array.isArray(o)&&!(1>o.length)){var a=o[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<o.length;l++)o[l]=""}}}return yl(t)}catch(h){return e}}(i,t)+(s?" "+s:"")})}Yf.prototype.M=function(){Yf.Z.M.call(this),ql(this)},Yf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ka.prototype.Aa=function(){this.g=!1},Ka.prototype.info=function(){};var wl={},Jo=null;function Ja(){return Jo=Jo||new Vi}function ab(i){Ms.call(this,wl.Ma,i)}function ad(i){var e=Ja();Pi(e,new ab(e,i))}function lb(i,e){Ms.call(this,wl.STAT_EVENT,i),this.stat=e}function Ds(i){var e=Ja();Pi(e,new lb(e,i))}function vh(i,e){Ms.call(this,wl.Na,i),this.size=e}function $s(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Cn.setTimeout(function(){i()},e)}wl.Ma="serverreachability",or(ab,Ms),wl.STAT_EVENT="statevent",or(lb,Ms),wl.Na="timingevent",or(vh,Ms);var Qo={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},em={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Zf(){}function A_(){}Zf.prototype.h=null;var Jf,Jc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function tm(){Ms.call(this,"d")}function _h(){Ms.call(this,"c")}function nm(){}function ld(i,e,t,s){this.l=i,this.j=e,this.m=t,this.X=s||1,this.V=new Yf(this),this.P=VC,this.W=new Za(i=Ug?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new yh}function yh(){this.i=null,this.g="",this.h=!1}or(tm,Ms),or(_h,Ms),or(nm,Zf),nm.prototype.g=function(){return new XMLHttpRequest},nm.prototype.i=function(){return{}},Jf=new nm;var VC=45e3,Qf={},Qc={};function im(i,e,t){i.K=1,i.v=tu(Qa(e)),i.s=t,i.U=!0,Da(i,null)}function Da(i,e){i.F=Date.now(),As(i),i.A=Qa(i.v);var t=i.A,s=i.X;Array.isArray(s)||(s=[String(s)]),P_(t.h,"t",s),i.C=0,t=i.l.H,i.h=new yh,i.g=Sb(i.l,t?e:null,!i.s),0<i.O&&(i.L=new Kc(Zr(i.Ia,i,i.g),i.O)),$f(i.V,i.g,"readystatechange",i.gb),e=i.H?Ng(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),ad(1),function BC(i,e,t,s,o,a){i.info(function(){if(i.g)if(a)for(var l="",h=a.split("&"),g=0;g<h.length;g++){var _=h[g].split("=");if(1<_.length){var b=_[0];_=_[1];var x=b.split("_");l=2<=x.length&&"type"==x[1]?l+(b+"=")+_+"&":l+(b+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+s+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Xc(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function bh(i,e,t){for(var o,s=!0;!i.I&&i.C<t.length;){if((o=rm(i,t))==Qc){4==e&&(i.o=4,Ds(14),s=!1),Es(i.j,i.m,null,"[Incomplete Response]");break}if(o==Qf){i.o=4,Ds(15),Es(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}Es(i.j,i.m,o,null),Yl(i,o)}Xc(i)&&o!=Qc&&o!=Qf&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Ds(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ou(e),e.L=!0,Ds(11))):(Es(i.j,i.m,t,"[Invalid Chunked Response]"),xl(i),xh(i))}function rm(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?Qc:(t=Number(e.substring(t,s)),isNaN(t)?Qf:(s+=1)+t>e.length?Qc:(e=e.substr(s,t),i.C=s+t,e))}function As(i){i.Y=Date.now()+i.P,sm(i,i.P)}function sm(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=$s(Zr(i.eb,i),e)}function wh(i){i.B&&(Cn.clearTimeout(i.B),i.B=null)}function xh(i){0==i.l.G||i.I||wb(i.l,i)}function xl(i){wh(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Kg(i.W),ql(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Yl(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Dh(t.i,i)))if(t.I=i.N,!i.J&&Dh(t.i,i)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(L){s=null}if(Array.isArray(s)&&3==s.length){var o=s;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=$s(Zr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;sp(t),ru(t)}bb(t),Ds(18)}if(1>=Ta(t.i)&&t.ka){try{t.ka()}catch(L){}t.ka=void 0}}else vd(t,11)}else if((i.J||t.g==i)&&sp(t),!C_(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){var a=o[e];if(t.U=a[0],a=a[1],2==t.G)if("c"==a[0]){t.J=a[1],t.la=a[2];var l=a[3];null!=l&&(t.ma=l,t.h.info("VER="+t.ma));var h=a[4];null!=h&&(t.za=h,t.h.info("SVER="+t.za));var g=a[5];null!=g&&"number"==typeof g&&0<g&&(t.K=s=1.5*g,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;var _=i.g;if(_){var b=_.g?_.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(b){var x=s.i;!x.g&&(Nr(b,"spdy")||Nr(b,"quic")||Nr(b,"h2"))&&(x.j=x.l,x.g=new Set,x.h&&(ea(x,x.h),x.h=null))}if(s.D){var S=_.g?_.g.getResponseHeader("X-HTTP-Session-Id"):null;S&&(s.sa=S,Sn(s.F,s.D,S))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var M=i;if((s=t).oa=Cb(s,s.H?s.la:null,s.W),M.J){F_(s.i,M);var T=M,I=s.K;I&&T.setTimeout(I),T.B&&(wh(T),As(T)),s.g=M}else j_(s);0<t.l.length&&su(t)}else"stop"!=a[0]&&"close"!=a[0]||vd(t,7);else 3==t.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?vd(t,7):gd(t):"noop"!=a[0]&&t.j&&t.j.wa(a),t.A=0)}ad(4)}catch(L){}}function Ch(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(_r(i)||"string"==typeof i)Fg(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(_r(i)||"string"==typeof i){t=[];for(var s=i.length,o=0;o<s;o++)t.push(o)}else for(o in t=[],s=0,i)t[s++]=o;s=function cd(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(_r(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),o=s.length;for(var a=0;a<o;a++)e.call(void 0,s[a],t&&t[a],i)}}function Sh(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(i)if(i instanceof Sh)for(t=i.T(),s=0;s<t.length;s++)this.set(t[s],i.get(t[s]));else for(s in i)this.set(s,i[s])}function om(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var s=i.g[e];ud(i.h,s)&&(i.g[t++]=s),e++}i.g.length=t}if(i.i!=i.g.length){var o={};for(t=e=0;e<i.g.length;)ud(o,s=i.g[e])||(i.g[t++]=s,o[s]=1),e++;i.g.length=t}}function ud(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(Tt=ld.prototype).setTimeout=function(i){this.P=i},Tt.gb=function(i){i=i.target;var e=this.L;e&&3==ls(i)?e.l():this.Ia(i)},Tt.Ia=function(i){try{if(i==this.g)e:{var e=ls(this.g),t=this.g.Da(),s=this.g.ba();if(!(3>e)&&(3!=e||Ug||this.g&&(this.h.h||this.g.ga()||H_(this.g)))){this.I||4!=e||7==t||ad(8==t||0>=s?3:2),wh(this);var o=this.g.ba();this.N=o;t:if(Xc(this)){var a=H_(this.g);i="";var l=a.length,h=4==ls(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){xl(this),xh(this);var g="";break t}this.h.i=new Cn.TextDecoder}for(t=0;t<l;t++)this.h.h=!0,i+=this.h.i.decode(a[t],{stream:h&&t==l-1});a.splice(0,l),this.h.g+=i,this.C=0,g=this.h.g}else g=this.g.ga();if(this.i=200==o,function Jg(i,e,t,s,o,a,l){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,e,o),this.i){if(this.$&&!this.J){t:{if(this.g){var _,b=this.g;if((_=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C_(_)){var x=_;break t}}x=null}if(!(o=x)){this.i=!1,this.o=3,Ds(12),xl(this),xh(this);break e}Es(this.j,this.m,o,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Yl(this,o)}this.U?(bh(this,e,g),Ug&&this.i&&3==e&&($f(this.V,this.W,"tick",this.fb),this.W.start())):(Es(this.j,this.m,g,null),Yl(this,g)),4==e&&xl(this),this.i&&!this.I&&(4==e?wb(this.l,this):(this.i=!1,As(this)))}else 400==o&&0<g.indexOf("Unknown SID")?(this.o=3,Ds(12)):(this.o=0,Ds(13)),xl(this),xh(this)}}}catch(S){}},Tt.fb=function(){if(this.g){var i=ls(this.g),e=this.g.ga();this.C<e.length&&(wh(this),bh(this,i,e),this.i&&4!=i&&As(this))}},Tt.cancel=function(){this.I=!0,xl(this)},Tt.eb=function(){this.B=null;var i=Date.now();0<=i-this.Y?(function Qg(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ad(3),Ds(17)),xl(this),this.o=2,xh(this)):sm(this,this.Y-i)},(Tt=Sh.prototype).R=function(){om(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},Tt.T=function(){return om(this),this.g.concat()},Tt.get=function(i,e){return ud(this.h,i)?this.h[i]:e},Tt.set=function(i,e){ud(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},Tt.forEach=function(i,e){for(var t=this.T(),s=0;s<t.length;s++){var o=t[s],a=this.get(o);i.call(e,a,o,this)}};var cb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function dd(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof dd){this.g=void 0!==e?e:i.g,eu(this,i.j),this.s=i.s,Mh(this,i.i),$l(this,i.m),this.l=i.l,e=i.h;var t=new Xo;t.i=e.i,e.g&&(t.g=new Sh(e.g),t.h=e.h),T_(this,t),this.o=i.o}else i&&(t=String(i).match(cb))?(this.g=!!e,eu(this,t[1]||"",!0),this.s=Aa(t[2]||""),Mh(this,t[3]||"",!0),$l(this,t[4]),this.l=Aa(t[5]||"",!0),T_(this,t[6]||"",!0),this.o=Aa(t[7]||"")):(this.g=!!e,this.h=new Xo(null,this.g))}function Qa(i){return new dd(i)}function eu(i,e,t){i.j=t?Aa(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Mh(i,e,t){i.i=t?Aa(e,!0):e}function $l(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function T_(i,e,t){e instanceof Xo?(i.h=e,function nu(i,e){e&&!i.j&&(fr(i),i.i=null,i.g.forEach(function(t,s){var o=s.toLowerCase();s!=o&&(hd(this,s),P_(this,o,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Zl(e,HC)),i.h=new Xo(e,i.g))}function Sn(i,e,t){i.h.set(e,t)}function tu(i){return Sn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Aa(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Zl(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,am),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function am(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}dd.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Zl(e,ub,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Zl(e,ub,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Zl(t,"/"==t.charAt(0)?db:I_,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Zl(t,R_)),i.join("")};var ub=/[#\/\?@]/g,I_=/[#\?:]/g,db=/[#\?]/g,HC=/[#\?@]/g,R_=/#/g;function Xo(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function fr(i){i.g||(i.g=new Sh,i.h=0,i.i&&function UC(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),o=null;if(0<=s){var a=i[t].substring(0,s);o=i[t].substring(s+1)}else a=i[t];e(a,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function hd(i,e){fr(i),e=Ar(i,e),ud(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,ud((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&om(i)))}function Xf(i,e){return fr(i),e=Ar(i,e),ud(i.g.h,e)}function P_(i,e,t){hd(i,e),0<t.length&&(i.i=null,i.g.set(Ar(i,e),ib(t)),i.h+=t.length)}function Ar(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}(Tt=Xo.prototype).add=function(i,e){fr(this),this.i=null,i=Ar(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Tt.forEach=function(i,e){fr(this),this.g.forEach(function(t,s){Fg(t,function(o){i.call(e,o,s,this)},this)},this)},Tt.T=function(){fr(this);for(var i=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var o=i[s],a=0;a<o.length;a++)t.push(e[s]);return t},Tt.R=function(i){fr(this);var e=[];if("string"==typeof i)Xf(this,i)&&(e=PC(e,this.g.get(Ar(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=PC(e,i[t])}return e},Tt.set=function(i,e){return fr(this),this.i=null,Xf(this,i=Ar(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Tt.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},Tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],o=encodeURIComponent(String(s));s=this.R(s);for(var a=0;a<s.length;a++){var l=o;""!==s[a]&&(l+="="+encodeURIComponent(String(s[a]))),i.push(l)}}return this.i=i.join("&")};var k_=function i(e,t){this.h=e,this.g=t};function hb(i){this.l=i||O_,i=Cn.PerformanceNavigationTiming?0<(i=Cn.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Cn.g&&Cn.g.Ea&&Cn.g.Ea()&&Cn.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var O_=10;function Eh(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Ta(i){return i.h?1:i.g?i.g.size:0}function Dh(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ea(i,e){i.g?i.g.add(e):i.h=e}function F_(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function fb(i){var e,t;if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){var s=i.i;try{for(var o=nb(i.g.values()),a=o.next();!a.done;a=o.next())s=s.concat(a.value.D)}catch(h){e={error:h}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return s}return ib(i.i)}function L_(){}function N_(){this.g=new L_}function pb(i,e,t){var s=t||"";try{Ch(i,function(o,a){var l=o;go(o)&&(l=yl(o)),e.push(s+a+"="+encodeURIComponent(l))})}catch(o){throw e.push(s+"type="+encodeURIComponent("_badmap")),o}}function iu(i,e,t,s,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(s)}catch(a){}}function Ah(i){this.l=i.$b||null,this.j=i.ib||!1}function ep(i,e){Vi.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=fd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hb.prototype.cancel=function(){var i,e;if(this.i=fb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var t=nb(this.g.values()),s=t.next();!s.done;s=t.next())s.value.cancel()}catch(a){i={error:a}}finally{try{s&&!s.done&&(e=t.return)&&e.call(t)}finally{if(i)throw i.error}}this.g.clear()}},L_.prototype.stringify=function(i){return Cn.JSON.stringify(i,void 0)},L_.prototype.parse=function(i){return Cn.JSON.parse(i,void 0)},or(Ah,Zf),Ah.prototype.g=function(){return new ep(this.l,this.j)},Ah.prototype.i=function(i){return function(){return i}}({}),or(ep,Vi);var fd=0;function B_(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function tp(i){i.readyState=4,i.l=null,i.j=null,i.A=null,np(i)}function np(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Tt=ep.prototype).open=function(i,e){if(this.readyState!=fd)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,np(this)},Tt.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Cn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tp(this)),this.readyState=fd},Tt.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,np(this)),this.g&&(this.readyState=3,np(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Cn.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;B_(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},Tt.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?tp(this):np(this),3==this.readyState&&B_(this)}},Tt.Ua=function(i){this.g&&(this.response=this.responseText=i,tp(this))},Tt.Ta=function(i){this.g&&(this.response=i,tp(this))},Tt.ha=function(){this.g&&tp(this)},Tt.setRequestHeader=function(i,e){this.v.append(i,e)},Tt.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Tt.getAllResponseHeaders=function(){if(!this.h)return"";for(var i=[],e=this.h.entries(),t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(ep.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var gb=Cn.JSON.parse;function Zi(i){Vi.call(this),this.headers=new Sh,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=cm,this.K=this.L=!1}or(Zi,Vi);var cm="",zC=/^https?$/i,jC=["POST","PUT"];function V_(i){return"content-type"==i.toLowerCase()}function U_(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,mb(i),ip(i)}function mb(i){i.D||(i.D=!0,Pi(i,"complete"),Pi(i,"error"))}function G_(i){if(i.h&&void 0!==Ff&&(!i.C[1]||4!=ls(i)||2!=i.ba()))if(i.v&&4==ls(i))od(i.Fa,0,i);else if(Pi(i,"readystatechange"),4==ls(i)){i.h=!1;try{var s,e=i.ba();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}if(!(s=t)){var o;if(o=0===e){var a=String(i.H).match(cb)[1]||null;if(!a&&Cn.self&&Cn.self.location){var l=Cn.self.location.protocol;a=l.substr(0,l.length-1)}o=!zC.test(a?a.toLowerCase():"")}s=o}if(s)Pi(i,"complete"),Pi(i,"success");else{i.m=6;try{var h=2<ls(i)?i.g.statusText:""}catch(g){h=""}i.j=h+" ["+i.ba()+"]",mb(i)}}finally{ip(i)}}}function ip(i,e){if(i.g){pd(i);var t=i.g,s=i.C[0]?Ut:null;i.g=null,i.C=null,e||Pi(i,"ready");try{t.onreadystatechange=s}catch(o){}}}function pd(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Cn.clearTimeout(i.A),i.A=null)}function ls(i){return i.g?i.g.readyState:0}function H_(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case cm:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function rp(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function vb(i){var e="";return rb(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Sn(i,e,t))}function Th(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function ta(i){this.za=0,this.l=[],this.h=new Ka,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Th("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Th("baseRetryDelayMs",5e3,i),this.$a=Th("retryDelaySeedMs",1e4,i),this.Ya=Th("forwardChannelMaxRetries",2,i),this.ra=Th("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new hb(i&&i.concurrentRequestLimit),this.Ca=new N_,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function gd(i){if(_b(i),3==i.G){var e=i.V++,t=Qa(i.F);Sn(t,"SID",i.J),Sn(t,"RID",e),Sn(t,"TYPE","terminate"),md(i,t),(e=new ld(i,i.h,e,void 0)).K=2,e.v=tu(Qa(t)),t=!1,Cn.navigator&&Cn.navigator.sendBeacon&&(t=Cn.navigator.sendBeacon(e.v.toString(),"")),!t&&Cn.Image&&((new Image).src=e.v,t=!0),t||(e.g=Sb(e.l,null),e.g.ea(e.v)),e.F=Date.now(),As(e)}xb(i)}function ru(i){i.g&&(ou(i),i.g.cancel(),i.g=null)}function _b(i){ru(i),i.u&&(Cn.clearTimeout(i.u),i.u=null),sp(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Cn.clearTimeout(i.m),i.m=null)}function um(i,e){i.l.push(new k_(i.Za++,e)),3==i.G&&su(i)}function su(i){Eh(i.i)||i.m||(i.m=!0,Zg(i.Ha,i),i.C=0)}function z_(i,e){var t;t=e?e.m:i.V++;var s=Qa(i.F);Sn(s,"SID",i.J),Sn(s,"RID",t),Sn(s,"AID",i.U),md(i,s),i.o&&i.s&&rp(s,i.o,i.s),t=new ld(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=dm(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),ea(i.i,t),im(t,s,e)}function md(i,e){i.j&&Ch({},function(t,s){Sn(e,s,t)})}function dm(i,e,t){t=Math.min(i.l.length,t);var s=i.j?Zr(i.j.Oa,i.j,i):null;e:for(var o=i.l,a=-1;;){var l=["count="+t];-1==a?0<t?l.push("ofs="+(a=o[0].h)):a=0:l.push("ofs="+a);for(var h=!0,g=0;g<t;g++){var _=o[g].h,b=o[g].g;if(0>(_-=a))a=Math.max(0,o[g].h-100),h=!1;else try{pb(b,l,"req"+_+"_")}catch(x){s&&s(b)}}if(h){s=l.join("&");break e}}return i=i.l.splice(0,t),e.D=i,s}function j_(i){i.g||i.u||(i.Y=1,Zg(i.Ga,i),i.A=0)}function bb(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=$s(Zr(i.Ga,i),fm(i,i.A)),i.A++,0))}function ou(i){null!=i.B&&(Cn.clearTimeout(i.B),i.B=null)}function hm(i){i.g=new ld(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=Qa(i.oa);Sn(e,"RID","rpc"),Sn(e,"SID",i.J),Sn(e,"CI",i.N?"0":"1"),Sn(e,"AID",i.U),md(i,e),Sn(e,"TYPE","xmlhttp"),i.o&&i.s&&rp(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=tu(Qa(e)),t.s=null,t.U=!0,Da(t,i)}function sp(i){null!=i.v&&(Cn.clearTimeout(i.v),i.v=null)}function wb(i,e){var t=null;if(i.g==e){sp(i),ou(i),i.g=null;var s=2}else{if(!Dh(i.i,e))return;t=e.D,F_(i.i,e),s=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=i.C;Pi(s=Ja(),new vh(s,t,e,o)),su(i)}else j_(i);else if(3==(o=e.o)||0==o&&0<i.I||!(1==s&&function yb(i,e){return!(Ta(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=$s(Zr(i.Ha,i,e),fm(i,i.C)),i.C++,0)))}(i,e)||2==s&&bb(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),o){case 1:vd(i,5);break;case 4:vd(i,10);break;case 3:vd(i,6);break;default:vd(i,2)}}function fm(i,e){var t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function vd(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var s=Zr(i.jb,i);t||(t=new dd("//www.google.com/images/cleardot.gif"),Cn.location&&"http"==Cn.location.protocol||eu(t,"https"),tu(t)),function lm(i,e){var t=new Ka;if(Cn.Image){var s=new Image;s.onload=zc(iu,t,s,"TestLoadImage: loaded",!0,e),s.onerror=zc(iu,t,s,"TestLoadImage: error",!1,e),s.onabort=zc(iu,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=zc(iu,t,s,"TestLoadImage: timeout",!1,e),Cn.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else Ds(2);i.G=0,i.j&&i.j.va(e),xb(i),_b(i)}function xb(i){i.G=0,i.I=-1,i.j&&((0!=fb(i.i).length||0!=i.l.length)&&(i.i.i.length=0,ib(i.l),i.l.length=0),i.j.ua())}function Cb(i,e,t){var s=function GC(i){return i instanceof dd?Qa(i):new dd(i,void 0)}(t);if(""!=s.i)e&&Mh(s,e+"."+s.i),$l(s,s.m);else{var o=Cn.location;s=function Xa(i,e,t,s){var o=new dd(null,void 0);return i&&eu(o,i),e&&Mh(o,e),t&&$l(o,t),s&&(o.l=s),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return i.aa&&rb(i.aa,function(a,l){Sn(s,l,a)}),t=i.sa,(e=i.D)&&t&&Sn(s,e,t),Sn(s,"VER",i.ma),md(i,s),s}function Sb(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Zi(t&&i.Ba&&!i.qa?new Ah({ib:!0}):i.qa)).L=i.H,e}function Mb(){}function op(){if(ed&&!(10<=Number(FC)))throw Error("Environmental error: no available transport.")}function vo(i,e){Vi.call(this),this.g=new ta(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!C_(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!C_(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new au(this)}function pm(i){tm.call(this);var e=i.__sm__;if(e){e:{for(var t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function W_(){_h.call(this),this.status=1}function au(i){this.g=i}(Tt=Zi.prototype).ea=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Jf.g(),this.C=function Kf(i){return i.h||(i.h=i.i())}(this.u?this.u:Jf),this.g.onreadystatechange=Zr(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(a){return void U_(this,a)}i=t||"";var o=new Sh(this.headers);s&&Ch(s,function(a,l){o.set(l,a)}),s=function Lg(i){e:{for(var e=V_,t=i.length,s="string"==typeof i?i.split(""):i,o=0;o<t;o++)if(o in s&&e.call(void 0,s[o],o,i)){e=o;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(o.T()),t=Cn.FormData&&i instanceof Cn.FormData,!(0<=Og(jC,e))||s||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pd(this),0<this.B&&((this.K=function Oo(i){return ed&&function ob(){return function Vg(i){var e=E_;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){for(var i=0,e=kC(String(as)).split("."),t=kC("9").split("."),s=Math.max(e.length,t.length),o=0;0==i&&o<s;o++){var a=e[o]||"",l=t[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;i=S_(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||S_(0==a[2].length,0==l[2].length)||S_(a[2],l[2]),a=a[3],l=l[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zr(this.pa,this)):this.A=od(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(a){U_(this,a)}},Tt.pa=function(){void 0!==Ff&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pi(this,"timeout"),this.abort(8))},Tt.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Pi(this,"complete"),Pi(this,"abort"),ip(this))},Tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ip(this,!0)),Zi.Z.M.call(this)},Tt.Fa=function(){this.s||(this.F||this.v||this.l?G_(this):this.cb())},Tt.cb=function(){G_(this)},Tt.ba=function(){try{return 2<ls(this)?this.g.status:-1}catch(i){return-1}},Tt.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Tt.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),gb(e)}},Tt.Da=function(){return this.m},Tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Tt=ta.prototype).ma=8,Tt.G=1,Tt.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},Tt.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;var e=new ld(this,this.h,i,void 0),t=this.s;if(this.P&&(t?Ma(t=Ng(t),this.P):t=this.P),null===this.o&&(e.H=t),this.ja)e:{for(var s=0,o=0;o<this.l.length;o++){var a=this.l[o];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(s+=a)){s=o;break e}if(4096===s||o===this.l.length-1){s=o+1;break e}}s=1e3}else s=1e3;s=dm(this,e,s),Sn(o=Qa(this.F),"RID",i),Sn(o,"CVER",22),this.D&&Sn(o,"X-HTTP-Session-Id",this.D),md(this,o),this.o&&t&&rp(o,this.o,t),ea(this.i,e),this.Ra&&Sn(o,"TYPE","init"),this.ja?(Sn(o,"$req",s),Sn(o,"SID","null"),e.$=!0,im(e,o,null)):im(e,o,s),this.G=2}}else 3==this.G&&(i?z_(this,i):0==this.l.length||Eh(this.i)||z_(this))},Tt.Ga=function(){if(this.u=null,hm(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=$s(Zr(this.bb,this),i)}},Tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ds(10),ru(this),hm(this))},Tt.ab=function(){null!=this.v&&(this.v=null,ru(this),bb(this),Ds(19))},Tt.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Ds(2)):(this.h.info("Failed to ping google.com"),Ds(1))},(Tt=Mb.prototype).xa=function(){},Tt.wa=function(){},Tt.va=function(){},Tt.ua=function(){},Tt.Oa=function(){},op.prototype.g=function(i,e){return new vo(i,e)},or(vo,Vi),vo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Zg(Zr(i.hb,i,e))),Ds(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Cb(i,null,i.W),su(i)},vo.prototype.close=function(){gd(this.g)},vo.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,um(this.g,e)}else this.v?((e={}).__data__=yl(i),um(this.g,e)):um(this.g,i)},vo.prototype.M=function(){this.g.j=null,delete this.j,gd(this.g),delete this.g,vo.Z.M.call(this)},or(pm,tm),or(W_,_h),or(au,Mb),au.prototype.xa=function(){Pi(this.g,"a")},au.prototype.wa=function(i){Pi(this.g,new pm(i))},au.prototype.va=function(i){Pi(this.g,new W_(i))},au.prototype.ua=function(){Pi(this.g,"b")},op.prototype.createWebChannel=op.prototype.g,vo.prototype.send=vo.prototype.u,vo.prototype.open=vo.prototype.m,vo.prototype.close=vo.prototype.close,Qo.NO_ERROR=0,Qo.TIMEOUT=8,Qo.HTTP_ERROR=6,em.COMPLETE="complete",A_.EventType=Jc,Jc.OPEN="a",Jc.CLOSE="b",Jc.ERROR="c",Jc.MESSAGE="d",Vi.prototype.listen=Vi.prototype.N,Zi.prototype.listenOnce=Zi.prototype.O,Zi.prototype.getLastError=Zi.prototype.La,Zi.prototype.getLastErrorCode=Zi.prototype.Da,Zi.prototype.getStatus=Zi.prototype.ba,Zi.prototype.getResponseJson=Zi.prototype.Qa,Zi.prototype.getResponseText=Zi.prototype.ga,Zi.prototype.send=Zi.prototype.ea;var ap=Qo,q_=em,Kl=wl,gm_PROXY=10,gm_NOPROXY=11,Y_=Ah,lp=A_,cp=Zi,Zs=function(){function i(e,t){var s=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(o){return s.t(o)},this.i=function(o){return t.writeSequenceNumber(o)})}return i.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},i.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},i}();Zs.o=-1;var Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},it=function(i){function e(t,s){var o=this;return(o=i.call(this,s)||this).code=t,o.message=s,o.name="FirebaseError",o.toString=function(){return o.name+": [code="+o.code+"]: "+o.message},o}return(0,q.ZT)(e,i),e}(Error),Ia=new Sa.Yd("@firebase/firestore");function Ih(){return Ia.logLevel}function gt(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(Ia.logLevel<=Sa.in.DEBUG){var s=e.map(yd);Ia.debug.apply(Ia,(0,q.ev)(["Firestore (8.10.0): "+i],s))}}function Tr(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(Ia.logLevel<=Sa.in.ERROR){var s=e.map(yd);Ia.error.apply(Ia,(0,q.ev)(["Firestore (8.10.0): "+i],s))}}function _d(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(Ia.logLevel<=Sa.in.WARN){var s=e.map(yd);Ia.warn.apply(Ia,(0,q.ev)(["Firestore (8.10.0): "+i],s))}}function yd(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function Kt(i){void 0===i&&(i="Unexpected state");var e="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+i;throw Tr(e),new Error(e)}function an(i,e){i||Kt()}function _t(i,e){return i}function mm(i){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(var s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}var $_=function(){function i(){}return i.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,s="";s.length<20;)for(var o=mm(40),a=0;a<o.length;++a)s.length<20&&o[a]<t&&(s+=e.charAt(o[a]%e.length));return s},i}();function Kn(i,e){return i<e?-1:i>e?1:0}function lu(i,e,t){return i.length===e.length&&i.every(function(s,o){return t(s,e[o])})}function up(i){return i+"\0"}var Kr=function(){function i(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new it(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new it(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new it(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new it(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return i.now=function(){return i.fromMillis(Date.now())},i.fromDate=function(e){return i.fromMillis(e.getTime())},i.fromMillis=function(e){var t=Math.floor(e/1e3);return new i(t,Math.floor(1e6*(e-1e3*t)))},i.prototype.toDate=function(){return new Date(this.toMillis())},i.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},i.prototype._compareTo=function(e){return this.seconds===e.seconds?Kn(this.nanoseconds,e.nanoseconds):Kn(this.seconds,e.seconds)},i.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},i.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},i.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},i.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},i}(),Yn=function(){function i(e){this.timestamp=e}return i.fromTimestamp=function(e){return new i(e)},i.min=function(){return new i(new Kr(0,0))},i.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},i.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},i.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},i.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},i.prototype.toTimestamp=function(){return this.timestamp},i}();function Z_(i){var e=0;for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function cu(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function vm(i){for(var e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}var K_=function(){function i(e,t,s){void 0===t?t=0:t>e.length&&Kt(),void 0===s?s=e.length-t:s>e.length-t&&Kt(),this.segments=e,this.offset=t,this.len=s}return Object.defineProperty(i.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(e){return 0===i.comparator(this,e)},i.prototype.child=function(e){var t=this.segments.slice(this.offset,this.limit());return e instanceof i?e.forEach(function(s){t.push(s)}):t.push(e),this.construct(t)},i.prototype.limit=function(){return this.offset+this.length},i.prototype.popFirst=function(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)},i.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},i.prototype.firstSegment=function(){return this.segments[this.offset]},i.prototype.lastSegment=function(){return this.get(this.length-1)},i.prototype.get=function(e){return this.segments[this.offset+e]},i.prototype.isEmpty=function(){return 0===this.length},i.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},i.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},i.prototype.forEach=function(e){for(var t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])},i.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},i.comparator=function(e,t){for(var s=Math.min(e.length,t.length),o=0;o<s;o++){var a=e.get(o),l=t.get(o);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0},i}(),mi=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,q.ZT)(e,i),e.prototype.construct=function(t,s,o){return new e(t,s,o)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];for(var o=[],a=0,l=t;a<l.length;a++){var h=l[a];if(h.indexOf("//")>=0)throw new it(Ee.INVALID_ARGUMENT,"Invalid segment ("+h+"). Paths must not contain // in them.");o.push.apply(o,h.split("/").filter(function(g){return g.length>0}))}return new e(o)},e.emptyPath=function(){return new e([])},e}(K_),Ra=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Pa=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,q.ZT)(e,i),e.prototype.construct=function(t,s,o){return new e(t,s,o)},e.isValidIdentifier=function(t){return Ra.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var s=[],o="",a=0,l=function(){if(0===o.length)throw new it(Ee.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");s.push(o),o=""},h=!1;a<t.length;){var g=t[a];if("\\"===g){if(a+1===t.length)throw new it(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var _=t[a+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new it(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=_,a+=2}else"`"===g?(h=!h,a++):"."!==g||h?(o+=g,a++):(l(),a++)}if(l(),h)throw new it(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(s)},e.emptyPath=function(){return new e([])},e}(K_),uu=function(){function i(e){this.fields=e,e.sort(Pa.comparator)}return i.prototype.covers=function(e){for(var t=0,s=this.fields;t<s.length;t++)if(s[t].isPrefixOf(e))return!0;return!1},i.prototype.isEqual=function(e){return lu(this.fields,e.fields,function(t,s){return t.isEqual(s)})},i}(),Ks=function(){function i(e){this.binaryString=e}return i.fromBase64String=function(e){return new i(atob(e))},i.fromUint8Array=function(e){return new i(function(t){for(var s="",o=0;o<t.length;++o)s+=String.fromCharCode(t[o]);return s}(e))},i.prototype.toBase64=function(){return btoa(this.binaryString)},i.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)},i.prototype.approximateByteSize=function(){return 2*this.binaryString.length},i.prototype.compareTo=function(e){return Kn(this.binaryString,e.binaryString)},i.prototype.isEqual=function(e){return this.binaryString===e.binaryString},i}();Ks.EMPTY_BYTE_STRING=new Ks("");var J_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jl(i){if(an(!!i),"string"==typeof i){var e=0,t=J_.exec(i);if(an(!!t),t[1]){var s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}var o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:br(i.seconds),nanos:br(i.nanos)}}function br(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function bd(i){return"string"==typeof i?Ks.fromBase64String(i):Ks.fromUint8Array(i)}function _m(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ym(i){var e=i.mapValue.fields.__previous_value__;return _m(e)?ym(e):e}function du(i){var e=Jl(i.mapValue.fields.__local_write_time__.timestampValue);return new Kr(e.seconds,e.nanos)}function dn(i){return null==i}function Ql(i){return 0===i&&1/i==-1/0}function wd(i){return"number"==typeof i&&Number.isInteger(i)&&!Ql(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}var $t=function(){function i(e){this.path=e}return i.fromPath=function(e){return new i(mi.fromString(e))},i.fromName=function(e){return new i(mi.fromString(e).popFirst(5))},i.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},i.prototype.isEqual=function(e){return null!==e&&0===mi.comparator(this.path,e.path)},i.prototype.toString=function(){return this.path.toString()},i.comparator=function(e,t){return mi.comparator(e.path,t.path)},i.isDocumentKey=function(e){return e.length%2==0},i.fromSegments=function(e){return new i(new mi(e.slice()))},i}();function el(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?_m(i)?4:10:Kt()}function Ir(i,e){var o,t=el(i);if(t!==el(e))return!1;switch(t){case 0:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return du(i).isEqual(du(e));case 3:return function(s,o){if("string"==typeof s.timestampValue&&"string"==typeof o.timestampValue&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;var a=Jl(s.timestampValue),l=Jl(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return o=e,bd(i.bytesValue).isEqual(bd(o.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,o){return br(s.geoPointValue.latitude)===br(o.geoPointValue.latitude)&&br(s.geoPointValue.longitude)===br(o.geoPointValue.longitude)}(i,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return br(s.integerValue)===br(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){var a=br(s.doubleValue),l=br(o.doubleValue);return a===l?Ql(a)===Ql(l):isNaN(a)&&isNaN(l)}return!1}(i,e);case 9:return lu(i.arrayValue.values||[],e.arrayValue.values||[],Ir);case 10:return function(s,o){var a=s.mapValue.fields||{},l=o.mapValue.fields||{};if(Z_(a)!==Z_(l))return!1;for(var h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!Ir(a[h],l[h])))return!1;return!0}(i,e);default:return Kt()}}function Rh(i,e){return void 0!==(i.values||[]).find(function(t){return Ir(t,e)})}function xd(i,e){var o,a,l,h,t=el(i),s=el(e);if(t!==s)return Kn(t,s);switch(t){case 0:return 0;case 1:return Kn(i.booleanValue,e.booleanValue);case 2:return a=e,(l=br((o=i).integerValue||o.doubleValue))<(h=br(a.integerValue||a.doubleValue))?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1;case 3:return dp(i.timestampValue,e.timestampValue);case 4:return dp(du(i),du(e));case 5:return Kn(i.stringValue,e.stringValue);case 6:return function(o,a){var l=bd(o),h=bd(a);return l.compareTo(h)}(i.bytesValue,e.bytesValue);case 7:return function(o,a){for(var l=o.split("/"),h=a.split("/"),g=0;g<l.length&&g<h.length;g++){var _=Kn(l[g],h[g]);if(0!==_)return _}return Kn(l.length,h.length)}(i.referenceValue,e.referenceValue);case 8:return function(o,a){var l=Kn(br(o.latitude),br(a.latitude));return 0!==l?l:Kn(br(o.longitude),br(a.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(o,a){for(var l=o.values||[],h=a.values||[],g=0;g<l.length&&g<h.length;++g){var _=xd(l[g],h[g]);if(_)return _}return Kn(l.length,h.length)}(i.arrayValue,e.arrayValue);case 10:return function(o,a){var l=o.fields||{},h=Object.keys(l),g=a.fields||{},_=Object.keys(g);h.sort(),_.sort();for(var b=0;b<h.length&&b<_.length;++b){var x=Kn(h[b],_[b]);if(0!==x)return x;var S=xd(l[h[b]],g[_[b]]);if(0!==S)return S}return Kn(h.length,_.length)}(i.mapValue,e.mapValue);default:throw Kt()}}function dp(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Kn(i,e);var t=Jl(i),s=Jl(e),o=Kn(t.seconds,s.seconds);return 0!==o?o:Kn(t.nanos,s.nanos)}function _o(i){return hu(i)}function hu(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(o=Jl(i.timestampValue)).seconds+","+o.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?bd(i.bytesValue).toBase64():"referenceValue"in i?$t.fromName(i.referenceValue).toString():"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(s){for(var o="[",a=!0,l=0,h=s.values||[];l<h.length;l++)a?a=!1:o+=",",o+=hu(h[l]);return o+"]"}(i.arrayValue):"mapValue"in i?function(s){for(var o="{",a=!0,l=0,h=Object.keys(s.fields||{}).sort();l<h.length;l++){var g=h[l];a?a=!1:o+=",",o+=g+":"+hu(s.fields[g])}return o+"}"}(i.mapValue):Kt();var o,e}function Ph(i,e){return{referenceValue:"projects/"+i.projectId+"/databases/"+i.database+"/documents/"+e.path.canonicalString()}}function hp(i){return!!i&&"integerValue"in i}function bm(i){return!!i&&"arrayValue"in i}function fp(i){return!!i&&"nullValue"in i}function Tb(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Cd(i){return!!i&&"mapValue"in i}function fu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){var e={mapValue:{fields:{}}};return cu(i.mapValue.fields,function(o,a){return e.mapValue.fields[o]=fu(a)}),e}if(i.arrayValue){for(var t={arrayValue:{values:[]}},s=0;s<(i.arrayValue.values||[]).length;++s)t.arrayValue.values[s]=fu(i.arrayValue.values[s]);return t}return Object.assign({},i)}var Ts=function(){function i(e){this.value=e}return i.empty=function(){return new i({mapValue:{}})},i.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,s=0;s<e.length-1;++s)if(!Cd(t=(t.mapValue.fields||{})[e.get(s)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},i.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(t)},i.prototype.setAll=function(e){var t=this,s=Pa.emptyPath(),o={},a=[];e.forEach(function(h,g){if(!s.isImmediateParentOf(g)){var _=t.getFieldsMap(s);t.applyChanges(_,o,a),o={},a=[],s=g.popLast()}h?o[g.lastSegment()]=fu(h):a.push(g.lastSegment())});var l=this.getFieldsMap(s);this.applyChanges(l,o,a)},i.prototype.delete=function(e){var t=this.field(e.popLast());Cd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},i.prototype.isEqual=function(e){return Ir(this.value,e.value)},i.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var s=0;s<e.length;++s){var o=t.mapValue.fields[e.get(s)];Cd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields},i.prototype.applyChanges=function(e,t,s){cu(t,function(h,g){return e[h]=g});for(var o=0,a=s;o<a.length;o++)delete e[a[o]]},i.prototype.clone=function(){return new i(fu(this.value))},i}();function wm(i){var e=[];return cu(i.fields,function(t,s){var o=new Pa([t]);if(Cd(s)){var a=wm(s.mapValue).fields;if(0===a.length)e.push(o);else for(var l=0,h=a;l<h.length;l++)e.push(o.child(h[l]))}else e.push(o)}),new uu(e)}var Jr=function(){function i(e,t,s,o,a){this.key=e,this.documentType=t,this.version=s,this.data=o,this.documentState=a}return i.newInvalidDocument=function(e){return new i(e,0,Yn.min(),Ts.empty(),0)},i.newFoundDocument=function(e,t,s){return new i(e,1,t,s,0)},i.newNoDocument=function(e,t){return new i(e,2,t,Ts.empty(),0)},i.newUnknownDocument=function(e,t){return new i(e,3,t,Ts.empty(),2)},i.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},i.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=Ts.empty(),this.documentState=0,this},i.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=Ts.empty(),this.documentState=2,this},i.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},i.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(i.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),i.prototype.isValidDocument=function(){return 0!==this.documentType},i.prototype.isFoundDocument=function(){return 1===this.documentType},i.prototype.isNoDocument=function(){return 2===this.documentType},i.prototype.isUnknownDocument=function(){return 3===this.documentType},i.prototype.isEqual=function(e){return e instanceof i&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},i.prototype.clone=function(){return new i(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},i.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},i}(),MD=function(i,e,t,s,o,a,l){void 0===e&&(e=null),void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===o&&(o=null),void 0===a&&(a=null),void 0===l&&(l=null),this.path=i,this.collectionGroup=e,this.orderBy=t,this.filters=s,this.limit=o,this.startAt=a,this.endAt=l,this.h=null};function Ib(i,e,t,s,o,a,l){return void 0===e&&(e=null),void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===o&&(o=null),void 0===a&&(a=null),void 0===l&&(l=null),new MD(i,e,t,s,o,a,l)}function Cl(i){var e=_t(i);if(null===e.h){var t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(s){return(o=s).field.canonicalString()+o.op.toString()+_o(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(function(s){return(o=s).field.canonicalString()+o.dir;var o}).join(","),dn(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=X_(e.startAt)),e.endAt&&(t+="|ub:",t+=X_(e.endAt)),e.h=t}return e.h}function xm(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<i.orderBy.length;t++)if(!DD(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(var s=0;s<i.filters.length;s++)if((o=i.filters[s]).op!==(a=e.filters[s]).op||!o.field.isEqual(a.field)||!Ir(o.value,a.value))return!1;var o,a;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Mm(i.startAt,e.startAt)&&Mm(i.endAt,e.endAt)}function pp(i){return $t.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}var Js=function(i){function e(t,s,o){var a=this;return(a=i.call(this)||this).field=t,a.op=s,a.value=o,a}return(0,q.ZT)(e,i),e.create=function(t,s,o){return t.isKeyField()?"in"===s||"not-in"===s?this.l(t,s,o):new Cm(t,s,o):"array-contains"===s?new Md(t,o):"in"===s?new WC(t,o):"not-in"===s?new mp(t,o):"array-contains-any"===s?new ED(t,o):new e(t,s,o)},e.l=function(t,s,o){return"in"===s?new Sd(t,o):new gp(t,o)},e.prototype.matches=function(t){var s=t.data.field(this.field);return"!="===this.op?null!==s&&this.m(xd(s,this.value)):null!==s&&el(this.value)===el(s)&&this.m(xd(s,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Kt()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Cm=function(i){function e(t,s,o){var a=this;return(a=i.call(this,t,s,o)||this).key=$t.fromName(o.referenceValue),a}return(0,q.ZT)(e,i),e.prototype.matches=function(t){var s=$t.comparator(t.key,this.key);return this.m(s)},e}(Js),Sd=function(i){function e(t,s){var o=this;return(o=i.call(this,t,"in",s)||this).keys=Q_(0,s),o}return(0,q.ZT)(e,i),e.prototype.matches=function(t){return this.keys.some(function(s){return s.isEqual(t.key)})},e}(Js),gp=function(i){function e(t,s){var o=this;return(o=i.call(this,t,"not-in",s)||this).keys=Q_(0,s),o}return(0,q.ZT)(e,i),e.prototype.matches=function(t){return!this.keys.some(function(s){return s.isEqual(t.key)})},e}(Js);function Q_(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(function(s){return $t.fromName(s.referenceValue)})}var Md=function(i){function e(t,s){return i.call(this,t,"array-contains",s)||this}return(0,q.ZT)(e,i),e.prototype.matches=function(t){var s=t.data.field(this.field);return bm(s)&&Rh(s.arrayValue,this.value)},e}(Js),WC=function(i){function e(t,s){return i.call(this,t,"in",s)||this}return(0,q.ZT)(e,i),e.prototype.matches=function(t){var s=t.data.field(this.field);return null!==s&&Rh(this.value.arrayValue,s)},e}(Js),mp=function(i){function e(t,s){return i.call(this,t,"not-in",s)||this}return(0,q.ZT)(e,i),e.prototype.matches=function(t){if(Rh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var s=t.data.field(this.field);return null!==s&&!Rh(this.value.arrayValue,s)},e}(Js),ED=function(i){function e(t,s){return i.call(this,t,"array-contains-any",s)||this}return(0,q.ZT)(e,i),e.prototype.matches=function(t){var s=this,o=t.data.field(this.field);return!(!bm(o)||!o.arrayValue.values)&&o.arrayValue.values.some(function(a){return Rh(s.value.arrayValue,a)})},e}(Js),kh=function(i,e){this.position=i,this.before=e};function X_(i){return(i.before?"b":"a")+":"+i.position.map(function(e){return _o(e)}).join(",")}var vp=function(i,e){void 0===e&&(e="asc"),this.field=i,this.dir=e};function DD(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Sm(i,e,t){for(var s=0,o=0;o<i.position.length;o++){var a=e[o],l=i.position[o];if(s=a.field.isKeyField()?$t.comparator($t.fromName(l.referenceValue),t.key):xd(l,t.data.field(a.field)),"desc"===a.dir&&(s*=-1),0!==s)break}return i.before?s<=0:s<0}function Mm(i,e){if(null===i)return null===e;if(null===e||i.before!==e.before||i.position.length!==e.position.length)return!1;for(var t=0;t<i.position.length;t++)if(!Ir(i.position[t],e.position[t]))return!1;return!0}var Xl=function(i,e,t,s,o,a,l,h){void 0===e&&(e=null),void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===o&&(o=null),void 0===a&&(a="F"),void 0===l&&(l=null),void 0===h&&(h=null),this.path=i,this.collectionGroup=e,this.explicitOrderBy=t,this.filters=s,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=h,this.p=null,this.T=null};function qC(i,e,t,s,o,a,l,h){return new Xl(i,e,t,s,o,a,l,h)}function Oh(i){return new Xl(i)}function na(i){return!dn(i.limit)&&"F"===i.limitType}function Ed(i){return!dn(i.limit)&&"L"===i.limitType}function _p(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Fh(i){for(var e=0,t=i.filters;e<t.length;e++){var s=t[e];if(s.g())return s.field}return null}function Lh(i){return null!==i.collectionGroup}function pu(i){var e=_t(i);if(null===e.p){e.p=[];var t=Fh(e),s=_p(e);if(null!==t&&null===s)t.isKeyField()||e.p.push(new vp(t)),e.p.push(new vp(Pa.keyField(),"asc"));else{for(var o=!1,a=0,l=e.explicitOrderBy;a<l.length;a++){var h=l[a];e.p.push(h),h.field.isKeyField()&&(o=!0)}if(!o){var g=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new vp(Pa.keyField(),g))}}}return e.p}function Fo(i){var e=_t(i);if(!e.T)if("F"===e.limitType)e.T=Ib(e.path,e.collectionGroup,pu(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var t=[],s=0,o=pu(e);s<o.length;s++){var a=o[s];t.push(new vp(a.field,"desc"===a.dir?"asc":"desc"))}var h=e.endAt?new kh(e.endAt.position,!e.endAt.before):null,g=e.startAt?new kh(e.startAt.position,!e.startAt.before):null;e.T=Ib(e.path,e.collectionGroup,t,e.filters,e.limit,h,g)}return e.T}function ey(i,e,t){return new Xl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function yo(i,e){return xm(Fo(i),Fo(e))&&i.limitType===e.limitType}function ty(i){return Cl(Fo(i))+"|lt:"+i.limitType}function ny(i){return"Query(target="+(t=(e=Fo(i)).path.canonicalString(),null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map(function(s){return(o=s).field.canonicalString()+" "+o.op+" "+_o(o.value);var o}).join(", ")+"]"),dn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map(function(s){return(o=s).field.canonicalString()+" ("+o.dir+")";var o}).join(", ")+"]"),e.startAt&&(t+=", startAt: "+X_(e.startAt)),e.endAt&&(t+=", endAt: "+X_(e.endAt)),"Target("+t+"); limitType=")+i.limitType+")";var e,t}function Dd(i,e){return e.isFoundDocument()&&(o=(s=e).key.path,null!==(t=i).collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):$t.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o))&&function(t,s){for(var o=0,a=t.explicitOrderBy;o<a.length;o++){var l=a[o];if(!l.field.isKeyField()&&null===s.data.field(l.field))return!1}return!0}(i,e)&&function(t,s){for(var o=0,a=t.filters;o<a.length;o++)if(!a[o].matches(s))return!1;return!0}(i,e)&&function(t,s){return!(t.startAt&&!Sm(t.startAt,pu(t),s)||t.endAt&&Sm(t.endAt,pu(t),s))}(i,e);var t,s,o}function iy(i){return function(e,t){for(var s=!1,o=0,a=pu(i);o<a.length;o++){var l=a[o],h=ry(l,e,t);if(0!==h)return h;s=s||l.field.isKeyField()}return 0}}function ry(i,e,t){var o,l,h,g,s=i.field.isKeyField()?$t.comparator(e.key,t.key):(l=t,h=e.data.field(o=i.field),g=l.data.field(o),null!==h&&null!==g?xd(h,g):Kt());switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Kt()}}function Em(i,e){if(i.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ql(e)?"-0":e}}function Rb(i){return{integerValue:""+i}}function Nh(i,e){return wd(e)?Rb(e):Em(i,e)}var tl=function(){this._=void 0};function sy(i,e,t){return i instanceof Lo?(a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(s=t).seconds,nanos:s.nanoseconds}}}},(o=e)&&(a.fields.__previous_value__=o),{mapValue:a}):i instanceof mu?Dm(i,e):i instanceof ec?Ad(i,e):function(s,o){var a=Bh(s,o),l=oy(a)+oy(s.A);return hp(a)&&hp(s.A)?Rb(l):Em(s.R,l)}(i,e);var s,o,a}function gu(i,e,t){return i instanceof mu?Dm(i,e):i instanceof ec?Ad(i,e):t}function Bh(i,e){return i instanceof Sl?hp(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}var Lo=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,q.ZT)(e,i),e}(tl),mu=function(i){function e(t){var s=this;return(s=i.call(this)||this).elements=t,s}return(0,q.ZT)(e,i),e}(tl);function Dm(i,e){for(var t=yp(e),s=function(l){t.some(function(h){return Ir(h,l)})||t.push(l)},o=0,a=i.elements;o<a.length;o++)s(a[o]);return{arrayValue:{values:t}}}var ec=function(i){function e(t){var s=this;return(s=i.call(this)||this).elements=t,s}return(0,q.ZT)(e,i),e}(tl);function Ad(i,e){for(var t=yp(e),s=function(l){t=t.filter(function(h){return!Ir(h,l)})},o=0,a=i.elements;o<a.length;o++)s(a[o]);return{arrayValue:{values:t}}}var Sl=function(i){function e(t,s){var o=this;return(o=i.call(this)||this).R=t,o.A=s,o}return(0,q.ZT)(e,i),e}(tl);function oy(i){return br(i.integerValue||i.doubleValue)}function yp(i){return bm(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}var Vh=function(i,e){this.field=i,this.transform=e},Am=function(i,e){this.version=i,this.transformResults=e},Qs=function(){function i(e,t){this.updateTime=e,this.exists=t}return i.none=function(){return new i},i.exists=function(e){return new i(void 0,e)},i.updateTime=function(e){return new i(e)},Object.defineProperty(i.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},i}();function Uh(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}var Td=function(){};function Pb(i,e,t){var s,o,a,l,h;i instanceof bp?(o=e,a=t,l=(s=i).value.clone(),h=Id(s.fieldTransforms,o,a.transformResults),l.setAll(h),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()):i instanceof vu?function(s,o,a){if(Uh(s.precondition,o)){var l=Id(s.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(kb(s)),h.setAll(l),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}else o.convertToUnknownDocument(a.version)}(i,e,t):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Gh(i,e,t){var o;i instanceof bp?function(s,o,a){if(Uh(s.precondition,o)){var l=s.value.clone(),h=ly(s.fieldTransforms,a,o);l.setAll(h),o.convertToFoundDocument(Is(o),l).setHasLocalMutations()}}(i,e,t):i instanceof vu?function(s,o,a){if(Uh(s.precondition,o)){var l=ly(s.fieldTransforms,a,o),h=o.data;h.setAll(kb(s)),h.setAll(l),o.convertToFoundDocument(Is(o),h).setHasLocalMutations()}}(i,e,t):Uh(i.precondition,o=e)&&o.convertToNoDocument(Yn.min())}function Tm(i,e){for(var t=null,s=0,o=i.fieldTransforms;s<o.length;s++){var a=o[s],l=e.data.field(a.field),h=Bh(a.transform,l||null);null!=h&&(null==t&&(t=Ts.empty()),t.set(a.field,h))}return t||null}function ay(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&lu(t,s,function(o,a){return(l=o).field.isEqual((h=a).field)&&(_=h.transform,(g=l.transform)instanceof mu&&_ instanceof mu||g instanceof ec&&_ instanceof ec?lu(g.elements,_.elements,Ir):g instanceof Sl&&_ instanceof Sl?Ir(g.A,_.A):g instanceof Lo&&_ instanceof Lo);var l,h,g,_})))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}function Is(i){return i.isFoundDocument()?i.version:Yn.min()}var bp=function(i){function e(t,s,o,a){void 0===a&&(a=[]);var l=this;return(l=i.call(this)||this).key=t,l.value=s,l.precondition=o,l.fieldTransforms=a,l.type=0,l}return(0,q.ZT)(e,i),e}(Td),vu=function(i){function e(t,s,o,a,l){void 0===l&&(l=[]);var h=this;return(h=i.call(this)||this).key=t,h.data=s,h.fieldMask=o,h.precondition=a,h.fieldTransforms=l,h.type=1,h}return(0,q.ZT)(e,i),e}(Td);function kb(i){var e=new Map;return i.fieldMask.fields.forEach(function(t){if(!t.isEmpty()){var s=i.data.field(t);e.set(t,s)}}),e}function Id(i,e,t){var s=new Map;an(i.length===t.length);for(var o=0;o<t.length;o++){var a=i[o],l=a.transform,h=e.data.field(a.field);s.set(a.field,gu(l,h,t[o]))}return s}function ly(i,e,t){for(var s=new Map,o=0,a=i;o<a.length;o++){var l=a[o],h=l.transform,g=t.data.field(l.field);s.set(l.field,sy(h,g,e))}return s}var Vr,li,_u=function(i){function e(t,s){var o=this;return(o=i.call(this)||this).key=t,o.precondition=s,o.type=2,o.fieldTransforms=[],o}return(0,q.ZT)(e,i),e}(Td),Hh=function(i){function e(t,s){var o=this;return(o=i.call(this)||this).key=t,o.precondition=s,o.type=3,o.fieldTransforms=[],o}return(0,q.ZT)(e,i),e}(Td),cy=function(i){this.count=i};function Ob(i){switch(i){case Ee.OK:return Kt();case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return Kt()}}function Im(i){if(void 0===i)return Tr("GRPC error has no .code"),Ee.UNKNOWN;switch(i){case Vr.OK:return Ee.OK;case Vr.CANCELLED:return Ee.CANCELLED;case Vr.UNKNOWN:return Ee.UNKNOWN;case Vr.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case Vr.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case Vr.INTERNAL:return Ee.INTERNAL;case Vr.UNAVAILABLE:return Ee.UNAVAILABLE;case Vr.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case Vr.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case Vr.NOT_FOUND:return Ee.NOT_FOUND;case Vr.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case Vr.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case Vr.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case Vr.ABORTED:return Ee.ABORTED;case Vr.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case Vr.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case Vr.DATA_LOSS:return Ee.DATA_LOSS;default:return Kt()}}(li=Vr||(Vr={}))[li.OK=0]="OK",li[li.CANCELLED=1]="CANCELLED",li[li.UNKNOWN=2]="UNKNOWN",li[li.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",li[li.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",li[li.NOT_FOUND=5]="NOT_FOUND",li[li.ALREADY_EXISTS=6]="ALREADY_EXISTS",li[li.PERMISSION_DENIED=7]="PERMISSION_DENIED",li[li.UNAUTHENTICATED=16]="UNAUTHENTICATED",li[li.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",li[li.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",li[li.ABORTED=10]="ABORTED",li[li.OUT_OF_RANGE=11]="OUT_OF_RANGE",li[li.UNIMPLEMENTED=12]="UNIMPLEMENTED",li[li.INTERNAL=13]="INTERNAL",li[li.UNAVAILABLE=14]="UNAVAILABLE",li[li.DATA_LOSS=15]="DATA_LOSS";var cs=function(){function i(e,t){this.comparator=e,this.root=t||nl.EMPTY}return i.prototype.insert=function(e,t){return new i(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nl.BLACK,null,null))},i.prototype.remove=function(e){return new i(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nl.BLACK,null,null))},i.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null},i.prototype.indexOf=function(e){for(var t=0,s=this.root;!s.isEmpty();){var o=this.comparator(e,s.key);if(0===o)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1},i.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(i.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),i.prototype.minKey=function(){return this.root.minKey()},i.prototype.maxKey=function(){return this.root.maxKey()},i.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},i.prototype.forEach=function(e){this.inorderTraversal(function(t,s){return e(t,s),!1})},i.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,s){return e.push(t+":"+s),!1}),"{"+e.join(", ")+"}"},i.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},i.prototype.getIterator=function(){return new wp(this.root,null,this.comparator,!1)},i.prototype.getIteratorFrom=function(e){return new wp(this.root,e,this.comparator,!1)},i.prototype.getReverseIterator=function(){return new wp(this.root,null,this.comparator,!0)},i.prototype.getReverseIteratorFrom=function(e){return new wp(this.root,e,this.comparator,!0)},i}(),wp=function(){function i(e,t,s,o){this.isReverse=o,this.nodeStack=[];for(var a=1;!e.isEmpty();)if(a=t?s(e.key,t):1,o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return i.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},i.prototype.hasNext=function(){return this.nodeStack.length>0},i.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},i}(),nl=function(){function i(e,t,s,o,a){this.key=e,this.value=t,this.color=null!=s?s:i.RED,this.left=null!=o?o:i.EMPTY,this.right=null!=a?a:i.EMPTY,this.size=this.left.size+1+this.right.size}return i.prototype.copy=function(e,t,s,o,a){return new i(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=o?o:this.left,null!=a?a:this.right)},i.prototype.isEmpty=function(){return!1},i.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},i.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},i.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},i.prototype.minKey=function(){return this.min().key},i.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},i.prototype.insert=function(e,t,s){var o=this,a=s(e,o.key);return(o=a<0?o.copy(null,null,null,o.left.insert(e,t,s),null):0===a?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s))).fixUp()},i.prototype.removeMin=function(){if(this.left.isEmpty())return i.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},i.prototype.remove=function(e,t){var s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return i.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()},i.prototype.isRed=function(){return this.color},i.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},i.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},i.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},i.prototype.rotateLeft=function(){var e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},i.prototype.rotateRight=function(){var e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},i.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},i.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},i.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Kt();var e=this.left.check();if(e!==this.right.check())throw Kt();return e+(this.isRed()?0:1)},i}();nl.EMPTY=null,nl.RED=!0,nl.BLACK=!1,nl.EMPTY=new(function(){function i(){this.size=0}return Object.defineProperty(i.prototype,"key",{get:function(){throw Kt()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){throw Kt()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){throw Kt()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){throw Kt()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){throw Kt()},enumerable:!1,configurable:!0}),i.prototype.copy=function(e,t,s,o,a){return this},i.prototype.insert=function(e,t,s){return new nl(e,t)},i.prototype.remove=function(e,t){return this},i.prototype.isEmpty=function(){return!0},i.prototype.inorderTraversal=function(e){return!1},i.prototype.reverseTraversal=function(e){return!1},i.prototype.minKey=function(){return null},i.prototype.maxKey=function(){return null},i.prototype.isRed=function(){return!1},i.prototype.checkMaxDepth=function(){return!0},i.prototype.check=function(){return 0},i}());var Ur=function(){function i(e){this.comparator=e,this.data=new cs(this.comparator)}return i.prototype.has=function(e){return null!==this.data.get(e)},i.prototype.first=function(){return this.data.minKey()},i.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(i.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),i.prototype.indexOf=function(e){return this.data.indexOf(e)},i.prototype.forEach=function(e){this.data.inorderTraversal(function(t,s){return e(t),!1})},i.prototype.forEachInRange=function(e,t){for(var s=this.data.getIteratorFrom(e[0]);s.hasNext();){var o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}},i.prototype.forEachWhile=function(e,t){var s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return},i.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},i.prototype.getIterator=function(){return new uy(this.data.getIterator())},i.prototype.getIteratorFrom=function(e){return new uy(this.data.getIteratorFrom(e))},i.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},i.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},i.prototype.isEmpty=function(){return this.data.isEmpty()},i.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(s){t=t.add(s)}),t},i.prototype.isEqual=function(e){if(!(e instanceof i)||this.size!==e.size)return!1;for(var t=this.data.getIterator(),s=e.data.getIterator();t.hasNext();){var o=t.getNext().key,a=s.getNext().key;if(0!==this.comparator(o,a))return!1}return!0},i.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},i.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},i.prototype.copy=function(e){var t=new i(this.comparator);return t.data=e,t},i}(),uy=function(){function i(e){this.iter=e}return i.prototype.getNext=function(){return this.iter.getNext().key},i.prototype.hasNext=function(){return this.iter.hasNext()},i}(),Fb=new cs($t.comparator);function ia(){return Fb}var dy=new cs($t.comparator);function ra(){return dy}var yu=new cs($t.comparator);function Rm(){return yu}var YC=new Ur($t.comparator);function yi(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var t=YC,s=0,o=i;s<o.length;s++){var a=o[s];t=t.add(a)}return t}var Pm=new Ur(Kn);function km(){return Pm}var xp=function(){function i(e,t,s,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=a}return i.createSynthesizedRemoteEventForCurrentChange=function(e,t){var s=new Map;return s.set(e,Cp.createSynthesizedTargetChangeForCurrentChange(e,t)),new i(Yn.min(),s,km(),ia(),yi())},i}(),Cp=function(){function i(e,t,s,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=a}return i.createSynthesizedTargetChangeForCurrentChange=function(e,t){return new i(Ks.EMPTY_BYTE_STRING,t,yi(),yi(),yi())},i}(),Rd=function(i,e,t,s){this.v=i,this.removedTargetIds=e,this.key=t,this.P=s},hy=function(i,e){this.targetId=i,this.V=e},Lb=function(i,e,t,s){void 0===t&&(t=Ks.EMPTY_BYTE_STRING),void 0===s&&(s=null),this.state=i,this.targetIds=e,this.resumeToken=t,this.cause=s},Sp=function(){function i(){this.S=0,this.D=Om(),this.C=Ks.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(i.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),i.prototype.O=function(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)},i.prototype.M=function(){var e=yi(),t=yi(),s=yi();return this.D.forEach(function(o,a){switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Kt()}}),new Cp(this.C,this.N,e,t,s)},i.prototype.L=function(){this.k=!1,this.D=Om()},i.prototype.B=function(e,t){this.k=!0,this.D=this.D.insert(e,t)},i.prototype.q=function(e){this.k=!0,this.D=this.D.remove(e)},i.prototype.U=function(){this.S+=1},i.prototype.K=function(){this.S-=1},i.prototype.j=function(){this.k=!0,this.N=!0},i}(),zh=function(){function i(e){this.W=e,this.G=new Map,this.H=ia(),this.J=Nb(),this.Y=new Ur(Kn)}return i.prototype.X=function(e){for(var t=0,s=e.v;t<s.length;t++){var o=s[t];e.P&&e.P.isFoundDocument()?this.Z(o,e.P):this.tt(o,e.key,e.P)}for(var a=0,l=e.removedTargetIds;a<l.length;a++)this.tt(o=l[a],e.key,e.P)},i.prototype.et=function(e){var t=this;this.forEachTarget(e,function(s){var o=t.nt(s);switch(e.state){case 0:t.st(s)&&o.O(e.resumeToken);break;case 1:o.K(),o.F||o.L(),o.O(e.resumeToken);break;case 2:o.K(),o.F||t.removeTarget(s);break;case 3:t.st(s)&&(o.j(),o.O(e.resumeToken));break;case 4:t.st(s)&&(t.it(s),o.O(e.resumeToken));break;default:Kt()}})},i.prototype.forEachTarget=function(e,t){var s=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach(function(o,a){s.st(a)&&t(a)})},i.prototype.rt=function(e){var t=e.targetId,s=e.V.count,o=this.ot(t);if(o){var a=o.target;if(pp(a))if(0===s){var l=new $t(a.path);this.tt(t,l,Jr.newNoDocument(l,Yn.min()))}else an(1===s);else this.ct(t)!==s&&(this.it(t),this.Y=this.Y.add(t))}},i.prototype.ut=function(e){var t=this,s=new Map;this.G.forEach(function(l,h){var g=t.ot(h);if(g){if(l.current&&pp(g.target)){var _=new $t(g.target.path);null!==t.H.get(_)||t.at(h,_)||t.tt(h,_,Jr.newNoDocument(_,e))}l.$&&(s.set(h,l.M()),l.L())}});var o=yi();this.J.forEach(function(l,h){var g=!0;h.forEachWhile(function(_){var b=t.ot(_);return!b||2===b.purpose||(g=!1,!1)}),g&&(o=o.add(l))});var a=new xp(e,s,this.Y,this.H,o);return this.H=ia(),this.J=Nb(),this.Y=new Ur(Kn),a},i.prototype.Z=function(e,t){if(this.st(e)){var s=this.at(e,t.key)?2:0;this.nt(e).B(t.key,s),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},i.prototype.tt=function(e,t,s){if(this.st(e)){var o=this.nt(e);this.at(e,t)?o.B(t,1):o.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),s&&(this.H=this.H.insert(t,s))}},i.prototype.removeTarget=function(e){this.G.delete(e)},i.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},i.prototype.U=function(e){this.nt(e).U()},i.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new Sp,this.G.set(e,t)),t},i.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new Ur(Kn),this.J=this.J.insert(e,t)),t},i.prototype.st=function(e){var t=null!==this.ot(e);return t||gt("WatchChangeAggregator","Detected inactive target",e),t},i.prototype.ot=function(e){var t=this.G.get(e);return t&&t.F?null:this.W.lt(e)},i.prototype.it=function(e){var t=this;this.G.set(e,new Sp),this.W.getRemoteKeysForTarget(e).forEach(function(s){t.tt(e,s,null)})},i.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},i}();function Nb(){return new cs($t.comparator)}function Om(){return new cs($t.comparator)}var bo={asc:"ASCENDING",desc:"DESCENDING"},Fm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fy=function(i,e){this.databaseId=i,this.I=e};function Pd(i,e){return i.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function bu(i,e){return i.I?e.toBase64():e.toUint8Array()}function Bb(i,e){return Pd(i,e.toTimestamp())}function Gr(i){return an(!!i),Yn.fromTimestamp((t=Jl(i),new Kr(t.seconds,t.nanos)));var t}function Lm(i,e){return(t=i,new mi(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Nm(i){var e=mi.fromString(i);return an(Rr(e)),e}function wu(i,e){return Lm(i.databaseId,e.path)}function sa(i,e){var t=Nm(e);if(t.get(1)!==i.databaseId.projectId)throw new it(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new it(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new $t(py(t))}function Bm(i,e){return Lm(i.databaseId,e)}function Xs(i){var e=Nm(i);return 4===e.length?mi.emptyPath():py(e)}function ka(i){return new mi(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function py(i){return an(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function gy(i,e,t){return{name:wu(i,e),fields:t.value.mapValue.fields}}function my(i,e,t){var s=sa(i,e.name),o=Gr(e.updateTime),a=new Ts({mapValue:{fields:e.fields}}),l=Jr.newFoundDocument(s,o,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function xu(i,e){var t,o;if(e instanceof bp)t={update:gy(i,e.key,e.value)};else if(e instanceof _u)t={delete:wu(i,e.key)};else if(e instanceof vu)t={update:gy(i,e.key,e.data),updateMask:Od(e.fieldMask)};else{if(!(e instanceof Hh))return Kt();t={verify:wu(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(function(s){return function(o,a){var l=a.transform;if(l instanceof Lo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof mu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ec)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Sl)return{fieldPath:a.field.canonicalString(),increment:l.A};throw Kt()}(0,s)})),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Bb(i,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Kt()),t}function Mp(i,e){var _,t=e.currentDocument?void 0!==(_=e.currentDocument).updateTime?Qs.updateTime(Gr(_.updateTime)):void 0!==_.exists?Qs.exists(_.exists):Qs.none():Qs.none(),s=e.updateTransforms?e.updateTransforms.map(function(_){return function(b,x){var S=null;"setToServerValue"in x?(an("REQUEST_TIME"===x.setToServerValue),S=new Lo):"appendMissingElements"in x?S=new mu(x.appendMissingElements.values||[]):"removeAllFromArray"in x?S=new ec(x.removeAllFromArray.values||[]):"increment"in x?S=new Sl(b,x.increment):Kt();var I=Pa.fromServerFormat(x.fieldPath);return new Vh(I,S)}(i,_)}):[];if(e.update){var o=sa(i,e.update.name),a=new Ts({mapValue:{fields:e.update.fields}});if(e.updateMask){var l=function(_){return new uu((_.fieldPaths||[]).map(function(x){return Pa.fromServerFormat(x)}))}(e.updateMask);return new vu(o,a,l,t,s)}return new bp(o,a,t,s)}if(e.delete){var h=sa(i,e.delete);return new _u(h,t)}if(e.verify){var g=sa(i,e.verify);return new Hh(g,t)}return Kt()}function Ep(i,e){return{documents:[Bm(i,e.path)]}}function oa(i,e){var t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Bm(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Bm(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);var o=function(h){if(0!==h.length){var g=h.map(function(_){return function(b){if("=="===b.op){if(Tb(b.value))return{unaryFilter:{field:Fa(b.field),op:"IS_NAN"}};if(fp(b.value))return{unaryFilter:{field:Fa(b.field),op:"IS_NULL"}}}else if("!="===b.op){if(Tb(b.value))return{unaryFilter:{field:Fa(b.field),op:"IS_NOT_NAN"}};if(fp(b.value))return{unaryFilter:{field:Fa(b.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(b.field),op:Vm(b.op),value:b.value}}}(_)});return 1===g.length?g[0]:{compositeFilter:{op:"AND",filters:g}}}}(e.filters);o&&(t.structuredQuery.where=o);var a=function(h){if(0!==h.length)return h.map(function(g){return{field:Fa((_=g).field),direction:Vb(_.dir)};var _})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);var g,l=(g=e.limit,i.I||dn(g)?g:{value:g});return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=Oa(e.startAt)),e.endAt&&(t.structuredQuery.endAt=Oa(e.endAt)),t}function Dp(i){var e=Xs(i.parent),t=i.structuredQuery,s=t.from?t.from.length:0,o=null;if(s>0){an(1===s);var a=t.from[0];a.allDescendants?o=a.collectionId:e=e.child(a.collectionId)}var l=[];t.where&&(l=jh(t.where));var h=[];t.orderBy&&(h=t.orderBy.map(function(x){return new vp(kd((S=x).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));var x,S,g=null;t.limit&&(g=dn(S="object"==typeof(x=t.limit)?x.value:x)?null:S);var _=null;t.startAt&&(_=vy(t.startAt));var b=null;return t.endAt&&(b=vy(t.endAt)),qC(e,o,h,l,g,"F",_,b)}function jh(i){return i?void 0!==i.unaryFilter?[_y(i)]:void 0!==i.fieldFilter?[Ub(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(function(e){return jh(e)}).reduce(function(e,t){return e.concat(t)}):Kt():[]}function Oa(i){return{before:i.before,values:i.position}}function vy(i){return new kh(i.values||[],!!i.before)}function Vb(i){return bo[i]}function Vm(i){return Fm[i]}function Fa(i){return{fieldPath:i.canonicalString()}}function kd(i){return Pa.fromServerFormat(i.fieldPath)}function Ub(i){return Js.create(kd(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Kt()}}(i.fieldFilter.op),i.fieldFilter.value)}function _y(i){switch(i.unaryFilter.op){case"IS_NAN":var e=kd(i.unaryFilter.field);return Js.create(e,"==",{doubleValue:NaN});case"IS_NULL":var t=kd(i.unaryFilter.field);return Js.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var s=kd(i.unaryFilter.field);return Js.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var o=kd(i.unaryFilter.field);return Js.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Kt()}}function Od(i){var e=[];return i.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Rr(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function il(i){for(var e="",t=0;t<i.length;t++)e.length>0&&(e=Fd(e)),e=Gb(i.get(t),e);return Fd(e)}function Gb(i,e){for(var t=e,s=i.length,o=0;o<s;o++){var a=i.charAt(o);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Fd(i){return i+"\x01\x01"}function tc(i){var e=i.length;if(an(e>=2),2===e)return an("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),mi.emptyPath();for(var t=e-2,s=[],o="",a=0;a<e;){var l=i.indexOf("\x01",a);switch((l<0||l>t)&&Kt(),i.charAt(l+1)){case"\x01":var h=i.substring(a,l),g=void 0;0===o.length?g=h:(g=o+=h,o=""),s.push(g);break;case"\x10":o+=i.substring(a,l),o+="\0";break;case"\x11":o+=i.substring(a,l+1);break;default:Kt()}a=l+2}return new mi(s)}var $C=function(i,e){this.seconds=i,this.nanoseconds=e},wo=function(i,e,t){this.ownerId=i,this.allowTabSynchronization=e,this.leaseTimestampMs=t};wo.store="owner",wo.key="owner";var nc=function(i,e,t){this.userId=i,this.lastAcknowledgedBatchId=e,this.lastStreamToken=t};nc.store="mutationQueues",nc.keyPath="userId";var ei=function(i,e,t,s,o){this.userId=i,this.batchId=e,this.localWriteTimeMs=t,this.baseMutations=s,this.mutations=o};ei.store="mutations",ei.keyPath="batchId",ei.userMutationsIndex="userMutationsIndex",ei.userMutationsKeyPath=["userId","batchId"];var Hr=function(){function i(){}return i.prefixForUser=function(e){return[e]},i.prefixForPath=function(e,t){return[e,il(t)]},i.key=function(e,t,s){return[e,il(t),s]},i}();Hr.store="documentMutations",Hr.PLACEHOLDER=new Hr;var Um=function(i,e){this.path=i,this.readTime=e},Hb=function(i,e){this.path=i,this.version=e},Qi=function(i,e,t,s,o,a){this.unknownDocument=i,this.noDocument=e,this.document=t,this.hasCommittedMutations=s,this.readTime=o,this.parentPath=a};Qi.store="remoteDocuments",Qi.readTimeIndex="readTimeIndex",Qi.readTimeIndexPath="readTime",Qi.collectionReadTimeIndex="collectionReadTimeIndex",Qi.collectionReadTimeIndexPath=["parentPath","readTime"];var zr=function(i){this.byteSize=i};zr.store="remoteDocumentGlobal",zr.key="remoteDocumentGlobalKey";var No=function(i,e,t,s,o,a,l){this.targetId=i,this.canonicalId=e,this.readTime=t,this.resumeToken=s,this.lastListenSequenceNumber=o,this.lastLimboFreeSnapshotVersion=a,this.query=l};No.store="targets",No.keyPath="targetId",No.queryTargetsIndexName="queryTargetsIndex",No.queryTargetsKeyPath=["canonicalId","targetId"];var us=function(i,e,t){this.targetId=i,this.path=e,this.sequenceNumber=t};us.store="targetDocuments",us.keyPath=["targetId","path"],us.documentTargetsIndex="documentTargetsIndex",us.documentTargetsKeyPath=["path","targetId"];var Bo=function(i,e,t,s){this.highestTargetId=i,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=t,this.targetCount=s};Bo.key="targetGlobalKey",Bo.store="targetGlobal";var Cu=function(i,e){this.collectionId=i,this.parent=e};Cu.store="collectionParents",Cu.keyPath=["collectionId","parent"];var xo=function(i,e,t,s){this.clientId=i,this.updateTimeMs=e,this.networkEnabled=t,this.inForeground=s};xo.store="clientMetadata",xo.keyPath="clientId";var Co=function(i,e,t){this.bundleId=i,this.createTime=e,this.version=t};Co.store="bundles",Co.keyPath="bundleId";var Su=function(i,e,t){this.name=i,this.readTime=e,this.bundledQuery=t};Su.store="namedQueries",Su.keyPath="name";var zb=(0,q.ev)((0,q.ev)([],(0,q.ev)((0,q.ev)([],(0,q.ev)((0,q.ev)([],(0,q.ev)((0,q.ev)([],[nc.store,ei.store,Hr.store,Qi.store,No.store,wo.store,Bo.store,us.store]),[xo.store])),[zr.store])),[Cu.store])),[Co.store,Su.store]),yy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ZC=function(){function i(){this.onCommittedListeners=[]}return i.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},i.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(e){return e()})},i}(),So=function(){var i=this;this.promise=new Promise(function(e,t){i.resolve=e,i.reject=t})},ct=function(){function i(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(s){t.isDone=!0,t.result=s,t.nextCallback&&t.nextCallback(s)},function(s){t.isDone=!0,t.error=s,t.catchCallback&&t.catchCallback(s)})}return i.prototype.catch=function(e){return this.next(void 0,e)},i.prototype.next=function(e,t){var s=this;return this.callbackAttached&&Kt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new i(function(o,a){s.nextCallback=function(l){s.wrapSuccess(e,l).next(o,a)},s.catchCallback=function(l){s.wrapFailure(t,l).next(o,a)}})},i.prototype.toPromise=function(){var e=this;return new Promise(function(t,s){e.next(t,s)})},i.prototype.wrapUserFunction=function(e){try{var t=e();return t instanceof i?t:i.resolve(t)}catch(s){return i.reject(s)}},i.prototype.wrapSuccess=function(e,t){return e?this.wrapUserFunction(function(){return e(t)}):i.resolve(t)},i.prototype.wrapFailure=function(e,t){return e?this.wrapUserFunction(function(){return e(t)}):i.reject(t)},i.resolve=function(e){return new i(function(t,s){t(e)})},i.reject=function(e){return new i(function(t,s){s(e)})},i.waitFor=function(e){return new i(function(t,s){var o=0,a=0,l=!1;e.forEach(function(h){++o,h.next(function(){++a,l&&a===o&&t()},function(g){return s(g)})}),l=!0,a===o&&t()})},i.or=function(e){for(var t=i.resolve(!1),s=function(l){t=t.next(function(h){return h?i.resolve(h):l()})},o=0,a=e;o<a.length;o++)s(a[o]);return t},i.forEach=function(e,t){var s=this,o=[];return e.forEach(function(a,l){o.push(t.call(s,a,l))}),this.waitFor(o)},i}(),jb=function(){function i(e,t){var s=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new So,this.transaction.oncomplete=function(){s.ft.resolve()},this.transaction.onabort=function(){t.error?s.ft.reject(new ic(e,t.error)):s.ft.resolve()},this.transaction.onerror=function(o){var a=bi(o.target.error);s.ft.reject(new ic(e,a))}}return i.open=function(e,t,s,o){try{return new i(t,e.transaction(o,s))}catch(a){throw new ic(t,a)}},Object.defineProperty(i.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),i.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(gt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},i.prototype.store=function(e){var t=this.transaction.objectStore(e);return new AD(t)},i}(),Mu=function(){function i(e,t,s){this.name=e,this.version=t,this.wt=s,12.2===i._t((0,gi.z$)())&&Tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return i.delete=function(e){return gt("SimpleDb","Removing database:",e),Wh(window.indexedDB.deleteDatabase(e)).toPromise()},i.yt=function(){if("undefined"==typeof indexedDB)return!1;if(i.gt())return!0;var e=(0,gi.z$)(),t=i._t(e),s=0<t&&t<10,o=i.Et(e),a=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||a)},i.gt=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Tt)},i.It=function(e,t){return e.store(t)},i._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)},i.Et=function(e){var t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)},i.prototype.At=function(e){return(0,q.mG)(this,void 0,void 0,function(){var t,s=this;return(0,q.Jh)(this,function(o){switch(o.label){case 0:return this.db?[3,2]:(gt("SimpleDb","Opening database:",this.name),t=this,[4,new Promise(function(a,l){var h=indexedDB.open(s.name,s.version);h.onsuccess=function(g){a(g.target.result)},h.onblocked=function(){l(new ic(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=function(g){var _=g.target.error;l("VersionError"===_.name?new it(Ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new ic(e,_))},h.onupgradeneeded=function(g){gt("SimpleDb",'Database "'+s.name+'" requires upgrade from version:',g.oldVersion),s.wt.Rt(g.target.result,h.transaction,g.oldVersion,s.version).next(function(){gt("SimpleDb","Database upgrade to version "+s.version+" complete")})}})]);case 1:t.db=o.sent(),o.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(a){return s.bt(a)}),this.db)]}})})},i.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},i.prototype.runTransaction=function(e,t,s,o){return(0,q.mG)(this,void 0,void 0,function(){var a,l,h,g,_;return(0,q.Jh)(this,function(b){switch(b.label){case 0:a="readonly"===t,l=0,h=function(){var x,S,M,T,I;return(0,q.Jh)(this,function(L){switch(L.label){case 0:++l,L.label=1;case 1:return L.trys.push([1,4,,5]),[4,g.At(e)];case 2:return g.db=L.sent(),x=jb.open(g.db,e,a?"readonly":"readwrite",s),S=o(x).catch(function(k){return x.abort(k),ct.reject(k)}).toPromise(),M={},S.catch(function(){}),[4,x.dt];case 3:return[2,(M.value=(L.sent(),S),M)];case 4:return gt("SimpleDb","Transaction failed with error:",(T=L.sent()).message,"Retrying:",I="FirebaseError"!==T.name&&l<3),g.close(),I?[3,5]:[2,{value:Promise.reject(T)}];case 5:return[2]}})},g=this,b.label=1;case 1:return[5,h()];case 2:if("object"==typeof(_=b.sent()))return[2,_.value];b.label=3;case 3:return[3,1];case 4:return[2]}})})},i.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},i}(),Wb=function(){function i(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(i.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),i.prototype.done=function(){this.Vt=!0},i.prototype.Ct=function(e){this.St=e},i.prototype.delete=function(){return Wh(this.Pt.delete())},i}(),ic=function(i){function e(t,s){var o=this;return(o=i.call(this,Ee.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+s)||this).name="IndexedDbTransactionError",o}return(0,q.ZT)(e,i),e}(it);function Rs(i){return"IndexedDbTransactionError"===i.name}var AD=function(){function i(e){this.store=e}return i.prototype.put=function(e,t){var s;return void 0!==t?(gt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(gt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Wh(s)},i.prototype.add=function(e){return gt("SimpleDb","ADD",this.store.name,e,e),Wh(this.store.add(e))},i.prototype.get=function(e){var t=this;return Wh(this.store.get(e)).next(function(s){return void 0===s&&(s=null),gt("SimpleDb","GET",t.store.name,e,s),s})},i.prototype.delete=function(e){return gt("SimpleDb","DELETE",this.store.name,e),Wh(this.store.delete(e))},i.prototype.count=function(){return gt("SimpleDb","COUNT",this.store.name),Wh(this.store.count())},i.prototype.Nt=function(e,t){var s=this.cursor(this.options(e,t)),o=[];return this.xt(s,function(a,l){o.push(l)}).next(function(){return o})},i.prototype.kt=function(e,t){gt("SimpleDb","DELETE ALL",this.store.name);var s=this.options(e,t);s.Ft=!1;var o=this.cursor(s);return this.xt(o,function(a,l,h){return h.delete()})},i.prototype.$t=function(e,t){var s;t?s=e:(s={},t=e);var o=this.cursor(s);return this.xt(o,t)},i.prototype.Ot=function(e){var t=this.cursor({});return new ct(function(s,o){t.onerror=function(a){var l=bi(a.target.error);o(l)},t.onsuccess=function(a){var l=a.target.result;l?e(l.primaryKey,l.value).next(function(h){h?l.continue():s()}):s()}})},i.prototype.xt=function(e,t){var s=[];return new ct(function(o,a){e.onerror=function(l){a(l.target.error)},e.onsuccess=function(l){var h=l.target.result;if(h){var g=new Wb(h),_=t(h.primaryKey,h.value,g);if(_ instanceof ct){var b=_.catch(function(x){return g.done(),ct.reject(x)});s.push(b)}g.isDone?o():null===g.Dt?h.continue():h.continue(g.Dt)}else o()}}).next(function(){return ct.waitFor(s)})},i.prototype.options=function(e,t){var s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}},i.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var s=this.store.index(e.index);return e.Ft?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},i}();function Wh(i){return new ct(function(e,t){i.onsuccess=function(s){e(s.target.result)},i.onerror=function(s){var o=bi(s.target.error);t(o)}})}var rc=!1;function bi(i){var e=Mu._t((0,gi.z$)());if(e>=12.2&&e<13){var t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){var s=new it("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+t+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return rc||(rc=!0,setTimeout(function(){throw s},0)),s}}return i}var Pn=function(i){function e(t,s){var o=this;return(o=i.call(this)||this).Mt=t,o.currentSequenceNumber=s,o}return(0,q.ZT)(e,i),e}(ZC);function Ps(i,e){var t=_t(i);return Mu.It(t.Mt,e)}var qh=function(){function i(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}return i.prototype.applyToRemoteDocument=function(e,t){for(var s=t.mutationResults,o=0;o<this.mutations.length;o++){var a=this.mutations[o];a.key.isEqual(e.key)&&Pb(a,e,s[o])}},i.prototype.applyToLocalView=function(e){for(var t=0,s=this.baseMutations;t<s.length;t++)(l=s[t]).key.isEqual(e.key)&&Gh(l,e,this.localWriteTime);for(var o=0,a=this.mutations;o<a.length;o++){var l;(l=a[o]).key.isEqual(e.key)&&Gh(l,e,this.localWriteTime)}},i.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach(function(s){var o=e.get(s.key),a=o;t.applyToLocalView(a),o.isValidDocument()||a.convertToNoDocument(Yn.min())})},i.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},yi())},i.prototype.isEqual=function(e){return this.batchId===e.batchId&&lu(this.mutations,e.mutations,function(t,s){return ay(t,s)})&&lu(this.baseMutations,e.baseMutations,function(t,s){return ay(t,s)})},i}(),qb=function(){function i(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}return i.from=function(e,t,s){an(e.mutations.length===s.length);for(var o=Rm(),a=e.mutations,l=0;l<a.length;l++)o=o.insert(a[l].key,s[l].version);return new i(e,t,s,o)},i}(),Ui=function(){function i(e,t,s,o,a,l,h){void 0===a&&(a=Yn.min()),void 0===l&&(l=Yn.min()),void 0===h&&(h=Ks.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}return i.prototype.withSequenceNumber=function(e){return new i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},i.prototype.withResumeToken=function(e,t){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)},i.prototype.withLastLimboFreeSnapshotVersion=function(e){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},i}(),Yh=function(i){this.Lt=i};function Ml(i,e){if(e.document)return my(i.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=$t.fromSegments(e.noDocument.path),s=Eu(e.noDocument.readTime),o=Jr.newNoDocument(t,s);return e.hasCommittedMutations?o.setHasCommittedMutations():o}if(e.unknownDocument){var a=$t.fromSegments(e.unknownDocument.path);return s=Eu(e.unknownDocument.version),Jr.newUnknownDocument(a,s)}return Kt()}function Gm(i,e,t){var x,S,s=Ap(t),o=e.key.path.popLast().toArray();if(e.isFoundDocument()){var a={name:wu(x=i.Lt,(S=e).key),fields:S.data.value.mapValue.fields,updateTime:Pd(x,S.version.toTimestamp())},l=e.hasCommittedMutations;return new Qi(null,null,a,l,s,o)}if(e.isNoDocument()){var h=e.key.path.toArray(),g=sc(e.version);return l=e.hasCommittedMutations,new Qi(null,new Um(h,g),null,l,s,o)}if(e.isUnknownDocument()){var _=e.key.path.toArray(),b=sc(e.version);return new Qi(new Hb(_,b),null,null,!0,s,o)}return Kt()}function Ap(i){var e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function by(i){var e=new Kr(i[0],i[1]);return Yn.fromTimestamp(e)}function sc(i){var e=i.toTimestamp();return new $C(e.seconds,e.nanoseconds)}function Eu(i){var e=new Kr(i.seconds,i.nanoseconds);return Yn.fromTimestamp(e)}function Du(i,e){for(var t=(e.baseMutations||[]).map(function(g){return Mp(i.Lt,g)}),s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);var l=e.mutations.map(function(g){return Mp(i.Lt,g)}),h=Kr.fromMillis(e.localWriteTimeMs);return new qh(e.batchId,h,t,l)}function El(i){var e,t,s=Eu(i.readTime),o=void 0!==i.lastLimboFreeSnapshotVersion?Eu(i.lastLimboFreeSnapshotVersion):Yn.min();return void 0!==i.query.documents?(an(1===(t=i.query).documents.length),e=Fo(Oh(Xs(t.documents[0])))):e=Fo(Dp(i.query)),new Ui(e,i.targetId,0,i.lastListenSequenceNumber,s,o,Ks.fromBase64String(i.resumeToken))}function oc(i,e){var t,s=sc(e.snapshotVersion),o=sc(e.lastLimboFreeSnapshotVersion);t=pp(e.target)?Ep(i.Lt,e.target):oa(i.Lt,e.target);var a=e.resumeToken.toBase64();return new No(e.targetId,Cl(e.target),s,a,e.sequenceNumber,o,t)}function Tp(i){var e=Dp({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?ey(e,e.limit,"L"):e}var Ip=function(){function i(){}return i.prototype.getBundleMetadata=function(e,t){return Yb(e).get(t).next(function(s){if(s)return{id:(o=s).bundleId,createTime:Eu(o.createTime),version:o.version};var o})},i.prototype.saveBundleMetadata=function(e,t){return Yb(e).put({bundleId:(s=t).id,createTime:sc(Gr(s.createTime)),version:s.version});var s},i.prototype.getNamedQuery=function(e,t){return Hm(e).get(t).next(function(s){if(s)return{name:(o=s).name,query:Tp(o.bundledQuery),readTime:Eu(o.readTime)};var o})},i.prototype.saveNamedQuery=function(e,t){return Hm(e).put({name:(s=t).name,readTime:sc(Gr(s.readTime)),bundledQuery:s.bundledQuery});var s},i}();function Yb(i){return Ps(i,Co.store)}function Hm(i){return Ps(i,Su.store)}var Rp=function(){function i(){this.Bt=new aa}return i.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),ct.resolve()},i.prototype.getCollectionParents=function(e,t){return ct.resolve(this.Bt.getEntries(t))},i}(),aa=function(){function i(){this.index={}}return i.prototype.add=function(e){var t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Ur(mi.comparator),a=!o.has(s);return this.index[t]=o.add(s),a},i.prototype.has=function(e){var t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)},i.prototype.getEntries=function(e){return(this.index[e]||new Ur(mi.comparator)).toArray()},i}(),$h=function(){function i(){this.qt=new aa}return i.prototype.addToCollectionParentIndex=function(e,t){var s=this;if(!this.qt.has(t)){var o=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(function(){s.qt.add(t)});var l={collectionId:o,parent:il(a)};return ds(e).put(l)}return ct.resolve()},i.prototype.getCollectionParents=function(e,t){var s=[],o=IDBKeyRange.bound([t,""],[up(t),""],!1,!0);return ds(e).Nt(o).next(function(a){for(var l=0,h=a;l<h.length;l++){var g=h[l];if(g.collectionId!==t)break;s.push(tc(g.parent))}return s})},i}();function ds(i){return Ps(i,Cu.store)}var Au={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vo=function(){function i(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}return i.withCacheSize=function(e){return new i(e,i.DEFAULT_COLLECTION_PERCENTILE,i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},i}();function la(i,e,t){var s=i.store(ei.store),o=i.store(Hr.store),a=[],l=IDBKeyRange.only(t.batchId),h=0,g=s.$t({range:l},function(T,I,L){return h++,L.delete()});a.push(g.next(function(){an(1===h)}));for(var _=[],b=0,x=t.mutations;b<x.length;b++){var S=x[b],M=Hr.key(e,S.key.path,t.batchId);a.push(o.delete(M)),_.push(S.key)}return ct.waitFor(a).next(function(){return _})}function Tu(i){if(!i)return 0;var e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Kt();e=i.noDocument}return JSON.stringify(e).length}Vo.DEFAULT_COLLECTION_PERCENTILE=10,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vo.DEFAULT=new Vo(41943040,Vo.DEFAULT_COLLECTION_PERCENTILE,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vo.DISABLED=new Vo(-1,0,0);var ac=function(){function i(e,t,s,o){this.userId=e,this.R=t,this.Ut=s,this.referenceDelegate=o,this.Kt={}}return i.Qt=function(e,t,s,o){return an(""!==e.uid),new i(e.isAuthenticated()?e.uid:"",t,s,o)},i.prototype.checkEmpty=function(e){var t=!0,s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uo(e).$t({index:ei.userMutationsIndex,range:s},function(o,a,l){t=!1,l.done()}).next(function(){return t})},i.prototype.addMutationBatch=function(e,t,s,o){var a=this,l=La(e),h=Uo(e);return h.add({}).next(function(g){an("number"==typeof g);for(var _=new qh(g,t,s,o),b=function(k,R,U){var N=U.baseMutations.map(function(K){return xu(k.Lt,K)}),j=U.mutations.map(function(K){return xu(k.Lt,K)});return new ei(R,U.batchId,U.localWriteTime.toMillis(),N,j)}(a.R,a.userId,_),x=[],S=new Ur(function(k,R){return Kn(k.canonicalString(),R.canonicalString())}),M=0,T=o;M<T.length;M++){var I=T[M],L=Hr.key(a.userId,I.key.path,g);S=S.add(I.key.path.popLast()),x.push(h.put(b)),x.push(l.put(L,Hr.PLACEHOLDER))}return S.forEach(function(k){x.push(a.Ut.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(function(){a.Kt[g]=_.keys()}),ct.waitFor(x).next(function(){return _})})},i.prototype.lookupMutationBatch=function(e,t){var s=this;return Uo(e).get(t).next(function(o){return o?(an(o.userId===s.userId),Du(s.R,o)):null})},i.prototype.jt=function(e,t){var s=this;return this.Kt[t]?ct.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next(function(o){if(o){var a=o.keys();return s.Kt[t]=a,a}return null})},i.prototype.getNextMutationBatchAfterBatchId=function(e,t){var s=this,o=t+1,a=IDBKeyRange.lowerBound([this.userId,o]),l=null;return Uo(e).$t({index:ei.userMutationsIndex,range:a},function(h,g,_){g.userId===s.userId&&(an(g.batchId>=o),l=Du(s.R,g)),_.done()}).next(function(){return l})},i.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),s=-1;return Uo(e).$t({index:ei.userMutationsIndex,range:t,reverse:!0},function(o,a,l){s=a.batchId,l.done()}).next(function(){return s})},i.prototype.getAllMutationBatches=function(e){var t=this,s=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uo(e).Nt(ei.userMutationsIndex,s).next(function(o){return o.map(function(a){return Du(t.R,a)})})},i.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var s=this,o=Hr.prefixForPath(this.userId,t.path),a=IDBKeyRange.lowerBound(o),l=[];return La(e).$t({range:a},function(h,g,_){var b=h[0],S=h[2],M=tc(h[1]);if(b===s.userId&&t.path.isEqual(M))return Uo(e).get(S).next(function(T){if(!T)throw Kt();an(T.userId===s.userId),l.push(Du(s.R,T))});_.done()}).next(function(){return l})},i.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var s=this,o=new Ur(Kn),a=[];return t.forEach(function(l){var h=Hr.prefixForPath(s.userId,l.path),g=IDBKeyRange.lowerBound(h),_=La(e).$t({range:g},function(b,x,S){var M=b[0],I=b[2],L=tc(b[1]);M===s.userId&&l.path.isEqual(L)?o=o.add(I):S.done()});a.push(_)}),ct.waitFor(a).next(function(){return s.Wt(e,o)})},i.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var s=this,o=t.path,a=o.length+1,l=Hr.prefixForPath(this.userId,o),h=IDBKeyRange.lowerBound(l),g=new Ur(Kn);return La(e).$t({range:h},function(_,b,x){var S=_[0],T=_[2],I=tc(_[1]);S===s.userId&&o.isPrefixOf(I)?I.length===a&&(g=g.add(T)):x.done()}).next(function(){return s.Wt(e,g)})},i.prototype.Wt=function(e,t){var s=this,o=[],a=[];return t.forEach(function(l){a.push(Uo(e).get(l).next(function(h){if(null===h)throw Kt();an(h.userId===s.userId),o.push(Du(s.R,h))}))}),ct.waitFor(a).next(function(){return o})},i.prototype.removeMutationBatch=function(e,t){var s=this;return la(e.Mt,this.userId,t).next(function(o){return e.addOnCommittedListener(function(){s.Gt(t.batchId)}),ct.forEach(o,function(a){return s.referenceDelegate.markPotentiallyOrphaned(e,a)})})},i.prototype.Gt=function(e){delete this.Kt[e]},i.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(s){if(!s)return ct.resolve();var o=IDBKeyRange.lowerBound(Hr.prefixForUser(t.userId)),a=[];return La(e).$t({range:o},function(l,h,g){if(l[0]===t.userId){var _=tc(l[1]);a.push(_)}else g.done()}).next(function(){an(0===a.length)})})},i.prototype.containsKey=function(e,t){return lc(e,this.userId,t)},i.prototype.zt=function(e){var t=this;return kt(e).get(this.userId).next(function(s){return s||new nc(t.userId,-1,"")})},i}();function lc(i,e,t){var s=Hr.prefixForPath(e,t.path),o=s[1],a=IDBKeyRange.lowerBound(s),l=!1;return La(i).$t({range:a,Ft:!0},function(h,g,_){h[0]===e&&h[1]===o&&(l=!0),_.done()}).next(function(){return l})}function Uo(i){return Ps(i,ei.store)}function La(i){return Ps(i,Hr.store)}function kt(i){return Ps(i,nc.store)}var rl=function(){function i(e){this.Ht=e}return i.prototype.next=function(){return this.Ht+=2,this.Ht},i.Jt=function(){return new i(0)},i.Yt=function(){return new i(-1)},i}(),Xi=function(){function i(e,t){this.referenceDelegate=e,this.R=t}return i.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next(function(s){var o=new rl(s.highestTargetId);return s.highestTargetId=o.next(),t.Zt(e,s).next(function(){return s.highestTargetId})})},i.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next(function(t){return Yn.fromTimestamp(new Kr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},i.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next(function(t){return t.highestListenSequenceNumber})},i.prototype.setTargetsMetadata=function(e,t,s){var o=this;return this.Xt(e).next(function(a){return a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),o.Zt(e,a)})},i.prototype.addTargetData=function(e,t){var s=this;return this.te(e,t).next(function(){return s.Xt(e).next(function(o){return o.targetCount+=1,s.ee(t,o),s.Zt(e,o)})})},i.prototype.updateTargetData=function(e,t){return this.te(e,t)},i.prototype.removeTargetData=function(e,t){var s=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return eo(e).delete(t.targetId)}).next(function(){return s.Xt(e)}).next(function(o){return an(o.targetCount>0),o.targetCount-=1,s.Zt(e,o)})},i.prototype.removeTargets=function(e,t,s){var o=this,a=0,l=[];return eo(e).$t(function(h,g){var _=El(g);_.sequenceNumber<=t&&null===s.get(_.targetId)&&(a++,l.push(o.removeTargetData(e,_)))}).next(function(){return ct.waitFor(l)}).next(function(){return a})},i.prototype.forEachTarget=function(e,t){return eo(e).$t(function(s,o){var a=El(o);t(a)})},i.prototype.Xt=function(e){return to(e).get(Bo.key).next(function(t){return an(null!==t),t})},i.prototype.Zt=function(e,t){return to(e).put(Bo.key,t)},i.prototype.te=function(e,t){return eo(e).put(oc(this.R,t))},i.prototype.ee=function(e,t){var s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s},i.prototype.getTargetCount=function(e){return this.Xt(e).next(function(t){return t.targetCount})},i.prototype.getTargetData=function(e,t){var s=Cl(t),o=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]),a=null;return eo(e).$t({range:o,index:No.queryTargetsIndexName},function(l,h,g){var _=El(h);xm(t,_.target)&&(a=_,g.done())}).next(function(){return a})},i.prototype.addMatchingKeys=function(e,t,s){var o=this,a=[],l=cc(e);return t.forEach(function(h){var g=il(h.path);a.push(l.put(new us(s,g))),a.push(o.referenceDelegate.addReference(e,s,h))}),ct.waitFor(a)},i.prototype.removeMatchingKeys=function(e,t,s){var o=this,a=cc(e);return ct.forEach(t,function(l){var h=il(l.path);return ct.waitFor([a.delete([s,h]),o.referenceDelegate.removeReference(e,s,l)])})},i.prototype.removeMatchingKeysForTargetId=function(e,t){var s=cc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(o)},i.prototype.getMatchingKeysForTargetId=function(e,t){var s=IDBKeyRange.bound([t],[t+1],!1,!0),o=cc(e),a=yi();return o.$t({range:s,Ft:!0},function(l,h,g){var _=tc(l[1]),b=new $t(_);a=a.add(b)}).next(function(){return a})},i.prototype.containsKey=function(e,t){var s=il(t.path),o=IDBKeyRange.bound([s],[up(s)],!1,!0),a=0;return cc(e).$t({index:us.documentTargetsIndex,Ft:!0,range:o},function(l,h,g){0!==l[0]&&(a++,g.done())}).next(function(){return a>0})},i.prototype.lt=function(e,t){return eo(e).get(t).next(function(s){return s?El(s):null})},i}();function eo(i){return Ps(i,No.store)}function to(i){return Ps(i,Bo.store)}function cc(i){return Ps(i,us.store)}function Iu(i){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(e){if(i.code!==Ee.FAILED_PRECONDITION||i.message!==yy)throw i;return gt("LocalStore","Unexpectedly lost primary lease"),[2]})})}function wy(i,e){var s=i[1],a=e[1],l=Kn(i[0],e[0]);return 0===l?Kn(s,a):l}var uc=function(){function i(e){this.ne=e,this.buffer=new Ur(wy),this.se=0}return i.prototype.ie=function(){return++this.se},i.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var s=this.buffer.last();wy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}},Object.defineProperty(i.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),i}(),xy=function(){function i(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return i.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},i.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(i.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),i.prototype.ue=function(e){var t=this,s=this.oe?3e5:6e4;gt("LruGarbageCollector","Garbage collection scheduled in "+s+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,function(){return(0,q.mG)(t,void 0,void 0,function(){var o;return(0,q.Jh)(this,function(a){switch(a.label){case 0:this.ce=null,this.oe=!0,a.label=1;case 1:return a.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return a.sent(),[3,7];case 3:return Rs(o=a.sent())?(gt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o),[3,6]):[3,4];case 4:return[4,Iu(o)];case 5:a.sent(),a.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return a.sent(),[2]}})})})},i}(),Ld=function(){function i(e,t){this.ae=e,this.params=t}return i.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next(function(s){return Math.floor(t/100*s)})},i.prototype.nthSequenceNumber=function(e,t){var s=this;if(0===t)return ct.resolve(Zs.o);var o=new uc(t);return this.ae.forEachTarget(e,function(a){return o.re(a.sequenceNumber)}).next(function(){return s.ae.le(e,function(a){return o.re(a)})}).next(function(){return o.maxValue})},i.prototype.removeTargets=function(e,t,s){return this.ae.removeTargets(e,t,s)},i.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},i.prototype.collect=function(e,t){var s=this;return-1===this.params.cacheSizeCollectionThreshold?(gt("LruGarbageCollector","Garbage collection skipped; disabled"),ct.resolve(Au)):this.getCacheSize(e).next(function(o){return o<s.params.cacheSizeCollectionThreshold?(gt("LruGarbageCollector","Garbage collection skipped; Cache size "+o+" is lower than threshold "+s.params.cacheSizeCollectionThreshold),Au):s.fe(e,t)})},i.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},i.prototype.fe=function(e,t){var s,o,a,l,h,g,_,b=this,x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(S){return S>b.params.maximumSequenceNumbersToCollect?(gt("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+b.params.maximumSequenceNumbersToCollect+" from "+S),o=b.params.maximumSequenceNumbersToCollect):o=S,l=Date.now(),b.nthSequenceNumber(e,o)}).next(function(S){return s=S,h=Date.now(),b.removeTargets(e,s,t)}).next(function(S){return a=S,g=Date.now(),b.removeOrphanedDocuments(e,s)}).next(function(S){return _=Date.now(),Ih()<=Sa.in.DEBUG&&gt("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(l-x)+"ms\n\tDetermined least recently used "+o+" in "+(h-l)+"ms\n\tRemoved "+a+" targets in "+(g-h)+"ms\n\tRemoved "+S+" documents in "+(_-g)+"ms\nTotal Duration: "+(_-x)+"ms"),ct.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:S})})},i}(),zm=function(){function i(e,t){this.db=e,this.garbageCollector=new Ld(this,t)}return i.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next(function(s){return t.next(function(o){return s+o})})},i.prototype.de=function(e){var t=0;return this.le(e,function(s){t++}).next(function(){return t})},i.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},i.prototype.le=function(e,t){return this.we(e,function(s,o){return t(o)})},i.prototype.addReference=function(e,t,s){return Zh(e,s)},i.prototype.removeReference=function(e,t,s){return Zh(e,s)},i.prototype.removeTargets=function(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)},i.prototype.markPotentiallyOrphaned=function(e,t){return Zh(e,t)},i.prototype._e=function(e,t){return o=t,a=!1,kt(s=e).Ot(function(l){return lc(s,l,o).next(function(h){return h&&(a=!0),ct.resolve(!h)})}).next(function(){return a});var s,o,a},i.prototype.removeOrphanedDocuments=function(e,t){var s=this,o=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[],l=0;return this.we(e,function(h,g){if(g<=t){var _=s._e(e,h).next(function(b){if(!b)return l++,o.getEntry(e,h).next(function(){return o.removeEntry(h),cc(e).delete([0,il(h.path)])})});a.push(_)}}).next(function(){return ct.waitFor(a)}).next(function(){return o.apply(e)}).next(function(){return l})},i.prototype.removeTarget=function(e,t){var s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)},i.prototype.updateLimboDocument=function(e,t){return Zh(e,t)},i.prototype.we=function(e,t){var s,o=cc(e),a=Zs.o;return o.$t({index:us.documentTargetsIndex},function(l,h){var _=h.path,b=h.sequenceNumber;0===l[0]?(a!==Zs.o&&t(new $t(tc(s)),a),a=b,s=_):a=Zs.o}).next(function(){a!==Zs.o&&t(new $t(tc(s)),a)})},i.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},i}();function Zh(i,e){return cc(i).put((s=i.currentSequenceNumber,new us(0,il(e.path),s)));var s}var Dl=function(){function i(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return i.prototype.get=function(e){var t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(var o=0,a=s;o<a.length;o++){var l=a[o],g=l[1];if(this.equalsFn(l[0],e))return g}},i.prototype.has=function(e){return void 0!==this.get(e)},i.prototype.set=function(e,t){var s=this.mapKeyFn(e),o=this.inner[s];if(void 0!==o){for(var a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t])}else this.inner[s]=[[e,t]]},i.prototype.delete=function(e){var t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(var o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return 1===s.length?delete this.inner[t]:s.splice(o,1),!0;return!1},i.prototype.forEach=function(e){cu(this.inner,function(t,s){for(var o=0,a=s;o<a.length;o++){var l=a[o];e(l[0],l[1])}})},i.prototype.isEmpty=function(){return vm(this.inner)},i}(),wr=function(){function i(){this.changes=new Dl(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return i.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:Yn.min()},i.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},i.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:Jr.newInvalidDocument(e),readTime:t})},i.prototype.getEntry=function(e,t){this.assertNotApplied();var s=this.changes.get(t);return void 0!==s?ct.resolve(s.document):this.getFromCache(e,t)},i.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},i.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},i.prototype.assertNotApplied=function(){},i}(),ar=function(){function i(e,t){this.R=e,this.Ut=t}return i.prototype.addEntry=function(e,t,s){return Al(e).put(jm(t),s)},i.prototype.removeEntry=function(e,t){var s=Al(e),o=jm(t);return s.delete(o)},i.prototype.updateMetadata=function(e,t){var s=this;return this.getMetadata(e).next(function(o){return o.byteSize+=t,s.me(e,o)})},i.prototype.getEntry=function(e,t){var s=this;return Al(e).get(jm(t)).next(function(o){return s.ye(t,o)})},i.prototype.ge=function(e,t){var s=this;return Al(e).get(jm(t)).next(function(o){return{document:s.ye(t,o),size:Tu(o)}})},i.prototype.getEntries=function(e,t){var s=this,o=ia();return this.pe(e,t,function(a,l){var h=s.ye(a,l);o=o.insert(a,h)}).next(function(){return o})},i.prototype.Ee=function(e,t){var s=this,o=ia(),a=new cs($t.comparator);return this.pe(e,t,function(l,h){var g=s.ye(l,h);o=o.insert(l,g),a=a.insert(l,Tu(h))}).next(function(){return{documents:o,Te:a}})},i.prototype.pe=function(e,t,s){if(t.isEmpty())return ct.resolve();var o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),a=t.getIterator(),l=a.getNext();return Al(e).$t({range:o},function(h,g,_){for(var b=$t.fromSegments(h);l&&$t.comparator(l,b)<0;)s(l,null),l=a.getNext();l&&l.isEqual(b)&&(s(l,g),l=a.hasNext()?a.getNext():null),l?_.Ct(l.path.toArray()):_.done()}).next(function(){for(;l;)s(l,null),l=a.hasNext()?a.getNext():null})},i.prototype.getDocumentsMatchingQuery=function(e,t,s){var o=this,a=ia(),l=t.path.length+1,h={};if(s.isEqual(Yn.min())){var g=t.path.toArray();h.range=IDBKeyRange.lowerBound(g)}else{var _=t.path.toArray(),b=Ap(s);h.range=IDBKeyRange.lowerBound([_,b],!0),h.index=Qi.collectionReadTimeIndex}return Al(e).$t(h,function(x,S,M){if(x.length===l){var T=Ml(o.R,S);t.path.isPrefixOf(T.key.path)?Dd(t,T)&&(a=a.insert(T.key,T)):M.done()}}).next(function(){return a})},i.prototype.newChangeBuffer=function(e){return new $b(this,!!e&&e.trackRemovals)},i.prototype.getSize=function(e){return this.getMetadata(e).next(function(t){return t.byteSize})},i.prototype.getMetadata=function(e){return pr(e).get(zr.key).next(function(t){return an(!!t),t})},i.prototype.me=function(e,t){return pr(e).put(zr.key,t)},i.prototype.ye=function(e,t){if(t){var s=Ml(this.R,t);if(!s.isNoDocument()||!s.version.isEqual(Yn.min()))return s}return Jr.newInvalidDocument(e)},i}(),$b=function(i){function e(t,s){var o=this;return(o=i.call(this)||this).Ie=t,o.trackRemovals=s,o.Ae=new Dl(function(a){return a.toString()},function(a,l){return a.isEqual(l)}),o}return(0,q.ZT)(e,i),e.prototype.applyChanges=function(t){var s=this,o=[],a=0,l=new Ur(function(h,g){return Kn(h.canonicalString(),g.canonicalString())});return this.changes.forEach(function(h,g){var _=s.Ae.get(h);if(g.document.isValidDocument()){var b=Gm(s.Ie.R,g.document,s.getReadTime(h));l=l.add(h.path.popLast());var x=Tu(b);a+=x-_,o.push(s.Ie.addEntry(t,h,b))}else if(a-=_,s.trackRemovals){var S=Gm(s.Ie.R,Jr.newNoDocument(h,Yn.min()),s.getReadTime(h));o.push(s.Ie.addEntry(t,h,S))}else o.push(s.Ie.removeEntry(t,h))}),l.forEach(function(h){o.push(s.Ie.Ut.addToCollectionParentIndex(t,h))}),o.push(this.Ie.updateMetadata(t,a)),ct.waitFor(o)},e.prototype.getFromCache=function(t,s){var o=this;return this.Ie.ge(t,s).next(function(a){return o.Ae.set(s,a.size),a.document})},e.prototype.getAllFromCache=function(t,s){var o=this;return this.Ie.Ee(t,s).next(function(a){var l=a.documents;return a.Te.forEach(function(h,g){o.Ae.set(h,g)}),l})},e}(wr);function pr(i){return Ps(i,zr.store)}function Al(i){return Ps(i,Qi.store)}function jm(i){return i.path.toArray()}var c=function(){function i(e){this.R=e}return i.prototype.Rt=function(e,t,s,o){var a=this;an(s<o&&s>=0&&o<=11);var g,l=new jb("createOrUpgrade",t);s<1&&o>=1&&(e.createObjectStore(wo.store),(g=e).createObjectStore(nc.store,{keyPath:nc.keyPath}),g.createObjectStore(ei.store,{keyPath:ei.keyPath,autoIncrement:!0}).createIndex(ei.userMutationsIndex,ei.userMutationsKeyPath,{unique:!0}),g.createObjectStore(Hr.store),m(e),function(g){g.createObjectStore(Qi.store)}(e));var h=ct.resolve();return s<3&&o>=3&&(0!==s&&(function(g){g.deleteObjectStore(us.store),g.deleteObjectStore(No.store),g.deleteObjectStore(Bo.store)}(e),m(e)),h=h.next(function(){return function(g){var _=g.store(Bo.store),b=new Bo(0,0,Yn.min().toTimestamp(),0);return _.put(Bo.key,b)}(l)})),s<4&&o>=4&&(0!==s&&(h=h.next(function(){return function(g,_){return _.store(ei.store).Nt().next(function(b){g.deleteObjectStore(ei.store),g.createObjectStore(ei.store,{keyPath:ei.keyPath,autoIncrement:!0}).createIndex(ei.userMutationsIndex,ei.userMutationsKeyPath,{unique:!0});var x=_.store(ei.store),S=b.map(function(M){return x.put(M)});return ct.waitFor(S)})}(e,l)})),h=h.next(function(){!function(g){g.createObjectStore(xo.store,{keyPath:xo.keyPath})}(e)})),s<5&&o>=5&&(h=h.next(function(){return a.Re(l)})),s<6&&o>=6&&(h=h.next(function(){return function(g){g.createObjectStore(zr.store)}(e),a.be(l)})),s<7&&o>=7&&(h=h.next(function(){return a.ve(l)})),s<8&&o>=8&&(h=h.next(function(){return a.Pe(e,l)})),s<9&&o>=9&&(h=h.next(function(){(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e),function(g){var _=g.objectStore(Qi.store);_.createIndex(Qi.readTimeIndex,Qi.readTimeIndexPath,{unique:!1}),_.createIndex(Qi.collectionReadTimeIndex,Qi.collectionReadTimeIndexPath,{unique:!1})}(t)})),s<10&&o>=10&&(h=h.next(function(){return a.Ve(l)})),s<11&&o>=11&&(h=h.next(function(){(function(g){g.createObjectStore(Co.store,{keyPath:Co.keyPath})})(e),function(g){g.createObjectStore(Su.store,{keyPath:Su.keyPath})}(e)})),h},i.prototype.be=function(e){var t=0;return e.store(Qi.store).$t(function(s,o){t+=Tu(o)}).next(function(){var s=new zr(t);return e.store(zr.store).put(zr.key,s)})},i.prototype.Re=function(e){var t=this,s=e.store(nc.store),o=e.store(ei.store);return s.Nt().next(function(a){return ct.forEach(a,function(l){var h=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return o.Nt(ei.userMutationsIndex,h).next(function(g){return ct.forEach(g,function(_){an(_.userId===l.userId);var b=Du(t.R,_);return la(e,l.userId,b).next(function(){})})})})})},i.prototype.ve=function(e){var t=e.store(us.store),s=e.store(Qi.store);return e.store(Bo.store).get(Bo.key).next(function(o){var a=[];return s.$t(function(l,h){var g=new mi(l),_=[0,il(g)];a.push(t.get(_).next(function(b){return b?ct.resolve():t.put(new us(0,il(g),o.highestListenSequenceNumber))}))}).next(function(){return ct.waitFor(a)})})},i.prototype.Pe=function(e,t){e.createObjectStore(Cu.store,{keyPath:Cu.keyPath});var s=t.store(Cu.store),o=new aa,a=function(l){if(o.add(l)){var h=l.lastSegment(),g=l.popLast();return s.put({collectionId:h,parent:il(g)})}};return t.store(Qi.store).$t({Ft:!0},function(l,h){var g=new mi(l);return a(g.popLast())}).next(function(){return t.store(Hr.store).$t({Ft:!0},function(l,h){var _=tc(l[1]);return a(_.popLast())})})},i.prototype.Ve=function(e){var t=this,s=e.store(No.store);return s.$t(function(o,a){var l=El(a),h=oc(t.R,l);return s.put(h)})},i}();function m(i){i.createObjectStore(us.store,{keyPath:us.keyPath}).createIndex(us.documentTargetsIndex,us.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(No.store,{keyPath:No.keyPath}).createIndex(No.queryTargetsIndexName,No.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(Bo.store)}var w="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",E=function(){function i(e,t,s,o,a,l,h,g,_,b){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Se=a,this.window=l,this.document=h,this.De=_,this.Ce=b,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(x){return Promise.resolve()},!i.yt())throw new it(Ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zm(this,o),this.Le=t+"main",this.R=new Yh(g),this.Be=new Mu(this.Le,11,new c(this.R)),this.qe=new Xi(this.referenceDelegate,this.R),this.Ut=new $h,this.Ue=new ar(this.R,this.Ut),this.Ke=new Ip,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===b&&Tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return i.prototype.start=function(){var e=this;return this.je().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new it(Ee.FAILED_PRECONDITION,w);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.qe.getHighestSequenceNumber(t)})}).then(function(t){e.Ne=new Zs(t,e.De)}).then(function(){e.xe=!0}).catch(function(t){return e.Be&&e.Be.close(),Promise.reject(t)})},i.prototype.He=function(e){var t=this;return this.Me=function(s){return(0,q.mG)(t,void 0,void 0,function(){return(0,q.Jh)(this,function(o){return this.started?[2,e(s)]:[2]})})},e(this.isPrimary)},i.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt(function(s){return(0,q.mG)(t,void 0,void 0,function(){return(0,q.Jh)(this,function(o){switch(o.label){case 0:return null===s.newVersion?[4,e()]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})})},i.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget(function(){return(0,q.mG)(t,void 0,void 0,function(){return(0,q.Jh)(this,function(s){switch(s.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})}))},i.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return V(t).put(new xo(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.Je(t).next(function(s){s||(e.isPrimary=!1,e.Se.enqueueRetryable(function(){return e.Me(!1)}))})}).next(function(){return e.Ye(t)}).next(function(s){return e.isPrimary&&!s?e.Xe(t).next(function(){return!1}):!!s&&e.Ze(t).next(function(){return!0})})}).catch(function(t){if(Rs(t))return gt("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return gt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Se.enqueueRetryable(function(){return e.Me(t)}),e.isPrimary=t})},i.prototype.Je=function(e){var t=this;return O(e).get(wo.key).next(function(s){return ct.resolve(t.tn(s))})},i.prototype.en=function(e){return V(e).delete(this.clientId)},i.prototype.nn=function(){return(0,q.mG)(this,void 0,void 0,function(){var e,t,s,a=this;return(0,q.Jh)(this,function(l){switch(l.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(h){var g=Ps(h,xo.store);return g.Nt().next(function(_){var b=a.rn(_,18e5),x=_.filter(function(S){return-1===b.indexOf(S)});return ct.forEach(x,function(S){return g.delete(S.clientId)}).next(function(){return x})})}).catch(function(){return[]})]);case 1:if(e=l.sent(),this.Qe)for(t=0,s=e;t<s.length;t++)this.Qe.removeItem(this.on(s[t].clientId));l.label=2;case 2:return[2]}})})},i.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.je().then(function(){return e.nn()}).then(function(){return e.ze()})})},i.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},i.prototype.Ye=function(e){var t=this;return this.Ce?ct.resolve(!0):O(e).get(wo.key).next(function(s){if(null!==s&&t.sn(s.leaseTimestampMs,5e3)&&!t.cn(s.ownerId)){if(t.tn(s)&&t.networkEnabled)return!0;if(!t.tn(s)){if(!s.allowTabSynchronization)throw new it(Ee.FAILED_PRECONDITION,w);return!1}}return!(!t.networkEnabled||!t.inForeground)||V(e).Nt().next(function(o){return void 0===t.rn(o,5e3).find(function(a){return!(t.clientId===a.clientId||!(!t.networkEnabled&&a.networkEnabled||!t.inForeground&&a.inForeground&&t.networkEnabled===a.networkEnabled))})})}).next(function(s){return t.isPrimary!==s&&gt("IndexedDbPersistence","Client "+(s?"is":"is not")+" eligible for a primary lease."),s})},i.prototype.shutdown=function(){return(0,q.mG)(this,void 0,void 0,function(){var e=this;return(0,q.Jh)(this,function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[wo.store,xo.store],function(s){var o=new Pn(s,Zs.o);return e.Xe(o).next(function(){return e.en(o)})})];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}})})},i.prototype.rn=function(e,t){var s=this;return e.filter(function(o){return s.sn(o.updateTimeMs,t)&&!s.cn(o.clientId)})},i.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return V(t).Nt().next(function(s){return e.rn(s,18e5).map(function(o){return o.clientId})})})},Object.defineProperty(i.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),i.prototype.getMutationQueue=function(e){return ac.Qt(e,this.R,this.Ut,this.referenceDelegate)},i.prototype.getTargetCache=function(){return this.qe},i.prototype.getRemoteDocumentCache=function(){return this.Ue},i.prototype.getIndexManager=function(){return this.Ut},i.prototype.getBundleCache=function(){return this.Ke},i.prototype.runTransaction=function(e,t,s){var a,o=this;return gt("IndexedDbPersistence","Starting transaction:",e),this.Be.runTransaction(e,"readonly"===t?"readonly":"readwrite",zb,function(h){return a=new Pn(h,o.Ne?o.Ne.next():Zs.o),"readwrite-primary"===t?o.Je(a).next(function(g){return!!g||o.Ye(a)}).next(function(g){if(!g)throw Tr("Failed to obtain primary lease for action '"+e+"'."),o.isPrimary=!1,o.Se.enqueueRetryable(function(){return o.Me(!1)}),new it(Ee.FAILED_PRECONDITION,yy);return s(a)}).next(function(g){return o.Ze(a).next(function(){return g})}):o.dn(a).next(function(){return s(a)})}).then(function(h){return a.raiseOnCommittedEvent(),h})},i.prototype.dn=function(e){var t=this;return O(e).get(wo.key).next(function(s){if(null!==s&&t.sn(s.leaseTimestampMs,5e3)&&!t.cn(s.ownerId)&&!t.tn(s)&&!(t.Ce||t.allowTabSynchronization&&s.allowTabSynchronization))throw new it(Ee.FAILED_PRECONDITION,w)})},i.prototype.Ze=function(e){var t=new wo(this.clientId,this.allowTabSynchronization,Date.now());return O(e).put(wo.key,t)},i.yt=function(){return Mu.yt()},i.prototype.Xe=function(e){var t=this,s=O(e);return s.get(wo.key).next(function(o){return t.tn(o)?(gt("IndexedDbPersistence","Releasing primary lease."),s.delete(wo.key)):ct.resolve()})},i.prototype.sn=function(e,t){var s=Date.now();return!(e<s-t||e>s&&(Tr("Detected an update time that is in the future: "+e+" > "+s),1))},i.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){e.Se.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},i.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},i.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ke=function(){t.un(),(0,gi.G6)()&&navigator.appVersion.match("Version/14")&&t.Se.enterRestrictedMode(!0),t.Se.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.ke))},i.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},i.prototype.cn=function(e){var t;try{var s=null!==(null===(t=this.Qe)||void 0===t?void 0:t.getItem(this.on(e)));return gt("IndexedDbPersistence","Client '"+e+"' "+(s?"is":"is not")+" zombied in LocalStorage"),s}catch(o){return Tr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}},i.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){Tr("Failed to set zombie client id.",e)}},i.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},i.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},i}();function O(i){return Ps(i,wo.store)}function V(i){return Ps(i,xo.store)}function H(i,e){var t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}var te=function(i,e){this.progress=i,this.wn=e},Pe=function(){function i(e,t,s){this.Ue=e,this._n=t,this.Ut=s}return i.prototype.mn=function(e,t){var s=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(o){return s.yn(e,t,o)})},i.prototype.yn=function(e,t,s){return this.Ue.getEntry(e,t).next(function(o){for(var a=0,l=s;a<l.length;a++)l[a].applyToLocalView(o);return o})},i.prototype.gn=function(e,t){e.forEach(function(s,o){for(var a=0,l=t;a<l.length;a++)l[a].applyToLocalView(o)})},i.prototype.pn=function(e,t){var s=this;return this.Ue.getEntries(e,t).next(function(o){return s.En(e,o).next(function(){return o})})},i.prototype.En=function(e,t){var s=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(o){return s.gn(t,o)})},i.prototype.getDocumentsMatchingQuery=function(e,t,s){return $t.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Tn(e,t.path):Lh(t)?this.In(e,t,s):this.An(e,t,s);var o},i.prototype.Tn=function(e,t){return this.mn(e,new $t(t)).next(function(s){var o=ra();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})},i.prototype.In=function(e,t,s){var o=this,a=t.collectionGroup,l=ra();return this.Ut.getCollectionParents(e,a).next(function(h){return ct.forEach(h,function(g){var b,x,_=(b=t,x=g.child(a),new Xl(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));return o.An(e,_,s).next(function(b){b.forEach(function(x,S){l=l.insert(x,S)})})}).next(function(){return l})})},i.prototype.An=function(e,t,s){var o,a,l=this;return this.Ue.getDocumentsMatchingQuery(e,t,s).next(function(h){return o=h,l._n.getAllMutationBatchesAffectingQuery(e,t)}).next(function(h){return l.Rn(e,a=h,o).next(function(g){o=g;for(var _=0,b=a;_<b.length;_++)for(var x=b[_],S=0,M=x.mutations;S<M.length;S++){var T=M[S],I=T.key,L=o.get(I);null==L&&(L=Jr.newInvalidDocument(I),o=o.insert(I,L)),Gh(T,L,x.localWriteTime),L.isFoundDocument()||(o=o.remove(I))}})}).next(function(){return o.forEach(function(h,g){Dd(t,g)||(o=o.remove(h))}),o})},i.prototype.Rn=function(e,t,s){for(var o=yi(),a=0,l=t;a<l.length;a++)for(var h=0,g=l[a].mutations;h<g.length;h++){var _=g[h];_ instanceof vu&&null===s.get(_.key)&&(o=o.add(_.key))}var b=s;return this.Ue.getEntries(e,o).next(function(x){return x.forEach(function(S,M){M.isFoundDocument()&&(b=b.insert(S,M))}),b})},i}(),Qe=function(){function i(e,t,s,o){this.targetId=e,this.fromCache=t,this.bn=s,this.vn=o}return i.Pn=function(e,t){for(var s=yi(),o=yi(),a=0,l=t.docChanges;a<l.length;a++){var h=l[a];switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:o=o.add(h.doc.key)}}return new i(e,t.fromCache,s,o)},i}(),En=function(){function i(){}return i.prototype.Vn=function(e){this.Sn=e},i.prototype.getDocumentsMatchingQuery=function(e,t,s,o){var l,a=this;return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||s.isEqual(Yn.min())?this.Dn(e,t):this.Sn.pn(e,o).next(function(l){var h=a.Cn(t,l);return(na(t)||Ed(t))&&a.Nn(t.limitType,h,o,s)?a.Dn(e,t):(Ih()<=Sa.in.DEBUG&&gt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ny(t)),a.Sn.getDocumentsMatchingQuery(e,t,s).next(function(g){return h.forEach(function(_){g=g.insert(_.key,_)}),g}))})},i.prototype.Cn=function(e,t){var s=new Ur(iy(e));return t.forEach(function(o,a){Dd(e,a)&&(s=s.add(a))}),s},i.prototype.Nn=function(e,t,s,o){if(s.size!==t.size)return!0;var a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)},i.prototype.Dn=function(e,t){return Ih()<=Sa.in.DEBUG&&gt("QueryEngine","Using full collection scan to execute query:",ny(t)),this.Sn.getDocumentsMatchingQuery(e,t,Yn.min())},i}(),ki=function(){function i(e,t,s,o){this.persistence=e,this.xn=t,this.R=o,this.kn=new cs(Kn),this.Fn=new Dl(function(a){return Cl(a)},xm),this.$n=Yn.min(),this._n=e.getMutationQueue(s),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new Pe(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return i.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(s){return e.collect(s,t.kn)})},i}();function vi(i,e,t,s){return new ki(i,e,t,s)}function hs(i,e){return(0,q.mG)(this,void 0,void 0,function(){var t,s,o,a;return(0,q.Jh)(this,function(l){switch(l.label){case 0:return t=_t(i),s=t._n,o=t.Mn,[4,t.persistence.runTransaction("Handle user change","readonly",function(h){var g;return t._n.getAllMutationBatches(h).next(function(_){return g=_,s=t.persistence.getMutationQueue(e),o=new Pe(t.On,s,t.persistence.getIndexManager()),s.getAllMutationBatches(h)}).next(function(_){for(var b=[],x=[],S=yi(),M=0,T=g;M<T.length;M++){var I=T[M];b.push(I.batchId);for(var L=0,k=I.mutations;L<k.length;L++)S=S.add(k[L].key)}for(var U=0,N=_;U<N.length;U++){var j=N[U];x.push(j.batchId);for(var K=0,ne=j.mutations;K<ne.length;K++)S=S.add(ne[K].key)}return o.pn(h,S).next(function(Re){return{Ln:Re,removedBatchIds:b,addedBatchIds:x}})})})];case 1:return a=l.sent(),[2,(t._n=s,t.Mn=o,t.xn.Vn(t.Mn),a)]}})})}function dc(i,e){var t=_t(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(s){var l,h,g,_,b,x,S,o=e.batch.keys(),a=t.On.newChangeBuffer({trackRemovals:!0});return(l=t,h=s,g=e,_=a,b=g.batch,x=b.keys(),S=ct.resolve(),x.forEach(function(M){S=S.next(function(){return _.getEntry(h,M)}).next(function(T){var I=g.docVersions.get(M);an(null!==I),T.version.compareTo(I)<0&&(b.applyToRemoteDocument(T,g),T.isValidDocument()&&_.addEntry(T,g.commitVersion))})}),S.next(function(){return l._n.removeMutationBatch(h,b)})).next(function(){return a.apply(s)}).next(function(){return t._n.performConsistencyCheck(s)}).next(function(){return t.Mn.pn(s,o)})})}function Pp(i){var e=_t(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function kN(i,e){var t=_t(i),s=e.snapshotVersion,o=t.kn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",function(a){var l=t.On.newChangeBuffer({trackRemovals:!0});o=t.kn;var h=[];e.targetChanges.forEach(function(b,x){var I,L,k,S=o.get(x);if(S){h.push(t.qe.removeMatchingKeys(a,b.removedDocuments,x).next(function(){return t.qe.addMatchingKeys(a,b.addedDocuments,x)}));var M=b.resumeToken;if(M.approximateByteSize()>0){var T=S.withResumeToken(M,s).withSequenceNumber(a.currentSequenceNumber);o=o.insert(x,T),I=S,k=b,an((L=T).resumeToken.approximateByteSize()>0),(0===I.resumeToken.approximateByteSize()||L.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8||k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0)&&h.push(t.qe.updateTargetData(a,T))}}});var g=ia();if(e.documentUpdates.forEach(function(b,x){e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),h.push(TD(a,l,e.documentUpdates,s,void 0).next(function(b){g=b})),!s.isEqual(Yn.min())){var _=t.qe.getLastRemoteSnapshotVersion(a).next(function(b){return t.qe.setTargetsMetadata(a,a.currentSequenceNumber,s)});h.push(_)}return ct.waitFor(h).next(function(){return l.apply(a)}).next(function(){return t.Mn.En(a,g)}).next(function(){return g})}).then(function(a){return t.kn=o,a})}function TD(i,e,t,s,o){var a=yi();return t.forEach(function(l){return a=a.add(l)}),e.getEntries(i,a).next(function(l){var h=ia();return t.forEach(function(g,_){var b=l.get(g),x=(null==o?void 0:o.get(g))||s;_.isNoDocument()&&_.version.isEqual(Yn.min())?(e.removeEntry(g,x),h=h.insert(g,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||0===_.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(_,x),h=h.insert(g,_)):gt("LocalStore","Ignoring outdated watch update for ",g,". Current version:",b.version," Watch version:",_.version)}),h})}function Wm(i,e){var t=_t(i);return t.persistence.runTransaction("Get next mutation batch","readonly",function(s){return void 0===e&&(e=-1),t._n.getNextMutationBatchAfterBatchId(s,e)})}function qm(i,e){var t=_t(i);return t.persistence.runTransaction("Allocate target","readwrite",function(s){var o;return t.qe.getTargetData(s,e).next(function(a){return a?ct.resolve(o=a):t.qe.allocateTargetId(s).next(function(l){return o=new Ui(e,l,0,s.currentSequenceNumber),t.qe.addTargetData(s,o).next(function(){return o})})})}).then(function(s){var o=t.kn.get(s.targetId);return(null===o||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.kn=t.kn.insert(s.targetId,s),t.Fn.set(e,s.targetId)),s})}function kp(i,e,t){return(0,q.mG)(this,void 0,void 0,function(){var s,o,a,l;return(0,q.Jh)(this,function(h){switch(h.label){case 0:s=_t(i),o=s.kn.get(e),a=t?"readwrite":"readwrite-primary",h.label=1;case 1:return h.trys.push([1,4,,5]),t?[3,3]:[4,s.persistence.runTransaction("Release target",a,function(g){return s.persistence.referenceDelegate.removeTarget(g,o)})];case 2:h.sent(),h.label=3;case 3:return[3,5];case 4:if(!Rs(l=h.sent()))throw l;return gt("LocalStore","Failed to update sequence numbers for target "+e+": "+l),[3,5];case 5:return s.kn=s.kn.remove(e),s.Fn.delete(o.target),[2]}})})}function Zb(i,e,t){var s=_t(i),o=Yn.min(),a=yi();return s.persistence.runTransaction("Execute query","readonly",function(l){return(h=s,g=l,_=Fo(e),b=_t(h),x=b.Fn.get(_),void 0!==x?ct.resolve(b.kn.get(x)):b.qe.getTargetData(g,_)).next(function(h){if(h)return o=h.lastLimboFreeSnapshotVersion,s.qe.getMatchingKeysForTargetId(l,h.targetId).next(function(g){a=g})}).next(function(){return s.xn.getDocumentsMatchingQuery(l,e,t?o:Yn.min(),t?a:yi())}).next(function(h){return{documents:h,Bn:a}});var h,g,_,b,x})}function KC(i,e){var t=_t(i),s=_t(t.qe),o=t.kn.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",function(a){return s.lt(a,e).next(function(l){return l?l.target:null})})}function Cy(i){var e=_t(i);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return o=t,a=e.$n,l=_t(e.On),h=ia(),g=Ap(a),_=Al(o),b=IDBKeyRange.lowerBound(g,!0),_.$t({index:Qi.readTimeIndex,range:b},function(x,S){var M=Ml(l.R,S);h=h.insert(M.key,M),g=S.readTime}).next(function(){return{wn:h,readTime:by(g)}});var o,a,l,h,g,_,b}).then(function(t){var s=t.wn;return e.$n=t.readTime,s})}function HR(i){return(0,q.mG)(this,void 0,void 0,function(){var e;return(0,q.Jh)(this,function(t){return[2,(e=_t(i)).persistence.runTransaction("Synchronize last document change read time","readonly",function(s){return a=Al(s),l=Yn.min(),a.$t({index:Qi.readTimeIndex,reverse:!0},function(h,g,_){g.readTime&&(l=by(g.readTime)),_.done()}).next(function(){return l});var a,l}).then(function(s){e.$n=s})]})})}function ID(i,e,t,s){return(0,q.mG)(this,void 0,void 0,function(){var o,a,l,h,g,_,b,x,S,M;return(0,q.Jh)(this,function(T){switch(T.label){case 0:for(o=_t(i),a=yi(),l=ia(),h=Rm(),g=0,_=t;g<_.length;g++)x=e.qn((b=_[g]).metadata.name),b.document&&(a=a.add(x)),l=l.insert(x,e.Un(b)),h=h.insert(x,e.Kn(b.metadata.readTime));return S=o.On.newChangeBuffer({trackRemovals:!0}),[4,qm(o,(I=s,Fo(Oh(mi.fromString("__bundle__/docs/"+I)))))];case 1:return M=T.sent(),[2,o.persistence.runTransaction("Apply bundle documents","readwrite",function(I){return TD(I,S,l,Yn.min(),h).next(function(L){return S.apply(I),L}).next(function(L){return o.qe.removeMatchingKeysForTargetId(I,M.targetId).next(function(){return o.qe.addMatchingKeys(I,a,M.targetId)}).next(function(){return o.Mn.En(I,L)}).next(function(){return L})})})]}var I})})}function zR(i,e,t){return void 0===t&&(t=yi()),(0,q.mG)(this,void 0,void 0,function(){var s,o;return(0,q.Jh)(this,function(a){switch(a.label){case 0:return[4,qm(i,Fo(Tp(e.bundledQuery)))];case 1:return s=a.sent(),[2,(o=_t(i)).persistence.runTransaction("Save named query","readwrite",function(l){var h=Gr(e.readTime);if(s.snapshotVersion.compareTo(h)>=0)return o.Ke.saveNamedQuery(l,e);var g=s.withResumeToken(Ks.EMPTY_BYTE_STRING,h);return o.kn=o.kn.insert(g.targetId,g),o.qe.updateTargetData(l,g).next(function(){return o.qe.removeMatchingKeysForTargetId(l,s.targetId)}).next(function(){return o.qe.addMatchingKeys(l,t,s.targetId)}).next(function(){return o.Ke.saveNamedQuery(l,e)})})]}})})}var jR=function(){function i(e){this.R=e,this.Qn=new Map,this.jn=new Map}return i.prototype.getBundleMetadata=function(e,t){return ct.resolve(this.Qn.get(t))},i.prototype.saveBundleMetadata=function(e,t){var s;return this.Qn.set(t.id,{id:(s=t).id,version:s.version,createTime:Gr(s.createTime)}),ct.resolve()},i.prototype.getNamedQuery=function(e,t){return ct.resolve(this.jn.get(t))},i.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,{name:(s=t).name,query:Tp(s.bundledQuery),readTime:Gr(s.readTime)}),ct.resolve();var s},i}(),JC=function(){function i(){this.Wn=new Ur(no.Gn),this.zn=new Ur(no.Hn)}return i.prototype.isEmpty=function(){return this.Wn.isEmpty()},i.prototype.addReference=function(e,t){var s=new no(e,t);this.Wn=this.Wn.add(s),this.zn=this.zn.add(s)},i.prototype.Jn=function(e,t){var s=this;e.forEach(function(o){return s.addReference(o,t)})},i.prototype.removeReference=function(e,t){this.Yn(new no(e,t))},i.prototype.Xn=function(e,t){var s=this;e.forEach(function(o){return s.removeReference(o,t)})},i.prototype.Zn=function(e){var t=this,s=new $t(new mi([])),o=new no(s,e),a=new no(s,e+1),l=[];return this.zn.forEachInRange([o,a],function(h){t.Yn(h),l.push(h.key)}),l},i.prototype.ts=function(){var e=this;this.Wn.forEach(function(t){return e.Yn(t)})},i.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},i.prototype.es=function(e){var t=new $t(new mi([])),s=new no(t,e),o=new no(t,e+1),a=yi();return this.zn.forEachInRange([s,o],function(l){a=a.add(l.key)}),a},i.prototype.containsKey=function(e){var t=new no(e,0),s=this.Wn.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)},i}(),no=function(){function i(e,t){this.key=e,this.ns=t}return i.Gn=function(e,t){return $t.comparator(e.key,t.key)||Kn(e.ns,t.ns)},i.Hn=function(e,t){return Kn(e.ns,t.ns)||$t.comparator(e.key,t.key)},i}(),WR=function(){function i(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new Ur(no.Gn)}return i.prototype.checkEmpty=function(e){return ct.resolve(0===this._n.length)},i.prototype.addMutationBatch=function(e,t,s,o){var a=this.ss;this.ss++;var l=new qh(a,t,s,o);this._n.push(l);for(var h=0,g=o;h<g.length;h++){var _=g[h];this.rs=this.rs.add(new no(_.key,a)),this.Ut.addToCollectionParentIndex(e,_.key.path.popLast())}return ct.resolve(l)},i.prototype.lookupMutationBatch=function(e,t){return ct.resolve(this.os(t))},i.prototype.getNextMutationBatchAfterBatchId=function(e,t){var o=this.cs(t+1),a=o<0?0:o;return ct.resolve(this._n.length>a?this._n[a]:null)},i.prototype.getHighestUnacknowledgedBatchId=function(){return ct.resolve(0===this._n.length?-1:this.ss-1)},i.prototype.getAllMutationBatches=function(e){return ct.resolve(this._n.slice())},i.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var s=this,o=new no(t,0),a=new no(t,Number.POSITIVE_INFINITY),l=[];return this.rs.forEachInRange([o,a],function(h){var g=s.os(h.ns);l.push(g)}),ct.resolve(l)},i.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var s=this,o=new Ur(Kn);return t.forEach(function(a){var l=new no(a,0),h=new no(a,Number.POSITIVE_INFINITY);s.rs.forEachInRange([l,h],function(g){o=o.add(g.ns)})}),ct.resolve(this.us(o))},i.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var s=t.path,o=s.length+1,a=s;$t.isDocumentKey(a)||(a=a.child(""));var l=new no(new $t(a),0),h=new Ur(Kn);return this.rs.forEachWhile(function(g){var _=g.key.path;return!!s.isPrefixOf(_)&&(_.length===o&&(h=h.add(g.ns)),!0)},l),ct.resolve(this.us(h))},i.prototype.us=function(e){var t=this,s=[];return e.forEach(function(o){var a=t.os(o);null!==a&&s.push(a)}),s},i.prototype.removeMutationBatch=function(e,t){var s=this;an(0===this.hs(t.batchId,"removed")),this._n.shift();var o=this.rs;return ct.forEach(t.mutations,function(a){var l=new no(a.key,t.batchId);return o=o.delete(l),s.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(function(){s.rs=o})},i.prototype.Gt=function(e){},i.prototype.containsKey=function(e,t){var s=new no(t,0),o=this.rs.firstAfterOrEqual(s);return ct.resolve(t.isEqual(o&&o.key))},i.prototype.performConsistencyCheck=function(e){return ct.resolve()},i.prototype.hs=function(e,t){return this.cs(e)},i.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},i.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},i}(),RD=function(){function i(e,t){this.Ut=e,this.ls=t,this.docs=new cs($t.comparator),this.size=0}return i.prototype.addEntry=function(e,t,s){var o=t.key,a=this.docs.get(o),l=a?a.size:0,h=this.ls(t);return this.docs=this.docs.insert(o,{document:t.clone(),size:h,readTime:s}),this.size+=h-l,this.Ut.addToCollectionParentIndex(e,o.path.popLast())},i.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},i.prototype.getEntry=function(e,t){var s=this.docs.get(t);return ct.resolve(s?s.document.clone():Jr.newInvalidDocument(t))},i.prototype.getEntries=function(e,t){var s=this,o=ia();return t.forEach(function(a){var l=s.docs.get(a);o=o.insert(a,l?l.document.clone():Jr.newInvalidDocument(a))}),ct.resolve(o)},i.prototype.getDocumentsMatchingQuery=function(e,t,s){for(var o=ia(),a=new $t(t.path.child("")),l=this.docs.getIteratorFrom(a);l.hasNext();){var h=l.getNext(),_=h.value,b=_.document,x=_.readTime;if(!t.path.isPrefixOf(h.key.path))break;x.compareTo(s)<=0||Dd(t,b)&&(o=o.insert(b.key,b.clone()))}return ct.resolve(o)},i.prototype.fs=function(e,t){return ct.forEach(this.docs,function(s){return t(s)})},i.prototype.newChangeBuffer=function(e){return new qR(this)},i.prototype.getSize=function(e){return ct.resolve(this.size)},i}(),qR=function(i){function e(t){var s=this;return(s=i.call(this)||this).Ie=t,s}return(0,q.ZT)(e,i),e.prototype.applyChanges=function(t){var s=this,o=[];return this.changes.forEach(function(a,l){l.document.isValidDocument()?o.push(s.Ie.addEntry(t,l.document,s.getReadTime(a))):s.Ie.removeEntry(a)}),ct.waitFor(o)},e.prototype.getFromCache=function(t,s){return this.Ie.getEntry(t,s)},e.prototype.getAllFromCache=function(t,s){return this.Ie.getEntries(t,s)},e}(wr),PD=function(){function i(e){this.persistence=e,this.ds=new Dl(function(t){return Cl(t)},xm),this.lastRemoteSnapshotVersion=Yn.min(),this.highestTargetId=0,this.ws=0,this._s=new JC,this.targetCount=0,this.ys=rl.Jt()}return i.prototype.forEachTarget=function(e,t){return this.ds.forEach(function(s,o){return t(o)}),ct.resolve()},i.prototype.getLastRemoteSnapshotVersion=function(e){return ct.resolve(this.lastRemoteSnapshotVersion)},i.prototype.getHighestSequenceNumber=function(e){return ct.resolve(this.ws)},i.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),ct.resolve(this.highestTargetId)},i.prototype.setTargetsMetadata=function(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ws&&(this.ws=t),ct.resolve()},i.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new rl(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},i.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,ct.resolve()},i.prototype.updateTargetData=function(e,t){return this.te(t),ct.resolve()},i.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,ct.resolve()},i.prototype.removeTargets=function(e,t,s){var o=this,a=0,l=[];return this.ds.forEach(function(h,g){g.sequenceNumber<=t&&null===s.get(g.targetId)&&(o.ds.delete(h),l.push(o.removeMatchingKeysForTargetId(e,g.targetId)),a++)}),ct.waitFor(l).next(function(){return a})},i.prototype.getTargetCount=function(e){return ct.resolve(this.targetCount)},i.prototype.getTargetData=function(e,t){var s=this.ds.get(t)||null;return ct.resolve(s)},i.prototype.addMatchingKeys=function(e,t,s){return this._s.Jn(t,s),ct.resolve()},i.prototype.removeMatchingKeys=function(e,t,s){this._s.Xn(t,s);var o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(function(l){a.push(o.markPotentiallyOrphaned(e,l))}),ct.waitFor(a)},i.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),ct.resolve()},i.prototype.getMatchingKeysForTargetId=function(e,t){var s=this._s.es(t);return ct.resolve(s)},i.prototype.containsKey=function(e,t){return ct.resolve(this._s.containsKey(t))},i}(),kD=function(){function i(e,t){var s=this;this.gs={},this.Ne=new Zs(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new PD(this),this.Ut=new Rp,this.Ue=new RD(this.Ut,function(l){return s.referenceDelegate.ps(l)}),this.R=new Yh(t),this.Ke=new jR(this.R)}return i.prototype.start=function(){return Promise.resolve()},i.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(i.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),i.prototype.setDatabaseDeletedListener=function(){},i.prototype.setNetworkEnabled=function(){},i.prototype.getIndexManager=function(){return this.Ut},i.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new WR(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},i.prototype.getTargetCache=function(){return this.qe},i.prototype.getRemoteDocumentCache=function(){return this.Ue},i.prototype.getBundleCache=function(){return this.Ke},i.prototype.runTransaction=function(e,t,s){var o=this;gt("MemoryPersistence","Starting transaction:",e);var a=new QC(this.Ne.next());return this.referenceDelegate.Es(),s(a).next(function(l){return o.referenceDelegate.Ts(a).next(function(){return l})}).toPromise().then(function(l){return a.raiseOnCommittedEvent(),l})},i.prototype.Is=function(e,t){return ct.or(Object.values(this.gs).map(function(s){return function(){return s.containsKey(e,t)}}))},i}(),QC=function(i){function e(t){var s=this;return(s=i.call(this)||this).currentSequenceNumber=t,s}return(0,q.ZT)(e,i),e}(ZC),ON=function(){function i(e){this.persistence=e,this.As=new JC,this.Rs=null}return i.bs=function(e){return new i(e)},Object.defineProperty(i.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Kt()},enumerable:!1,configurable:!0}),i.prototype.addReference=function(e,t,s){return this.As.addReference(s,t),this.vs.delete(s.toString()),ct.resolve()},i.prototype.removeReference=function(e,t,s){return this.As.removeReference(s,t),this.vs.add(s.toString()),ct.resolve()},i.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),ct.resolve()},i.prototype.removeTarget=function(e,t){var s=this;this.As.Zn(t.targetId).forEach(function(a){return s.vs.add(a.toString())});var o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(function(a){a.forEach(function(l){return s.vs.add(l.toString())})}).next(function(){return o.removeTargetData(e,t)})},i.prototype.Es=function(){this.Rs=new Set},i.prototype.Ts=function(e){var t=this,s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ct.forEach(this.vs,function(o){var a=$t.fromPath(o);return t.Ps(e,a).next(function(l){l||s.removeEntry(a)})}).next(function(){return t.Rs=null,s.apply(e)})},i.prototype.updateLimboDocument=function(e,t){var s=this;return this.Ps(e,t).next(function(o){o?s.vs.delete(t.toString()):s.vs.add(t.toString())})},i.prototype.ps=function(e){return 0},i.prototype.Ps=function(e,t){var s=this;return ct.or([function(){return ct.resolve(s.As.containsKey(t))},function(){return s.persistence.getTargetCache().containsKey(e,t)},function(){return s.persistence.Is(e,t)}])},i}(),ks=function(){function i(e){this.uid=e}return i.prototype.isAuthenticated=function(){return null!=this.uid},i.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},i.prototype.isEqual=function(e){return e.uid===this.uid},i}();function OD(i,e){return"firestore_clients_"+i+"_"+e}function YR(i,e,t){var s="firestore_mutations_"+i+"_"+t;return e.isAuthenticated()&&(s+="_"+e.uid),s}function Op(i,e){return"firestore_targets_"+i+"_"+e}ks.UNAUTHENTICATED=new ks(null),ks.GOOGLE_CREDENTIALS=new ks("google-credentials-uid"),ks.FIRST_PARTY=new ks("first-party-uid"),ks.MOCK_USER=new ks("mock-user");var XC=function(){function i(e,t,s,o){this.user=e,this.batchId=t,this.state=s,this.error=o}return i.Vs=function(e,t,s){var o,a=JSON.parse(s),l="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return l&&a.error&&(l="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(o=new it(a.error.code,a.error.message)),l?new i(e,t,a.state,o):(Tr("SharedClientState","Failed to parse mutation state for ID '"+t+"': "+s),null)},i.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},i}(),Sy=function(){function i(e,t,s){this.targetId=e,this.state=t,this.error=s}return i.Vs=function(e,t){var s,o=JSON.parse(t),a="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(s=new it(o.error.code,o.error.message)),a?new i(e,o.state,s):(Tr("SharedClientState","Failed to parse target state for ID '"+e+"': "+t),null)},i.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},i}(),Kb=function(){function i(e,t){this.clientId=e,this.activeTargetIds=t}return i.Vs=function(e,t){for(var s=JSON.parse(t),o="object"==typeof s&&s.activeTargetIds instanceof Array,a=km(),l=0;o&&l<s.activeTargetIds.length;++l)o=wd(s.activeTargetIds[l]),a=a.add(s.activeTargetIds[l]);return o?new i(e,a):(Tr("SharedClientState","Failed to parse client data for instance '"+e+"': "+t),null)},i}(),$R=function(){function i(e,t){this.clientId=e,this.onlineState=t}return i.Vs=function(e){var t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new i(t.clientId,t.onlineState):(Tr("SharedClientState","Failed to parse online state: "+e),null)},i}(),My=function(){function i(){this.activeTargetIds=km()}return i.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},i.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},i.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},i}(),Ey=function(){function i(e,t,s,o,a){this.window=e,this.Se=t,this.persistenceKey=s,this.Ns=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new cs(Kn),this.started=!1,this.$s=[];var l=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Os=OD(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new My),this.Ls=new RegExp("^firestore_clients_"+l+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+l+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+l+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks=function(h){return"firestore_bundle_loaded_"+h}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return i.yt=function(e){return!(!e||!e.localStorage)},i.prototype.start=function(){return(0,q.mG)(this,void 0,void 0,function(){var e,t,s,o,a,l,h,g,_,b,S=this;return(0,q.Jh)(this,function(M){switch(M.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=M.sent(),t=0,s=e;t<s.length;t++)(o=s[t])!==this.Ns&&(a=this.getItem(OD(this.persistenceKey,o)))&&(l=Kb.Vs(o,a))&&(this.Fs=this.Fs.insert(l.clientId,l));for(this.Qs(),(h=this.storage.getItem(this.Us))&&(g=this.js(h))&&this.Ws(g),_=0,b=this.$s;_<b.length;_++)this.ks(b[_]);return this.$s=[],this.window.addEventListener("pagehide",function(){return S.shutdown()}),this.started=!0,[2]}})})},i.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},i.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},i.prototype.isActiveQueryTarget=function(e){var t=!1;return this.Fs.forEach(function(s,o){o.activeTargetIds.has(e)&&(t=!0)}),t},i.prototype.addPendingMutation=function(e){this.zs(e,"pending")},i.prototype.updateMutationState=function(e,t,s){this.zs(e,t,s),this.Hs(e)},i.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var s=this.storage.getItem(Op(this.persistenceKey,e));if(s){var o=Sy.Vs(e,s);o&&(t=o.state)}}return this.Js.Ds(e),this.Qs(),t},i.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},i.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},i.prototype.clearQueryState=function(e){this.removeItem(Op(this.persistenceKey,e))},i.prototype.updateQueryState=function(e,t,s){this.Ys(e,t,s)},i.prototype.handleUserChange=function(e,t,s){var o=this;t.forEach(function(a){o.Hs(a)}),this.currentUser=e,s.forEach(function(a){o.addPendingMutation(a)})},i.prototype.setOnlineState=function(e){this.Xs(e)},i.prototype.notifyBundleLoaded=function(){this.Zs()},i.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},i.prototype.getItem=function(e){var t=this.storage.getItem(e);return gt("SharedClientState","READ",e,t),t},i.prototype.setItem=function(e,t){gt("SharedClientState","SET",e,t),this.storage.setItem(e,t)},i.prototype.removeItem=function(e){gt("SharedClientState","REMOVE",e),this.storage.removeItem(e)},i.prototype.ks=function(e){var t=this,s=e;if(s.storageArea===this.storage){if(gt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.Os)return void Tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,q.mG)(t,void 0,void 0,function(){var o,a,l,h,g,_;return(0,q.Jh)(this,function(b){if(this.started){if(null!==s.key)if(this.Ls.test(s.key)){if(null==s.newValue)return o=this.ti(s.key),[2,this.ei(o,null)];if(a=this.ni(s.key,s.newValue))return[2,this.ei(a.clientId,a)]}else if(this.Bs.test(s.key)){if(null!==s.newValue&&(l=this.si(s.key,s.newValue)))return[2,this.ii(l)]}else if(this.qs.test(s.key)){if(null!==s.newValue&&(h=this.ri(s.key,s.newValue)))return[2,this.oi(h)]}else if(s.key===this.Us){if(null!==s.newValue&&(g=this.js(s.newValue)))return[2,this.Ws(g)]}else if(s.key===this.Ms)(_=function(x){var S=Zs.o;if(null!=x)try{var M=JSON.parse(x);an("number"==typeof M),S=M}catch(T){Tr("SharedClientState","Failed to read sequence number from WebStorage",T)}return S}(s.newValue))!==Zs.o&&this.sequenceNumberHandler(_);else if(s.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(s);return[2]})})})}},Object.defineProperty(i.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),i.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},i.prototype.zs=function(e,t,s){var o=new XC(this.currentUser,e,t,s),a=YR(this.persistenceKey,this.currentUser,e);this.setItem(a,o.Ss())},i.prototype.Hs=function(e){var t=YR(this.persistenceKey,this.currentUser,e);this.removeItem(t)},i.prototype.Xs=function(e){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:e}))},i.prototype.Ys=function(e,t,s){var o=Op(this.persistenceKey,e),a=new Sy(e,t,s);this.setItem(o,a.Ss())},i.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},i.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},i.prototype.ni=function(e,t){var s=this.ti(e);return Kb.Vs(s,t)},i.prototype.si=function(e,t){var s=this.Bs.exec(e),o=Number(s[1]);return XC.Vs(new ks(void 0!==s[2]?s[2]:null),o,t)},i.prototype.ri=function(e,t){var s=this.qs.exec(e),o=Number(s[1]);return Sy.Vs(o,t)},i.prototype.js=function(e){return $R.Vs(e)},i.prototype.ii=function(e){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(gt("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},i.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},i.prototype.ei=function(e,t){var s=this,o=t?this.Fs.insert(e,t):this.Fs.remove(e),a=this.Gs(this.Fs),l=this.Gs(o),h=[],g=[];return l.forEach(function(_){a.has(_)||h.push(_)}),a.forEach(function(_){l.has(_)||g.push(_)}),this.syncEngine.hi(h,g).then(function(){s.Fs=o})},i.prototype.Ws=function(e){this.Fs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},i.prototype.Gs=function(e){var t=km();return e.forEach(function(s,o){t=t.unionWith(o.activeTargetIds)}),t},i}(),eS=function(){function i(){this.li=new My,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return i.prototype.addPendingMutation=function(e){},i.prototype.updateMutationState=function(e,t,s){},i.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},i.prototype.updateQueryState=function(e,t,s){this.fi[e]=t},i.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},i.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},i.prototype.clearQueryState=function(e){delete this.fi[e]},i.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},i.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},i.prototype.start=function(){return this.li=new My,Promise.resolve()},i.prototype.handleUserChange=function(e,t,s){},i.prototype.setOnlineState=function(e){},i.prototype.shutdown=function(){},i.prototype.writeSequenceNumber=function(e){},i.prototype.notifyBundleLoaded=function(){},i}(),FN=function(){function i(){}return i.prototype.di=function(e){},i.prototype.shutdown=function(){},i}(),FD=function(){function i(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return i.prototype.di=function(e){this.gi.push(e)},i.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},i.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},i.prototype._i=function(){gt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},i.prototype.yi=function(){gt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},i.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},i}(),tS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},nS=function(){function i(e){this.Ei=e.Ei,this.Ti=e.Ti}return i.prototype.Ii=function(e){this.Ai=e},i.prototype.Ri=function(e){this.bi=e},i.prototype.onMessage=function(e){this.vi=e},i.prototype.close=function(){this.Ti()},i.prototype.send=function(e){this.Ei(e)},i.prototype.Pi=function(){this.Ai()},i.prototype.Vi=function(e){this.bi(e)},i.prototype.Si=function(e){this.vi(e)},i}(),LD=function(i){function e(t){var s=this;return(s=i.call(this,t)||this).forceLongPolling=t.forceLongPolling,s.autoDetectLongPolling=t.autoDetectLongPolling,s.useFetchStreams=t.useFetchStreams,s}return(0,q.ZT)(e,i),e.prototype.Fi=function(t,s,o,a){return new Promise(function(l,h){var g=new cp;g.listenOnce(q_.COMPLETE,function(){try{switch(g.getLastErrorCode()){case ap.NO_ERROR:var b=g.getResponseJson();gt("Connection","XHR received:",JSON.stringify(b)),l(b);break;case ap.TIMEOUT:gt("Connection",'RPC "'+t+'" timed out'),h(new it(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case ap.HTTP_ERROR:var x=g.getStatus();if(gt("Connection",'RPC "'+t+'" failed with status:',x,"response text:",g.getResponseText()),x>0){var S=g.getResponseJson().error;if(S&&S.status&&S.message){var M=(I=S.status.toLowerCase().replace(/_/g,"-"),Object.values(Ee).indexOf(I)>=0?I:Ee.UNKNOWN);h(new it(M,S.message))}else h(new it(Ee.UNKNOWN,"Server responded with status "+g.getStatus()))}else h(new it(Ee.UNAVAILABLE,"Connection failed."));break;default:Kt()}}finally{gt("Connection",'RPC "'+t+'" completed.')}var I});var _=JSON.stringify(a);g.send(s,"POST",_,o,15)})},e.prototype.Oi=function(t,s){var o=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=new op,l=Ja(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new Y_({})),this.ki(h.initMessageHeaders,s),(0,gi.uI)()||(0,gi.b$)()||(0,gi.d)()||(0,gi.w1)()||(0,gi.Mn)()||(0,gi.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");var g=o.join("");gt("Connection","Creating WebChannel: "+g,h);var _=a.createWebChannel(g,h),b=!1,x=!1,S=new nS({Ei:function(T){x?gt("Connection","Not sending because WebChannel is closed:",T):(b||(gt("Connection","Opening WebChannel transport."),_.open(),b=!0),gt("Connection","WebChannel sending:",T),_.send(T))},Ti:function(){return _.close()}}),M=function(T,I,L){T.listen(I,function(k){try{L(k)}catch(R){setTimeout(function(){throw R},0)}})};return M(_,lp.EventType.OPEN,function(){x||gt("Connection","WebChannel transport opened.")}),M(_,lp.EventType.CLOSE,function(){x||(x=!0,gt("Connection","WebChannel transport closed"),S.Vi())}),M(_,lp.EventType.ERROR,function(T){x||(x=!0,_d("Connection","WebChannel transport errored:",T),S.Vi(new it(Ee.UNAVAILABLE,"The operation could not be completed")))}),M(_,lp.EventType.MESSAGE,function(T){var I;if(!x){var L=T.data[0];an(!!L);var R=L.error||(null===(I=L[0])||void 0===I?void 0:I.error);if(R){gt("Connection","WebChannel received error:",R);var U=R.status,N=function(K){var ne=Vr[K];if(void 0!==ne)return Im(ne)}(U),j=R.message;void 0===N&&(N=Ee.INTERNAL,j="Unknown error status: "+U+" with message "+R.message),x=!0,S.Vi(new it(N,j)),_.close()}else gt("Connection","WebChannel received:",L),S.Si(L)}}),M(l,Kl.STAT_EVENT,function(T){T.stat===gm_PROXY?gt("Connection","Detected buffering proxy"):T.stat===gm_NOPROXY&&gt("Connection","Detected no buffering proxy")}),setTimeout(function(){S.Pi()},0),S},e}(function(){function i(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Di=(e.ssl?"https":"http")+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return i.prototype.Ni=function(e,t,s,o){var a=this.xi(e,t);gt("RestConnection","Sending: ",a,s);var l={};return this.ki(l,o),this.Fi(e,a,l,s).then(function(h){return gt("RestConnection","Received: ",h),h},function(h){throw _d("RestConnection",e+" failed with error: ",h,"url: ",a,"request:",s),h})},i.prototype.$i=function(e,t,s,o){return this.Ni(e,t,s,o)},i.prototype.ki=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var s in t.authHeaders)t.authHeaders.hasOwnProperty(s)&&(e[s]=t.authHeaders[s])},i.prototype.xi=function(e,t){return this.Di+"/v1/"+t+":"+tS[e]},i}());function iS(){return"undefined"!=typeof window?window:null}function Ym(){return"undefined"!=typeof document?document:null}function $m(i){return new fy(i,!0)}var Jb=function(){function i(e,t,s,o,a){void 0===s&&(s=1e3),void 0===o&&(o=1.5),void 0===a&&(a=6e4),this.Se=e,this.timerId=t,this.Mi=s,this.Li=o,this.Bi=a,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return i.prototype.reset=function(){this.qi=0},i.prototype.Qi=function(){this.qi=this.Bi},i.prototype.ji=function(e){var t=this;this.cancel();var s=Math.floor(this.qi+this.Wi()),o=Math.max(0,Date.now()-this.Ki),a=Math.max(0,s-o);a>0&&gt("ExponentialBackoff","Backing off for "+a+" ms (base delay: "+this.qi+" ms, delay with jitter: "+s+" ms, last attempt: "+o+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,a,function(){return t.Ki=Date.now(),e()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},i.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},i.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},i.prototype.Wi=function(){return(Math.random()-.5)*this.qi},i}(),Qb=function(){function i(e,t,s,o,a,l){this.Se=e,this.zi=s,this.Hi=o,this.Ji=a,this.listener=l,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Jb(e,t)}return i.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},i.prototype.er=function(){return 2===this.state},i.prototype.start=function(){3!==this.state?this.auth():this.nr()},i.prototype.stop=function(){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},i.prototype.sr=function(){this.state=0,this.Zi.reset()},i.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return e.rr()}))},i.prototype.cr=function(e){this.ur(),this.stream.send(e)},i.prototype.rr=function(){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(e){return this.er()?[2,this.close(0)]:[2]})})},i.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},i.prototype.close=function(e,t){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(s){switch(s.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===Ee.RESOURCE_EXHAUSTED?(Tr(t.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):t&&t.code===Ee.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return s.sent(),[2]}})})},i.prototype.ar=function(){},i.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),s=this.Yi;this.Ji.getToken().then(function(o){e.Yi===s&&e.lr(o)},function(o){t(function(){var a=new it(Ee.UNKNOWN,"Fetching auth token failed: "+o.message);return e.dr(a)})})},i.prototype.lr=function(e){var t=this,s=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(function(){s(function(){return t.state=2,t.listener.Ii()})}),this.stream.Ri(function(o){s(function(){return t.dr(o)})}),this.stream.onMessage(function(o){s(function(){return t.onMessage(o)})})},i.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji(function(){return(0,q.mG)(e,void 0,void 0,function(){return(0,q.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},i.prototype.dr=function(e){return gt("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},i.prototype.hr=function(e){var t=this;return function(s){t.Se.enqueueAndForget(function(){return t.Yi===e?s():(gt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},i}(),rS=function(i){function e(t,s,o,a,l){var h=this;return(h=i.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",s,o,l)||this).R=a,h}return(0,q.ZT)(e,i),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var s=function(a,l){var h,L;if("targetChange"in l){var g="NO_CHANGE"===(L=l.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===L?1:"REMOVE"===L?2:"CURRENT"===L?3:"RESET"===L?4:Kt(),_=l.targetChange.targetIds||[],b=function(L,k){return L.I?(an(void 0===k||"string"==typeof k),Ks.fromBase64String(k||"")):(an(void 0===k||k instanceof Uint8Array),Ks.fromUint8Array(k||new Uint8Array))}(a,l.targetChange.resumeToken),x=(S=l.targetChange.cause)&&function(L){var k=void 0===L.code?Ee.UNKNOWN:Im(L.code);return new it(k,L.message||"")}(S);h=new Lb(g,_,b,x||null)}else if("documentChange"in l){_=sa(a,(g=l.documentChange).document.name),b=Gr(g.document.updateTime);var S=new Ts({mapValue:{fields:g.document.fields}}),M=(x=Jr.newFoundDocument(_,b,S),g.targetIds||[]);h=new Rd(M,g.removedTargetIds||[],x.key,x)}else if("documentDelete"in l)_=sa(a,(g=l.documentDelete).document),b=g.readTime?Gr(g.readTime):Yn.min(),S=Jr.newNoDocument(_,b),h=new Rd([],x=g.removedTargetIds||[],S.key,S);else if("documentRemove"in l)_=sa(a,(g=l.documentRemove).document),h=new Rd([],b=g.removedTargetIds||[],_,null);else{if(!("filter"in l))return Kt();var I=l.filter;_=new cy(g=I.count||0),h=new hy(b=I.targetId,_)}return h}(this.R,t),o=function(a){if(!("targetChange"in a))return Yn.min();var l=a.targetChange;return l.targetIds&&l.targetIds.length?Yn.min():l.readTime?Gr(l.readTime):Yn.min()}(t);return this.listener._r(s,o)},e.prototype.mr=function(t){var a,l,h,g,s={};s.database=ka(this.R),s.addTarget=(a=this.R,(h=pp(g=(l=t).target)?{documents:Ep(a,g)}:{query:oa(a,g)}).targetId=l.targetId,l.resumeToken.approximateByteSize()>0?h.resumeToken=bu(a,l.resumeToken):l.snapshotVersion.compareTo(Yn.min())>0&&(h.readTime=Pd(a,l.snapshotVersion.toTimestamp())),h);var o=function(a,l){var h=function(g,_){switch(_){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Kt()}}(0,l.purpose);return null==h?null:{"goog-listen-tags":h}}(0,t);o&&(s.labels=o),this.cr(s)},e.prototype.yr=function(t){var s={};s.database=ka(this.R),s.removeTarget=t,this.cr(s)},e}(Qb),ZR=function(i){function e(t,s,o,a,l){var h=this;return(h=i.call(this,t,"write_stream_connection_backoff","write_stream_idle",s,o,l)||this).R=a,h.gr=!1,h}return(0,q.ZT)(e,i),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,i.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(an(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var s=(l=t.commitTime,(a=t.writeResults)&&a.length>0?(an(void 0!==l),a.map(function(h){return _=l,(b=Gr((g=h).updateTime?g.updateTime:_)).isEqual(Yn.min())&&(b=Gr(_)),new Am(b,g.transformResults||[]);var g,_,b})):[]),o=Gr(t.commitTime);return this.listener.Tr(o,s)}var a,l;return an(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=ka(this.R),this.cr(t)},e.prototype.Er=function(t){var s=this,o={streamToken:this.lastStreamToken,writes:t.map(function(a){return xu(s.R,a)})};this.cr(o)},e}(Qb),ND=function(i){function e(t,s,o){var a=this;return(a=i.call(this)||this).credentials=t,a.Hi=s,a.R=o,a.Rr=!1,a}return(0,q.ZT)(e,i),e.prototype.br=function(){if(this.Rr)throw new it(Ee.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,s,o){var a=this;return this.br(),this.credentials.getToken().then(function(l){return a.Hi.Ni(t,s,o,l)}).catch(function(l){throw"FirebaseError"===l.name?(l.code===Ee.UNAUTHENTICATED&&a.credentials.invalidateToken(),l):new it(Ee.UNKNOWN,l.toString())})},e.prototype.$i=function(t,s,o){var a=this;return this.br(),this.credentials.getToken().then(function(l){return a.Hi.$i(t,s,o,l)}).catch(function(l){throw"FirebaseError"===l.name?(l.code===Ee.UNAUTHENTICATED&&a.credentials.invalidateToken(),l):new it(Ee.UNKNOWN,l.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),BD=function(){function i(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return i.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()}))},i.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},i.prototype.set=function(e){this.kr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},i.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},i.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Tr(t),this.Vr=!1):gt("OnlineStateTracker",t)},i.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},i}(),sS=function(i,e,t,s,o){var a=this;this.localStore=i,this.datastore=e,this.asyncQueue=t,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=o,this.Lr.di(function(l){t.enqueueAndForget(function(){return(0,q.mG)(a,void 0,void 0,function(){return(0,q.Jh)(this,function(h){switch(h.label){case 0:return Nd(this)?(gt("RemoteStore","Restarting streams for network reachability change."),[4,function(g){return(0,q.mG)(this,void 0,void 0,function(){var _;return(0,q.Jh)(this,function(b){switch(b.label){case 0:return(_=_t(g)).Or.add(4),[4,Km(_)];case 1:return b.sent(),_.Br.set("Unknown"),_.Or.delete(4),[4,Zm(_)];case 2:return b.sent(),[2]}})})}(this)]):[3,2];case 1:h.sent(),h.label=2;case 2:return[2]}})})})}),this.Br=new BD(t,s)};function Zm(i){return(0,q.mG)(this,void 0,void 0,function(){var e,t;return(0,q.Jh)(this,function(s){switch(s.label){case 0:if(!Nd(i))return[3,4];e=0,t=i.Mr,s.label=1;case 1:return e<t.length?[4,(0,t[e])(!0)]:[3,4];case 2:s.sent(),s.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Km(i){return(0,q.mG)(this,void 0,void 0,function(){var e,t;return(0,q.Jh)(this,function(s){switch(s.label){case 0:e=0,t=i.Mr,s.label=1;case 1:return e<t.length?[4,(0,t[e])(!1)]:[3,4];case 2:s.sent(),s.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Dy(i,e){var t=_t(i);t.$r.has(e.targetId)||(t.$r.set(e.targetId,e),tw(t)?ew(t):Fp(t).er()&&Ay(t,e))}function Jm(i,e){var t=_t(i),s=Fp(t);t.$r.delete(e),s.er()&&Xb(t,e),0===t.$r.size&&(s.er()?s.ir():Nd(t)&&t.Br.set("Unknown"))}function Ay(i,e){i.qr.U(e.targetId),Fp(i).mr(e)}function Xb(i,e){i.qr.U(e),Fp(i).yr(e)}function ew(i){i.qr=new zh({getRemoteKeysForTarget:function(e){return i.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return i.$r.get(e)||null}}),Fp(i).start(),i.Br.Sr()}function tw(i){return Nd(i)&&!Fp(i).tr()&&i.$r.size>0}function Nd(i){return 0===_t(i).Or.size}function oS(i){i.qr=void 0}function VD(i){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(e){return i.$r.forEach(function(t,s){Ay(i,t)}),[2]})})}function UD(i,e){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(t){return oS(i),tw(i)?(i.Br.Nr(e),ew(i)):i.Br.set("Unknown"),[2]})})}function GD(i,e,t){return(0,q.mG)(this,void 0,void 0,function(){var s,o,a;return(0,q.Jh)(this,function(l){switch(l.label){case 0:if(i.Br.set("Online"),!(e instanceof Lb&&2===e.state&&e.cause))return[3,6];l.label=1;case 1:return l.trys.push([1,3,,5]),[4,function(h,g){return(0,q.mG)(this,void 0,void 0,function(){var _,b,x,S;return(0,q.Jh)(this,function(M){switch(M.label){case 0:_=g.cause,b=0,x=g.targetIds,M.label=1;case 1:return b<x.length?h.$r.has(S=x[b])?[4,h.remoteSyncer.rejectListen(S,_)]:[3,3]:[3,5];case 2:M.sent(),h.$r.delete(S),h.qr.removeTarget(S),M.label=3;case 3:M.label=4;case 4:return b++,[3,1];case 5:return[2]}})})}(i,e)];case 2:return l.sent(),[3,5];case 3:return s=l.sent(),gt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),[4,Ty(i,s)];case 4:return l.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Rd?i.qr.X(e):e instanceof hy?i.qr.rt(e):i.qr.et(e),t.isEqual(Yn.min()))return[3,13];l.label=7;case 7:return l.trys.push([7,11,,13]),[4,Pp(i.localStore)];case 8:return o=l.sent(),t.compareTo(o)>=0?[4,(h=i,g=t,_=h.qr.ut(g),_.targetChanges.forEach(function(b,x){if(b.resumeToken.approximateByteSize()>0){var S=h.$r.get(x);S&&h.$r.set(x,S.withResumeToken(b.resumeToken,g))}}),_.targetMismatches.forEach(function(b){var x=h.$r.get(b);if(x){h.$r.set(b,x.withResumeToken(Ks.EMPTY_BYTE_STRING,x.snapshotVersion)),Xb(h,b);var S=new Ui(x.target,b,1,x.sequenceNumber);Ay(h,S)}}),h.remoteSyncer.applyRemoteEvent(_))]:[3,10];case 9:l.sent(),l.label=10;case 10:return[3,13];case 11:return gt("RemoteStore","Failed to raise snapshot:",a=l.sent()),[4,Ty(i,a)];case 12:return l.sent(),[3,13];case 13:return[2]}var h,g,_})})}function Ty(i,e,t){return(0,q.mG)(this,void 0,void 0,function(){var s=this;return(0,q.Jh)(this,function(o){switch(o.label){case 0:if(!Rs(e))throw e;return i.Or.add(1),[4,Km(i)];case 1:return o.sent(),i.Br.set("Offline"),t||(t=function(){return Pp(i.localStore)}),i.asyncQueue.enqueueRetryable(function(){return(0,q.mG)(s,void 0,void 0,function(){return(0,q.Jh)(this,function(a){switch(a.label){case 0:return gt("RemoteStore","Retrying IndexedDB access"),[4,t()];case 1:return a.sent(),i.Or.delete(1),[4,Zm(i)];case 2:return a.sent(),[2]}})})}),[2]}})})}function KR(i,e){return e().catch(function(t){return Ty(i,t,e)})}function Qm(i){return(0,q.mG)(this,void 0,void 0,function(){var e,t,s,o,a;return(0,q.Jh)(this,function(l){switch(l.label){case 0:e=_t(i),t=Kh(e),s=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,l.label=1;case 1:if(!(Nd(h=e)&&h.Fr.length<10))return[3,7];l.label=2;case 2:return l.trys.push([2,4,,6]),[4,Wm(e.localStore,s)];case 3:return null===(o=l.sent())?(0===e.Fr.length&&t.ir(),[3,7]):(s=o.batchId,function(h,g){h.Fr.push(g);var _=Kh(h);_.er()&&_.pr&&_.Er(g.mutations)}(e,o),[3,6]);case 4:return a=l.sent(),[4,Ty(e,a)];case 5:return l.sent(),[3,6];case 6:return[3,1];case 7:return HD(e)&&aS(e),[2]}var h})})}function HD(i){return Nd(i)&&!Kh(i).tr()&&i.Fr.length>0}function aS(i){Kh(i).start()}function JR(i){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(e){return Kh(i).Ar(),[2]})})}function Os(i){return(0,q.mG)(this,void 0,void 0,function(){var e,t,s;return(0,q.Jh)(this,function(a){for(e=Kh(i),t=0,s=i.Fr;t<s.length;t++)e.Er(s[t].mutations);return[2]})})}function zD(i,e,t){return(0,q.mG)(this,void 0,void 0,function(){var s,o;return(0,q.Jh)(this,function(a){switch(a.label){case 0:return s=i.Fr.shift(),o=qb.from(s,e,t),[4,KR(i,function(){return i.remoteSyncer.applySuccessfulWrite(o)})];case 1:return a.sent(),[4,Qm(i)];case 2:return a.sent(),[2]}})})}function QR(i,e){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(t){switch(t.label){case 0:return e&&Kh(i).pr?[4,function(s,o){return(0,q.mG)(this,void 0,void 0,function(){var a,l;return(0,q.Jh)(this,function(h){switch(h.label){case 0:return Ob(l=o.code)&&l!==Ee.ABORTED?(a=s.Fr.shift(),Kh(s).sr(),[4,KR(s,function(){return s.remoteSyncer.rejectFailedWrite(a.batchId,o)})]):[3,3];case 1:return h.sent(),[4,Qm(s)];case 2:h.sent(),h.label=3;case 3:return[2]}})})}(i,e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return HD(i)&&aS(i),[2]}})})}function lS(i,e){return(0,q.mG)(this,void 0,void 0,function(){var t;return(0,q.Jh)(this,function(s){switch(s.label){case 0:return t=_t(i),e?(t.Or.delete(2),[4,Zm(t)]):[3,2];case 1:return s.sent(),[3,5];case 2:return e?[3,4]:(t.Or.add(2),[4,Km(t)]);case 3:s.sent(),t.Br.set("Unknown"),s.label=4;case 4:s.label=5;case 5:return[2]}})})}function Fp(i){var t,s,o,a,e=this;return i.Ur||(i.Ur=(t=i.datastore,s=i.asyncQueue,o={Ii:VD.bind(null,i),Ri:UD.bind(null,i),_r:GD.bind(null,i)},(a=_t(t)).br(),new rS(s,a.Hi,a.credentials,a.R,o)),i.Mr.push(function(t){return(0,q.mG)(e,void 0,void 0,function(){return(0,q.Jh)(this,function(s){switch(s.label){case 0:return t?(i.Ur.sr(),tw(i)?ew(i):i.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,i.Ur.stop()];case 2:s.sent(),oS(i),s.label=3;case 3:return[2]}})})})),i.Ur}function Kh(i){var t,s,o,a,e=this;return i.Kr||(i.Kr=(t=i.datastore,s=i.asyncQueue,o={Ii:JR.bind(null,i),Ri:QR.bind(null,i),Ir:Os.bind(null,i),Tr:zD.bind(null,i)},(a=_t(t)).br(),new ZR(s,a.Hi,a.credentials,a.R,o)),i.Mr.push(function(t){return(0,q.mG)(e,void 0,void 0,function(){return(0,q.Jh)(this,function(s){switch(s.label){case 0:return t?(i.Kr.sr(),[4,Qm(i)]):[3,2];case 1:return s.sent(),[3,4];case 2:return[4,i.Kr.stop()];case 3:s.sent(),i.Fr.length>0&&(gt("RemoteStore","Stopping write stream with "+i.Fr.length+" pending writes"),i.Fr=[]),s.label=4;case 4:return[2]}})})})),i.Kr}var jD=function(){function i(e,t,s,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=a,this.deferred=new So,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(l){})}return i.createAndSchedule=function(e,t,s,o,a){var l=new i(e,t,Date.now()+s,o,a);return l.start(s),l},i.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},i.prototype.skipDelay=function(){return this.handleDelayElapsed()},i.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new it(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},i.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},i.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},i}();function Lp(i,e){if(Tr("AsyncQueue",e+": "+i),Rs(i))return new it(Ee.UNAVAILABLE,e+": "+i);throw i}var Np=function(){function i(e){this.comparator=e?function(t,s){return e(t,s)||$t.comparator(t.key,s.key)}:function(t,s){return $t.comparator(t.key,s.key)},this.keyedMap=ra(),this.sortedSet=new cs(this.comparator)}return i.emptySet=function(e){return new i(e.comparator)},i.prototype.has=function(e){return null!=this.keyedMap.get(e)},i.prototype.get=function(e){return this.keyedMap.get(e)},i.prototype.first=function(){return this.sortedSet.minKey()},i.prototype.last=function(){return this.sortedSet.maxKey()},i.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},i.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(i.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),i.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,s){return e(t),!1})},i.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},i.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},i.prototype.isEqual=function(e){if(!(e instanceof i)||this.size!==e.size)return!1;for(var t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();t.hasNext();){var o=t.getNext().key,a=s.getNext().key;if(!o.isEqual(a))return!1}return!0},i.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},i.prototype.copy=function(e,t){var s=new i;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s},i}(),WD=function(){function i(){this.Qr=new cs($t.comparator)}return i.prototype.track=function(e){var t=e.doc.key,s=this.Qr.get(t);s?0!==e.type&&3===s.type?this.Qr=this.Qr.insert(t,e):3===e.type&&1!==s.type?this.Qr=this.Qr.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Qr=this.Qr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Qr=this.Qr.remove(t):1===e.type&&2===s.type?this.Qr=this.Qr.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):Kt():this.Qr=this.Qr.insert(t,e)},i.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal(function(t,s){e.push(s)}),e},i}(),nw=function(){function i(e,t,s,o,a,l,h,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=g}return i.fromInitialDocuments=function(e,t,s,o){var a=[];return t.forEach(function(l){a.push({type:0,doc:l})}),new i(e,t,Np.emptySet(t),a,s,o,!0,!1)},Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(var o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0},i}(),qD=function(){this.Wr=void 0,this.listeners=[]},XR=function(){this.queries=new Dl(function(i){return ty(i)},yo),this.onlineState="Unknown",this.Gr=new Set};function iw(i,e){return(0,q.mG)(this,void 0,void 0,function(){var t,s,o,a,l,h,g;return(0,q.Jh)(this,function(_){switch(_.label){case 0:if(t=_t(i),o=!1,(a=t.queries.get(s=e.query))||(o=!0,a=new qD),!o)return[3,4];_.label=1;case 1:return _.trys.push([1,3,,4]),l=a,[4,t.onListen(s)];case 2:return l.Wr=_.sent(),[3,4];case 3:return h=_.sent(),g=Lp(h,"Initialization of query '"+ny(e.query)+"' failed"),[2,void e.onError(g)];case 4:return t.queries.set(s,a),a.listeners.push(e),e.zr(t.onlineState),a.Wr&&e.Hr(a.Wr)&&Tl(t),[2]}})})}function YD(i,e){return(0,q.mG)(this,void 0,void 0,function(){var t,s,o,a,l;return(0,q.Jh)(this,function(h){return t=_t(i),o=!1,(a=t.queries.get(s=e.query))&&(l=a.listeners.indexOf(e))>=0&&(a.listeners.splice(l,1),o=0===a.listeners.length),o?[2,(t.queries.delete(s),t.onUnlisten(s))]:[2]})})}function cS(i,e){for(var t=_t(i),s=!1,o=0,a=e;o<a.length;o++){var l=a[o],g=t.queries.get(l.query);if(g){for(var _=0,b=g.listeners;_<b.length;_++)b[_].Hr(l)&&(s=!0);g.Wr=l}}s&&Tl(t)}function uS(i,e,t){var s=_t(i),o=s.queries.get(e);if(o)for(var a=0,l=o.listeners;a<l.length;a++)l[a].onError(t);s.queries.delete(e)}function Tl(i){i.Gr.forEach(function(e){e.next()})}var dS=function(){function i(e,t,s){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=s||{}}return i.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],s=0,o=e.docChanges;s<o.length;s++){var a=o[s];3!==a.type&&t.push(a)}e=new nw(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var l=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),l=!0):this.eo(e,this.onlineState)&&(this.no(e),l=!0),this.Xr=e,l},i.prototype.onError=function(e){this.Jr.error(e)},i.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},i.prototype.eo=function(e,t){return!e.fromCache||!(this.options.so&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)},i.prototype.Zr=function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges},i.prototype.no=function(e){e=nw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},i}(),eP=function(){function i(e,t){this.payload=e,this.byteLength=t}return i.prototype.io=function(){return"metadata"in this.payload},i}(),hc=function(){function i(e){this.R=e}return i.prototype.qn=function(e){return sa(this.R,e)},i.prototype.Un=function(e){return e.metadata.exists?my(this.R,e.document,!1):Jr.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},i.prototype.Kn=function(e){return Gr(e)},i}();!function(){function i(e,t,s){this.ro=e,this.localStore=t,this.R=s,this.queries=[],this.documents=[],this.progress=function Il(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}(e)}i.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},i.prototype.co=function(e){for(var t=new Map,s=new hc(this.R),o=0,a=e;o<a.length;o++){var l=a[o];if(l.metadata.queries)for(var h=s.qn(l.metadata.name),g=0,_=l.metadata.queries;g<_.length;g++){var b=_[g],x=(t.get(b)||yi()).add(h);t.set(b,x)}}return t},i.prototype.complete=function(){return(0,q.mG)(this,void 0,void 0,function(){var e,t,s,o,a;return(0,q.Jh)(this,function(l){switch(l.label){case 0:return[4,ID(this.localStore,new hc(this.R),this.documents,this.ro.id)];case 1:e=l.sent(),t=this.co(this.documents),s=0,o=this.queries,l.label=2;case 2:return s<o.length?[4,zR(this.localStore,a=o[s],t.get(a.name))]:[3,5];case 3:l.sent(),l.label=4;case 4:return s++,[3,2];case 5:return[2,(this.progress.taskState="Success",new te(Object.assign({},this.progress),e))]}})})}}();var hS=function(i){this.key=i},fS=function(i){this.key=i},$D=function(){function i(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=yi(),this.mutatedKeys=yi(),this.lo=iy(e),this.fo=new Np(this.lo)}return Object.defineProperty(i.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),i.prototype._o=function(e,t){var s=this,o=t?t.mo:new WD,a=t?t.fo:this.fo,l=t?t.mutatedKeys:this.mutatedKeys,h=a,g=!1,_=na(this.query)&&a.size===this.query.limit?a.last():null,b=Ed(this.query)&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(function(S,M){var T=a.get(S),I=Dd(s.query,M)?M:null,L=!!T&&s.mutatedKeys.has(T.key),k=!!I&&(I.hasLocalMutations||s.mutatedKeys.has(I.key)&&I.hasCommittedMutations),R=!1;T&&I?T.data.isEqual(I.data)?L!==k&&(o.track({type:3,doc:I}),R=!0):s.yo(T,I)||(o.track({type:2,doc:I}),R=!0,(_&&s.lo(I,_)>0||b&&s.lo(I,b)<0)&&(g=!0)):!T&&I?(o.track({type:0,doc:I}),R=!0):T&&!I&&(o.track({type:1,doc:T}),R=!0,(_||b)&&(g=!0)),R&&(I?(h=h.add(I),l=k?l.add(S):l.delete(S)):(h=h.delete(S),l=l.delete(S)))}),na(this.query)||Ed(this.query))for(;h.size>this.query.limit;){var x=na(this.query)?h.last():h.first();h=h.delete(x.key),l=l.delete(x.key),o.track({type:1,doc:x})}return{fo:h,mo:o,Nn:g,mutatedKeys:l}},i.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},i.prototype.applyChanges=function(e,t,s){var o=this,a=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var l=e.mo.jr();l.sort(function(b,x){return M=x.type,(T=function(I){switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kt()}})(b.type)-T(M)||o.lo(b.doc,x.doc);var M,T}),this.po(s);var h=t?this.Eo():[],g=0===this.ho.size&&this.current?1:0,_=g!==this.ao;return this.ao=g,0!==l.length||_?{snapshot:new nw(this.query,e.fo,a,l,e.mutatedKeys,0===g,_,!1),To:h}:{To:h}},i.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new WD,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},i.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},i.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach(function(s){return t.uo=t.uo.add(s)}),e.modifiedDocuments.forEach(function(s){}),e.removedDocuments.forEach(function(s){return t.uo=t.uo.delete(s)}),this.current=e.current)},i.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=yi(),this.fo.forEach(function(o){e.Io(o.key)&&(e.ho=e.ho.add(o.key))});var s=[];return t.forEach(function(o){e.ho.has(o)||s.push(new fS(o))}),this.ho.forEach(function(o){t.has(o)||s.push(new hS(o))}),s},i.prototype.Ao=function(e){this.uo=e.Bn,this.ho=yi();var t=this._o(e.documents);return this.applyChanges(t,!0)},i.prototype.Ro=function(){return nw.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},i}(),tP=function(i,e,t){this.query=i,this.targetId=e,this.view=t},nP=function(i){this.key=i,this.bo=!1},iP=function(){function i(e,t,s,o,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.vo={},this.Po=new Dl(function(h){return ty(h)},yo),this.Vo=new Map,this.So=new Set,this.Do=new cs($t.comparator),this.Co=new Map,this.No=new JC,this.xo={},this.ko=new Map,this.Fo=rl.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(i.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),i}();function pS(i,e){return(0,q.mG)(this,void 0,void 0,function(){var t,o,a,l,h;return(0,q.Jh)(this,function(g){switch(g.label){case 0:return t=mS(i),(a=t.Po.get(e))?(t.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Ro(),[3,4]):[3,1];case 1:return[4,qm(t.localStore,Fo(e))];case 2:return l=g.sent(),h=t.sharedClientState.addLocalQueryTarget(l.targetId),[4,Bp(t,e,l.targetId,"current"===h)];case 3:o=g.sent(),t.isPrimaryClient&&Dy(t.remoteStore,l),g.label=4;case 4:return[2,o]}})})}function Bp(i,e,t,s){return(0,q.mG)(this,void 0,void 0,function(){var o,a,l,h,g,_;return(0,q.Jh)(this,function(b){switch(b.label){case 0:return i.Oo=function(x,S,M){return function(T,I,L,k){return(0,q.mG)(this,void 0,void 0,function(){var R,U,N;return(0,q.Jh)(this,function(j){switch(j.label){case 0:return(R=I.view._o(L)).Nn?[4,Zb(T.localStore,I.query,!1).then(function(K){return I.view._o(K.documents,R)})]:[3,2];case 1:R=j.sent(),j.label=2;case 2:return U=k&&k.targetChanges.get(I.targetId),N=I.view.applyChanges(R,T.isPrimaryClient,U),[2,(aw(T,I.targetId,N.To),N.snapshot)]}})})}(i,x,S,M)},[4,Zb(i.localStore,e,!0)];case 1:return o=b.sent(),a=new $D(e,o.Bn),l=a._o(o.documents),h=Cp.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState),g=a.applyChanges(l,i.isPrimaryClient,h),aw(i,t,g.To),_=new tP(e,t,a),[2,(i.Po.set(e,_),i.Vo.has(t)?i.Vo.get(t).push(e):i.Vo.set(t,[e]),g.snapshot)]}})})}function rP(i,e){return(0,q.mG)(this,void 0,void 0,function(){var t,s,o;return(0,q.Jh)(this,function(a){switch(a.label){case 0:return t=_t(i),s=t.Po.get(e),(o=t.Vo.get(s.targetId)).length>1?[2,(t.Vo.set(s.targetId,o.filter(function(l){return!yo(l,e)})),void t.Po.delete(e))]:t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)?[3,2]:[4,kp(t.localStore,s.targetId,!1).then(function(){t.sharedClientState.clearQueryState(s.targetId),Jm(t.remoteStore,s.targetId),Bd(t,s.targetId)}).catch(Iu)]):[3,3];case 1:a.sent(),a.label=2;case 2:return[3,5];case 3:return Bd(t,s.targetId),[4,kp(t.localStore,s.targetId,!0)];case 4:a.sent(),a.label=5;case 5:return[2]}})})}function ZD(i,e,t){return(0,q.mG)(this,void 0,void 0,function(){var s,o,a,l;return(0,q.Jh)(this,function(h){switch(h.label){case 0:s=vS(i),h.label=1;case 1:return h.trys.push([1,5,,6]),[4,(g=s.localStore,_=e,x=_t(g),S=Kr.now(),M=_.reduce(function(T,I){return T.add(I.key)},yi()),x.persistence.runTransaction("Locally write mutations","readwrite",function(T){return x.Mn.pn(T,M).next(function(I){b=I;for(var L=[],k=0,R=_;k<R.length;k++){var U=R[k],N=Tm(U,b.get(U.key));null!=N&&L.push(new vu(U.key,N,wm(N.value.mapValue),Qs.exists(!0)))}return x._n.addMutationBatch(T,S,L,_)})}).then(function(T){return T.applyToLocalDocumentSet(b),{batchId:T.batchId,changes:b}}))];case 2:return o=h.sent(),s.sharedClientState.addPendingMutation(o.batchId),function(g,_,b){var x=g.xo[g.currentUser.toKey()];x||(x=new cs(Kn)),x=x.insert(_,b),g.xo[g.currentUser.toKey()]=x}(s,o.batchId,t),[4,Ru(s,o.changes)];case 3:return h.sent(),[4,Qm(s.remoteStore)];case 4:return h.sent(),[3,6];case 5:return a=h.sent(),l=Lp(a,"Failed to persist write"),t.reject(l),[3,6];case 6:return[2]}var g,_,b,x,S,M})})}function KD(i,e){return(0,q.mG)(this,void 0,void 0,function(){var t,s;return(0,q.Jh)(this,function(o){switch(o.label){case 0:t=_t(i),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,kN(t.localStore,e)];case 2:return s=o.sent(),e.targetChanges.forEach(function(a,l){var h=t.Co.get(l);h&&(an(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.bo=!0:a.modifiedDocuments.size>0?an(h.bo):a.removedDocuments.size>0&&(an(h.bo),h.bo=!1))}),[4,Ru(t,s,e)];case 3:return o.sent(),[3,6];case 4:return[4,Iu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function gS(i,e,t){var s=_t(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){var o=[];s.Po.forEach(function(a,l){var h=l.view.zr(e);h.snapshot&&o.push(h.snapshot)}),function(a,l){var h=_t(a);h.onlineState=l;var g=!1;h.queries.forEach(function(_,b){for(var x=0,S=b.listeners;x<S.length;x++)S[x].zr(l)&&(g=!0)}),g&&Tl(h)}(s.eventManager,e),o.length&&s.vo._r(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function JD(i,e,t){return(0,q.mG)(this,void 0,void 0,function(){var s,o,a,l,h,g;return(0,q.Jh)(this,function(_){switch(_.label){case 0:return(s=_t(i)).sharedClientState.updateQueryState(e,"rejected",t),o=s.Co.get(e),(a=o&&o.key)?(l=(l=new cs($t.comparator)).insert(a,Jr.newNoDocument(a,Yn.min())),h=yi().add(a),g=new xp(Yn.min(),new Map,new Ur(Kn),l,h),[4,KD(s,g)]):[3,2];case 1:return _.sent(),s.Do=s.Do.remove(a),s.Co.delete(e),lw(s),[3,4];case 2:return[4,kp(s.localStore,e,!1).then(function(){return Bd(s,e,t)}).catch(Iu)];case 3:_.sent(),_.label=4;case 4:return[2]}})})}function rw(i,e){return(0,q.mG)(this,void 0,void 0,function(){var t,s,o;return(0,q.Jh)(this,function(a){switch(a.label){case 0:t=_t(i),s=e.batch.batchId,a.label=1;case 1:return a.trys.push([1,4,,6]),[4,dc(t.localStore,e)];case 2:return o=a.sent(),Iy(t,s,null),sw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),[4,Ru(t,o)];case 3:return a.sent(),[3,6];case 4:return[4,Iu(a.sent())];case 5:return a.sent(),[3,6];case 6:return[2]}})})}function sP(i,e,t){return(0,q.mG)(this,void 0,void 0,function(){var s,o;return(0,q.Jh)(this,function(a){switch(a.label){case 0:s=_t(i),a.label=1;case 1:return a.trys.push([1,4,,6]),[4,(l=s.localStore,h=e,g=_t(l),g.persistence.runTransaction("Reject batch","readwrite-primary",function(_){var b;return g._n.lookupMutationBatch(_,h).next(function(x){return an(null!==x),b=x.keys(),g._n.removeMutationBatch(_,x)}).next(function(){return g._n.performConsistencyCheck(_)}).next(function(){return g.Mn.pn(_,b)})}))];case 2:return o=a.sent(),Iy(s,e,t),sw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),[4,Ru(s,o)];case 3:return a.sent(),[3,6];case 4:return[4,Iu(a.sent())];case 5:return a.sent(),[3,6];case 6:return[2]}var l,h,g})})}function QD(i,e){return(0,q.mG)(this,void 0,void 0,function(){var t,s,o,a,l;return(0,q.Jh)(this,function(h){switch(h.label){case 0:Nd((t=_t(i)).remoteStore)||gt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,(g=t.localStore,_=_t(g),_.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(b){return _._n.getHighestUnacknowledgedBatchId(b)}))];case 2:return-1===(s=h.sent())?[2,void e.resolve()]:((o=t.ko.get(s)||[]).push(e),t.ko.set(s,o),[3,4]);case 3:return a=h.sent(),l=Lp(a,"Initialization of waitForPendingWrites() operation failed"),e.reject(l),[3,4];case 4:return[2]}var g,_})})}function sw(i,e){(i.ko.get(e)||[]).forEach(function(t){t.resolve()}),i.ko.delete(e)}function Iy(i,e,t){var s=_t(i),o=s.xo[s.currentUser.toKey()];if(o){var a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),s.xo[s.currentUser.toKey()]=o}}function Bd(i,e,t){void 0===t&&(t=null),i.sharedClientState.removeLocalQueryTarget(e);for(var s=0,o=i.Vo.get(e);s<o.length;s++){var a=o[s];i.Po.delete(a),t&&i.vo.Mo(a,t)}i.Vo.delete(e),i.isPrimaryClient&&i.No.Zn(e).forEach(function(l){i.No.containsKey(l)||ow(i,l)})}function ow(i,e){i.So.delete(e.path.canonicalString());var t=i.Do.get(e);null!==t&&(Jm(i.remoteStore,t),i.Do=i.Do.remove(e),i.Co.delete(t),lw(i))}function aw(i,e,t){for(var s=0,o=t;s<o.length;s++){var a=o[s];a instanceof hS?(i.No.addReference(a.key,e),XD(i,a)):a instanceof fS?(gt("SyncEngine","Document no longer in limbo: "+a.key),i.No.removeReference(a.key,e),i.No.containsKey(a.key)||ow(i,a.key)):Kt()}}function XD(i,e){var t=e.key,s=t.path.canonicalString();i.Do.get(t)||i.So.has(s)||(gt("SyncEngine","New document in limbo: "+t),i.So.add(s),lw(i))}function lw(i){for(;i.So.size>0&&i.Do.size<i.maxConcurrentLimboResolutions;){var e=i.So.values().next().value;i.So.delete(e);var t=new $t(mi.fromString(e)),s=i.Fo.next();i.Co.set(s,new nP(t)),i.Do=i.Do.insert(t,s),Dy(i.remoteStore,new Ui(Fo(Oh(t.path)),s,2,Zs.o))}}function Ru(i,e,t){return(0,q.mG)(this,void 0,void 0,function(){var s,o,a,l;return(0,q.Jh)(this,function(h){switch(h.label){case 0:return s=_t(i),o=[],a=[],l=[],s.Po.isEmpty()?[3,3]:(s.Po.forEach(function(g,_){l.push(s.Oo(_,e,t).then(function(b){if(b){s.isPrimaryClient&&s.sharedClientState.updateQueryState(_.targetId,b.fromCache?"not-current":"current"),o.push(b);var x=Qe.Pn(_.targetId,b);a.push(x)}}))}),[4,Promise.all(l)]);case 1:return h.sent(),s.vo._r(o),[4,function(g,_){return(0,q.mG)(this,void 0,void 0,function(){var b,x,S,M,T,I,L,R;return(0,q.Jh)(this,function(U){switch(U.label){case 0:b=_t(g),U.label=1;case 1:return U.trys.push([1,3,,4]),[4,b.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(N){return ct.forEach(_,function(j){return ct.forEach(j.bn,function(K){return b.persistence.referenceDelegate.addReference(N,j.targetId,K)}).next(function(){return ct.forEach(j.vn,function(K){return b.persistence.referenceDelegate.removeReference(N,j.targetId,K)})})})})];case 2:return U.sent(),[3,4];case 3:if(!Rs(x=U.sent()))throw x;return gt("LocalStore","Failed to update sequence numbers: "+x),[3,4];case 4:for(S=0,M=_;S<M.length;S++)I=(T=M[S]).targetId,T.fromCache||(L=b.kn.get(I),R=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion),b.kn=b.kn.insert(I,R));return[2]}})})}(s.localStore,a)];case 2:h.sent(),h.label=3;case 3:return[2]}})})}function eA(i,e){return(0,q.mG)(this,void 0,void 0,function(){var t,s;return(0,q.Jh)(this,function(o){switch(o.label){case 0:return(t=_t(i)).currentUser.isEqual(e)?[3,3]:(gt("SyncEngine","User change. New user:",e.toKey()),[4,hs(t.localStore,e)]);case 1:return s=o.sent(),t.currentUser=e,(a=t).ko.forEach(function(h){h.forEach(function(g){g.reject(new it(Ee.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.ko.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),[4,Ru(t,s.Ln)];case 2:o.sent(),o.label=3;case 3:return[2]}var a})})}function tA(i,e){var t=_t(i),s=t.Co.get(e);if(s&&s.bo)return yi().add(s.key);var o=yi(),a=t.Vo.get(e);if(!a)return o;for(var l=0,h=a;l<h.length;l++){var _=t.Po.get(h[l]);o=o.unionWith(_.view.wo)}return o}function nA(i,e){return(0,q.mG)(this,void 0,void 0,function(){var t,s,o;return(0,q.Jh)(this,function(a){switch(a.label){case 0:return[4,Zb((t=_t(i)).localStore,e.query,!0)];case 1:return s=a.sent(),o=e.view.Ao(s),[2,(t.isPrimaryClient&&aw(t,e.targetId,o.To),o)]}})})}function oP(i){return(0,q.mG)(this,void 0,void 0,function(){var e;return(0,q.Jh)(this,function(t){return[2,Cy((e=_t(i)).localStore).then(function(s){return Ru(e,s)})]})})}function aP(i,e,t,s){return(0,q.mG)(this,void 0,void 0,function(){var o,a;return(0,q.Jh)(this,function(l){switch(l.label){case 0:return[4,(h=(o=_t(i)).localStore,g=e,_=_t(h),b=_t(_._n),_.persistence.runTransaction("Lookup mutation documents","readonly",function(x){return b.jt(x,g).next(function(S){return S?_.Mn.pn(x,S):ct.resolve(null)})}))];case 1:return null===(a=l.sent())?[3,6]:"pending"!==t?[3,3]:[4,Qm(o.remoteStore)];case 2:return l.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(Iy(o,e,s||null),sw(o,e),function(h,g){_t(_t(h)._n).Gt(g)}(o.localStore,e)):Kt(),l.label=4;case 4:return[4,Ru(o,a)];case 5:return l.sent(),[3,7];case 6:gt("SyncEngine","Cannot apply mutation batch with id: "+e),l.label=7;case 7:return[2]}var h,g,_,b})})}function lP(i,e){return(0,q.mG)(this,void 0,void 0,function(){var t,s,o,a,l,g,_;return(0,q.Jh)(this,function(b){switch(b.label){case 0:return mS(t=_t(i)),vS(t),!0!==e||!0===t.$o?[3,3]:(s=t.sharedClientState.getAllActiveQueryTargets(),[4,iA(t,s.toArray())]);case 1:return o=b.sent(),t.$o=!0,[4,lS(t.remoteStore,!0)];case 2:for(b.sent(),a=0,l=o;a<l.length;a++)Dy(t.remoteStore,l[a]);return[3,7];case 3:return!1!==e||!1===t.$o?[3,7]:(g=[],_=Promise.resolve(),t.Vo.forEach(function(x,S){t.sharedClientState.isLocalQueryTarget(S)?g.push(S):_=_.then(function(){return Bd(t,S),kp(t.localStore,S,!0)}),Jm(t.remoteStore,S)}),[4,_]);case 4:return b.sent(),[4,iA(t,g)];case 5:return b.sent(),(S=_t(t)).Co.forEach(function(M,T){Jm(S.remoteStore,T)}),S.No.ts(),S.Co=new Map,S.Do=new cs($t.comparator),t.$o=!1,[4,lS(t.remoteStore,!1)];case 6:b.sent(),b.label=7;case 7:return[2]}var S})})}function iA(i,e,t){return(0,q.mG)(this,void 0,void 0,function(){var s,o,a,l,h,g,_,b,x,S,T,I,L;return(0,q.Jh)(this,function(k){switch(k.label){case 0:s=_t(i),o=[],a=[],l=0,h=e,k.label=1;case 1:return l<h.length?(_=void 0,(b=s.Vo.get(g=h[l]))&&0!==b.length?[4,qm(s.localStore,Fo(b[0]))]:[3,7]):[3,13];case 2:_=k.sent(),x=0,S=b,k.label=3;case 3:return x<S.length?(T=s.Po.get(S[x]),[4,nA(s,T)]):[3,6];case 4:(I=k.sent()).snapshot&&a.push(I.snapshot),k.label=5;case 5:return x++,[3,3];case 6:return[3,11];case 7:return[4,KC(s.localStore,g)];case 8:return L=k.sent(),[4,qm(s.localStore,L)];case 9:return _=k.sent(),[4,Bp(s,rA(L),g,!1)];case 10:k.sent(),k.label=11;case 11:o.push(_),k.label=12;case 12:return l++,[3,1];case 13:return[2,(s.vo._r(a),o)]}})})}function rA(i){return qC(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function cP(i){var e=_t(i);return _t(_t(e.localStore).persistence).fn()}function uP(i,e,t,s){return(0,q.mG)(this,void 0,void 0,function(){var o,a,l;return(0,q.Jh)(this,function(h){switch(h.label){case 0:return(o=_t(i)).$o?(gt("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Vo.has(e))return[3,8];switch(t){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Cy(o.localStore)];case 3:return a=h.sent(),l=xp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,Ru(o,a,l)];case 4:return h.sent(),[3,8];case 5:return[4,kp(o.localStore,e,!0)];case 6:return h.sent(),Bd(o,e,s),[3,8];case 7:Kt(),h.label=8;case 8:return[2]}})})}function dP(i,e,t){return(0,q.mG)(this,void 0,void 0,function(){var s,o,a,l,h,g,_,b,x;return(0,q.Jh)(this,function(M){switch(M.label){case 0:if(!(s=mS(i)).$o)return[3,10];o=0,a=e,M.label=1;case 1:return o<a.length?s.Vo.has(l=a[o])?(gt("SyncEngine","Adding an already active target "+l),[3,5]):[4,KC(s.localStore,l)]:[3,6];case 2:return h=M.sent(),[4,qm(s.localStore,h)];case 3:return g=M.sent(),[4,Bp(s,rA(h),g.targetId,!1)];case 4:M.sent(),Dy(s.remoteStore,g),M.label=5;case 5:return o++,[3,1];case 6:_=function(T){return(0,q.Jh)(this,function(I){switch(I.label){case 0:return s.Vo.has(T)?[4,kp(s.localStore,T,!1).then(function(){Jm(s.remoteStore,T),Bd(s,T)}).catch(Iu)]:[3,2];case 1:I.sent(),I.label=2;case 2:return[2]}})},b=0,x=t,M.label=7;case 7:return b<x.length?[5,_(x[b])]:[3,10];case 8:M.sent(),M.label=9;case 9:return b++,[3,7];case 10:return[2]}})})}function mS(i){var e=_t(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=KD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JD.bind(null,e),e.vo._r=cS.bind(null,e.eventManager),e.vo.Mo=uS.bind(null,e.eventManager),e}function vS(i){var e=_t(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sP.bind(null,e),e}var sA=function(){function i(){this.synchronizeTabs=!1}return i.prototype.initialize=function(e){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(t){switch(t.label){case 0:return this.R=$m(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}})})},i.prototype.Uo=function(e){return null},i.prototype.Ko=function(e){return vi(this.persistence,new En,e.initialUser,this.R)},i.prototype.qo=function(e){return new kD(ON.bs,this.R)},i.prototype.Bo=function(e){return new eS},i.prototype.terminate=function(){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}})})},i}(),oA=function(i){function e(t,s,o){var a=this;return(a=i.call(this)||this).Qo=t,a.cacheSizeBytes=s,a.forceOwnership=o,a.synchronizeTabs=!1,a}return(0,q.ZT)(e,i),e.prototype.initialize=function(t){return(0,q.mG)(this,void 0,void 0,function(){var s=this;return(0,q.Jh)(this,function(o){switch(o.label){case 0:return[4,i.prototype.initialize.call(this,t)];case 1:return o.sent(),[4,HR(this.localStore)];case 2:return o.sent(),[4,this.Qo.initialize(this,t)];case 3:return o.sent(),[4,vS(this.Qo.syncEngine)];case 4:return o.sent(),[4,Qm(this.Qo.remoteStore)];case 5:return o.sent(),[4,this.persistence.He(function(){return s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()})];case 6:return o.sent(),[2]}})})},e.prototype.Ko=function(t){return vi(this.persistence,new En,t.initialUser,this.R)},e.prototype.Uo=function(t){return new xy(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var s=H(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Vo.withCacheSize(this.cacheSizeBytes):Vo.DEFAULT;return new E(this.synchronizeTabs,s,t.clientId,o,t.asyncQueue,iS(),Ym(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new eS},e}(sA),fP=function(i){function e(t,s){var o=this;return(o=i.call(this,t,s,!1)||this).Qo=t,o.cacheSizeBytes=s,o.synchronizeTabs=!0,o}return(0,q.ZT)(e,i),e.prototype.initialize=function(t){return(0,q.mG)(this,void 0,void 0,function(){var s,o=this;return(0,q.Jh)(this,function(a){switch(a.label){case 0:return[4,i.prototype.initialize.call(this,t)];case 1:return a.sent(),s=this.Qo.syncEngine,this.sharedClientState instanceof Ey?(this.sharedClientState.syncEngine={ui:aP.bind(null,s),ai:uP.bind(null,s),hi:dP.bind(null,s),fn:cP.bind(null,s),ci:oP.bind(null,s)},[4,this.sharedClientState.start()]):[3,3];case 2:a.sent(),a.label=3;case 3:return[4,this.persistence.He(function(l){return(0,q.mG)(o,void 0,void 0,function(){return(0,q.Jh)(this,function(h){switch(h.label){case 0:return[4,lP(this.Qo.syncEngine,l)];case 1:return h.sent(),this.gcScheduler&&(l&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):l||this.gcScheduler.stop()),[2]}})})})];case 4:return a.sent(),[2]}})})},e.prototype.Bo=function(t){var s=iS();if(!Ey.yt(s))throw new it(Ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var o=H(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ey(s,t.asyncQueue,o,t.clientId,t.initialUser)},e}(oA),_S=function(){function i(){}return i.prototype.initialize=function(e,t){return(0,q.mG)(this,void 0,void 0,function(){var s=this;return(0,q.Jh)(this,function(o){switch(o.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(a){return gS(s.syncEngine,a,1)},this.remoteStore.remoteSyncer.handleCredentialChange=eA.bind(null,this.syncEngine),[4,lS(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:o.sent(),o.label=2;case 2:return[2]}})})},i.prototype.createEventManager=function(e){return new XR},i.prototype.createDatastore=function(e){var s=$m(e.databaseInfo.databaseId),o=new LD(e.databaseInfo);return new ND(e.credentials,o,s)},i.prototype.createRemoteStore=function(e){var t,s,o,a,l,h=this;return t=this.localStore,s=this.datastore,o=e.asyncQueue,a=function(g){return gS(h.syncEngine,g,0)},l=FD.yt()?new FD:new FN,new sS(t,s,o,a,l)},i.prototype.createSyncEngine=function(e,t){return _=t,b=new iP(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions),_&&(b.$o=!0),b;var _,b},i.prototype.terminate=function(){return function(e){return(0,q.mG)(this,void 0,void 0,function(){var t;return(0,q.Jh)(this,function(s){switch(s.label){case 0:return t=_t(e),gt("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,Km(t)];case 1:return s.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}})})}(this.remoteStore)},i}(),cw=function(){function i(e){this.observer=e,this.muted=!1}return i.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},i.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},i.prototype.Wo=function(){this.muted=!0},i.prototype.jo=function(e,t){var s=this;this.muted||setTimeout(function(){s.muted||e(t)},0)},i}(),lA=(function(){function i(e,t){var s=this;this.Go=e,this.R=t,this.metadata=new So,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(o){o&&o.io()?s.metadata.resolve(o.payload.metadata):s.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==o?void 0:o.payload)))},function(o){return s.metadata.reject(o)})}i.prototype.close=function(){return this.Go.cancel()},i.prototype.getMetadata=function(){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(e){return[2,this.metadata.promise]})})},i.prototype.Lo=function(){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}})})},i.prototype.Ho=function(){return(0,q.mG)(this,void 0,void 0,function(){var e,t,s,o;return(0,q.Jh)(this,function(a){switch(a.label){case 0:return[4,this.Jo()];case 1:return null===(e=a.sent())?[2,null]:(t=this.zo.decode(e),s=Number(t),isNaN(s)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(s)]);case 2:return o=a.sent(),[2,new eP(JSON.parse(o),e.length+s)]}})})},i.prototype.Zo=function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})},i.prototype.Jo=function(){return(0,q.mG)(this,void 0,void 0,function(){var e,t;return(0,q.Jh)(this,function(s){switch(s.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(s.sent())return[3,3];s.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}})})},i.prototype.Xo=function(e){return(0,q.mG)(this,void 0,void 0,function(){var t;return(0,q.Jh)(this,function(s){switch(s.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:s.sent()&&this.Yo("Reached the end of bundle when more is expected."),s.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}})})},i.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},i.prototype.tc=function(){return(0,q.mG)(this,void 0,void 0,function(){var e,t;return(0,q.Jh)(this,function(s){switch(s.label){case 0:return[4,this.Go.read()];case 1:return(e=s.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}})})}}(),function(){function i(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return i.prototype.lookup=function(e){return(0,q.mG)(this,void 0,void 0,function(){var t,s=this;return(0,q.Jh)(this,function(o){switch(o.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new it(Ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(a,l){return(0,q.mG)(this,void 0,void 0,function(){var h,g,_,b,x,S;return(0,q.Jh)(this,function(M){switch(M.label){case 0:return h=_t(a),g=ka(h.R)+"/documents",_={documents:l.map(function(T){return wu(h.R,T)})},[4,h.$i("BatchGetDocuments",g,_)];case 1:return b=M.sent(),x=new Map,b.forEach(function(T){var L,k,I=(L=h.R,"found"in(k=T)?function(R,U){an(!!U.found);var N=sa(R,U.found.name),j=Gr(U.found.updateTime),K=new Ts({mapValue:{fields:U.found.fields}});return Jr.newFoundDocument(N,j,K)}(L,k):"missing"in k?function(R,U){an(!!U.missing),an(!!U.readTime);var N=sa(R,U.missing),j=Gr(U.readTime);return Jr.newNoDocument(N,j)}(L,k):Kt());x.set(I.key.toString(),I)}),S=[],[2,(l.forEach(function(T){var I=x.get(T.toString());an(!!I),S.push(I)}),S)]}})})}(this.datastore,e)];case 1:return[2,((t=o.sent()).forEach(function(a){return s.recordVersion(a)}),t)]}})})},i.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},i.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())},i.prototype.delete=function(e){this.write(new _u(e,this.precondition(e))),this.writtenDocs.add(e.toString())},i.prototype.commit=function(){return(0,q.mG)(this,void 0,void 0,function(){var e,t=this;return(0,q.Jh)(this,function(s){switch(s.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(o){e.delete(o.key.toString())}),e.forEach(function(o,a){var l=$t.fromPath(a);t.mutations.push(new Hh(l,t.precondition(l)))}),[4,function(o,a){return(0,q.mG)(this,void 0,void 0,function(){var l,h,g;return(0,q.Jh)(this,function(_){switch(_.label){case 0:return l=_t(o),h=ka(l.R)+"/documents",g={writes:a.map(function(b){return xu(l.R,b)})},[4,l.Ni("Commit",h,g)];case 1:return _.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return s.sent(),this.committed=!0,[2]}})})},i.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Kt();t=Yn.min()}var s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new it(Ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},i.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Qs.updateTime(t):Qs.none()},i.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Yn.min()))throw new it(Ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qs.updateTime(t)}return Qs.exists(!0)},i.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},i.prototype.ensureCommitNotCalled=function(){},i}()),cA=function(){function i(e,t,s,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=s,this.deferred=o,this.ec=5,this.Zi=new Jb(this.asyncQueue,"transaction_retry")}return i.prototype.run=function(){this.ec-=1,this.nc()},i.prototype.nc=function(){var e=this;this.Zi.ji(function(){return(0,q.mG)(e,void 0,void 0,function(){var t,s,o=this;return(0,q.Jh)(this,function(a){return t=new lA(this.datastore),(s=this.sc(t))&&s.then(function(l){o.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){o.deferred.resolve(l)}).catch(function(h){o.ic(h)})})}).catch(function(l){o.ic(l)}),[2]})})})},i.prototype.sc=function(e){try{var t=this.updateFunction(e);return!dn(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(s){return this.deferred.reject(s),null}},i.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return t.nc(),Promise.resolve()})):this.deferred.reject(e)},i.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Ob(t)}return!1},i}(),uA=function(){function i(e,t,s){var o=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=s,this.user=ks.UNAUTHENTICATED,this.clientId=$_.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,function(a){return(0,q.mG)(o,void 0,void 0,function(){return(0,q.Jh)(this,function(l){switch(l.label){case 0:return gt("FirestoreClient","Received user=",a.uid),[4,this.credentialListener(a)];case 1:return l.sent(),this.user=a,[2]}})})})}return i.prototype.getConfiguration=function(){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},i.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},i.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new it(Ee.FAILED_PRECONDITION,"The client has already been terminated.")},i.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new So;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,q.mG)(e,void 0,void 0,function(){var s,o;return(0,q.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:a.sent(),a.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:a.sent(),a.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return s=a.sent(),o=Lp(s,"Failed to shutdown persistence"),t.reject(o),[3,6];case 6:return[2]}})})}),t.promise},i}();function yS(i,e){return(0,q.mG)(this,void 0,void 0,function(){var t,s,o=this;return(0,q.Jh)(this,function(a){switch(a.label){case 0:return i.asyncQueue.verifyOperationInProgress(),gt("FirestoreClient","Initializing OfflineComponentProvider"),[4,i.getConfiguration()];case 1:return t=a.sent(),[4,e.initialize(t)];case 2:return a.sent(),s=t.initialUser,i.setCredentialChangeListener(function(l){return(0,q.mG)(o,void 0,void 0,function(){return(0,q.Jh)(this,function(h){switch(h.label){case 0:return s.isEqual(l)?[3,2]:[4,hs(e.localStore,l)];case 1:h.sent(),s=l,h.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return i.terminate()}),i.offlineComponents=e,[2]}})})}function bS(i,e){return(0,q.mG)(this,void 0,void 0,function(){var t,s;return(0,q.Jh)(this,function(o){switch(o.label){case 0:return i.asyncQueue.verifyOperationInProgress(),[4,uw(i)];case 1:return t=o.sent(),gt("FirestoreClient","Initializing OnlineComponentProvider"),[4,i.getConfiguration()];case 2:return s=o.sent(),[4,e.initialize(t,s)];case 3:return o.sent(),i.setCredentialChangeListener(function(a){return function(l,h){return(0,q.mG)(this,void 0,void 0,function(){var g,_;return(0,q.Jh)(this,function(b){switch(b.label){case 0:return(g=_t(l)).asyncQueue.verifyOperationInProgress(),gt("RemoteStore","RemoteStore received new credentials"),_=Nd(g),g.Or.add(3),[4,Km(g)];case 1:return b.sent(),_&&g.Br.set("Unknown"),[4,g.remoteSyncer.handleCredentialChange(h)];case 2:return b.sent(),g.Or.delete(3),[4,Zm(g)];case 3:return b.sent(),[2]}})})}(e.remoteStore,a)}),i.onlineComponents=e,[2]}})})}function uw(i){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(e){switch(e.label){case 0:return i.offlineComponents?[3,2]:(gt("FirestoreClient","Using default OfflineComponentProvider"),[4,yS(i,new sA)]);case 1:e.sent(),e.label=2;case 2:return[2,i.offlineComponents]}})})}function Ry(i){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(e){switch(e.label){case 0:return i.onlineComponents?[3,2]:(gt("FirestoreClient","Using default OnlineComponentProvider"),[4,bS(i,new _S)]);case 1:e.sent(),e.label=2;case 2:return[2,i.onlineComponents]}})})}function wS(i){return uw(i).then(function(e){return e.persistence})}function dw(i){return uw(i).then(function(e){return e.localStore})}function hw(i){return Ry(i).then(function(e){return e.remoteStore})}function Py(i){return Ry(i).then(function(e){return e.syncEngine})}function Rl(i){return(0,q.mG)(this,void 0,void 0,function(){var e,t;return(0,q.Jh)(this,function(s){switch(s.label){case 0:return[4,Ry(i)];case 1:return e=s.sent(),[2,((t=e.eventManager).onListen=pS.bind(null,e.syncEngine),t.onUnlisten=rP.bind(null,e.syncEngine),t)]}})})}function dA(i,e,t){var s=this;void 0===t&&(t={});var o=new So;return i.asyncQueue.enqueueAndForget(function(){return(0,q.mG)(s,void 0,void 0,function(){var a;return(0,q.Jh)(this,function(l){switch(l.label){case 0:return a=function(h,g,_,b,x){var S=new cw({next:function(T){g.enqueueAndForget(function(){return YD(h,M)});var I=T.docs.has(_);!I&&T.fromCache?x.reject(new it(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&T.fromCache&&b&&"server"===b.source?x.reject(new it(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(T)},error:function(T){return x.reject(T)}}),M=new dS(Oh(_.path),S,{includeMetadataChanges:!0,so:!0});return iw(h,M)},[4,Rl(i)];case 1:return[2,a.apply(void 0,[l.sent(),i.asyncQueue,e,t,o])]}})})}),o.promise}function hA(i,e,t){var s=this;void 0===t&&(t={});var o=new So;return i.asyncQueue.enqueueAndForget(function(){return(0,q.mG)(s,void 0,void 0,function(){var a;return(0,q.Jh)(this,function(l){switch(l.label){case 0:return a=function(h,g,_,b,x){var S=new cw({next:function(T){g.enqueueAndForget(function(){return YD(h,M)}),T.fromCache&&"server"===b.source?x.reject(new it(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(T)},error:function(T){return x.reject(T)}}),M=new dS(_,S,{includeMetadataChanges:!0,so:!0});return iw(h,M)},[4,Rl(i)];case 1:return[2,a.apply(void 0,[l.sent(),i.asyncQueue,e,t,o])]}})})}),o.promise}var Xm=function(i,e,t,s,o,a,l,h){this.databaseId=i,this.appId=e,this.persistenceKey=t,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.useFetchStreams=h},xS=function(){function i(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(i.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(e){return e instanceof i&&e.projectId===this.projectId&&e.database===this.database},i}(),fw=new Map,gP=function(i,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+i},CS=function(){function i(){this.changeListener=null}return i.prototype.getToken=function(){return Promise.resolve(null)},i.prototype.invalidateToken=function(){},i.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable(function(){return t(ks.UNAUTHENTICATED)})},i.prototype.removeChangeListener=function(){this.changeListener=null},i}(),fA=function(){function i(e){this.token=e,this.changeListener=null}return i.prototype.getToken=function(){return Promise.resolve(this.token)},i.prototype.invalidateToken=function(){},i.prototype.setChangeListener=function(e,t){var s=this;this.changeListener=t,e.enqueueRetryable(function(){return t(s.token.user)})},i.prototype.removeChangeListener=function(){this.changeListener=null},i}(),LN=function(){function i(e){var t=this;this.currentUser=ks.UNAUTHENTICATED,this.oc=new So,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){t.cc++,t.currentUser=t.ac(),t.oc.resolve(),t.changeListener&&t.asyncQueue.enqueueRetryable(function(){return t.changeListener(t.currentUser)})};var s=function(o){gt("FirebaseCredentialsProvider","Auth detected"),t.auth=o,t.auth.addAuthTokenListener(t.uc)};e.onInit(function(o){return s(o)}),setTimeout(function(){if(!t.auth){var o=e.getImmediate({optional:!0});o?s(o):(gt("FirebaseCredentialsProvider","Auth not yet detected"),t.oc.resolve())}},0)}return i.prototype.getToken=function(){var e=this,t=this.cc,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(function(o){return e.cc!==t?(gt("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):o?(an("string"==typeof o.accessToken),new gP(o.accessToken,e.currentUser)):null}):Promise.resolve(null)},i.prototype.invalidateToken=function(){this.forceRefresh=!0},i.prototype.setChangeListener=function(e,t){var s=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable(function(){return(0,q.mG)(s,void 0,void 0,function(){return(0,q.Jh)(this,function(o){switch(o.label){case 0:return[4,this.oc.promise];case 1:return o.sent(),[4,t(this.currentUser)];case 2:return o.sent(),this.changeListener=t,[2]}})})})},i.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},i.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return an(null===e||"string"==typeof e),new ks(e)},i}(),gn=function(){function i(e,t,s){this.hc=e,this.lc=t,this.fc=s,this.type="FirstParty",this.user=ks.FIRST_PARTY}return Object.defineProperty(i.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),i}(),mP=function(){function i(e,t,s){this.hc=e,this.lc=t,this.fc=s}return i.prototype.getToken=function(){return Promise.resolve(new gn(this.hc,this.lc,this.fc))},i.prototype.setChangeListener=function(e,t){e.enqueueRetryable(function(){return t(ks.FIRST_PARTY)})},i.prototype.removeChangeListener=function(){},i.prototype.invalidateToken=function(){},i}();function SS(i,e,t){if(!t)throw new it(Ee.INVALID_ARGUMENT,"Function "+i+"() cannot be called with an empty "+e+".")}function MS(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new it(Ee.INVALID_ARGUMENT,"Invalid options passed to function "+i+'(): You cannot specify both "merge" and "mergeFields".');return e}function ky(i,e,t,s){if(!0===e&&!0===s)throw new it(Ee.INVALID_ARGUMENT,i+" and "+t+" cannot be used together.")}function pA(i){if(!$t.isDocumentKey(i))throw new it(Ee.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+i+" has "+i.length+".")}function Oy(i){if($t.isDocumentKey(i))throw new it(Ee.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+i+" has "+i.length+".")}function Vp(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=i.substring(0,20)+"..."),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";var e=function(t){if(t.constructor){var s=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(s&&s.length>1)return s[1]}return null}(i);return e?"a custom "+e+" object":"an object"}return"function"==typeof i?"a function":Kt()}function fn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new it(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var t=Vp(i);throw new it(Ee.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}return i}function vP(i,e){if(e<=0)throw new it(Ee.INVALID_ARGUMENT,"Function "+i+"() requires a positive number, but it was: "+e+".")}var ES=function(){function i(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new it(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new it(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ky("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return i.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},i}(),Fy=function(){function i(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ES({}),this._settingsFrozen=!1,e instanceof xS?(this._databaseId=e,this._credentials=new CS):(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new it(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xS(s.options.projectId)}(e),this._credentials=new LN(t))}return Object.defineProperty(i.prototype,"app",{get:function(){if(!this._app)throw new it(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),i.prototype._setSettings=function(e){if(this._settingsFrozen)throw new it(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ES(e),void 0!==e.credentials&&(this._credentials=function(t){if(!t)return new CS;switch(t.type){case"gapi":var s=t.client;return an(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new mP(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new it(Ee.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},i.prototype._getSettings=function(){return this._settings},i.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},i.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},i.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},i.prototype._terminate=function(){return(t=fw.get(this))&&(gt("ComponentProvider","Removing Datastore"),fw.delete(this),t.terminate()),Promise.resolve();var t},i}(),Pr=function(){function i(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}return Object.defineProperty(i.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return new Vd(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),i.prototype.withConverter=function(e){return new i(this.firestore,e,this._key)},i}(),ca=function(){function i(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}return i.prototype.withConverter=function(e){return new i(this.firestore,e,this._query)},i}(),Vd=function(i){function e(t,s,o){var a=this;return(a=i.call(this,t,s,Oh(o))||this)._path=o,a.type="collection",a}return(0,q.ZT)(e,i),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Pr(this.firestore,null,new $t(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(ca);function DS(i,e){for(var t,s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];if(i=(0,gi.m9)(i),SS("collection","path",e),i instanceof Fy)return Oy(t=mi.fromString.apply(mi,(0,q.ev)([e],s))),new Vd(i,null,t);if(!(i instanceof Pr||i instanceof Vd))throw new it(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Oy(t=mi.fromString.apply(mi,(0,q.ev)([i.path],s)).child(mi.fromString(e))),new Vd(i.firestore,null,t)}function Ly(i,e){for(var t,s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];if(i=(0,gi.m9)(i),1===arguments.length&&(e=$_.u()),SS("doc","path",e),i instanceof Fy)return pA(t=mi.fromString.apply(mi,(0,q.ev)([e],s))),new Pr(i,null,new $t(t));if(!(i instanceof Pr||i instanceof Vd))throw new it(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return pA(t=i._path.child(mi.fromString.apply(mi,(0,q.ev)([e],s)))),new Pr(i.firestore,i instanceof Vd?i.converter:null,new $t(t))}function gA(i,e){return i=(0,gi.m9)(i),e=(0,gi.m9)(e),(i instanceof Pr||i instanceof Vd)&&(e instanceof Pr||e instanceof Vd)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function mA(i,e){return i=(0,gi.m9)(i),e=(0,gi.m9)(e),i instanceof ca&&e instanceof ca&&i.firestore===e.firestore&&yo(i._query,e._query)&&i.converter===e.converter}var _P=function(){function i(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Jb(this,"async_queue_retry"),this.Ic=function(){var s=Ym();s&&gt("AsyncQueue","Visibility state changed to "+s.visibilityState),e.Zi.Gi()};var t=Ym();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(i.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),i.prototype.enqueueAndForget=function(e){this.enqueue(e)},i.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},i.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var t=Ym();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ic)}},i.prototype.enqueue=function(e){var t=this;if(this.Ac(),this._c)return new Promise(function(){});var s=new So;return this.Rc(function(){return t._c&&t.Ec?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)}).then(function(){return s.promise})},i.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget(function(){return t.wc.push(e),t.bc()})},i.prototype.bc=function(){return(0,q.mG)(this,void 0,void 0,function(){var e,t=this;return(0,q.Jh)(this,function(s){switch(s.label){case 0:if(0===this.wc.length)return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return s.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Rs(e=s.sent()))throw e;return gt("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return t.bc()}),s.label=5;case 5:return[2]}})})},i.prototype.Rc=function(e){var t=this,s=this.dc.then(function(){return t.gc=!0,e().catch(function(o){throw t.yc=o,t.gc=!1,Tr("INTERNAL UNHANDLED ERROR: ",(l=(a=o).message||"",a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l)),o;var a,l}).then(function(o){return t.gc=!1,o})});return this.dc=s,s},i.prototype.enqueueAfterDelay=function(e,t,s){var o=this;this.Ac(),this.Tc.indexOf(e)>-1&&(t=0);var a=jD.createAndSchedule(this,e,t,s,function(l){return o.vc(l)});return this.mc.push(a),a},i.prototype.Ac=function(){this.yc&&Kt()},i.prototype.verifyOperationInProgress=function(){},i.prototype.Pc=function(){return(0,q.mG)(this,void 0,void 0,function(){var e;return(0,q.Jh)(this,function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}})})},i.prototype.Vc=function(e){for(var t=0,s=this.mc;t<s.length;t++)if(s[t].timerId===e)return!0;return!1},i.prototype.Sc=function(e){var t=this;return this.Pc().then(function(){t.mc.sort(function(l,h){return l.targetTimeMs-h.targetTimeMs});for(var s=0,o=t.mc;s<o.length;s++){var a=o[s];if(a.skipDelay(),"all"!==e&&a.timerId===e)break}return t.Pc()})},i.prototype.Dc=function(e){this.Tc.push(e)},i.prototype.vc=function(e){var t=this.mc.indexOf(e);this.mc.splice(t,1)},i}();function Pu(i){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var s=e,o=0,a=["next","error","complete"];o<a.length;o++){var l=a[o];if(l in s&&"function"==typeof s[l])return!0}return!1}(i)}!function(){function i(){this._progressObserver={},this._taskCompletionResolver=new So,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}i.prototype.onProgress=function(e,t,s){this._progressObserver={next:e,error:t,complete:s}},i.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},i.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},i.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},i.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},i.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}();var Qr=function(i){function e(t,s){var o=this;return(o=i.call(this,t,s)||this).type="firestore",o._queue=new _P,o._persistenceKey="name"in t?t.name:"[DEFAULT]",o}return(0,q.ZT)(e,i),e.prototype._terminate=function(){return this._firestoreClient||AS(this),this._firestoreClient.terminate()},e}(Fy);function Xr(i){return i._firestoreClient||AS(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function AS(i){var e,a,h,t=i._freezeSettings(),s=(a=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Xm(i._databaseId,a,i._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));i._firestoreClient=new uA(i._credentials,i._queue,s)}function TS(i,e,t){var s=this,o=new So;return i.asyncQueue.enqueue(function(){return(0,q.mG)(s,void 0,void 0,function(){var a;return(0,q.Jh)(this,function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),[4,yS(i,t)];case 1:return l.sent(),[4,bS(i,e)];case 2:return l.sent(),o.resolve(),[3,4];case 3:if(!("FirebaseError"===(h=a=l.sent()).name?h.code===Ee.FAILED_PRECONDITION||h.code===Ee.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw a;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),o.reject(a),[3,4];case 4:return[2]}var h})})}).then(function(){return o.promise})}function IS(i){if(i._initialized||i._terminated)throw new it(Ee.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ku=function(){function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var s=0;s<e.length;++s)if(0===e[s].length)throw new it(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pa(e)}return i.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},i}(),pc=function(){function i(e){this._byteString=e}return i.fromBase64String=function(e){try{return new i(Ks.fromBase64String(e))}catch(t){throw new it(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},i.fromUint8Array=function(e){return new i(Ks.fromUint8Array(e))},i.prototype.toBase64=function(){return this._byteString.toBase64()},i.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},i.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},i.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},i}(),gc=function(i){this._methodName=i},pw=function(){function i(e,t){if(!isFinite(e)||e<-90||e>90)throw new it(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new it(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(i.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},i.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},i.prototype._compareTo=function(e){return Kn(this._lat,e._lat)||Kn(this._long,e._long)},i}(),wP=/^__.*__$/,xP=function(){function i(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}return i.prototype.toMutation=function(e,t){return null!==this.fieldMask?new vu(e,this.data,this.fieldMask,t,this.fieldTransforms):new bp(e,this.data,t,this.fieldTransforms)},i}(),RS=function(){function i(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}return i.prototype.toMutation=function(e,t){return new vu(e,this.data,this.fieldMask,t,this.fieldTransforms)},i}();function PS(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kt()}}var kS=function(){function i(e,t,s,o,a,l){this.settings=e,this.databaseId=t,this.R=s,this.ignoreUndefinedProperties=o,void 0===a&&this.Cc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}return Object.defineProperty(i.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),i.prototype.xc=function(e){return new i(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},i.prototype.kc=function(e){var t,s=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.xc({path:s,Fc:!1});return o.$c(e),o},i.prototype.Oc=function(e){var t,s=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.xc({path:s,Fc:!1});return o.Cc(),o},i.prototype.Mc=function(e){return this.xc({path:void 0,Fc:!0})},i.prototype.Lc=function(e){return Ny(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},i.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},i.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},i.prototype.$c=function(e){if(0===e.length)throw this.Lc("Document fields must not be empty");if(PS(this.Nc)&&wP.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},i}(),CP=function(){function i(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=s||$m(e)}return i.prototype.Uc=function(e,t,s,o){return void 0===o&&(o=!1),new kS({Nc:e,methodName:t,qc:s,path:Pa.emptyPath(),Fc:!1,Bc:o},this.databaseId,this.R,this.ignoreUndefinedProperties)},i}();function Jh(i){var e=i._freezeSettings(),t=$m(i._databaseId);return new CP(i._databaseId,!!e.ignoreUndefinedProperties,t)}function gw(i,e,t,s,o,a){void 0===a&&(a={});var l=i.Uc(a.merge||a.mergeFields?2:0,e,t,o);LS("Data must be an object, but it was:",l,s);var h,g,_=tv(s,l);if(a.merge)h=new uu(l.fieldMask),g=l.fieldTransforms;else if(a.mergeFields){for(var b=[],x=0,S=a.mergeFields;x<S.length;x++){var M=NS(e,S[x],t);if(!l.contains(M))throw new it(Ee.INVALID_ARGUMENT,"Field '"+M+"' is specified in your field mask but missing from your input data.");bA(b,M)||b.push(M)}h=new uu(b),g=l.fieldTransforms.filter(function(T){return h.covers(T.field)})}else h=null,g=l.fieldTransforms;return new xP(new Ts(_),h,g)}var OS=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,q.ZT)(e,i),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(gc);function SP(i,e,t){return new kS({Nc:3,qc:e.settings.qc,methodName:i._methodName,Fc:t},e.databaseId,e.R,e.ignoreUndefinedProperties)}var NN=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,q.ZT)(e,i),e.prototype._toFieldTransform=function(t){return new Vh(t.path,new Lo)},e.prototype.isEqual=function(t){return t instanceof e},e}(gc),BN=function(i){function e(t,s){var o=this;return(o=i.call(this,t)||this).Kc=s,o}return(0,q.ZT)(e,i),e.prototype._toFieldTransform=function(t){var s=SP(this,t,!0),o=this.Kc.map(function(l){return Qh(l,s)}),a=new mu(o);return new Vh(t.path,a)},e.prototype.isEqual=function(t){return this===t},e}(gc),VN=function(i){function e(t,s){var o=this;return(o=i.call(this,t)||this).Kc=s,o}return(0,q.ZT)(e,i),e.prototype._toFieldTransform=function(t){var s=SP(this,t,!0),o=this.Kc.map(function(l){return Qh(l,s)}),a=new ec(o);return new Vh(t.path,a)},e.prototype.isEqual=function(t){return this===t},e}(gc),vA=function(i){function e(t,s){var o=this;return(o=i.call(this,t)||this).Qc=s,o}return(0,q.ZT)(e,i),e.prototype._toFieldTransform=function(t){var s=new Sl(t.R,Nh(t.R,this.Qc));return new Vh(t.path,s)},e.prototype.isEqual=function(t){return this===t},e}(gc);function ev(i,e,t,s){var o=i.Uc(1,e,t);LS("Data must be an object, but it was:",o,s);var a=[],l=Ts.empty();cu(s,function(g,_){var b=BS(e,g,t);_=(0,gi.m9)(_);var x=o.Oc(b);if(_ instanceof OS)a.push(b);else{var S=Qh(_,x);null!=S&&(a.push(b),l.set(b,S))}});var h=new uu(a);return new RS(l,h,o.fieldTransforms)}function FS(i,e,t,s,o,a){var l=i.Uc(1,e,t),h=[NS(e,s,t)],g=[o];if(a.length%2!=0)throw new it(Ee.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var _=0;_<a.length;_+=2)h.push(NS(e,a[_])),g.push(a[_+1]);for(var b=[],x=Ts.empty(),S=h.length-1;S>=0;--S)if(!bA(b,h[S])){var M=h[S],T=g[S];T=(0,gi.m9)(T);var I=l.Oc(M);if(T instanceof OS)b.push(M);else{var L=Qh(T,I);null!=L&&(b.push(M),x.set(M,L))}}var k=new uu(b);return new RS(x,k,l.fieldTransforms)}function _A(i,e,t,s){return void 0===s&&(s=!1),Qh(t,i.Uc(s?4:3,e))}function Qh(i,e){if(yA(i=(0,gi.m9)(i)))return LS("Unsupported field value:",e,i),tv(i,e);if(i instanceof gc)return function(t,s){if(!PS(s.Nc))throw s.Lc(t._methodName+"() can only be used with update() and set()");if(!s.path)throw s.Lc(t._methodName+"() is not currently supported inside arrays");var o=t._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,s){for(var o=[],a=0,l=0,h=t;l<h.length;l++){var g=Qh(h[l],s.Mc(a));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),a++}return{arrayValue:{values:o}}}(i,e)}return function(t,s){if(null===(t=(0,gi.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Nh(s.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var o=Kr.fromDate(t);return{timestampValue:Pd(s.R,o)}}if(t instanceof Kr)return o=new Kr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Pd(s.R,o)};if(t instanceof pw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pc)return{bytesValue:bu(s.R,t._byteString)};if(t instanceof Pr){var a=t.firestore._databaseId;if(!a.isEqual(o=s.databaseId))throw s.Lc("Document reference is for database "+a.projectId+"/"+a.database+" but should be for database "+o.projectId+"/"+o.database);return{referenceValue:Lm(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.Lc("Unsupported field value: "+Vp(t))}(i,e)}function tv(i,e){var t={};return vm(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cu(i,function(s,o){var a=Qh(o,e.kc(s));null!=a&&(t[s]=a)}),{mapValue:{fields:t}}}function yA(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Kr||i instanceof pw||i instanceof pc||i instanceof Pr||i instanceof gc)}function LS(i,e,t){if(!yA(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){var s=Vp(t);throw e.Lc("an object"===s?i+" a custom object":i+" "+s)}var o}function NS(i,e,t){if((e=(0,gi.m9)(e))instanceof ku)return e._internalPath;if("string"==typeof e)return BS(i,e);throw Ny("Field path arguments must be of type string or FieldPath.",i,!1,void 0,t)}var MP=new RegExp("[~\\*/\\[\\]]");function BS(i,e,t){if(e.search(MP)>=0)throw Ny("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",i,!1,void 0,t);try{return(new(ku.bind.apply(ku,(0,q.ev)([void 0],e.split(".")))))._internalPath}catch(s){throw Ny("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",i,!1,void 0,t)}}function Ny(i,e,t,s,o){var a=s&&!s.isEmpty(),l=void 0!==o,h="Function "+e+"() called with invalid data";t&&(h+=" (via `toFirestore()`)");var g="";return(a||l)&&(g+=" (found",a&&(g+=" in field "+s),l&&(g+=" in document "+o),g+=")"),new it(Ee.INVALID_ARGUMENT,(h+=". ")+i+g)}function bA(i,e){return i.some(function(t){return t.isEqual(e)})}var By=function(){function i(e,t,s,o,a){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=a}return Object.defineProperty(i.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ref",{get:function(){return new Pr(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),i.prototype.exists=function(){return null!==this._document},i.prototype.data=function(){if(this._document){if(this._converter){var e=new nv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},i.prototype.get=function(e){if(this._document){var t=this._document.data.field(mw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},i}(),nv=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,q.ZT)(e,i),e.prototype.data=function(){return i.prototype.data.call(this)},e}(By);function mw(i,e){return"string"==typeof e?BS(i,e):e instanceof ku?e._internalPath:e._delegate._internalPath}var Xh=function(){function i(e,t){this.hasPendingWrites=e,this.fromCache=t}return i.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},i}(),Ud=function(i){function e(t,s,o,a,l,h){var g=this;return(g=i.call(this,t,s,o,a,h)||this)._firestore=t,g._firestoreImpl=t,g.metadata=l,g}return(0,q.ZT)(e,i),e.prototype.exists=function(){return i.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var s=new iv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,s){if(void 0===s&&(s={}),this._document){var o=this._document.data.field(mw("DocumentSnapshot.get",t));if(null!==o)return this._userDataWriter.convertValue(o,s.serverTimestamps)}},e}(By),iv=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,q.ZT)(e,i),e.prototype.data=function(t){return void 0===t&&(t={}),i.prototype.data.call(this,t)},e}(Ud),ef=function(){function i(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Xh(o.hasPendingWrites,o.fromCache),this.query=s}return Object.defineProperty(i.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),i.prototype.forEach=function(e,t){var s=this;this._snapshot.docs.forEach(function(o){e.call(t,new iv(s._firestore,s._userDataWriter,o.key,o,new Xh(s._snapshot.mutatedKeys.has(o.key),s._snapshot.fromCache),s.query.converter))})},i.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new it(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){var a=0;return s._snapshot.docChanges.map(function(h){return{type:"added",doc:new iv(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Xh(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:a++}})}var l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(function(h){return o||3!==h.type}).map(function(h){var g=new iv(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Xh(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter),_=-1,b=-1;return 0!==h.type&&(_=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),1!==h.type&&(b=(l=l.add(h.doc)).indexOf(h.doc.key)),{type:wA(h.type),doc:g,oldIndex:_,newIndex:b}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},i}();function wA(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kt()}}function xA(i,e){return i instanceof Ud&&e instanceof Ud?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof ef&&e instanceof ef&&i._firestore===e._firestore&&mA(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function vw(i){if(Ed(i)&&0===i.explicitOrderBy.length)throw new it(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vy=function(){};function Gd(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var s=0,o=e;s<o.length;s++){var a=o[s];i=a._apply(i)}return i}var CA=function(i){function e(t,s,o){var a=this;return(a=i.call(this)||this).jc=t,a.Wc=s,a.Gc=o,a.type="where",a}return(0,q.ZT)(e,i),e.prototype._apply=function(t){var a,h,s=Jh(t.firestore),o=function(a,l,h,g,_,b,x){var S;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new it(Ee.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+b+"' queries on FieldPath.documentId().");if("in"===b||"not-in"===b){DA(x,b);for(var M=[],T=0,I=x;T<I.length;T++)M.push(VS(g,a,I[T]));S={arrayValue:{values:M}}}else S=VS(g,a,x)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||DA(x,b),S=_A(h,"where",x,"in"===b||"not-in"===b);var k=Js.create(_,b,S);return function(R,U){if(U.g()){var N=Fh(R);if(null!==N&&!N.isEqual(U.field))throw new it(Ee.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+N.toString()+"' and '"+U.field.toString()+"'");var j=_p(R);null!==j&&AA(0,U.field,j)}var K=function(ne,de){for(var Re=0,xe=ne.filters;Re<xe.length;Re++){var W=xe[Re];if(de.indexOf(W.op)>=0)return W.op}return null}(R,function(ne){switch(ne){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(null!==K)throw new it(Ee.INVALID_ARGUMENT,K===U.op?"Invalid query. You cannot use more than one '"+U.op.toString()+"' filter.":"Invalid query. You cannot use '"+U.op.toString()+"' filters with '"+K.toString()+"' filters.")}(a,k),k}(t._query,0,s,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new ca(t.firestore,t.converter,(h=(a=t._query).filters.concat([o]),new Xl(a.path,a.collectionGroup,a.explicitOrderBy.slice(),h,a.limit,a.limitType,a.startAt,a.endAt)))},e}(Vy),EP=function(i){function e(t,s){var o=this;return(o=i.call(this)||this).jc=t,o.zc=s,o.type="orderBy",o}return(0,q.ZT)(e,i),e.prototype._apply=function(t){var o,l,s=function(o,a,l){if(null!==o.startAt)throw new it(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new it(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var h=new vp(a,l);return function(g,_){if(null===_p(g)){var b=Fh(g);null!==b&&AA(0,b,_.field)}}(o,h),h}(t._query,this.jc,this.zc);return new ca(t.firestore,t.converter,(l=(o=t._query).explicitOrderBy.concat([s]),new Xl(o.path,o.collectionGroup,l,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)))},e}(Vy),SA=function(i){function e(t,s,o){var a=this;return(a=i.call(this)||this).type=t,a.Hc=s,a.Jc=o,a}return(0,q.ZT)(e,i),e.prototype._apply=function(t){return new ca(t.firestore,t.converter,ey(t._query,this.Hc,this.Jc))},e}(Vy),MA=function(i){function e(t,s,o){var a=this;return(a=i.call(this)||this).type=t,a.Yc=s,a.Xc=o,a}return(0,q.ZT)(e,i),e.prototype._apply=function(t){var o,a,s=EA(t,this.type,this.Yc,this.Xc);return new ca(t.firestore,t.converter,(a=s,new Xl((o=t._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,a,o.endAt)))},e}(Vy),_w=function(i){function e(t,s,o){var a=this;return(a=i.call(this)||this).type=t,a.Yc=s,a.Xc=o,a}return(0,q.ZT)(e,i),e.prototype._apply=function(t){var o,a,s=EA(t,this.type,this.Yc,this.Xc);return new ca(t.firestore,t.converter,(a=s,new Xl((o=t._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,a)))},e}(Vy);function EA(i,e,t,s){if(t[0]=(0,gi.m9)(t[0]),t[0]instanceof By)return function(a,l,h,g,_){if(!g)throw new it(Ee.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+h+"().");for(var b=[],x=0,S=pu(a);x<S.length;x++){var M=S[x];if(M.field.isKeyField())b.push(Ph(l,g.key));else{var T=g.data.field(M.field);if(_m(T))throw new it(Ee.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){var I=M.field.canonicalString();throw new it(Ee.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+I+"' (used as the orderBy) does not exist.")}b.push(T)}}return new kh(b,_)}(i._query,i.firestore._databaseId,e,t[0]._document,s);var o=Jh(i.firestore);return function(a,l,h,g,_,b){var x=a.explicitOrderBy;if(_.length>x.length)throw new it(Ee.INVALID_ARGUMENT,"Too many arguments provided to "+g+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var S=[],M=0;M<_.length;M++){var T=_[M];if(x[M].field.isKeyField()){if("string"!=typeof T)throw new it(Ee.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+g+"(), but got a "+typeof T);if(!Lh(a)&&-1!==T.indexOf("/"))throw new it(Ee.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+g+"() must be a plain document ID, but '"+T+"' contains a slash.");var I=a.path.child(mi.fromString(T));if(!$t.isDocumentKey(I))throw new it(Ee.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+g+"() must result in a valid document path, but '"+I+"' is not because it contains an odd number of segments.");var L=new $t(I);S.push(Ph(l,L))}else{var k=_A(h,g,T);S.push(k)}}return new kh(S,b)}(i._query,i.firestore._databaseId,o,e,t,s)}function VS(i,e,t){if("string"==typeof(t=(0,gi.m9)(t))){if(""===t)throw new it(Ee.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lh(e)&&-1!==t.indexOf("/"))throw new it(Ee.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var s=e.path.child(mi.fromString(t));if(!$t.isDocumentKey(s))throw new it(Ee.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+s+"' is not because it has an odd number of segments ("+s.length+").");return Ph(i,new $t(s))}if(t instanceof Pr)return Ph(i,t._key);throw new it(Ee.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Vp(t)+".")}function DA(i,e){if(!Array.isArray(i)||0===i.length)throw new it(Ee.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(i.length>10)throw new it(Ee.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function AA(i,e,t){if(!t.isEqual(e))throw new it(Ee.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+t.toString()+"' instead.")}var US=function(){function i(){}return i.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),el(e)){case 0:return null;case 1:return e.booleanValue;case 2:return br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Kt()}},i.prototype.convertObject=function(e,t){var s=this,o={};return cu(e.fields,function(a,l){o[a]=s.convertValue(l,t)}),o},i.prototype.convertGeoPoint=function(e){return new pw(br(e.latitude),br(e.longitude))},i.prototype.convertArray=function(e,t){var s=this;return(e.values||[]).map(function(o){return s.convertValue(o,t)})},i.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var s=ym(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(du(e));default:return null}},i.prototype.convertTimestamp=function(e){var t=Jl(e);return new Kr(t.seconds,t.nanos)},i.prototype.convertDocumentKey=function(e,t){var s=mi.fromString(e);an(Rr(s));var o=new xS(s.get(1),s.get(3)),a=new $t(s.popFirst(5));return o.isEqual(t)||Tr("Document "+a+" contains a document reference within a different database ("+o.projectId+"/"+o.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),a},i}();function yw(i,e,t){return i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e}var DP=function(i){function e(t){var s=this;return(s=i.call(this)||this).firestore=t,s}return(0,q.ZT)(e,i),e.prototype.convertBytes=function(t){return new pc(t)},e.prototype.convertReference=function(t){var s=this.convertDocumentKey(t,this.firestore._databaseId);return new Pr(this.firestore,null,s)},e}(US),AP=function(){function i(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Jh(e)}return i.prototype.set=function(e,t,s){this._verifyNotCommitted();var o=tf(e,this._firestore),a=yw(o.converter,t,s),l=gw(this._dataReader,"WriteBatch.set",o._key,a,null!==o.converter,s);return this._mutations.push(l.toMutation(o._key,Qs.none())),this},i.prototype.update=function(e,t,s){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];this._verifyNotCommitted();var l,h=tf(e,this._firestore);return l="string"==typeof(t=(0,gi.m9)(t))||t instanceof ku?FS(this._dataReader,"WriteBatch.update",h._key,t,s,o):ev(this._dataReader,"WriteBatch.update",h._key,t),this._mutations.push(l.toMutation(h._key,Qs.exists(!0))),this},i.prototype.delete=function(e){this._verifyNotCommitted();var t=tf(e,this._firestore);return this._mutations=this._mutations.concat(new _u(t._key,Qs.none())),this},i.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},i.prototype._verifyNotCommitted=function(){if(this._committed)throw new it(Ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},i}();function tf(i,e){if((i=(0,gi.m9)(i)).firestore!==e)throw new it(Ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}var Up=function(i){function e(t){var s=this;return(s=i.call(this)||this).firestore=t,s}return(0,q.ZT)(e,i),e.prototype.convertBytes=function(t){return new pc(t)},e.prototype.convertReference=function(t){var s=this.convertDocumentKey(t,this.firestore._databaseId);return new Pr(this.firestore,null,s)},e}(US);function GS(i,e,t){for(var s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];i=fn(i,Pr);var a=fn(i.firestore,Qr),l=Jh(a);return Uy(a,[("string"==typeof(e=(0,gi.m9)(e))||e instanceof ku?FS(l,"updateDoc",i._key,e,t,s):ev(l,"updateDoc",i._key,e)).toMutation(i._key,Qs.exists(!0))])}function HS(i){for(var e,t,s,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];i=(0,gi.m9)(i);var l={includeMetadataChanges:!1},h=0;"object"!=typeof o[h]||Pu(o[h])||(l=o[h],h++);var g,_,b,x={includeMetadataChanges:l.includeMetadataChanges};if(Pu(o[h])){var S=o[h];o[h]=null===(e=S.next)||void 0===e?void 0:e.bind(S),o[h+1]=null===(t=S.error)||void 0===t?void 0:t.bind(S),o[h+2]=null===(s=S.complete)||void 0===s?void 0:s.bind(S)}if(i instanceof Pr)_=fn(i.firestore,Qr),b=Oh(i._key.path),g={next:function(I){o[h]&&o[h](zS(_,i,I))},error:o[h+1],complete:o[h+2]};else{var M=fn(i,ca);_=fn(M.firestore,Qr),b=M._query;var T=new Up(_);g={next:function(I){o[h]&&o[h](new ef(_,T,M,I))},error:o[h+1],complete:o[h+2]},vw(i._query)}return function(I,L,k,R){var U=this,N=new cw(R),j=new dS(L,N,k);return I.asyncQueue.enqueueAndForget(function(){return(0,q.mG)(U,void 0,void 0,function(){var K;return(0,q.Jh)(this,function(ne){switch(ne.label){case 0:return K=iw,[4,Rl(I)];case 1:return[2,K.apply(void 0,[ne.sent(),j])]}})})}),function(){N.Wo(),I.asyncQueue.enqueueAndForget(function(){return(0,q.mG)(U,void 0,void 0,function(){var K;return(0,q.Jh)(this,function(ne){switch(ne.label){case 0:return K=YD,[4,Rl(I)];case 1:return[2,K.apply(void 0,[ne.sent(),j])]}})})})}}(Xr(_),b,x,g)}function Uy(i,e){return function(t,s){var o=this,a=new So;return t.asyncQueue.enqueueAndForget(function(){return(0,q.mG)(o,void 0,void 0,function(){var l;return(0,q.Jh)(this,function(h){switch(h.label){case 0:return l=ZD,[4,Py(t)];case 1:return[2,l.apply(void 0,[h.sent(),s,a])]}})})}),a.promise}(Xr(i),e)}function zS(i,e,t){var s=t.docs.get(e._key),o=new Up(i);return new Ud(i,o,e._key,s,new Xh(t.hasPendingWrites,t.fromCache),e.converter)}var TA=function(i){function e(t,s){var o=this;return(o=i.call(this,t,s)||this)._firestore=t,o}return(0,q.ZT)(e,i),e.prototype.get=function(t){var s=this,o=tf(t,this._firestore),a=new Up(this._firestore);return i.prototype.get.call(this,t).then(function(l){return new Ud(s._firestore,a,o._key,l._document,new Xh(!1,!1),o.converter)})},e}(function(){function i(e,t){this._firestore=e,this._transaction=t,this._dataReader=Jh(e)}return i.prototype.get=function(e){var t=this,s=tf(e,this._firestore),o=new DP(this._firestore);return this._transaction.lookup([s._key]).then(function(a){if(!a||1!==a.length)return Kt();var l=a[0];if(l.isFoundDocument())return new By(t._firestore,o,l.key,l,s.converter);if(l.isNoDocument())return new By(t._firestore,o,s._key,null,s.converter);throw Kt()})},i.prototype.set=function(e,t,s){var o=tf(e,this._firestore),a=yw(o.converter,t,s),l=gw(this._dataReader,"Transaction.set",o._key,a,null!==o.converter,s);return this._transaction.set(o._key,l),this},i.prototype.update=function(e,t,s){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var l,h=tf(e,this._firestore);return l="string"==typeof(t=(0,gi.m9)(t))||t instanceof ku?FS(this._dataReader,"Transaction.update",h._key,t,s,o):ev(this._dataReader,"Transaction.update",h._key,t),this._transaction.update(h._key,l),this},i.prototype.delete=function(e){var t=tf(e,this._firestore);return this._transaction.delete(t._key),this},i}());function IA(){if("undefined"==typeof Uint8Array)throw new it(Ee.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function RA(){if("undefined"==typeof atob)throw new it(Ee.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var PA=function(){function i(e){this._delegate=e}return i.fromBase64String=function(e){return RA(),new i(pc.fromBase64String(e))},i.fromUint8Array=function(e){return IA(),new i(pc.fromUint8Array(e))},i.prototype.toBase64=function(){return RA(),this._delegate.toBase64()},i.prototype.toUint8Array=function(){return IA(),this._delegate.toUint8Array()},i.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},i.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},i}(),jS=function(){function i(){}return i.prototype.enableIndexedDbPersistence=function(e,t){return function(s,o){IS(s=fn(s,Qr));var a=Xr(s),l=s._freezeSettings(),h=new _S;return TS(a,h,new oA(h,l.cacheSizeBytes,null==o?void 0:o.forceOwnership))}(e._delegate,{forceOwnership:t})},i.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(t){IS(t=fn(t,Qr));var s=Xr(t),o=t._freezeSettings(),a=new _S;return TS(s,a,new fP(a,o.cacheSizeBytes))}(e._delegate)},i.prototype.clearIndexedDbPersistence=function(e){return function(t){var s=this;if(t._initialized&&!t._terminated)throw new it(Ee.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var o=new So;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,q.mG)(s,void 0,void 0,function(){var a;return(0,q.Jh)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,function(h){return(0,q.mG)(this,void 0,void 0,function(){return(0,q.Jh)(this,function(_){switch(_.label){case 0:return Mu.yt()?[4,Mu.delete(h+"main")]:[2,Promise.resolve()];case 1:return _.sent(),[2]}})})}(H(t._databaseId,t._persistenceKey))];case 1:return l.sent(),o.resolve(),[3,3];case 2:return a=l.sent(),o.reject(a),[3,3];case 3:return[2]}})})}),o.promise}(e._delegate)},i}(),bw=function(){function i(e,t,s){var o=this;this._delegate=t,this.Zc=s,this.INTERNAL={delete:function(){return o.terminate()}},e instanceof xS||(this.tu=e)}return Object.defineProperty(i.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),i.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||_d("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},i.prototype.useEmulator=function(e,t,s){void 0===s&&(s={}),function(o,a,l,h){var g;void 0===h&&(h={});var _=(o=fn(o,Fy))._getSettings();if("firestore.googleapis.com"!==_.host&&_.host!==a&&_d("Host has been set in both settings() and useEmulator(), emulator host will be used"),o._setSettings(Object.assign(Object.assign({},_),{host:a+":"+l,ssl:!1})),h.mockUserToken){var b,x;if("string"==typeof h.mockUserToken)b=h.mockUserToken,x=ks.MOCK_USER;else{b=(0,gi.Sg)(h.mockUserToken,null===(g=o._app)||void 0===g?void 0:g.options.projectId);var S=h.mockUserToken.sub||h.mockUserToken.user_id;if(!S)throw new it(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new ks(S)}o._credentials=new fA(new gP(b,x))}}(this._delegate,e,t,s)},i.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue(function(){return(0,q.mG)(t,void 0,void 0,function(){var s,o;return(0,q.Jh)(this,function(a){switch(a.label){case 0:return[4,wS(e)];case 1:return s=a.sent(),[4,hw(e)];case 2:return o=a.sent(),[2,(s.setNetworkEnabled(!0),l=o,h=_t(l),h.Or.delete(0),Zm(h))]}var l,h})})})}(Xr(fn(this._delegate,Qr)))},i.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue(function(){return(0,q.mG)(t,void 0,void 0,function(){var s,o;return(0,q.Jh)(this,function(a){switch(a.label){case 0:return[4,wS(e)];case 1:return s=a.sent(),[4,hw(e)];case 2:return o=a.sent(),[2,(s.setNetworkEnabled(!1),function(l){return(0,q.mG)(this,void 0,void 0,function(){var h;return(0,q.Jh)(this,function(g){switch(g.label){case 0:return(h=_t(l)).Or.add(0),[4,Km(h)];case 1:return g.sent(),h.Br.set("Offline"),[2]}})})}(o))]}})})})}(Xr(fn(this._delegate,Qr)))},i.prototype.enablePersistence=function(e){var t=!1,s=!1;return e&&ky("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",s=!!e.experimentalForceOwningTab),t?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,s)},i.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},i.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},i.prototype.waitForPendingWrites=function(){return function(e){var t=this,s=new So;return e.asyncQueue.enqueueAndForget(function(){return(0,q.mG)(t,void 0,void 0,function(){var o;return(0,q.Jh)(this,function(a){switch(a.label){case 0:return o=QD,[4,Py(e)];case 1:return[2,o.apply(void 0,[a.sent(),s])]}})})}),s.promise}(Xr(fn(this._delegate,Qr)))},i.prototype.onSnapshotsInSync=function(e){return s=e,function(o,a){var l=this,h=new cw(a);return o.asyncQueue.enqueueAndForget(function(){return(0,q.mG)(l,void 0,void 0,function(){var g;return(0,q.Jh)(this,function(_){switch(_.label){case 0:return g=function(b,x){_t(b).Gr.add(x),x.next()},[4,Rl(o)];case 1:return[2,g.apply(void 0,[_.sent(),h])]}})})}),function(){h.Wo(),o.asyncQueue.enqueueAndForget(function(){return(0,q.mG)(l,void 0,void 0,function(){var g;return(0,q.Jh)(this,function(_){switch(_.label){case 0:return g=function(b,x){_t(b).Gr.delete(x)},[4,Rl(o)];case 1:return[2,g.apply(void 0,[_.sent(),h])]}})})})}}(Xr(fn(this._delegate,Qr)),Pu(s)?s:{next:s});var s},Object.defineProperty(i.prototype,"app",{get:function(){if(!this.tu)throw new it(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),i.prototype.collection=function(e){try{return new xw(this,DS(this._delegate,e))}catch(t){throw Go(t,"collection()","Firestore.collection()")}},i.prototype.doc=function(e){try{return new Gp(this,Ly(this._delegate,e))}catch(t){throw Go(t,"doc()","Firestore.doc()")}},i.prototype.collectionGroup=function(e){try{return new ww(this,function(t,s){if(t=fn(t,Fy),SS("collectionGroup","collection id",s),s.indexOf("/")>=0)throw new it(Ee.INVALID_ARGUMENT,"Invalid collection ID '"+s+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ca(t,null,(o=s,new Xl(mi.emptyPath(),o)));var o}(this._delegate,e))}catch(t){throw Go(t,"collectionGroup()","Firestore.collectionGroup()")}},i.prototype.runTransaction=function(e){var s,t=this;return function(a,l){var h=this,g=new So;return a.asyncQueue.enqueueAndForget(function(){return(0,q.mG)(h,void 0,void 0,function(){var _;return(0,q.Jh)(this,function(b){switch(b.label){case 0:return[4,(x=a,Ry(x).then(function(S){return S.datastore}))];case 1:return _=b.sent(),new cA(a.asyncQueue,_,l,g).run(),[2]}var x})})}),g.promise}(Xr(s=this._delegate),function(a){return function(s){return e(new kA(t,s))}(new TA(s,a))})},i.prototype.batch=function(){var e=this;return Xr(this._delegate),new OA(new AP(this._delegate,function(t){return Uy(e._delegate,t)}))},i.prototype.loadBundle=function(e){throw new it(Ee.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},i.prototype.namedQuery=function(e){throw new it(Ee.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},i}(),Gy=function(i){function e(t){var s=this;return(s=i.call(this)||this).firestore=t,s}return(0,q.ZT)(e,i),e.prototype.convertBytes=function(t){return new PA(new pc(t))},e.prototype.convertReference=function(t){var s=this.convertDocumentKey(t,this.firestore._databaseId);return Gp.eu(s,this.firestore,null)},e}(US),kA=function(){function i(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Gy(e)}return i.prototype.get=function(e){var t=this,s=Pl(e);return this._delegate.get(s).then(function(o){return new Hy(t._firestore,new Ud(t._firestore._delegate,t._userDataWriter,o._key,o._document,o.metadata,s.converter))})},i.prototype.set=function(e,t,s){var o=Pl(e);return s?(MS("Transaction.set",s),this._delegate.set(o,t,s)):this._delegate.set(o,t),this},i.prototype.update=function(e,t,s){for(var o,a=[],l=3;l<arguments.length;l++)a[l-3]=arguments[l];var h=Pl(e);return 2===arguments.length?this._delegate.update(h,t):(o=this._delegate).update.apply(o,(0,q.ev)([h,t,s],a)),this},i.prototype.delete=function(e){var t=Pl(e);return this._delegate.delete(t),this},i}(),OA=function(){function i(e){this._delegate=e}return i.prototype.set=function(e,t,s){var o=Pl(e);return s?(MS("WriteBatch.set",s),this._delegate.set(o,t,s)):this._delegate.set(o,t),this},i.prototype.update=function(e,t,s){for(var o,a=[],l=3;l<arguments.length;l++)a[l-3]=arguments[l];var h=Pl(e);return 2===arguments.length?this._delegate.update(h,t):(o=this._delegate).update.apply(o,(0,q.ev)([h,t,s],a)),this},i.prototype.delete=function(e){var t=Pl(e);return this._delegate.delete(t),this},i.prototype.commit=function(){return this._delegate.commit()},i}(),rv=function(){function i(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}return i.prototype.fromFirestore=function(e,t){var s=new iv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sv(this._firestore,s),null!=t?t:{})},i.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},i.nu=function(e,t){var s=i.su,o=s.get(e);o||s.set(e,o=new WeakMap);var a=o.get(t);return a||(a=new i(e,new Gy(e),t),o.set(t,a)),a},i}();rv.su=new WeakMap;var Gp=function(){function i(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Gy(e)}return i.iu=function(e,t,s){if(e.length%2!=0)throw new it(Ee.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new i(t,new Pr(t._delegate,s,new $t(e)))},i.eu=function(e,t,s){return new i(t,new Pr(t._delegate,s,e))},Object.defineProperty(i.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return new xw(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),i.prototype.collection=function(e){try{return new xw(this.firestore,DS(this._delegate,e))}catch(t){throw Go(t,"collection()","DocumentReference.collection()")}},i.prototype.isEqual=function(e){return(e=(0,gi.m9)(e))instanceof Pr&&gA(this._delegate,e)},i.prototype.set=function(e,t){t=MS("DocumentReference.set",t);try{return function(s,o,a){s=fn(s,Pr);var l=fn(s.firestore,Qr),h=yw(s.converter,o,a);return Uy(l,[gw(Jh(l),"setDoc",s._key,h,null!==s.converter,a).toMutation(s._key,Qs.none())])}(this._delegate,e,t)}catch(s){throw Go(s,"setDoc()","DocumentReference.set()")}},i.prototype.update=function(e,t){for(var s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];try{return 1===arguments.length?GS(this._delegate,e):GS.apply(void 0,(0,q.ev)([this._delegate,e,t],s))}catch(a){throw Go(a,"updateDoc()","DocumentReference.update()")}},i.prototype.delete=function(){return Uy(fn((e=this._delegate).firestore,Qr),[new _u(e._key,Qs.none())]);var e},i.prototype.onSnapshot=function(){for(var e=this,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var o=FA(t),a=qS(t,function(l){return new Hy(e.firestore,new Ud(e.firestore._delegate,e._userDataWriter,l._key,l._document,l.metadata,e._delegate.converter))});return HS(this._delegate,o,a)},i.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(s){s=fn(s,Pr);var o=fn(s.firestore,Qr),a=Xr(o),l=new Up(o);return function(h,g){var _=this,b=new So;return h.asyncQueue.enqueueAndForget(function(){return(0,q.mG)(_,void 0,void 0,function(){var x;return(0,q.Jh)(this,function(S){switch(S.label){case 0:return x=function(M,T,I){return(0,q.mG)(this,void 0,void 0,function(){var L,k;return(0,q.Jh)(this,function(R){switch(R.label){case 0:return R.trys.push([0,2,,3]),[4,(U=M,N=T,j=_t(U),j.persistence.runTransaction("read document","readonly",function(K){return j.Mn.mn(K,N)}))];case 1:return(k=R.sent()).isFoundDocument()?I.resolve(k):k.isNoDocument()?I.resolve(null):I.reject(new it(Ee.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return L=R.sent(),k=Lp(L,"Failed to get document '"+T+" from cache"),I.reject(k),[3,3];case 3:return[2]}var U,N,j})})},[4,dw(h)];case 1:return[2,x.apply(void 0,[S.sent(),g,b])]}})})}),b.promise}(a,s._key).then(function(h){return new Ud(o,l,s._key,h,new Xh(null!==h&&h.hasLocalMutations,!0),s.converter)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(s){s=fn(s,Pr);var o=fn(s.firestore,Qr);return dA(Xr(o),s._key,{source:"server"}).then(function(a){return zS(o,s,a)})}(this._delegate):function(s){s=fn(s,Pr);var o=fn(s.firestore,Qr);return dA(Xr(o),s._key).then(function(a){return zS(o,s,a)})}(this._delegate)).then(function(s){return new Hy(t.firestore,new Ud(t.firestore._delegate,t._userDataWriter,s._key,s._document,s.metadata,t._delegate.converter))})},i.prototype.withConverter=function(e){return new i(this.firestore,this._delegate.withConverter(e?rv.nu(this.firestore,e):null))},i}();function Go(i,e,t){return i.message=i.message.replace(e,t),i}function FA(i){for(var e=0,t=i;e<t.length;e++){var s=t[e];if("object"==typeof s&&!Pu(s))return s}return{}}function qS(i,e){var t,s,o;return{next:function(a){o.next&&o.next(e(a))},error:null===(t=(o=Pu(i[0])?i[0]:Pu(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]}).error)||void 0===t?void 0:t.bind(o),complete:null===(s=o.complete)||void 0===s?void 0:s.bind(o)}}var Hy=function(){function i(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(i.prototype,"ref",{get:function(){return new Gp(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),i.prototype.data=function(e){return this._delegate.data(e)},i.prototype.get=function(e,t){return this._delegate.get(e,t)},i.prototype.isEqual=function(e){return xA(this._delegate,e._delegate)},i}(),sv=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,q.ZT)(e,i),e.prototype.data=function(t){return this._delegate.data(t)},e}(Hy),ww=function(){function i(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Gy(e)}return i.prototype.where=function(e,t,s){try{return new i(this.firestore,Gd(this._delegate,(l=s,h=t,g=mw("where",o=e),new CA(g,h,l))))}catch(o){throw Go(o,/(orderBy|where)\(\)/,"Query.$1()")}var o,l,h,g},i.prototype.orderBy=function(e,t){try{return new i(this.firestore,Gd(this._delegate,function(s,o){void 0===o&&(o="asc");var a=o,l=mw("orderBy",s);return new EP(l,a)}(e,t)))}catch(s){throw Go(s,/(orderBy|where)\(\)/,"Query.$1()")}},i.prototype.limit=function(e){try{return new i(this.firestore,Gd(this._delegate,(vP("limit",t=e),new SA("limit",t,"F"))))}catch(t){throw Go(t,"limit()","Query.limit()")}var t},i.prototype.limitToLast=function(e){try{return new i(this.firestore,Gd(this._delegate,(vP("limitToLast",t=e),new SA("limitToLast",t,"L"))))}catch(t){throw Go(t,"limitToLast()","Query.limitToLast()")}var t},i.prototype.startAt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new i(this.firestore,Gd(this._delegate,function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return new MA("startAt",s,!0)}.apply(void 0,e)))}catch(s){throw Go(s,"startAt()","Query.startAt()")}},i.prototype.startAfter=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new i(this.firestore,Gd(this._delegate,function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return new MA("startAfter",s,!1)}.apply(void 0,e)))}catch(s){throw Go(s,"startAfter()","Query.startAfter()")}},i.prototype.endBefore=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new i(this.firestore,Gd(this._delegate,function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return new _w("endBefore",s,!0)}.apply(void 0,e)))}catch(s){throw Go(s,"endBefore()","Query.endBefore()")}},i.prototype.endAt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new i(this.firestore,Gd(this._delegate,function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return new _w("endAt",s,!1)}.apply(void 0,e)))}catch(s){throw Go(s,"endAt()","Query.endAt()")}},i.prototype.isEqual=function(e){return mA(this._delegate,e._delegate)},i.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(s){s=fn(s,ca);var o=fn(s.firestore,Qr),a=Xr(o),l=new Up(o);return function(h,g){var _=this,b=new So;return h.asyncQueue.enqueueAndForget(function(){return(0,q.mG)(_,void 0,void 0,function(){var x;return(0,q.Jh)(this,function(S){switch(S.label){case 0:return x=function(M,T,I){return(0,q.mG)(this,void 0,void 0,function(){var L,k,R,U,N;return(0,q.Jh)(this,function(j){switch(j.label){case 0:return j.trys.push([0,2,,3]),[4,Zb(M,T,!0)];case 1:return N=j.sent(),L=new $D(T,N.Bn),k=L._o(N.documents),R=L.applyChanges(k,!1),I.resolve(R.snapshot),[3,3];case 2:return U=j.sent(),N=Lp(U,"Failed to execute query '"+T+" against cache"),I.reject(N),[3,3];case 3:return[2]}})})},[4,dw(h)];case 1:return[2,x.apply(void 0,[S.sent(),g,b])]}})})}),b.promise}(a,s._query).then(function(h){return new ef(o,l,s,h)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(s){s=fn(s,ca);var o=fn(s.firestore,Qr),a=Xr(o),l=new Up(o);return hA(a,s._query,{source:"server"}).then(function(h){return new ef(o,l,s,h)})}(this._delegate):function(s){s=fn(s,ca);var o=fn(s.firestore,Qr),a=Xr(o),l=new Up(o);return vw(s._query),hA(a,s._query).then(function(h){return new ef(o,l,s,h)})}(this._delegate)).then(function(s){return new Hp(t.firestore,new ef(t.firestore._delegate,t._userDataWriter,t._delegate,s._snapshot))})},i.prototype.onSnapshot=function(){for(var e=this,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var o=FA(t),a=qS(t,function(l){return new Hp(e.firestore,new ef(e.firestore._delegate,e._userDataWriter,e._delegate,l._snapshot))});return HS(this._delegate,o,a)},i.prototype.withConverter=function(e){return new i(this.firestore,this._delegate.withConverter(e?rv.nu(this.firestore,e):null))},i}(),TP=function(){function i(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(i.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"doc",{get:function(){return new sv(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),i}(),Hp=function(){function i(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(i.prototype,"query",{get:function(){return new ww(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(t){return new sv(e._firestore,t)})},enumerable:!1,configurable:!0}),i.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map(function(s){return new TP(t._firestore,s)})},i.prototype.forEach=function(e,t){var s=this;this._delegate.forEach(function(o){e.call(t,new sv(s._firestore,o))})},i.prototype.isEqual=function(e){return xA(this._delegate,e._delegate)},i}(),xw=function(i){function e(t,s){var o=this;return(o=i.call(this,t,s)||this).firestore=t,o._delegate=s,o}return(0,q.ZT)(e,i),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Gp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Gp(this.firestore,void 0===t?Ly(this._delegate):Ly(this._delegate,t))}catch(s){throw Go(s,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var o,a,l,h,g,s=this;return(o=this._delegate,a=t,l=fn(o.firestore,Qr),h=Ly(o),g=yw(o.converter,a),Uy(l,[gw(Jh(o.firestore),"addDoc",h._key,g,null!==o.converter,{}).toMutation(h._key,Qs.exists(!1))]).then(function(){return h})).then(function(o){return new Gp(s.firestore,o)})},e.prototype.isEqual=function(t){return gA(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?rv.nu(this.firestore,t):null))},e}(ww);function Pl(i){return fn(i,Pr)}var zy=function(){function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(ku.bind.apply(ku,(0,q.ev)([void 0],e)))}return i.documentId=function(){return new i(Pa.keyField().canonicalString())},i.prototype.isEqual=function(e){return(e=(0,gi.m9)(e))instanceof ku&&this._delegate._internalPath.isEqual(e._internalPath)},i}(),IP=function(){function i(e){this._delegate=e}return i.serverTimestamp=function(){var e=new NN("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new i(e)},i.delete=function(){var e=new OS("deleteField");return e._methodName="FieldValue.delete",new i(e)},i.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var s=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return new BN("arrayUnion",o)}.apply(void 0,e);return s._methodName="FieldValue.arrayUnion",new i(s)},i.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var s=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return new VN("arrayRemove",o)}.apply(void 0,e);return s._methodName="FieldValue.arrayRemove",new i(s)},i.increment=function(e){var t=new vA("increment",e);return t._methodName="FieldValue.increment",new i(t)},i.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},i}(),PP=Q(2461),kP={Firestore:bw,GeoPoint:pw,Timestamp:Kr,Blob:PA,Transaction:kA,WriteBatch:OA,DocumentReference:Gp,DocumentSnapshot:Hy,Query:ww,QueryDocumentSnapshot:sv,QuerySnapshot:Hp,CollectionReference:xw,FieldPath:zy,FieldValue:IP,setLogLevel:function WS(i){Ia.setLogLevel(i)},CACHE_SIZE_UNLIMITED:-1};!function OP(i){i.INTERNAL.registerComponent(new PP.wA("firestore",function(s){return e=s.getProvider("app").getImmediate(),t=s.getProvider("auth-internal"),new bw(e,new Qr(e,t),new jS);var e,t},"PUBLIC").setServiceProps(Object.assign({},kP))),i.registerVersion("@firebase/firestore","2.4.0")}(Vc.Z);var yt=Q(7579),mc=Q(6451),Hd=Q(8421);function lr(i,e){return(0,Un.e)((t,s)=>{let o=null,a=0,l=!1;const h=()=>l&&!o&&s.complete();t.subscribe(new $i.Q(s,g=>{null==o||o.unsubscribe();let _=0;const b=a++;(0,Hd.Xf)(i(g,b)).subscribe(o=new $i.Q(s,x=>s.next(e?e(g,x,b,_++):x),()=>{o=null,h()}))},()=>{l=!0,h()}))})}var Cw=Q(6063);class jy extends yt.x{constructor(e=1/0,t=1/0,s=Cw.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:s,_infiniteTimeWindow:o,_timestampProvider:a,_windowTime:l}=this;t||(s.push(e),!o&&s.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:s,_buffer:o}=this,a=o.slice();for(let l=0;l<a.length&&!e.closed;l+=s?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:s,_infiniteTimeWindow:o}=this,a=(o?1:2)*e;if(e<1/0&&a<s.length&&s.splice(0,s.length-a),!o){const l=t.now();let h=0;for(let g=1;g<s.length&&s[g]<=l;g+=2)h=g;h&&s.splice(0,h+1)}}}var LA=Q(3099);function ov(i,e,t){var s,o;let a,l=!1;return i&&"object"==typeof i?(a=null!==(s=i.bufferSize)&&void 0!==s?s:1/0,e=null!==(o=i.windowTime)&&void 0!==o?o:1/0,l=!!i.refCount,t=i.scheduler):a=null!=i?i:1/0,(0,LA.B)({connector:()=>new jy(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}const Sw=(0,Q(3888).d)(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});var Oi=Q(5698);function BA(i){return(0,Un.e)((e,t)=>{let s=!1;e.subscribe(new $i.Q(t,o=>{s=!0,t.next(o)},()=>{s||t.next(i),t.complete()}))})}function Mw(i=FP){return(0,Un.e)((e,t)=>{let s=!1;e.subscribe(new $i.Q(t,o=>{s=!0,t.next(o)},()=>s?t.complete():t.error(i())))})}function FP(){return new Sw}function av(i,e){const t=arguments.length>=2;return s=>s.pipe(i?Dn((o,a)=>i(o,a,s)):jl.y,(0,Oi.q)(1),t?BA(e):Mw(()=>new Sw))}var Na=Q(576);function VA(i,e){return(0,Na.m)(e)?lr(()=>i,e):lr(()=>i)}var nf=Q(9468);const zd=new u.OlP("angularfire2.auth.use-emulator"),LP=new u.OlP("angularfire2.auth.settings"),YS=new u.OlP("angularfire2.auth.tenant-id"),GA=new u.OlP("angularfire2.auth.langugage-code"),NP=new u.OlP("angularfire2.auth.use-device-language"),$S=new u.OlP("angularfire.auth.persistence");let Ew=(()=>{class i{constructor(t,s,o,a,l,h,g,_,b,x){const S=new ii.HU(a),M=(0,ii.ss)(S),T=new yt.x,I=at(void 0).pipe((0,Ca.Q)(S.outsideAngular),lr(()=>a.runOutsideAngular(()=>Promise.resolve().then(Q.bind(Q,7315)))),(0,Dt.U)(()=>(0,ii.on)(t,a,s)),(0,Dt.U)(L=>a.runOutsideAngular(()=>{const k=l,R=h;return(0,ii.sI)(`${L.name}.auth`,"AngularFireAuth",L,()=>{const U=a.runOutsideAngular(()=>L.auth());if(k&&U.useEmulator(`http://${k.join(":")}`),g&&(U.tenantId=g),U.languageCode=_,b&&U.useDeviceLanguage(),R)for(const[N,j]of Object.entries(R))U.settings[N]=j;return x&&U.setPersistence(x),U},[k,g,_,b,R,x])})),ov({bufferSize:1,refCount:!1}));if(Gs(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{I.pipe(av()).subscribe();const k=I.pipe(lr(j=>j.getRedirectResult().then(K=>K,()=>null)),M,ov({bufferSize:1,refCount:!1})),R=j=>new Ri.y(K=>({unsubscribe:a.runOutsideAngular(()=>j(K))})),U=I.pipe(lr(j=>R(j.onAuthStateChanged.bind(j)))),N=I.pipe(lr(j=>R(j.onIdTokenChanged.bind(j))));this.authState=k.pipe(VA(U),(0,nf.R)(S.outsideAngular),(0,Ca.Q)(S.insideAngular)),this.user=k.pipe(VA(N),(0,nf.R)(S.outsideAngular),(0,Ca.Q)(S.insideAngular)),this.idToken=this.user.pipe(lr(j=>j?(0,Yi.D)(j.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(lr(j=>j?(0,Yi.D)(j.getIdTokenResult()):at(null))),this.credential=(0,mc.T)(k,T,this.authState.pipe(Dn(j=>!j))).pipe((0,Dt.U)(j=>(null==j?void 0:j.user)?j:null),(0,nf.R)(S.outsideAngular),(0,Ca.Q)(S.insideAngular))}return(0,ii.pX)(this,I,a,{spy:{apply:(L,k,R)=>{(L.startsWith("signIn")||L.startsWith("createUser"))&&R.then(U=>T.next(U))}}})}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(ii.Dh),u.LFG(ii.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(zd,8),u.LFG(LP,8),u.LFG(YS,8),u.LFG(GA,8),u.LFG(NP,8),u.LFG($S,8))},i.\u0275prov=u.Yz7({factory:function(){return new i(u.LFG(ii.Dh),u.LFG(ii.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(zd,8),u.LFG(LP,8),u.LFG(YS,8),u.LFG(GA,8),u.LFG(NP,8),u.LFG($S,8))},token:i,providedIn:"any"}),i})();function KS(i,e){return function ZS(i,e=os.z){return new Ri.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(i,e)}function Dw(i,e){return KS(i,e).pipe((0,Dt.U)(t=>({payload:t,type:"query"})))}function Aw(i,e){return Dw(i,e).pipe(zn(void 0),Hl(),(0,Dt.U)(([t,s])=>{const o=s.payload.docChanges(),a=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((l,h)=>{const g=o.find(b=>b.doc.ref.isEqual(l.ref)),_=null==t?void 0:t.payload.docs.find(b=>b.ref.isEqual(l.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(l.metadata)||!g&&_&&JSON.stringify(_.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function zA(i,e,t){return Aw(i,t).pipe(zl((s,o)=>function VP(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function UP(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return JS(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return JS(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return JS(i,e.oldIndex,1)}return i}(i,s))}),i}(s,o.map(a=>a.payload),e),[]),vl(),(0,Dt.U)(s=>s.map(o=>({type:o.type,payload:o}))))}function JS(i,e,t,...s){const o=i.slice();return o.splice(e,t,...s),o}function jA(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class WA{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Aw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Dt.U)(s=>s.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(zn(void 0),Hl(),Dn(([s,o])=>o.length>0||!s),(0,Dt.U)(([s,o])=>o),this.afs.keepUnstableUntilFirst)}auditTrail(e){return this.stateChanges(e).pipe(zl((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=jA(e);return zA(this.query,t,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(e={}){return Dw(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),this.afs.keepUnstableUntilFirst)}get(e){return(0,Yi.D)(this.query.get(e)).pipe((0,Ca.Q)(this.afs.schedulers.insideAngular))}add(e){return this.ref.add(e)}doc(e){return new lv(this.ref.doc(e),this.afs)}}class lv{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:o,query:a}=eM(s,t);return new WA(o,a,this.afs)}snapshotChanges(){return function HA(i,e){return KS(i,e).pipe(zn(void 0),Hl(),(0,Dt.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Dt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Yi.D)(this.ref.get(e)).pipe((0,Ca.Q)(this.afs.schedulers.insideAngular))}}class qA{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Aw(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),Dn(t=>t.length>0),this.afs.keepUnstableUntilFirst):Aw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(e){return this.stateChanges(e).pipe(zl((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=jA(e);return zA(this.query,t,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(e={}){return Dw(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(s=>s.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),this.afs.keepUnstableUntilFirst)}get(e){return(0,Yi.D)(this.query.get(e)).pipe((0,Ca.Q)(this.afs.schedulers.insideAngular))}}const Tw=new u.OlP("angularfire2.enableFirestorePersistence"),Iw=new u.OlP("angularfire2.firestore.persistenceSettings"),QS=new u.OlP("angularfire2.firestore.settings"),XS=new u.OlP("angularfire2.firestore.use-emulator");function eM(i,e=(t=>t)){return{query:e(i),ref:i}}let GP=(()=>{class i{constructor(t,s,o,a,l,h,g,_,b){this.schedulers=new ii.HU(h),this.keepUnstableUntilFirst=(0,ii.ss)(this.schedulers);const x=(0,ii.on)(t,h,s);!Pf.Z.auth&&b&&(0,ii.yq)();const S=_;[this.firestore,this.persistenceEnabled$]=(0,ii.sI)(`${x.name}.firestore`,"AngularFirestore",x,()=>{const M=h.runOutsideAngular(()=>x.firestore());if(a&&M.settings(a),S&&M.useEmulator(...S),o&&!Gs(l)){const T=()=>{try{return(0,Yi.D)(M.enablePersistence(g||void 0).then(()=>!0,()=>!1))}catch(I){return"undefined"!=typeof console&&console.warn(I),at(!1)}};return[M,h.runOutsideAngular(T)]}return[M,at(!1)]},[a,S,o])}collection(t,s){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=eM(o,s),h=this.schedulers.ngZone.run(()=>a);return new WA(h,l,this)}collectionGroup(t,s){const o=s||(l=>l),a=this.firestore.collectionGroup(t);return new qA(o(a),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>s);return new lv(o,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(ii.Dh),u.LFG(ii.xv,8),u.LFG(Tw,8),u.LFG(QS,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Iw,8),u.LFG(XS,8),u.LFG(zd,8))},i.\u0275prov=u.Yz7({factory:function(){return new i(u.LFG(ii.Dh),u.LFG(ii.xv,8),u.LFG(Tw,8),u.LFG(QS,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Iw,8),u.LFG(XS,8),u.LFG(zd,8))},token:i,providedIn:"any"}),i})(),YA=(()=>{class i{static enablePersistence(t){return{ngModule:i,providers:[{provide:Tw,useValue:!0},{provide:Iw,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[GP]}),i})();var Ou=Q(515);class HP extends $i.Q{constructor(){super(...arguments),this.activeGroups=0,this.teardownAttempted=!1}unsubscribe(){this.teardownAttempted=!0,0===this.activeGroups&&super.unsubscribe()}}var It=Q(5577);class Ki extends yt.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:s}=this;if(e)throw t;return this._throwIfClosed(),s}next(e){super.next(this._value=e)}}const{isArray:zP}=Array,{getPrototypeOf:tM,prototype:Fu,keys:jP}=Object;function Wy(i){if(1===i.length){const e=i[0];if(zP(e))return{args:e,keys:null};if(function qy(i){return i&&"object"==typeof i&&tM(i)===Fu}(e)){const t=jP(e);return{args:t.map(s=>e[s]),keys:t}}}return{args:i,keys:null}}const{isArray:WP}=Array;function nM(i){return(0,Dt.U)(e=>function qP(i,e){return WP(e)?i(...e):i(e)}(i,e))}function Yy(i,e){return i.reduce((t,s,o)=>(t[s]=e[o],t),{})}var Rw=Q(9672);function ZA(...i){const e=(0,Ya.yG)(i),t=(0,Ya.jO)(i),{args:s,keys:o}=Wy(i);if(0===s.length)return(0,Yi.D)([],e);const a=new Ri.y(function YP(i,e,t=jl.y){return s=>{iM(e,()=>{const{length:o}=i,a=new Array(o);let l=o,h=o;for(let g=0;g<o;g++)iM(e,()=>{const _=(0,Yi.D)(i[g],e);let b=!1;_.subscribe(new $i.Q(s,x=>{a[g]=x,b||(b=!0,h--),h||s.next(t(a.slice()))},()=>{--l||s.complete()}))},s)},s)}}(s,e,o?l=>Yy(o,l):jl.y));return t?a.pipe(nM(t)):a}function iM(i,e,t){i?(0,Rw.f)(t,i,e):e()}function rf(i){return new Ri.y(e=>{(0,Hd.Xf)(i()).subscribe(e)})}var fs=Q(727);function rM(){return(0,Un.e)((i,e)=>{let t=null;i._refCount++;const s=new $i.Q(e,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(t=null);const o=i._connection,a=t;t=null,o&&(!a||o===a)&&o.unsubscribe(),e.unsubscribe()});i.subscribe(s),s.closed||(t=i.connect())})}class KA extends Ri.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Un.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new fs.w0;const t=this.getSubject();e.add(this.source.subscribe(new $i.Q(t,void 0,()=>{this._teardown(),t.complete()},s=>{this._teardown(),t.error(s)},()=>this._teardown()))),e.closed&&(this._connection=null,e=fs.w0.EMPTY)}return e}refCount(){return rM()(this)}}function ps(i){return(0,Un.e)((e,t)=>{let a,s=null,o=!1;s=e.subscribe(new $i.Q(t,void 0,void 0,l=>{a=(0,Hd.Xf)(i(l,ps(i)(e))),s?(s.unsubscribe(),s=null,a.subscribe(t)):o=!0})),o&&(s.unsubscribe(),s=null,a.subscribe(t))})}function cv(i,e){return(0,Na.m)(e)?(0,It.z)(i,e,1):(0,It.z)(i,1)}function $y(i){return i<=0?()=>Ou.E:(0,Un.e)((e,t)=>{let s=[];e.subscribe(new $i.Q(t,o=>{s.push(o),i<s.length&&s.shift()},()=>{for(const o of s)t.next(o);t.complete()},void 0,()=>{s=null}))})}var gs=Q(8505);function Pw(i){return(0,Un.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(i)}})}class vc{constructor(e,t){this.id=e,this.url=t}}class oM extends vc{constructor(e,t,s="imperative",o=null){super(e,t),this.navigationTrigger=s,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zy extends vc{constructor(e,t,s){super(e,t),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class JA extends vc{constructor(e,t,s){super(e,t),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $P extends vc{constructor(e,t,s){super(e,t),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class QA extends vc{constructor(e,t,s,o){super(e,t),this.urlAfterRedirects=s,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aM extends vc{constructor(e,t,s,o){super(e,t),this.urlAfterRedirects=s,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XA extends vc{constructor(e,t,s,o,a){super(e,t),this.urlAfterRedirects=s,this.state=o,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class eT extends vc{constructor(e,t,s,o){super(e,t),this.urlAfterRedirects=s,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tT extends vc{constructor(e,t,s,o){super(e,t),this.urlAfterRedirects=s,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lM{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nT{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class iT{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rT{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZP{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cM{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sT{constructor(e,t,s){this.routerEvent=e,this.position=t,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const mn="primary";class uv{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function dv(i){return new uv(i)}const oT="ngNavigationCancelingError";function aT(i){const e=Error("NavigationCancelingError: "+i);return e[oT]=!0,e}function KP(i,e,t){const s=t.path.split("/");if(s.length>i.length||"full"===t.pathMatch&&(e.hasChildren()||s.length<i.length))return null;const o={};for(let a=0;a<s.length;a++){const l=s[a],h=i[a];if(l.startsWith(":"))o[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:i.slice(0,s.length),posParams:o}}function Lu(i,e){const t=i?Object.keys(i):void 0,s=e?Object.keys(e):void 0;if(!t||!s||t.length!=s.length)return!1;let o;for(let a=0;a<t.length;a++)if(o=t[a],!dM(i[o],e[o]))return!1;return!0}function dM(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;const t=[...i].sort(),s=[...e].sort();return t.every((o,a)=>s[a]===o)}return i===e}function lT(i){return Array.prototype.concat.apply([],i)}function cT(i){return i.length>0?i[i.length-1]:null}function io(i,e){for(const t in i)i.hasOwnProperty(t)&&e(i[t],t)}function _c(i){return(0,u.CqO)(i)?i:(0,u.QGY)(i)?(0,Yi.D)(Promise.resolve(i)):at(i)}const hM={exact:function pM(i,e,t){if(!sf(i.segments,e.segments)||!hv(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(const s in e.children)if(!i.children[s]||!pM(i.children[s],e.children[s],t))return!1;return!0},subset:gM},JP={exact:function QP(i,e){return Lu(i,e)},subset:function Ow(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>dM(i[t],e[t]))},ignored:()=>!0};function fM(i,e,t){return hM[t.paths](i.root,e.root,t.matrixParams)&&JP[t.queryParams](i.queryParams,e.queryParams)&&!("exact"===t.fragment&&i.fragment!==e.fragment)}function gM(i,e,t){return dT(i,e,e.segments,t)}function dT(i,e,t,s){if(i.segments.length>t.length){const o=i.segments.slice(0,t.length);return!(!sf(o,t)||e.hasChildren()||!hv(o,t,s))}if(i.segments.length===t.length){if(!sf(i.segments,t)||!hv(i.segments,t,s))return!1;for(const o in e.children)if(!i.children[o]||!gM(i.children[o],e.children[o],s))return!1;return!0}{const o=t.slice(0,i.segments.length),a=t.slice(i.segments.length);return!!(sf(i.segments,o)&&hv(i.segments,o,s)&&i.children[mn])&&dT(i.children[mn],e,a,s)}}function hv(i,e,t){return e.every((s,o)=>JP[t](i[o].parameters,s.parameters))}class jd{constructor(e,t,s){this.root=e,this.queryParams=t,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=dv(this.queryParams)),this._queryParamMap}toString(){return pT.serialize(this)}}class di{constructor(e,t){this.segments=e,this.children=t,this.parent=null,io(t,(s,o)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fw(this)}}class Jy{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=dv(this.parameters)),this._parameterMap}toString(){return mT(this)}}function sf(i,e){return i.length===e.length&&i.every((t,s)=>t.path===e[s].path)}class fT{}class mM{parse(e){const t=new WN(e);return new jd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Qy(e.root,!0)}`,s=function UN(i){const e=Object.keys(i).map(t=>{const s=i[t];return Array.isArray(s)?s.map(o=>`${Lw(t)}=${Lw(o)}`).join("&"):`${Lw(t)}=${Lw(s)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function gT(i){return encodeURI(i)}(e.fragment)}`:"";return`${t}${s}${o}`}}const pT=new mM;function Fw(i){return i.segments.map(e=>mT(e)).join("/")}function Qy(i,e){if(!i.hasChildren())return Fw(i);if(e){const t=i.children[mn]?Qy(i.children[mn],!1):"",s=[];return io(i.children,(o,a)=>{a!==mn&&s.push(`${a}:${Qy(o,!1)}`)}),s.length>0?`${t}(${s.join("//")})`:t}{const t=function hT(i,e){let t=[];return io(i.children,(s,o)=>{o===mn&&(t=t.concat(e(s,o)))}),io(i.children,(s,o)=>{o!==mn&&(t=t.concat(e(s,o)))}),t}(i,(s,o)=>o===mn?[Qy(i.children[mn],!1)]:[`${o}:${Qy(s,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[mn]?`${Fw(i)}/${t[0]}`:`${Fw(i)}/(${t.join("//")})`}}function vM(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lw(i){return vM(i).replace(/%3B/gi,";")}function Nw(i){return vM(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xy(i){return decodeURIComponent(i)}function _M(i){return Xy(i.replace(/\+/g,"%20"))}function mT(i){return`${Nw(i.path)}${function ek(i){return Object.keys(i).map(e=>`;${Nw(e)}=${Nw(i[e])}`).join("")}(i.parameters)}`}const vT=/^[^\/()?;=#]+/;function yM(i){const e=i.match(vT);return e?e[0]:""}const GN=/^[^=?&#]+/,zN=/^[^&#]+/;class WN{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new di([],{}):new di([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(s[mn]=new di(e,t)),s}parseSegment(){const e=yM(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Jy(Xy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=yM(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const o=yM(this.remaining);o&&(s=o,this.capture(s))}e[Xy(t)]=Xy(s)}parseQueryParam(e){const t=function HN(i){const e=i.match(GN);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const l=function jN(i){const e=i.match(zN);return e?e[0]:""}(this.remaining);l&&(s=l,this.capture(s))}const o=_M(t),a=_M(s);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(a)}else e[o]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=yM(this.remaining),o=this.remaining[s.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let a;s.indexOf(":")>-1?(a=s.substr(0,s.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=mn);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[mn]:new di([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class tk{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=_T(e,this._root);return t?t.children.map(s=>s.value):[]}firstChild(e){const t=_T(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=fv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return fv(e,this._root).map(t=>t.value)}}function _T(i,e){if(i===e.value)return e;for(const t of e.children){const s=_T(i,t);if(s)return s}return null}function fv(i,e){if(i===e.value)return[e];for(const t of e.children){const s=fv(i,t);if(s.length)return s.unshift(e),s}return[]}class af{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function lf(i){const e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}class zp extends tk{constructor(e,t){super(e),this.snapshot=t,bT(this,e)}toString(){return this.snapshot.toString()}}function bM(i,e){const t=function nk(i,e){const l=new e0([],{},{},"",{},mn,e,null,i.root,-1,{});return new wM("",new af(l,[]))}(i,e),s=new Ki([new Jy("",{})]),o=new Ki({}),a=new Ki({}),l=new Ki({}),h=new Ki(""),g=new pv(s,o,l,h,a,mn,e,t.root);return g.snapshot=t.root,new zp(new af(g,[]),t)}class pv{constructor(e,t,s,o,a,l,h,g){this.url=e,this.params=t,this.queryParams=s,this.fragment=o,this.data=a,this.outlet=l,this.component=h,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Dt.U)(e=>dv(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Dt.U)(e=>dv(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Bw(i,e="emptyOnly"){const t=i.pathFromRoot;let s=0;if("always"!==e)for(s=t.length-1;s>=1;){const o=t[s],a=t[s-1];if(o.routeConfig&&""===o.routeConfig.path)s--;else{if(a.component)break;s--}}return function yT(i){return i.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(s))}class e0{constructor(e,t,s,o,a,l,h,g,_,b,x){this.url=e,this.params=t,this.queryParams=s,this.fragment=o,this.data=a,this.outlet=l,this.component=h,this.routeConfig=g,this._urlSegment=_,this._lastPathIndex=b,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=dv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=dv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wM extends tk{constructor(e,t){super(t),this.url=e,bT(this,t)}toString(){return xM(this._root)}}function bT(i,e){e.value._routerState=i,e.children.forEach(t=>bT(i,t))}function xM(i){const e=i.children.length>0?` { ${i.children.map(xM).join(", ")} } `:"";return`${i.value}${e}`}function gv(i){if(i.snapshot){const e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,Lu(e.queryParams,t.queryParams)||i.queryParams.next(t.queryParams),e.fragment!==t.fragment&&i.fragment.next(t.fragment),Lu(e.params,t.params)||i.params.next(t.params),function uM(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!Lu(i[t],e[t]))return!1;return!0}(e.url,t.url)||i.url.next(t.url),Lu(e.data,t.data)||i.data.next(t.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function Vw(i,e){const t=Lu(i.params,e.params)&&function XP(i,e){return sf(i,e)&&i.every((t,s)=>Lu(t.parameters,e[s].parameters))}(i.url,e.url);return t&&!(!i.parent!=!e.parent)&&(!i.parent||Vw(i.parent,e.parent))}function Uw(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){const s=t.value;s._futureSnapshot=e.value;const o=function YN(i,e,t){return e.children.map(s=>{for(const o of t.children)if(i.shouldReuseRoute(s.value,o.value.snapshot))return Uw(i,s,o);return Uw(i,s)})}(i,e,t);return new af(s,o)}{if(i.shouldAttach(e.value)){const a=i.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>Uw(i,h)),l}}const s=function ik(i){return new pv(new Ki(i.url),new Ki(i.params),new Ki(i.queryParams),new Ki(i.fragment),new Ki(i.data),i.outlet,i.component,i)}(e.value),o=e.children.map(a=>Uw(i,a));return new af(s,o)}}function Gw(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Hw(i){return"object"==typeof i&&null!=i&&i.outlets}function SM(i,e,t,s,o){let a={};return s&&io(s,(l,h)=>{a[h]=Array.isArray(l)?l.map(g=>`${g}`):`${l}`}),new jd(t.root===i?e:zw(t.root,i,e),a,o)}function zw(i,e,t){const s={};return io(i.children,(o,a)=>{s[a]=o===e?t:zw(o,e,t)}),new di(i.segments,s)}class wT{constructor(e,t,s){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=s,e&&s.length>0&&Gw(s[0]))throw new Error("Root segment cannot have matrix parameters");const o=s.find(Hw);if(o&&o!==cT(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class MM{constructor(e,t,s){this.segmentGroup=e,this.processChildren=t,this.index=s}}function jw(i,e,t){if(i||(i=new di([],{})),0===i.segments.length&&i.hasChildren())return t0(i,e,t);const s=function xT(i,e,t){let s=0,o=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;o<i.segments.length;){if(s>=t.length)return a;const l=i.segments[o],h=t[s];if(Hw(h))break;const g=`${h}`,_=s<t.length-1?t[s+1]:null;if(o>0&&void 0===g)break;if(g&&_&&"object"==typeof _&&void 0===_.outlets){if(!ST(g,_,l))return a;s+=2}else{if(!ST(g,{},l))return a;s++}o++}return{match:!0,pathIndex:o,commandIndex:s}}(i,e,t),o=t.slice(s.commandIndex);if(s.match&&s.pathIndex<i.segments.length){const a=new di(i.segments.slice(0,s.pathIndex),{});return a.children[mn]=new di(i.segments.slice(s.pathIndex),i.children),t0(a,0,o)}return s.match&&0===o.length?new di(i.segments,{}):s.match&&!i.hasChildren()?DM(i,e,t):s.match?t0(i,0,o):DM(i,e,t)}function t0(i,e,t){if(0===t.length)return new di(i.segments,{});{const s=function sk(i){return Hw(i[0])?i[0].outlets:{[mn]:i}}(t),o={};return io(s,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(o[l]=jw(i.children[l],e,a))}),io(i.children,(a,l)=>{void 0===s[l]&&(o[l]=a)}),new di(i.segments,o)}}function DM(i,e,t){const s=i.segments.slice(0,e);let o=0;for(;o<t.length;){const a=t[o];if(Hw(a)){const g=CT(a.outlets);return new di(s,g)}if(0===o&&Gw(t[0])){s.push(new Jy(i.segments[e].path,AM(t[0]))),o++;continue}const l=Hw(a)?a.outlets[mn]:`${a}`,h=o<t.length-1?t[o+1]:null;l&&h&&Gw(h)?(s.push(new Jy(l,AM(h))),o+=2):(s.push(new Jy(l,{})),o++)}return new di(s,{})}function CT(i){const e={};return io(i,(t,s)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[s]=DM(new di([],{}),0,t))}),e}function AM(i){const e={};return io(i,(t,s)=>e[s]=`${t}`),e}function ST(i,e,t){return i==t.path&&Lu(e,t.parameters)}class TM{constructor(e,t,s,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=s,this.forwardEvent=o}activate(e){const t=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,s,e),gv(this.futureState.root),this.activateChildRoutes(t,s,e)}deactivateChildRoutes(e,t,s){const o=lf(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,o[l],s),delete o[l]}),io(o,(a,l)=>{this.deactivateRouteAndItsChildren(a,s)})}deactivateRoutes(e,t,s){const o=e.value,a=t?t.value:null;if(o===a)if(o.component){const l=s.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,s);else a&&this.deactivateRouteAndItsChildren(t,s)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const s=t.getContext(e.value.outlet),o=s&&e.value.component?s.children:t,a=lf(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],o);if(s&&s.outlet){const l=s.outlet.detach(),h=s.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const s=t.getContext(e.value.outlet),o=s&&e.value.component?s.children:t,a=lf(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],o);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(e,t,s){const o=lf(t);e.children.forEach(a=>{this.activateRoutes(a,o[a.value.outlet],s),this.forwardEvent(new cM(a.value.snapshot))}),e.children.length&&this.forwardEvent(new rT(e.value.snapshot))}activateRoutes(e,t,s){const o=e.value,a=t?t.value:null;if(gv(o),o===a)if(o.component){const l=s.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,s);else if(o.component){const l=s.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const h=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),gv(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=function yc(i){for(let e=i.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),g=h?h.module.componentFactoryResolver:null;l.attachRef=null,l.route=o,l.resolver=g,l.outlet&&l.outlet.activateWith(o,g),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,s)}}class IM{constructor(e,t){this.routes=e,this.module=t}}function jp(i){return"function"==typeof i}function cf(i){return i instanceof jd}const Ww=Symbol("INITIAL_VALUE");function mv(){return lr(i=>ZA(i.map(e=>e.pipe((0,Oi.q)(1),zn(Ww)))).pipe(zl((e,t)=>{let s=!1;return t.reduce((o,a,l)=>o!==Ww?o:(a===Ww&&(s=!0),s||!1!==a&&l!==t.length-1&&!cf(a)?o:a),e)},Ww),Dn(e=>e!==Ww),(0,Dt.U)(e=>cf(e)?e:!0===e),(0,Oi.q)(1)))}class ET{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new n0,this.attachRef=null}}class n0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const s=this.getOrCreateContext(e);s.outlet=t,this.contexts.set(e,s)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new ET,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let r0=(()=>{class i{constructor(t,s,o,a,l){this.parentContexts=t,this.location=s,this.resolver=o,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=a||mn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,s){this.activated=t,this._activatedRoute=s,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(s=s||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,g=new DT(t,h,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(n0),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},i.\u0275dir=u.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class DT{constructor(e,t,s){this.route=e,this.childContexts=t,this.parent=s}get(e,t){return e===pv?this.route:e===n0?this.childContexts:this.parent.get(e,t)}}let Wp=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=u.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,s){1&t&&u._UZ(0,"router-outlet")},directives:[r0],encapsulation:2}),i})();function qw(i,e=""){for(let t=0;t<i.length;t++){const s=i[t];AT(s,dk(e,s))}}function AT(i,e){i.children&&qw(i.children,e)}function dk(i,e){return e?i||e.path?i&&!e.path?`${i}/`:!i&&e.path?e.path:`${i}/${e.path}`:"":i}function Yw(i){const e=i.children&&i.children.map(Yw),t=e?Object.assign(Object.assign({},i),{children:e}):Object.assign({},i);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==mn&&(t.component=Wp),t}function ol(i){return i.outlet||mn}function TT(i,e){const t=i.filter(s=>ol(s)===e);return t.push(...i.filter(s=>ol(s)!==e)),t}const IT={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function RM(i,e,t){var s;if(""===e.path)return"full"===e.pathMatch&&(i.hasChildren()||t.length>0)?Object.assign({},IT):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||KP)(t,i,e);if(!a)return Object.assign({},IT);const l={};io(a.posParams,(g,_)=>{l[_]=g.path});const h=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:h,positionalParamSegments:null!==(s=a.posParams)&&void 0!==s?s:{}}}function PM(i,e,t,s,o="corrected"){if(t.length>0&&function fk(i,e,t){return t.some(s=>kM(i,e,s)&&ol(s)!==mn)}(i,t,s)){const l=new di(e,function hk(i,e,t,s){const o={};o[mn]=s,s._sourceSegment=i,s._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&ol(a)!==mn){const l=new di([],{});l._sourceSegment=i,l._segmentIndexShift=e.length,o[ol(a)]=l}return o}(i,e,s,new di(t,i.children)));return l._sourceSegment=i,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function pk(i,e,t){return t.some(s=>kM(i,e,s))}(i,t,s)){const l=new di(i.segments,function RT(i,e,t,s,o,a){const l={};for(const h of s)if(kM(i,t,h)&&!o[ol(h)]){const g=new di([],{});g._sourceSegment=i,g._segmentIndexShift="legacy"===a?i.segments.length:e.length,l[ol(h)]=g}return Object.assign(Object.assign({},o),l)}(i,e,t,s,i.children,o));return l._sourceSegment=i,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new di(i.segments,i.children);return a._sourceSegment=i,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function kM(i,e,t){return(!(i.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function gk(i,e,t,s){return!!(ol(i)===s||s!==mn&&kM(e,t,i))&&("**"===i.path||RM(e,i,t).matched)}function mk(i,e,t){return 0===e.length&&!i.children[t]}class $w{constructor(e){this.segmentGroup=e||null}}class vk{constructor(e){this.urlTree=e}}function Zw(i){return new Ri.y(e=>e.error(new $w(i)))}function s0(i){return new Ri.y(e=>e.error(new vk(i)))}function _k(i){return new Ri.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${i}'`)))}class qp{constructor(e,t,s,o,a){this.configLoader=t,this.urlSerializer=s,this.urlTree=o,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=PM(this.urlTree.root,[],[],this.config).segmentGroup,t=new di(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,mn).pipe((0,Dt.U)(a=>this.createUrlTree(o0(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ps(a=>{if(a instanceof vk)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof $w?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,mn).pipe((0,Dt.U)(o=>this.createUrlTree(o0(o),e.queryParams,e.fragment))).pipe(ps(o=>{throw o instanceof $w?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,s){const o=e.segments.length>0?new di([],{[mn]:e}):e;return new jd(o,t,s)}expandSegmentGroup(e,t,s,o){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(e,t,s).pipe((0,Dt.U)(a=>new di([],a))):this.expandSegment(e,s,t,s.segments,o,!0)}expandChildren(e,t,s){const o=[];for(const a of Object.keys(s.children))"primary"===a?o.unshift(a):o.push(a);return(0,Yi.D)(o).pipe(cv(a=>{const l=s.children[a],h=TT(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,Dt.U)(g=>({segment:g,outlet:a})))}),zl((a,l)=>(a[l.outlet]=l.segment,a),{}),function sM(i,e){const t=arguments.length>=2;return s=>s.pipe(i?Dn((o,a)=>i(o,a,s)):jl.y,$y(1),t?BA(e):Mw(()=>new Sw))}())}expandSegment(e,t,s,o,a,l){return(0,Yi.D)(s).pipe(cv(h=>this.expandSegmentAgainstRoute(e,t,s,h,o,a,l).pipe(ps(_=>{if(_ instanceof $w)return at(null);throw _}))),av(h=>!!h),ps((h,g)=>{if(h instanceof Sw||"EmptyError"===h.name){if(mk(t,o,a))return at(new di([],{}));throw new $w(t)}throw h}))}expandSegmentAgainstRoute(e,t,s,o,a,l,h){return gk(o,t,a,l)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,s,o,a,l):Zw(t):Zw(t)}expandSegmentAgainstRouteUsingRedirect(e,t,s,o,a,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,s,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,o,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,s,o){const a=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?s0(a):this.lineralizeSegments(s,a).pipe((0,It.z)(l=>{const h=new di(l,{});return this.expandSegment(e,h,t,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,o,a,l){const{matched:h,consumedSegments:g,lastChild:_,positionalParamSegments:b}=RM(t,o,a);if(!h)return Zw(t);const x=this.applyRedirectCommands(g,o.redirectTo,b);return o.redirectTo.startsWith("/")?s0(x):this.lineralizeSegments(o,x).pipe((0,It.z)(S=>this.expandSegment(e,t,s,S.concat(a.slice(_)),l,!1)))}matchSegmentAgainstRoute(e,t,s,o,a){if("**"===s.path)return s.loadChildren?(s._loadedConfig?at(s._loadedConfig):this.configLoader.load(e.injector,s)).pipe((0,Dt.U)(S=>(s._loadedConfig=S,new di(o,{})))):at(new di(o,{}));const{matched:l,consumedSegments:h,lastChild:g}=RM(t,s,o);if(!l)return Zw(t);const _=o.slice(g);return this.getChildConfig(e,s,o).pipe((0,It.z)(x=>{const S=x.module,M=x.routes,{segmentGroup:T,slicedSegments:I}=PM(t,h,_,M),L=new di(T.segments,T.children);if(0===I.length&&L.hasChildren())return this.expandChildren(S,M,L).pipe((0,Dt.U)(N=>new di(h,N)));if(0===M.length&&0===I.length)return at(new di(h,{}));const k=ol(s)===a;return this.expandSegment(S,L,M,I,k?mn:a,!0).pipe((0,Dt.U)(U=>new di(h.concat(U.segments),U.children)))}))}getChildConfig(e,t,s){return t.children?at(new IM(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?at(t._loadedConfig):this.runCanLoadGuards(e.injector,t,s).pipe((0,It.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Dt.U)(a=>(t._loadedConfig=a,a))):function yk(i){return new Ri.y(e=>e.error(aT(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`)))}(t))):at(new IM([],e))}runCanLoadGuards(e,t,s){const o=t.canLoad;if(!o||0===o.length)return at(!0);const a=o.map(l=>{const h=e.get(l);let g;if(function lk(i){return i&&jp(i.canLoad)}(h))g=h.canLoad(t,s);else{if(!jp(h))throw new Error("Invalid CanLoad guard");g=h(t,s)}return _c(g)});return at(a).pipe(mv(),(0,gs.b)(l=>{if(!cf(l))return;const h=aT(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw h.url=l,h}),(0,Dt.U)(l=>!0===l))}lineralizeSegments(e,t){let s=[],o=t.root;for(;;){if(s=s.concat(o.segments),0===o.numberOfChildren)return at(s);if(o.numberOfChildren>1||!o.children[mn])return _k(e.redirectTo);o=o.children[mn]}}applyRedirectCommands(e,t,s){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,s)}applyRedirectCreatreUrlTree(e,t,s,o){const a=this.createSegmentGroup(e,t.root,s,o);return new jd(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const s={};return io(e,(o,a)=>{if("string"==typeof o&&o.startsWith(":")){const h=o.substring(1);s[a]=t[h]}else s[a]=o}),s}createSegmentGroup(e,t,s,o){const a=this.createSegments(e,t.segments,s,o);let l={};return io(t.children,(h,g)=>{l[g]=this.createSegmentGroup(e,h,s,o)}),new di(a,l)}createSegments(e,t,s,o){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,o):this.findOrReturn(a,s))}findPosParam(e,t,s){const o=s[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let s=0;for(const o of t){if(o.path===e.path)return t.splice(s),o;s++}return e}}function o0(i){const e={};for(const s of Object.keys(i.children)){const a=o0(i.children[s]);(a.segments.length>0||a.hasChildren())&&(e[s]=a)}return function kT(i){if(1===i.numberOfChildren&&i.children[mn]){const e=i.children[mn];return new di(i.segments.concat(e.segments),e.children)}return i}(new di(i.segments,e))}class OT{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class vv{constructor(e,t){this.component=e,this.route=t}}function FM(i,e,t){const s=i._root;return Kw(s,e?e._root:null,t,[s.value])}function a0(i,e,t){const s=function $N(i){if(!i)return null;for(let e=i.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(s?s.module.injector:t).get(i)}function Kw(i,e,t,s,o={canDeactivateChecks:[],canActivateChecks:[]}){const a=lf(e);return i.children.forEach(l=>{(function ZN(i,e,t,s,o={canDeactivateChecks:[],canActivateChecks:[]}){const a=i.value,l=e?e.value:null,h=t?t.getContext(i.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const g=function KN(i,e,t){if("function"==typeof t)return t(i,e);switch(t){case"pathParamsChange":return!sf(i.url,e.url);case"pathParamsOrQueryParamsChange":return!sf(i.url,e.url)||!Lu(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vw(i,e)||!Lu(i.queryParams,e.queryParams);default:return!Vw(i,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);g?o.canActivateChecks.push(new OT(s)):(a.data=l.data,a._resolvedData=l._resolvedData),Kw(i,e,a.component?h?h.children:null:t,s,o),g&&h&&h.outlet&&h.outlet.isActivated&&o.canDeactivateChecks.push(new vv(h.outlet.component,l))}else l&&Jw(e,h,o),o.canActivateChecks.push(new OT(s)),Kw(i,null,a.component?h?h.children:null:t,s,o)})(l,a[l.value.outlet],t,s.concat([l.value]),o),delete a[l.value.outlet]}),io(a,(l,h)=>Jw(l,t.getContext(h),o)),o}function Jw(i,e,t){const s=lf(i),o=i.value;io(s,(a,l)=>{Jw(a,o.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new vv(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class BT{}function LM(i){return new Ri.y(e=>e.error(i))}class Mk{constructor(e,t,s,o,a,l){this.rootComponentType=e,this.config=t,this.urlTree=s,this.url=o,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=PM(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,mn);if(null===t)return null;const s=new e0([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},mn,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new af(s,t),a=new wM(this.url,o);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,s=Bw(t,this.paramsInheritanceStrategy);t.params=Object.freeze(s.params),t.data=Object.freeze(s.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,s){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,s)}processChildren(e,t){const s=[];for(const a of Object.keys(t.children)){const l=t.children[a],h=TT(e,a),g=this.processSegmentGroup(h,l,a);if(null===g)return null;s.push(...g)}const o=NM(s);return function VT(i){i.sort((e,t)=>e.value.outlet===mn?-1:t.value.outlet===mn?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,s,o){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,s,o);if(null!==l)return l}return mk(t,s,o)?[]:null}processSegmentAgainstRoute(e,t,s,o){if(e.redirectTo||!gk(e,t,s,o))return null;let a,l=[],h=[];if("**"===e.path){const M=s.length>0?cT(s).parameters:{};a=new e0(s,M,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,HT(e),ol(e),e.component,e,UT(t),GT(t)+s.length,zT(e))}else{const M=RM(t,e,s);if(!M.matched)return null;l=M.consumedSegments,h=s.slice(M.lastChild),a=new e0(l,M.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,HT(e),ol(e),e.component,e,UT(t),GT(t)+l.length,zT(e))}const g=function Qw(i){return i.children?i.children:i.loadChildren?i._loadedConfig.routes:[]}(e),{segmentGroup:_,slicedSegments:b}=PM(t,l,h,g.filter(M=>void 0===M.redirectTo),this.relativeLinkResolution);if(0===b.length&&_.hasChildren()){const M=this.processChildren(g,_);return null===M?null:[new af(a,M)]}if(0===g.length&&0===b.length)return[new af(a,[])];const x=ol(e)===o,S=this.processSegment(g,_,b,x?mn:o);return null===S?null:[new af(a,S)]}}function XN(i){const e=i.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function NM(i){const e=[],t=new Set;for(const s of i){if(!XN(s)){e.push(s);continue}const o=e.find(a=>s.value.routeConfig===a.value.routeConfig);void 0!==o?(o.children.push(...s.children),t.add(o)):e.push(s)}for(const s of t){const o=NM(s.children);e.push(new af(s.value,o))}return e.filter(s=>!t.has(s))}function UT(i){let e=i;for(;e._sourceSegment;)e=e._sourceSegment;return e}function GT(i){let e=i,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function HT(i){return i.data||{}}function zT(i){return i.resolve||{}}function jT(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function VM(i){return lr(e=>{const t=i(e);return t?(0,Yi.D)(t).pipe((0,Dt.U)(()=>e)):at(e)})}class t2 extends class Rk{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const WT=new u.OlP("ROUTES");class Pk{constructor(e,t,s,o){this.injector=e,this.compiler=t,this.onLoadStartListener=s,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Dt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new IM(lT(l.injector.get(WT,void 0,u.XFs.Self|u.XFs.Optional)).map(Yw),l)}),ps(a=>{throw t._loader$=void 0,a}));return t._loader$=new KA(o,()=>new yt.x).pipe(rM()),t._loader$}loadModuleFactory(e){return _c(e()).pipe((0,It.z)(t=>t instanceof u.YKP?at(t):(0,Yi.D)(this.compiler.compileModuleAsync(t))))}}class r2{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function kk(i){throw i}function s2(i,e,t){return e.parse("/")}function Ok(i,e){return at(null)}const o2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},a2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let d=(()=>{class i{constructor(t,s,o,a,l,h,g){this.rootComponentType=t,this.urlSerializer=s,this.rootContexts=o,this.location=a,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new yt.x,this.errorHandler=kk,this.malformedUriErrorHandler=s2,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ok,afterPreactivation:Ok},this.urlHandlingStrategy=new r2,this.routeReuseStrategy=new t2,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(u.h0i),this.console=l.get(u.c2e);const x=l.get(u.R0b);this.isNgZoneEnabled=x instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function kw(){return new jd(new di([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Pk(l,h,S=>this.triggerEvent(new lM(S)),S=>this.triggerEvent(new nT(S))),this.routerState=bM(this.currentUrlTree,this.rootComponentType),this.transitions=new Ki({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const s=this.events;return t.pipe(Dn(o=>0!==o.id),(0,Dt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),lr(o=>{let a=!1,l=!1;return at(o).pipe((0,gs.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),lr(h=>{const g=this.browserUrlTree.toString(),_=!this.navigated||h.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return p(h.source)&&(this.browserUrlTree=h.extractedUrl),at(h).pipe(lr(x=>{const S=this.transitions.getValue();return s.next(new oM(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),S!==this.transitions.getValue()?Ou.E:Promise.resolve(x)}),function OM(i,e,t,s){return lr(o=>function PT(i,e,t,s,o){return new qp(i,e,t,s,o).apply()}(i,e,t,o.extractedUrl,s).pipe((0,Dt.U)(a=>Object.assign(Object.assign({},o),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,gs.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function e2(i,e,t,s,o){return(0,It.z)(a=>function Sk(i,e,t,s,o="emptyOnly",a="legacy"){try{const l=new Mk(i,e,t,s,o,a).recognize();return null===l?LM(new BT):at(l)}catch(l){return LM(l)}}(i,e,a.urlAfterRedirects,t(a.urlAfterRedirects),s,o).pipe((0,Dt.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,gs.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const M=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(M,x)}this.browserUrlTree=x.urlAfterRedirects}const S=new QA(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);s.next(S)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:S,extractedUrl:M,source:T,restoredState:I,extras:L}=h,k=new oM(S,this.serializeUrl(M),T,I);s.next(k);const R=bM(M,this.rootComponentType).snapshot;return at(Object.assign(Object.assign({},h),{targetSnapshot:R,urlAfterRedirects:M,extras:Object.assign(Object.assign({},L),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),Ou.E}),VM(h=>{const{targetSnapshot:g,id:_,extractedUrl:b,rawUrl:x,extras:{skipLocationChange:S,replaceUrl:M}}=h;return this.hooks.beforePreactivation(g,{navigationId:_,appliedUrlTree:b,rawUrlTree:x,skipLocationChange:!!S,replaceUrl:!!M})}),(0,gs.b)(h=>{const g=new aM(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(g)}),(0,Dt.U)(h=>Object.assign(Object.assign({},h),{guards:FM(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function JN(i,e){return(0,It.z)(t=>{const{targetSnapshot:s,currentSnapshot:o,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?at(Object.assign(Object.assign({},t),{guardsResult:!0})):function QN(i,e,t,s){return(0,Yi.D)(i).pipe((0,It.z)(o=>function NT(i,e,t,s,o){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?at(a.map(h=>{const g=a0(h,e,o);let _;if(function uk(i){return i&&jp(i.canDeactivate)}(g))_=_c(g.canDeactivate(i,e,t,s));else{if(!jp(g))throw new Error("Invalid CanDeactivate guard");_=_c(g(i,e,t,s))}return _.pipe(av())})).pipe(mv()):at(!0)}(o.component,o.route,t,e,s)),av(o=>!0!==o,!0))}(l,s,o,i).pipe((0,It.z)(h=>h&&function ak(i){return"boolean"==typeof i}(h)?function LT(i,e,t,s){return(0,Yi.D)(e).pipe(cv(o=>Ko(function wk(i,e){return null!==i&&e&&e(new iT(i)),at(!0)}(o.route.parent,s),function bk(i,e){return null!==i&&e&&e(new ZP(i)),at(!0)}(o.route,s),function Ck(i,e,t){const s=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function FT(i){const e=i.routeConfig?i.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:i,guards:e}:null}(l)).filter(l=>null!==l).map(l=>rf(()=>at(l.guards.map(g=>{const _=a0(g,l.node,t);let b;if(function MT(i){return i&&jp(i.canActivateChild)}(_))b=_c(_.canActivateChild(s,i));else{if(!jp(_))throw new Error("Invalid CanActivateChild guard");b=_c(_(s,i))}return b.pipe(av())})).pipe(mv())));return at(a).pipe(mv())}(i,o.path,t),function xk(i,e,t){const s=e.routeConfig?e.routeConfig.canActivate:null;if(!s||0===s.length)return at(!0);const o=s.map(a=>rf(()=>{const l=a0(a,e,t);let h;if(function ck(i){return i&&jp(i.canActivate)}(l))h=_c(l.canActivate(e,i));else{if(!jp(l))throw new Error("Invalid CanActivate guard");h=_c(l(e,i))}return h.pipe(av())}));return at(o).pipe(mv())}(i,o.route,t))),av(o=>!0!==o,!0))}(s,a,i,e):at(h)),(0,Dt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,gs.b)(h=>{if(cf(h.guardsResult)){const _=aT(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw _.url=h.guardsResult,_}const g=new XA(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(g)}),Dn(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),VM(h=>{if(h.guards.canActivateChecks.length)return at(h).pipe((0,gs.b)(g=>{const _=new eT(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(_)}),lr(g=>{let _=!1;return at(g).pipe(function Ek(i,e){return(0,It.z)(t=>{const{targetSnapshot:s,guards:{canActivateChecks:o}}=t;if(!o.length)return at(t);let a=0;return(0,Yi.D)(o).pipe(cv(l=>function Dk(i,e,t,s){return function Ak(i,e,t,s){const o=jT(i);if(0===o.length)return at({});const a={};return(0,Yi.D)(o).pipe((0,It.z)(l=>function Tk(i,e,t,s){const o=a0(i,e,s);return _c(o.resolve?o.resolve(e,t):o(e,t))}(i[l],e,t,s).pipe((0,gs.b)(h=>{a[l]=h}))),$y(1),(0,It.z)(()=>jT(a).length===o.length?at(a):Ou.E))}(i._resolve,i,e,s).pipe((0,Dt.U)(a=>(i._resolvedData=a,i.data=Object.assign(Object.assign({},i.data),Bw(i,t).resolve),null)))}(l.route,s,i,e)),(0,gs.b)(()=>a++),$y(1),(0,It.z)(l=>a===o.length?at(t):Ou.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,gs.b)({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),(0,gs.b)(g=>{const _=new tT(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(_)}))}),VM(h=>{const{targetSnapshot:g,id:_,extractedUrl:b,rawUrl:x,extras:{skipLocationChange:S,replaceUrl:M}}=h;return this.hooks.afterPreactivation(g,{navigationId:_,appliedUrlTree:b,rawUrlTree:x,skipLocationChange:!!S,replaceUrl:!!M})}),(0,Dt.U)(h=>{const g=function qN(i,e,t){const s=Uw(i,e._root,t?t._root:void 0);return new zp(s,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:g})}),(0,gs.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((i,e,t)=>(0,Dt.U)(s=>(new TM(e,s.targetRouterState,s.currentRouterState,t).activate(i),s)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,gs.b)({next(){a=!0},complete(){a=!0}}),Pw(()=>{var h;a||l||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===o.id&&(this.currentNavigation=null)}),ps(h=>{if(l=!0,function Ky(i){return i&&i[oT]}(h)){const g=cf(h.url);g||(this.navigated=!0,this.restoreHistory(o,!0));const _=new JA(o.id,this.serializeUrl(o.extractedUrl),h.message);s.next(_),g?setTimeout(()=>{const b=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),x={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||p(o.source)};this.scheduleNavigation(b,"imperative",null,x,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const g=new $P(o.id,this.serializeUrl(o.extractedUrl),h);s.next(g);try{o.resolve(this.errorHandler(h))}catch(_){o.reject(_)}}return Ou.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const s="popstate"===t.type?"popstate":"hashchange";"popstate"===s&&setTimeout(()=>{var o;const a={replaceUrl:!0},l=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(l){const g=Object.assign({},l);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(a.state=g)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,s,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){qw(t),this.config=t.map(Yw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,s={}){const{relativeTo:o,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:g}=s,_=o||this.routerState.root,b=g?this.currentUrlTree.fragment:l;let x=null;switch(h){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=a||null}return null!==x&&(x=this.removeEmptyProps(x)),function CM(i,e,t,s,o){if(0===t.length)return SM(e.root,e.root,e,s,o);const a=function sl(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new wT(!0,0,i);let e=0,t=!1;const s=i.reduce((o,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return io(a.outlets,(g,_)=>{h[_]="string"==typeof g?g.split("/"):g}),[...o,{outlets:h}]}if(a.segmentPath)return[...o,a.segmentPath]}return"string"!=typeof a?[...o,a]:0===l?(a.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?t=!0:".."===h?e++:""!=h&&o.push(h))}),o):[...o,a]},[]);return new wT(t,e,s)}(t);if(a.toRoot())return SM(e.root,new di([],{}),e,s,o);const l=function EM(i,e,t){if(i.isAbsolute)return new MM(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new MM(a,a===e.root,0)}const s=Gw(i.commands[0])?0:1;return function rk(i,e,t){let s=i,o=e,a=t;for(;a>o;){if(a-=o,s=s.parent,!s)throw new Error("Invalid number of '../'");o=s.segments.length}return new MM(s,!1,o-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+s,i.numberOfDoubleDots)}(a,e,i),h=l.processChildren?t0(l.segmentGroup,l.index,a.commands):jw(l.segmentGroup,l.index,a.commands);return SM(l.segmentGroup,h,e,s,o)}(_,this.currentUrlTree,t,x,null!=b?b:null)}navigateByUrl(t,s={skipLocationChange:!1}){const o=cf(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,s)}navigate(t,s={skipLocationChange:!1}){return function f(i){for(let e=0;e<i.length;e++){const t=i[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,s),s)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let s;try{s=this.urlSerializer.parse(t)}catch(o){s=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return s}isActive(t,s){let o;if(o=!0===s?Object.assign({},o2):!1===s?Object.assign({},a2):s,cf(t))return fM(this.currentUrlTree,t,o);const a=this.parseUrl(t);return fM(this.currentUrlTree,a,o)}removeEmptyProps(t){return Object.keys(t).reduce((s,o)=>{const a=t[o];return null!=a&&(s[o]=a),s},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Zy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,s,o,a,l){var h,g,_;if(this.disposed)return Promise.resolve(!1);const b=this.transitions.value,x=p(s)&&b&&!p(b.source),S=b.rawUrl.toString()===t.toString(),M=b.id===(null===(h=this.currentNavigation)||void 0===h?void 0:h.id);if(x&&S&&M)return Promise.resolve(!0);let I,L,k;l?(I=l.resolve,L=l.reject,k=l.promise):k=new Promise((N,j)=>{I=N,L=j});const R=++this.navigationId;let U;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),U=o&&o.\u0275routerPageId?o.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):U=0,this.setTransition({id:R,targetPageId:U,source:s,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:I,reject:L,promise:k,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),k.catch(N=>Promise.reject(N))}setBrowserUrl(t,s){const o=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(o)||s.extras.replaceUrl?this.location.replaceState(o,"",a):this.location.go(o,"",a)}restoreHistory(t,s=!1){var o,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,s){const o=new JA(t.id,this.serializeUrl(t.extractedUrl),s);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,s){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:s}:{navigationId:t}}}return i.\u0275fac=function(t){u.$Z()},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();function p(i){return"imperative"!==i}let v=(()=>{class i{constructor(t,s,o,a,l){this.router=t,this.route=s,this.tabIndexAttribute=o,this.renderer=a,this.el=l,this.commands=null,this.onChanges=new yt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const s=this.renderer,o=this.el.nativeElement;null!==t?s.setAttribute(o,"tabindex",t):s.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:C(this.skipLocationChange),replaceUrl:C(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:C(this.preserveFragment)})}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(d),u.Y36(pv),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},i.\u0275dir=u.lG2({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,s){1&t&&u.NdJ("click",function(){return s.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),i})(),y=(()=>{class i{constructor(t,s,o){this.router=t,this.route=s,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new yt.x,this.subscription=t.events.subscribe(a=>{a instanceof Zy&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,s,o,a,l){if(0!==t||s||o||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:C(this.skipLocationChange),replaceUrl:C(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:C(this.preserveFragment)})}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(d),u.Y36(pv),u.Y36(qe))},i.\u0275dir=u.lG2({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,s){1&t&&u.NdJ("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&u.uIk("target",s.target)("href",s.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),i})();function C(i){return""===i||!!i}let D=(()=>{class i{constructor(t,s,o,a,l,h){this.router=t,this.element=s,this.renderer=o,this.cdr=a,this.link=l,this.linkWithHref=h,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new u.vpe,this.routerEventsSubscription=t.events.subscribe(g=>{g instanceof Zy&&this.update()})}ngAfterContentInit(){at(this.links.changes,this.linksWithHrefs.changes,at(null)).pipe((0,ml.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const s=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(o=>!!o).map(o=>o.onChanges);this.linkInputChangesSubscription=(0,Yi.D)(s).pipe((0,ml.J)()).subscribe(o=>{this.isActive!==this.isLinkActive(this.router)(o)&&this.update()})}set routerLinkActive(t){const s=Array.isArray(t)?t:t.split(" ");this.classes=s.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(s=>{t?this.renderer.addClass(this.element.nativeElement,s):this.renderer.removeClass(this.element.nativeElement,s)}),this.isActiveChange.emit(t))})}isLinkActive(t){const s=function P(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&t.isActive(o.urlTree,s)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(d),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(v,8),u.Y36(y,8))},i.\u0275dir=u.lG2({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(t,s,o){if(1&t&&(u.Suo(o,v,5),u.Suo(o,y,5)),2&t){let a;u.iGM(a=u.CRH())&&(s.links=a),u.iGM(a=u.CRH())&&(s.linksWithHrefs=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[u.TTD]}),i})();class F{}class G{preload(e,t){return at(null)}}let Z=(()=>{class i{constructor(t,s,o,a){this.router=t,this.injector=o,this.preloadingStrategy=a,this.loader=new Pk(o,s,g=>t.triggerEvent(new lM(g)),g=>t.triggerEvent(new nT(g)))}setUpPreloading(){this.subscription=this.router.events.pipe(Dn(t=>t instanceof Zy),cv(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,s){const o=[];for(const a of s)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;o.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?o.push(this.preloadConfig(t,a)):a.children&&o.push(this.processRoutes(t,a.children));return(0,Yi.D)(o).pipe((0,ml.J)(),(0,Dt.U)(a=>{}))}preloadConfig(t,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?at(s._loadedConfig):this.loader.load(t.injector,s)).pipe((0,It.z)(a=>(s._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(d),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(F))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),se=(()=>{class i{constructor(t,s,o={}){this.router=t,this.viewportScroller=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof oM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zy&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof sT&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,s){this.router.triggerEvent(new sT(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(t){u.$Z()},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const Oe=new u.OlP("ROUTER_CONFIGURATION"),ft=new u.OlP("ROUTER_FORROOT_GUARD"),wt=[xt,{provide:fT,useClass:mM},{provide:d,useFactory:function Yp(i,e,t,s,o,a,l={},h,g){const _=new d(null,i,e,t,s,o,lT(a));return h&&(_.urlHandlingStrategy=h),g&&(_.routeReuseStrategy=g),function UM(i,e){i.errorHandler&&(e.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(e.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(e.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(e.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(e.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(e.canceledNavigationResolution=i.canceledNavigationResolution)}(l,_),l.enableTracing&&_.events.subscribe(b=>{var x,S;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${b.constructor.name}`),console.log(b.toString()),console.log(b),null===(S=console.groupEnd)||void 0===S||S.call(console)}),_},deps:[fT,n0,xt,u.zs3,u.Sil,WT,Oe,[class n2{},new u.FiY],[class Ik{},new u.FiY]]},n0,{provide:pv,useFactory:function GM(i){return i.routerState.root},deps:[d]},Z,G,class B{preload(e,t){return t().pipe(ps(()=>at(null)))}},{provide:Oe,useValue:{enableTracing:!1}}];function qt(){return new u.PXZ("Router",d)}let Ye=(()=>{class i{constructor(t,s){}static forRoot(t,s){return{ngModule:i,providers:[wt,Ba(t),{provide:ft,useFactory:Fi,deps:[[d,new u.FiY,new u.tp0]]},{provide:Oe,useValue:s||{}},{provide:qe,useFactory:si,deps:[We,[new u.tBr(Ot),new u.FiY],Oe]},{provide:se,useFactory:ln,deps:[d,q0,Oe]},{provide:F,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:G},{provide:u.PXZ,multi:!0,useFactory:qt},[l0,{provide:u.ip1,multi:!0,useFactory:HM,deps:[l0]},{provide:Xw,useFactory:zM,deps:[l0]},{provide:u.tb,multi:!0,useExisting:Xw}]]}}static forChild(t){return{ngModule:i,providers:[Ba(t)]}}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(ft,8),u.LFG(d,8))},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})();function ln(i,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new se(i,e,t)}function si(i,e,t={}){return t.useHash?new Lt(i,e):new un(i,e)}function Fi(i){return"guarded"}function Ba(i){return[{provide:u.deG,multi:!0,useValue:i},{provide:WT,multi:!0,useValue:i}]}let l0=(()=>{class i{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new yt.x}appInitializer(){return this.injector.get(Y,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const o=new Promise(h=>s=h),a=this.injector.get(d),l=this.injector.get(Oe);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),s(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?at(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),a.initialNavigation()):s(!0),o})}bootstrapListener(t){const s=this.injector.get(Oe),o=this.injector.get(Z),a=this.injector.get(se),l=this.injector.get(d),h=this.injector.get(u.z2F);t===h.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&l.initialNavigation(),o.setUpPreloading(),a.init(),l.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(u.zs3))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();function HM(i){return i.appInitializer.bind(i)}function zM(i){return i.bootstrapListener.bind(i)}const Xw=new u.OlP("Router Initializer"),l2=new u.OlP("angularfire2.analytics.analyticsCollectionEnabled"),c2=new u.OlP("angularfire2.analytics.appVersion"),u2=new u.OlP("angularfire2.analytics.appName"),d2=new u.OlP("angularfire2.analytics.debugMode"),h2=new u.OlP("angularfire2.analytics.config"),YT="dataLayer";let qM=(()=>{class i{constructor(t,s,o,a,l,h,g,_){if(this.analyticsInitialized=new Promise(()=>{}),sr(g)){window[YT]=window[YT]||[];const x=(...T)=>"config"===T[0]&&"firebase"===T[2].origin&&(this.measurementId=T[1],!0),S=T=>{window.gtag=(...I)=>{T&&T(...I),"event"===I[0]&&I[2].send_to===this.measurementId&&(a&&(I[2].app_name=a),o&&(I[2].app_version=o)),l&&"undefined"!=typeof console&&console.info(...I),function(...L){window[YT].push(arguments)}(...I)}};window[YT].some(x)?(this.analyticsInitialized=Promise.resolve(),S()):this.analyticsInitialized=new Promise(T=>{S((...I)=>{x(...I)&&T()})}),h&&this.updateConfig(h),l&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const b=at(void 0).pipe((0,Ca.Q)(new ii.HU(_).outsideAngular),lr(()=>sr(g)?_.runOutsideAngular(()=>Q.e(225).then(Q.bind(Q,8225))):Ou.E),(0,Dt.U)(()=>(0,ii.sI)("analytics","AngularFireAnalytics",t,()=>{const x=t.analytics();return!1===s&&x.setAnalyticsCollectionEnabled(!1),x},[t,s,h,l])),ov({bufferSize:1,refCount:!1}));return(0,ii.pX)(this,b,_)}updateConfig(t){return(0,q.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(ii.Ot),u.LFG(l2,8),u.LFG(c2,8),u.LFG(u2,8),u.LFG(d2,8),u.LFG(h2,8),u.LFG(u.Lbi),u.LFG(u.R0b))},i.\u0275prov=u.Yz7({factory:function(){return new i(u.LFG(ii.Ot),u.LFG(l2,8),u.LFG(c2,8),u.LFG(u2,8),u.LFG(d2,8),u.LFG(h2,8),u.LFG(u.Lbi),u.LFG(u.R0b))},token:i,providedIn:"any"}),i})(),p2=(()=>{class i{constructor(t,s,o,a){if(this.disposables=[],Gs(s))this.initialized=Promise.resolve();else{let l;this.initialized=a.runOutsideAngular(()=>new Promise(h=>l=h)),this.disposables=[o.authState.subscribe(h=>{t.setUserId(null==h?void 0:h.uid),l()}),o.credential.subscribe(h=>{if(h){const g=h.user.isAnonymous?"anonymous":h.additionalUserInfo.providerId;h.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:g}),t.logEvent("login",{method:g})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(qM),u.LFG(u.Lbi),u.LFG(Ew),u.LFG(u.R0b))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const g2="firebase_screen_id",Fk="outlet",YM="screen_class",m2="screen_name";let p6=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const Lk={},g6=i=>{const e=[i[YM],i[Fk]].join("#");if(Lk.hasOwnProperty(e))return Lk[e];{const t=p6++;return Lk[e]=t,t}};let m6=(()=>{class i{constructor(t,s,o,a,l,h,g){if(!s||!sr(l))return this;h.runOutsideAngular(()=>{const _=s.events.pipe(Dn(b=>b instanceof cM));this.disposable=_.pipe(lr(b=>{var x;const M=(null===(x=s.parseUrl(s.url.replace(/(?:\().+(?:\))/g,U=>U.replace("://",":///"))).root.children[b.snapshot.outlet])||void 0===x?void 0:x.toString())||"",T=s.routerState.root.children.map(U=>U).find(U=>U.outlet===b.snapshot.outlet);if(!T)return at(null);let I=T;for(;I.firstChild;)I=I.firstChild;const L=I.pathFromRoot.map(U=>{var N;return null===(N=U.routeConfig)||void 0===N?void 0:N.path}).filter(U=>U).join("/")||"/",k={[m2]:L,page_path:`/${M}`,firebase_event_origin:"auto",firebase_screen:L,[Fk]:b.snapshot.outlet};o&&(k.page_title=o.getTitle());let R=T.component;if(R){if(R===Wp){let U=b.snapshot;for(;U.firstChild;)U=U.firstChild;R=U.component}}else R=b.snapshot.component;if("string"==typeof R)return at(Object.assign(Object.assign({},k),{[YM]:R}));if(R){const U=a.resolveComponentFactory(R);return at(Object.assign(Object.assign({},k),{[YM]:U.selector}))}return at(null)}),Dn(b=>b),(0,Dt.U)(b=>Object.assign({firebase_screen_class:b[YM],[g2]:g6(b)},b)),function $A(i,e,t,s){return(0,Un.e)((o,a)=>{let l;e&&"function"!=typeof e?({duration:t,element:l,connector:s}=e):l=e;const h=new Map,g=S=>{h.forEach(S),S(a)},_=S=>g(M=>M.error(S)),b=new HP(a,S=>{try{const M=i(S);let T=h.get(M);if(!T){h.set(M,T=s?s():new yt.x);const I=function x(S,M){const T=new Ri.y(I=>{b.activeGroups++;const L=M.subscribe(I);return()=>{L.unsubscribe(),0==--b.activeGroups&&b.teardownAttempted&&b.unsubscribe()}});return T.key=S,T}(M,T);if(a.next(I),t){const L=new $i.Q(T,()=>{T.complete(),null==L||L.unsubscribe()},void 0,void 0,()=>h.delete(M));b.add((0,Hd.Xf)(t(I)).subscribe(L))}}T.next(l?l(S):S)}catch(M){_(M)}},()=>g(S=>S.complete()),_,()=>h.clear());o.subscribe(b)})}(b=>b[Fk]),(0,It.z)(b=>b.pipe(vl((x,S)=>JSON.stringify(x)===JSON.stringify(S)),zn(void 0),Hl(),(0,Dt.U)(([x,S])=>x?Object.assign({firebase_previous_class:x[YM],firebase_previous_screen:x[m2],firebase_previous_id:x[g2]},S):S),lr(x=>(0,q.mG)(this,void 0,void 0,function*(){return g&&(yield g.initialized),yield t.logEvent("screen_view",x)}))))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(qM),u.LFG(d,8),u.LFG(Tf,8),u.LFG(u._Vd),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(p2,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),v6=(()=>{class i{constructor(t,s,o){t.app.then(()=>{})}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(qM),u.LFG(m6,8),u.LFG(p2,8))},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[qM]}),i})();function $p(i){return!!i&&(i instanceof Ri.y||(0,Na.m)(i.lift)&&(0,Na.m)(i.subscribe))}function Nk(...i){const e=(0,Ya.jO)(i),{args:t,keys:s}=Wy(i),o=new Ri.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let g=l,_=l;for(let b=0;b<l;b++){let x=!1;(0,Hd.Xf)(t[b]).subscribe(new $i.Q(a,S=>{x||(x=!0,_--),h[b]=S},()=>g--,void 0,()=>{(!g||!x)&&(_||a.next(s?Yy(s,h):h),a.complete())}))}});return e?o.pipe(nM(e)):o}class $M{}let v2=(()=>{class i extends $M{getTranslation(t){return at({})}}return i.\u0275fac=function(){let e;return function(s){return(e||(e=u.n5z(i)))(s||i)}}(),i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class Bk{}let _2=(()=>{class i{handle(t){return t.key}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();function ZM(i,e){if(i===e)return!0;if(null===i||null===e)return!1;if(i!=i&&e!=e)return!0;let o,a,l,t=typeof i;if(t==typeof e&&"object"==t){if(!Array.isArray(i)){if(Array.isArray(e))return!1;for(a in l=Object.create(null),i){if(!ZM(i[a],e[a]))return!1;l[a]=!0}for(a in e)if(!(a in l)&&void 0!==e[a])return!1;return!0}if(!Array.isArray(e))return!1;if((o=i.length)==e.length){for(a=0;a<o;a++)if(!ZM(i[a],e[a]))return!1;return!0}}return!1}function bc(i){return null!=i}function Vk(i){return i&&"object"==typeof i&&!Array.isArray(i)}function y2(i,e){let t=Object.assign({},i);return Vk(i)&&Vk(e)&&Object.keys(e).forEach(s=>{Vk(e[s])?s in i?t[s]=y2(i[s],e[s]):Object.assign(t,{[s]:e[s]}):Object.assign(t,{[s]:e[s]})}),t}class $T{}let b2=(()=>{class i extends $T{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(t,s){let o;return o="string"==typeof t?this.interpolateString(t,s):"function"==typeof t?this.interpolateFunction(t,s):t,o}getValue(t,s){let o="string"==typeof s?s.split("."):[s];s="";do{s+=o.shift(),!bc(t)||!bc(t[s])||"object"!=typeof t[s]&&o.length?o.length?s+=".":t=void 0:(t=t[s],s="")}while(o.length);return t}interpolateFunction(t,s){return t(s)}interpolateString(t,s){return s?t.replace(this.templateMatcher,(o,a)=>{let l=this.getValue(s,a);return bc(l)?l:o}):t}}return i.\u0275fac=function(){let e;return function(s){return(e||(e=u.n5z(i)))(s||i)}}(),i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class ZT{}let w2=(()=>{class i extends ZT{compile(t,s){return t}compileTranslations(t,s){return t}}return i.\u0275fac=function(){let e;return function(s){return(e||(e=u.n5z(i)))(s||i)}}(),i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class x2{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new u.vpe,this.onLangChange=new u.vpe,this.onDefaultLangChange=new u.vpe}}const Uk=new u.OlP("USE_STORE"),Gk=new u.OlP("USE_DEFAULT_LANG"),Hk=new u.OlP("DEFAULT_LANGUAGE"),zk=new u.OlP("USE_EXTEND");let KM=(()=>{class i{constructor(t,s,o,a,l,h=!0,g=!1,_=!1,b){this.store=t,this.currentLoader=s,this.compiler=o,this.parser=a,this.missingTranslationHandler=l,this.useDefaultLang=h,this.isolate=g,this.extend=_,this.pending=!1,this._onTranslationChange=new u.vpe,this._onLangChange=new u.vpe,this._onDefaultLangChange=new u.vpe,this._langs=[],this._translations={},this._translationRequests={},b&&this.setDefaultLang(b)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(t){this.isolate?this._currentLang=t:this.store.currentLang=t}get langs(){return this.isolate?this._langs:this.store.langs}set langs(t){this.isolate?this._langs=t:this.store.langs=t}get translations(){return this.isolate?this._translations:this.store.translations}set translations(t){this.isolate?this._translations=t:this.store.translations=t}setDefaultLang(t){if(t===this.defaultLang)return;let s=this.retrieveTranslations(t);void 0!==s?(null==this.defaultLang&&(this.defaultLang=t),s.pipe((0,Oi.q)(1)).subscribe(o=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(t===this.currentLang)return at(this.translations[t]);let s=this.retrieveTranslations(t);return void 0!==s?(this.currentLang||(this.currentLang=t),s.pipe((0,Oi.q)(1)).subscribe(o=>{this.changeLang(t)}),s):(this.changeLang(t),at(this.translations[t]))}retrieveTranslations(t){let s;return(void 0===this.translations[t]||this.extend)&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),s=this._translationRequests[t]),s}getTranslation(t){this.pending=!0;const s=this.currentLoader.getTranslation(t).pipe(ov(1),(0,Oi.q)(1));return this.loadingTranslations=s.pipe((0,Dt.U)(o=>this.compiler.compileTranslations(o,t)),ov(1),(0,Oi.q)(1)),this.loadingTranslations.subscribe({next:o=>{this.translations[t]=this.extend&&this.translations[t]?Object.assign(Object.assign({},o),this.translations[t]):o,this.updateLangs(),this.pending=!1},error:o=>{this.pending=!1}}),s}setTranslation(t,s,o=!1){s=this.compiler.compileTranslations(s,t),this.translations[t]=(o||this.extend)&&this.translations[t]?y2(this.translations[t],s):s,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){t.forEach(s=>{-1===this.langs.indexOf(s)&&this.langs.push(s)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(t,s,o){let a;if(s instanceof Array){let l={},h=!1;for(let g of s)l[g]=this.getParsedResult(t,g,o),$p(l[g])&&(h=!0);return h?Nk(s.map(_=>$p(l[_])?l[_]:at(l[_]))).pipe((0,Dt.U)(_=>{let b={};return _.forEach((x,S)=>{b[s[S]]=x}),b})):l}if(t&&(a=this.parser.interpolate(this.parser.getValue(t,s),o)),void 0===a&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(a=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],s),o)),void 0===a){let l={key:s,translateService:this};void 0!==o&&(l.interpolateParams=o),a=this.missingTranslationHandler.handle(l)}return void 0!==a?a:s}get(t,s){if(!bc(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(cv(o=>$p(o=this.getParsedResult(o,t,s))?o:at(o)));{let o=this.getParsedResult(this.translations[this.currentLang],t,s);return $p(o)?o:at(o)}}getStreamOnTranslationChange(t,s){if(!bc(t)||!t.length)throw new Error('Parameter "key" required');return Ko(rf(()=>this.get(t,s)),this.onTranslationChange.pipe(lr(o=>{const a=this.getParsedResult(o.translations,t,s);return"function"==typeof a.subscribe?a:at(a)})))}stream(t,s){if(!bc(t)||!t.length)throw new Error('Parameter "key" required');return Ko(rf(()=>this.get(t,s)),this.onLangChange.pipe(lr(o=>{const a=this.getParsedResult(o.translations,t,s);return $p(a)?a:at(a)})))}instant(t,s){if(!bc(t)||!t.length)throw new Error('Parameter "key" required');let o=this.getParsedResult(this.translations[this.currentLang],t,s);if($p(o)){if(t instanceof Array){let a={};return t.forEach((l,h)=>{a[t[h]]=t[h]}),a}return t}return o}set(t,s,o=this.currentLang){this.translations[o][t]=this.compiler.compile(s,o),this.updateLangs(),this.onTranslationChange.emit({lang:o,translations:this.translations[o]})}changeLang(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),null==this.defaultLang&&this.changeDefaultLang(t)}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.getTranslation(t)}resetLang(t){this._translationRequests[t]=void 0,this.translations[t]=void 0}getBrowserLang(){if("undefined"==typeof window||void 0===window.navigator)return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,void 0!==t?(-1!==t.indexOf("-")&&(t=t.split("-")[0]),-1!==t.indexOf("_")&&(t=t.split("_")[0]),t):void 0}getBrowserCultureLang(){if("undefined"==typeof window||void 0===window.navigator)return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,t}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(x2),u.LFG($M),u.LFG(ZT),u.LFG($T),u.LFG(Bk),u.LFG(Gk),u.LFG(Uk),u.LFG(zk),u.LFG(Hk))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),c0=(()=>{class i{constructor(t,s){this.translate=t,this._ref=s,this.value=""}updateValue(t,s,o){let a=l=>{this.value=void 0!==l?l:t,this.lastKey=t,this._ref.markForCheck()};if(o){let l=this.translate.getParsedResult(o,t,s);$p(l.subscribe)?l.subscribe(a):a(l)}this.translate.get(t,s).subscribe(a)}transform(t,...s){if(!t||!t.length)return t;if(ZM(t,this.lastKey)&&ZM(s,this.lastParams))return this.value;let o;if(bc(s[0])&&s.length)if("string"==typeof s[0]&&s[0].length){let a=s[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{o=JSON.parse(a)}catch(l){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${s[0]}`)}}else"object"==typeof s[0]&&!Array.isArray(s[0])&&(o=s[0]);return this.lastKey=t,this.lastParams=s,this.updateValue(t,o),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(a=>{this.lastKey&&a.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(t,o,a.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(a=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,o,a.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,o))})),this.value}_dispose(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(KM,16),u.Y36(u.sBO,16))},i.\u0275pipe=u.Yjl({name:"translate",type:i,pure:!1}),i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),_6=(()=>{class i{static forRoot(t={}){return{ngModule:i,providers:[t.loader||{provide:$M,useClass:v2},t.compiler||{provide:ZT,useClass:w2},t.parser||{provide:$T,useClass:b2},t.missingTranslationHandler||{provide:Bk,useClass:_2},x2,{provide:Uk,useValue:t.isolate},{provide:Gk,useValue:t.useDefaultLang},{provide:zk,useValue:t.extend},{provide:Hk,useValue:t.defaultLanguage},KM]}}static forChild(t={}){return{ngModule:i,providers:[t.loader||{provide:$M,useClass:v2},t.compiler||{provide:ZT,useClass:w2},t.parser||{provide:$T,useClass:b2},t.missingTranslationHandler||{provide:Bk,useClass:_2},{provide:Uk,useValue:t.isolate},{provide:Gk,useValue:t.useDefaultLang},{provide:zk,useValue:t.extend},{provide:Hk,useValue:t.defaultLanguage},KM]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})();class C2{}class S2{}class ro{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const s=t.indexOf(":");if(s>0){const o=t.slice(0,s),a=o.toLowerCase(),l=t.slice(s+1).trim();this.maybeSetNormalizedName(o,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let s=e[t];const o=t.toLowerCase();"string"==typeof s&&(s=[s]),s.length>0&&(this.headers.set(o,s),this.maybeSetNormalizedName(t,o))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ro?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ro;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ro?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let s=e.value;if("string"==typeof s&&(s=[s]),0===s.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...s),this.headers.set(t,o);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===a.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class y6{encodeKey(e){return M2(e)}encodeValue(e){return M2(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const w6=/%(\d[a-f0-9])/gi,x6={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function M2(i){return encodeURIComponent(i).replace(w6,(e,t)=>{var s;return null!==(s=x6[t])&&void 0!==s?s:e})}function E2(i){return`${i}`}class _v{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new y6,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function b6(i,e){const t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(o=>{const a=o.indexOf("="),[l,h]=-1==a?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,a)),e.decodeValue(o.slice(a+1))],g=t.get(l)||[];g.push(h),t.set(l,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const s=e.fromObject[t];this.map.set(t,Array.isArray(s)?s:[s])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(s=>{const o=e[s];Array.isArray(o)?o.forEach(a=>{t.push({param:s,value:a,op:"a"})}):t.push({param:s,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(s=>t+"="+this.encoder.encodeValue(s)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new _v({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(E2(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let s=this.map.get(e.param)||[];const o=s.indexOf(E2(e.value));-1!==o&&s.splice(o,1),s.length>0?this.map.set(e.param,s):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class C6{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function D2(i){return"undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer}function A2(i){return"undefined"!=typeof Blob&&i instanceof Blob}function T2(i){return"undefined"!=typeof FormData&&i instanceof FormData}class JM{constructor(e,t,s,o){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function S6(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==s?s:null,a=o):a=s,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new ro),this.context||(this.context=new C6),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new _v,this.urlWithParams=t}serializeBody(){return null===this.body?null:D2(this.body)||A2(this.body)||T2(this.body)||function M6(i){return"undefined"!=typeof URLSearchParams&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof _v?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||T2(this.body)?null:A2(this.body)?this.body.type||null:D2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof _v?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const s=e.method||this.method,o=e.url||this.url,a=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,b=e.params||this.params;const x=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((S,M)=>S.set(M,e.setHeaders[M]),_)),e.setParams&&(b=Object.keys(e.setParams).reduce((S,M)=>S.set(M,e.setParams[M]),b)),new JM(s,o,l,{params:b,headers:_,context:x,reportProgress:g,responseType:a,withCredentials:h})}}var so=(()=>((so=so||{})[so.Sent=0]="Sent",so[so.UploadProgress=1]="UploadProgress",so[so.ResponseHeader=2]="ResponseHeader",so[so.DownloadProgress=3]="DownloadProgress",so[so.Response=4]="Response",so[so.User=5]="User",so))();class kl{constructor(e,t=200,s="OK"){this.headers=e.headers||new ro,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||s,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class jk extends kl{constructor(e={}){super(e),this.type=so.ResponseHeader}clone(e={}){return new jk({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class al extends kl{constructor(e={}){super(e),this.type=so.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new al({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class I2 extends kl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Wk(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let QM=(()=>{class i{constructor(t){this.handler=t}request(t,s,o={}){let a;if(t instanceof JM)a=t;else{let g,_;g=o.headers instanceof ro?o.headers:new ro(o.headers),o.params&&(_=o.params instanceof _v?o.params:new _v({fromObject:o.params})),a=new JM(t,s,void 0!==o.body?o.body:null,{headers:g,context:o.context,params:_,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const l=at(a).pipe(cv(g=>this.handler.handle(g)));if(t instanceof JM||"events"===o.observe)return l;const h=l.pipe(Dn(g=>g instanceof al));switch(o.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,Dt.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return h.pipe((0,Dt.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return h.pipe((0,Dt.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return h.pipe((0,Dt.U)(g=>g.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,s={}){return this.request("DELETE",t,s)}get(t,s={}){return this.request("GET",t,s)}head(t,s={}){return this.request("HEAD",t,s)}jsonp(t,s){return this.request("JSONP",t,{params:(new _v).append(s,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,s={}){return this.request("OPTIONS",t,s)}patch(t,s,o={}){return this.request("PATCH",t,Wk(o,s))}post(t,s,o={}){return this.request("POST",t,Wk(o,s))}put(t,s,o={}){return this.request("PUT",t,Wk(o,s))}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(C2))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class R2{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const P2=new u.OlP("HTTP_INTERCEPTORS");let E6=(()=>{class i{intercept(t,s){return s.handle(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const D6=/^\)\]\}',?\n/;let k2=(()=>{class i{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ri.y(s=>{const o=this.xhrFactory.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((M,T)=>o.setRequestHeader(M,T.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const M=t.detectContentTypeHeader();null!==M&&o.setRequestHeader("Content-Type",M)}if(t.responseType){const M=t.responseType.toLowerCase();o.responseType="json"!==M?M:"text"}const a=t.serializeBody();let l=null;const h=()=>{if(null!==l)return l;const M=1223===o.status?204:o.status,T=o.statusText||"OK",I=new ro(o.getAllResponseHeaders()),L=function A6(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(o)||t.url;return l=new jk({headers:I,status:M,statusText:T,url:L}),l},g=()=>{let{headers:M,status:T,statusText:I,url:L}=h(),k=null;204!==T&&(k=void 0===o.response?o.responseText:o.response),0===T&&(T=k?200:0);let R=T>=200&&T<300;if("json"===t.responseType&&"string"==typeof k){const U=k;k=k.replace(D6,"");try{k=""!==k?JSON.parse(k):null}catch(N){k=U,R&&(R=!1,k={error:N,text:k})}}R?(s.next(new al({body:k,headers:M,status:T,statusText:I,url:L||void 0})),s.complete()):s.error(new I2({error:k,headers:M,status:T,statusText:I,url:L||void 0}))},_=M=>{const{url:T}=h(),I=new I2({error:M,status:o.status||0,statusText:o.statusText||"Unknown Error",url:T||void 0});s.error(I)};let b=!1;const x=M=>{b||(s.next(h()),b=!0);let T={type:so.DownloadProgress,loaded:M.loaded};M.lengthComputable&&(T.total=M.total),"text"===t.responseType&&!!o.responseText&&(T.partialText=o.responseText),s.next(T)},S=M=>{let T={type:so.UploadProgress,loaded:M.loaded};M.lengthComputable&&(T.total=M.total),s.next(T)};return o.addEventListener("load",g),o.addEventListener("error",_),o.addEventListener("timeout",_),o.addEventListener("abort",_),t.reportProgress&&(o.addEventListener("progress",x),null!==a&&o.upload&&o.upload.addEventListener("progress",S)),o.send(a),s.next({type:so.Sent}),()=>{o.removeEventListener("error",_),o.removeEventListener("abort",_),o.removeEventListener("load",g),o.removeEventListener("timeout",_),t.reportProgress&&(o.removeEventListener("progress",x),null!==a&&o.upload&&o.upload.removeEventListener("progress",S)),o.readyState!==o.DONE&&o.abort()}})}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(Qn))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const qk=new u.OlP("XSRF_COOKIE_NAME"),Yk=new u.OlP("XSRF_HEADER_NAME");class O2{}let T6=(()=>{class i{constructor(t,s,o){this.doc=t,this.platform=s,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=nh(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_e),u.LFG(u.Lbi),u.LFG(qk))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),$k=(()=>{class i{constructor(t,s){this.tokenService=t,this.headerName=s}intercept(t,s){const o=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||o.startsWith("http://")||o.startsWith("https://"))return s.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),s.handle(t)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(O2),u.LFG(Yk))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),I6=(()=>{class i{constructor(t,s){this.backend=t,this.injector=s,this.chain=null}handle(t){if(null===this.chain){const s=this.injector.get(P2,[]);this.chain=s.reduceRight((o,a)=>new R2(o,a),this.backend)}return this.chain.handle(t)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(S2),u.LFG(u.zs3))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),R6=(()=>{class i{static disable(){return{ngModule:i,providers:[{provide:$k,useClass:E6}]}}static withOptions(t={}){return{ngModule:i,providers:[t.cookieName?{provide:qk,useValue:t.cookieName}:[],t.headerName?{provide:Yk,useValue:t.headerName}:[]]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[$k,{provide:P2,useExisting:$k,multi:!0},{provide:O2,useClass:T6},{provide:qk,useValue:"XSRF-TOKEN"},{provide:Yk,useValue:"X-XSRF-TOKEN"}]}),i})(),P6=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[QM,{provide:C2,useClass:I6},k2,{provide:S2,useExisting:k2}],imports:[[R6.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),i})();class k6{constructor(e,t="/assets/i18n/",s=".json"){this.http=e,this.prefix=t,this.suffix=s}getTranslation(e){return this.http.get(`${this.prefix}${e}${this.suffix}`)}}function xr(i,e){const t=(0,Na.m)(i)?i:()=>i,s=o=>o.error(t());return new Ri.y(e?o=>e.schedule(s,0,o):s)}const F2=new u.OlP("AUTHENTICATION_API_BASE_URL");let O6=(()=>{class i{constructor(t,s){this.jsonParseReviver=void 0,this.http=t,this.baseUrl=null!=s?s:""}test(){let t=this.baseUrl+"/Account/test";t=t.replace(/[?&]$/,"");let s={observe:"response",responseType:"blob",headers:new ro({Accept:"application/json"})};return this.http.request("get",t,s).pipe((0,It.z)(o=>this.processTest(o))).pipe(ps(o=>{if(!(o instanceof kl))return xr(o);try{return this.processTest(o)}catch(a){return xr(a)}}))}processTest(t){const s=t.status,o=t instanceof al?t.body:t.error instanceof Blob?t.error:void 0;let a={};if(t.headers)for(let l of t.headers.keys())a[l]=t.headers.get(l);return 200===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=void 0!==g?g:null,at(h)})):400===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Bad Request",s,l,a,h)})):500===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Server Error",s,l,a,h)})):200!==s&&204!==s?Gn(o).pipe((0,It.z)(l=>Mi("An unexpected server error occurred.",s,l,a))):at(null)}register(t){let s=this.baseUrl+"/Account/Register";s=s.replace(/[?&]$/,"");let a={body:JSON.stringify(t),observe:"response",responseType:"blob",headers:new ro({"Content-Type":"application/json-patch+json",Accept:"application/json"})};return this.http.request("post",s,a).pipe((0,It.z)(l=>this.processRegister(l))).pipe(ps(l=>{if(!(l instanceof kl))return xr(l);try{return this.processRegister(l)}catch(h){return xr(h)}}))}processRegister(t){const s=t.status,o=t instanceof al?t.body:t.error instanceof Blob?t.error:void 0;let a={};if(t.headers)for(let l of t.headers.keys())a[l]=t.headers.get(l);return 201===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=void 0!==g?g:null,at(h)})):400===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Bad Request",s,l,a,h)})):500===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Server Error",s,l,a,h)})):200!==s&&204!==s?Gn(o).pipe((0,It.z)(l=>Mi("An unexpected server error occurred.",s,l,a))):at(null)}login(t){let s=this.baseUrl+"/Account/Login";s=s.replace(/[?&]$/,"");let a={body:JSON.stringify(t),observe:"response",responseType:"blob",headers:new ro({"Content-Type":"application/json-patch+json",Accept:"application/json"})};return this.http.request("post",s,a).pipe((0,It.z)(l=>this.processLogin(l))).pipe(ps(l=>{if(!(l instanceof kl))return xr(l);try{return this.processLogin(l)}catch(h){return xr(h)}}))}processLogin(t){const s=t.status,o=t instanceof al?t.body:t.error instanceof Blob?t.error:void 0;let a={};if(t.headers)for(let l of t.headers.keys())a[l]=t.headers.get(l);return 200===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=void 0!==g?g:null,at(h)})):400===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Bad Request",s,l,a,h)})):500===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Server Error",s,l,a,h)})):200!==s&&204!==s?Gn(o).pipe((0,It.z)(l=>Mi("An unexpected server error occurred.",s,l,a))):at(null)}changePassword(t){let s=this.baseUrl+"/Account/change-password";s=s.replace(/[?&]$/,"");let a={body:JSON.stringify(t),observe:"response",responseType:"blob",headers:new ro({"Content-Type":"application/json-patch+json"})};return this.http.request("post",s,a).pipe((0,It.z)(l=>this.processChangePassword(l))).pipe(ps(l=>{if(!(l instanceof kl))return xr(l);try{return this.processChangePassword(l)}catch(h){return xr(h)}}))}processChangePassword(t){const s=t.status,o=t instanceof al?t.body:t.error instanceof Blob?t.error:void 0;let a={};if(t.headers)for(let l of t.headers.keys())a[l]=t.headers.get(l);return 200===s?Gn(o).pipe((0,It.z)(l=>at(null))):400===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Bad Request",s,l,a,h)})):500===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Server Error",s,l,a,h)})):200!==s&&204!==s?Gn(o).pipe((0,It.z)(l=>Mi("An unexpected server error occurred.",s,l,a))):at(null)}resetPassword(t){let s=this.baseUrl+"/Account/reset-password";s=s.replace(/[?&]$/,"");let a={body:JSON.stringify(t),observe:"response",responseType:"blob",headers:new ro({"Content-Type":"application/json-patch+json"})};return this.http.request("post",s,a).pipe((0,It.z)(l=>this.processResetPassword(l))).pipe(ps(l=>{if(!(l instanceof kl))return xr(l);try{return this.processResetPassword(l)}catch(h){return xr(h)}}))}processResetPassword(t){const s=t.status,o=t instanceof al?t.body:t.error instanceof Blob?t.error:void 0;let a={};if(t.headers)for(let l of t.headers.keys())a[l]=t.headers.get(l);return 200===s?Gn(o).pipe((0,It.z)(l=>at(null))):400===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Bad Request",s,l,a,h)})):500===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Server Error",s,l,a,h)})):200!==s&&204!==s?Gn(o).pipe((0,It.z)(l=>Mi("An unexpected server error occurred.",s,l,a))):at(null)}recoverPassword(t,s,o){let a=this.baseUrl+"/Account/recover-password";a=a.replace(/[?&]$/,"");const l=new FormData;null!=t&&l.append("Email",t.toString()),null!=s&&l.append("ResetToken",s.toString()),null!=o&&l.append("NewPassword",o.toString());let h={body:l,observe:"response",responseType:"blob",headers:new ro({})};return this.http.request("post",a,h).pipe((0,It.z)(g=>this.processRecoverPassword(g))).pipe(ps(g=>{if(!(g instanceof kl))return xr(g);try{return this.processRecoverPassword(g)}catch(_){return xr(_)}}))}processRecoverPassword(t){const s=t.status,o=t instanceof al?t.body:t.error instanceof Blob?t.error:void 0;let a={};if(t.headers)for(let l of t.headers.keys())a[l]=t.headers.get(l);return 200===s?Gn(o).pipe((0,It.z)(l=>at(null))):400===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Bad Request",s,l,a,h)})):500===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Server Error",s,l,a,h)})):200!==s&&204!==s?Gn(o).pipe((0,It.z)(l=>Mi("An unexpected server error occurred.",s,l,a))):at(null)}authenticationState(t){let s=this.baseUrl+"/Account/AuthenticationState";s=s.replace(/[?&]$/,"");let a={body:JSON.stringify(t),observe:"response",responseType:"blob",headers:new ro({"Content-Type":"application/json-patch+json"})};return this.http.request("post",s,a).pipe((0,It.z)(l=>this.processAuthenticationState(l))).pipe(ps(l=>{if(!(l instanceof kl))return xr(l);try{return this.processAuthenticationState(l)}catch(h){return xr(h)}}))}processAuthenticationState(t){const s=t.status,o=t instanceof al?t.body:t.error instanceof Blob?t.error:void 0;let a={};if(t.headers)for(let l of t.headers.keys())a[l]=t.headers.get(l);return 200===s?Gn(o).pipe((0,It.z)(l=>at(null))):400===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Bad Request",s,l,a,h)})):500===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Server Error",s,l,a,h)})):200!==s&&204!==s?Gn(o).pipe((0,It.z)(l=>Mi("An unexpected server error occurred.",s,l,a))):at(null)}register2(t){let s=this.baseUrl+"/api/Application/Register";s=s.replace(/[?&]$/,"");let a={body:JSON.stringify(t),observe:"response",responseType:"blob",headers:new ro({"Content-Type":"application/json-patch+json",Accept:"application/json"})};return this.http.request("post",s,a).pipe((0,It.z)(l=>this.processRegister2(l))).pipe(ps(l=>{if(!(l instanceof kl))return xr(l);try{return this.processRegister2(l)}catch(h){return xr(h)}}))}processRegister2(t){const s=t.status,o=t instanceof al?t.body:t.error instanceof Blob?t.error:void 0;let a={};if(t.headers)for(let l of t.headers.keys())a[l]=t.headers.get(l);return 201===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=void 0!==g?g:null,at(h)})):400===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Bad Request",s,l,a,h)})):500===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Server Error",s,l,a,h)})):200!==s&&204!==s?Gn(o).pipe((0,It.z)(l=>Mi("An unexpected server error occurred.",s,l,a))):at(null)}verifyEmail(t){let s=this.baseUrl+"/Email/VerifyEmail/{code}";if(null==t)throw new Error("The parameter 'code' must be defined.");s=s.replace("{code}",encodeURIComponent(""+t)),s=s.replace(/[?&]$/,"");let o={observe:"response",responseType:"blob",headers:new ro({Accept:"application/json"})};return this.http.request("get",s,o).pipe((0,It.z)(a=>this.processVerifyEmail(a))).pipe(ps(a=>{if(!(a instanceof kl))return xr(a);try{return this.processVerifyEmail(a)}catch(l){return xr(l)}}))}processVerifyEmail(t){const s=t.status,o=t instanceof al?t.body:t.error instanceof Blob?t.error:void 0;let a={};if(t.headers)for(let l of t.headers.keys())a[l]=t.headers.get(l);return 200===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=void 0!==g?g:null,at(h)})):400===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Bad Request",s,l,a,h)})):500===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Server Error",s,l,a,h)})):200!==s&&204!==s?Gn(o).pipe((0,It.z)(l=>Mi("An unexpected server error occurred.",s,l,a))):at(null)}deserialize(t){let s=this.baseUrl+"/TokenProcessor/deserialize";s=s.replace(/[?&]$/,"");let a={body:JSON.stringify(t),observe:"response",responseType:"blob",headers:new ro({"Content-Type":"application/json-patch+json",Accept:"application/json"})};return this.http.request("post",s,a).pipe((0,It.z)(l=>this.processDeserialize(l))).pipe(ps(l=>{if(!(l instanceof kl))return xr(l);try{return this.processDeserialize(l)}catch(h){return xr(h)}}))}processDeserialize(t){const s=t.status,o=t instanceof al?t.body:t.error instanceof Blob?t.error:void 0;let a={};if(t.headers)for(let l of t.headers.keys())a[l]=t.headers.get(l);return 200===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=void 0!==g?g:null,at(h)})):400===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Bad Request",s,l,a,h)})):500===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Server Error",s,l,a,h)})):200!==s&&204!==s?Gn(o).pipe((0,It.z)(l=>Mi("An unexpected server error occurred.",s,l,a))):at(null)}validate(t){let s=this.baseUrl+"/TokenProcessor/Validate";s=s.replace(/[?&]$/,"");let a={body:JSON.stringify(t),observe:"response",responseType:"blob",headers:new ro({"Content-Type":"application/json-patch+json",Accept:"application/json"})};return this.http.request("post",s,a).pipe((0,It.z)(l=>this.processValidate(l))).pipe(ps(l=>{if(!(l instanceof kl))return xr(l);try{return this.processValidate(l)}catch(h){return xr(h)}}))}processValidate(t){const s=t.status,o=t instanceof al?t.body:t.error instanceof Blob?t.error:void 0;let a={};if(t.headers)for(let l of t.headers.keys())a[l]=t.headers.get(l);return 200===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=void 0!==g?g:null,at(h)})):400===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Bad Request",s,l,a,h)})):500===s?Gn(o).pipe((0,It.z)(l=>{let h=null,g=""===l?null:JSON.parse(l,this.jsonParseReviver);return h=jr.fromJS(g),Mi("Server Error",s,l,a,h)})):200!==s&&204!==s?Gn(o).pipe((0,It.z)(l=>Mi("An unexpected server error occurred.",s,l,a))):at(null)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(QM),u.LFG(F2,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Zk{constructor(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}init(e){e&&(this.fieldName=e.fieldName,this.message=e.message)}static fromJS(e){e="object"==typeof e?e:{};let t=new Zk;return t.init(e),t}toJSON(e){return(e="object"==typeof e?e:{}).fieldName=this.fieldName,e.message=this.message,e}}class jr{constructor(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}init(e){if(e&&Array.isArray(e.errors)){this.errors=[];for(let t of e.errors)this.errors.push(Zk.fromJS(t))}}static fromJS(e){e="object"==typeof e?e:{};let t=new jr;return t.init(e),t}toJSON(e){if(e="object"==typeof e?e:{},Array.isArray(this.errors)){e.errors=[];for(let t of this.errors)e.errors.push(t.toJSON())}return e}}class Kk{constructor(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}init(e){if(e&&(this.firstname=e.firstname,this.middlename=e.middlename,this.lastname=e.lastname,this.email=e.email,this.password=e.password,Array.isArray(e.languages))){this.languages=[];for(let t of e.languages)this.languages.push(t)}}static fromJS(e){e="object"==typeof e?e:{};let t=new Kk;return t.init(e),t}toJSON(e){if((e="object"==typeof e?e:{}).firstname=this.firstname,e.middlename=this.middlename,e.lastname=this.lastname,e.email=this.email,e.password=this.password,Array.isArray(this.languages)){e.languages=[];for(let t of this.languages)e.languages.push(t)}return e}}class Jk{constructor(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}init(e){e&&(this.email=e.email,this.password=e.password)}static fromJS(e){e="object"==typeof e?e:{};let t=new Jk;return t.init(e),t}toJSON(e){return(e="object"==typeof e?e:{}).email=this.email,e.password=this.password,e}}class F6 extends Error{constructor(e,t,s,o,a){super(),this.isApiException=!0,this.message=e,this.status=t,this.response=s,this.headers=o,this.result=a}static isApiException(e){return!0===e.isApiException}}function Mi(i,e,t,s,o){return xr(null!=o?o:new F6(i,e,t,s,null))}function Gn(i){return new Ri.y(e=>{if(i){let t=new FileReader;t.onload=s=>{e.next(s.target.result),e.complete()},t.readAsText(i)}else e.next(""),e.complete()})}var B2=Q(9635);const L6=i=>!!i,Xk=(0,Dt.U)(L6);let ex=(()=>{class i{constructor(t,s){this.router=t,this.auth=s,this.canActivate=(o,a)=>{const l=o.data.authGuardPipe||(()=>Xk);return this.auth.user.pipe((0,Oi.q)(1),l(o,a),(0,Dt.U)(h=>"boolean"==typeof h?h:Array.isArray(h)?this.router.createUrlTree(h):this.router.parseUrl(h)))}}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(d),u.LFG(Ew))},i.\u0275prov=u.Yz7({factory:function(){return new i(u.LFG(d),u.LFG(Ew))},token:i,providedIn:"any"}),i})();class V2{}const Zp="*";function Ol(i,e){return{type:7,name:i,definitions:e,options:{}}}function ms(i,e=null){return{type:4,styles:e,timings:i}}function U2(i,e=null){return{type:2,steps:i,options:e}}function Bn(i){return{type:6,styles:i,offset:null}}function oo(i,e,t){return{type:0,name:i,styles:e,options:t}}function es(i,e,t=null){return{type:1,expr:i,animation:e,options:t}}function G2(i){Promise.resolve(null).then(i)}class XM{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){G2(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(s=>s()),t.length=0}}class H2{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,s=0,o=0;const a=this.players.length;0==a?G2(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==a&&this._onFinish()}),l.onDestroy(()=>{++s==a&&this._onDestroy()}),l.onStart(()=>{++o==a&&this._onStart()})}),this.totalTime=this.players.reduce((l,h)=>Math.max(l,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(s=>{const o=s.totalTime?Math.min(1,t/s.totalTime):1;s.setPosition(o)})}getPosition(){const e=this.players.reduce((t,s)=>null===t||s.totalTime>t.totalTime?s:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(s=>s()),t.length=0}}const z6=Ol("revealAnimation",[es(":enter",[Bn({overflow:"hidden"}),Bn({height:0}),ms("700ms",Bn({height:"100%"}))]),es(":leave",[Bn({overflow:"hidden"}),Bn({height:"100%"}),ms("700ms",Bn({height:0}))])]);Q(7315);const z2="access-token",j2="language";class nO{constructor(e,t){this.success=e,this.content=t}}class iO{constructor(e,t,s){this.name=e,this.code=t,this.imageUrl=s}}var rO="/assets/images/flags";const KT=[new iO("English","en",`${rO}/gb.svg`),new iO("Nederlands","nl",`${rO}/nl.svg`),new iO("\u7b80\u4f53\u4e2d\u6587","zh",`${rO}/cn.svg`)];let Wd=(()=>{class i{constructor(t){this.update=new Ki(""),this.translate=t,this.supportedLanguages=KT}setLanguage(t){this.translate.use(t)}get(t){return this.translate.instant(t)}getSettings(t){return{displayKey:t,search:!0,height:"auto",placeholder:this.translate.instant("dropdown.select"),customComparator:()=>{},limitTo:0,moreText:this.translate.instant("dropdown.more"),noResultsFound:this.translate.instant("dropdown.noResults"),searchPlaceholder:this.translate.instant("dropdown.search"),searchOnKey:t}}GetSelectedLanguage(){let t=KT.find(s=>s.code==this.translate.currentLang);if(null==t&&(t=KT.find(s=>s.code==localStorage.getItem(j2))),null==t&&(t=KT.find(s=>"en"==s.code)),null==t)throw Error("no language set");return t}saveSelectedLanguage(t){localStorage.setItem(j2,t),this.update.next("")}bootstrap(){this.translate.addLangs(["en","nl","zh"]),this.translate.setDefaultLang("en"),this.translate.use(this.GetSelectedLanguage().code)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(KM))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),u0=(()=>{class i{constructor(t,s,o){this.authClient=t,this.fireAuth=s,this.translationService=o,this.userId=new Ki(""),this.userEmail=new Ki(""),this.username=new Ki(""),this.user=null,this.fireAuth.authState.subscribe(a=>{a?(this.userId.next(a.uid),this.userEmail.next(a.email),this.username.next(a.displayName),this.user=a):(this.userId.next(""),this.userEmail.next(""),this.username.next(""),this.user=null)})}register(t){return(0,q.mG)(this,void 0,void 0,function*(){return yield this.basicRegistration(t)})}login(t,s){return(0,q.mG)(this,void 0,void 0,function*(){return yield this.basicLogin(t,s)})}logout(){return(0,q.mG)(this,void 0,void 0,function*(){yield this.basicLogout()})}manageAccount(t,s){return(0,q.mG)(this,void 0,void 0,function*(){return yield this.basicManageAccount(t,s)})}recoverPassword(t){return(0,q.mG)(this,void 0,void 0,function*(){return yield this.basicRecoverPassword(t)})}deleteAccount(t){return(0,q.mG)(this,void 0,void 0,function*(){return yield this.basicDeleteAccount(t)})}basicRegistration(t){return(0,q.mG)(this,void 0,void 0,function*(){try{var s=yield this.fireAuth.createUserWithEmailAndPassword(t.email,t.password);return yield s.user.updateProfile({displayName:t.username}),this.username.next(t.username),!0}catch(o){return!1}})}basicLogin(t,s){return(0,q.mG)(this,void 0,void 0,function*(){try{return yield this.fireAuth.signInWithEmailAndPassword(t,s),!0}catch(a){return!1}})}basicLogout(){return(0,q.mG)(this,void 0,void 0,function*(){yield this.fireAuth.signOut()})}basicManageAccount(t,s){return(0,q.mG)(this,void 0,void 0,function*(){try{if(0==(yield this.basicLogin(this.user.email,t)))return new nO(!1,this.translationService.get("authentication.invalidCredentials"));yield this.user.updatePassword(s);let a=this.translationService.get("authentication.passwordUpdated").replace("{email}",this.userEmail.value);return new nO(!0,a)}catch(o){return new nO(!1,this.translationService.get("authentication.validPassword"))}})}basicRecoverPassword(t){return(0,q.mG)(this,void 0,void 0,function*(){try{return yield this.fireAuth.sendPasswordResetEmail(t),!0}catch(s){return!1}})}basicDeleteAccount(t){return(0,q.mG)(this,void 0,void 0,function*(){if(0==(yield this.basicLogin(this.user.email,t)))return!1;try{return yield this.user.delete(),!0}catch(o){return!1}})}customRegistration(t,s){return(0,q.mG)(this,void 0,void 0,function*(){try{yield new Promise((a,l)=>{this.authClient.register(new Kk)})}catch(o){return!1}})}customLogin(t,s){return(0,q.mG)(this,void 0,void 0,function*(){try{let a=yield new Promise((l,h)=>{this.authClient.login(new Jk({email:t,password:s})).subscribe(g=>{l(g)},g=>h(g))});return localStorage.setItem(z2,a),yield this.fireAuth.signInWithCustomToken(a),!0}catch(a){return!1}})}customLogout(){return(0,q.mG)(this,void 0,void 0,function*(){yield this.fireAuth.signOut(),localStorage.removeItem(z2)})}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(O6),u.LFG(Ew),u.LFG(Wd))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Kp=["light-theme","dark-theme"],q2="#03a9f4",Y2="#e91e63";let eE=(()=>{class i{constructor(t){this.translationService=t,this.update=new Ki(""),this.addButton=new Ki(""),this.themeMath=new Ki(""),this.themeReading=new Ki(""),this.themeWriting=new Ki(""),this.themeCustom=new Ki("")}bootstrap(){let t=localStorage.getItem("theme");this.setTheme(t)}get(){return localStorage.getItem("theme")}switch(){let t=localStorage.getItem("theme"),s=Kp.find(o=>o!=t);return t=this.setTheme(s),t}removeTheme(){Kp.forEach(t=>{document.body.classList.remove(t)})}setTheme(t){let s;switch(this.removeTheme(),Kp.includes(t)?(document.body.classList.add(t),localStorage.setItem("theme",t),s=t):(document.body.classList.add(Kp[0]),localStorage.setItem("theme",Kp[0]),s=Kp[0]),s){case Kp[0]:document.documentElement.style.setProperty("--my-theme-color",q2),document.documentElement.style.setProperty("--theme-back-color","#ffffff"),this.addButton.next("add-light"),this.themeMath.next("light-math.png"),this.themeReading.next("light-reading.png"),this.themeWriting.next("light-writing.png"),this.themeCustom.next("light-custom.png");break;case Kp[1]:document.documentElement.style.setProperty("--my-theme-color",Y2),document.documentElement.style.setProperty("--theme-back-color","#4e4e4e"),this.addButton.next("add-dark"),this.themeMath.next("dark-math.png"),this.themeReading.next("dark-reading.png"),this.themeWriting.next("dark-writing.png"),this.themeCustom.next("dark-custom.png")}return this.update.next(s),s}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(Wd))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const K6=new u.OlP("cdk-dir-doc",{providedIn:"root",factory:function J6(){return(0,u.f3M)(_e)}}),Q6=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let sO,Jp=(()=>{class i{constructor(t){if(this.value="ltr",this.change=new u.vpe,t){const o=t.documentElement?t.documentElement.dir:null;this.value=function X6(i){const e=(null==i?void 0:i.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?Q6.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||o||"ltr")}}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(K6,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),tx=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})();try{sO="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(i){sO=!1}let ix,Mo=(()=>{class i{constructor(t){this._platformId=t,this.isBrowser=this._platformId?sr(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!sO)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(u.Lbi))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),nx=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})();const Z2=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function K2(){if(ix)return ix;if("object"!=typeof document||!document)return ix=new Set(Z2),ix;let i=document.createElement("input");return ix=new Set(Z2.filter(e=>(i.setAttribute("type",e),i.type===e))),ix}let tE,JT,d0,oO;function Qp(i){return function ej(){if(null==tE&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>tE=!0}))}finally{tE=tE||!1}return tE}()?i:!!i.capture}function J2(){if(null==d0){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return d0=!1,d0;if("scrollBehavior"in document.documentElement.style)d0=!0;else{const i=Element.prototype.scrollTo;d0=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return d0}function nE(){if("object"!=typeof document||!document)return 0;if(null==JT){const i=document.createElement("div"),e=i.style;i.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),s=t.style;s.width="2px",s.height="1px",i.appendChild(t),document.body.appendChild(i),JT=0,0===i.scrollLeft&&(i.scrollLeft=1,JT=0===i.scrollLeft?1:2),i.remove()}return JT}function aO(i){if(function tj(){if(null==oO){const i="undefined"!=typeof document?document.head:null;oO=!(!i||!i.createShadowRoot&&!i.attachShadow)}return oO}()){const e=i.getRootNode?i.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function lO(){let i="undefined"!=typeof document&&document?document.activeElement:null;for(;i&&i.shadowRoot;){const e=i.shadowRoot.activeElement;if(e===i)break;i=e}return i}function qd(i){return i.composedPath?i.composedPath()[0]:i.target}function cO(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function QT(i,...e){return e.length?e.some(t=>i[t]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function XT(i,e=os.z){return(0,Un.e)((t,s)=>{let o=null,a=null,l=null;const h=()=>{if(o){o.unsubscribe(),o=null;const _=a;a=null,s.next(_)}};function g(){const _=l+i,b=e.now();if(b<_)return o=this.schedule(void 0,_-b),void s.add(o);h()}t.subscribe(new $i.Q(s,_=>{a=_,l=e.now(),o||(o=e.schedule(g,i),s.add(o))},()=>{h(),s.complete()},void 0,()=>{a=o=null}))})}function e3(i){return Dn((e,t)=>i<=t)}var uO=Q(5032);function er(i){return(0,Un.e)((e,t)=>{(0,Hd.Xf)(i).subscribe(new $i.Q(t,()=>t.complete(),uO.Z)),!t.closed&&e.subscribe(t)})}function wi(i){return null!=i&&"false"!=`${i}`}function eI(i,e=0){return function yj(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):e}function tI(i){return Array.isArray(i)?i:[i]}function ao(i){return null==i?"":"string"==typeof i?i:`${i}px`}function Fs(i){return i instanceof u.SBq?i.nativeElement:i}let t3=(()=>{class i{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),bj=(()=>{class i{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,s)=>this._cleanupObserver(s))}observe(t){const s=Fs(t);return new Ri.y(o=>{const l=this._observeElement(s).subscribe(o);return()=>{l.unsubscribe(),this._unobserveElement(s)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const s=new yt.x,o=this._mutationObserverFactory.create(a=>s.next(a));o&&o.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:o,stream:s,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:s,stream:o}=this._observedElements.get(t);s&&s.disconnect(),o.complete(),this._observedElements.delete(t)}}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(t3))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),n3=(()=>{class i{constructor(t,s,o){this._contentObserver=t,this._elementRef=s,this._ngZone=o,this.event=new u.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=wi(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=eI(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(XT(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(bj),u.Y36(u.SBq),u.Y36(u.R0b))},i.\u0275dir=u.lG2({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),i})(),dO=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[t3]}),i})();class Sj extends class Cj{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new yt.x,this._typeaheadSubscription=fs.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new yt.x,this.change=new yt.x,e instanceof u.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const o=t.toArray().indexOf(this._activeItem);o>-1&&o!==this._activeItemIndex&&(this._activeItemIndex=o)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,gs.b)(t=>this._pressedLetters.push(t)),XT(e),Dn(()=>this._pressedLetters.length>0),(0,Dt.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const s=this._getItemsArray();for(let o=1;o<s.length+1;o++){const a=(this._activeItemIndex+o)%s.length,l=s[a];if(!this._skipPredicateFn(l)&&0===l.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(a);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,o=["altKey","ctrlKey","metaKey","shiftKey"].every(a=>!e[a]||this._allowedModifierKeys.indexOf(a)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&o){this.setNextItemActive();break}return;case 38:if(this._vertical&&o){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&o){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&o){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&o){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&o){this.setLastItemActive();break}return;default:return void((o||QT(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),s="number"==typeof e?e:t.indexOf(e),o=t[s];this._activeItem=null==o?null:o,this._activeItemIndex=s}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let s=1;s<=t.length;s++){const o=(this._activeItemIndex+e*s+t.length)%t.length;if(!this._skipPredicateFn(t[o]))return void this.setActiveItem(o)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const s=this._getItemsArray();if(s[e]){for(;this._skipPredicateFn(s[e]);)if(!s[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof u.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let hO=(()=>{class i{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Ej(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const s=function Mj(i){try{return i.frameElement}catch(e){return null}}(function Oj(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(t));if(s&&(-1===a3(s)||!this.isVisible(s)))return!1;let o=t.nodeName.toLowerCase(),a=a3(t);return t.hasAttribute("contenteditable")?-1!==a:!("iframe"===o||"object"===o||this._platform.WEBKIT&&this._platform.IOS&&!function Pj(i){let e=i.nodeName.toLowerCase(),t="input"===e&&i.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===o?!!t.hasAttribute("controls")&&-1!==a:"video"===o?-1!==a&&(null!==a||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,s){return function kj(i){return!function Aj(i){return function Ij(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function Dj(i){let e=i.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(i)||function Tj(i){return function Rj(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||o3(i))}(t)&&!this.isDisabled(t)&&((null==s?void 0:s.ignoreVisibility)||this.isVisible(t))}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(Mo))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function o3(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let e=i.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function a3(i){if(!o3(i))return null;const e=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Fj{constructor(e,t,s,o,a=!1){this._element=e,this._checker=t,this._ngZone=s,this._document=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,a||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const s=this._getFirstTabbableElement(t);return null==s||s.focus(e),!!s}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let s=0;s<t.length;s++){const o=t[s].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[s]):null;if(o)return o}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let s=t.length-1;s>=0;s--){const o=t[s].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[s]):null;if(o)return o}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,Oi.q)(1)).subscribe(e)}}let l3=(()=>{class i{constructor(t,s,o){this._checker=t,this._ngZone=s,this._document=o}create(t,s=!1){return new Fj(t,this._checker,this._ngZone,this._document,s)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(hO),u.LFG(u.R0b),u.LFG(_e))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function fO(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function pO(i){const e=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Lj=new u.OlP("cdk-input-modality-detector-options"),Nj={ignoreKeys:[18,17,224,91,16]},rx=Qp({passive:!0,capture:!0});let Bj=(()=>{class i{constructor(t,s,o,a){this._platform=t,this._mostRecentTarget=null,this._modality=new Ki(null),this._lastTouchMs=0,this._onKeydown=l=>{var h,g;(null===(g=null===(h=this._options)||void 0===h?void 0:h.ignoreKeys)||void 0===g?void 0:g.some(_=>_===l.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=qd(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(fO(l)?"keyboard":"mouse"),this._mostRecentTarget=qd(l))},this._onTouchstart=l=>{pO(l)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=qd(l))},this._options=Object.assign(Object.assign({},Nj),a),this.modalityDetected=this._modality.pipe(e3(1)),this.modalityChanged=this.modalityDetected.pipe(vl()),t.isBrowser&&s.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,rx),o.addEventListener("mousedown",this._onMousedown,rx),o.addEventListener("touchstart",this._onTouchstart,rx)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,rx),document.removeEventListener("mousedown",this._onMousedown,rx),document.removeEventListener("touchstart",this._onTouchstart,rx))}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(Mo),u.LFG(u.R0b),u.LFG(_e),u.LFG(Lj,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Vj=new u.OlP("liveAnnouncerElement",{providedIn:"root",factory:function Uj(){return null}}),Gj=new u.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let u3=(()=>{class i{constructor(t,s,o,a){this._ngZone=s,this._defaultOptions=a,this._document=o,this._liveElement=t||this._createLiveElement()}announce(t,...s){const o=this._defaultOptions;let a,l;return 1===s.length&&"number"==typeof s[0]?l=s[0]:[a,l]=s,this.clear(),clearTimeout(this._previousTimeout),a||(a=o&&o.politeness?o.politeness:"polite"),null==l&&o&&(l=o.duration),this._liveElement.setAttribute("aria-live",a),this._ngZone.runOutsideAngular(()=>new Promise(h=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,h(),"number"==typeof l&&(this._previousTimeout=setTimeout(()=>this.clear(),l))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var t;clearTimeout(this._previousTimeout),null===(t=this._liveElement)||void 0===t||t.remove(),this._liveElement=null}_createLiveElement(){const t="cdk-live-announcer-element",s=this._document.getElementsByClassName(t),o=this._document.createElement("div");for(let a=0;a<s.length;a++)s[a].remove();return o.classList.add(t),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),this._document.body.appendChild(o),o}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(Vj,8),u.LFG(u.R0b),u.LFG(_e),u.LFG(Gj,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Hj=new u.OlP("cdk-focus-monitor-default-options"),nI=Qp({passive:!0,capture:!0});let sx=(()=>{class i{constructor(t,s,o,a,l){this._ngZone=t,this._platform=s,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new yt.x,this._rootNodeFocusAndBlurListener=h=>{const g=qd(h),_="focus"===h.type?this._onFocus:this._onBlur;for(let b=g;b;b=b.parentElement)_.call(this,h,b)},this._document=a,this._detectionMode=(null==l?void 0:l.detectionMode)||0}monitor(t,s=!1){const o=Fs(t);if(!this._platform.isBrowser||1!==o.nodeType)return at(null);const a=aO(o)||this._getDocument(),l=this._elementInfo.get(o);if(l)return s&&(l.checkChildren=!0),l.subject;const h={checkChildren:s,subject:new yt.x,rootNode:a};return this._elementInfo.set(o,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const s=Fs(t),o=this._elementInfo.get(s);o&&(o.subject.complete(),this._setClasses(s),this._elementInfo.delete(s),this._removeGlobalListeners(o))}focusVia(t,s,o){const a=Fs(t);a===this._getDocument().activeElement?this._getClosestElementsInfo(a).forEach(([h,g])=>this._originChanged(h,s,g)):(this._setOrigin(s),"function"==typeof a.focus&&a.focus(o))}ngOnDestroy(){this._elementInfo.forEach((t,s)=>this.stopMonitoring(s))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,s){t.classList.toggle("cdk-focused",!!s),t.classList.toggle("cdk-touch-focused","touch"===s),t.classList.toggle("cdk-keyboard-focused","keyboard"===s),t.classList.toggle("cdk-mouse-focused","mouse"===s),t.classList.toggle("cdk-program-focused","program"===s)}_setOrigin(t,s=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&s,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,s){const o=this._elementInfo.get(s),a=qd(t);!o||!o.checkChildren&&s!==a||this._originChanged(s,this._getFocusOrigin(a),o)}_onBlur(t,s){const o=this._elementInfo.get(s);!o||o.checkChildren&&t.relatedTarget instanceof Node&&s.contains(t.relatedTarget)||(this._setClasses(s),this._emitOrigin(o.subject,null))}_emitOrigin(t,s){this._ngZone.run(()=>t.next(s))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const s=t.rootNode,o=this._rootNodeFocusListenerCount.get(s)||0;o||this._ngZone.runOutsideAngular(()=>{s.addEventListener("focus",this._rootNodeFocusAndBlurListener,nI),s.addEventListener("blur",this._rootNodeFocusAndBlurListener,nI)}),this._rootNodeFocusListenerCount.set(s,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(er(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(t){const s=t.rootNode;if(this._rootNodeFocusListenerCount.has(s)){const o=this._rootNodeFocusListenerCount.get(s);o>1?this._rootNodeFocusListenerCount.set(s,o-1):(s.removeEventListener("focus",this._rootNodeFocusAndBlurListener,nI),s.removeEventListener("blur",this._rootNodeFocusAndBlurListener,nI),this._rootNodeFocusListenerCount.delete(s))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,s,o){this._setClasses(t,s),this._emitOrigin(o.subject,s),this._lastFocusOrigin=s}_getClosestElementsInfo(t){const s=[];return this._elementInfo.forEach((o,a)=>{(a===t||o.checkChildren&&a.contains(t))&&s.push([a,o])}),s}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(u.R0b),u.LFG(Mo),u.LFG(Bj),u.LFG(_e,8),u.LFG(Hj,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const d3="cdk-high-contrast-black-on-white",h3="cdk-high-contrast-white-on-black",gO="cdk-high-contrast-active";let f3=(()=>{class i{constructor(t,s){this._platform=t,this._document=s}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const s=this._document.defaultView||window,o=s&&s.getComputedStyle?s.getComputedStyle(t):null,a=(o&&o.backgroundColor||"").replace(/ /g,"");switch(t.remove(),a){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(gO),t.remove(d3),t.remove(h3),this._hasCheckedHighContrastMode=!0;const s=this.getHighContrastMode();1===s?(t.add(gO),t.add(d3)):2===s&&(t.add(gO),t.add(h3))}}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(Mo),u.LFG(_e))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),p3=(()=>{class i{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(f3))},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[nx,dO]]}),i})();function zj(){return"undefined"!=typeof window&&void 0!==window.document}function mO(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function yv(i){switch(i.length){case 0:return new XM;case 1:return i[0];default:return new H2(i)}}function g3(i,e,t,s,o={},a={}){const l=[],h=[];let g=-1,_=null;if(s.forEach(b=>{const x=b.offset,S=x==g,M=S&&_||{};Object.keys(b).forEach(T=>{let I=T,L=b[T];if("offset"!==T)switch(I=e.normalizePropertyName(I,l),L){case"!":L=o[T];break;case Zp:L=a[T];break;default:L=e.normalizeStyleValue(T,I,L,l)}M[I]=L}),S||h.push(M),_=M,g=x}),l.length){const b="\n - ";throw new Error(`Unable to animate due to the following errors:${b}${l.join(b)}`)}return h}function vO(i,e,t,s){switch(e){case"start":i.onStart(()=>s(t&&_O(t,"start",i)));break;case"done":i.onDone(()=>s(t&&_O(t,"done",i)));break;case"destroy":i.onDestroy(()=>s(t&&_O(t,"destroy",i)))}}function _O(i,e,t){const s=t.totalTime,a=yO(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,null==s?i.totalTime:s,!!t.disabled),l=i._data;return null!=l&&(a._data=l),a}function yO(i,e,t,s,o="",a=0,l){return{element:i,triggerName:e,fromState:t,toState:s,phaseName:o,totalTime:a,disabled:!!l}}function wc(i,e,t){let s;return i instanceof Map?(s=i.get(e),s||i.set(e,s=t)):(s=i[e],s||(s=i[e]=t)),s}function m3(i){const e=i.indexOf(":");return[i.substring(1,e),i.substr(e+1)]}let bO=(i,e)=>!1,v3=(i,e,t)=>[];(mO()||"undefined"!=typeof Element)&&(bO=zj()?(i,e)=>{for(;e&&e!==document.documentElement;){if(e===i)return!0;e=e.parentNode||e.host}return!1}:(i,e)=>i.contains(e),v3=(i,e,t)=>{if(t)return Array.from(i.querySelectorAll(e));const s=i.querySelector(e);return s?[s]:[]});let h0=null,_3=!1;function y3(i){h0||(h0=function Wj(){return"undefined"!=typeof document?document.body:null}()||{},_3=!!h0.style&&"WebkitAppearance"in h0.style);let e=!0;return h0.style&&!function jj(i){return"ebkit"==i.substring(1,6)}(i)&&(e=i in h0.style,!e&&_3&&(e="Webkit"+i.charAt(0).toUpperCase()+i.substr(1)in h0.style)),e}const b3=bO,w3=v3;let x3=(()=>{class i{validateStyleProperty(t){return y3(t)}matchesElement(t,s){return!1}containsElement(t,s){return b3(t,s)}query(t,s,o){return w3(t,s,o)}computeStyle(t,s,o){return o||""}animate(t,s,o,a,l,h=[],g){return new XM(o,a)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),wO=(()=>{class i{}return i.NOOP=new x3,i})();const xO="ng-enter",iI="ng-leave",rI="ng-trigger",sI=".ng-trigger",S3="ng-animating",CO=".ng-animating";function f0(i){if("number"==typeof i)return i;const e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:SO(parseFloat(e[1]),e[2])}function SO(i,e){return"s"===e?1e3*i:i}function oI(i,e,t){return i.hasOwnProperty("duration")?i:function $j(i,e,t){let o,a=0,l="";if("string"==typeof i){const h=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(`The provided timing value "${i}" is invalid.`),{duration:0,delay:0,easing:""};o=SO(parseFloat(h[1]),h[2]);const g=h[3];null!=g&&(a=SO(parseFloat(g),h[4]));const _=h[5];_&&(l=_)}else o=i;if(!t){let h=!1,g=e.length;o<0&&(e.push("Duration values below 0 are not allowed for this animation step."),h=!0),a<0&&(e.push("Delay values below 0 are not allowed for this animation step."),h=!0),h&&e.splice(g,0,`The provided timing value "${i}" is invalid.`)}return{duration:o,delay:a,easing:l}}(i,e,t)}function ox(i,e={}){return Object.keys(i).forEach(t=>{e[t]=i[t]}),e}function bv(i,e,t={}){if(e)for(let s in i)t[s]=i[s];else ox(i,t);return t}function E3(i,e,t){return t?e+":"+t+";":""}function D3(i){let e="";for(let t=0;t<i.style.length;t++){const s=i.style.item(t);e+=E3(0,s,i.style.getPropertyValue(s))}for(const t in i.style)i.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=E3(0,Jj(t),i.style[t]));i.setAttribute("style",e)}function uf(i,e,t){i.style&&(Object.keys(e).forEach(s=>{const o=EO(s);t&&!t.hasOwnProperty(s)&&(t[s]=i.style[o]),i.style[o]=e[s]}),mO()&&D3(i))}function p0(i,e){i.style&&(Object.keys(e).forEach(t=>{const s=EO(t);i.style[s]=""}),mO()&&D3(i))}function iE(i){return Array.isArray(i)?1==i.length?i[0]:U2(i):i}const MO=new RegExp("{{\\s*(.+?)\\s*}}","g");function A3(i){let e=[];if("string"==typeof i){let t;for(;t=MO.exec(i);)e.push(t[1]);MO.lastIndex=0}return e}function aI(i,e,t){const s=i.toString(),o=s.replace(MO,(a,l)=>{let h=e[l];return e.hasOwnProperty(l)||(t.push(`Please provide a value for the animation param ${l}`),h=""),h.toString()});return o==s?i:o}function lI(i){const e=[];let t=i.next();for(;!t.done;)e.push(t.value),t=i.next();return e}const Kj=/-+([a-z0-9])/g;function EO(i){return i.replace(Kj,(...e)=>e[1].toUpperCase())}function Jj(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function xc(i,e,t){switch(e.type){case 7:return i.visitTrigger(e,t);case 0:return i.visitState(e,t);case 1:return i.visitTransition(e,t);case 2:return i.visitSequence(e,t);case 3:return i.visitGroup(e,t);case 4:return i.visitAnimate(e,t);case 5:return i.visitKeyframes(e,t);case 6:return i.visitStyle(e,t);case 8:return i.visitReference(e,t);case 9:return i.visitAnimateChild(e,t);case 10:return i.visitAnimateRef(e,t);case 11:return i.visitQuery(e,t);case 12:return i.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function T3(i,e){return window.getComputedStyle(i)[e]}function e5(i,e){const t=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(s=>function t5(i,e,t){if(":"==i[0]){const g=function n5(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,s)=>parseFloat(s)>parseFloat(t);case":decrement":return(t,s)=>parseFloat(s)<parseFloat(t);default:return e.push(`The transition alias value "${i}" is not supported`),"* => *"}}(i,t);if("function"==typeof g)return void e.push(g);i=g}const s=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==s||s.length<4)return t.push(`The provided transition expression "${i}" is not supported`),e;const o=s[1],a=s[2],l=s[3];e.push(I3(o,l));"<"==a[0]&&!("*"==o&&"*"==l)&&e.push(I3(l,o))}(s,t,e)):t.push(i),t}const uI=new Set(["true","1"]),dI=new Set(["false","0"]);function I3(i,e){const t=uI.has(i)||dI.has(i),s=uI.has(e)||dI.has(e);return(o,a)=>{let l="*"==i||i==o,h="*"==e||e==a;return!l&&t&&"boolean"==typeof o&&(l=o?uI.has(i):dI.has(i)),!h&&s&&"boolean"==typeof a&&(h=a?uI.has(e):dI.has(e)),l&&h}}const r5=new RegExp("s*:selfs*,?","g");function DO(i,e,t){return new s5(i).build(e,t)}class s5{constructor(e){this._driver=e}build(e,t){const s=new l5(t);return this._resetContextStyleTimingState(s),xc(this,iE(e),s)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let s=t.queryCount=0,o=t.depCount=0;const a=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const g=h,_=g.name;_.toString().split(/\s*,\s*/).forEach(b=>{g.name=b,a.push(this.visitState(g,t))}),g.name=_}else if(1==h.type){const g=this.visitTransition(h,t);s+=g.queryCount,o+=g.depCount,l.push(g)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:a,transitions:l,queryCount:s,depCount:o,options:null}}visitState(e,t){const s=this.visitStyle(e.styles,t),o=e.options&&e.options.params||null;if(s.containsDynamicStyles){const a=new Set,l=o||{};if(s.styles.forEach(h=>{if(hI(h)){const g=h;Object.keys(g).forEach(_=>{A3(g[_]).forEach(b=>{l.hasOwnProperty(b)||a.add(b)})})}}),a.size){const h=lI(a.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${h.join(", ")}`)}}return{type:0,name:e.name,style:s,options:o?{params:o}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const s=xc(this,iE(e.animation),t);return{type:1,matchers:e5(e.expr,t.errors),animation:s,queryCount:t.queryCount,depCount:t.depCount,options:g0(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(s=>xc(this,s,t)),options:g0(e.options)}}visitGroup(e,t){const s=t.currentTime;let o=0;const a=e.steps.map(l=>{t.currentTime=s;const h=xc(this,l,t);return o=Math.max(o,t.currentTime),h});return t.currentTime=o,{type:3,steps:a,options:g0(e.options)}}visitAnimate(e,t){const s=function u5(i,e){let t=null;if(i.hasOwnProperty("duration"))t=i;else if("number"==typeof i)return AO(oI(i,e).duration,0,"");const s=i;if(s.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=AO(0,0,"");return a.dynamic=!0,a.strValue=s,a}return t=t||oI(s,e),AO(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=s;let o,a=e.styles?e.styles:Bn({});if(5==a.type)o=this.visitKeyframes(a,t);else{let l=e.styles,h=!1;if(!l){h=!0;const _={};s.easing&&(_.easing=s.easing),l=Bn(_)}t.currentTime+=s.duration+s.delay;const g=this.visitStyle(l,t);g.isEmptyStep=h,o=g}return t.currentAnimateTimings=null,{type:4,timings:s,style:o,options:null}}visitStyle(e,t){const s=this._makeStyleAst(e,t);return this._validateStyleAst(s,t),s}_makeStyleAst(e,t){const s=[];Array.isArray(e.styles)?e.styles.forEach(l=>{"string"==typeof l?l==Zp?s.push(l):t.errors.push(`The provided style string value ${l} is not allowed.`):s.push(l)}):s.push(e.styles);let o=!1,a=null;return s.forEach(l=>{if(hI(l)){const h=l,g=h.easing;if(g&&(a=g,delete h.easing),!o)for(let _ in h)if(h[_].toString().indexOf("{{")>=0){o=!0;break}}}),{type:6,styles:s,easing:a,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const s=t.currentAnimateTimings;let o=t.currentTime,a=t.currentTime;s&&a>0&&(a-=s.duration+s.delay),e.styles.forEach(l=>{"string"!=typeof l&&Object.keys(l).forEach(h=>{if(!this._driver.validateStyleProperty(h))return void t.errors.push(`The provided animation property "${h}" is not a supported CSS property for animations`);const g=t.collectedStyles[t.currentQuerySelector],_=g[h];let b=!0;_&&(a!=o&&a>=_.startTime&&o<=_.endTime&&(t.errors.push(`The CSS property "${h}" that exists between the times of "${_.startTime}ms" and "${_.endTime}ms" is also being animated in a parallel animation between the times of "${a}ms" and "${o}ms"`),b=!1),a=_.startTime),b&&(g[h]={startTime:a,endTime:o}),t.options&&function Zj(i,e,t){const s=e.params||{},o=A3(i);o.length&&o.forEach(a=>{s.hasOwnProperty(a)||t.push(`Unable to resolve the local animation param ${a} in the given list of values`)})}(l[h],t.options,t.errors)})})}visitKeyframes(e,t){const s={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),s;let a=0;const l=[];let h=!1,g=!1,_=0;const b=e.steps.map(k=>{const R=this._makeStyleAst(k,t);let U=null!=R.offset?R.offset:function c5(i){if("string"==typeof i)return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(hI(t)&&t.hasOwnProperty("offset")){const s=t;e=parseFloat(s.offset),delete s.offset}});else if(hI(i)&&i.hasOwnProperty("offset")){const t=i;e=parseFloat(t.offset),delete t.offset}return e}(R.styles),N=0;return null!=U&&(a++,N=R.offset=U),g=g||N<0||N>1,h=h||N<_,_=N,l.push(N),R});g&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),h&&t.errors.push("Please ensure that all keyframe offsets are in order");const x=e.steps.length;let S=0;a>0&&a<x?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==a&&(S=1/(x-1));const M=x-1,T=t.currentTime,I=t.currentAnimateTimings,L=I.duration;return b.forEach((k,R)=>{const U=S>0?R==M?1:S*R:l[R],N=U*L;t.currentTime=T+I.delay+N,I.duration=N,this._validateStyleAst(k,t),k.offset=U,s.styles.push(k)}),s}visitReference(e,t){return{type:8,animation:xc(this,iE(e.animation),t),options:g0(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:g0(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:g0(e.options)}}visitQuery(e,t){const s=t.currentQuerySelector,o=e.options||{};t.queryCount++,t.currentQuery=e;const[a,l]=function o5(i){const e=!!i.split(/\s*,\s*/).find(t=>":self"==t);return e&&(i=i.replace(r5,"")),i=i.replace(/@\*/g,sI).replace(/@\w+/g,t=>sI+"-"+t.substr(1)).replace(/:animating/g,CO),[i,e]}(e.selector);t.currentQuerySelector=s.length?s+" "+a:a,wc(t.collectedStyles,t.currentQuerySelector,{});const h=xc(this,iE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=s,{type:11,selector:a,limit:o.limit||0,optional:!!o.optional,includeSelf:l,animation:h,originalSelector:e.selector,options:g0(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const s="full"===e.timings?{duration:0,delay:0,easing:"full"}:oI(e.timings,t.errors,!0);return{type:12,animation:xc(this,iE(e.animation),t),timings:s,options:null}}}class l5{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function hI(i){return!Array.isArray(i)&&"object"==typeof i}function g0(i){return i?(i=ox(i)).params&&(i.params=function a5(i){return i?ox(i):null}(i.params)):i={},i}function AO(i,e,t){return{duration:i,delay:e,easing:t}}function TO(i,e,t,s,o,a,l=null,h=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:s,duration:o,delay:a,totalTime:o+a,easing:l,subTimeline:h}}class fI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let s=this._map.get(e);s||this._map.set(e,s=[]),s.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const f5=new RegExp(":enter","g"),g5=new RegExp(":leave","g");function IO(i,e,t,s,o,a={},l={},h,g,_=[]){return(new m5).buildKeyframes(i,e,t,s,o,a,l,h,g,_)}class m5{buildKeyframes(e,t,s,o,a,l,h,g,_,b=[]){_=_||new fI;const x=new RO(e,t,_,o,a,b,[]);x.options=g,x.currentTimeline.setStyles([l],null,x.errors,g),xc(this,s,x);const S=x.timelines.filter(M=>M.containsAnimation());if(Object.keys(h).length){let M;for(let T=S.length-1;T>=0;T--){const I=S[T];if(I.element===t){M=I;break}}M&&!M.allowOnlyTimelineStyles()&&M.setStyles([h],null,x.errors,g)}return S.length?S.map(M=>M.buildKeyframes()):[TO(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const s=t.subInstructions.get(t.element);if(s){const o=t.createSubContext(e.options),a=t.currentTimeline.currentTime,l=this._visitSubInstructions(s,o,o.options);a!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const s=t.createSubContext(e.options);s.transformIntoNewTimeline(),this.visitReference(e.animation,s),t.transformIntoNewTimeline(s.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,s){let a=t.currentTimeline.currentTime;const l=null!=s.duration?f0(s.duration):null,h=null!=s.delay?f0(s.delay):null;return 0!==l&&e.forEach(g=>{const _=t.appendInstructionToTimeline(g,l,h);a=Math.max(a,_.duration+_.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),xc(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const s=t.subContextCount;let o=t;const a=e.options;if(a&&(a.params||a.delay)&&(o=t.createSubContext(a),o.transformIntoNewTimeline(),null!=a.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=pI);const l=f0(a.delay);o.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>xc(this,l,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>s&&o.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const s=[];let o=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?f0(e.options.delay):0;e.steps.forEach(l=>{const h=t.createSubContext(e.options);a&&h.delayNextStep(a),xc(this,l,h),o=Math.max(o,h.currentTimeline.currentTime),s.push(h.currentTimeline)}),s.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(o),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const s=e.strValue;return oI(t.params?aI(s,t.params,t.errors):s,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const s=t.currentAnimateTimings=this._visitTiming(e.timings,t),o=t.currentTimeline;s.delay&&(t.incrementTime(s.delay),o.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(s.duration),this.visitStyle(a,t),o.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const s=t.currentTimeline,o=t.currentAnimateTimings;!o&&s.getCurrentStyleProperties().length&&s.forwardFrame();const a=o&&o.easing||e.easing;e.isEmptyStep?s.applyEmptyStep(a):s.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const s=t.currentAnimateTimings,o=t.currentTimeline.duration,a=s.duration,h=t.createSubContext().currentTimeline;h.easing=s.easing,e.styles.forEach(g=>{h.forwardTime((g.offset||0)*a),h.setStyles(g.styles,g.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(o+a),t.previousNode=e}visitQuery(e,t){const s=t.currentTimeline.currentTime,o=e.options||{},a=o.delay?f0(o.delay):0;a&&(6===t.previousNode.type||0==s&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=pI);let l=s;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!o.optional,t.errors);t.currentQueryTotal=h.length;let g=null;h.forEach((_,b)=>{t.currentQueryIndex=b;const x=t.createSubContext(e.options,_);a&&x.delayNextStep(a),_===t.element&&(g=x.currentTimeline),xc(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),g&&(t.currentTimeline.mergeTimelineCollectedStyles(g),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const s=t.parentContext,o=t.currentTimeline,a=e.timings,l=Math.abs(a.duration),h=l*(t.currentQueryTotal-1);let g=l*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":g=h-g;break;case"full":g=s.currentStaggerTime}const b=t.currentTimeline;g&&b.delayNextStep(g);const x=b.currentTime;xc(this,e.animation,t),t.previousNode=e,s.currentStaggerTime=o.currentTime-x+(o.startTime-s.currentTimeline.startTime)}}const pI={};class RO{constructor(e,t,s,o,a,l,h,g){this._driver=e,this.element=t,this.subInstructions=s,this._enterClassName=o,this._leaveClassName=a,this.errors=l,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=pI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new gI(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const s=e;let o=this.options;null!=s.duration&&(o.duration=f0(s.duration)),null!=s.delay&&(o.delay=f0(s.delay));const a=s.params;if(a){let l=o.params;l||(l=this.options.params={}),Object.keys(a).forEach(h=>{(!t||!l.hasOwnProperty(h))&&(l[h]=aI(a[h],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const s=e.params={};Object.keys(t).forEach(o=>{s[o]=t[o]})}}return e}createSubContext(e=null,t,s){const o=t||this.element,a=new RO(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,s||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=pI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,s){const o={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=s?s:0)+e.delay,easing:""},a=new v5(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,o,e.stretchStartingKeyframe);return this.timelines.push(a),o}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,s,o,a,l){let h=[];if(o&&h.push(this.element),e.length>0){e=(e=e.replace(f5,"."+this._enterClassName)).replace(g5,"."+this._leaveClassName);let _=this._driver.query(this.element,e,1!=s);0!==s&&(_=s<0?_.slice(_.length+s,_.length):_.slice(0,s)),h.push(..._)}return!a&&0==h.length&&l.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),h}}class gI{constructor(e,t,s,o){this._driver=e,this.element=t,this.startTime=s,this._elementTimelineStylesLookup=o,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new gI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Zp,this._currentKeyframe[t]=Zp}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,s,o){t&&(this._previousKeyframe.easing=t);const a=o&&o.params||{},l=function _5(i,e){const t={};let s;return i.forEach(o=>{"*"===o?(s=s||Object.keys(e),s.forEach(a=>{t[a]=Zp})):bv(o,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(l).forEach(h=>{const g=aI(l[h],a,s);this._pendingStyles[h]=g,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:Zp),this._updateStyle(h,g)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(s=>{this._currentKeyframe[s]=e[s]}),Object.keys(this._localTimelineStyles).forEach(s=>{this._currentKeyframe.hasOwnProperty(s)||(this._currentKeyframe[s]=this._localTimelineStyles[s])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const s=this._styleSummary[t],o=e._styleSummary[t];(!s||o.time>s.time)&&this._updateStyle(t,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,s=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((h,g)=>{const _=bv(h,!0);Object.keys(_).forEach(b=>{const x=_[b];"!"==x?e.add(b):x==Zp&&t.add(b)}),s||(_.offset=g/this.duration),o.push(_)});const a=e.size?lI(e.values()):[],l=t.size?lI(t.values()):[];if(s){const h=o[0],g=ox(h);h.offset=0,g.offset=1,o=[h,g]}return TO(this.element,o,a,l,this.duration,this.startTime,this.easing,!1)}}class v5 extends gI{constructor(e,t,s,o,a,l,h=!1){super(e,t,l.delay),this.keyframes=s,this.preStyleProps=o,this.postStyleProps=a,this._stretchStartingKeyframe=h,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:s,easing:o}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],l=s+t,h=t/l,g=bv(e[0],!1);g.offset=0,a.push(g);const _=bv(e[0],!1);_.offset=k3(h),a.push(_);const b=e.length-1;for(let x=1;x<=b;x++){let S=bv(e[x],!1);S.offset=k3((t+S.offset*s)/l),a.push(S)}s=l,t=0,o="",e=a}return TO(this.element,e,this.preStyleProps,this.postStyleProps,s,t,o,!0)}}function k3(i,e=3){const t=Math.pow(10,e-1);return Math.round(i*t)/t}class PO{}class y5 extends PO{normalizePropertyName(e,t){return EO(e)}normalizeStyleValue(e,t,s,o){let a="";const l=s.toString().trim();if(b5[t]&&0!==s&&"0"!==s)if("number"==typeof s)a="px";else{const h=s.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&o.push(`Please provide a CSS unit value for ${e}:${s}`)}return l+a}}const b5=(()=>function w5(i){const e={};return i.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function O3(i,e,t,s,o,a,l,h,g,_,b,x,S){return{type:0,element:i,triggerName:e,isRemovalTransition:o,fromState:t,fromStyles:a,toState:s,toStyles:l,timelines:h,queriedElements:g,preStyleProps:_,postStyleProps:b,totalTime:x,errors:S}}const kO={};class F3{constructor(e,t,s){this._triggerName=e,this.ast=t,this._stateStyles=s}match(e,t,s,o){return function x5(i,e,t,s,o){return i.some(a=>a(e,t,s,o))}(this.ast.matchers,e,t,s,o)}buildStyles(e,t,s){const o=this._stateStyles["*"],a=this._stateStyles[e],l=o?o.buildStyles(t,s):{};return a?a.buildStyles(t,s):l}build(e,t,s,o,a,l,h,g,_,b){const x=[],S=this.ast.options&&this.ast.options.params||kO,T=this.buildStyles(s,h&&h.params||kO,x),I=g&&g.params||kO,L=this.buildStyles(o,I,x),k=new Set,R=new Map,U=new Map,N="void"===o,j={params:Object.assign(Object.assign({},S),I)},K=b?[]:IO(e,t,this.ast.animation,a,l,T,L,j,_,x);let ne=0;if(K.forEach(Re=>{ne=Math.max(Re.duration+Re.delay,ne)}),x.length)return O3(t,this._triggerName,s,o,N,T,L,[],[],R,U,ne,x);K.forEach(Re=>{const xe=Re.element,W=wc(R,xe,{});Re.preStyleProps.forEach(be=>W[be]=!0);const ce=wc(U,xe,{});Re.postStyleProps.forEach(be=>ce[be]=!0),xe!==t&&k.add(xe)});const de=lI(k.values());return O3(t,this._triggerName,s,o,N,T,L,K,de,R,U,ne)}}class C5{constructor(e,t,s){this.styles=e,this.defaultParams=t,this.normalizer=s}buildStyles(e,t){const s={},o=ox(this.defaultParams);return Object.keys(e).forEach(a=>{const l=e[a];null!=l&&(o[a]=l)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const l=a;Object.keys(l).forEach(h=>{let g=l[h];g.length>1&&(g=aI(g,o,t));const _=this.normalizer.normalizePropertyName(h,t);g=this.normalizer.normalizeStyleValue(h,_,g,t),s[_]=g})}}),s}}class M5{constructor(e,t,s){this.name=e,this.ast=t,this._normalizer=s,this.transitionFactories=[],this.states={},t.states.forEach(o=>{this.states[o.name]=new C5(o.style,o.options&&o.options.params||{},s)}),L3(this.states,"true","1"),L3(this.states,"false","0"),t.transitions.forEach(o=>{this.transitionFactories.push(new F3(e,o,this.states))}),this.fallbackTransition=function E5(i,e,t){return new F3(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,s,o){return this.transitionFactories.find(l=>l.match(e,t,s,o))||null}matchStyles(e,t,s){return this.fallbackTransition.buildStyles(e,t,s)}}function L3(i,e,t){i.hasOwnProperty(e)?i.hasOwnProperty(t)||(i[t]=i[e]):i.hasOwnProperty(t)&&(i[e]=i[t])}const D5=new fI;class A5{constructor(e,t,s){this.bodyNode=e,this._driver=t,this._normalizer=s,this._animations={},this._playersById={},this.players=[]}register(e,t){const s=[],o=DO(this._driver,t,s);if(s.length)throw new Error(`Unable to build the animation due to the following errors: ${s.join("\n")}`);this._animations[e]=o}_buildPlayer(e,t,s){const o=e.element,a=g3(0,this._normalizer,0,e.keyframes,t,s);return this._driver.animate(o,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,s={}){const o=[],a=this._animations[e];let l;const h=new Map;if(a?(l=IO(this._driver,t,a,xO,iI,{},{},s,D5,o),l.forEach(b=>{const x=wc(h,b.element,{});b.postStyleProps.forEach(S=>x[S]=null)})):(o.push("The requested animation doesn't exist or has already been destroyed"),l=[]),o.length)throw new Error(`Unable to create the animation due to the following errors: ${o.join("\n")}`);h.forEach((b,x)=>{Object.keys(b).forEach(S=>{b[S]=this._driver.computeStyle(x,S,Zp)})});const _=yv(l.map(b=>{const x=h.get(b.element);return this._buildPlayer(b,{},x)}));return this._playersById[e]=_,_.onDestroy(()=>this.destroy(e)),this.players.push(_),_}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const s=this.players.indexOf(t);s>=0&&this.players.splice(s,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,s,o){const a=yO(t,"","","");return vO(this._getPlayer(e),s,a,o),()=>{}}command(e,t,s,o){if("register"==s)return void this.register(e,o[0]);if("create"==s)return void this.create(e,t,o[0]||{});const a=this._getPlayer(e);switch(s){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(e)}}}const N3="ng-animate-queued",OO="ng-animate-disabled",k5=[],B3={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},O5={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Nu="__ng_removed";class FO{constructor(e,t=""){this.namespaceId=t;const s=e&&e.hasOwnProperty("value");if(this.value=function B5(i){return null!=i?i:null}(s?e.value:e),s){const a=ox(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const s=this.options.params;Object.keys(t).forEach(o=>{null==s[o]&&(s[o]=t[o])})}}}const rE="void",LO=new FO(rE);class F5{constructor(e,t,s){this.id=e,this.hostElement=t,this._engine=s,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Bu(t,this._hostClassName)}listen(e,t,s,o){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${s}" because the animation trigger "${t}" doesn't exist!`);if(null==s||0==s.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function V5(i){return"start"==i||"done"==i}(s))throw new Error(`The provided animation trigger event "${s}" for the animation trigger "${t}" is not supported!`);const a=wc(this._elementListeners,e,[]),l={name:t,phase:s,callback:o};a.push(l);const h=wc(this._engine.statesByElement,e,{});return h.hasOwnProperty(t)||(Bu(e,rI),Bu(e,rI+"-"+t),h[t]=LO),()=>{this._engine.afterFlush(()=>{const g=a.indexOf(l);g>=0&&a.splice(g,1),this._triggers[t]||delete h[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,s,o=!0){const a=this._getTrigger(t),l=new NO(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(Bu(e,rI),Bu(e,rI+"-"+t),this._engine.statesByElement.set(e,h={}));let g=h[t];const _=new FO(s,this.id);if(!(s&&s.hasOwnProperty("value"))&&g&&_.absorbOptions(g.options),h[t]=_,g||(g=LO),_.value!==rE&&g.value===_.value){if(!function H5(i,e){const t=Object.keys(i),s=Object.keys(e);if(t.length!=s.length)return!1;for(let o=0;o<t.length;o++){const a=t[o];if(!e.hasOwnProperty(a)||i[a]!==e[a])return!1}return!0}(g.params,_.params)){const I=[],L=a.matchStyles(g.value,g.params,I),k=a.matchStyles(_.value,_.params,I);I.length?this._engine.reportError(I):this._engine.afterFlush(()=>{p0(e,L),uf(e,k)})}return}const S=wc(this._engine.playersByElement,e,[]);S.forEach(I=>{I.namespaceId==this.id&&I.triggerName==t&&I.queued&&I.destroy()});let M=a.matchTransition(g.value,_.value,e,_.params),T=!1;if(!M){if(!o)return;M=a.fallbackTransition,T=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:M,fromState:g,toState:_,player:l,isFallbackTransition:T}),T||(Bu(e,N3),l.onStart(()=>{ax(e,N3)})),l.onDone(()=>{let I=this.players.indexOf(l);I>=0&&this.players.splice(I,1);const L=this._engine.playersByElement.get(e);if(L){let k=L.indexOf(l);k>=0&&L.splice(k,1)}}),this.players.push(l),S.push(l),l}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,s)=>{delete t[e]}),this._elementListeners.forEach((t,s)=>{this._elementListeners.set(s,t.filter(o=>o.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(s=>s.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const s=this._engine.driver.query(e,sI,!0);s.forEach(o=>{if(o[Nu])return;const a=this._engine.fetchNamespacesByElement(o);a.size?a.forEach(l=>l.triggerLeaveAnimation(o,t,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>s.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(e,t,s,o){const a=this._engine.statesByElement.get(e),l=new Map;if(a){const h=[];if(Object.keys(a).forEach(g=>{if(l.set(g,a[g].value),this._triggers[g]){const _=this.trigger(e,g,rE,o);_&&h.push(_)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),s&&yv(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),s=this._engine.statesByElement.get(e);if(t&&s){const o=new Set;t.forEach(a=>{const l=a.name;if(o.has(l))return;o.add(l);const g=this._triggers[l].fallbackTransition,_=s[l]||LO,b=new FO(rE),x=new NO(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:g,fromState:_,toState:b,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const s=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let o=!1;if(s.totalAnimations){const a=s.players.length?s.playersByQueriedElement.get(e):[];if(a&&a.length)o=!0;else{let l=e;for(;l=l.parentNode;)if(s.statesByElement.get(l)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(e),o)s.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Nu];(!a||a===B3)&&(s.afterFlush(()=>this.clearElementCache(e)),s.destroyInnerAnimations(e),s._onRemovalComplete(e,t))}}insertNode(e,t){Bu(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(s=>{const o=s.player;if(o.destroyed)return;const a=s.element,l=this._elementListeners.get(a);l&&l.forEach(h=>{if(h.name==s.triggerName){const g=yO(a,s.triggerName,s.fromState.value,s.toState.value);g._data=e,vO(s.player,h.phase,g,h.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):t.push(s)}),this._queue=[],t.sort((s,o)=>{const a=s.transition.ast.depCount,l=o.transition.ast.depCount;return 0==a||0==l?a-l:this._engine.driver.containsElement(s.element,o.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(s=>s.element===e)||t,t}}class L5{constructor(e,t,s){this.bodyNode=e,this.driver=t,this._normalizer=s,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(s=>{s.queued&&e.push(s)})}),e}createNamespace(e,t){const s=new F5(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(s,t):(this.newHostElements.set(t,s),this.collectEnterElement(t)),this._namespaceLookup[e]=s}_balanceNamespaceList(e,t){const s=this._namespaceList.length-1;if(s>=0){let o=!1;for(let a=s;a>=0;a--)if(this.driver.containsElement(this._namespaceList[a].hostElement,t)){this._namespaceList.splice(a+1,0,e),o=!0;break}o||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let s=this._namespaceLookup[e];return s||(s=this.createNamespace(e,t)),s}registerTrigger(e,t,s){let o=this._namespaceLookup[e];o&&o.register(t,s)&&this.totalAnimations++}destroy(e,t){if(!e)return;const s=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(s.hostElement),delete this._namespaceLookup[e];const o=this._namespaceList.indexOf(s);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>s.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,s=this.statesByElement.get(e);if(s){const o=Object.keys(s);for(let a=0;a<o.length;a++){const l=s[o[a]].namespaceId;if(l){const h=this._fetchNamespace(l);h&&t.add(h)}}}return t}trigger(e,t,s,o){if(mI(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,s,o),!0}return!1}insertNode(e,t,s,o){if(!mI(t))return;const a=t[Nu];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,s)}o&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Bu(e,OO)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),ax(e,OO))}removeNode(e,t,s,o){if(mI(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,o):this.markElementAsRemoved(e,t,!1,o),s){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,o)}}else this._onRemovalComplete(t,o)}markElementAsRemoved(e,t,s,o,a){this.collectedLeaveElements.push(t),t[Nu]={namespaceId:e,setForRemoval:o,hasAnimation:s,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,s,o,a){return mI(t)?this._fetchNamespace(e).listen(t,s,o,a):()=>{}}_buildInstruction(e,t,s,o,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,s,o,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,sI,!0);t.forEach(s=>this.destroyActiveAnimationsForElement(s)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,CO,!0),t.forEach(s=>this.finishActiveQueriedAnimationOnElement(s)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(s=>{s.queued?s.markedForDestroy=!0:s.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(s=>s.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return yv(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const s=e[Nu];if(s&&s.setForRemoval){if(e[Nu]=B3,s.namespaceId){this.destroyInnerAnimations(e);const o=this._fetchNamespace(s.namespaceId);o&&o.clearElementCache(e)}this._onRemovalComplete(e,s.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(OO))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(o=>{this.markElementAsDisabled(o,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((s,o)=>this._balanceNamespaceList(s,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let s=0;s<this.collectedEnterElements.length;s++)Bu(this.collectedEnterElements[s],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const s=[];try{t=this._flushAnimations(s,e)}finally{for(let o=0;o<s.length;o++)s[o]()}}else for(let s=0;s<this.collectedLeaveElements.length;s++)this.processLeaveNode(this.collectedLeaveElements[s]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(s=>s()),this._flushFns=[],this._whenQuietFns.length){const s=this._whenQuietFns;this._whenQuietFns=[],t.length?yv(t).onDone(()=>{s.forEach(o=>o())}):s.forEach(o=>o())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const s=new fI,o=[],a=new Map,l=[],h=new Map,g=new Map,_=new Map,b=new Set;this.disabledNodes.forEach(ae=>{b.add(ae);const ye=this.driver.query(ae,".ng-animate-queued",!0);for(let Ae=0;Ae<ye.length;Ae++)b.add(ye[Ae])});const x=this.bodyNode,S=Array.from(this.statesByElement.keys()),M=G3(S,this.collectedEnterElements),T=new Map;let I=0;M.forEach((ae,ye)=>{const Ae=xO+I++;T.set(ye,Ae),ae.forEach(ht=>Bu(ht,Ae))});const L=[],k=new Set,R=new Set;for(let ae=0;ae<this.collectedLeaveElements.length;ae++){const ye=this.collectedLeaveElements[ae],Ae=ye[Nu];Ae&&Ae.setForRemoval&&(L.push(ye),k.add(ye),Ae.hasAnimation?this.driver.query(ye,".ng-star-inserted",!0).forEach(ht=>k.add(ht)):R.add(ye))}const U=new Map,N=G3(S,Array.from(k));N.forEach((ae,ye)=>{const Ae=iI+I++;U.set(ye,Ae),ae.forEach(ht=>Bu(ht,Ae))}),e.push(()=>{M.forEach((ae,ye)=>{const Ae=T.get(ye);ae.forEach(ht=>ax(ht,Ae))}),N.forEach((ae,ye)=>{const Ae=U.get(ye);ae.forEach(ht=>ax(ht,Ae))}),L.forEach(ae=>{this.processLeaveNode(ae)})});const j=[],K=[];for(let ae=this._namespaceList.length-1;ae>=0;ae--)this._namespaceList[ae].drainQueuedTransitions(t).forEach(Ae=>{const ht=Ae.player,Le=Ae.element;if(j.push(ht),this.collectedEnterElements.length){const Vt=Le[Nu];if(Vt&&Vt.setForMove){if(Vt.previousTriggersValues&&Vt.previousTriggersValues.has(Ae.triggerName)){const vn=Vt.previousTriggersValues.get(Ae.triggerName),Ft=this.statesByElement.get(Ae.element);Ft&&Ft[Ae.triggerName]&&(Ft[Ae.triggerName].value=vn)}return void ht.destroy()}}const Je=!x||!this.driver.containsElement(x,Le),mt=U.get(Le),Yt=T.get(Le),St=this._buildInstruction(Ae,s,Yt,mt,Je);if(St.errors&&St.errors.length)return void K.push(St);if(Je)return ht.onStart(()=>p0(Le,St.fromStyles)),ht.onDestroy(()=>uf(Le,St.toStyles)),void o.push(ht);if(Ae.isFallbackTransition)return ht.onStart(()=>p0(Le,St.fromStyles)),ht.onDestroy(()=>uf(Le,St.toStyles)),void o.push(ht);const ze=[];St.timelines.forEach(Vt=>{Vt.stretchStartingKeyframe=!0,this.disabledNodes.has(Vt.element)||ze.push(Vt)}),St.timelines=ze,s.append(Le,St.timelines),l.push({instruction:St,player:ht,element:Le}),St.queriedElements.forEach(Vt=>wc(h,Vt,[]).push(ht)),St.preStyleProps.forEach((Vt,vn)=>{const Ft=Object.keys(Vt);if(Ft.length){let kn=g.get(vn);kn||g.set(vn,kn=new Set),Ft.forEach(An=>kn.add(An))}}),St.postStyleProps.forEach((Vt,vn)=>{const Ft=Object.keys(Vt);let kn=_.get(vn);kn||_.set(vn,kn=new Set),Ft.forEach(An=>kn.add(An))})});if(K.length){const ae=[];K.forEach(ye=>{ae.push(`@${ye.triggerName} has failed due to:\n`),ye.errors.forEach(Ae=>ae.push(`- ${Ae}\n`))}),j.forEach(ye=>ye.destroy()),this.reportError(ae)}const ne=new Map,de=new Map;l.forEach(ae=>{const ye=ae.element;s.has(ye)&&(de.set(ye,ye),this._beforeAnimationBuild(ae.player.namespaceId,ae.instruction,ne))}),o.forEach(ae=>{const ye=ae.element;this._getPreviousPlayers(ye,!1,ae.namespaceId,ae.triggerName,null).forEach(ht=>{wc(ne,ye,[]).push(ht),ht.destroy()})});const Re=L.filter(ae=>z3(ae,g,_)),xe=new Map;U3(xe,this.driver,R,_,Zp).forEach(ae=>{z3(ae,g,_)&&Re.push(ae)});const ce=new Map;M.forEach((ae,ye)=>{U3(ce,this.driver,new Set(ae),g,"!")}),Re.forEach(ae=>{const ye=xe.get(ae),Ae=ce.get(ae);xe.set(ae,Object.assign(Object.assign({},ye),Ae))});const be=[],De=[],Ie={};l.forEach(ae=>{const{element:ye,player:Ae,instruction:ht}=ae;if(s.has(ye)){if(b.has(ye))return Ae.onDestroy(()=>uf(ye,ht.toStyles)),Ae.disabled=!0,Ae.overrideTotalTime(ht.totalTime),void o.push(Ae);let Le=Ie;if(de.size>1){let mt=ye;const Yt=[];for(;mt=mt.parentNode;){const St=de.get(mt);if(St){Le=St;break}Yt.push(mt)}Yt.forEach(St=>de.set(St,Le))}const Je=this._buildAnimation(Ae.namespaceId,ht,ne,a,ce,xe);if(Ae.setRealPlayer(Je),Le===Ie)be.push(Ae);else{const mt=this.playersByElement.get(Le);mt&&mt.length&&(Ae.parentPlayer=yv(mt)),o.push(Ae)}}else p0(ye,ht.fromStyles),Ae.onDestroy(()=>uf(ye,ht.toStyles)),De.push(Ae),b.has(ye)&&o.push(Ae)}),De.forEach(ae=>{const ye=a.get(ae.element);if(ye&&ye.length){const Ae=yv(ye);ae.setRealPlayer(Ae)}}),o.forEach(ae=>{ae.parentPlayer?ae.syncPlayerEvents(ae.parentPlayer):ae.destroy()});for(let ae=0;ae<L.length;ae++){const ye=L[ae],Ae=ye[Nu];if(ax(ye,iI),Ae&&Ae.hasAnimation)continue;let ht=[];if(h.size){let Je=h.get(ye);Je&&Je.length&&ht.push(...Je);let mt=this.driver.query(ye,CO,!0);for(let Yt=0;Yt<mt.length;Yt++){let St=h.get(mt[Yt]);St&&St.length&&ht.push(...St)}}const Le=ht.filter(Je=>!Je.destroyed);Le.length?U5(this,ye,Le):this.processLeaveNode(ye)}return L.length=0,be.forEach(ae=>{this.players.push(ae),ae.onDone(()=>{ae.destroy();const ye=this.players.indexOf(ae);this.players.splice(ye,1)}),ae.play()}),be}elementContainsData(e,t){let s=!1;const o=t[Nu];return o&&o.setForRemoval&&(s=!0),this.playersByElement.has(t)&&(s=!0),this.playersByQueriedElement.has(t)&&(s=!0),this.statesByElement.has(t)&&(s=!0),this._fetchNamespace(e).elementContainsData(t)||s}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,s,o,a){let l=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(l=h)}else{const h=this.playersByElement.get(e);if(h){const g=!a||a==rE;h.forEach(_=>{_.queued||!g&&_.triggerName!=o||l.push(_)})}}return(s||o)&&(l=l.filter(h=>!(s&&s!=h.namespaceId||o&&o!=h.triggerName))),l}_beforeAnimationBuild(e,t,s){const a=t.element,l=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const g of t.timelines){const _=g.element,b=_!==a,x=wc(s,_,[]);this._getPreviousPlayers(_,b,l,h,t.toState).forEach(M=>{const T=M.getRealPlayer();T.beforeDestroy&&T.beforeDestroy(),M.destroy(),x.push(M)})}p0(a,t.fromStyles)}_buildAnimation(e,t,s,o,a,l){const h=t.triggerName,g=t.element,_=[],b=new Set,x=new Set,S=t.timelines.map(T=>{const I=T.element;b.add(I);const L=I[Nu];if(L&&L.removedBeforeQueried)return new XM(T.duration,T.delay);const k=I!==g,R=function G5(i){const e=[];return H3(i,e),e}((s.get(I)||k5).map(ne=>ne.getRealPlayer())).filter(ne=>!!ne.element&&ne.element===I),U=a.get(I),N=l.get(I),j=g3(0,this._normalizer,0,T.keyframes,U,N),K=this._buildPlayer(T,j,R);if(T.subTimeline&&o&&x.add(I),k){const ne=new NO(e,h,I);ne.setRealPlayer(K),_.push(ne)}return K});_.forEach(T=>{wc(this.playersByQueriedElement,T.element,[]).push(T),T.onDone(()=>function N5(i,e,t){let s;if(i instanceof Map){if(s=i.get(e),s){if(s.length){const o=s.indexOf(t);s.splice(o,1)}0==s.length&&i.delete(e)}}else if(s=i[e],s){if(s.length){const o=s.indexOf(t);s.splice(o,1)}0==s.length&&delete i[e]}return s}(this.playersByQueriedElement,T.element,T))}),b.forEach(T=>Bu(T,S3));const M=yv(S);return M.onDestroy(()=>{b.forEach(T=>ax(T,S3)),uf(g,t.toStyles)}),x.forEach(T=>{wc(o,T,[]).push(M)}),M}_buildPlayer(e,t,s){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,s):new XM(e.duration,e.delay)}}class NO{constructor(e,t,s){this.namespaceId=e,this.triggerName=t,this.element=s,this._player=new XM,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(s=>vO(e,t,void 0,s))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){wc(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function mI(i){return i&&1===i.nodeType}function V3(i,e){const t=i.style.display;return i.style.display=null!=e?e:"none",t}function U3(i,e,t,s,o){const a=[];t.forEach(g=>a.push(V3(g)));const l=[];s.forEach((g,_)=>{const b={};g.forEach(x=>{const S=b[x]=e.computeStyle(_,x,o);(!S||0==S.length)&&(_[Nu]=O5,l.push(_))}),i.set(_,b)});let h=0;return t.forEach(g=>V3(g,a[h++])),l}function G3(i,e){const t=new Map;if(i.forEach(h=>t.set(h,[])),0==e.length)return t;const o=new Set(e),a=new Map;function l(h){if(!h)return 1;let g=a.get(h);if(g)return g;const _=h.parentNode;return g=t.has(_)?_:o.has(_)?1:l(_),a.set(h,g),g}return e.forEach(h=>{const g=l(h);1!==g&&t.get(g).push(h)}),t}function Bu(i,e){var t;null===(t=i.classList)||void 0===t||t.add(e)}function ax(i,e){var t;null===(t=i.classList)||void 0===t||t.remove(e)}function U5(i,e,t){yv(t).onDone(()=>i.processLeaveNode(e))}function H3(i,e){for(let t=0;t<i.length;t++){const s=i[t];s instanceof H2?H3(s.players,e):e.push(s)}}function z3(i,e,t){const s=t.get(i);if(!s)return!1;let o=e.get(i);return o?s.forEach(a=>o.add(a)):e.set(i,s),t.delete(i),!0}class vI{constructor(e,t,s){this.bodyNode=e,this._driver=t,this._normalizer=s,this._triggerCache={},this.onRemovalComplete=(o,a)=>{},this._transitionEngine=new L5(e,t,s),this._timelineEngine=new A5(e,t,s),this._transitionEngine.onRemovalComplete=(o,a)=>this.onRemovalComplete(o,a)}registerTrigger(e,t,s,o,a){const l=e+"-"+o;let h=this._triggerCache[l];if(!h){const g=[],_=DO(this._driver,a,g);if(g.length)throw new Error(`The animation trigger "${o}" has failed to build due to the following errors:\n - ${g.join("\n - ")}`);h=function S5(i,e,t){return new M5(i,e,t)}(o,_,this._normalizer),this._triggerCache[l]=h}this._transitionEngine.registerTrigger(t,o,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,s,o){this._transitionEngine.insertNode(e,t,s,o)}onRemove(e,t,s,o){this._transitionEngine.removeNode(e,t,o||!1,s)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,s,o){if("@"==s.charAt(0)){const[a,l]=m3(s);this._timelineEngine.command(a,t,l,o)}else this._transitionEngine.trigger(e,t,s,o)}listen(e,t,s,o,a){if("@"==s.charAt(0)){const[l,h]=m3(s);return this._timelineEngine.listen(l,t,h,a)}return this._transitionEngine.listen(e,t,s,o,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let j5=(()=>{class i{constructor(t,s,o){this._element=t,this._startStyles=s,this._endStyles=o,this._state=0;let a=i.initialStylesByElement.get(t);a||i.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&uf(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(uf(this._element,this._initialStyles),this._endStyles&&(uf(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(p0(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(p0(this._element,this._endStyles),this._endStyles=null),uf(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function BO(i){let e=null;const t=Object.keys(i);for(let s=0;s<t.length;s++){const o=t[s];W5(o)&&(e=e||{},e[o]=i[o])}return e}function W5(i){return"display"===i||"position"===i}class j3{constructor(e,t,s,o){this.element=e,this.keyframes=t,this.options=s,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=s.duration,this._delay=s.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,s){return e.animate(t,s)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(s=>{"offset"!=s&&(e[s]=this._finished?t[s]:T3(this.element,s))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(s=>s()),t.length=0}}class q5{validateStyleProperty(e){return y3(e)}matchesElement(e,t){return!1}containsElement(e,t){return b3(e,t)}query(e,t,s){return w3(e,t,s)}computeStyle(e,t,s){return window.getComputedStyle(e)[t]}animate(e,t,s,o,a,l=[]){const g={duration:s,delay:o,fill:0==o?"both":"forwards"};a&&(g.easing=a);const _={},b=l.filter(S=>S instanceof j3);(function Qj(i,e){return 0===i||0===e})(s,o)&&b.forEach(S=>{let M=S.currentSnapshot;Object.keys(M).forEach(T=>_[T]=M[T])}),t=function Xj(i,e,t){const s=Object.keys(t);if(s.length&&e.length){let a=e[0],l=[];if(s.forEach(h=>{a.hasOwnProperty(h)||l.push(h),a[h]=t[h]}),l.length)for(var o=1;o<e.length;o++){let h=e[o];l.forEach(function(g){h[g]=T3(i,g)})}}return e}(e,t=t.map(S=>bv(S,!1)),_);const x=function z5(i,e){let t=null,s=null;return Array.isArray(e)&&e.length?(t=BO(e[0]),e.length>1&&(s=BO(e[e.length-1]))):e&&(t=BO(e)),t||s?new j5(i,t,s):null}(e,t);return new j3(e,t,g,x)}}let Y5=(()=>{class i extends V2{constructor(t,s){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(s.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const s=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(t)?U2(t):t;return W3(this._renderer,null,s,"register",[o]),new $5(s,this._renderer)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(u.FYo),u.LFG(_e))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class $5 extends class U6{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Z5(this._id,e,t||{},this._renderer)}}class Z5{constructor(e,t,s,o){this.id=e,this.element=t,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",s)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return W3(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function W3(i,e,t,s,o){return i.setProperty(e,`@@${t}:${s}`,o)}const q3="@.disabled";let K5=(()=>{class i{constructor(t,s,o){this.delegate=t,this.engine=s,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),s.onRemovalComplete=(a,l)=>{const h=null==l?void 0:l.parentNode(a);h&&l.removeChild(h,a)}}createRenderer(t,s){const a=this.delegate.createRenderer(t,s);if(!(t&&s&&s.data&&s.data.animation)){let b=this._rendererCache.get(a);return b||(b=new Y3("",a,this.engine),this._rendererCache.set(a,b)),b}const l=s.id,h=s.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const g=b=>{Array.isArray(b)?b.forEach(g):this.engine.registerTrigger(l,h,t,b.name,b)};return s.data.animation.forEach(g),new J5(this,h,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,s,o){t>=0&&t<this._microtaskId?this._zone.run(()=>s(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[l,h]=a;l(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([s,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(u.FYo),u.LFG(vI),u.LFG(u.R0b))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class Y3{constructor(e,t,s){this.namespaceId=e,this.delegate=t,this.engine=s,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,s,o=!0){this.delegate.insertBefore(e,t,s),this.engine.onInsert(this.namespaceId,t,e,o)}removeChild(e,t,s){this.engine.onRemove(this.namespaceId,t,this.delegate,s)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,s,o){this.delegate.setAttribute(e,t,s,o)}removeAttribute(e,t,s){this.delegate.removeAttribute(e,t,s)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,s,o){this.delegate.setStyle(e,t,s,o)}removeStyle(e,t,s){this.delegate.removeStyle(e,t,s)}setProperty(e,t,s){"@"==t.charAt(0)&&t==q3?this.disableAnimations(e,!!s):this.delegate.setProperty(e,t,s)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,s){return this.delegate.listen(e,t,s)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class J5 extends Y3{constructor(e,t,s,o){super(t,s,o),this.factory=e,this.namespaceId=t}setProperty(e,t,s){"@"==t.charAt(0)?"."==t.charAt(1)&&t==q3?this.disableAnimations(e,s=void 0===s||!!s):this.engine.process(this.namespaceId,e,t.substr(1),s):this.delegate.setProperty(e,t,s)}listen(e,t,s){if("@"==t.charAt(0)){const o=function Q5(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(e);let a=t.substr(1),l="";return"@"!=a.charAt(0)&&([a,l]=function X5(i){const e=i.indexOf(".");return[i.substring(0,e),i.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,o,a,l,h=>{this.factory.scheduleListenerCallback(h._data||-1,s,h)})}return this.delegate.listen(e,t,s)}}let eW=(()=>{class i extends vI{constructor(t,s,o){super(t.body,s,o)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_e),u.LFG(wO),u.LFG(PO))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const Yd=new u.OlP("AnimationModuleType"),$3=[{provide:V2,useClass:Y5},{provide:PO,useFactory:function tW(){return new y5}},{provide:vI,useClass:eW},{provide:u.FYo,useFactory:function nW(i,e,t){return new K5(i,e,t)},deps:[Ji,vI,u.R0b]}],Z3=[{provide:wO,useFactory:()=>new q5},{provide:Yd,useValue:"BrowserAnimations"},...$3],iW=[{provide:wO,useClass:x3},{provide:Yd,useValue:"NoopAnimations"},...$3];let K3=(()=>{class i{static withConfig(t){return{ngModule:i,providers:t.disableAnimations?iW:Z3}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:Z3,imports:[Fc]}),i})();const sW=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function rW(){return!0}});let Ci=(()=>{class i{constructor(t,s,o){this._sanityChecks=s,this._document=o,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!cO()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(f3),u.LFG(sW,8),u.LFG(_e))},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[tx],tx]}),i})();function Q3(i){return class extends i{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=wi(e)}}}function sE(i,e){return class extends i{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const s=t||this.defaultColor;s!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),s&&this._elementRef.nativeElement.classList.add(`mat-${s}`),this._color=s)}}}function X3(i){return class extends i{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=wi(e)}}}function eB(i,e=0){return class extends i{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?eI(t):this.defaultTabIndex}}}function oW(i){return class extends i{constructor(...e){super(...e),this.stateChanges=new yt.x,this.errorState=!1}updateErrorState(){const e=this.errorState,a=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);a!==e&&(this.errorState=a,this.stateChanges.next())}}}const aW=new u.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function lW(){return(0,u.f3M)(u.soG)}});class df{constructor(){this._localeChanges=new yt.x,this.localeChanges=this._localeChanges}getValidDateOrNull(e){return this.isDateInstance(e)&&this.isValid(e)?e:null}deserialize(e){return null==e||this.isDateInstance(e)&&this.isValid(e)?e:this.invalid()}setLocale(e){this.locale=e,this._localeChanges.next()}compareDate(e,t){return this.getYear(e)-this.getYear(t)||this.getMonth(e)-this.getMonth(t)||this.getDate(e)-this.getDate(t)}sameDate(e,t){if(e&&t){let s=this.isValid(e),o=this.isValid(t);return s&&o?!this.compareDate(e,t):s==o}return e==t}clampDate(e,t,s){return t&&this.compareDate(e,t)<0?t:s&&this.compareDate(e,s)>0?s:e}}const VO=new u.OlP("mat-date-formats"),cW=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function UO(i,e){const t=Array(i);for(let s=0;s<i;s++)t[s]=e(s);return t}let uW=(()=>{class i extends df{constructor(t,s){super(),this.useUtcForDisplay=!1,super.setLocale(t)}getYear(t){return t.getFullYear()}getMonth(t){return t.getMonth()}getDate(t){return t.getDate()}getDayOfWeek(t){return t.getDay()}getMonthNames(t){const s=new Intl.DateTimeFormat(this.locale,{month:t,timeZone:"utc"});return UO(12,o=>this._format(s,new Date(2017,o,1)))}getDateNames(){const t=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return UO(31,s=>this._format(t,new Date(2017,0,s+1)))}getDayOfWeekNames(t){const s=new Intl.DateTimeFormat(this.locale,{weekday:t,timeZone:"utc"});return UO(7,o=>this._format(s,new Date(2017,0,o+1)))}getYearName(t){const s=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(s,t)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(t){return this.getDate(this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+1,0))}clone(t){return new Date(t.getTime())}createDate(t,s,o){let a=this._createDateWithOverflow(t,s,o);return a.getMonth(),a}today(){return new Date}parse(t){return"number"==typeof t?new Date(t):t?new Date(Date.parse(t)):null}format(t,s){if(!this.isValid(t))throw Error("NativeDateAdapter: Cannot format invalid date.");const o=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},s),{timeZone:"utc"}));return this._format(o,t)}addCalendarYears(t,s){return this.addCalendarMonths(t,12*s)}addCalendarMonths(t,s){let o=this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+s,this.getDate(t));return this.getMonth(o)!=((this.getMonth(t)+s)%12+12)%12&&(o=this._createDateWithOverflow(this.getYear(o),this.getMonth(o),0)),o}addCalendarDays(t,s){return this._createDateWithOverflow(this.getYear(t),this.getMonth(t),this.getDate(t)+s)}toIso8601(t){return[t.getUTCFullYear(),this._2digit(t.getUTCMonth()+1),this._2digit(t.getUTCDate())].join("-")}deserialize(t){if("string"==typeof t){if(!t)return null;if(cW.test(t)){let s=new Date(t);if(this.isValid(s))return s}}return super.deserialize(t)}isDateInstance(t){return t instanceof Date}isValid(t){return!isNaN(t.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(t,s,o){const a=new Date;return a.setFullYear(t,s,o),a.setHours(0,0,0,0),a}_2digit(t){return("00"+t).slice(-2)}_format(t,s){const o=new Date;return o.setUTCFullYear(s.getFullYear(),s.getMonth(),s.getDate()),o.setUTCHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),t.format(o)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(aW,8),u.LFG(Mo))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const dW={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let hW=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[{provide:df,useClass:uW}],imports:[[nx]]}),i})(),tB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[{provide:VO,useValue:dW}],imports:[[hW]]}),i})(),nB=(()=>{class i{isErrorState(t,s){return!!(t&&t.invalid&&(t.touched||s&&s.submitted))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class fW{constructor(e,t,s){this._renderer=e,this.element=t,this.config=s,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const iB={enterDuration:225,exitDuration:150},GO=Qp({passive:!0}),rB=["mousedown","touchstart"],sB=["mouseup","mouseleave","touchend","touchcancel"];class gW{constructor(e,t,s,o){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,o.isBrowser&&(this._containerElement=Fs(s))}fadeInRipple(e,t,s={}){const o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a=Object.assign(Object.assign({},iB),s.animation);s.centered&&(e=o.left+o.width/2,t=o.top+o.height/2);const l=s.radius||function vW(i,e,t){const s=Math.max(Math.abs(i-t.left),Math.abs(i-t.right)),o=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(s*s+o*o)}(e,t,o),h=e-o.left,g=t-o.top,_=a.enterDuration,b=document.createElement("div");b.classList.add("mat-ripple-element"),b.style.left=h-l+"px",b.style.top=g-l+"px",b.style.height=2*l+"px",b.style.width=2*l+"px",null!=s.color&&(b.style.backgroundColor=s.color),b.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(b),function mW(i){window.getComputedStyle(i).getPropertyValue("opacity")}(b),b.style.transform="scale(1)";const x=new fW(this,b,s);return x.state=0,this._activeRipples.add(x),s.persistent||(this._mostRecentTransientRipple=x),this._runTimeoutOutsideZone(()=>{const S=x===this._mostRecentTransientRipple;x.state=1,!s.persistent&&(!S||!this._isPointerDown)&&x.fadeOut()},_),x}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const s=e.element,o=Object.assign(Object.assign({},iB),e.config.animation);s.style.transitionDuration=`${o.exitDuration}ms`,s.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,s.remove()},o.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Fs(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(rB))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(sB),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=fO(e),s=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!s&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!pO(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let s=0;s<t.length;s++)this.fadeInRipple(t[s].clientX,t[s].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,GO)})})}_removeTriggerEvents(){this._triggerElement&&(rB.forEach(e=>{this._triggerElement.removeEventListener(e,this,GO)}),this._pointerUpEventsRegistered&&sB.forEach(e=>{this._triggerElement.removeEventListener(e,this,GO)}))}}const _W=new u.OlP("mat-ripple-global-options");let yI=(()=>{class i{constructor(t,s,o,a,l){this._elementRef=t,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new gW(this,s,t,o)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,s=0,o){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,s,Object.assign(Object.assign({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(Mo),u.Y36(_W,8),u.Y36(Yd,8))},i.\u0275dir=u.lG2({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,s){2&t&&u.ekj("mat-ripple-unbounded",s.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),bI=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Ci,nx],Ci]}),i})(),yW=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Ci]]}),i})(),oB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[bI,Io,Ci,yW]]}),i})();const bW=["*",[["mat-toolbar-row"]]],wW=["*","mat-toolbar-row"],xW=sE(class{constructor(i){this._elementRef=i}});let CW=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=u.lG2({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),i})(),SW=(()=>{class i extends xW{constructor(t,s,o){super(t),this._platform=s,this._document=o}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.SBq),u.Y36(Mo),u.Y36(_e))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-toolbar"]],contentQueries:function(t,s,o){if(1&t&&u.Suo(o,CW,5),2&t){let a;u.iGM(a=u.CRH())&&(s._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,s){2&t&&u.ekj("mat-toolbar-multiple-rows",s._toolbarRows.length>0)("mat-toolbar-single-row",0===s._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[u.qOj],ngContentSelectors:wW,decls:2,vars:0,template:function(t,s){1&t&&(u.F$t(bW),u.Hsn(0),u.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),aB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Ci],Ci]}),i})();const lB=["mat-button",""],cB=["*"],DW=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],AW=sE(Q3(X3(class{constructor(i){this._elementRef=i}})));let wI=(()=>{class i extends AW{constructor(t,s,o){super(t),this._focusMonitor=s,this._animationMode=o,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const a of DW)this._hasHostAttributes(a)&&this._getHostElement().classList.add(a);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,s){t?this._focusMonitor.focusVia(this._getHostElement(),t,s):this._getHostElement().focus(s)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(s=>this._getHostElement().hasAttribute(s))}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.SBq),u.Y36(sx),u.Y36(Yd,8))},i.\u0275cmp=u.Xpm({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,s){if(1&t&&u.Gf(yI,5),2&t){let o;u.iGM(o=u.CRH())&&(s.ripple=o.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,s){2&t&&(u.uIk("disabled",s.disabled||null),u.ekj("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-button-disabled",s.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[u.qOj],attrs:lB,ngContentSelectors:cB,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,s){1&t&&(u.F$t(),u.TgZ(0,"span",0),u.Hsn(1),u.qZA(),u._UZ(2,"span",1),u._UZ(3,"span",2)),2&t&&(u.xp6(2),u.ekj("mat-button-ripple-round",s.isRoundButton||s.isIconButton),u.Q6J("matRippleDisabled",s._isRippleDisabled())("matRippleCentered",s.isIconButton)("matRippleTrigger",s._getHostElement()))},directives:[yI],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),i})(),aE=(()=>{class i extends wI{constructor(t,s,o,a){super(s,t,o),this._ngZone=a,this._haltDisabledEvents=l=>{this.disabled&&(l.preventDefault(),l.stopImmediatePropagation())}}ngAfterViewInit(){super.ngAfterViewInit(),this._ngZone?this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}):this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(sx),u.Y36(u.SBq),u.Y36(Yd,8),u.Y36(u.R0b,8))},i.\u0275cmp=u.Xpm({type:i,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(t,s){2&t&&(u.uIk("tabindex",s.disabled?-1:s.tabIndex||0)("disabled",s.disabled||null)("aria-disabled",s.disabled.toString()),u.ekj("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-button-disabled",s.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[u.qOj],attrs:lB,ngContentSelectors:cB,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,s){1&t&&(u.F$t(),u.TgZ(0,"span",0),u.Hsn(1),u.qZA(),u._UZ(2,"span",1),u._UZ(3,"span",2)),2&t&&(u.xp6(2),u.ekj("mat-button-ripple-round",s.isRoundButton||s.isIconButton),u.Q6J("matRippleDisabled",s._isRippleDisabled())("matRippleCentered",s.isIconButton)("matRippleTrigger",s._getHostElement()))},directives:[yI],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),i})(),lE=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[bI,Ci],Ci]}),i})();const IW={provide:u.tb,useFactory:function TW(i,e){return()=>{if(sr(e)){const t=Array.from(i.querySelectorAll(`[class*=${uB}]`)),s=/\bflex-layout-.+?\b/g;t.forEach(o=>{o.classList.contains(`${uB}ssr`)&&o.parentNode?o.parentNode.removeChild(o):o.className.replace(s,"")})}}},deps:[_e,u.Lbi],multi:!0},uB="flex-layout-";let HO=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[IW]}),i})();class m0{constructor(e=!1,t="all",s="",o="",a=0){this.matches=e,this.mediaQuery=t,this.mqAlias=s,this.suffix=o,this.priority=a,this.property=""}clone(){return new m0(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let dB=(()=>{class i{constructor(){this.stylesheet=new Map}addStyleToElement(t,s,o){const a=this.stylesheet.get(t);a?a.set(s,o):this.stylesheet.set(t,new Map([[s,o]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,s){const o=this.stylesheet.get(t);let a="";if(o){const l=o.get(s);("number"==typeof l||"string"==typeof l)&&(a=l+"")}return a}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=(0,u.Yz7)({factory:function(){return new i},token:i,providedIn:"root"}),i})();const zO={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},$d=new u.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>zO}),v0=new u.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),jO=new u.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function hB(i,e){return i=i?i.clone():new m0,e&&(i.mqAlias=e.alias,i.mediaQuery=e.mediaQuery,i.suffix=e.suffix,i.priority=e.priority),i}const WO="inline",fB=["row","column","row-reverse","column-reverse"];function kW(i){if(i)switch(i.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":i="wrap-reverse";break;case"no":case"none":case"nowrap":i="nowrap";break;default:i="wrap"}return i}let ts=(()=>{class i{constructor(t,s,o,a){this.elementRef=t,this.styleBuilder=s,this.styler=o,this.marshal=a,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new yt.x,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(s=>{if(-1!==this.inputs.indexOf(s)){const o=s.split(".").slice(1).join(".");this.setValue(t[s].currentValue,o)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,s){const o=this.styleBuilder,a=o.shouldCache;let l=this.styleCache.get(t);(!l||!a)&&(l=o.buildStyles(t,s),a&&this.styleCache.set(t,l)),this.mru=Object.assign({},l),this.applyStyleToElement(l),o.sideEffect(t,l,s)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={}}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,s=!1){if(t){const[o,a]=this.styler.getFlowDirection(t);if(!a&&s){const l=function RW(i){let[e,t,s]=function PW(i){i=i?i.toLowerCase():"";let[e,t,s]=i.split(" ");return fB.find(o=>o===e)||(e=fB[0]),t===WO&&(t=s!==WO?s:"",s=WO),[e,kW(t),!!s]}(i);return function OW(i,e=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":i,"flex-wrap":e||null}}(e,t,s)}(o);this.styler.applyStyleToElements(l,[t])}return o.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,s,o=this.nativeElement){this.styler.applyStyleToElement(o,t,s)}setValue(t,s){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,s)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return i.\u0275fac=function(t){u.$Z()},i.\u0275dir=u.lG2({type:i,features:[u.TTD]}),i})();const FW=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],pB="(orientation: portrait) and (max-width: 599.98px)",gB="(orientation: landscape) and (max-width: 959.98px)",mB="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",vB="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",_B="(orientation: portrait) and (min-width: 840px)",yB="(orientation: landscape) and (min-width: 1280px)",Xp={HANDSET:`${pB}, ${gB}`,TABLET:`${mB} , ${vB}`,WEB:`${_B}, ${yB} `,HANDSET_PORTRAIT:`${pB}`,TABLET_PORTRAIT:`${mB} `,WEB_PORTRAIT:`${_B}`,HANDSET_LANDSCAPE:`${gB}`,TABLET_LANDSCAPE:`${vB}`,WEB_LANDSCAPE:`${yB}`},LW=[{alias:"handset",priority:2e3,mediaQuery:Xp.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:Xp.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:Xp.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:Xp.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:Xp.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:Xp.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:Xp.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:Xp.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:Xp.WEB_PORTRAIT,overlapping:!0}],BW=/(\.|-|_)/g;function VW(i){let e=i.length>0?i.charAt(0):"",t=i.length>1?i.slice(1):"";return e.toUpperCase()+t}function HW(i,e=[]){const t={};return i.forEach(s=>{t[s.alias]=s}),e.forEach(s=>{t[s.alias]?function NW(i,...e){if(null==i)throw TypeError("Cannot convert undefined or null to object");for(let t of e)if(null!=t)for(let s in t)t.hasOwnProperty(s)&&(i[s]=t[s])}(t[s.alias],s):t[s.alias]=s}),function GW(i){return i.forEach(e=>{e.suffix||(e.suffix=function UW(i){return i.replace(BW,"|").split("|").map(VW).join("")}(e.alias),e.overlapping=!!e.overlapping)}),i}(Object.keys(t).map(s=>t[s]))}const bB=new u.OlP("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const i=(0,u.f3M)(jO),e=(0,u.f3M)($d),t=[].concat.apply([],(i||[]).map(o=>Array.isArray(o)?o:[o]));return HW((e.disableDefaultBps?[]:FW).concat(e.addOrientationBps?LW:[]),t)}});function cE(i,e){return(e&&e.priority||0)-(i&&i.priority||0)}function zW(i,e){return(i.priority||0)-(e.priority||0)}let uE=(()=>{class i{constructor(t){this.findByMap=new Map,this.items=[...t].sort(zW)}findByAlias(t){return t?this.findWithPredicate(t,s=>s.alias==t):null}findByQuery(t){return this.findWithPredicate(t,s=>s.mediaQuery==t)}get overlappings(){return this.items.filter(t=>1==t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>t.suffix?t.suffix:"")}findWithPredicate(t,s){let o=this.findByMap.get(t);return o||(o=this.items.find(s)||null,this.findByMap.set(t,o)),o||null}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(bB))},i.\u0275prov=(0,u.Yz7)({factory:function(){return new i((0,u.LFG)(bB))},token:i,providedIn:"root"}),i})(),xI=(()=>{class i{constructor(t,s,o){this._zone=t,this._platformId=s,this._document=o,this.source=new Ki(new m0(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((s,o)=>{s.matches&&t.push(o)}),t}isActive(t){const s=this.registry.get(t);return s?s.matches:this.registerQuery(t).some(o=>o.matches)}observe(t,s=!1){if(t&&t.length){const o=this._observable$.pipe(Dn(l=>!s||t.indexOf(l.mediaQuery)>-1)),a=new Ri.y(l=>{const h=this.registerQuery(t);if(h.length){const g=h.pop();h.forEach(_=>{l.next(_)}),this.source.next(g)}l.complete()});return(0,mc.T)(a,o)}return this._observable$}registerQuery(t){const s=Array.isArray(t)?t:[t],o=[];return function jW(i,e){const t=i.filter(s=>!wB[s]);if(t.length>0){const s=t.join(", ");try{const o=e.createElement("style");o.setAttribute("type","text/css"),o.styleSheet||o.appendChild(e.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${s} {.fx-query-test{ }}\n`)),e.head.appendChild(o),t.forEach(a=>wB[a]=o)}catch(o){console.error(o)}}}(s,this._document),s.forEach(a=>{const l=g=>{this._zone.run(()=>this.source.next(new m0(g.matches,a)))};let h=this.registry.get(a);h||(h=this.buildMQL(a),h.addListener(l),this.pendingRemoveListenerFns.push(()=>h.removeListener(l)),this.registry.set(a,h)),h.matches&&o.push(new m0(!0,a))}),o}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function WW(i,e){return e&&window.matchMedia("all").addListener?window.matchMedia(i):{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,sr(this._platformId))}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(u.R0b),u.LFG(u.Lbi),u.LFG(_e))},i.\u0275prov=(0,u.Yz7)({factory:function(){return new i((0,u.LFG)(u.R0b),(0,u.LFG)(u.Lbi),(0,u.LFG)(_e))},token:i,providedIn:"root"}),i})();const wB={},lx="print",$W={alias:lx,mediaQuery:lx,priority:1e3};let xB=(()=>{class i{constructor(t,s,o){this.breakpoints=t,this.layoutConfig=s,this._document=o,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.isPrinting=!1,this.queue=new ZW,this.deactivations=[]}withPrintQuery(t){return[...t,lx]}isPrintEvent(t){return t.mediaQuery.startsWith(lx)}get printAlias(){return this.layoutConfig.printWithBreakpoints||[]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const s=this.breakpoints.findByQuery(t);return(s?[...this.printBreakPoints,s]:this.printBreakPoints).sort(cE)}updateEvent(t){let s=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(s=this.getEventBreakpoints(t)[0],t.mediaQuery=s?s.mediaQuery:""),hB(t,s)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const s=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new m0(!0,lx))),t.updateStyles())},o=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",s),this._document.defaultView.addEventListener("afterprint",o),this.beforePrintEventListeners.push(s),this.afterPrintEventListeners.push(o)}interceptEvents(t){return this.registerBeforeAfterPrintHooks(t),s=>{this.isPrintEvent(s)?s.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(s)),t.updateStyles()):!s.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(s)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,s){this.isPrinting=!0,t.activatedBreakpoints=this.queue.addPrintBreakpoints(s)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.queue.clear(),this.isPrinting=!1}collectActivations(t){if(!this.isPrinting||this.isPrintingBeforeAfterEvent)if(t.matches)this.isPrintingBeforeAfterEvent||(this.deactivations=[]);else{const s=this.breakpoints.findByQuery(t.mediaQuery);s&&(this.deactivations.push(s),this.deactivations.sort(cE))}}ngOnDestroy(){this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t))}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(uE),u.LFG($d),u.LFG(_e))},i.\u0275prov=(0,u.Yz7)({factory:function(){return new i((0,u.LFG)(uE),(0,u.LFG)($d),(0,u.LFG)(_e))},token:i,providedIn:"root"}),i})();class ZW{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(e){return e.push($W),e.sort(cE),e.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(e){e&&void 0===this.printBreakpoints.find(s=>s.mediaQuery===e.mediaQuery)&&(this.printBreakpoints=function KW(i){return!!i&&i.mediaQuery.startsWith(lx)}(e)?[e,...this.printBreakpoints]:[...this.printBreakpoints,e])}clear(){this.printBreakpoints=[]}}function CB(i){for(let e in i){let t=i[e]||"";switch(e){case"display":i.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":i["-webkit-"+e]=t;break;case"flex-direction":t=t||"row",i["-webkit-flex-direction"]=t,i["flex-direction"]=t;break;case"order":i.order=i["-webkit-"+e]=isNaN(+t)?"0":t}}return i}let kr=(()=>{class i{constructor(t,s,o,a){this._serverStylesheet=t,this._serverModuleLoaded=s,this._platformId=o,this.layoutConfig=a}applyStyleToElement(t,s,o=null){let a={};"string"==typeof s&&(a[s]=o,s=a),a=this.layoutConfig.disableVendorPrefixes?s:CB(s),this._applyMultiValueStyleToElement(a,t)}applyStyleToElements(t,s=[]){const o=this.layoutConfig.disableVendorPrefixes?t:CB(t);s.forEach(a=>{this._applyMultiValueStyleToElement(o,a)})}getFlowDirection(t){const s="flex-direction";let o=this.lookupStyle(t,s);return[o||"row",this.lookupInlineStyle(t,s)||Gs(this._platformId)&&this._serverModuleLoaded?o:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,s){return t.getAttribute(s)||""}lookupInlineStyle(t,s){return sr(this._platformId)?t.style.getPropertyValue(s):this._getServerStyle(t,s)}lookupStyle(t,s,o=!1){let a="";return t&&((a=this.lookupInlineStyle(t,s))||(sr(this._platformId)?o||(a=getComputedStyle(t).getPropertyValue(s)):this._serverModuleLoaded&&(a=this._serverStylesheet.getStyleForElement(t,s)))),a?a.trim():""}_applyMultiValueStyleToElement(t,s){Object.keys(t).sort().forEach(o=>{const a=t[o],l=Array.isArray(a)?a:[a];l.sort();for(let h of l)h=h?h+"":"",sr(this._platformId)||!this._serverModuleLoaded?sr(this._platformId)?s.style.setProperty(o,h):this._setServerStyle(s,o,h):this._serverStylesheet.addStyleToElement(s,o,h)})}_setServerStyle(t,s,o){s=s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const a=this._readStyleAttribute(t);a[s]=o||"",this._writeStyleAttribute(t,a)}_getServerStyle(t,s){return this._readStyleAttribute(t)[s]||""}_readStyleAttribute(t){const s={},o=t.getAttribute("style");if(o){const a=o.split(/;+/g);for(let l=0;l<a.length;l++){const h=a[l].trim();if(h.length>0){const g=h.indexOf(":");if(-1===g)throw new Error(`Invalid CSS style: ${h}`);s[h.substr(0,g).trim()]=h.substr(g+1).trim()}}}return s}_writeStyleAttribute(t,s){let o="";for(const a in s)s[a]&&(o+=a+":"+s[a]+";");t.setAttribute("style",o)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(dB),u.LFG(v0),u.LFG(u.Lbi),u.LFG($d))},i.\u0275prov=(0,u.Yz7)({factory:function(){return new i((0,u.LFG)(dB),(0,u.LFG)(v0),(0,u.LFG)(u.Lbi),(0,u.LFG)($d))},token:i,providedIn:"root"}),i})();class Ls{constructor(){this.shouldCache=!0}sideEffect(e,t,s){}}let ns=(()=>{class i{constructor(t,s,o){this.matchMedia=t,this.breakpoints=s,this.hook=o,this.activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new yt.x,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?this.activatedBreakpoints[0].alias:""}onMediaChange(t){const s=this.findByQuery(t.mediaQuery);s&&((t=hB(t,s)).matches&&-1===this.activatedBreakpoints.indexOf(s)?(this.activatedBreakpoints.push(s),this.activatedBreakpoints.sort(cE),this.updateStyles()):!t.matches&&-1!==this.activatedBreakpoints.indexOf(s)&&(this.activatedBreakpoints.splice(this.activatedBreakpoints.indexOf(s),1),this.activatedBreakpoints.sort(cE),this.updateStyles()))}init(t,s,o,a,l=[]){EB(this.updateMap,t,s,o),EB(this.clearMap,t,s,a),this.buildElementKeyMap(t,s),this.watchExtraTriggers(t,s,l)}getValue(t,s,o){const a=this.elementMap.get(t);if(a){const l=void 0!==o?a.get(o):this.getActivatedValues(a,s);if(l)return l.get(s)}}hasValue(t,s){const o=this.elementMap.get(t);if(o){const a=this.getActivatedValues(o,s);if(a)return void 0!==a.get(s)||!1}return!1}setValue(t,s,o,a){let l=this.elementMap.get(t);if(l){const g=(l.get(a)||new Map).set(s,o);l.set(a,g),this.elementMap.set(t,l)}else l=(new Map).set(a,(new Map).set(s,o)),this.elementMap.set(t,l);const h=this.getValue(t,s);void 0!==h&&this.updateElement(t,s,h)}trackValue(t,s){return this.subject.asObservable().pipe(Dn(o=>o.element===t&&o.key===s))}updateStyles(){this.elementMap.forEach((t,s)=>{const o=new Set(this.elementKeyMap.get(s));let a=this.getActivatedValues(t);a&&a.forEach((l,h)=>{this.updateElement(s,h,l),o.delete(h)}),o.forEach(l=>{if(a=this.getActivatedValues(t,l),a){const h=a.get(l);this.updateElement(s,l,h)}else this.clearElement(s,l)})})}clearElement(t,s){const o=this.clearMap.get(t);if(o){const a=o.get(s);a&&(a(),this.subject.next({element:t,key:s,value:""}))}}updateElement(t,s,o){const a=this.updateMap.get(t);if(a){const l=a.get(s);l&&(l(o),this.subject.next({element:t,key:s,value:o}))}}releaseElement(t){const s=this.watcherMap.get(t);s&&(s.forEach(a=>a.unsubscribe()),this.watcherMap.delete(t));const o=this.elementMap.get(t);o&&(o.forEach((a,l)=>o.delete(l)),this.elementMap.delete(t))}triggerUpdate(t,s){const o=this.elementMap.get(t);if(o){const a=this.getActivatedValues(o,s);a&&(s?this.updateElement(t,s,a.get(s)):a.forEach((l,h)=>this.updateElement(t,h,l)))}}buildElementKeyMap(t,s){let o=this.elementKeyMap.get(t);o||(o=new Set,this.elementKeyMap.set(t,o)),o.add(s)}watchExtraTriggers(t,s,o){if(o&&o.length){let a=this.watcherMap.get(t);if(a||(a=new Map,this.watcherMap.set(t,a)),!a.get(s)){const h=(0,mc.T)(...o).subscribe(()=>{const g=this.getValue(t,s);this.updateElement(t,s,g)});a.set(s,h)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,s){for(let a=0;a<this.activatedBreakpoints.length;a++){const h=t.get(this.activatedBreakpoints[a].alias);if(h&&(void 0===s||h.has(s)&&null!=h.get(s)))return h}const o=t.get("");return void 0===s||o&&o.has(s)?o:void 0}observeActivations(){const s=this.breakpoints.items.map(o=>o.mediaQuery);this.matchMedia.observe(this.hook.withPrintQuery(s)).pipe((0,gs.b)(this.hook.interceptEvents(this)),Dn(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(xI),u.LFG(uE),u.LFG(xB))},i.\u0275prov=(0,u.Yz7)({factory:function(){return new i((0,u.LFG)(xI),(0,u.LFG)(uE),(0,u.LFG)(xB))},token:i,providedIn:"root"}),i})();function EB(i,e,t,s){if(void 0!==s){let o=i.get(e);o||(o=new Map,i.set(e,o)),o.set(t,s)}}let o8=(()=>{class i extends Ls{buildStyles(t,s){return{display:"true"===t?s.display||(s.isServer?"initial":""):"none"}}}return i.\u0275fac=function(){let e;return function(s){return(e||(e=u.n5z(i)))(s||i)}}(),i.\u0275prov=(0,u.Yz7)({factory:function(){return new i},token:i,providedIn:"root"}),i})(),a8=(()=>{class i extends ts{constructor(t,s,o,a,l,h,g){super(t,s,o,a),this.layoutConfig=l,this.platformId=h,this.serverModuleLoaded=g,this.DIRECTIVE_KEY="show-hide",this.display="",this.hasLayout=!1,this.hasFlexChild=!1}ngAfterViewInit(){this.trackExtraTriggers();const t=Array.from(this.nativeElement.children);for(let o=0;o<t.length;o++)if(this.marshal.hasValue(t[o],"flex")){this.hasFlexChild=!0;break}qO.has(this.nativeElement)?this.display=qO.get(this.nativeElement):(this.display=this.getDisplayStyle(),qO.set(this.nativeElement,this.display)),this.init();const s=this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY,"");void 0===s||""===s?this.setValue(!0,""):this.triggerUpdate()}ngOnChanges(t){Object.keys(t).forEach(s=>{if(-1!==this.inputs.indexOf(s)){const o=s.split("."),a=o.slice(1).join("."),l=t[s].currentValue;let h=""===l||0!==l&&wi(l);"fxHide"===o[0]&&(h=!h),this.setValue(h,a)}})}trackExtraTriggers(){this.hasLayout=this.marshal.hasValue(this.nativeElement,"layout"),["layout","layout-align"].forEach(t=>{this.marshal.trackValue(this.nativeElement,t).pipe(er(this.destroySubject)).subscribe(this.triggerUpdate.bind(this))})}getDisplayStyle(){return this.hasLayout||this.hasFlexChild&&this.layoutConfig.addFlexToParent?"flex":this.styler.lookupStyle(this.nativeElement,"display",!0)}updateWithValue(t=!0){if(""===t)return;const s=Gs(this.platformId);this.addStyles(t?"true":"false",{display:this.display,isServer:s}),s&&this.serverModuleLoaded&&this.nativeElement.style.setProperty("display",""),this.marshal.triggerUpdate(this.parentElement,"layout-gap")}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.SBq),u.Y36(o8),u.Y36(kr),u.Y36(ns),u.Y36($d),u.Y36(u.Lbi),u.Y36(v0))},i.\u0275dir=u.lG2({type:i,features:[u.qOj,u.TTD]}),i})();const qO=new WeakMap,l8=["fxShow","fxShow.print","fxShow.xs","fxShow.sm","fxShow.md","fxShow.lg","fxShow.xl","fxShow.lt-sm","fxShow.lt-md","fxShow.lt-lg","fxShow.lt-xl","fxShow.gt-xs","fxShow.gt-sm","fxShow.gt-md","fxShow.gt-lg","fxHide","fxHide.print","fxHide.xs","fxHide.sm","fxHide.md","fxHide.lg","fxHide.xl","fxHide.lt-sm","fxHide.lt-md","fxHide.lt-lg","fxHide.lt-xl","fxHide.gt-xs","fxHide.gt-sm","fxHide.gt-md","fxHide.gt-lg"];let DB=(()=>{class i extends a8{constructor(){super(...arguments),this.inputs=l8}}return i.\u0275fac=function(){let e;return function(s){return(e||(e=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,selectors:[["","fxShow",""],["","fxShow.print",""],["","fxShow.xs",""],["","fxShow.sm",""],["","fxShow.md",""],["","fxShow.lg",""],["","fxShow.xl",""],["","fxShow.lt-sm",""],["","fxShow.lt-md",""],["","fxShow.lt-lg",""],["","fxShow.lt-xl",""],["","fxShow.gt-xs",""],["","fxShow.gt-sm",""],["","fxShow.gt-md",""],["","fxShow.gt-lg",""],["","fxHide",""],["","fxHide.print",""],["","fxHide.xs",""],["","fxHide.sm",""],["","fxHide.md",""],["","fxHide.lg",""],["","fxHide.xl",""],["","fxHide.lt-sm",""],["","fxHide.lt-md",""],["","fxHide.lt-lg",""],["","fxHide.lt-xl",""],["","fxHide.gt-xs",""],["","fxHide.gt-sm",""],["","fxHide.gt-md",""],["","fxHide.gt-lg",""]],inputs:{fxShow:"fxShow","fxShow.print":"fxShow.print","fxShow.xs":"fxShow.xs","fxShow.sm":"fxShow.sm","fxShow.md":"fxShow.md","fxShow.lg":"fxShow.lg","fxShow.xl":"fxShow.xl","fxShow.lt-sm":"fxShow.lt-sm","fxShow.lt-md":"fxShow.lt-md","fxShow.lt-lg":"fxShow.lt-lg","fxShow.lt-xl":"fxShow.lt-xl","fxShow.gt-xs":"fxShow.gt-xs","fxShow.gt-sm":"fxShow.gt-sm","fxShow.gt-md":"fxShow.gt-md","fxShow.gt-lg":"fxShow.gt-lg",fxHide:"fxHide","fxHide.print":"fxHide.print","fxHide.xs":"fxHide.xs","fxHide.sm":"fxHide.sm","fxHide.md":"fxHide.md","fxHide.lg":"fxHide.lg","fxHide.xl":"fxHide.xl","fxHide.lt-sm":"fxHide.lt-sm","fxHide.lt-md":"fxHide.lt-md","fxHide.lt-lg":"fxHide.lt-lg","fxHide.lt-xl":"fxHide.lt-xl","fxHide.gt-xs":"fxHide.gt-xs","fxHide.gt-sm":"fxHide.gt-sm","fxHide.gt-md":"fxHide.gt-md","fxHide.gt-lg":"fxHide.gt-lg"},features:[u.qOj]}),i})(),kB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[HO]]}),i})();var g8=Q(1144);const m8=["addListener","removeListener"],v8=["addEventListener","removeEventListener"],_8=["on","off"];function wv(i,e,t,s){if((0,Na.m)(t)&&(s=t,t=void 0),s)return wv(i,e,t).pipe(nM(s));const[o,a]=function w8(i){return(0,Na.m)(i.addEventListener)&&(0,Na.m)(i.removeEventListener)}(i)?v8.map(l=>h=>i[l](e,h,t)):function y8(i){return(0,Na.m)(i.addListener)&&(0,Na.m)(i.removeListener)}(i)?m8.map(OB(i,e)):function b8(i){return(0,Na.m)(i.on)&&(0,Na.m)(i.off)}(i)?_8.map(OB(i,e)):[];if(!o&&(0,g8.z)(i))return(0,It.z)(l=>wv(l,e,t))((0,Hd.Xf)(i));if(!o)throw new TypeError("Invalid event target");return new Ri.y(l=>{const h=(...g)=>l.next(1<g.length?g:g[0]);return o(h),()=>a(h)})}function OB(i,e){return t=>s=>i[t](e,s)}var FB=Q(4408);const dE={schedule(i){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:s}=dE;s&&(e=s.requestAnimationFrame,t=s.cancelAnimationFrame);const o=e(a=>{t=void 0,i(a)});return new fs.w0(()=>null==t?void 0:t(o))},requestAnimationFrame(...i){const{delegate:e}=dE;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:e}=dE;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...i)},delegate:void 0};var LB=Q(7565);const NB=new class C8 extends LB.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:s}=this;let o;e=e||s.shift();do{if(o=e.execute(e.state,e.delay))break}while((e=s[0])&&e.id===t&&s.shift());if(this._active=!1,o){for(;(e=s[0])&&e.id===t&&s.shift();)e.unsubscribe();throw o}}}(class x8 extends FB.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,s=0){return null!==s&&s>0?super.requestAsyncId(e,t,s):(e.actions.push(this),e._scheduled||(e._scheduled=dE.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,s=0){if(null!=s&&s>0||null==s&&this.delay>0)return super.recycleAsyncId(e,t,s);e.actions.some(o=>o.id===t)||(dE.cancelAnimationFrame(t),e._scheduled=void 0)}});let YO,S8=1;const CI={};function BB(i){return i in CI&&(delete CI[i],!0)}const M8={setImmediate(i){const e=S8++;return CI[e]=!0,YO||(YO=Promise.resolve()),YO.then(()=>BB(e)&&i()),e},clearImmediate(i){BB(i)}},{setImmediate:E8,clearImmediate:D8}=M8,SI={setImmediate(...i){const{delegate:e}=SI;return((null==e?void 0:e.setImmediate)||E8)(...i)},clearImmediate(i){const{delegate:e}=SI;return((null==e?void 0:e.clearImmediate)||D8)(i)},delegate:void 0};new class T8 extends LB.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:s}=this;let o;e=e||s.shift();do{if(o=e.execute(e.state,e.delay))break}while((e=s[0])&&e.id===t&&s.shift());if(this._active=!1,o){for(;(e=s[0])&&e.id===t&&s.shift();)e.unsubscribe();throw o}}}(class A8 extends FB.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,s=0){return null!==s&&s>0?super.requestAsyncId(e,t,s):(e.actions.push(this),e._scheduled||(e._scheduled=SI.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,s=0){if(null!=s&&s>0||null==s&&this.delay>0)return super.recycleAsyncId(e,t,s);e.actions.some(o=>o.id===t)||(SI.clearImmediate(t),e._scheduled=void 0)}});var P8=Q(3532);function $O(i=0,e,t=os.P){let s=-1;return null!=e&&((0,P8.K)(e)?t=e:s=e),new Ri.y(o=>{let a=function k8(i){return i instanceof Date&&!isNaN(i)}(i)?+i-t.now():i;a<0&&(a=0);let l=0;return t.schedule(function(){o.closed||(o.next(l++),0<=s?this.schedule(void 0,s):o.complete())},a)})}function VB(i,e=os.z){return function R8(i){return(0,Un.e)((e,t)=>{let s=!1,o=null,a=null,l=!1;const h=()=>{if(null==a||a.unsubscribe(),a=null,s){s=!1;const _=o;o=null,t.next(_)}l&&t.complete()},g=()=>{a=null,l&&t.complete()};e.subscribe(new $i.Q(t,_=>{s=!0,o=_,a||(0,Hd.Xf)(i(_)).subscribe(a=new $i.Q(t,h,g))},()=>{l=!0,(!s||!a||a.closed)&&t.complete()}))})}(()=>$O(i,e))}let MI=(()=>{class i{constructor(t,s,o){this._ngZone=t,this._platform=s,this._scrolled=new yt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const s=this.scrollContainers.get(t);s&&(s.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ri.y(s=>{this._globalSubscription||this._addGlobalListener();const o=t>0?this._scrolled.pipe(VB(t)).subscribe(s):this._scrolled.subscribe(s);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):at()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,s)=>this.deregister(s)),this._scrolled.complete()}ancestorScrolled(t,s){const o=this.getAncestorScrollContainers(t);return this.scrolled(s).pipe(Dn(a=>!a||o.indexOf(a)>-1))}getAncestorScrollContainers(t){const s=[];return this.scrollContainers.forEach((o,a)=>{this._scrollableContainsElement(a,t)&&s.push(a)}),s}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,s){let o=Fs(s),a=t.getElementRef().nativeElement;do{if(o==a)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>wv(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(u.R0b),u.LFG(Mo),u.LFG(_e,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),hE=(()=>{class i{constructor(t,s,o,a){this.elementRef=t,this.scrollDispatcher=s,this.ngZone=o,this.dir=a,this._destroyed=new yt.x,this._elementScrolled=new Ri.y(l=>this.ngZone.runOutsideAngular(()=>wv(this.elementRef.nativeElement,"scroll").pipe(er(this._destroyed)).subscribe(l)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const s=this.elementRef.nativeElement,o=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=o?t.end:t.start),null==t.right&&(t.right=o?t.start:t.end),null!=t.bottom&&(t.top=s.scrollHeight-s.clientHeight-t.bottom),o&&0!=nE()?(null!=t.left&&(t.right=s.scrollWidth-s.clientWidth-t.left),2==nE()?t.left=t.right:1==nE()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=s.scrollWidth-s.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const s=this.elementRef.nativeElement;J2()?s.scrollTo(t):(null!=t.top&&(s.scrollTop=t.top),null!=t.left&&(s.scrollLeft=t.left))}measureScrollOffset(t){const s="left",o="right",a=this.elementRef.nativeElement;if("top"==t)return a.scrollTop;if("bottom"==t)return a.scrollHeight-a.clientHeight-a.scrollTop;const l=this.dir&&"rtl"==this.dir.value;return"start"==t?t=l?o:s:"end"==t&&(t=l?s:o),l&&2==nE()?t==s?a.scrollWidth-a.clientWidth-a.scrollLeft:a.scrollLeft:l&&1==nE()?t==s?a.scrollLeft+a.scrollWidth-a.clientWidth:-a.scrollLeft:t==s?a.scrollLeft:a.scrollWidth-a.clientWidth-a.scrollLeft}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.SBq),u.Y36(MI),u.Y36(u.R0b),u.Y36(Jp,8))},i.\u0275dir=u.lG2({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),i})(),fE=(()=>{class i{constructor(t,s,o){this._platform=t,this._change=new yt.x,this._changeListener=a=>{this._change.next(a)},this._document=o,s.runOutsideAngular(()=>{if(t.isBrowser){const a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:s,height:o}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+o,right:t.left+s,height:o,width:s}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,s=this._getWindow(),o=t.documentElement,a=o.getBoundingClientRect();return{top:-a.top||t.body.scrollTop||s.scrollY||o.scrollTop||0,left:-a.left||t.body.scrollLeft||s.scrollX||o.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(VB(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(Mo),u.LFG(u.R0b),u.LFG(_e,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),eg=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})(),ZO=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[tx,nx,eg],tx,eg]}),i})();function KO(i){return(0,Dt.U)(()=>i)}const EI=["*"],L8=["content"];function N8(i,e){if(1&i){const t=u.EpF();u.TgZ(0,"div",2),u.NdJ("click",function(){return u.CHM(t),u.oxw()._onBackdropClicked()}),u.qZA()}if(2&i){const t=u.oxw();u.ekj("mat-drawer-shown",t._isShowingBackdrop())}}function B8(i,e){1&i&&(u.TgZ(0,"mat-drawer-content"),u.Hsn(1,2),u.qZA())}const V8=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],U8=["mat-drawer","mat-drawer-content","*"];function G8(i,e){if(1&i){const t=u.EpF();u.TgZ(0,"div",2),u.NdJ("click",function(){return u.CHM(t),u.oxw()._onBackdropClicked()}),u.qZA()}if(2&i){const t=u.oxw();u.ekj("mat-drawer-shown",t._isShowingBackdrop())}}function H8(i,e){1&i&&(u.TgZ(0,"mat-sidenav-content"),u.Hsn(1,2),u.qZA())}const z8=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],j8=["mat-sidenav","mat-sidenav-content","*"],UB={transformDrawer:Ol("transform",[oo("open, open-instant",Bn({transform:"none",visibility:"visible"})),oo("void",Bn({"box-shadow":"none",visibility:"hidden"})),es("void => open-instant",ms("0ms")),es("void <=> open, open-instant => void",ms("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},q8=new u.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Y8(){return!1}}),JO=new u.OlP("MAT_DRAWER_CONTAINER");let DI=(()=>{class i extends hE{constructor(t,s,o,a,l){super(o,a,l),this._changeDetectorRef=t,this._container=s}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.sBO),u.Y36((0,u.Gpc)(()=>HB)),u.Y36(u.SBq),u.Y36(MI),u.Y36(u.R0b))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,s){2&t&&u.Udp("margin-left",s._container._contentMargins.left,"px")("margin-right",s._container._contentMargins.right,"px")},features:[u._Bn([{provide:hE,useExisting:i}]),u.qOj],ngContentSelectors:EI,decls:1,vars:0,template:function(t,s){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),i})(),GB=(()=>{class i{constructor(t,s,o,a,l,h,g,_){this._elementRef=t,this._focusTrapFactory=s,this._focusMonitor=o,this._platform=a,this._ngZone=l,this._interactivityChecker=h,this._doc=g,this._container=_,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new yt.x,this._animationEnd=new yt.x,this._animationState="void",this.openedChange=new u.vpe(!0),this._openedStream=this.openedChange.pipe(Dn(b=>b),(0,Dt.U)(()=>{})),this.openedStart=this._animationStarted.pipe(Dn(b=>b.fromState!==b.toState&&0===b.toState.indexOf("open")),KO(void 0)),this._closedStream=this.openedChange.pipe(Dn(b=>!b),(0,Dt.U)(()=>{})),this.closedStart=this._animationStarted.pipe(Dn(b=>b.fromState!==b.toState&&"void"===b.toState),KO(void 0)),this._destroyed=new yt.x,this.onPositionChanged=new u.vpe,this._modeChanged=new yt.x,this.openedChange.subscribe(b=>{b?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{wv(this._elementRef.nativeElement,"keydown").pipe(Dn(b=>27===b.keyCode&&!this.disableClose&&!QT(b)),er(this._destroyed)).subscribe(b=>this._ngZone.run(()=>{this.close(),b.stopPropagation(),b.preventDefault()}))}),this._animationEnd.pipe(vl((b,x)=>b.fromState===x.fromState&&b.toState===x.toState)).subscribe(b=>{const{fromState:x,toState:S}=b;(0===S.indexOf("open")&&"void"===x||"void"===S&&0===x.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=wi(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"===this.mode?"dialog":"first-tabbable":t}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=wi(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(wi(t))}_forceFocus(t,s){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{t.addEventListener("blur",()=>t.removeAttribute("tabindex")),t.addEventListener("mousedown",()=>t.removeAttribute("tabindex"))})),t.focus(s)}_focusByCssSelector(t,s){let o=this._elementRef.nativeElement.querySelector(t);o&&this._forceFocus(o,s)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(s=>{!s&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var t;this._focusTrap&&this._focusTrap.destroy(),null===(t=this._anchor)||void 0===t||t.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,s){t&&s&&(this._openedVia=s);const o=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),o}_setOpen(t,s,o){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",s&&this._restoreFocus(o)),this._updateFocusTrapState(),new Promise(a=>{this.openedChange.pipe((0,Oi.q)(1)).subscribe(l=>a(l?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const s=this._elementRef.nativeElement,o=s.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),o.insertBefore(this._anchor,s)),o.appendChild(s)):this._anchor&&this._anchor.parentNode.insertBefore(s,this._anchor)}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.SBq),u.Y36(l3),u.Y36(sx),u.Y36(Mo),u.Y36(u.R0b),u.Y36(hO),u.Y36(_e,8),u.Y36(JO,8))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-drawer"]],viewQuery:function(t,s){if(1&t&&u.Gf(L8,5),2&t){let o;u.iGM(o=u.CRH())&&(s._content=o.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,s){1&t&&u.WFA("@transform.start",function(a){return s._animationStarted.next(a)})("@transform.done",function(a){return s._animationEnd.next(a)}),2&t&&(u.uIk("align",null),u.d8E("@transform",s._animationState),u.ekj("mat-drawer-end","end"===s.position)("mat-drawer-over","over"===s.mode)("mat-drawer-push","push"===s.mode)("mat-drawer-side","side"===s.mode)("mat-drawer-opened",s.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:EI,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,s){1&t&&(u.F$t(),u.TgZ(0,"div",0,1),u.Hsn(2),u.qZA())},directives:[hE],encapsulation:2,data:{animation:[UB.transformDrawer]},changeDetection:0}),i})(),HB=(()=>{class i{constructor(t,s,o,a,l,h=!1,g){this._dir=t,this._element=s,this._ngZone=o,this._changeDetectorRef=a,this._animationMode=g,this._drawers=new u.n_E,this.backdropClick=new u.vpe,this._destroyed=new yt.x,this._doCheckSubject=new yt.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new yt.x,t&&t.change.pipe(er(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),l.change().pipe(er(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=h}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=wi(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:wi(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(zn(this._allDrawers),er(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(s=>!s._container||s._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(zn(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(XT(10),er(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,s=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const o=this._left._getWidth();t+=o,s-=o}if(this._right&&this._right.opened)if("side"==this._right.mode)s+=this._right._getWidth();else if("push"==this._right.mode){const o=this._right._getWidth();s+=o,t-=o}t=t||null,s=s||null,(t!==this._contentMargins.left||s!==this._contentMargins.right)&&(this._contentMargins={left:t,right:s},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(Dn(s=>s.fromState!==s.toState),er(this._drawers.changes)).subscribe(s=>{"open-instant"!==s.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(er(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(er(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Oi.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(er((0,mc.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const s=this._element.nativeElement.classList,o="mat-drawer-container-has-open";t?s.add(o):s.remove(o)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(Jp,8),u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(u.sBO),u.Y36(fE),u.Y36(q8),u.Y36(Yd,8))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-drawer-container"]],contentQueries:function(t,s,o){if(1&t&&(u.Suo(o,DI,5),u.Suo(o,GB,5)),2&t){let a;u.iGM(a=u.CRH())&&(s._content=a.first),u.iGM(a=u.CRH())&&(s._allDrawers=a)}},viewQuery:function(t,s){if(1&t&&u.Gf(DI,5),2&t){let o;u.iGM(o=u.CRH())&&(s._userContent=o.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,s){2&t&&u.ekj("mat-drawer-container-explicit-backdrop",s._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[u._Bn([{provide:JO,useExisting:i}])],ngContentSelectors:U8,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,s){1&t&&(u.F$t(V8),u.YNc(0,N8,1,2,"div",0),u.Hsn(1),u.Hsn(2,1),u.YNc(3,B8,2,0,"mat-drawer-content",1)),2&t&&(u.Q6J("ngIf",s.hasBackdrop),u.xp6(3),u.Q6J("ngIf",!s._content))},directives:[DI,dr],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),i})(),xv=(()=>{class i extends DI{constructor(t,s,o,a,l){super(t,s,o,a,l)}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.sBO),u.Y36((0,u.Gpc)(()=>_0)),u.Y36(u.SBq),u.Y36(MI),u.Y36(u.R0b))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(t,s){2&t&&u.Udp("margin-left",s._container._contentMargins.left,"px")("margin-right",s._container._contentMargins.right,"px")},features:[u._Bn([{provide:hE,useExisting:i}]),u.qOj],ngContentSelectors:EI,decls:1,vars:0,template:function(t,s){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),i})(),QO=(()=>{class i extends GB{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=wi(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=eI(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=eI(t)}}return i.\u0275fac=function(){let e;return function(s){return(e||(e=u.n5z(i)))(s||i)}}(),i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(t,s){2&t&&(u.uIk("align",null),u.Udp("top",s.fixedInViewport?s.fixedTopGap:null,"px")("bottom",s.fixedInViewport?s.fixedBottomGap:null,"px"),u.ekj("mat-drawer-end","end"===s.position)("mat-drawer-over","over"===s.mode)("mat-drawer-push","push"===s.mode)("mat-drawer-side","side"===s.mode)("mat-drawer-opened",s.opened)("mat-sidenav-fixed",s.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[u.qOj],ngContentSelectors:EI,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,s){1&t&&(u.F$t(),u.TgZ(0,"div",0,1),u.Hsn(2),u.qZA())},directives:[hE],encapsulation:2,data:{animation:[UB.transformDrawer]},changeDetection:0}),i})(),_0=(()=>{class i extends HB{}return i.\u0275fac=function(){let e;return function(s){return(e||(e=u.n5z(i)))(s||i)}}(),i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-sidenav-container"]],contentQueries:function(t,s,o){if(1&t&&(u.Suo(o,xv,5),u.Suo(o,QO,5)),2&t){let a;u.iGM(a=u.CRH())&&(s._content=a.first),u.iGM(a=u.CRH())&&(s._allDrawers=a)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,s){2&t&&u.ekj("mat-drawer-container-explicit-backdrop",s._backdropOverride)},exportAs:["matSidenavContainer"],features:[u._Bn([{provide:JO,useExisting:i}]),u.qOj],ngContentSelectors:j8,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,s){1&t&&(u.F$t(z8),u.YNc(0,G8,1,2,"div",0),u.Hsn(1),u.Hsn(2,1),u.YNc(3,H8,2,0,"mat-sidenav-content",1)),2&t&&(u.Q6J("ngIf",s.hasBackdrop),u.xp6(3),u.Q6J("ngIf",!s._content))},directives:[xv,dr],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),i})(),zB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Io,Ci,nx,eg],eg,Ci]}),i})();const XO="inline",AI=["row","column","row-reverse","column-reverse"];function Z8(i){if(i)switch(i.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":i="wrap-reverse";break;case"no":case"none":case"nowrap":i="nowrap";break;default:i="wrap"}return i}let J8=(()=>{class i extends Ls{buildStyles(t){return function $8(i){let[e,t,s]=function jB(i){i=i?i.toLowerCase():"";let[e,t,s]=i.split(" ");return AI.find(o=>o===e)||(e=AI[0]),t===XO&&(t=s!==XO?s:"",s=XO),[e,Z8(t),!!s]}(i);return function K8(i,e=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":i,"flex-wrap":e||null}}(e,t,s)}(t)}}return i.\u0275fac=function(){let e;return function(s){return(e||(e=u.n5z(i)))(s||i)}}(),i.\u0275prov=(0,u.Yz7)({factory:function(){return new i},token:i,providedIn:"root"}),i})();const Q8=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let X8=(()=>{class i extends ts{constructor(t,s,o,a){super(t,o,s,a),this.DIRECTIVE_KEY="layout",this.styleCache=eq,this.init()}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.SBq),u.Y36(kr),u.Y36(J8),u.Y36(ns))},i.\u0275dir=u.lG2({type:i,features:[u.qOj]}),i})(),eF=(()=>{class i extends X8{constructor(){super(...arguments),this.inputs=Q8}}return i.\u0275fac=function(){let e;return function(s){return(e||(e=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[u.qOj]}),i})();const eq=new Map;let YB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[HO,tx]]}),i})();const eY=["*"];let II;function gE(i){var e;return(null===(e=function tY(){if(void 0===II&&(II=null,"undefined"!=typeof window)){const i=window;void 0!==i.trustedTypes&&(II=i.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return II}())||void 0===e?void 0:e.createHTML(i))||i}function $B(i){return Error(`Unable to find icon with the name "${i}"`)}function ZB(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function KB(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class y0{constructor(e,t,s){this.url=e,this.svgText=t,this.options=s}}let mE=(()=>{class i{constructor(t,s,o,a){this._httpClient=t,this._sanitizer=s,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=o}addSvgIcon(t,s,o){return this.addSvgIconInNamespace("",t,s,o)}addSvgIconLiteral(t,s,o){return this.addSvgIconLiteralInNamespace("",t,s,o)}addSvgIconInNamespace(t,s,o,a){return this._addSvgIconConfig(t,s,new y0(o,null,a))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,s,o,a){const l=this._sanitizer.sanitize(u.q3G.HTML,o);if(!l)throw KB(o);const h=gE(l);return this._addSvgIconConfig(t,s,new y0("",h,a))}addSvgIconSet(t,s){return this.addSvgIconSetInNamespace("",t,s)}addSvgIconSetLiteral(t,s){return this.addSvgIconSetLiteralInNamespace("",t,s)}addSvgIconSetInNamespace(t,s,o){return this._addSvgIconSetConfig(t,new y0(s,null,o))}addSvgIconSetLiteralInNamespace(t,s,o){const a=this._sanitizer.sanitize(u.q3G.HTML,s);if(!a)throw KB(s);const l=gE(a);return this._addSvgIconSetConfig(t,new y0("",l,o))}registerFontClassAlias(t,s=t){return this._fontCssClassesByAlias.set(t,s),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const s=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,t);if(!s)throw ZB(t);const o=this._cachedIconsByUrl.get(s);return o?at(RI(o)):this._loadSvgIconFromConfig(new y0(t,null)).pipe((0,gs.b)(a=>this._cachedIconsByUrl.set(s,a)),(0,Dt.U)(a=>RI(a)))}getNamedSvgIcon(t,s=""){const o=JB(s,t);let a=this._svgIconConfigs.get(o);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(s,t),a)return this._svgIconConfigs.set(o,a),this._getSvgFromConfig(a);const l=this._iconSetConfigs.get(s);return l?this._getSvgFromIconSetConfigs(t,l):xr($B(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?at(RI(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,Dt.U)(s=>RI(s)))}_getSvgFromIconSetConfigs(t,s){const o=this._extractIconWithNameFromAnySet(t,s);return o?at(o):Nk(s.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(ps(h=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(u.q3G.RESOURCE_URL,l.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(_)),at(null)})))).pipe((0,Dt.U)(()=>{const l=this._extractIconWithNameFromAnySet(t,s);if(!l)throw $B(t);return l}))}_extractIconWithNameFromAnySet(t,s){for(let o=s.length-1;o>=0;o--){const a=s[o];if(a.svgText&&a.svgText.toString().indexOf(t)>-1){const l=this._svgElementFromConfig(a),h=this._extractSvgIconFromSet(l,t,a.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,gs.b)(s=>t.svgText=s),(0,Dt.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?at(null):this._fetchIcon(t).pipe((0,gs.b)(s=>t.svgText=s))}_extractSvgIconFromSet(t,s,o){const a=t.querySelector(`[id="${s}"]`);if(!a)return null;const l=a.cloneNode(!0);if(l.removeAttribute("id"),"svg"===l.nodeName.toLowerCase())return this._setSvgAttributes(l,o);if("symbol"===l.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(l),o);const h=this._svgElementFromString(gE("<svg></svg>"));return h.appendChild(l),this._setSvgAttributes(h,o)}_svgElementFromString(t){const s=this._document.createElement("DIV");s.innerHTML=t;const o=s.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(t){const s=this._svgElementFromString(gE("<svg></svg>")),o=t.attributes;for(let a=0;a<o.length;a++){const{name:l,value:h}=o[a];"id"!==l&&s.setAttribute(l,h)}for(let a=0;a<t.childNodes.length;a++)t.childNodes[a].nodeType===this._document.ELEMENT_NODE&&s.appendChild(t.childNodes[a].cloneNode(!0));return s}_setSvgAttributes(t,s){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),s&&s.viewBox&&t.setAttribute("viewBox",s.viewBox),t}_fetchIcon(t){var s;const{url:o,options:a}=t,l=null!==(s=null==a?void 0:a.withCredentials)&&void 0!==s&&s;if(!this._httpClient)throw function nY(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==o)throw Error(`Cannot fetch icon from URL "${o}".`);const h=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,o);if(!h)throw ZB(o);const g=this._inProgressUrlFetches.get(h);if(g)return g;const _=this._httpClient.get(h,{responseType:"text",withCredentials:l}).pipe((0,Dt.U)(b=>gE(b)),Pw(()=>this._inProgressUrlFetches.delete(h)),(0,LA.B)());return this._inProgressUrlFetches.set(h,_),_}_addSvgIconConfig(t,s,o){return this._svgIconConfigs.set(JB(t,s),o),this}_addSvgIconSetConfig(t,s){const o=this._iconSetConfigs.get(t);return o?o.push(s):this._iconSetConfigs.set(t,[s]),this}_svgElementFromConfig(t){if(!t.svgElement){const s=this._svgElementFromString(t.svgText);this._setSvgAttributes(s,t.options),t.svgElement=s}return t.svgElement}_getIconConfigFromResolvers(t,s){for(let o=0;o<this._resolvers.length;o++){const a=this._resolvers[o](s,t);if(a)return rY(a)?new y0(a.url,null,a.options):new y0(a,null)}}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(QM,8),u.LFG(Gl),u.LFG(_e,8),u.LFG(u.qLn))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function RI(i){return i.cloneNode(!0)}function JB(i,e){return i+":"+e}function rY(i){return!(!i.url||!i.options)}const sY=sE(class{constructor(i){this._elementRef=i}}),oY=new u.OlP("mat-icon-location",{providedIn:"root",factory:function aY(){const i=(0,u.f3M)(_e),e=i?i.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),QB=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],lY=QB.map(i=>`[${i}]`).join(", "),cY=/^url\(['"]?#(.*?)['"]?\)$/;let PI=(()=>{class i extends sY{constructor(t,s,o,a,l){super(t),this._iconRegistry=s,this._location=a,this._errorHandler=l,this._inline=!1,this._currentIconFetch=fs.w0.EMPTY,o||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=wi(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const s=this._cleanupFontValue(t);s!==this._fontSet&&(this._fontSet=s,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const s=this._cleanupFontValue(t);s!==this._fontIcon&&(this._fontIcon=s,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const s=t.split(":");switch(s.length){case 1:return["",s[0]];case 2:return s;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const s=this._location.getPathname();s!==this._previousPath&&(this._previousPath=s,this._prependPathToReferences(s))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const s=t.querySelectorAll("style");for(let a=0;a<s.length;a++)s[a].textContent+=" ";const o=this._location.getPathname();this._previousPath=o,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(o),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let s=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();s--;){const o=t.childNodes[s];(1!==o.nodeType||"svg"===o.nodeName.toLowerCase())&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,s=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();s!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),s&&t.classList.add(s),this._previousFontSetClass=s),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const s=this._elementsWithExternalReferences;s&&s.forEach((o,a)=>{o.forEach(l=>{a.setAttribute(l.name,`url('${t}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(t){const s=t.querySelectorAll(lY),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<s.length;a++)QB.forEach(l=>{const h=s[a],g=h.getAttribute(l),_=g?g.match(cY):null;if(_){let b=o.get(h);b||(b=[],o.set(h,b)),b.push({name:l,value:_[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[s,o]=this._splitIconName(t);s&&(this._svgNamespace=s),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,s).pipe((0,Oi.q)(1)).subscribe(a=>this._setSvgElement(a),a=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${s}:${o}! ${a.message}`))})}}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.SBq),u.Y36(mE),u.$8M("aria-hidden"),u.Y36(oY),u.Y36(u.qLn))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,s){2&t&&(u.uIk("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet),u.ekj("mat-icon-inline",s.inline)("mat-icon-no-color","primary"!==s.color&&"accent"!==s.color&&"warn"!==s.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[u.qOj],ngContentSelectors:eY,decls:1,vars:0,template:function(t,s){1&t&&(u.F$t(),u.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),i})(),XB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Ci],Ci]}),i})(),eV=(()=>{class i{constructor(t,s){this._renderer=t,this._elementRef=s,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,s){this._renderer.setProperty(this._elementRef.nativeElement,t,s)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.Qsj),u.Y36(u.SBq))},i.\u0275dir=u.lG2({type:i}),i})(),b0=(()=>{class i extends eV{}return i.\u0275fac=function(){let e;return function(s){return(e||(e=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,features:[u.qOj]}),i})();const Cc=new u.OlP("NgValueAccessor"),dY={provide:Cc,useExisting:(0,u.Gpc)(()=>Sv),multi:!0},fY=new u.OlP("CompositionEventMode");let Sv=(()=>{class i extends eV{constructor(t,s,o){super(t,s),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function hY(){const i=Ve()?Ve().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(fY,8))},i.\u0275dir=u.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,s){1&t&&u.NdJ("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[u._Bn([dY]),u.qOj]}),i})();function Mv(i){return null==i||0===i.length}function nV(i){return null!=i&&"number"==typeof i.length}const Ho=new u.OlP("NgValidators"),Ev=new u.OlP("NgAsyncValidators"),pY=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class hf{static min(e){return function iV(i){return e=>{if(Mv(e.value)||Mv(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}(e)}static max(e){return function rV(i){return e=>{if(Mv(e.value)||Mv(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}(e)}static required(e){return function sV(i){return Mv(i.value)?{required:!0}:null}(e)}static requiredTrue(e){return function oV(i){return!0===i.value?null:{required:!0}}(e)}static email(e){return function aV(i){return Mv(i.value)||pY.test(i.value)?null:{email:!0}}(e)}static minLength(e){return function lV(i){return e=>Mv(e.value)||!nV(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function cV(i){return e=>nV(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static pattern(e){return function uV(i){if(!i)return vE;let e,t;return"string"==typeof i?(t="","^"!==i.charAt(0)&&(t+="^"),t+=i,"$"!==i.charAt(i.length-1)&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),s=>{if(Mv(s.value))return null;const o=s.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return mV(e)}static composeAsync(e){return vV(e)}}function vE(i){return null}function dV(i){return null!=i}function hV(i){const e=(0,u.QGY)(i)?(0,Yi.D)(i):i;return(0,u.CqO)(e),e}function fV(i){let e={};return i.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function pV(i,e){return e.map(t=>t(i))}function gV(i){return i.map(e=>function gY(i){return!i.validate}(e)?e:t=>e.validate(t))}function mV(i){if(!i)return null;const e=i.filter(dV);return 0==e.length?null:function(t){return fV(pV(t,e))}}function tF(i){return null!=i?mV(gV(i)):null}function vV(i){if(!i)return null;const e=i.filter(dV);return 0==e.length?null:function(t){return Nk(pV(t,e).map(hV)).pipe((0,Dt.U)(fV))}}function nF(i){return null!=i?vV(gV(i)):null}function _V(i,e){return null===i?[e]:Array.isArray(i)?[...i,e]:[i,e]}function yV(i){return i._rawValidators}function bV(i){return i._rawAsyncValidators}function iF(i){return i?Array.isArray(i)?i:[i]:[]}function kI(i,e){return Array.isArray(i)?i.includes(e):i===e}function wV(i,e){const t=iF(e);return iF(i).forEach(o=>{kI(t,o)||t.push(o)}),t}function xV(i,e){return iF(e).filter(t=>!kI(i,t))}class CV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tF(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=nF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class tg extends CV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ll extends CV{get formDirective(){return null}get path(){return null}}class SV{constructor(e){this._cd=e}is(e){var t,s,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(s=this._cd)||void 0===s?void 0:s.control)||void 0===o?void 0:o[e])}}let Dv=(()=>{class i extends SV{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(tg,2))},i.\u0275dir=u.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,s){2&t&&u.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))},features:[u.qOj]}),i})(),_E=(()=>{class i extends SV{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(ll,10))},i.\u0275dir=u.lG2({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,s){2&t&&u.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))("ng-submitted",s.is("submitted"))},features:[u.qOj]}),i})();function yE(i,e){oF(i,e),e.valueAccessor.writeValue(i.value),function CY(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&EV(i,e)})}(i,e),function MY(i,e){const t=(s,o)=>{e.valueAccessor.writeValue(s),o&&e.viewToModelUpdate(s)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}(i,e),function SY(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&EV(i,e),"submit"!==i.updateOn&&i.markAsTouched()})}(i,e),function xY(i,e){if(e.valueAccessor.setDisabledState){const t=s=>{e.valueAccessor.setDisabledState(s)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}(i,e)}function LI(i,e,t=!0){const s=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(s),e.valueAccessor.registerOnTouched(s)),BI(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function NI(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function oF(i,e){const t=yV(i);null!==e.validator?i.setValidators(_V(t,e.validator)):"function"==typeof t&&i.setValidators([t]);const s=bV(i);null!==e.asyncValidator?i.setAsyncValidators(_V(s,e.asyncValidator)):"function"==typeof s&&i.setAsyncValidators([s]);const o=()=>i.updateValueAndValidity();NI(e._rawValidators,o),NI(e._rawAsyncValidators,o)}function BI(i,e){let t=!1;if(null!==i){if(null!==e.validator){const o=yV(i);if(Array.isArray(o)&&o.length>0){const a=o.filter(l=>l!==e.validator);a.length!==o.length&&(t=!0,i.setValidators(a))}}if(null!==e.asyncValidator){const o=bV(i);if(Array.isArray(o)&&o.length>0){const a=o.filter(l=>l!==e.asyncValidator);a.length!==o.length&&(t=!0,i.setAsyncValidators(a))}}}const s=()=>{};return NI(e._rawValidators,s),NI(e._rawAsyncValidators,s),t}function EV(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function DV(i,e){oF(i,e)}function aF(i,e){if(!i.hasOwnProperty("model"))return!1;const t=i.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function AV(i,e){i._syncPendingControls(),e.forEach(t=>{const s=t.control;"submit"===s.updateOn&&s._pendingChange&&(t.viewToModelUpdate(s._pendingValue),s._pendingChange=!1)})}function lF(i,e){if(!e)return null;let t,s,o;return Array.isArray(e),e.forEach(a=>{a.constructor===Sv?t=a:function AY(i){return Object.getPrototypeOf(i.constructor)===b0}(a)?s=a:o=a}),o||s||t||null}function VI(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}const bE="VALID",UI="INVALID",cx="PENDING",wE="DISABLED";function uF(i){return(GI(i)?i.validators:i)||null}function TV(i){return Array.isArray(i)?tF(i):i||null}function dF(i,e){return(GI(e)?e.asyncValidators:i)||null}function IV(i){return Array.isArray(i)?nF(i):i||null}function GI(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}const RV=i=>i instanceof ff,hF=i=>i instanceof w0;function PV(i){return RV(i)?i.value:i.getRawValue()}function kV(i,e){const t=hF(i),s=i.controls;if(!(t?Object.keys(s):s).length)throw new u.vHH(1e3,"");if(!s[e])throw new u.vHH(1001,"")}function OV(i,e){hF(i),i._forEachChild((s,o)=>{if(void 0===e[o])throw new u.vHH(1002,"")})}class fF{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=TV(this._rawValidators),this._composedAsyncValidatorFn=IV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===bE}get invalid(){return this.status===UI}get pending(){return this.status==cx}get disabled(){return this.status===wE}get enabled(){return this.status!==wE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=TV(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=IV(e)}addValidators(e){this.setValidators(wV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(xV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(xV(e,this._rawAsyncValidators))}hasValidator(e){return kI(this._rawValidators,e)}hasAsyncValidator(e){return kI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=cx,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=wE,this.errors=null,this._forEachChild(s=>{s.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(s=>s(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=bE,this._forEachChild(s=>{s.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bE||this.status===cx)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wE:bE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=cx,this._hasOwnPendingAsyncValidator=!0;const t=hV(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function TY(i,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let s=i;return e.forEach(o=>{s=hF(s)?s.controls.hasOwnProperty(o)?s.controls[o]:null:(i=>i instanceof RY)(s)&&s.at(o)||null}),s}(this,e,".")}getError(e,t){const s=t?this.get(t):this;return s&&s.errors?s.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?wE:this.errors?UI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cx)?cx:this._anyControlsHaveStatus(UI)?UI:bE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){GI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ff extends fF{constructor(e=null,t,s){super(uF(t),dF(s,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),GI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){VI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){VI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class w0 extends fF{constructor(e,t,s){super(uF(t),dF(s,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,s={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,s={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){OV(this,e),Object.keys(e).forEach(s=>{kV(this,s),this.controls[s].setValue(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(s=>{this.controls[s]&&this.controls[s].patchValue(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((s,o)=>{s.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,s)=>(e[s]=PV(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,s)=>!!s._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const s=this.controls[t];s&&e(s,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const s=this.controls[t];if(this.contains(t)&&e(s))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,s)=>((t.enabled||this.disabled)&&(e[s]=t.value),e))}_reduceChildren(e,t){let s=e;return this._forEachChild((o,a)=>{s=t(s,o,a)}),s}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class RY extends fF{constructor(e,t,s){super(uF(t),dF(s,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,s={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:s.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,s={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){OV(this,e),e.forEach((s,o)=>{kV(this,o),this.at(o).setValue(s,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((s,o)=>{this.at(o)&&this.at(o).patchValue(s,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((s,o)=>{s.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>PV(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,s)=>!!s._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,s)=>{e(t,s)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const PY={provide:ll,useExisting:(0,u.Gpc)(()=>HI)},xE=(()=>Promise.resolve(null))();let HI=(()=>{class i extends ll{constructor(t,s){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new u.vpe,this.form=new w0({},tF(t),nF(s))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){xE.then(()=>{const s=this._findContainer(t.path);t.control=s.registerControl(t.name,t.control),yE(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){xE.then(()=>{const s=this._findContainer(t.path);s&&s.removeControl(t.name),VI(this._directives,t)})}addFormGroup(t){xE.then(()=>{const s=this._findContainer(t.path),o=new w0({});DV(o,t),s.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){xE.then(()=>{const s=this._findContainer(t.path);s&&s.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,s){xE.then(()=>{this.form.get(t.path).setValue(s)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,AV(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(Ho,10),u.Y36(Ev,10))},i.\u0275dir=u.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,s){1&t&&u.NdJ("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([PY]),u.qOj]}),i})();const OY={provide:tg,useExisting:(0,u.Gpc)(()=>CE)},NV=(()=>Promise.resolve(null))();let CE=(()=>{class i extends tg{constructor(t,s,o,a,l){super(),this._changeDetectorRef=l,this.control=new ff,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(s),this._setAsyncValidators(o),this.valueAccessor=lF(0,a)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),aF(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function FI(i,e){return[...e.path,i]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){yE(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){NV.then(()=>{var s;this.control.setValue(t,{emitViewToModelChange:!1}),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_updateDisabled(t){const s=t.isDisabled.currentValue,o=""===s||s&&"false"!==s;NV.then(()=>{var a;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(ll,9),u.Y36(Ho,10),u.Y36(Ev,10),u.Y36(Cc,10),u.Y36(u.sBO,8))},i.\u0275dir=u.lG2({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([OY]),u.qOj,u.TTD]}),i})(),SE=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=u.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})(),VV=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})();const pF=new u.OlP("NgModelWithFormControlWarning"),VY={provide:tg,useExisting:(0,u.Gpc)(()=>ux)};let ux=(()=>{class i extends tg{constructor(t,s,o,a){super(),this._ngModelWarningConfig=a,this.update=new u.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(s),this.valueAccessor=lF(0,o)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const s=t.form.previousValue;s&&LI(s,this,!1),yE(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}aF(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&LI(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return i._ngModelWarningSentOnce=!1,i.\u0275fac=function(t){return new(t||i)(u.Y36(Ho,10),u.Y36(Ev,10),u.Y36(Cc,10),u.Y36(pF,8))},i.\u0275dir=u.lG2({type:i,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[u._Bn([VY]),u.qOj,u.TTD]}),i})();const UY={provide:ll,useExisting:(0,u.Gpc)(()=>Av)};let Av=(()=>{class i extends ll{constructor(t,s){super(),this.validators=t,this.asyncValidators=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(s)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(BI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const s=this.form.get(t.path);return yE(s,t),s.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),s}getControl(t){return this.form.get(t.path)}removeControl(t){LI(t.control||null,t,!1),VI(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,s){this.form.get(t.path).setValue(s)}onSubmit(t){return this.submitted=!0,AV(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const s=t.control,o=this.form.get(t.path);s!==o&&(LI(s||null,t),RV(o)&&(yE(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const s=this.form.get(t.path);DV(s,t),s.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const s=this.form.get(t.path);s&&function EY(i,e){return BI(i,e)}(s,t)&&s.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){oF(this.form,this),this._oldForm&&BI(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(Ho,10),u.Y36(Ev,10))},i.\u0275dir=u.lG2({type:i,selectors:[["","formGroup",""]],hostBindings:function(t,s){1&t&&u.NdJ("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([UY]),u.qOj,u.TTD]}),i})(),eU=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[VV]]}),i})(),wF=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[eU]}),i})(),tU=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:pF,useValue:t.warnOnNgModelWithFormControl}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[eU]}),i})();const s$=["availableOption"],o$=function(i){return{active:i}};function a$(i,e){if(1&i){const t=u.EpF();u.TgZ(0,"div",12),u.TgZ(1,"input",13),u.NdJ("change",function(o){return u.CHM(t),u.oxw(2).changeSearchText(o)})("input",function(){return u.CHM(t),u.oxw(2).searchTextChanged()})("ngModelChange",function(o){return u.CHM(t),u.oxw(2).searchText=o}),u.qZA(),u.TgZ(2,"label",14),u._UZ(3,"span",15),u._uU(4),u.qZA(),u.qZA()}if(2&i){const t=u.oxw(2);u.xp6(1),u.Udp("direction",t.config.inputDirection),u.Q6J("ngModel",t.searchText),u.xp6(1),u.Q6J("ngClass",u.VKq(5,o$,t.searchText)),u.xp6(2),u.hij(" ",t.config.searchPlaceholder,"")}}function l$(i,e){if(1&i){const t=u.EpF();u.TgZ(0,"li",16),u.NdJ("click",function(){const o=u.CHM(t),a=o.$implicit,l=o.index;return u.oxw(2).deselectItem(a,l)}),u.TgZ(1,"span",17),u._uU(2,"x"),u.qZA(),u.TgZ(3,"span"),u._uU(4),u.qZA(),u.qZA()}if(2&i){const t=e.$implicit,s=u.oxw(2);u.xp6(4),u.hij(" ",s.config.displayFn?s.config.displayFn(t):t[s.config.displayKey]||t," ")}}function c$(i,e){1&i&&u._UZ(0,"hr")}const u$=function(i,e){return{active:i,disabled:e}};function d$(i,e){if(1&i){const t=u.EpF();u.TgZ(0,"li",18,19),u.NdJ("click",function(){const o=u.CHM(t),a=o.$implicit,l=o.index;return u.oxw(2).selectItem(a,l)}),u._uU(2),u.qZA()}if(2&i){const t=e.$implicit,s=e.index,o=u.oxw(2);u.Q6J("ngClass",u.WLB(2,u$,o.focusedItemIndex==s&&!t.disabled,t.disabled)),u.xp6(2),u.hij(" ",o.config.displayFn?o.config.displayFn(t):t[o.config.displayKey]||t," ")}}function h$(i,e){if(1&i&&(u.TgZ(0,"li"),u._uU(1),u.qZA()),2&i){const t=u.oxw(2);u.xp6(1),u.Oqu(t.config.noResultsFound)}}function f$(i,e){if(1&i&&(u.TgZ(0,"div",5),u.YNc(1,a$,5,7,"div",6),u.TgZ(2,"ul",7),u.YNc(3,l$,5,1,"li",8),u.qZA(),u.YNc(4,c$,1,0,"hr",9),u.TgZ(5,"ul",10),u.YNc(6,d$,3,5,"li",11),u.ALo(7,"limitTo"),u.ALo(8,"filterBy"),u.YNc(9,h$,2,1,"li",9),u.qZA(),u.qZA()),2&i){const t=u.oxw();u.Udp("max-height",t.config.height),u.xp6(1),u.Q6J("ngIf",t.config.search),u.xp6(2),u.Q6J("ngForOf",t.selectedItems),u.xp6(1),u.Q6J("ngIf",t.selectedItems.length>0&&t.availableItems.length>0),u.xp6(2),u.Q6J("ngForOf",u.xi3(7,7,u.Dn7(8,10,t.availableItems,t.searchText,t.config.searchOnKey),t.config.limitTo)),u.xp6(3),u.Q6J("ngIf",t.showNotFound)}}const p$=function(i){return{"ngx-disabled":i}};let nU=(()=>{class i{transform(t,s,o){return t&&s&&Array.isArray(t)?t.filter("string"==typeof t[0]?a=>a.toLowerCase().indexOf(s.toLowerCase())>-1:o?a=>"object"!=typeof a[o]&&a[o].toString().toLowerCase().indexOf(s.toLowerCase())>-1:a=>{for(const l in a)if("object"!=typeof a[l]&&a[l].toString().toLowerCase().indexOf(s.toLowerCase())>-1)return!0;return!1}):t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=u.Yjl({name:"filterBy",type:i,pure:!0}),i})(),g$=(()=>{class i{constructor(t,s){this.cdref=t,this._elementRef=s,this.options=[],this.config={},this.multiple=!1,this.change=new u.vpe,this.searchChange=new u.vpe,this.open=new u.vpe,this.close=new u.vpe,this.toggleDropdown=!1,this.availableItems=[],this.selectedItems=[],this.selectedDisplayText="Select",this.clickedInside=!1,this.insideKeyPress=!1,this.focusedItemIndex=null,this.showNotFound=!1,this.onChange=()=>{},this.onTouched=()=>{},this.multiple=!1}get value(){return this._value}set value(t){this._value=t,this.onChange(t),this.onTouched()}clickInsideComponent(){this.clickedInside=!0}blur(){this.toggleDropdown=!1}focus(){this.disabled||this.toggleSelectDropdown()}clickOutsideComponent(){this.clickedInside||(this.toggleDropdown=!1,this.resetArrowKeyActiveElement(),this.searchText=null,this.close.emit()),this.clickedInside=!1}KeyPressOutsideComponent(){this.insideKeyPress||(this.toggleDropdown=!1,this.resetArrowKeyActiveElement()),this.insideKeyPress=!1}handleKeyboardEvent(t){if(this.insideKeyPress=!0,27===t.keyCode||this.disabled)return this.toggleDropdown=!1,void(this.insideKeyPress=!1);const s=this.availableOptions.toArray();if(9!==t.keyCode&&0===s.length&&!this.toggleDropdown&&(this.toggleDropdown=!0),40===t.keyCode&&s.length>0&&(this.onArrowKeyDown(),this.focusedItemIndex>=s.length&&(this.focusedItemIndex=0),s[this.focusedItemIndex].nativeElement.focus(),t.preventDefault()),38===t.keyCode&&s.length&&(this.onArrowKeyUp(),this.focusedItemIndex>=s.length&&(this.focusedItemIndex=s.length-1),s[this.focusedItemIndex].nativeElement.focus(),t.preventDefault()),13===t.keyCode&&null!==this.focusedItemIndex){const o=(new nU).transform(this.availableItems,this.searchText,this.config.searchOnKey);return this.selectItem(o[this.focusedItemIndex],this.availableItems.indexOf(o[this.focusedItemIndex])),!1}}ngOnInit(){void 0!==this.options&&Array.isArray(this.options)&&(this.availableItems=[...this.options.sort(this.config.customComparator)],this.initDropdownValuesAndOptions())}ngAfterViewInit(){this.availableOptions.changes.subscribe(this.setNotFoundState.bind(this))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}writeValue(t,s){t?(Array.isArray(t)?this.multiple?this.value=t:t.length>0&&(this.value=t[0]):this.value=t,0===this.selectedItems.length&&(Array.isArray(t)?this.selectedItems=t:this.selectedItems.push(t),this.initDropdownValuesAndOptions())):(this.value=[],s||this.reset()),s||this.reset()}reset(){this.selectedItems=[],this.availableItems=[...this.options.sort(this.config.customComparator)],this.initDropdownValuesAndOptions()}setNotFoundState(){this.showNotFound=0===this.availableOptions.length,this.cdref.detectChanges()}ngOnChanges(t){this.selectedItems=[],this.options=this.options||[],t.options&&(this.availableItems=[...this.options.sort(this.config.customComparator)]),t.value&&(JSON.stringify(t.value.currentValue)===JSON.stringify([])||""===t.value.currentValue||null===t.value.currentValue)&&(this.availableItems=[...this.options.sort(this.config.customComparator)]),this.initDropdownValuesAndOptions()}deselectItem(t,s){this.selectedItems.forEach((a,l)=>{t===a&&this.selectedItems.splice(l,1)});let o=[...this.availableItems];this.availableItems.includes(t)||(this.availableItems.push(t),o=this.availableItems.sort(this.config.customComparator)),this.selectedItems=[...this.selectedItems],this.availableItems=[...o],Array.isArray(this.value)||(this.value=[]),this.valueChanged(),this.resetArrowKeyActiveElement()}selectItem(t,s){this.multiple||(this.selectedItems.length>0&&this.availableItems.push(this.selectedItems[0]),this.selectedItems=[],this.toggleDropdown=!1),this.availableItems.forEach((o,a)=>{t===o&&(this.selectedItems.push(t),this.availableItems.splice(a,1))}),this.config.clearOnSelection&&(this.searchText=null),this.selectedItems=[...this.selectedItems],this.availableItems=[...this.availableItems],this.selectedItems.sort(this.config.customComparator),this.availableItems.sort(this.config.customComparator),this.valueChanged(),this.resetArrowKeyActiveElement()}valueChanged(){this.writeValue(this.selectedItems,!0),this.change.emit({value:this.value}),this.setSelectedDisplayText()}toggleSelectDropdown(){this.toggleDropdown=!this.toggleDropdown,this.toggleDropdown?this.open.emit():(this.searchText=null,this.close.emit()),this.resetArrowKeyActiveElement()}searchTextChanged(){this.searchChange.emit(this.searchText)}changeSearchText(t){t.stopPropagation()}initDropdownValuesAndOptions(){const t={displayKey:"description",height:"auto",search:!1,placeholder:"Select",searchPlaceholder:"Search...",limitTo:0,customComparator:void 0,noResultsFound:"No results found!",moreText:"more",searchOnKey:null,clearOnSelection:!1,inputDirection:"ltr"};("undefined"===this.config||0===Object.keys(this.config).length)&&(this.config=Object.assign({},t));for(const s of Object.keys(t))this.config[s]=this.config[s]?this.config[s]:t[s];this.config=Object.assign({},this.config),this.selectedDisplayText=this.config.placeholder,""!==this.value&&void 0!==this.value&&(Array.isArray(this.value)?this.selectedItems=this.value:""!==this.value&&null!==this.value?this.selectedItems[0]=this.value:(this.selectedItems=[],this.value=[]),this.selectedItems.forEach(s=>{const o=this.availableItems.findIndex(a=>JSON.stringify(s)===JSON.stringify(a));-1!==o&&this.availableItems.splice(o,1)})),this.setSelectedDisplayText()}setSelectedDisplayText(){let t=this.selectedItems[0];"object"==typeof this.selectedItems[0]&&(t=this.config.displayFn?this.config.displayFn(this.selectedItems[0]):this.selectedItems[0][this.config.displayKey]),this.selectedDisplayText=this.multiple&&this.selectedItems.length>0?1===this.selectedItems.length?t:t+` + ${this.selectedItems.length-1} ${this.config.moreText}`:0===this.selectedItems.length?this.config.placeholder:t}onArrowKeyUp(){0!==this.focusedItemIndex?this.onArrowKey()&&this.focusedItemIndex--:this.focusedItemIndex=this.availableItems.length-1}onArrowKeyDown(){this.focusedItemIndex!==this.availableItems.length-1?this.onArrowKey()&&this.focusedItemIndex++:this.focusedItemIndex=0}onArrowKey(){return null!==this.focusedItemIndex||(this.focusedItemIndex=0,!1)}resetArrowKeyActiveElement(){this.focusedItemIndex=null}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.sBO),u.Y36(u.SBq))},i.\u0275cmp=u.Xpm({type:i,selectors:[["ngx-select-dropdown"]],viewQuery:function(t,s){if(1&t&&u.Gf(s$,5),2&t){let o;u.iGM(o=u.CRH())&&(s.availableOptions=o)}},hostBindings:function(t,s){1&t&&u.NdJ("click",function(){return s.clickInsideComponent()})("blur",function(){return s.blur()})("focus",function(){return s.focus()})("click",function(){return s.clickOutsideComponent()},!1,u.evT)("keydown",function(){return s.KeyPressOutsideComponent()},!1,u.evT)("keydown",function(a){return s.handleKeyboardEvent(a)})},inputs:{options:"options",config:"config",multiple:"multiple",_value:"_value",disabled:"disabled"},outputs:{change:"change",searchChange:"searchChange",open:"open",close:"close"},features:[u._Bn([{provide:Cc,useExisting:(0,u.Gpc)(()=>i),multi:!0}]),u.TTD],decls:6,vars:6,consts:[["tabindex","0",1,"ngx-dropdown-container"],["type","button","tabindex","-1",1,"ngx-dropdown-button",3,"ngClass","disabled","click"],[1,"display-text"],[1,"nsdicon-angle-down"],["class","ngx-dropdown-list-container",3,"maxHeight",4,"ngIf"],[1,"ngx-dropdown-list-container"],["class","search-container",4,"ngIf"],[1,"selected-items"],["tabindex","-1",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"available-items"],["tabindex","-1",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"search-container"],["name","search-text","tabindex","-1","autocomplete","off",3,"ngModel","change","input","ngModelChange"],[3,"ngClass"],[1,"nsdicon-search"],["tabindex","-1",3,"click"],[1,"nsdicon-close"],["tabindex","-1",3,"ngClass","click"],["availableOption",""]],template:function(t,s){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"button",1),u.NdJ("click",function(){return s.toggleSelectDropdown()}),u.TgZ(2,"span",2),u._uU(3),u.qZA(),u._UZ(4,"span",3),u.qZA(),u.YNc(5,f$,10,14,"div",4),u.qZA()),2&t&&(u.xp6(1),u.Q6J("ngClass",u.VKq(4,p$,s.disabled))("disabled",s.disabled),u.xp6(2),u.hij("",s.selectedDisplayText," "),u.xp6(2),u.Q6J("ngIf",s.toggleDropdown))},directives:function(){return[Bl,dr,Sv,Dv,CE,Cs]},pipes:function(){return[m$,nU]},styles:['.ngx-dropdown-container[_ngcontent-%COMP%]{width:100%;position:relative}.ngx-dropdown-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;margin-bottom:0;font-weight:400;line-height:1.42857143;vertical-align:middle;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid #ccc;border-radius:4px;color:#333;background-color:#fff;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;text-align:left}.ngx-dropdown-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline;vertical-align:middle}.ngx-dropdown-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .nsdicon-angle-down[_ngcontent-%COMP%]{right:5px;position:relative;float:right}.ngx-dropdown-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .nsdicon-angle-down[_ngcontent-%COMP%]::before{border-style:solid;border-width:.1em .1em 0 0;content:"";display:inline-block;height:10px;position:relative;vertical-align:text-top;width:10px;top:0;transform:rotate(135deg)}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-button[_ngcontent-%COMP%]{width:100%;min-height:30px;padding:5px 10px;background-color:#fff}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-button[_ngcontent-%COMP%]   .display-text[_ngcontent-%COMP%]{display:inline-block;width:calc(100% - 20px)}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]{box-sizing:border-box;border:1px solid rgba(0,0,0,.15);border-radius:4px;padding-left:10px;padding-right:10px;z-index:999999999;width:100%;background:#fff;position:absolute;box-shadow:5px 5px 5px 0 rgba(0,0,0,.21);overflow-y:auto}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:relative;padding-top:10px;margin-top:5px}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;border-bottom:1px solid #9e9e9e;border-radius:0;outline:0;height:2rem;width:100%;font-size:13px;margin:0;padding:0;box-shadow:none;box-sizing:content-box;transition:.3s}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-bottom:1px solid #26a69a}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]{transform:translateY(-2px) scale(.8);transform-origin:0 0}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#9e9e9e;position:absolute;top:0;left:0;height:100%;font-size:1rem;cursor:text;transition:transform .2s ease-out;transform-origin:0 100%;text-align:initial;transform:translateY(12px);pointer-events:none}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   label.active[_ngcontent-%COMP%]{transform:translateY(-2px) scale(.8);transform-origin:0 0}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem;list-style-type:none;padding-left:0}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   ul.selected-items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#337ab7;color:#fff;margin-bottom:2px}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   ul.selected-items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .nsdicon-close[_ngcontent-%COMP%]{font-weight:700;font-size:large}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   ul.available-items[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#337ab7;color:#ffff}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown-list-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:inherit;cursor:pointer;display:block;padding:3px 20px;clear:both;font-weight:400;line-height:1.42857143;color:#333;white-space:normal}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-disabled[_ngcontent-%COMP%]{pointer-events:none;background-color:#e9ecef;opacity:1;cursor:no-drop}']}),i})(),m$=(()=>{class i{transform(t,s,o=0){return Array.isArray(t)&&0!==s?t.slice(o,o+s):t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=u.Yjl({name:"limitTo",type:i,pure:!0}),i})(),iU=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Io,wF]]}),i})(),rU=(()=>{class i{constructor(t){this.translationService=t,this.bootstrap(),this.translationService.update.subscribe(s=>{this.bootstrap()})}ngOnInit(){}handleTranslations(){null==this.selectedLanguage.code&&(this.selectedLanguage=this.translationService.supportedLanguages.find(t=>"en"==t.code)),this.translationService.setLanguage(this.selectedLanguage.code),this.translationService.saveSelectedLanguage(this.selectedLanguage.code)}bootstrap(){this.languageDropdownConfig=this.translationService.getSettings("name"),this.supportedLanguages=this.translationService.supportedLanguages,this.selectedLanguage=this.translationService.GetSelectedLanguage()}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(Wd))},i.\u0275cmp=u.Xpm({type:i,selectors:[["language-switch"]],decls:8,vars:7,consts:[[1,"ml-3","mr-3"],[1,"d-flex"],["alt","","height","20",1,"mt-2","mr-3","ml-3",3,"src"],[1,"language-select-container"],[3,"config","options","ngModel","ngModelChange","change"]],template:function(t,s){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"div",1),u._UZ(5,"img",2),u.TgZ(6,"div",3),u.TgZ(7,"ngx-select-dropdown",4),u.NdJ("ngModelChange",function(a){return s.selectedLanguage=a})("change",function(){return s.handleTranslations()}),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(2),u.hij(" ",u.lcZ(3,5,"language.select")," "),u.xp6(3),u.s9C("src",s.selectedLanguage.imageUrl,u.LSH),u.xp6(2),u.Q6J("config",s.languageDropdownConfig)("options",s.supportedLanguages)("ngModel",s.selectedLanguage))},directives:[g$,Dv,CE],pipes:[c0],styles:[".language-select-container[_ngcontent-%COMP%]{width:150px}"]}),i})();const v$=["thumbContainer"],_$=["toggleBar"],y$=["input"],b$=function(i){return{enterDuration:i}},w$=["*"],x$=new u.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let C$=0;const S$={provide:Cc,useExisting:(0,u.Gpc)(()=>sU),multi:!0};class M${constructor(e,t){this.source=e,this.checked=t}}const E$=eB(sE(X3(Q3(class{constructor(i){this._elementRef=i}}))));let sU=(()=>{class i extends E${constructor(t,s,o,a,l,h){super(t),this._focusMonitor=s,this._changeDetectorRef=o,this.defaults=l,this._onChange=g=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++C$,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new u.vpe,this.toggleChange=new u.vpe,this.tabIndex=parseInt(a)||0,this.color=this.defaultColor=l.color||"accent",this._noopAnimations="NoopAnimations"===h}get required(){return this._required}set required(t){this._required=wi(t)}get checked(){return this._checked}set checked(t){this._checked=wi(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}focus(t,s){s?this._focusMonitor.focusVia(this._inputElement,s,t):this._inputElement.nativeElement.focus(t)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new M$(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.SBq),u.Y36(sx),u.Y36(u.sBO),u.$8M("tabindex"),u.Y36(x$),u.Y36(Yd,8))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-slide-toggle"]],viewQuery:function(t,s){if(1&t&&(u.Gf(v$,5),u.Gf(_$,5),u.Gf(y$,5)),2&t){let o;u.iGM(o=u.CRH())&&(s._thumbEl=o.first),u.iGM(o=u.CRH())&&(s._thumbBarEl=o.first),u.iGM(o=u.CRH())&&(s._inputElement=o.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(t,s){2&t&&(u.Ikx("id",s.id),u.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null),u.ekj("mat-checked",s.checked)("mat-disabled",s.disabled)("mat-slide-toggle-label-before","before"==s.labelPosition)("_mat-animation-noopable",s._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[u._Bn([S$]),u.qOj],ngContentSelectors:w$,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,s){if(1&t&&(u.F$t(),u.TgZ(0,"label",0,1),u.TgZ(2,"span",2,3),u.TgZ(4,"input",4,5),u.NdJ("change",function(a){return s._onChangeEvent(a)})("click",function(a){return s._onInputClick(a)}),u.qZA(),u.TgZ(6,"span",6,7),u._UZ(8,"span",8),u.TgZ(9,"span",9),u._UZ(10,"span",10),u.qZA(),u.qZA(),u.qZA(),u.TgZ(11,"span",11,12),u.NdJ("cdkObserveContent",function(){return s._onLabelTextChange()}),u.TgZ(13,"span",13),u._uU(14,"\xa0"),u.qZA(),u.Hsn(15),u.qZA(),u.qZA()),2&t){const o=u.MAs(1),a=u.MAs(12);u.uIk("for",s.inputId),u.xp6(2),u.ekj("mat-slide-toggle-bar-no-side-margin",!a.textContent||!a.textContent.trim()),u.xp6(2),u.Q6J("id",s.inputId)("required",s.required)("tabIndex",s.tabIndex)("checked",s.checked)("disabled",s.disabled),u.uIk("name",s.name)("aria-checked",s.checked)("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledby)("aria-describedby",s.ariaDescribedby),u.xp6(5),u.Q6J("matRippleTrigger",o)("matRippleDisabled",s.disableRipple||s.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",u.VKq(18,b$,s._noopAnimations?0:150))}},directives:[yI,n3],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),i})(),oU=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})(),aU=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[oU,bI,Ci,dO],oU,Ci]}),i})(),zI=(()=>{class i{constructor(t,s){this.translationService=t,this.themeService=s}ngOnInit(){this.translationService.update.subscribe(t=>{this.bootstrap()})}switchTheme(){let t=this.themeService.switch();this.selectedTheme=this.translationService.get(`input.${t}`),this.checked=!1}bootstrap(){let t=this.themeService.get();this.selectedTheme=this.translationService.get(`input.${t}`),this.checked=t!=Kp[0]}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(Wd),u.Y36(eE))},i.\u0275cmp=u.Xpm({type:i,selectors:[["theme-switch"]],decls:2,vars:2,consts:[[3,"ngModel","change","ngModelChange"]],template:function(t,s){1&t&&(u.TgZ(0,"mat-slide-toggle",0),u.NdJ("change",function(){return s.switchTheme()})("ngModelChange",function(a){return s.checked=a}),u._uU(1),u.qZA()),2&t&&(u.Q6J("ngModel",s.checked),u.xp6(1),u.Oqu(s.selectedTheme))},directives:[sU,Dv,CE],styles:[""]}),i})();const lU=function(){return{exact:!0}};let T$=(()=>{class i{constructor(t,s,o,a){this.authService=t,this.translationService=s,this.themeService=o,this.router=a}ngOnInit(){this.authService.username.subscribe(o=>{this.username=o});let t=0,s=document.getElementsByClassName("mat-drawer-inner-container")[t];s.classList.add("d-flex"),s.style.maxHeight="calc(100vh - var(--header-height))"}ngAfterViewInit(){this.themeService.update.subscribe(t=>{this.amTheme=`am-${t.replace("-theme","")}`})}toggle(t){}useLanguage(t){this.translationService.setLanguage(t)}logout(){return(0,q.mG)(this,void 0,void 0,function*(){yield this.authService.logout(),this.router.navigate(["login"])})}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u0),u.Y36(Wd),u.Y36(eE),u.Y36(d))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-home"]],decls:60,vars:31,consts:[["color","accent",1,"position-fixed"],[1,"account-container",3,"click"],[1,"icon-container"],[1,"tracer"],["src","~/assets/images/robot.svg","alt",""],["mat-button","",2,"padding-top","15px"],[1,"example-spacer"],["fxShow","true","fxHide.lt-md","true"],["mat-button","","routerLink","/","routerLinkActive","active-link",3,"routerLinkActiveOptions"],["mat-button","","routerLink","/review","routerLinkActive","active-link"],["mat-button","","routerLink","/cards/settings","routerLinkActive","active-link"],[1,"header-margin-top"],["fxLayout","column","mode","over",3,"opened","closed"],["sidenav",""],["fxLayout","column",1,"my-nav-container","justify-content-between"],["fxLayout","column","id","my-nav-container",1,"mt-5"],["fxHide.gt-sm","true","mat-button","","routerLink","/","routerLinkActive","active-link",1,"mb-3",3,"routerLinkActiveOptions"],["fxHide.gt-sm","true","mat-button","","routerLink","/review","routerLinkActive","active-link",1,"mb-3"],["fxHide.gt-sm","true","mat-button","","routerLink","/cards/settings","routerLinkActive","active-link",1,"mb-3"],["fxLayout","column",1,"mt-5","text-left"],["mat-button","","routerLink","account/management","routerLinkActive","active-link",1,"my-theme","mb-3",3,"click"],[1,"svg-icon",3,"svgIcon"],["mat-button","",1,"my-theme",3,"click"],[1,"language-container","mt-5"],[1,"mt-5","ml-5"]],template:function(t,s){if(1&t){const o=u.EpF();u.TgZ(0,"header"),u.TgZ(1,"mat-toolbar",0),u.TgZ(2,"div",1),u.NdJ("click",function(){return u.CHM(o),u.MAs(27).toggle()}),u.TgZ(3,"div",2),u.TgZ(4,"div",3),u._UZ(5,"span"),u._UZ(6,"span"),u.qZA(),u._UZ(7,"img",4),u.qZA(),u.TgZ(8,"a",5),u.TgZ(9,"span"),u._uU(10),u.qZA(),u.qZA(),u.qZA(),u._UZ(11,"span",6),u.TgZ(12,"div",7),u.TgZ(13,"a",8),u.TgZ(14,"span"),u._uU(15),u.ALo(16,"translate"),u.qZA(),u.qZA(),u.TgZ(17,"a",9),u.TgZ(18,"span"),u._uU(19),u.ALo(20,"translate"),u.qZA(),u.qZA(),u.TgZ(21,"a",10),u.TgZ(22,"span"),u._uU(23),u.ALo(24,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(25,"mat-sidenav-container",11),u.TgZ(26,"mat-sidenav",12,13),u.NdJ("opened",function(){return s.toggle("opened")})("closed",function(){return s.toggle("closed")}),u.TgZ(28,"div",14),u.TgZ(29,"div",15),u.TgZ(30,"a",16),u.TgZ(31,"span"),u._uU(32),u.ALo(33,"translate"),u.qZA(),u.qZA(),u.TgZ(34,"a",17),u.TgZ(35,"span"),u._uU(36),u.ALo(37,"translate"),u.qZA(),u.qZA(),u.TgZ(38,"a",18),u.TgZ(39,"span"),u._uU(40),u.ALo(41,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(42,"div",19),u.TgZ(43,"div"),u.TgZ(44,"a",20),u.NdJ("click",function(){return u.CHM(o),u.MAs(27).close()}),u.TgZ(45,"span"),u._UZ(46,"mat-icon",21),u._uU(47),u.ALo(48,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(49,"div"),u.TgZ(50,"a",22),u.NdJ("click",function(){return s.logout()}),u.TgZ(51,"span"),u.TgZ(52,"mat-icon"),u._uU(53,"logout"),u.qZA(),u._uU(54),u.ALo(55,"translate"),u.qZA(),u.qZA(),u.qZA(),u._UZ(56,"language-switch",23),u._UZ(57,"theme-switch",24),u.qZA(),u.qZA(),u.qZA(),u.TgZ(58,"mat-sidenav-content"),u._UZ(59,"router-outlet"),u.qZA(),u.qZA(),u.qZA()}2&t&&(u.xp6(10),u.Oqu(s.username),u.xp6(2),u.Q6J("@revealAnimation",void 0),u.xp6(1),u.Q6J("routerLinkActiveOptions",u.DdM(29,lU)),u.xp6(2),u.Oqu(u.lcZ(16,13,"header.decks")),u.xp6(4),u.Oqu(u.lcZ(20,15,"header.review")),u.xp6(4),u.Oqu(u.lcZ(24,17,"header.cardSettings")),u.xp6(7),u.Q6J("routerLinkActiveOptions",u.DdM(30,lU)),u.xp6(2),u.Oqu(u.lcZ(33,19,"header.decks5")),u.xp6(4),u.Oqu(u.lcZ(37,21,"header.review")),u.xp6(4),u.Oqu(u.lcZ(41,23,"header.cardSettings")),u.xp6(6),u.Q6J("svgIcon",s.amTheme),u.xp6(1),u.hij(" ",u.lcZ(48,25,"authentication.manageAccount"),""),u.xp6(7),u.hij(" ",u.lcZ(55,27,"authentication.logout"),""))},directives:[SW,aE,DB,y,D,_0,QO,eF,PI,rU,zI,xv,r0],pipes:[c0],styles:['.account-container[_ngcontent-%COMP%]{display:flex;cursor:pointer;z-index:99999999}.account-container[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{opacity:1;width:100%}.mat-sidenav-container[_ngcontent-%COMP%]{min-height:calc(100vh - var(--header-height))!important}.mat-sidenav[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex!important}.my-nav-container[_ngcontent-%COMP%]{height:calc(100vh - var(--header-height) - 10px)}.language-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:250px;margin-right:20px}.bottom-sidenav[_ngcontent-%COMP%]{position:relative;bottom:0}.active-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{opacity:1;width:100%}.active-link[_ngcontent-%COMP%]{cursor:default}.mat-toolbar[_ngcontent-%COMP%]{min-height:var(--header-height)!important;height:var(--header-height)!important;top:0;z-index:9}.mat-toolbar-row[_ngcontent-%COMP%]{min-height:var(--header-height)!important;height:var(--header-height)!important}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}ng-scrollbar[_ngcontent-%COMP%]{--scrollbar-size: 8px;--scrollbar-thumb-color: #28df93;--scrollbar-thumb-hover-color: rgb(231, 46, 46);--scrollbar-border-radius: 4px;border:1px solid gray}.tracer[_ngcontent-%COMP%]{position:absolute;left:-5px;top:-5px;width:60px;height:60px;animation:animate 10s linear infinite}.tracer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1):after{position:absolute;top:12.5px;display:block;content:"";background-color:#fff;border-radius:50%;width:10px;height:10px}.tracer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2):after{position:absolute;top:32.5px;left:50.5px;display:block;content:"";background-color:#fff;border-radius:50%;width:10px;height:10px}@keyframes animate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.icon-container[_ngcontent-%COMP%]{position:relative;margin-top:10px;margin-bottom:5px;width:60px;max-height:60px;border-radius:50%;border:var(--secondary-color) solid 5px;margin-right:20px}.icon-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:inherit}'],data:{animation:[z6]},changeDetection:0}),i})();const I$=["connectionContainer"],R$=["inputContainer"],P$=["label"];function k$(i,e){1&i&&(u.ynx(0),u.TgZ(1,"div",14),u._UZ(2,"div",15),u._UZ(3,"div",16),u._UZ(4,"div",17),u.qZA(),u.TgZ(5,"div",18),u._UZ(6,"div",15),u._UZ(7,"div",16),u._UZ(8,"div",17),u.qZA(),u.BQk())}function O$(i,e){if(1&i){const t=u.EpF();u.TgZ(0,"div",19),u.NdJ("cdkObserveContent",function(){return u.CHM(t),u.oxw().updateOutlineGap()}),u.Hsn(1,1),u.qZA()}if(2&i){const t=u.oxw();u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function F$(i,e){if(1&i&&(u.ynx(0),u.Hsn(1,2),u.TgZ(2,"span"),u._uU(3),u.qZA(),u.BQk()),2&i){const t=u.oxw(2);u.xp6(3),u.Oqu(t._control.placeholder)}}function L$(i,e){1&i&&u.Hsn(0,3,["*ngSwitchCase","true"])}function N$(i,e){1&i&&(u.TgZ(0,"span",23),u._uU(1," *"),u.qZA())}function B$(i,e){if(1&i){const t=u.EpF();u.TgZ(0,"label",20,21),u.NdJ("cdkObserveContent",function(){return u.CHM(t),u.oxw().updateOutlineGap()}),u.YNc(2,F$,4,1,"ng-container",12),u.YNc(3,L$,1,0,"ng-content",12),u.YNc(4,N$,2,0,"span",22),u.qZA()}if(2&i){const t=u.oxw();u.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),u.uIk("for",t._control.id)("aria-owns",t._control.id),u.xp6(2),u.Q6J("ngSwitchCase",!1),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function V$(i,e){1&i&&(u.TgZ(0,"div",24),u.Hsn(1,4),u.qZA())}function U$(i,e){if(1&i&&(u.TgZ(0,"div",25),u._UZ(1,"span",26),u.qZA()),2&i){const t=u.oxw();u.xp6(1),u.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function G$(i,e){if(1&i&&(u.TgZ(0,"div"),u.Hsn(1,5),u.qZA()),2&i){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState)}}function H$(i,e){if(1&i&&(u.TgZ(0,"div",30),u._uU(1),u.qZA()),2&i){const t=u.oxw(2);u.Q6J("id",t._hintLabelId),u.xp6(1),u.Oqu(t.hintLabel)}}function z$(i,e){if(1&i&&(u.TgZ(0,"div",27),u.YNc(1,H$,2,2,"div",28),u.Hsn(2,6),u._UZ(3,"div",29),u.Hsn(4,7),u.qZA()),2&i){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState),u.xp6(1),u.Q6J("ngIf",t.hintLabel)}}const j$=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],W$=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let q$=0;const cU=new u.OlP("MatError");let jI=(()=>{class i{constructor(t,s){this.id="mat-error-"+q$++,t||s.nativeElement.setAttribute("aria-live","polite")}}return i.\u0275fac=function(t){return new(t||i)(u.$8M("aria-live"),u.Y36(u.SBq))},i.\u0275dir=u.lG2({type:i,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(t,s){2&t&&u.uIk("id",s.id)},inputs:{id:"id"},features:[u._Bn([{provide:cU,useExisting:i}])]}),i})();const Y$={transitionMessages:Ol("transitionMessages",[oo("enter",Bn({opacity:1,transform:"translateY(0%)"})),es("void => enter",[Bn({opacity:0,transform:"translateY(-5px)"}),ms("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let xF=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=u.lG2({type:i}),i})();const $$=new u.OlP("MatHint");let hx=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=u.lG2({type:i,selectors:[["mat-label"]]}),i})(),Z$=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=u.lG2({type:i,selectors:[["mat-placeholder"]]}),i})();const K$=new u.OlP("MatPrefix"),J$=new u.OlP("MatSuffix");let uU=0;const X$=sE(class{constructor(i){this._elementRef=i}},"primary"),eZ=new u.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),CF=new u.OlP("MatFormField");let WI=(()=>{class i extends X${constructor(t,s,o,a,l,h,g){super(t),this._changeDetectorRef=s,this._dir=o,this._defaults=a,this._platform=l,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new yt.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+uU++,this._labelId="mat-form-field-label-"+uU++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==g,this.appearance=a&&a.appearance?a.appearance:"legacy",this._hideRequiredMarker=!(!a||null==a.hideRequiredMarker)&&a.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const s=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&s!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=wi(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(zn(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(er(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(er(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,mc.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(zn(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(zn(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(er(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const s=this._control?this._control.ngControl:null;return s&&s[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,wv(this._label.nativeElement,"transitionend").pipe((0,Oi.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const s=this._hintChildren?this._hintChildren.find(a=>"start"===a.align):null,o=this._hintChildren?this._hintChildren.find(a=>"end"===a.align):null;s?t.push(s.id):this._hintLabel&&t.push(this._hintLabelId),o&&t.push(o.id)}else this._errorChildren&&t.push(...this._errorChildren.map(s=>s.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,s=this._connectionContainerRef.nativeElement,o=".mat-form-field-outline-start",a=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const b=s.querySelectorAll(`${o}, ${a}`);for(let x=0;x<b.length;x++)b[x].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let l=0,h=0;const g=s.querySelectorAll(o),_=s.querySelectorAll(a);if(this._label&&this._label.nativeElement.children.length){const b=s.getBoundingClientRect();if(0===b.width&&0===b.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const x=this._getStartEnd(b),S=t.children,M=this._getStartEnd(S[0].getBoundingClientRect());let T=0;for(let I=0;I<S.length;I++)T+=S[I].offsetWidth;l=Math.abs(M-x)-5,h=T>0?.75*T+10:0}for(let b=0;b<g.length;b++)g[b].style.width=`${l}px`;for(let b=0;b<_.length;b++)_[b].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const s=t.getRootNode();return s&&s!==t}return document.documentElement.contains(t)}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(Jp,8),u.Y36(eZ,8),u.Y36(Mo),u.Y36(u.R0b),u.Y36(Yd,8))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-form-field"]],contentQueries:function(t,s,o){if(1&t&&(u.Suo(o,xF,5),u.Suo(o,xF,7),u.Suo(o,hx,5),u.Suo(o,hx,7),u.Suo(o,Z$,5),u.Suo(o,cU,5),u.Suo(o,$$,5),u.Suo(o,K$,5),u.Suo(o,J$,5)),2&t){let a;u.iGM(a=u.CRH())&&(s._controlNonStatic=a.first),u.iGM(a=u.CRH())&&(s._controlStatic=a.first),u.iGM(a=u.CRH())&&(s._labelChildNonStatic=a.first),u.iGM(a=u.CRH())&&(s._labelChildStatic=a.first),u.iGM(a=u.CRH())&&(s._placeholderChild=a.first),u.iGM(a=u.CRH())&&(s._errorChildren=a),u.iGM(a=u.CRH())&&(s._hintChildren=a),u.iGM(a=u.CRH())&&(s._prefixChildren=a),u.iGM(a=u.CRH())&&(s._suffixChildren=a)}},viewQuery:function(t,s){if(1&t&&(u.Gf(I$,7),u.Gf(R$,5),u.Gf(P$,5)),2&t){let o;u.iGM(o=u.CRH())&&(s._connectionContainerRef=o.first),u.iGM(o=u.CRH())&&(s._inputContainerRef=o.first),u.iGM(o=u.CRH())&&(s._label=o.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,s){2&t&&u.ekj("mat-form-field-appearance-standard","standard"==s.appearance)("mat-form-field-appearance-fill","fill"==s.appearance)("mat-form-field-appearance-outline","outline"==s.appearance)("mat-form-field-appearance-legacy","legacy"==s.appearance)("mat-form-field-invalid",s._control.errorState)("mat-form-field-can-float",s._canLabelFloat())("mat-form-field-should-float",s._shouldLabelFloat())("mat-form-field-has-label",s._hasFloatingLabel())("mat-form-field-hide-placeholder",s._hideControlPlaceholder())("mat-form-field-disabled",s._control.disabled)("mat-form-field-autofilled",s._control.autofilled)("mat-focused",s._control.focused)("ng-untouched",s._shouldForward("untouched"))("ng-touched",s._shouldForward("touched"))("ng-pristine",s._shouldForward("pristine"))("ng-dirty",s._shouldForward("dirty"))("ng-valid",s._shouldForward("valid"))("ng-invalid",s._shouldForward("invalid"))("ng-pending",s._shouldForward("pending"))("_mat-animation-noopable",!s._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[u._Bn([{provide:CF,useExisting:i}]),u.qOj],ngContentSelectors:W$,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,s){1&t&&(u.F$t(j$),u.TgZ(0,"div",0),u.TgZ(1,"div",1,2),u.NdJ("click",function(a){return s._control.onContainerClick&&s._control.onContainerClick(a)}),u.YNc(3,k$,9,0,"ng-container",3),u.YNc(4,O$,2,1,"div",4),u.TgZ(5,"div",5,6),u.Hsn(7),u.TgZ(8,"span",7),u.YNc(9,B$,5,16,"label",8),u.qZA(),u.qZA(),u.YNc(10,V$,2,0,"div",9),u.qZA(),u.YNc(11,U$,2,4,"div",10),u.TgZ(12,"div",11),u.YNc(13,G$,2,1,"div",12),u.YNc(14,z$,5,2,"div",13),u.qZA(),u.qZA()),2&t&&(u.xp6(3),u.Q6J("ngIf","outline"==s.appearance),u.xp6(1),u.Q6J("ngIf",s._prefixChildren.length),u.xp6(5),u.Q6J("ngIf",s._hasFloatingLabel()),u.xp6(1),u.Q6J("ngIf",s._suffixChildren.length),u.xp6(1),u.Q6J("ngIf","outline"!=s.appearance),u.xp6(1),u.Q6J("ngSwitch",s._getDisplayedMessages()),u.xp6(1),u.Q6J("ngSwitchCase","error"),u.xp6(1),u.Q6J("ngSwitchCase","hint"))},directives:[dr,n3,Lr,wa],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[Y$.transitionMessages]},changeDetection:0}),i})(),ME=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Io,Ci,dO],Ci]}),i})();const hU=Qp({passive:!0});let tZ=(()=>{class i{constructor(t,s){this._platform=t,this._ngZone=s,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Ou.E;const s=Fs(t),o=this._monitoredElements.get(s);if(o)return o.subject;const a=new yt.x,l="cdk-text-field-autofilled",h=g=>{"cdk-text-field-autofill-start"!==g.animationName||s.classList.contains(l)?"cdk-text-field-autofill-end"===g.animationName&&s.classList.contains(l)&&(s.classList.remove(l),this._ngZone.run(()=>a.next({target:g.target,isAutofilled:!1}))):(s.classList.add(l),this._ngZone.run(()=>a.next({target:g.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{s.addEventListener("animationstart",h,hU),s.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(s,{subject:a,unlisten:()=>{s.removeEventListener("animationstart",h,hU)}}),a}stopMonitoring(t){const s=Fs(t),o=this._monitoredElements.get(s);o&&(o.unlisten(),o.subject.complete(),s.classList.remove("cdk-text-field-autofill-monitored"),s.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(s))}ngOnDestroy(){this._monitoredElements.forEach((t,s)=>this.stopMonitoring(s))}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(Mo),u.LFG(u.R0b))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),fU=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[nx]]}),i})();const pU=new u.OlP("MAT_INPUT_VALUE_ACCESSOR"),nZ=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let iZ=0;const rZ=oW(class{constructor(i,e,t,s){this._defaultErrorStateMatcher=i,this._parentForm=e,this._parentFormGroup=t,this.ngControl=s}});let qI=(()=>{class i extends rZ{constructor(t,s,o,a,l,h,g,_,b,x){super(h,a,l,o),this._elementRef=t,this._platform=s,this._autofillMonitor=_,this._formField=x,this._uid="mat-input-"+iZ++,this.focused=!1,this.stateChanges=new yt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(T=>K2().has(T));const S=this._elementRef.nativeElement,M=S.nodeName.toLowerCase();this._inputValueAccessor=g||S,this._previousNativeValue=this.value,this.id=this.id,s.IOS&&b.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",T=>{const I=T.target;!I.value&&0===I.selectionStart&&0===I.selectionEnd&&(I.setSelectionRange(1,1),I.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===M,this._isTextarea="textarea"===M,this._isInFormField=!!x,this._isNativeSelect&&(this.controlType=S.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=wi(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,s,o,a;return null!==(a=null!==(t=this._required)&&void 0!==t?t:null===(o=null===(s=this.ngControl)||void 0===s?void 0:s.control)||void 0===o?void 0:o.hasValidator(hf.required))&&void 0!==a&&a}set required(t){this._required=wi(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&K2().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=wi(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,s;const o=(null===(s=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===s?void 0:s.call(t))?null:this.placeholder;if(o!==this._previousPlaceholder){const a=this._elementRef.nativeElement;this._previousPlaceholder=o,o?a.setAttribute("placeholder",o):a.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){nZ.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,s=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&s&&s.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.SBq),u.Y36(Mo),u.Y36(tg,10),u.Y36(HI,8),u.Y36(Av,8),u.Y36(nB),u.Y36(pU,10),u.Y36(tZ),u.Y36(u.R0b),u.Y36(CF,8))},i.\u0275dir=u.lG2({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,s){1&t&&u.NdJ("focus",function(){return s._focusChanged(!0)})("blur",function(){return s._focusChanged(!1)})("input",function(){return s._onInput()}),2&t&&(u.Ikx("disabled",s.disabled)("required",s.required),u.uIk("id",s.id)("data-placeholder",s.placeholder)("name",s.name||null)("readonly",s.readonly&&!s._isNativeSelect||null)("aria-invalid",s.empty&&s.required?null:s.errorState)("aria-required",s.required),u.ekj("mat-input-server",s._isServer)("mat-native-select-inline",s._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[u._Bn([{provide:xF,useExisting:i}]),u.qOj,u.TTD]}),i})(),gU=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[nB],imports:[[fU,ME,Ci],fU,ME]}),i})(),EE=(()=>{class i{constructor(){this.label="",this.disabled=!1}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=u.Xpm({type:i,selectors:[["main-button"]],inputs:{label:"label",disabled:"disabled"},decls:3,vars:2,consts:[["mat-raised-button","","color","accent",3,"disabled"]],template:function(t,s){1&t&&(u.TgZ(0,"button",0),u.TgZ(1,"span"),u._uU(2),u.qZA(),u.qZA()),2&t&&(u.Q6J("disabled",s.disabled),u.xp6(2),u.Oqu(s.label))},directives:[wI],styles:['@charset "UTF-8";button[_ngcontent-%COMP%]{display:block;box-shadow:0 8px 16px #0003,0 6px 20px #00000030;border-radius:4px;border:none;text-align:center;padding:10px;transition:all .5s;width:100%!important;margin-bottom:15px;font-weight:700}button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;position:relative;transition:.5s}button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"\\bb";position:absolute;opacity:0;top:0;right:-20px;transition:.5s}button[_ngcontent-%COMP%]:hover:enabled{filter:brightness(1.25)}button[_ngcontent-%COMP%]:hover:enabled   span[_ngcontent-%COMP%]{padding-right:25px}button[_ngcontent-%COMP%]:hover:enabled   span[_ngcontent-%COMP%]:after{opacity:1;right:0}button[_ngcontent-%COMP%]:disabled, button[disabled][_ngcontent-%COMP%]{opacity:.5}']}),i})();function mU(i,e,t,s,o,a,l){try{var h=i[a](l),g=h.value}catch(_){return void t(_)}h.done?e(g):Promise.resolve(g).then(s,o)}const Va=1001,co=1003,vs=1006,Rv=1009,IE=1012,Pv=1015,yx=1016,bx=1020,Ua=1023,x0=1026,wx=1027,xx=2400,Cx=2401,kv=3e3,Wr=3001,RE=35044,PE=35048;class Ov{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[e]&&(s[e]=[]),-1===s[e].indexOf(t)&&s[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const s=this._listeners;return void 0!==s[e]&&-1!==s[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const o=this._listeners[e];if(void 0!==o){const a=o.indexOf(t);-1!==a&&o.splice(a,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const s=this._listeners[e.type];if(void 0!==s){e.target=this;const o=s.slice(0);for(let a=0,l=o.length;a<l;a++)o[a].call(this,e);e.target=null}}}const ua=[];for(let i=0;i<256;i++)ua[i]=(i<16?"0":"")+i.toString(16);const C0=Math.PI/180,kE=180/Math.PI;function Sc(){const i=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return(ua[255&i]+ua[i>>8&255]+ua[i>>16&255]+ua[i>>24&255]+"-"+ua[255&e]+ua[e>>8&255]+"-"+ua[e>>16&15|64]+ua[e>>24&255]+"-"+ua[63&t|128]+ua[t>>8&255]+"-"+ua[t>>16&255]+ua[t>>24&255]+ua[255&s]+ua[s>>8&255]+ua[s>>16&255]+ua[s>>24&255]).toUpperCase()}function da(i,e,t){return Math.max(e,Math.min(t,i))}function OE(i,e,t){return(1-t)*i+t*e}function BF(i){return 0==(i&i-1)&&0!==i}function QU(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}class rt{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,s=this.y,o=e.elements;return this.x=o[0]*t+o[3]*s+o[6],this.y=o[1]*t+o[4]*s+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(t,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,s=this.y-e.y;return t*t+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,s){return this.x=e.x+(t.x-e.x)*s,this.y=e.y+(t.y-e.y)*s,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,s){return void 0!==s&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const s=Math.cos(t),o=Math.sin(t),a=this.x-e.x,l=this.y-e.y;return this.x=a*s-l*o+e.x,this.y=a*o+l*s+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}rt.prototype.isVector2=!0;class zo{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,s,o,a,l,h,g,_){const b=this.elements;return b[0]=e,b[1]=o,b[2]=h,b[3]=t,b[4]=a,b[5]=g,b[6]=s,b[7]=l,b[8]=_,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,s=e.elements;return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],this}extractBasis(e,t,s){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const s=e.elements,o=t.elements,a=this.elements,l=s[0],h=s[3],g=s[6],_=s[1],b=s[4],x=s[7],S=s[2],M=s[5],T=s[8],I=o[0],L=o[3],k=o[6],R=o[1],U=o[4],N=o[7],j=o[2],K=o[5],ne=o[8];return a[0]=l*I+h*R+g*j,a[3]=l*L+h*U+g*K,a[6]=l*k+h*N+g*ne,a[1]=_*I+b*R+x*j,a[4]=_*L+b*U+x*K,a[7]=_*k+b*N+x*ne,a[2]=S*I+M*R+T*j,a[5]=S*L+M*U+T*K,a[8]=S*k+M*N+T*ne,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],s=e[1],o=e[2],a=e[3],l=e[4],h=e[5],g=e[6],_=e[7],b=e[8];return t*l*b-t*h*_-s*a*b+s*h*g+o*a*_-o*l*g}invert(){const e=this.elements,t=e[0],s=e[1],o=e[2],a=e[3],l=e[4],h=e[5],g=e[6],_=e[7],b=e[8],x=b*l-h*_,S=h*g-b*a,M=_*a-l*g,T=t*x+s*S+o*M;if(0===T)return this.set(0,0,0,0,0,0,0,0,0);const I=1/T;return e[0]=x*I,e[1]=(o*_-b*s)*I,e[2]=(h*s-o*l)*I,e[3]=S*I,e[4]=(b*t-o*g)*I,e[5]=(o*a-h*t)*I,e[6]=M*I,e[7]=(s*g-_*t)*I,e[8]=(l*t-s*a)*I,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,s,o,a,l,h){const g=Math.cos(a),_=Math.sin(a);return this.set(s*g,s*_,-s*(g*l+_*h)+l+e,-o*_,o*g,-o*(-_*l+g*h)+h+t,0,0,1),this}scale(e,t){const s=this.elements;return s[0]*=e,s[3]*=e,s[6]*=e,s[1]*=t,s[4]*=t,s[7]*=t,this}rotate(e){const t=Math.cos(e),s=Math.sin(e),o=this.elements,a=o[0],l=o[3],h=o[6],g=o[1],_=o[4],b=o[7];return o[0]=t*a+s*g,o[3]=t*l+s*_,o[6]=t*h+s*b,o[1]=-s*a+t*g,o[4]=-s*l+t*_,o[7]=-s*h+t*b,this}translate(e,t){const s=this.elements;return s[0]+=e*s[2],s[3]+=e*s[5],s[6]+=e*s[8],s[1]+=t*s[2],s[4]+=t*s[5],s[7]+=t*s[8],this}equals(e){const t=this.elements,s=e.elements;for(let o=0;o<9;o++)if(t[o]!==s[o])return!1;return!0}fromArray(e,t=0){for(let s=0;s<9;s++)this.elements[s]=e[s+t];return this}toArray(e=[],t=0){const s=this.elements;return e[t]=s[0],e[t+1]=s[1],e[t+2]=s[2],e[t+3]=s[3],e[t+4]=s[4],e[t+5]=s[5],e[t+6]=s[6],e[t+7]=s[7],e[t+8]=s[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function XU(i){for(let e=i.length-1;e>=0;--e)if(i[e]>65535)return!0;return!1}function FE(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}zo.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const eG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Zd={h:0,s:0,l:0},s1={h:0,s:0,l:0};function VF(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+6*(e-i)*t:t<.5?e:t<2/3?i+6*(e-i)*(2/3-t):i}function Ex(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function UF(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}let Dx,Ht=(()=>{class i{constructor(t,s,o){return void 0===s&&void 0===o?this.set(t):this.setRGB(t,s,o)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,s,o){return this.r=t,this.g=s,this.b=o,this}setHSL(t,s,o){if(t=function NF(i,e){return(i%e+e)%e}(t,1),s=da(s,0,1),o=da(o,0,1),0===s)this.r=this.g=this.b=o;else{const a=o<=.5?o*(1+s):o+s-o*s,l=2*o-a;this.r=VF(l,a,t+1/3),this.g=VF(l,a,t),this.b=VF(l,a,t-1/3)}return this}setStyle(t){function s(a){void 0!==a&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let o;if(o=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let a;const h=o[2];switch(o[1]){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,s(a[4]),this;if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return this.r=Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,s(a[4]),this;break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h)){const g=parseFloat(a[1])/360,_=parseInt(a[2],10)/100,b=parseInt(a[3],10)/100;return s(a[4]),this.setHSL(g,_,b)}}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(t)){const a=o[1],l=a.length;if(3===l)return this.r=parseInt(a.charAt(0)+a.charAt(0),16)/255,this.g=parseInt(a.charAt(1)+a.charAt(1),16)/255,this.b=parseInt(a.charAt(2)+a.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(a.charAt(0)+a.charAt(1),16)/255,this.g=parseInt(a.charAt(2)+a.charAt(3),16)/255,this.b=parseInt(a.charAt(4)+a.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const s=eG[t.toLowerCase()];return void 0!==s?this.setHex(s):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ex(t.r),this.g=Ex(t.g),this.b=Ex(t.b),this}copyLinearToSRGB(t){return this.r=UF(t.r),this.g=UF(t.g),this.b=UF(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const s=this.r,o=this.g,a=this.b,l=Math.max(s,o,a),h=Math.min(s,o,a);let g,_;const b=(h+l)/2;if(h===l)g=0,_=0;else{const x=l-h;switch(_=b<=.5?x/(l+h):x/(2-l-h),l){case s:g=(o-a)/x+(o<a?6:0);break;case o:g=(a-s)/x+2;break;case a:g=(s-o)/x+4}g/=6}return t.h=g,t.s=_,t.l=b,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,s,o){return this.getHSL(Zd),Zd.h+=t,Zd.s+=s,Zd.l+=o,this.setHSL(Zd.h,Zd.s,Zd.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,s){return this.r=t.r+s.r,this.g=t.g+s.g,this.b=t.b+s.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,s){return this.r+=(t.r-this.r)*s,this.g+=(t.g-this.g)*s,this.b+=(t.b-this.b)*s,this}lerpColors(t,s,o){return this.r=t.r+(s.r-t.r)*o,this.g=t.g+(s.g-t.g)*o,this.b=t.b+(s.b-t.b)*o,this}lerpHSL(t,s){this.getHSL(Zd),t.getHSL(s1);const o=OE(Zd.h,s1.h,s),a=OE(Zd.s,s1.s,s),l=OE(Zd.l,s1.l,s);return this.setHSL(o,a,l),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,s=0){return this.r=t[s],this.g=t[s+1],this.b=t[s+2],this}toArray(t=[],s=0){return t[s]=this.r,t[s+1]=this.g,t[s+2]=this.b,t}fromBufferAttribute(t,s){return this.r=t.getX(s),this.g=t.getY(s),this.b=t.getZ(s),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return i.NAMES=eG,i})();Ht.prototype.isColor=!0,Ht.prototype.r=1,Ht.prototype.g=1,Ht.prototype.b=1;class S0{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Dx&&(Dx=FE("canvas")),Dx.width=e.width,Dx.height=e.height;const s=Dx.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),t=Dx}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=FE("canvas");t.width=e.width,t.height=e.height;const s=t.getContext("2d");s.drawImage(e,0,0,e.width,e.height);const o=s.getImageData(0,0,e.width,e.height),a=o.data;for(let l=0;l<a.length;l++)a[l]=255*Ex(a[l]/255);return s.putImageData(o,0,0),t}if(e.data){const t=e.data.slice(0);for(let s=0;s<t.length;s++)t[s]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Ex(t[s]/255)):Ex(t[s]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let y9=0;class Eo extends Ov{constructor(e=Eo.DEFAULT_IMAGE,t=Eo.DEFAULT_MAPPING,s=Va,o=Va,a=vs,l=1008,h=Ua,g=Rv,_=1,b=kv){super(),Object.defineProperty(this,"id",{value:y9++}),this.uuid=Sc(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=s,this.wrapT=o,this.magFilter=a,this.minFilter=l,this.anisotropy=_,this.format=h,this.internalFormat=null,this.type=g,this.offset=new rt(0,0),this.repeat=new rt(1,1),this.center=new rt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new zo,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=b,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const s={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const o=this.image;if(void 0===o.uuid&&(o.uuid=Sc()),!t&&void 0===e.images[o.uuid]){let a;if(Array.isArray(o)){a=[];for(let l=0,h=o.length;l<h;l++)a.push(GF(o[l].isDataTexture?o[l].image:o[l]))}else a=GF(o);e.images[o.uuid]={uuid:o.uuid,url:a}}s.image=o.uuid}return"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),t||(e.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case Va:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case Va:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function GF(i){return"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&i instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&i instanceof ImageBitmap?S0.getDataURL(i):i.data?{data:Array.prototype.slice.call(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Eo.DEFAULT_IMAGE=void 0,Eo.DEFAULT_MAPPING=300,Eo.prototype.isTexture=!0;class cr{constructor(e=0,t=0,s=0,o=1){this.x=e,this.y=t,this.z=s,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,s,o){return this.x=e,this.y=t,this.z=s,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,s=this.y,o=this.z,a=this.w,l=e.elements;return this.x=l[0]*t+l[4]*s+l[8]*o+l[12]*a,this.y=l[1]*t+l[5]*s+l[9]*o+l[13]*a,this.z=l[2]*t+l[6]*s+l[10]*o+l[14]*a,this.w=l[3]*t+l[7]*s+l[11]*o+l[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,s,o,a;const l=.01,h=.1,g=e.elements,_=g[0],b=g[4],x=g[8],S=g[1],M=g[5],T=g[9],I=g[2],L=g[6],k=g[10];if(Math.abs(b-S)<l&&Math.abs(x-I)<l&&Math.abs(T-L)<l){if(Math.abs(b+S)<h&&Math.abs(x+I)<h&&Math.abs(T+L)<h&&Math.abs(_+M+k-3)<h)return this.set(1,0,0,0),this;t=Math.PI;const U=(_+1)/2,N=(M+1)/2,j=(k+1)/2,K=(b+S)/4,ne=(x+I)/4,de=(T+L)/4;return U>N&&U>j?U<l?(s=0,o=.707106781,a=.707106781):(s=Math.sqrt(U),o=K/s,a=ne/s):N>j?N<l?(s=.707106781,o=0,a=.707106781):(o=Math.sqrt(N),s=K/o,a=de/o):j<l?(s=.707106781,o=.707106781,a=0):(a=Math.sqrt(j),s=ne/a,o=de/a),this.set(s,o,a,t),this}let R=Math.sqrt((L-T)*(L-T)+(x-I)*(x-I)+(S-b)*(S-b));return Math.abs(R)<.001&&(R=1),this.x=(L-T)/R,this.y=(x-I)/R,this.z=(S-b)/R,this.w=Math.acos((_+M+k-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(t,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,s){return this.x=e.x+(t.x-e.x)*s,this.y=e.y+(t.y-e.y)*s,this.z=e.z+(t.z-e.z)*s,this.w=e.w+(t.w-e.w)*s,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,s){return void 0!==s&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}cr.prototype.isVector4=!0;class Vu extends Ov{constructor(e,t,s={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new cr(0,0,e,t),this.scissorTest=!1,this.viewport=new cr(0,0,e,t),this.texture=new Eo(void 0,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==s.generateMipmaps&&s.generateMipmaps,this.texture.internalFormat=void 0!==s.internalFormat?s.internalFormat:null,this.texture.minFilter=void 0!==s.minFilter?s.minFilter:vs,this.depthBuffer=void 0===s.depthBuffer||s.depthBuffer,this.stencilBuffer=void 0!==s.stencilBuffer&&s.stencilBuffer,this.depthTexture=void 0!==s.depthTexture?s.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,s=1){(this.width!==e||this.height!==t||this.depth!==s)&&(this.width=e,this.height=t,this.depth=s,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=s,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Vu.prototype.isWebGLRenderTarget=!0,class b9 extends Vu{constructor(e,t,s){super(e,t);const o=this.texture;this.texture=[];for(let a=0;a<s;a++)this.texture[a]=o.clone()}setSize(e,t,s=1){if(this.width!==e||this.height!==t||this.depth!==s){this.width=e,this.height=t,this.depth=s;for(let o=0,a=this.texture.length;o<a;o++)this.texture[o].image.width=e,this.texture[o].image.height=t,this.texture[o].image.depth=s;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,s=e.texture.length;t<s;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class HF extends Vu{constructor(e,t,s={}){super(e,t,s),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===s.ignoreDepth||s.ignoreDepth,this.useRenderToTexture=void 0!==s.useRenderToTexture&&s.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}HF.prototype.isWebGLMultisampleRenderTarget=!0;class jo{constructor(e=0,t=0,s=0,o=1){this._x=e,this._y=t,this._z=s,this._w=o}static slerp(e,t,s,o){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),s.slerpQuaternions(e,t,o)}static slerpFlat(e,t,s,o,a,l,h){let g=s[o+0],_=s[o+1],b=s[o+2],x=s[o+3];const S=a[l+0],M=a[l+1],T=a[l+2],I=a[l+3];if(0===h)return e[t+0]=g,e[t+1]=_,e[t+2]=b,void(e[t+3]=x);if(1===h)return e[t+0]=S,e[t+1]=M,e[t+2]=T,void(e[t+3]=I);if(x!==I||g!==S||_!==M||b!==T){let L=1-h;const k=g*S+_*M+b*T+x*I,R=k>=0?1:-1,U=1-k*k;if(U>Number.EPSILON){const j=Math.sqrt(U),K=Math.atan2(j,k*R);L=Math.sin(L*K)/j,h=Math.sin(h*K)/j}const N=h*R;if(g=g*L+S*N,_=_*L+M*N,b=b*L+T*N,x=x*L+I*N,L===1-h){const j=1/Math.sqrt(g*g+_*_+b*b+x*x);g*=j,_*=j,b*=j,x*=j}}e[t]=g,e[t+1]=_,e[t+2]=b,e[t+3]=x}static multiplyQuaternionsFlat(e,t,s,o,a,l){const h=s[o],g=s[o+1],_=s[o+2],b=s[o+3],x=a[l],S=a[l+1],M=a[l+2],T=a[l+3];return e[t]=h*T+b*x+g*M-_*S,e[t+1]=g*T+b*S+_*x-h*M,e[t+2]=_*T+b*M+h*S-g*x,e[t+3]=b*T-h*x-g*S-_*M,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,s,o){return this._x=e,this._y=t,this._z=s,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const s=e._x,o=e._y,a=e._z,l=e._order,h=Math.cos,g=Math.sin,_=h(s/2),b=h(o/2),x=h(a/2),S=g(s/2),M=g(o/2),T=g(a/2);switch(l){case"XYZ":this._x=S*b*x+_*M*T,this._y=_*M*x-S*b*T,this._z=_*b*T+S*M*x,this._w=_*b*x-S*M*T;break;case"YXZ":this._x=S*b*x+_*M*T,this._y=_*M*x-S*b*T,this._z=_*b*T-S*M*x,this._w=_*b*x+S*M*T;break;case"ZXY":this._x=S*b*x-_*M*T,this._y=_*M*x+S*b*T,this._z=_*b*T+S*M*x,this._w=_*b*x-S*M*T;break;case"ZYX":this._x=S*b*x-_*M*T,this._y=_*M*x+S*b*T,this._z=_*b*T-S*M*x,this._w=_*b*x+S*M*T;break;case"YZX":this._x=S*b*x+_*M*T,this._y=_*M*x+S*b*T,this._z=_*b*T-S*M*x,this._w=_*b*x-S*M*T;break;case"XZY":this._x=S*b*x-_*M*T,this._y=_*M*x-S*b*T,this._z=_*b*T+S*M*x,this._w=_*b*x+S*M*T;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const s=t/2,o=Math.sin(s);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,s=t[0],o=t[4],a=t[8],l=t[1],h=t[5],g=t[9],_=t[2],b=t[6],x=t[10],S=s+h+x;if(S>0){const M=.5/Math.sqrt(S+1);this._w=.25/M,this._x=(b-g)*M,this._y=(a-_)*M,this._z=(l-o)*M}else if(s>h&&s>x){const M=2*Math.sqrt(1+s-h-x);this._w=(b-g)/M,this._x=.25*M,this._y=(o+l)/M,this._z=(a+_)/M}else if(h>x){const M=2*Math.sqrt(1+h-s-x);this._w=(a-_)/M,this._x=(o+l)/M,this._y=.25*M,this._z=(g+b)/M}else{const M=2*Math.sqrt(1+x-s-h);this._w=(l-o)/M,this._x=(a+_)/M,this._y=(g+b)/M,this._z=.25*M}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let s=e.dot(t)+1;return s<Number.EPSILON?(s=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=s):(this._x=0,this._y=-e.z,this._z=e.y,this._w=s)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=s),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(da(this.dot(e),-1,1)))}rotateTowards(e,t){const s=this.angleTo(e);if(0===s)return this;const o=Math.min(1,t/s);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const s=e._x,o=e._y,a=e._z,l=e._w,h=t._x,g=t._y,_=t._z,b=t._w;return this._x=s*b+l*h+o*_-a*g,this._y=o*b+l*g+a*h-s*_,this._z=a*b+l*_+s*g-o*h,this._w=l*b-s*h-o*g-a*_,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const s=this._x,o=this._y,a=this._z,l=this._w;let h=l*e._w+s*e._x+o*e._y+a*e._z;if(h<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,h=-h):this.copy(e),h>=1)return this._w=l,this._x=s,this._y=o,this._z=a,this;const g=1-h*h;if(g<=Number.EPSILON){const M=1-t;return this._w=M*l+t*this._w,this._x=M*s+t*this._x,this._y=M*o+t*this._y,this._z=M*a+t*this._z,this.normalize(),this._onChangeCallback(),this}const _=Math.sqrt(g),b=Math.atan2(_,h),x=Math.sin((1-t)*b)/_,S=Math.sin(t*b)/_;return this._w=l*x+this._w*S,this._x=s*x+this._x*S,this._y=o*x+this._y*S,this._z=a*x+this._z*S,this._onChangeCallback(),this}slerpQuaternions(e,t,s){return this.copy(e).slerp(t,s)}random(){const e=Math.random(),t=Math.sqrt(1-e),s=Math.sqrt(e),o=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(o),s*Math.sin(a),s*Math.cos(a),t*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}jo.prototype.isQuaternion=!0;class J{constructor(e=0,t=0,s=0){this.x=e,this.y=t,this.z=s}set(e,t,s){return void 0===s&&(s=this.z),this.x=e,this.y=t,this.z=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(tG.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(tG.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,s=this.y,o=this.z,a=e.elements;return this.x=a[0]*t+a[3]*s+a[6]*o,this.y=a[1]*t+a[4]*s+a[7]*o,this.z=a[2]*t+a[5]*s+a[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,s=this.y,o=this.z,a=e.elements,l=1/(a[3]*t+a[7]*s+a[11]*o+a[15]);return this.x=(a[0]*t+a[4]*s+a[8]*o+a[12])*l,this.y=(a[1]*t+a[5]*s+a[9]*o+a[13])*l,this.z=(a[2]*t+a[6]*s+a[10]*o+a[14])*l,this}applyQuaternion(e){const t=this.x,s=this.y,o=this.z,a=e.x,l=e.y,h=e.z,g=e.w,_=g*t+l*o-h*s,b=g*s+h*t-a*o,x=g*o+a*s-l*t,S=-a*t-l*s-h*o;return this.x=_*g+S*-a+b*-h-x*-l,this.y=b*g+S*-l+x*-a-_*-h,this.z=x*g+S*-h+_*-l-b*-a,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,s=this.y,o=this.z,a=e.elements;return this.x=a[0]*t+a[4]*s+a[8]*o,this.y=a[1]*t+a[5]*s+a[9]*o,this.z=a[2]*t+a[6]*s+a[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(t,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,s){return this.x=e.x+(t.x-e.x)*s,this.y=e.y+(t.y-e.y)*s,this.z=e.z+(t.z-e.z)*s,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const s=e.x,o=e.y,a=e.z,l=t.x,h=t.y,g=t.z;return this.x=o*g-a*h,this.y=a*l-s*g,this.z=s*h-o*l,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const s=e.dot(this)/t;return this.copy(e).multiplyScalar(s)}projectOnPlane(e){return zF.copy(this).projectOnVector(e),this.sub(zF)}reflect(e){return this.sub(zF.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const s=this.dot(e)/t;return Math.acos(da(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,s=this.y-e.y,o=this.z-e.z;return t*t+s*s+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,s){const o=Math.sin(t)*e;return this.x=o*Math.sin(s),this.y=Math.cos(t)*e,this.z=o*Math.cos(s),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,s){return this.x=e*Math.sin(t),this.y=s,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),s=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=s,this.z=o,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,s){return void 0!==s&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,s=Math.sqrt(1-Z4(e,2));return this.x=s*Math.cos(t),this.y=s*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}J.prototype.isVector3=!0;const zF=new J,tG=new jo;class Uu{constructor(e=new J(1/0,1/0,1/0),t=new J(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,h=-1/0;for(let g=0,_=e.length;g<_;g+=3){const b=e[g],x=e[g+1],S=e[g+2];b<t&&(t=b),x<s&&(s=x),S<o&&(o=S),b>a&&(a=b),x>l&&(l=x),S>h&&(h=S)}return this.min.set(t,s,o),this.max.set(a,l,h),this}setFromBufferAttribute(e){let t=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,h=-1/0;for(let g=0,_=e.count;g<_;g++){const b=e.getX(g),x=e.getY(g),S=e.getZ(g);b<t&&(t=b),x<s&&(s=x),S<o&&(o=S),b>a&&(a=b),x>l&&(l=x),S>h&&(h=S)}return this.min.set(t,s,o),this.max.set(a,l,h),this}setFromPoints(e){this.makeEmpty();for(let t=0,s=e.length;t<s;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const s=M0.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const s=e.geometry;if(void 0!==s)if(t&&null!=s.attributes&&void 0!==s.attributes.position){const a=s.attributes.position;for(let l=0,h=a.count;l<h;l++)M0.fromBufferAttribute(a,l).applyMatrix4(e.matrixWorld),this.expandByPoint(M0)}else null===s.boundingBox&&s.computeBoundingBox(),jF.copy(s.boundingBox),jF.applyMatrix4(e.matrixWorld),this.union(jF);const o=e.children;for(let a=0,l=o.length;a<l;a++)this.expandByObject(o[a],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,M0),M0.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,s;return e.normal.x>0?(t=e.normal.x*this.min.x,s=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,s=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,s+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,s+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,s+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,s+=e.normal.z*this.min.z),t<=-e.constant&&s>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(LE),o1.subVectors(this.max,LE),Ax.subVectors(e.a,LE),Tx.subVectors(e.b,LE),Ix.subVectors(e.c,LE),Fv.subVectors(Tx,Ax),Lv.subVectors(Ix,Tx),E0.subVectors(Ax,Ix);let t=[0,-Fv.z,Fv.y,0,-Lv.z,Lv.y,0,-E0.z,E0.y,Fv.z,0,-Fv.x,Lv.z,0,-Lv.x,E0.z,0,-E0.x,-Fv.y,Fv.x,0,-Lv.y,Lv.x,0,-E0.y,E0.x,0];return!(!WF(t,Ax,Tx,Ix,o1)||(t=[1,0,0,0,1,0,0,0,1],!WF(t,Ax,Tx,Ix,o1)))&&(a1.crossVectors(Fv,Lv),t=[a1.x,a1.y,a1.z],WF(t,Ax,Tx,Ix,o1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return M0.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(M0).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(ng[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ng[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ng[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ng[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ng[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ng[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ng[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ng[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ng)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Uu.prototype.isBox3=!0;const ng=[new J,new J,new J,new J,new J,new J,new J,new J],M0=new J,jF=new Uu,Ax=new J,Tx=new J,Ix=new J,Fv=new J,Lv=new J,E0=new J,LE=new J,o1=new J,a1=new J,D0=new J;function WF(i,e,t,s,o){for(let a=0,l=i.length-3;a<=l;a+=3){D0.fromArray(i,a);const h=o.x*Math.abs(D0.x)+o.y*Math.abs(D0.y)+o.z*Math.abs(D0.z),g=e.dot(D0),_=t.dot(D0),b=s.dot(D0);if(Math.max(-Math.max(g,_,b),Math.min(g,_,b))>h)return!1}return!0}const w9=new Uu,nG=new J,l1=new J,qF=new J;class A0{constructor(e=new J,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const s=this.center;void 0!==t?s.copy(t):w9.setFromPoints(e).getCenter(s);let o=0;for(let a=0,l=e.length;a<l;a++)o=Math.max(o,s.distanceToSquared(e[a]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const s=this.center.distanceToSquared(e);return t.copy(e),s>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){qF.subVectors(e,this.center);const t=qF.lengthSq();if(t>this.radius*this.radius){const s=Math.sqrt(t),o=.5*(s-this.radius);this.center.add(qF.multiplyScalar(o/s)),this.radius+=o}return this}union(e){return!0===this.center.equals(e.center)?l1.set(0,0,1).multiplyScalar(e.radius):l1.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(nG.copy(e.center).add(l1)),this.expandByPoint(nG.copy(e.center).sub(l1)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ig=new J,YF=new J,c1=new J,Nv=new J,$F=new J,u1=new J,ZF=new J;class T0{constructor(e=new J,t=new J(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ig)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const s=t.dot(this.direction);return s<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(s).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ig.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ig.copy(this.direction).multiplyScalar(t).add(this.origin),ig.distanceToSquared(e))}distanceSqToSegment(e,t,s,o){YF.copy(e).add(t).multiplyScalar(.5),c1.copy(t).sub(e).normalize(),Nv.copy(this.origin).sub(YF);const a=.5*e.distanceTo(t),l=-this.direction.dot(c1),h=Nv.dot(this.direction),g=-Nv.dot(c1),_=Nv.lengthSq(),b=Math.abs(1-l*l);let x,S,M,T;if(b>0)if(x=l*g-h,S=l*h-g,T=a*b,x>=0)if(S>=-T)if(S<=T){const I=1/b;x*=I,S*=I,M=x*(x+l*S+2*h)+S*(l*x+S+2*g)+_}else S=a,x=Math.max(0,-(l*S+h)),M=-x*x+S*(S+2*g)+_;else S=-a,x=Math.max(0,-(l*S+h)),M=-x*x+S*(S+2*g)+_;else S<=-T?(x=Math.max(0,-(-l*a+h)),S=x>0?-a:Math.min(Math.max(-a,-g),a),M=-x*x+S*(S+2*g)+_):S<=T?(x=0,S=Math.min(Math.max(-a,-g),a),M=S*(S+2*g)+_):(x=Math.max(0,-(l*a+h)),S=x>0?a:Math.min(Math.max(-a,-g),a),M=-x*x+S*(S+2*g)+_);else S=l>0?-a:a,x=Math.max(0,-(l*S+h)),M=-x*x+S*(S+2*g)+_;return s&&s.copy(this.direction).multiplyScalar(x).add(this.origin),o&&o.copy(c1).multiplyScalar(S).add(YF),M}intersectSphere(e,t){ig.subVectors(e.center,this.origin);const s=ig.dot(this.direction),o=ig.dot(ig)-s*s,a=e.radius*e.radius;if(o>a)return null;const l=Math.sqrt(a-o),h=s-l,g=s+l;return h<0&&g<0?null:this.at(h<0?g:h,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const s=-(this.origin.dot(e.normal)+e.constant)/t;return s>=0?s:null}intersectPlane(e,t){const s=this.distanceToPlane(e);return null===s?null:this.at(s,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let s,o,a,l,h,g;const _=1/this.direction.x,b=1/this.direction.y,x=1/this.direction.z,S=this.origin;return _>=0?(s=(e.min.x-S.x)*_,o=(e.max.x-S.x)*_):(s=(e.max.x-S.x)*_,o=(e.min.x-S.x)*_),b>=0?(a=(e.min.y-S.y)*b,l=(e.max.y-S.y)*b):(a=(e.max.y-S.y)*b,l=(e.min.y-S.y)*b),s>l||a>o||((a>s||s!=s)&&(s=a),(l<o||o!=o)&&(o=l),x>=0?(h=(e.min.z-S.z)*x,g=(e.max.z-S.z)*x):(h=(e.max.z-S.z)*x,g=(e.min.z-S.z)*x),s>g||h>o)||((h>s||s!=s)&&(s=h),(g<o||o!=o)&&(o=g),o<0)?null:this.at(s>=0?s:o,t)}intersectsBox(e){return null!==this.intersectBox(e,ig)}intersectTriangle(e,t,s,o,a){$F.subVectors(t,e),u1.subVectors(s,e),ZF.crossVectors($F,u1);let h,l=this.direction.dot(ZF);if(l>0){if(o)return null;h=1}else{if(!(l<0))return null;h=-1,l=-l}Nv.subVectors(this.origin,e);const g=h*this.direction.dot(u1.crossVectors(Nv,u1));if(g<0)return null;const _=h*this.direction.dot($F.cross(Nv));if(_<0||g+_>l)return null;const b=-h*Nv.dot(ZF);return b<0?null:this.at(b/l,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class sn{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,s,o,a,l,h,g,_,b,x,S,M,T,I,L){const k=this.elements;return k[0]=e,k[4]=t,k[8]=s,k[12]=o,k[1]=a,k[5]=l,k[9]=h,k[13]=g,k[2]=_,k[6]=b,k[10]=x,k[14]=S,k[3]=M,k[7]=T,k[11]=I,k[15]=L,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new sn).fromArray(this.elements)}copy(e){const t=this.elements,s=e.elements;return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],this}copyPosition(e){const t=this.elements,s=e.elements;return t[12]=s[12],t[13]=s[13],t[14]=s[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,s){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(e,t,s){return this.set(e.x,t.x,s.x,0,e.y,t.y,s.y,0,e.z,t.z,s.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,s=e.elements,o=1/Rx.setFromMatrixColumn(e,0).length(),a=1/Rx.setFromMatrixColumn(e,1).length(),l=1/Rx.setFromMatrixColumn(e,2).length();return t[0]=s[0]*o,t[1]=s[1]*o,t[2]=s[2]*o,t[3]=0,t[4]=s[4]*a,t[5]=s[5]*a,t[6]=s[6]*a,t[7]=0,t[8]=s[8]*l,t[9]=s[9]*l,t[10]=s[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,s=e.x,o=e.y,a=e.z,l=Math.cos(s),h=Math.sin(s),g=Math.cos(o),_=Math.sin(o),b=Math.cos(a),x=Math.sin(a);if("XYZ"===e.order){const S=l*b,M=l*x,T=h*b,I=h*x;t[0]=g*b,t[4]=-g*x,t[8]=_,t[1]=M+T*_,t[5]=S-I*_,t[9]=-h*g,t[2]=I-S*_,t[6]=T+M*_,t[10]=l*g}else if("YXZ"===e.order){const S=g*b,M=g*x,T=_*b,I=_*x;t[0]=S+I*h,t[4]=T*h-M,t[8]=l*_,t[1]=l*x,t[5]=l*b,t[9]=-h,t[2]=M*h-T,t[6]=I+S*h,t[10]=l*g}else if("ZXY"===e.order){const S=g*b,M=g*x,T=_*b,I=_*x;t[0]=S-I*h,t[4]=-l*x,t[8]=T+M*h,t[1]=M+T*h,t[5]=l*b,t[9]=I-S*h,t[2]=-l*_,t[6]=h,t[10]=l*g}else if("ZYX"===e.order){const S=l*b,M=l*x,T=h*b,I=h*x;t[0]=g*b,t[4]=T*_-M,t[8]=S*_+I,t[1]=g*x,t[5]=I*_+S,t[9]=M*_-T,t[2]=-_,t[6]=h*g,t[10]=l*g}else if("YZX"===e.order){const S=l*g,M=l*_,T=h*g,I=h*_;t[0]=g*b,t[4]=I-S*x,t[8]=T*x+M,t[1]=x,t[5]=l*b,t[9]=-h*b,t[2]=-_*b,t[6]=M*x+T,t[10]=S-I*x}else if("XZY"===e.order){const S=l*g,M=l*_,T=h*g,I=h*_;t[0]=g*b,t[4]=-x,t[8]=_*b,t[1]=S*x+I,t[5]=l*b,t[9]=M*x-T,t[2]=T*x-M,t[6]=h*b,t[10]=I*x+S}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(x9,e,C9)}lookAt(e,t,s){const o=this.elements;return Mc.subVectors(e,t),0===Mc.lengthSq()&&(Mc.z=1),Mc.normalize(),Bv.crossVectors(s,Mc),0===Bv.lengthSq()&&(1===Math.abs(s.z)?Mc.x+=1e-4:Mc.z+=1e-4,Mc.normalize(),Bv.crossVectors(s,Mc)),Bv.normalize(),d1.crossVectors(Mc,Bv),o[0]=Bv.x,o[4]=d1.x,o[8]=Mc.x,o[1]=Bv.y,o[5]=d1.y,o[9]=Mc.y,o[2]=Bv.z,o[6]=d1.z,o[10]=Mc.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const s=e.elements,o=t.elements,a=this.elements,l=s[0],h=s[4],g=s[8],_=s[12],b=s[1],x=s[5],S=s[9],M=s[13],T=s[2],I=s[6],L=s[10],k=s[14],R=s[3],U=s[7],N=s[11],j=s[15],K=o[0],ne=o[4],de=o[8],Re=o[12],xe=o[1],W=o[5],ce=o[9],be=o[13],De=o[2],Ie=o[6],ae=o[10],ye=o[14],Ae=o[3],ht=o[7],Le=o[11],Je=o[15];return a[0]=l*K+h*xe+g*De+_*Ae,a[4]=l*ne+h*W+g*Ie+_*ht,a[8]=l*de+h*ce+g*ae+_*Le,a[12]=l*Re+h*be+g*ye+_*Je,a[1]=b*K+x*xe+S*De+M*Ae,a[5]=b*ne+x*W+S*Ie+M*ht,a[9]=b*de+x*ce+S*ae+M*Le,a[13]=b*Re+x*be+S*ye+M*Je,a[2]=T*K+I*xe+L*De+k*Ae,a[6]=T*ne+I*W+L*Ie+k*ht,a[10]=T*de+I*ce+L*ae+k*Le,a[14]=T*Re+I*be+L*ye+k*Je,a[3]=R*K+U*xe+N*De+j*Ae,a[7]=R*ne+U*W+N*Ie+j*ht,a[11]=R*de+U*ce+N*ae+j*Le,a[15]=R*Re+U*be+N*ye+j*Je,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],s=e[4],o=e[8],a=e[12],l=e[1],h=e[5],g=e[9],_=e[13],b=e[2],x=e[6],S=e[10],M=e[14];return e[3]*(+a*g*x-o*_*x-a*h*S+s*_*S+o*h*M-s*g*M)+e[7]*(+t*g*M-t*_*S+a*l*S-o*l*M+o*_*b-a*g*b)+e[11]*(+t*_*x-t*h*M-a*l*x+s*l*M+a*h*b-s*_*b)+e[15]*(-o*h*b-t*g*x+t*h*S+o*l*x-s*l*S+s*g*b)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,s){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=t,o[14]=s),this}invert(){const e=this.elements,t=e[0],s=e[1],o=e[2],a=e[3],l=e[4],h=e[5],g=e[6],_=e[7],b=e[8],x=e[9],S=e[10],M=e[11],T=e[12],I=e[13],L=e[14],k=e[15],R=x*L*_-I*S*_+I*g*M-h*L*M-x*g*k+h*S*k,U=T*S*_-b*L*_-T*g*M+l*L*M+b*g*k-l*S*k,N=b*I*_-T*x*_+T*h*M-l*I*M-b*h*k+l*x*k,j=T*x*g-b*I*g-T*h*S+l*I*S+b*h*L-l*x*L,K=t*R+s*U+o*N+a*j;if(0===K)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ne=1/K;return e[0]=R*ne,e[1]=(I*S*a-x*L*a-I*o*M+s*L*M+x*o*k-s*S*k)*ne,e[2]=(h*L*a-I*g*a+I*o*_-s*L*_-h*o*k+s*g*k)*ne,e[3]=(x*g*a-h*S*a-x*o*_+s*S*_+h*o*M-s*g*M)*ne,e[4]=U*ne,e[5]=(b*L*a-T*S*a+T*o*M-t*L*M-b*o*k+t*S*k)*ne,e[6]=(T*g*a-l*L*a-T*o*_+t*L*_+l*o*k-t*g*k)*ne,e[7]=(l*S*a-b*g*a+b*o*_-t*S*_-l*o*M+t*g*M)*ne,e[8]=N*ne,e[9]=(T*x*a-b*I*a-T*s*M+t*I*M+b*s*k-t*x*k)*ne,e[10]=(l*I*a-T*h*a+T*s*_-t*I*_-l*s*k+t*h*k)*ne,e[11]=(b*h*a-l*x*a-b*s*_+t*x*_+l*s*M-t*h*M)*ne,e[12]=j*ne,e[13]=(b*I*o-T*x*o+T*s*S-t*I*S-b*s*L+t*x*L)*ne,e[14]=(T*h*o-l*I*o-T*s*g+t*I*g+l*s*L-t*h*L)*ne,e[15]=(l*x*o-b*h*o+b*s*g-t*x*g-l*s*S+t*h*S)*ne,this}scale(e){const t=this.elements,s=e.x,o=e.y,a=e.z;return t[0]*=s,t[4]*=o,t[8]*=a,t[1]*=s,t[5]*=o,t[9]*=a,t[2]*=s,t[6]*=o,t[10]*=a,t[3]*=s,t[7]*=o,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,s){return this.set(1,0,0,e,0,1,0,t,0,0,1,s,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),s=Math.sin(e);return this.set(1,0,0,0,0,t,-s,0,0,s,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),s=Math.sin(e);return this.set(t,0,s,0,0,1,0,0,-s,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),s=Math.sin(e);return this.set(t,-s,0,0,s,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const s=Math.cos(t),o=Math.sin(t),a=1-s,l=e.x,h=e.y,g=e.z,_=a*l,b=a*h;return this.set(_*l+s,_*h-o*g,_*g+o*h,0,_*h+o*g,b*h+s,b*g-o*l,0,_*g-o*h,b*g+o*l,a*g*g+s,0,0,0,0,1),this}makeScale(e,t,s){return this.set(e,0,0,0,0,t,0,0,0,0,s,0,0,0,0,1),this}makeShear(e,t,s,o,a,l){return this.set(1,s,a,0,e,1,l,0,t,o,1,0,0,0,0,1),this}compose(e,t,s){const o=this.elements,a=t._x,l=t._y,h=t._z,g=t._w,_=a+a,b=l+l,x=h+h,S=a*_,M=a*b,T=a*x,I=l*b,L=l*x,k=h*x,R=g*_,U=g*b,N=g*x,j=s.x,K=s.y,ne=s.z;return o[0]=(1-(I+k))*j,o[1]=(M+N)*j,o[2]=(T-U)*j,o[3]=0,o[4]=(M-N)*K,o[5]=(1-(S+k))*K,o[6]=(L+R)*K,o[7]=0,o[8]=(T+U)*ne,o[9]=(L-R)*ne,o[10]=(1-(S+I))*ne,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,t,s){const o=this.elements;let a=Rx.set(o[0],o[1],o[2]).length();const l=Rx.set(o[4],o[5],o[6]).length(),h=Rx.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),e.x=o[12],e.y=o[13],e.z=o[14],Kd.copy(this);const _=1/a,b=1/l,x=1/h;return Kd.elements[0]*=_,Kd.elements[1]*=_,Kd.elements[2]*=_,Kd.elements[4]*=b,Kd.elements[5]*=b,Kd.elements[6]*=b,Kd.elements[8]*=x,Kd.elements[9]*=x,Kd.elements[10]*=x,t.setFromRotationMatrix(Kd),s.x=a,s.y=l,s.z=h,this}makePerspective(e,t,s,o,a,l){void 0===l&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const h=this.elements,_=2*a/(s-o),b=(t+e)/(t-e),x=(s+o)/(s-o),S=-(l+a)/(l-a),M=-2*l*a/(l-a);return h[0]=2*a/(t-e),h[4]=0,h[8]=b,h[12]=0,h[1]=0,h[5]=_,h[9]=x,h[13]=0,h[2]=0,h[6]=0,h[10]=S,h[14]=M,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,s,o,a,l){const h=this.elements,g=1/(t-e),_=1/(s-o),b=1/(l-a),x=(t+e)*g,S=(s+o)*_,M=(l+a)*b;return h[0]=2*g,h[4]=0,h[8]=0,h[12]=-x,h[1]=0,h[5]=2*_,h[9]=0,h[13]=-S,h[2]=0,h[6]=0,h[10]=-2*b,h[14]=-M,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,s=e.elements;for(let o=0;o<16;o++)if(t[o]!==s[o])return!1;return!0}fromArray(e,t=0){for(let s=0;s<16;s++)this.elements[s]=e[s+t];return this}toArray(e=[],t=0){const s=this.elements;return e[t]=s[0],e[t+1]=s[1],e[t+2]=s[2],e[t+3]=s[3],e[t+4]=s[4],e[t+5]=s[5],e[t+6]=s[6],e[t+7]=s[7],e[t+8]=s[8],e[t+9]=s[9],e[t+10]=s[10],e[t+11]=s[11],e[t+12]=s[12],e[t+13]=s[13],e[t+14]=s[14],e[t+15]=s[15],e}}sn.prototype.isMatrix4=!0;const Rx=new J,Kd=new sn,x9=new J(0,0,0),C9=new J(1,1,1),Bv=new J,d1=new J,Mc=new J,iG=new sn,rG=new jo;class Px{constructor(e=0,t=0,s=0,o=Px.DefaultOrder){this._x=e,this._y=t,this._z=s,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,s,o=this._order){return this._x=e,this._y=t,this._z=s,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,s=!0){const o=e.elements,a=o[0],l=o[4],h=o[8],g=o[1],_=o[5],b=o[9],x=o[2],S=o[6],M=o[10];switch(t){case"XYZ":this._y=Math.asin(da(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-b,M),this._z=Math.atan2(-l,a)):(this._x=Math.atan2(S,_),this._z=0);break;case"YXZ":this._x=Math.asin(-da(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(h,M),this._z=Math.atan2(g,_)):(this._y=Math.atan2(-x,a),this._z=0);break;case"ZXY":this._x=Math.asin(da(S,-1,1)),Math.abs(S)<.9999999?(this._y=Math.atan2(-x,M),this._z=Math.atan2(-l,_)):(this._y=0,this._z=Math.atan2(g,a));break;case"ZYX":this._y=Math.asin(-da(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(S,M),this._z=Math.atan2(g,a)):(this._x=0,this._z=Math.atan2(-l,_));break;case"YZX":this._z=Math.asin(da(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(-b,_),this._y=Math.atan2(-x,a)):(this._x=0,this._y=Math.atan2(h,M));break;case"XZY":this._z=Math.asin(-da(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(S,_),this._y=Math.atan2(h,a)):(this._x=Math.atan2(-b,M),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===s&&this._onChangeCallback(),this}setFromQuaternion(e,t,s){return iG.makeRotationFromQuaternion(e),this.setFromRotationMatrix(iG,t,s)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return rG.setFromEuler(this),this.setFromQuaternion(rG,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new J(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Px.prototype.isEuler=!0,Px.DefaultOrder="XYZ",Px.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class KF{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let S9=0;const sG=new J,kx=new jo,rg=new sn,h1=new J,NE=new J,M9=new J,E9=new jo,oG=new J(1,0,0),aG=new J(0,1,0),lG=new J(0,0,1),D9={type:"added"},cG={type:"removed"};class Gi extends Ov{constructor(){super(),Object.defineProperty(this,"id",{value:S9++}),this.uuid=Sc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gi.DefaultUp.clone();const e=new J,t=new Px,s=new jo,o=new J(1,1,1);t._onChange(function a(){s.setFromEuler(t,!1)}),s._onChange(function l(){t.setFromQuaternion(s,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new sn},normalMatrix:{value:new zo}}),this.matrix=new sn,this.matrixWorld=new sn,this.matrixAutoUpdate=Gi.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new KF,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return kx.setFromAxisAngle(e,t),this.quaternion.multiply(kx),this}rotateOnWorldAxis(e,t){return kx.setFromAxisAngle(e,t),this.quaternion.premultiply(kx),this}rotateX(e){return this.rotateOnAxis(oG,e)}rotateY(e){return this.rotateOnAxis(aG,e)}rotateZ(e){return this.rotateOnAxis(lG,e)}translateOnAxis(e,t){return sG.copy(e).applyQuaternion(this.quaternion),this.position.add(sG.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(oG,e)}translateY(e){return this.translateOnAxis(aG,e)}translateZ(e){return this.translateOnAxis(lG,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(rg.copy(this.matrixWorld).invert())}lookAt(e,t,s){e.isVector3?h1.copy(e):h1.set(e,t,s);const o=this.parent;this.updateWorldMatrix(!0,!1),NE.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?rg.lookAt(NE,h1,this.up):rg.lookAt(h1,NE,this.up),this.quaternion.setFromRotationMatrix(rg),o&&(rg.extractRotation(o.matrixWorld),kx.setFromRotationMatrix(rg),this.quaternion.premultiply(kx.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(D9)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(cG)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(cG)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),rg.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),rg.multiply(e.parent.matrixWorld)),e.applyMatrix4(rg),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let s=0,o=this.children.length;s<o;s++){const l=this.children[s].getObjectByProperty(e,t);if(void 0!==l)return l}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(NE,e,M9),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(NE,E9,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let s=0,o=t.length;s<o;s++)t[s].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let s=0,o=t.length;s<o;s++)t[s].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let s=0,o=t.length;s<o;s++)t[s].updateMatrixWorld(e)}updateWorldMatrix(e,t){const s=this.parent;if(!0===e&&null!==s&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const o=this.children;for(let a=0,l=o.length;a<l;a++)o[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,s={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},s.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const o={};function a(h,g){return void 0===h[g.uuid]&&(h[g.uuid]=g.toJSON(e)),g.uuid}if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(o.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=a(e.geometries,this.geometry);const h=this.geometry.parameters;if(void 0!==h&&void 0!==h.shapes){const g=h.shapes;if(Array.isArray(g))for(let _=0,b=g.length;_<b;_++)a(e.shapes,g[_]);else a(e.shapes,g)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(a(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const h=[];for(let g=0,_=this.material.length;g<_;g++)h.push(a(e.materials,this.material[g]));o.material=h}else o.material=a(e.materials,this.material);if(this.children.length>0){o.children=[];for(let h=0;h<this.children.length;h++)o.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let h=0;h<this.animations.length;h++)o.animations.push(a(e.animations,this.animations[h]))}if(t){const h=l(e.geometries),g=l(e.materials),_=l(e.textures),b=l(e.images),x=l(e.shapes),S=l(e.skeletons),M=l(e.animations);h.length>0&&(s.geometries=h),g.length>0&&(s.materials=g),_.length>0&&(s.textures=_),b.length>0&&(s.images=b),x.length>0&&(s.shapes=x),S.length>0&&(s.skeletons=S),M.length>0&&(s.animations=M)}return s.object=o,s;function l(h){const g=[];for(const _ in h){const b=h[_];delete b.metadata,g.push(b)}return g}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let s=0;s<e.children.length;s++)this.add(e.children[s].clone());return this}}Gi.DefaultUp=new J(0,1,0),Gi.DefaultMatrixAutoUpdate=!0,Gi.prototype.isObject3D=!0;const Jd=new J,sg=new J,JF=new J,og=new J,Ox=new J,Fx=new J,uG=new J,QF=new J,XF=new J,eL=new J;class uo{constructor(e=new J,t=new J,s=new J){this.a=e,this.b=t,this.c=s}static getNormal(e,t,s,o){o.subVectors(s,t),Jd.subVectors(e,t),o.cross(Jd);const a=o.lengthSq();return a>0?o.multiplyScalar(1/Math.sqrt(a)):o.set(0,0,0)}static getBarycoord(e,t,s,o,a){Jd.subVectors(o,t),sg.subVectors(s,t),JF.subVectors(e,t);const l=Jd.dot(Jd),h=Jd.dot(sg),g=Jd.dot(JF),_=sg.dot(sg),b=sg.dot(JF),x=l*_-h*h;if(0===x)return a.set(-2,-1,-1);const S=1/x,M=(_*g-h*b)*S,T=(l*b-h*g)*S;return a.set(1-M-T,T,M)}static containsPoint(e,t,s,o){return this.getBarycoord(e,t,s,o,og),og.x>=0&&og.y>=0&&og.x+og.y<=1}static getUV(e,t,s,o,a,l,h,g){return this.getBarycoord(e,t,s,o,og),g.set(0,0),g.addScaledVector(a,og.x),g.addScaledVector(l,og.y),g.addScaledVector(h,og.z),g}static isFrontFacing(e,t,s,o){return Jd.subVectors(s,t),sg.subVectors(e,t),Jd.cross(sg).dot(o)<0}set(e,t,s){return this.a.copy(e),this.b.copy(t),this.c.copy(s),this}setFromPointsAndIndices(e,t,s,o){return this.a.copy(e[t]),this.b.copy(e[s]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,t,s,o){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,s),this.c.fromBufferAttribute(e,o),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Jd.subVectors(this.c,this.b),sg.subVectors(this.a,this.b),.5*Jd.cross(sg).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return uo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return uo.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,s,o,a){return uo.getUV(e,this.a,this.b,this.c,t,s,o,a)}containsPoint(e){return uo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return uo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const s=this.a,o=this.b,a=this.c;let l,h;Ox.subVectors(o,s),Fx.subVectors(a,s),QF.subVectors(e,s);const g=Ox.dot(QF),_=Fx.dot(QF);if(g<=0&&_<=0)return t.copy(s);XF.subVectors(e,o);const b=Ox.dot(XF),x=Fx.dot(XF);if(b>=0&&x<=b)return t.copy(o);const S=g*x-b*_;if(S<=0&&g>=0&&b<=0)return l=g/(g-b),t.copy(s).addScaledVector(Ox,l);eL.subVectors(e,a);const M=Ox.dot(eL),T=Fx.dot(eL);if(T>=0&&M<=T)return t.copy(a);const I=M*_-g*T;if(I<=0&&_>=0&&T<=0)return h=_/(_-T),t.copy(s).addScaledVector(Fx,h);const L=b*T-M*x;if(L<=0&&x-b>=0&&M-T>=0)return uG.subVectors(a,o),h=(x-b)/(x-b+(M-T)),t.copy(o).addScaledVector(uG,h);const k=1/(L+I+S);return l=I*k,h=S*k,t.copy(s).addScaledVector(Ox,l).addScaledVector(Fx,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let A9=0;class ha extends Ov{constructor(){super(),Object.defineProperty(this,"id",{value:A9++}),this.uuid=Sc(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const s=e[t];if(void 0===s){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===s;continue}const o=this[t];void 0!==o?o&&o.isColor?o.set(s):o&&o.isVector3&&s&&s.isVector3?o.copy(s):this[t]=s:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const s={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function o(a){const l=[];for(const h in a){const g=a[h];delete g.metadata,l.push(g)}return l}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),void 0!==this.roughness&&(s.roughness=this.roughness),void 0!==this.metalness&&(s.metalness=this.metalness),void 0!==this.sheen&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(s.shininess=this.shininess),void 0!==this.clearcoat&&(s.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(e).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(e).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(e).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(e).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(e).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(s.combine=this.combine)),void 0!==this.envMapIntensity&&(s.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(s.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(s.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(s.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(s.size=this.size),null!==this.shadowSide&&(s.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(s.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(s.blending=this.blending),0!==this.side&&(s.side=this.side),this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),!0===this.transparent&&(s.transparent=this.transparent),s.depthFunc=this.depthFunc,s.depthTest=this.depthTest,s.depthWrite=this.depthWrite,s.colorWrite=this.colorWrite,s.stencilWrite=this.stencilWrite,s.stencilWriteMask=this.stencilWriteMask,s.stencilFunc=this.stencilFunc,s.stencilRef=this.stencilRef,s.stencilFuncMask=this.stencilFuncMask,s.stencilFail=this.stencilFail,s.stencilZFail=this.stencilZFail,s.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(s.rotation=this.rotation),!0===this.polygonOffset&&(s.polygonOffset=!0),0!==this.polygonOffsetFactor&&(s.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(s.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(s.linewidth=this.linewidth),void 0!==this.dashSize&&(s.dashSize=this.dashSize),void 0!==this.gapSize&&(s.gapSize=this.gapSize),void 0!==this.scale&&(s.scale=this.scale),!0===this.dithering&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(s.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(s.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(s.wireframe=this.wireframe),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(s.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(s.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(s.flatShading=this.flatShading),!1===this.visible&&(s.visible=!1),!1===this.toneMapped&&(s.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),t){const a=o(e.textures),l=o(e.images);a.length>0&&(s.textures=a),l.length>0&&(s.images=l)}return s}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let s=null;if(null!==t){const o=t.length;s=new Array(o);for(let a=0;a!==o;++a)s[a]=t[a].clone()}return this.clippingPlanes=s,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}ha.prototype.isMaterial=!0;class Vv extends ha{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Vv.prototype.isMeshBasicMaterial=!0;const Cr=new J,f1=new rt;class gr{constructor(e,t,s){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===s,this.usage=RE,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,s){e*=this.itemSize,s*=t.itemSize;for(let o=0,a=this.itemSize;o<a;o++)this.array[e+o]=t.array[s+o];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let s=0;for(let o=0,a=e.length;o<a;o++){let l=e[o];void 0===l&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),l=new Ht),t[s++]=l.r,t[s++]=l.g,t[s++]=l.b}return this}copyVector2sArray(e){const t=this.array;let s=0;for(let o=0,a=e.length;o<a;o++){let l=e[o];void 0===l&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),l=new rt),t[s++]=l.x,t[s++]=l.y}return this}copyVector3sArray(e){const t=this.array;let s=0;for(let o=0,a=e.length;o<a;o++){let l=e[o];void 0===l&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),l=new J),t[s++]=l.x,t[s++]=l.y,t[s++]=l.z}return this}copyVector4sArray(e){const t=this.array;let s=0;for(let o=0,a=e.length;o<a;o++){let l=e[o];void 0===l&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),l=new cr),t[s++]=l.x,t[s++]=l.y,t[s++]=l.z,t[s++]=l.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,s=this.count;t<s;t++)f1.fromBufferAttribute(this,t),f1.applyMatrix3(e),this.setXY(t,f1.x,f1.y);else if(3===this.itemSize)for(let t=0,s=this.count;t<s;t++)Cr.fromBufferAttribute(this,t),Cr.applyMatrix3(e),this.setXYZ(t,Cr.x,Cr.y,Cr.z);return this}applyMatrix4(e){for(let t=0,s=this.count;t<s;t++)Cr.x=this.getX(t),Cr.y=this.getY(t),Cr.z=this.getZ(t),Cr.applyMatrix4(e),this.setXYZ(t,Cr.x,Cr.y,Cr.z);return this}applyNormalMatrix(e){for(let t=0,s=this.count;t<s;t++)Cr.x=this.getX(t),Cr.y=this.getY(t),Cr.z=this.getZ(t),Cr.applyNormalMatrix(e),this.setXYZ(t,Cr.x,Cr.y,Cr.z);return this}transformDirection(e){for(let t=0,s=this.count;t<s;t++)Cr.x=this.getX(t),Cr.y=this.getY(t),Cr.z=this.getZ(t),Cr.transformDirection(e),this.setXYZ(t,Cr.x,Cr.y,Cr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,s){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=s,this}setXYZ(e,t,s,o){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=s,this.array[e+2]=o,this}setXYZW(e,t,s,o,a){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=s,this.array[e+2]=o,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==RE&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}gr.prototype.isBufferAttribute=!0;class tL extends gr{constructor(e,t,s){super(new Uint16Array(e),t,s)}}class nL extends gr{constructor(e,t,s){super(new Uint32Array(e),t,s)}}(class O9 extends gr{constructor(e,t,s){super(new Uint16Array(e),t,s)}}).prototype.isFloat16BufferAttribute=!0;class en extends gr{constructor(e,t,s){super(new Float32Array(e),t,s)}}let L9=0;const Gu=new sn,iL=new Gi,Lx=new J,Ec=new Uu,BE=new Uu,Wo=new J;class In extends Ov{constructor(){super(),Object.defineProperty(this,"id",{value:L9++}),this.uuid=Sc(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(XU(e)?nL:tL)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,s=0){this.groups.push({start:e,count:t,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const s=this.attributes.normal;if(void 0!==s){const a=(new zo).getNormalMatrix(e);s.applyNormalMatrix(a),s.needsUpdate=!0}const o=this.attributes.tangent;return void 0!==o&&(o.transformDirection(e),o.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Gu.makeRotationFromQuaternion(e),this.applyMatrix4(Gu),this}rotateX(e){return Gu.makeRotationX(e),this.applyMatrix4(Gu),this}rotateY(e){return Gu.makeRotationY(e),this.applyMatrix4(Gu),this}rotateZ(e){return Gu.makeRotationZ(e),this.applyMatrix4(Gu),this}translate(e,t,s){return Gu.makeTranslation(e,t,s),this.applyMatrix4(Gu),this}scale(e,t,s){return Gu.makeScale(e,t,s),this.applyMatrix4(Gu),this}lookAt(e){return iL.lookAt(e),iL.updateMatrix(),this.applyMatrix4(iL.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Lx).negate(),this.translate(Lx.x,Lx.y,Lx.z),this}setFromPoints(e){const t=[];for(let s=0,o=e.length;s<o;s++){const a=e[s];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new en(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Uu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)Ec.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Wo.addVectors(this.boundingBox.min,Ec.min),this.boundingBox.expandByPoint(Wo),Wo.addVectors(this.boundingBox.max,Ec.max),this.boundingBox.expandByPoint(Wo)):(this.boundingBox.expandByPoint(Ec.min),this.boundingBox.expandByPoint(Ec.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new A0);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new J,1/0);if(e){const s=this.boundingSphere.center;if(Ec.setFromBufferAttribute(e),t)for(let a=0,l=t.length;a<l;a++)BE.setFromBufferAttribute(t[a]),this.morphTargetsRelative?(Wo.addVectors(Ec.min,BE.min),Ec.expandByPoint(Wo),Wo.addVectors(Ec.max,BE.max),Ec.expandByPoint(Wo)):(Ec.expandByPoint(BE.min),Ec.expandByPoint(BE.max));Ec.getCenter(s);let o=0;for(let a=0,l=e.count;a<l;a++)Wo.fromBufferAttribute(e,a),o=Math.max(o,s.distanceToSquared(Wo));if(t)for(let a=0,l=t.length;a<l;a++){const h=t[a],g=this.morphTargetsRelative;for(let _=0,b=h.count;_<b;_++)Wo.fromBufferAttribute(h,_),g&&(Lx.fromBufferAttribute(e,_),Wo.add(Lx)),o=Math.max(o,s.distanceToSquared(Wo))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const s=e.array,o=t.position.array,a=t.normal.array,l=t.uv.array,h=o.length/3;void 0===t.tangent&&this.setAttribute("tangent",new gr(new Float32Array(4*h),4));const g=t.tangent.array,_=[],b=[];for(let xe=0;xe<h;xe++)_[xe]=new J,b[xe]=new J;const x=new J,S=new J,M=new J,T=new rt,I=new rt,L=new rt,k=new J,R=new J;function U(xe,W,ce){x.fromArray(o,3*xe),S.fromArray(o,3*W),M.fromArray(o,3*ce),T.fromArray(l,2*xe),I.fromArray(l,2*W),L.fromArray(l,2*ce),S.sub(x),M.sub(x),I.sub(T),L.sub(T);const be=1/(I.x*L.y-L.x*I.y);!isFinite(be)||(k.copy(S).multiplyScalar(L.y).addScaledVector(M,-I.y).multiplyScalar(be),R.copy(M).multiplyScalar(I.x).addScaledVector(S,-L.x).multiplyScalar(be),_[xe].add(k),_[W].add(k),_[ce].add(k),b[xe].add(R),b[W].add(R),b[ce].add(R))}let N=this.groups;0===N.length&&(N=[{start:0,count:s.length}]);for(let xe=0,W=N.length;xe<W;++xe){const ce=N[xe],be=ce.start;for(let Ie=be,ae=be+ce.count;Ie<ae;Ie+=3)U(s[Ie+0],s[Ie+1],s[Ie+2])}const j=new J,K=new J,ne=new J,de=new J;function Re(xe){ne.fromArray(a,3*xe),de.copy(ne);const W=_[xe];j.copy(W),j.sub(ne.multiplyScalar(ne.dot(W))).normalize(),K.crossVectors(de,W);const be=K.dot(b[xe])<0?-1:1;g[4*xe]=j.x,g[4*xe+1]=j.y,g[4*xe+2]=j.z,g[4*xe+3]=be}for(let xe=0,W=N.length;xe<W;++xe){const ce=N[xe],be=ce.start;for(let Ie=be,ae=be+ce.count;Ie<ae;Ie+=3)Re(s[Ie+0]),Re(s[Ie+1]),Re(s[Ie+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let s=this.getAttribute("normal");if(void 0===s)s=new gr(new Float32Array(3*t.count),3),this.setAttribute("normal",s);else for(let S=0,M=s.count;S<M;S++)s.setXYZ(S,0,0,0);const o=new J,a=new J,l=new J,h=new J,g=new J,_=new J,b=new J,x=new J;if(e)for(let S=0,M=e.count;S<M;S+=3){const T=e.getX(S+0),I=e.getX(S+1),L=e.getX(S+2);o.fromBufferAttribute(t,T),a.fromBufferAttribute(t,I),l.fromBufferAttribute(t,L),b.subVectors(l,a),x.subVectors(o,a),b.cross(x),h.fromBufferAttribute(s,T),g.fromBufferAttribute(s,I),_.fromBufferAttribute(s,L),h.add(b),g.add(b),_.add(b),s.setXYZ(T,h.x,h.y,h.z),s.setXYZ(I,g.x,g.y,g.z),s.setXYZ(L,_.x,_.y,_.z)}else for(let S=0,M=t.count;S<M;S+=3)o.fromBufferAttribute(t,S+0),a.fromBufferAttribute(t,S+1),l.fromBufferAttribute(t,S+2),b.subVectors(l,a),x.subVectors(o,a),b.cross(x),s.setXYZ(S+0,b.x,b.y,b.z),s.setXYZ(S+1,b.x,b.y,b.z),s.setXYZ(S+2,b.x,b.y,b.z);this.normalizeNormals(),s.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const s=this.attributes;for(const o in s){if(void 0===e.attributes[o])continue;const l=s[o].array,h=e.attributes[o],g=h.array,_=h.itemSize*t,b=Math.min(g.length,l.length-_);for(let x=0,S=_;x<b;x++,S++)l[S]=g[x]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,s=e.count;t<s;t++)Wo.fromBufferAttribute(e,t),Wo.normalize(),e.setXYZ(t,Wo.x,Wo.y,Wo.z)}toNonIndexed(){function e(h,g){const _=h.array,b=h.itemSize,x=h.normalized,S=new _.constructor(g.length*b);let M=0,T=0;for(let I=0,L=g.length;I<L;I++){M=h.isInterleavedBufferAttribute?g[I]*h.data.stride+h.offset:g[I]*b;for(let k=0;k<b;k++)S[T++]=_[M++]}return new gr(S,b,x)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new In,s=this.index.array,o=this.attributes;for(const h in o){const _=e(o[h],s);t.setAttribute(h,_)}const a=this.morphAttributes;for(const h in a){const g=[],_=a[h];for(let b=0,x=_.length;b<x;b++){const M=e(_[b],s);g.push(M)}t.morphAttributes[h]=g}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let h=0,g=l.length;h<g;h++){const _=l[h];t.addGroup(_.start,_.count,_.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const g=this.parameters;for(const _ in g)void 0!==g[_]&&(e[_]=g[_]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const s=this.attributes;for(const g in s)e.data.attributes[g]=s[g].toJSON(e.data);const o={};let a=!1;for(const g in this.morphAttributes){const _=this.morphAttributes[g],b=[];for(let x=0,S=_.length;x<S;x++)b.push(_[x].toJSON(e.data));b.length>0&&(o[g]=b,a=!0)}a&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const h=this.boundingSphere;return null!==h&&(e.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const s=e.index;null!==s&&this.setIndex(s.clone(t));const o=e.attributes;for(const _ in o)this.setAttribute(_,o[_].clone(t));const a=e.morphAttributes;for(const _ in a){const b=[],x=a[_];for(let S=0,M=x.length;S<M;S++)b.push(x[S].clone(t));this.morphAttributes[_]=b}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let _=0,b=l.length;_<b;_++){const x=l[_];this.addGroup(x.start,x.count,x.materialIndex)}const h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());const g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}In.prototype.isBufferGeometry=!0;const dG=new sn,Nx=new T0,rL=new A0,Uv=new J,Gv=new J,Hv=new J,sL=new J,oL=new J,aL=new J,p1=new J,g1=new J,m1=new J,v1=new rt,_1=new rt,y1=new rt,lL=new J,b1=new J;class Do extends Gi{constructor(e=new In,t=new Vv){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,s=Object.keys(t);if(s.length>0){const o=t[s[0]];if(void 0!==o){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=o.length;a<l;a++){const h=o[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=a}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const s=this.geometry,o=this.material,a=this.matrixWorld;if(void 0===o||(null===s.boundingSphere&&s.computeBoundingSphere(),rL.copy(s.boundingSphere),rL.applyMatrix4(a),!1===e.ray.intersectsSphere(rL))||(dG.copy(a).invert(),Nx.copy(e.ray).applyMatrix4(dG),null!==s.boundingBox&&!1===Nx.intersectsBox(s.boundingBox)))return;let l;if(s.isBufferGeometry){const h=s.index,g=s.attributes.position,_=s.morphAttributes.position,b=s.morphTargetsRelative,x=s.attributes.uv,S=s.attributes.uv2,M=s.groups,T=s.drawRange;if(null!==h)if(Array.isArray(o))for(let I=0,L=M.length;I<L;I++){const k=M[I],R=o[k.materialIndex];for(let j=Math.max(k.start,T.start),K=Math.min(h.count,Math.min(k.start+k.count,T.start+T.count));j<K;j+=3){const ne=h.getX(j),de=h.getX(j+1),Re=h.getX(j+2);l=w1(this,R,e,Nx,g,_,b,x,S,ne,de,Re),l&&(l.faceIndex=Math.floor(j/3),l.face.materialIndex=k.materialIndex,t.push(l))}}else for(let k=Math.max(0,T.start),R=Math.min(h.count,T.start+T.count);k<R;k+=3){const U=h.getX(k),N=h.getX(k+1),j=h.getX(k+2);l=w1(this,o,e,Nx,g,_,b,x,S,U,N,j),l&&(l.faceIndex=Math.floor(k/3),t.push(l))}else if(void 0!==g)if(Array.isArray(o))for(let I=0,L=M.length;I<L;I++){const k=M[I],R=o[k.materialIndex];for(let j=Math.max(k.start,T.start),K=Math.min(g.count,Math.min(k.start+k.count,T.start+T.count));j<K;j+=3)l=w1(this,R,e,Nx,g,_,b,x,S,j,j+1,j+2),l&&(l.faceIndex=Math.floor(j/3),l.face.materialIndex=k.materialIndex,t.push(l))}else for(let k=Math.max(0,T.start),R=Math.min(g.count,T.start+T.count);k<R;k+=3)l=w1(this,o,e,Nx,g,_,b,x,S,k,k+1,k+2),l&&(l.faceIndex=Math.floor(k/3),t.push(l))}else s.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function w1(i,e,t,s,o,a,l,h,g,_,b,x){Uv.fromBufferAttribute(o,_),Gv.fromBufferAttribute(o,b),Hv.fromBufferAttribute(o,x);const S=i.morphTargetInfluences;if(a&&S){p1.set(0,0,0),g1.set(0,0,0),m1.set(0,0,0);for(let T=0,I=a.length;T<I;T++){const L=S[T],k=a[T];0!==L&&(sL.fromBufferAttribute(k,_),oL.fromBufferAttribute(k,b),aL.fromBufferAttribute(k,x),l?(p1.addScaledVector(sL,L),g1.addScaledVector(oL,L),m1.addScaledVector(aL,L)):(p1.addScaledVector(sL.sub(Uv),L),g1.addScaledVector(oL.sub(Gv),L),m1.addScaledVector(aL.sub(Hv),L)))}Uv.add(p1),Gv.add(g1),Hv.add(m1)}i.isSkinnedMesh&&(i.boneTransform(_,Uv),i.boneTransform(b,Gv),i.boneTransform(x,Hv));const M=function N9(i,e,t,s,o,a,l,h){let g;if(g=1===e.side?s.intersectTriangle(l,a,o,!0,h):s.intersectTriangle(o,a,l,2!==e.side,h),null===g)return null;b1.copy(h),b1.applyMatrix4(i.matrixWorld);const _=t.ray.origin.distanceTo(b1);return _<t.near||_>t.far?null:{distance:_,point:b1.clone(),object:i}}(i,e,t,s,Uv,Gv,Hv,lL);if(M){h&&(v1.fromBufferAttribute(h,_),_1.fromBufferAttribute(h,b),y1.fromBufferAttribute(h,x),M.uv=uo.getUV(lL,Uv,Gv,Hv,v1,_1,y1,new rt)),g&&(v1.fromBufferAttribute(g,_),_1.fromBufferAttribute(g,b),y1.fromBufferAttribute(g,x),M.uv2=uo.getUV(lL,Uv,Gv,Hv,v1,_1,y1,new rt));const T={a:_,b,c:x,normal:new J,materialIndex:0};uo.getNormal(Uv,Gv,Hv,T.normal),M.face=T}return M}Do.prototype.isMesh=!0;class I0 extends In{constructor(e=1,t=1,s=1,o=1,a=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:s,widthSegments:o,heightSegments:a,depthSegments:l};const h=this;o=Math.floor(o),a=Math.floor(a),l=Math.floor(l);const g=[],_=[],b=[],x=[];let S=0,M=0;function T(I,L,k,R,U,N,j,K,ne,de,Re){const xe=N/ne,W=j/de,ce=N/2,be=j/2,De=K/2,Ie=ne+1,ae=de+1;let ye=0,Ae=0;const ht=new J;for(let Le=0;Le<ae;Le++){const Je=Le*W-be;for(let mt=0;mt<Ie;mt++)ht[I]=(mt*xe-ce)*R,ht[L]=Je*U,ht[k]=De,_.push(ht.x,ht.y,ht.z),ht[I]=0,ht[L]=0,ht[k]=K>0?1:-1,b.push(ht.x,ht.y,ht.z),x.push(mt/ne),x.push(1-Le/de),ye+=1}for(let Le=0;Le<de;Le++)for(let Je=0;Je<ne;Je++){const Yt=S+Je+Ie*(Le+1),St=S+(Je+1)+Ie*(Le+1),ze=S+(Je+1)+Ie*Le;g.push(S+Je+Ie*Le,Yt,ze),g.push(Yt,St,ze),Ae+=6}h.addGroup(M,Ae,Re),M+=Ae,S+=ye}T("z","y","x",-1,-1,s,t,e,l,a,0),T("z","y","x",1,-1,s,t,-e,l,a,1),T("x","z","y",1,1,e,s,t,o,l,2),T("x","z","y",1,-1,e,s,-t,o,l,3),T("x","y","z",1,-1,e,t,s,o,a,4),T("x","y","z",-1,-1,e,t,-s,o,a,5),this.setIndex(g),this.setAttribute("position",new en(_,3)),this.setAttribute("normal",new en(b,3)),this.setAttribute("uv",new en(x,2))}static fromJSON(e){return new I0(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Bx(i){const e={};for(const t in i){e[t]={};for(const s in i[t]){const o=i[t][s];e[t][s]=o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.clone():Array.isArray(o)?o.slice():o}}return e}function Ga(i){const e={};for(let t=0;t<i.length;t++){const s=Bx(i[t]);for(const o in s)e[o]=s[o]}return e}const B9={clone:Bx,merge:Ga};class zv extends ha{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Bx(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const o in this.uniforms){const l=this.uniforms[o].value;t.uniforms[o]=l&&l.isTexture?{type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?{type:"c",value:l.getHex()}:l&&l.isVector2?{type:"v2",value:l.toArray()}:l&&l.isVector3?{type:"v3",value:l.toArray()}:l&&l.isVector4?{type:"v4",value:l.toArray()}:l&&l.isMatrix3?{type:"m3",value:l.toArray()}:l&&l.isMatrix4?{type:"m4",value:l.toArray()}:{value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const s={};for(const o in this.extensions)!0===this.extensions[o]&&(s[o]=!0);return Object.keys(s).length>0&&(t.extensions=s),t}}zv.prototype.isShaderMaterial=!0;class x1 extends Gi{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new sn,this.projectionMatrix=new sn,this.projectionMatrixInverse=new sn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}x1.prototype.isCamera=!0;class qo extends x1{constructor(e=50,t=1,s=.1,o=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=s,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*kE*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*C0*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*kE*Math.atan(Math.tan(.5*C0*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,s,o,a,l){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=s,this.view.offsetY=o,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*C0*this.fov)/this.zoom,s=2*t,o=this.aspect*s,a=-.5*o;const l=this.view;if(null!==this.view&&this.view.enabled){const g=l.fullWidth,_=l.fullHeight;a+=l.offsetX*o/g,t-=l.offsetY*s/_,o*=l.width/g,s*=l.height/_}const h=this.filmOffset;0!==h&&(a+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+o,t,t-s,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}qo.prototype.isPerspectiveCamera=!0;class cL extends Gi{constructor(e,t,s){if(super(),this.type="CubeCamera",!0!==s.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=s;const o=new qo(90,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new J(1,0,0)),this.add(o);const a=new qo(90,1,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new J(-1,0,0)),this.add(a);const l=new qo(90,1,e,t);l.layers=this.layers,l.up.set(0,0,1),l.lookAt(new J(0,1,0)),this.add(l);const h=new qo(90,1,e,t);h.layers=this.layers,h.up.set(0,0,-1),h.lookAt(new J(0,-1,0)),this.add(h);const g=new qo(90,1,e,t);g.layers=this.layers,g.up.set(0,-1,0),g.lookAt(new J(0,0,1)),this.add(g);const _=new qo(90,1,e,t);_.layers=this.layers,_.up.set(0,-1,0),_.lookAt(new J(0,0,-1)),this.add(_)}update(e,t){null===this.parent&&this.updateMatrixWorld();const s=this.renderTarget,[o,a,l,h,g,_]=this.children,b=e.xr.enabled,x=e.getRenderTarget();e.xr.enabled=!1;const S=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,e.setRenderTarget(s,0),e.render(t,o),e.setRenderTarget(s,1),e.render(t,a),e.setRenderTarget(s,2),e.render(t,l),e.setRenderTarget(s,3),e.render(t,h),e.setRenderTarget(s,4),e.render(t,g),s.texture.generateMipmaps=S,e.setRenderTarget(s,5),e.render(t,_),e.setRenderTarget(x),e.xr.enabled=b,s.texture.needsPMREMUpdate=!0}}class VE extends Eo{constructor(e,t,s,o,a,l,h,g,_,b){super(e=void 0!==e?e:[],t=void 0!==t?t:301,s,o,a,l,h,g,_,b),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}VE.prototype.isCubeTexture=!0;class uL extends Vu{constructor(e,t,s){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=s),super(e,e,t),this.texture=new VE(void 0,(t=t||{}).mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:vs}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Ua,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const s_uniforms={tEquirect:{value:null}},s_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",s_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new I0(5,5,5),a=new zv({name:"CubemapFromEquirect",uniforms:Bx(s_uniforms),vertexShader:s_vertexShader,fragmentShader:s_fragmentShader,side:1,blending:0});a.uniforms.tEquirect.value=t;const l=new Do(o,a),h=t.minFilter;return 1008===t.minFilter&&(t.minFilter=vs),new cL(1,10,this).update(e,l),t.minFilter=h,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,s,o){const a=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,s,o);e.setRenderTarget(a)}}uL.prototype.isWebGLCubeRenderTarget=!0;const dL=new J,G9=new J,H9=new zo;class ag{constructor(e=new J(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,s,o){return this.normal.set(e,t,s),this.constant=o,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,s){const o=dL.subVectors(s,t).cross(G9.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const s=e.delta(dL),o=this.normal.dot(s);if(0===o)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/o;return a<0||a>1?null:t.copy(s).multiplyScalar(a).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),s=this.distanceToPoint(e.end);return t<0&&s>0||s<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const s=t||H9.getNormalMatrix(e),o=this.coplanarPoint(dL).applyMatrix4(e),a=this.normal.applyMatrix3(s).normalize();return this.constant=-o.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}ag.prototype.isPlane=!0;const Gx=new A0,C1=new J;class S1{constructor(e=new ag,t=new ag,s=new ag,o=new ag,a=new ag,l=new ag){this.planes=[e,t,s,o,a,l]}set(e,t,s,o,a,l){const h=this.planes;return h[0].copy(e),h[1].copy(t),h[2].copy(s),h[3].copy(o),h[4].copy(a),h[5].copy(l),this}copy(e){const t=this.planes;for(let s=0;s<6;s++)t[s].copy(e.planes[s]);return this}setFromProjectionMatrix(e){const t=this.planes,s=e.elements,o=s[0],a=s[1],l=s[2],h=s[3],g=s[4],_=s[5],b=s[6],x=s[7],S=s[8],M=s[9],T=s[10],I=s[11],L=s[12],k=s[13],R=s[14],U=s[15];return t[0].setComponents(h-o,x-g,I-S,U-L).normalize(),t[1].setComponents(h+o,x+g,I+S,U+L).normalize(),t[2].setComponents(h+a,x+_,I+M,U+k).normalize(),t[3].setComponents(h-a,x-_,I-M,U-k).normalize(),t[4].setComponents(h-l,x-b,I-T,U-R).normalize(),t[5].setComponents(h+l,x+b,I+T,U+R).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Gx.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Gx)}intersectsSprite(e){return Gx.center.set(0,0,0),Gx.radius=.7071067811865476,Gx.applyMatrix4(e.matrixWorld),this.intersectsSphere(Gx)}intersectsSphere(e){const t=this.planes,s=e.center,o=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(s)<o)return!1;return!0}intersectsBox(e){const t=this.planes;for(let s=0;s<6;s++){const o=t[s];if(C1.x=o.normal.x>0?e.max.x:e.min.x,C1.y=o.normal.y>0?e.max.y:e.min.y,C1.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(C1)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let s=0;s<6;s++)if(t[s].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function hG(){let i=null,e=!1,t=null,s=null;function o(a,l){t(a,l),s=i.requestAnimationFrame(o)}return{start:function(){!0!==e&&null!==t&&(s=i.requestAnimationFrame(o),e=!0)},stop:function(){i.cancelAnimationFrame(s),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){i=a}}}function z9(i,e){const t=e.isWebGL2,s=new WeakMap;return{get:function l(_){return _.isInterleavedBufferAttribute&&(_=_.data),s.get(_)},remove:function h(_){_.isInterleavedBufferAttribute&&(_=_.data);const b=s.get(_);b&&(i.deleteBuffer(b.buffer),s.delete(_))},update:function g(_,b){if(_.isGLBufferAttribute){const S=s.get(_);return void((!S||S.version<_.version)&&s.set(_,{buffer:_.buffer,type:_.type,bytesPerElement:_.elementSize,version:_.version}))}_.isInterleavedBufferAttribute&&(_=_.data);const x=s.get(_);void 0===x?s.set(_,function o(_,b){const x=_.array,S=_.usage,M=i.createBuffer();i.bindBuffer(b,M),i.bufferData(b,x,S),_.onUploadCallback();let T=5126;return x instanceof Float32Array?T=5126:x instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):x instanceof Uint16Array?_.isFloat16BufferAttribute?t?T=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):T=5123:x instanceof Int16Array?T=5122:x instanceof Uint32Array?T=5125:x instanceof Int32Array?T=5124:x instanceof Int8Array?T=5120:(x instanceof Uint8Array||x instanceof Uint8ClampedArray)&&(T=5121),{buffer:M,type:T,bytesPerElement:x.BYTES_PER_ELEMENT,version:_.version}}(_,b)):x.version<_.version&&(function a(_,b,x){const S=b.array,M=b.updateRange;i.bindBuffer(x,_),-1===M.count?i.bufferSubData(x,0,S):(t?i.bufferSubData(x,M.offset*S.BYTES_PER_ELEMENT,S,M.offset,M.count):i.bufferSubData(x,M.offset*S.BYTES_PER_ELEMENT,S.subarray(M.offset,M.offset+M.count)),M.count=-1)}(x.buffer,_,b),x.version=_.version)}}}class UE extends In{constructor(e=1,t=1,s=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:s,heightSegments:o};const a=e/2,l=t/2,h=Math.floor(s),g=Math.floor(o),_=h+1,b=g+1,x=e/h,S=t/g,M=[],T=[],I=[],L=[];for(let k=0;k<b;k++){const R=k*S-l;for(let U=0;U<_;U++)T.push(U*x-a,-R,0),I.push(0,0,1),L.push(U/h),L.push(1-k/g)}for(let k=0;k<g;k++)for(let R=0;R<h;R++){const N=R+_*(k+1),j=R+1+_*(k+1),K=R+1+_*k;M.push(R+_*k,N,K),M.push(N,j,K)}this.setIndex(M),this.setAttribute("position",new en(T,3)),this.setAttribute("normal",new en(I,3)),this.setAttribute("uv",new en(L,2))}static fromJSON(e){return new UE(e.width,e.height,e.widthSegments,e.heightSegments)}}const hi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Rt={common:{diffuse:{value:new Ht(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new zo},uv2Transform:{value:new zo},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new rt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ht(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ht(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new zo}},sprite:{diffuse:{value:new Ht(16777215)},opacity:{value:1},center:{value:new rt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new zo}}},pf={basic:{uniforms:Ga([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.fog]),vertexShader:hi.meshbasic_vert,fragmentShader:hi.meshbasic_frag},lambert:{uniforms:Ga([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.fog,Rt.lights,{emissive:{value:new Ht(0)}}]),vertexShader:hi.meshlambert_vert,fragmentShader:hi.meshlambert_frag},phong:{uniforms:Ga([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,Rt.lights,{emissive:{value:new Ht(0)},specular:{value:new Ht(1118481)},shininess:{value:30}}]),vertexShader:hi.meshphong_vert,fragmentShader:hi.meshphong_frag},standard:{uniforms:Ga([Rt.common,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.roughnessmap,Rt.metalnessmap,Rt.fog,Rt.lights,{emissive:{value:new Ht(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:hi.meshphysical_vert,fragmentShader:hi.meshphysical_frag},toon:{uniforms:Ga([Rt.common,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.gradientmap,Rt.fog,Rt.lights,{emissive:{value:new Ht(0)}}]),vertexShader:hi.meshtoon_vert,fragmentShader:hi.meshtoon_frag},matcap:{uniforms:Ga([Rt.common,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,{matcap:{value:null}}]),vertexShader:hi.meshmatcap_vert,fragmentShader:hi.meshmatcap_frag},points:{uniforms:Ga([Rt.points,Rt.fog]),vertexShader:hi.points_vert,fragmentShader:hi.points_frag},dashed:{uniforms:Ga([Rt.common,Rt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:hi.linedashed_vert,fragmentShader:hi.linedashed_frag},depth:{uniforms:Ga([Rt.common,Rt.displacementmap]),vertexShader:hi.depth_vert,fragmentShader:hi.depth_frag},normal:{uniforms:Ga([Rt.common,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,{opacity:{value:1}}]),vertexShader:hi.meshnormal_vert,fragmentShader:hi.meshnormal_frag},sprite:{uniforms:Ga([Rt.sprite,Rt.fog]),vertexShader:hi.sprite_vert,fragmentShader:hi.sprite_frag},background:{uniforms:{uvTransform:{value:new zo},t2D:{value:null}},vertexShader:hi.background_vert,fragmentShader:hi.background_frag},cube:{uniforms:Ga([Rt.envmap,{opacity:{value:1}}]),vertexShader:hi.cube_vert,fragmentShader:hi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:hi.equirect_vert,fragmentShader:hi.equirect_frag},distanceRGBA:{uniforms:Ga([Rt.common,Rt.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:hi.distanceRGBA_vert,fragmentShader:hi.distanceRGBA_frag},shadow:{uniforms:Ga([Rt.lights,Rt.fog,{color:{value:new Ht(0)},opacity:{value:1}}]),vertexShader:hi.shadow_vert,fragmentShader:hi.shadow_frag}};function VK(i,e,t,s,o,a){const l=new Ht(0);let g,_,h=!0===o?0:1,b=null,x=0,S=null;function T(I,L){t.buffers.color.setClear(I.r,I.g,I.b,L,a)}return{getClearColor:function(){return l},setClearColor:function(I,L=1){l.set(I),h=L,T(l,h)},getClearAlpha:function(){return h},setClearAlpha:function(I){h=I,T(l,h)},render:function M(I,L){let k=!1,R=!0===L.isScene?L.background:null;R&&R.isTexture&&(R=e.get(R));const U=i.xr,N=U.getSession&&U.getSession();N&&"additive"===N.environmentBlendMode&&(R=null),null===R?T(l,h):R&&R.isColor&&(T(R,1),k=!0),(i.autoClear||k)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),R&&(R.isCubeTexture||306===R.mapping)?(void 0===_&&(_=new Do(new I0(1,1,1),new zv({name:"BackgroundCubeMaterial",uniforms:Bx(pf.cube.uniforms),vertexShader:pf.cube.vertexShader,fragmentShader:pf.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),_.geometry.deleteAttribute("normal"),_.geometry.deleteAttribute("uv"),_.onBeforeRender=function(j,K,ne){this.matrixWorld.copyPosition(ne.matrixWorld)},Object.defineProperty(_.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(_)),_.material.uniforms.envMap.value=R,_.material.uniforms.flipEnvMap.value=R.isCubeTexture&&!1===R.isRenderTargetTexture?-1:1,(b!==R||x!==R.version||S!==i.toneMapping)&&(_.material.needsUpdate=!0,b=R,x=R.version,S=i.toneMapping),I.unshift(_,_.geometry,_.material,0,0,null)):R&&R.isTexture&&(void 0===g&&(g=new Do(new UE(2,2),new zv({name:"BackgroundMaterial",uniforms:Bx(pf.background.uniforms),vertexShader:pf.background.vertexShader,fragmentShader:pf.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),g.geometry.deleteAttribute("normal"),Object.defineProperty(g.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(g)),g.material.uniforms.t2D.value=R,!0===R.matrixAutoUpdate&&R.updateMatrix(),g.material.uniforms.uvTransform.value.copy(R.matrix),(b!==R||x!==R.version||S!==i.toneMapping)&&(g.material.needsUpdate=!0,b=R,x=R.version,S=i.toneMapping),I.unshift(g,g.geometry,g.material,0,0,null))}}}function UK(i,e,t,s){const o=i.getParameter(34921),a=s.isWebGL2?null:e.get("OES_vertex_array_object"),l=s.isWebGL2||null!==a,h={},g=I(null);let _=g;function S(be){return s.isWebGL2?i.bindVertexArray(be):a.bindVertexArrayOES(be)}function M(be){return s.isWebGL2?i.deleteVertexArray(be):a.deleteVertexArrayOES(be)}function I(be){const De=[],Ie=[],ae=[];for(let ye=0;ye<o;ye++)De[ye]=0,Ie[ye]=0,ae[ye]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:De,enabledAttributes:Ie,attributeDivisors:ae,object:be,attributes:{},index:null}}function R(){const be=_.newAttributes;for(let De=0,Ie=be.length;De<Ie;De++)be[De]=0}function U(be){N(be,0)}function N(be,De){const ae=_.enabledAttributes,ye=_.attributeDivisors;_.newAttributes[be]=1,0===ae[be]&&(i.enableVertexAttribArray(be),ae[be]=1),ye[be]!==De&&((s.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[s.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](be,De),ye[be]=De)}function j(){const be=_.newAttributes,De=_.enabledAttributes;for(let Ie=0,ae=De.length;Ie<ae;Ie++)De[Ie]!==be[Ie]&&(i.disableVertexAttribArray(Ie),De[Ie]=0)}function K(be,De,Ie,ae,ye,Ae){!0!==s.isWebGL2||5124!==Ie&&5125!==Ie?i.vertexAttribPointer(be,De,Ie,ae,ye,Ae):i.vertexAttribIPointer(be,De,Ie,ye,Ae)}function W(){ce(),_!==g&&(_=g,S(_.object))}function ce(){g.geometry=null,g.program=null,g.wireframe=!1}return{setup:function b(be,De,Ie,ae,ye){let Ae=!1;if(l){const ht=function T(be,De,Ie){const ae=!0===Ie.wireframe;let ye=h[be.id];void 0===ye&&(ye={},h[be.id]=ye);let Ae=ye[De.id];void 0===Ae&&(Ae={},ye[De.id]=Ae);let ht=Ae[ae];return void 0===ht&&(ht=I(function x(){return s.isWebGL2?i.createVertexArray():a.createVertexArrayOES()}()),Ae[ae]=ht),ht}(ae,Ie,De);_!==ht&&(_=ht,S(_.object)),Ae=function L(be,De){const Ie=_.attributes,ae=be.attributes;let ye=0;for(const Ae in ae){const ht=Ie[Ae],Le=ae[Ae];if(void 0===ht||ht.attribute!==Le||ht.data!==Le.data)return!0;ye++}return _.attributesNum!==ye||_.index!==De}(ae,ye),Ae&&function k(be,De){const Ie={},ae=be.attributes;let ye=0;for(const Ae in ae){const ht=ae[Ae],Le={};Le.attribute=ht,ht.data&&(Le.data=ht.data),Ie[Ae]=Le,ye++}_.attributes=Ie,_.attributesNum=ye,_.index=De}(ae,ye)}else{const ht=!0===De.wireframe;(_.geometry!==ae.id||_.program!==Ie.id||_.wireframe!==ht)&&(_.geometry=ae.id,_.program=Ie.id,_.wireframe=ht,Ae=!0)}!0===be.isInstancedMesh&&(Ae=!0),null!==ye&&t.update(ye,34963),Ae&&(function ne(be,De,Ie,ae){if(!1===s.isWebGL2&&(be.isInstancedMesh||ae.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;R();const ye=ae.attributes,Ae=Ie.getAttributes(),ht=De.defaultAttributeValues;for(const Le in Ae){const Je=Ae[Le];if(Je.location>=0){let mt=ye[Le];if(void 0===mt&&("instanceMatrix"===Le&&be.instanceMatrix&&(mt=be.instanceMatrix),"instanceColor"===Le&&be.instanceColor&&(mt=be.instanceColor)),void 0!==mt){const Yt=mt.normalized,St=mt.itemSize,ze=t.get(mt);if(void 0===ze)continue;const Ei=ze.buffer,Vt=ze.type,vn=ze.bytesPerElement;if(mt.isInterleavedBufferAttribute){const Ft=mt.data,kn=Ft.stride,An=mt.offset;if(Ft&&Ft.isInstancedInterleavedBuffer){for(let Xe=0;Xe<Je.locationSize;Xe++)N(Je.location+Xe,Ft.meshPerAttribute);!0!==be.isInstancedMesh&&void 0===ae._maxInstanceCount&&(ae._maxInstanceCount=Ft.meshPerAttribute*Ft.count)}else for(let Xe=0;Xe<Je.locationSize;Xe++)U(Je.location+Xe);i.bindBuffer(34962,Ei);for(let Xe=0;Xe<Je.locationSize;Xe++)K(Je.location+Xe,St/Je.locationSize,Vt,Yt,kn*vn,(An+St/Je.locationSize*Xe)*vn)}else{if(mt.isInstancedBufferAttribute){for(let Ft=0;Ft<Je.locationSize;Ft++)N(Je.location+Ft,mt.meshPerAttribute);!0!==be.isInstancedMesh&&void 0===ae._maxInstanceCount&&(ae._maxInstanceCount=mt.meshPerAttribute*mt.count)}else for(let Ft=0;Ft<Je.locationSize;Ft++)U(Je.location+Ft);i.bindBuffer(34962,Ei);for(let Ft=0;Ft<Je.locationSize;Ft++)K(Je.location+Ft,St/Je.locationSize,Vt,Yt,St*vn,St/Je.locationSize*Ft*vn)}}else if(void 0!==ht){const Yt=ht[Le];if(void 0!==Yt)switch(Yt.length){case 2:i.vertexAttrib2fv(Je.location,Yt);break;case 3:i.vertexAttrib3fv(Je.location,Yt);break;case 4:i.vertexAttrib4fv(Je.location,Yt);break;default:i.vertexAttrib1fv(Je.location,Yt)}}}}j()}(be,De,Ie,ae),null!==ye&&i.bindBuffer(34963,t.get(ye).buffer))},reset:W,resetDefaultState:ce,dispose:function de(){W();for(const be in h){const De=h[be];for(const Ie in De){const ae=De[Ie];for(const ye in ae)M(ae[ye].object),delete ae[ye];delete De[Ie]}delete h[be]}},releaseStatesOfGeometry:function Re(be){if(void 0===h[be.id])return;const De=h[be.id];for(const Ie in De){const ae=De[Ie];for(const ye in ae)M(ae[ye].object),delete ae[ye];delete De[Ie]}delete h[be.id]},releaseStatesOfProgram:function xe(be){for(const De in h){const Ie=h[De];if(void 0===Ie[be.id])continue;const ae=Ie[be.id];for(const ye in ae)M(ae[ye].object),delete ae[ye];delete Ie[be.id]}},initAttributes:R,enableAttribute:U,disableUnusedAttributes:j}}function GK(i,e,t,s){const o=s.isWebGL2;let a;this.setMode=function l(_){a=_},this.render=function h(_,b){i.drawArrays(a,_,b),t.update(b,a,1)},this.renderInstances=function g(_,b,x){if(0===x)return;let S,M;if(o)S=i,M="drawArraysInstanced";else if(S=e.get("ANGLE_instanced_arrays"),M="drawArraysInstancedANGLE",null===S)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");S[M](a,_,b,x),t.update(b,a,x)}}function HK(i,e,t){let s;function a(ne){if("highp"===ne){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";ne="mediump"}return"mediump"===ne&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const l="undefined"!=typeof WebGL2RenderingContext&&i instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&i instanceof WebGL2ComputeRenderingContext;let h=void 0!==t.precision?t.precision:"highp";const g=a(h);g!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",g,"instead."),h=g);const _=l||e.has("WEBGL_draw_buffers"),b=!0===t.logarithmicDepthBuffer,x=i.getParameter(34930),S=i.getParameter(35660),M=i.getParameter(3379),T=i.getParameter(34076),I=i.getParameter(34921),L=i.getParameter(36347),k=i.getParameter(36348),R=i.getParameter(36349),U=S>0,N=l||e.has("OES_texture_float");return{isWebGL2:l,drawBuffers:_,getMaxAnisotropy:function o(){if(void 0!==s)return s;if(!0===e.has("EXT_texture_filter_anisotropic")){const ne=e.get("EXT_texture_filter_anisotropic");s=i.getParameter(ne.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s},getMaxPrecision:a,precision:h,logarithmicDepthBuffer:b,maxTextures:x,maxVertexTextures:S,maxTextureSize:M,maxCubemapSize:T,maxAttributes:I,maxVertexUniforms:L,maxVaryings:k,maxFragmentUniforms:R,vertexTextures:U,floatFragmentTextures:N,floatVertexTextures:U&&N,maxSamples:l?i.getParameter(36183):0}}function zK(i){const e=this;let t=null,s=0,o=!1,a=!1;const l=new ag,h=new zo,g={value:null,needsUpdate:!1};function _(){g.value!==t&&(g.value=t,g.needsUpdate=s>0),e.numPlanes=s,e.numIntersection=0}function b(x,S,M,T){const I=null!==x?x.length:0;let L=null;if(0!==I){if(L=g.value,!0!==T||null===L){const k=M+4*I,R=S.matrixWorldInverse;h.getNormalMatrix(R),(null===L||L.length<k)&&(L=new Float32Array(k));for(let U=0,N=M;U!==I;++U,N+=4)l.copy(x[U]).applyMatrix4(R,h),l.normal.toArray(L,N),L[N+3]=l.constant}g.value=L,g.needsUpdate=!0}return e.numPlanes=I,e.numIntersection=0,L}this.uniform=g,this.numPlanes=0,this.numIntersection=0,this.init=function(x,S,M){const T=0!==x.length||S||0!==s||o;return o=S,t=b(x,M,0),s=x.length,T},this.beginShadows=function(){a=!0,b(null)},this.endShadows=function(){a=!1,_()},this.setState=function(x,S,M){const T=x.clippingPlanes,I=x.clipIntersection,L=x.clipShadows,k=i.get(x);if(!o||null===T||0===T.length||a&&!L)a?b(null):_();else{const R=a?0:s,U=4*R;let N=k.clippingState||null;g.value=N,N=b(T,S,U,M);for(let j=0;j!==U;++j)N[j]=t[j];k.clippingState=N,this.numIntersection=I?this.numPlanes:0,this.numPlanes+=R}}}function jK(i){let e=new WeakMap;function t(l,h){return 303===h?l.mapping=301:304===h&&(l.mapping=302),l}function o(l){const h=l.target;h.removeEventListener("dispose",o);const g=e.get(h);void 0!==g&&(e.delete(h),g.dispose())}return{get:function s(l){if(l&&l.isTexture&&!1===l.isRenderTargetTexture){const h=l.mapping;if(303===h||304===h){if(e.has(l))return t(e.get(l).texture,l.mapping);{const g=l.image;if(g&&g.height>0){const _=new uL(g.height/2);return _.fromEquirectangularTexture(i,l),e.set(l,_),l.addEventListener("dispose",o),t(_.texture,l.mapping)}return null}}}return l},dispose:function a(){e=new WeakMap}}}pf.physical={uniforms:Ga([pf.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new rt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Ht(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new rt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ht(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ht(1,1,1)},specularColorMap:{value:null}}]),vertexShader:hi.meshphysical_vert,fragmentShader:hi.meshphysical_frag};class M1 extends x1{constructor(e=-1,t=1,s=1,o=-1,a=.1,l=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=s,this.bottom=o,this.near=a,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,s,o,a,l){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=s,this.view.offsetY=o,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let a=s-e,l=s+e,h=o+t,g=o-t;if(null!==this.view&&this.view.enabled){const _=(this.right-this.left)/this.view.fullWidth/this.zoom,b=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=_*this.view.offsetX,l=a+_*this.view.width,h-=b*this.view.offsetY,g=h-b*this.view.height}this.projectionMatrix.makeOrthographic(a,l,h,g,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}M1.prototype.isOrthographicCamera=!0;class GE extends zv{constructor(e){super(e),this.type="RawShaderMaterial"}}GE.prototype.isRawShaderMaterial=!0;const gf=Math.pow(2,8),fG=[.125,.215,.35,.446,.526,.582],pG=5+fG.length,hL=new M1,{_lodPlanes:HE,_sizeLods:gG,_sigmas:E1}=WK(),mG=new Ht;let fL=null;const R0=(1+Math.sqrt(5))/2,jx=1/R0,vG=[new J(1,1,1),new J(-1,1,1),new J(1,1,-1),new J(-1,1,-1),new J(0,R0,jx),new J(0,R0,-jx),new J(jx,0,R0),new J(-jx,0,R0),new J(R0,jx,0),new J(-R0,jx,0)];class _G{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function qK(i){const e=new Float32Array(i),t=new J(0,1,0);return new GE({name:"SphericalGaussianBlur",defines:{n:i},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,s=.1,o=100){fL=this._renderer.getRenderTarget();const a=this._allocateTargets();return this._sceneToCubeUV(e,s,o,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=wG(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=bG(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<HE.length;e++)HE[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(fL),e.scissorTest=!1,D1(e,0,0,e.width,e.height)}_fromTexture(e,t){fL=this._renderer.getRenderTarget();const s=t||this._allocateTargets(e);return this._textureToCubeUV(e,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(e){const t={magFilter:vs,minFilter:vs,generateMipmaps:!1,type:yx,format:Ua,encoding:kv,depthBuffer:!1},s=yG(t);return s.depthBuffer=!e,null===this._pingPongRenderTarget&&(this._pingPongRenderTarget=yG(t)),s}_compileMaterial(e){const t=new Do(HE[0],e);this._renderer.compile(t,hL)}_sceneToCubeUV(e,t,s,o){const h=new qo(90,1,t,s),g=[1,-1,1,1,1,1],_=[1,1,1,-1,-1,-1],b=this._renderer,x=b.autoClear,S=b.toneMapping;b.getClearColor(mG),b.toneMapping=0,b.autoClear=!1;const M=new Vv({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),T=new Do(new I0,M);let I=!1;const L=e.background;L?L.isColor&&(M.color.copy(L),e.background=null,I=!0):(M.color.copy(mG),I=!0);for(let k=0;k<6;k++){const R=k%3;0===R?(h.up.set(0,g[k],0),h.lookAt(_[k],0,0)):1===R?(h.up.set(0,0,g[k]),h.lookAt(0,_[k],0)):(h.up.set(0,g[k],0),h.lookAt(0,0,_[k])),D1(o,R*gf,k>2?gf:0,gf,gf),b.setRenderTarget(o),I&&b.render(T,h),b.render(e,h)}T.geometry.dispose(),T.material.dispose(),b.toneMapping=S,b.autoClear=x,e.background=L}_textureToCubeUV(e,t){const s=this._renderer,o=301===e.mapping||302===e.mapping;o?(null===this._cubemapShader&&(this._cubemapShader=wG()),this._cubemapShader.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectShader&&(this._equirectShader=bG());const a=o?this._cubemapShader:this._equirectShader,l=new Do(HE[0],a),h=a.uniforms;h.envMap.value=e,o||h.texelSize.value.set(1/e.image.width,1/e.image.height),D1(t,0,0,3*gf,2*gf),s.setRenderTarget(t),s.render(l,hL)}_applyPMREM(e){const t=this._renderer,s=t.autoClear;t.autoClear=!1;for(let o=1;o<pG;o++){const a=Math.sqrt(E1[o]*E1[o]-E1[o-1]*E1[o-1]);this._blur(e,o-1,o,a,vG[(o-1)%vG.length])}t.autoClear=s}_blur(e,t,s,o,a){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,s,o,"latitudinal",a),this._halfBlur(l,e,s,s,o,"longitudinal",a)}_halfBlur(e,t,s,o,a,l,h){const g=this._renderer,_=this._blurMaterial;"latitudinal"!==l&&"longitudinal"!==l&&console.error("blur direction must be either latitudinal or longitudinal!");const x=new Do(HE[o],_),S=_.uniforms,M=gG[s]-1,T=isFinite(a)?Math.PI/(2*M):2*Math.PI/39,I=a/T,L=isFinite(a)?1+Math.floor(3*I):20;L>20&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${L} samples when the maximum is set to 20`);const k=[];let R=0;for(let K=0;K<20;++K){const ne=K/I,de=Math.exp(-ne*ne/2);k.push(de),0===K?R+=de:K<L&&(R+=2*de)}for(let K=0;K<k.length;K++)k[K]=k[K]/R;S.envMap.value=e.texture,S.samples.value=L,S.weights.value=k,S.latitudinal.value="latitudinal"===l,h&&(S.poleAxis.value=h),S.dTheta.value=T,S.mipInt.value=8-s;const U=gG[o];D1(t,3*Math.max(0,gf-2*U),(0===o?0:2*gf)+2*U*(o>4?o-8+4:0),3*U,2*U),g.setRenderTarget(t),g.render(x,hL)}}function WK(){const i=[],e=[],t=[];let s=8;for(let o=0;o<pG;o++){const a=Math.pow(2,s);e.push(a);let l=1/a;o>4?l=fG[o-8+4-1]:0===o&&(l=0),t.push(l);const h=1/(a-1),g=-h/2,_=1+h/2,b=[g,g,_,g,_,_,g,g,_,_,g,_],x=6,S=6,M=3,T=2,I=1,L=new Float32Array(M*S*x),k=new Float32Array(T*S*x),R=new Float32Array(I*S*x);for(let N=0;N<x;N++){const j=N%3*2/3-1,K=N>2?0:-1;L.set([j,K,0,j+2/3,K,0,j+2/3,K+1,0,j,K,0,j+2/3,K+1,0,j,K+1,0],M*S*N),k.set(b,T*S*N),R.set([N,N,N,N,N,N],I*S*N)}const U=new In;U.setAttribute("position",new gr(L,M)),U.setAttribute("uv",new gr(k,T)),U.setAttribute("faceIndex",new gr(R,I)),i.push(U),s>4&&s--}return{_lodPlanes:i,_sizeLods:e,_sigmas:t}}function yG(i){const e=new Vu(3*gf,3*gf,i);return e.texture.mapping=306,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function D1(i,e,t,s,o){i.viewport.set(e,t,s,o),i.scissor.set(e,t,s,o)}function bG(){const i=new rt(1,1);return new GE({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = texture2D ( envMap, uv ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function wG(){return new GE({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function YK(i){let e=new WeakMap,t=null;function a(h){const g=h.target;g.removeEventListener("dispose",a);const _=e.get(g);void 0!==_&&(e.delete(g),_.dispose())}return{get:function s(h){if(h&&h.isTexture){const g=h.mapping,_=303===g||304===g,b=301===g||302===g;if(_||b){if(h.isRenderTargetTexture&&!0===h.needsPMREMUpdate){h.needsPMREMUpdate=!1;let x=e.get(h);return null===t&&(t=new _G(i)),x=_?t.fromEquirectangular(h,x):t.fromCubemap(h,x),e.set(h,x),x.texture}if(e.has(h))return e.get(h).texture;{const x=h.image;if(_&&x&&x.height>0||b&&x&&function o(h){let g=0;for(let b=0;b<6;b++)void 0!==h[b]&&g++;return 6===g}(x)){null===t&&(t=new _G(i));const S=_?t.fromEquirectangular(h):t.fromCubemap(h);return e.set(h,S),h.addEventListener("dispose",a),S.texture}return null}}}return h},dispose:function l(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function $K(i){const e={};function t(s){if(void 0!==e[s])return e[s];let o;switch(s){case"WEBGL_depth_texture":o=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=i.getExtension(s)}return e[s]=o,o}return{has:function(s){return null!==t(s)},init:function(s){s.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(s){const o=t(s);return null===o&&console.warn("THREE.WebGLRenderer: "+s+" extension not supported."),o}}}function ZK(i,e,t,s){const o={},a=new WeakMap;function l(x){const S=x.target;null!==S.index&&e.remove(S.index);for(const T in S.attributes)e.remove(S.attributes[T]);S.removeEventListener("dispose",l),delete o[S.id];const M=a.get(S);M&&(e.remove(M),a.delete(S)),s.releaseStatesOfGeometry(S),!0===S.isInstancedBufferGeometry&&delete S._maxInstanceCount,t.memory.geometries--}function _(x){const S=[],M=x.index,T=x.attributes.position;let I=0;if(null!==M){const R=M.array;I=M.version;for(let U=0,N=R.length;U<N;U+=3){const j=R[U+0],K=R[U+1],ne=R[U+2];S.push(j,K,K,ne,ne,j)}}else{I=T.version;for(let U=0,N=T.array.length/3-1;U<N;U+=3){const j=U+0,K=U+1,ne=U+2;S.push(j,K,K,ne,ne,j)}}const L=new(XU(S)?nL:tL)(S,1);L.version=I;const k=a.get(x);k&&e.remove(k),a.set(x,L)}return{get:function h(x,S){return!0===o[S.id]||(S.addEventListener("dispose",l),o[S.id]=!0,t.memory.geometries++),S},update:function g(x){const S=x.attributes;for(const T in S)e.update(S[T],34962);const M=x.morphAttributes;for(const T in M){const I=M[T];for(let L=0,k=I.length;L<k;L++)e.update(I[L],34962)}},getWireframeAttribute:function b(x){const S=a.get(x);if(S){const M=x.index;null!==M&&S.version<M.version&&_(x)}else _(x);return a.get(x)}}}function KK(i,e,t,s){const o=s.isWebGL2;let a,h,g;this.setMode=function l(S){a=S},this.setIndex=function _(S){h=S.type,g=S.bytesPerElement},this.render=function b(S,M){i.drawElements(a,M,h,S*g),t.update(M,a,1)},this.renderInstances=function x(S,M,T){if(0===T)return;let I,L;if(o)I=i,L="drawElementsInstanced";else if(I=e.get("ANGLE_instanced_arrays"),L="drawElementsInstancedANGLE",null===I)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");I[L](a,M,h,S*g,T),t.update(M,a,T)}}function JK(i){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function o(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function s(a,l,h){switch(t.calls++,l){case 4:t.triangles+=h*(a/3);break;case 1:t.lines+=h*(a/2);break;case 3:t.lines+=h*(a-1);break;case 2:t.lines+=h*a;break;case 0:t.points+=h*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l)}}}}class gL extends Eo{constructor(e=null,t=1,s=1,o=1){super(null),this.image={data:e,width:t,height:s,depth:o},this.magFilter=co,this.minFilter=co,this.wrapR=Va,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function QK(i,e){return i[0]-e[0]}function XK(i,e){return Math.abs(e[1])-Math.abs(i[1])}function xG(i,e){let t=1;const s=e.isInterleavedBufferAttribute?e.data.array:e.array;s instanceof Int8Array?t=127:s instanceof Int16Array?t=32767:s instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",s),i.divideScalar(t)}function eJ(i,e,t){const s={},o=new Float32Array(8),a=new WeakMap,l=new J,h=[];for(let _=0;_<8;_++)h[_]=[_,0];return{update:function g(_,b,x,S){const M=_.morphTargetInfluences;if(!0===e.isWebGL2){const T=b.morphAttributes.position.length;let I=a.get(b);if(void 0===I||I.count!==T){let ce=function(){xe.dispose(),a.delete(b),b.removeEventListener("dispose",ce)};void 0!==I&&I.texture.dispose();const R=void 0!==b.morphAttributes.normal,U=b.morphAttributes.position,N=b.morphAttributes.normal||[],K=!0===R?2:1;let ne=b.attributes.position.count*K,de=1;ne>e.maxTextureSize&&(de=Math.ceil(ne/e.maxTextureSize),ne=e.maxTextureSize);const Re=new Float32Array(ne*de*4*T),xe=new gL(Re,ne,de,T);xe.format=Ua,xe.type=Pv,xe.needsUpdate=!0;const W=4*K;for(let be=0;be<T;be++){const De=U[be],Ie=N[be],ae=ne*de*4*be;for(let ye=0;ye<De.count;ye++){l.fromBufferAttribute(De,ye),!0===De.normalized&&xG(l,De);const Ae=ye*W;Re[ae+Ae+0]=l.x,Re[ae+Ae+1]=l.y,Re[ae+Ae+2]=l.z,Re[ae+Ae+3]=0,!0===R&&(l.fromBufferAttribute(Ie,ye),!0===Ie.normalized&&xG(l,Ie),Re[ae+Ae+4]=l.x,Re[ae+Ae+5]=l.y,Re[ae+Ae+6]=l.z,Re[ae+Ae+7]=0)}}I={count:T,texture:xe,size:new rt(ne,de)},a.set(b,I),b.addEventListener("dispose",ce)}let L=0;for(let R=0;R<M.length;R++)L+=M[R];const k=b.morphTargetsRelative?1:1-L;S.getUniforms().setValue(i,"morphTargetBaseInfluence",k),S.getUniforms().setValue(i,"morphTargetInfluences",M),S.getUniforms().setValue(i,"morphTargetsTexture",I.texture,t),S.getUniforms().setValue(i,"morphTargetsTextureSize",I.size)}else{const T=void 0===M?0:M.length;let I=s[b.id];if(void 0===I||I.length!==T){I=[];for(let N=0;N<T;N++)I[N]=[N,0];s[b.id]=I}for(let N=0;N<T;N++){const j=I[N];j[0]=N,j[1]=M[N]}I.sort(XK);for(let N=0;N<8;N++)N<T&&I[N][1]?(h[N][0]=I[N][0],h[N][1]=I[N][1]):(h[N][0]=Number.MAX_SAFE_INTEGER,h[N][1]=0);h.sort(QK);const L=b.morphAttributes.position,k=b.morphAttributes.normal;let R=0;for(let N=0;N<8;N++){const j=h[N],K=j[0],ne=j[1];K!==Number.MAX_SAFE_INTEGER&&ne?(L&&b.getAttribute("morphTarget"+N)!==L[K]&&b.setAttribute("morphTarget"+N,L[K]),k&&b.getAttribute("morphNormal"+N)!==k[K]&&b.setAttribute("morphNormal"+N,k[K]),o[N]=ne,R+=ne):(L&&!0===b.hasAttribute("morphTarget"+N)&&b.deleteAttribute("morphTarget"+N),k&&!0===b.hasAttribute("morphNormal"+N)&&b.deleteAttribute("morphNormal"+N),o[N]=0)}const U=b.morphTargetsRelative?1:1-R;S.getUniforms().setValue(i,"morphTargetBaseInfluence",U),S.getUniforms().setValue(i,"morphTargetInfluences",o)}}}}function tJ(i,e,t,s){let o=new WeakMap;function h(g){const _=g.target;_.removeEventListener("dispose",h),t.remove(_.instanceMatrix),null!==_.instanceColor&&t.remove(_.instanceColor)}return{update:function a(g){const _=s.render.frame,x=e.get(g,g.geometry);return o.get(x)!==_&&(e.update(x),o.set(x,_)),g.isInstancedMesh&&(!1===g.hasEventListener("dispose",h)&&g.addEventListener("dispose",h),t.update(g.instanceMatrix,34962),null!==g.instanceColor&&t.update(g.instanceColor,34962)),x},dispose:function l(){o=new WeakMap}}}gL.prototype.isDataTexture2DArray=!0;class CG extends Eo{constructor(e=null,t=1,s=1,o=1){super(null),this.image={data:e,width:t,height:s,depth:o},this.magFilter=co,this.minFilter=co,this.wrapR=Va,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}CG.prototype.isDataTexture3D=!0;const SG=new Eo,MG=new gL,EG=new CG,DG=new VE,AG=[],TG=[],IG=new Float32Array(16),RG=new Float32Array(9),PG=new Float32Array(4);function Wx(i,e,t){const s=i[0];if(s<=0||s>0)return i;const o=e*t;let a=AG[o];if(void 0===a&&(a=new Float32Array(o),AG[o]=a),0!==e){s.toArray(a,0);for(let l=1,h=0;l!==e;++l)h+=t,i[l].toArray(a,h)}return a}function cl(i,e){if(i.length!==e.length)return!1;for(let t=0,s=i.length;t<s;t++)if(i[t]!==e[t])return!1;return!0}function Ha(i,e){for(let t=0,s=e.length;t<s;t++)i[t]=e[t]}function A1(i,e){let t=TG[e];void 0===t&&(t=new Int32Array(e),TG[e]=t);for(let s=0;s!==e;++s)t[s]=i.allocateTextureUnit();return t}function nJ(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function iJ(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(cl(t,e))return;i.uniform2fv(this.addr,e),Ha(t,e)}}function rJ(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(cl(t,e))return;i.uniform3fv(this.addr,e),Ha(t,e)}}function sJ(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(cl(t,e))return;i.uniform4fv(this.addr,e),Ha(t,e)}}function oJ(i,e){const t=this.cache,s=e.elements;if(void 0===s){if(cl(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Ha(t,e)}else{if(cl(t,s))return;PG.set(s),i.uniformMatrix2fv(this.addr,!1,PG),Ha(t,s)}}function aJ(i,e){const t=this.cache,s=e.elements;if(void 0===s){if(cl(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Ha(t,e)}else{if(cl(t,s))return;RG.set(s),i.uniformMatrix3fv(this.addr,!1,RG),Ha(t,s)}}function lJ(i,e){const t=this.cache,s=e.elements;if(void 0===s){if(cl(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Ha(t,e)}else{if(cl(t,s))return;IG.set(s),i.uniformMatrix4fv(this.addr,!1,IG),Ha(t,s)}}function cJ(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function uJ(i,e){const t=this.cache;cl(t,e)||(i.uniform2iv(this.addr,e),Ha(t,e))}function dJ(i,e){const t=this.cache;cl(t,e)||(i.uniform3iv(this.addr,e),Ha(t,e))}function hJ(i,e){const t=this.cache;cl(t,e)||(i.uniform4iv(this.addr,e),Ha(t,e))}function fJ(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function pJ(i,e){const t=this.cache;cl(t,e)||(i.uniform2uiv(this.addr,e),Ha(t,e))}function gJ(i,e){const t=this.cache;cl(t,e)||(i.uniform3uiv(this.addr,e),Ha(t,e))}function mJ(i,e){const t=this.cache;cl(t,e)||(i.uniform4uiv(this.addr,e),Ha(t,e))}function vJ(i,e,t){const s=this.cache,o=t.allocateTextureUnit();s[0]!==o&&(i.uniform1i(this.addr,o),s[0]=o),t.safeSetTexture2D(e||SG,o)}function _J(i,e,t){const s=this.cache,o=t.allocateTextureUnit();s[0]!==o&&(i.uniform1i(this.addr,o),s[0]=o),t.setTexture3D(e||EG,o)}function yJ(i,e,t){const s=this.cache,o=t.allocateTextureUnit();s[0]!==o&&(i.uniform1i(this.addr,o),s[0]=o),t.safeSetTextureCube(e||DG,o)}function bJ(i,e,t){const s=this.cache,o=t.allocateTextureUnit();s[0]!==o&&(i.uniform1i(this.addr,o),s[0]=o),t.setTexture2DArray(e||MG,o)}function xJ(i,e){i.uniform1fv(this.addr,e)}function CJ(i,e){const t=Wx(e,this.size,2);i.uniform2fv(this.addr,t)}function SJ(i,e){const t=Wx(e,this.size,3);i.uniform3fv(this.addr,t)}function MJ(i,e){const t=Wx(e,this.size,4);i.uniform4fv(this.addr,t)}function EJ(i,e){const t=Wx(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function DJ(i,e){const t=Wx(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function AJ(i,e){const t=Wx(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function TJ(i,e){i.uniform1iv(this.addr,e)}function IJ(i,e){i.uniform2iv(this.addr,e)}function RJ(i,e){i.uniform3iv(this.addr,e)}function PJ(i,e){i.uniform4iv(this.addr,e)}function kJ(i,e){i.uniform1uiv(this.addr,e)}function OJ(i,e){i.uniform2uiv(this.addr,e)}function FJ(i,e){i.uniform3uiv(this.addr,e)}function LJ(i,e){i.uniform4uiv(this.addr,e)}function NJ(i,e,t){const s=e.length,o=A1(t,s);i.uniform1iv(this.addr,o);for(let a=0;a!==s;++a)t.safeSetTexture2D(e[a]||SG,o[a])}function BJ(i,e,t){const s=e.length,o=A1(t,s);i.uniform1iv(this.addr,o);for(let a=0;a!==s;++a)t.setTexture3D(e[a]||EG,o[a])}function VJ(i,e,t){const s=e.length,o=A1(t,s);i.uniform1iv(this.addr,o);for(let a=0;a!==s;++a)t.safeSetTextureCube(e[a]||DG,o[a])}function UJ(i,e,t){const s=e.length,o=A1(t,s);i.uniform1iv(this.addr,o);for(let a=0;a!==s;++a)t.setTexture2DArray(e[a]||MG,o[a])}function HJ(i,e,t){this.id=i,this.addr=t,this.cache=[],this.setValue=function wJ(i){switch(i){case 5126:return nJ;case 35664:return iJ;case 35665:return rJ;case 35666:return sJ;case 35674:return oJ;case 35675:return aJ;case 35676:return lJ;case 5124:case 35670:return cJ;case 35667:case 35671:return uJ;case 35668:case 35672:return dJ;case 35669:case 35673:return hJ;case 5125:return fJ;case 36294:return pJ;case 36295:return gJ;case 36296:return mJ;case 35678:case 36198:case 36298:case 36306:case 35682:return vJ;case 35679:case 36299:case 36307:return _J;case 35680:case 36300:case 36308:case 36293:return yJ;case 36289:case 36303:case 36311:case 36292:return bJ}}(e.type)}function kG(i,e,t){this.id=i,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function GJ(i){switch(i){case 5126:return xJ;case 35664:return CJ;case 35665:return SJ;case 35666:return MJ;case 35674:return EJ;case 35675:return DJ;case 35676:return AJ;case 5124:case 35670:return TJ;case 35667:case 35671:return IJ;case 35668:case 35672:return RJ;case 35669:case 35673:return PJ;case 5125:return kJ;case 36294:return OJ;case 36295:return FJ;case 36296:return LJ;case 35678:case 36198:case 36298:case 36306:case 35682:return NJ;case 35679:case 36299:case 36307:return BJ;case 35680:case 36300:case 36308:case 36293:return VJ;case 36289:case 36303:case 36311:case 36292:return UJ}}(e.type)}function OG(i){this.id=i,this.seq=[],this.map={}}kG.prototype.updateCache=function(i){const e=this.cache;i instanceof Float32Array&&e.length!==i.length&&(this.cache=new Float32Array(i.length)),Ha(e,i)},OG.prototype.setValue=function(i,e,t){const s=this.seq;for(let o=0,a=s.length;o!==a;++o){const l=s[o];l.setValue(i,e[l.id],t)}};const mL=/(\w+)(\])?(\[|\.)?/g;function FG(i,e){i.seq.push(e),i.map[e.id]=e}function zJ(i,e,t){const s=i.name,o=s.length;for(mL.lastIndex=0;;){const a=mL.exec(s),l=mL.lastIndex;let h=a[1];const _=a[3];if("]"===a[2]&&(h|=0),void 0===_||"["===_&&l+2===o){FG(t,void 0===_?new HJ(h,i,e):new kG(h,i,e));break}{let x=t.map[h];void 0===x&&(x=new OG(h),FG(t,x)),t=x}}}function Wv(i,e){this.seq=[],this.map={};const t=i.getProgramParameter(e,35718);for(let s=0;s<t;++s){const o=i.getActiveUniform(e,s);zJ(o,i.getUniformLocation(e,o.name),this)}}function LG(i,e,t){const s=i.createShader(e);return i.shaderSource(s,t),i.compileShader(s),s}Wv.prototype.setValue=function(i,e,t,s){const o=this.map[e];void 0!==o&&o.setValue(i,t,s)},Wv.prototype.setOptional=function(i,e,t){const s=e[t];void 0!==s&&this.setValue(i,t,s)},Wv.upload=function(i,e,t,s){for(let o=0,a=e.length;o!==a;++o){const l=e[o],h=t[l.id];!1!==h.needsUpdate&&l.setValue(i,h.value,s)}},Wv.seqWithValue=function(i,e){const t=[];for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.id in e&&t.push(a)}return t};let jJ=0;function NG(i,e,t){const s=i.getShaderParameter(e,35713),o=i.getShaderInfoLog(e).trim();return s&&""===o?"":t.toUpperCase()+"\n\n"+o+"\n\n"+function WJ(i){const e=i.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(i.getShaderSource(e))}function YJ(i,e){const t=function qJ(i){switch(i){case kv:return["Linear","( value )"];case Wr:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function $J(i,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function zE(i){return""!==i}function BG(i,e){return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function VG(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const QJ=/^[ \t]*#include +<([\w\d./]+)>/gm;function vL(i){return i.replace(QJ,XJ)}function XJ(i,e){const t=hi[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return vL(t)}const eQ=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,tQ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function UG(i){return i.replace(tQ,GG).replace(eQ,nQ)}function nQ(i,e,t,s){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),GG(0,e,t,s)}function GG(i,e,t,s){let o="";for(let a=parseInt(e);a<parseInt(t);a++)o+=s.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return o}function HG(i){let e="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?e+="\n#define HIGH_PRECISION":"mediump"===i.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(e+="\n#define LOW_PRECISION"),e}function aQ(i,e,t,s){const o=i.getContext(),a=t.defines;let l=t.vertexShader,h=t.fragmentShader;const g=function iQ(i){let e="SHADOWMAP_TYPE_BASIC";return 1===i.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),_=function rQ(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),b=function sQ(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(t),x=function oQ(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),S=t.isWebGL2?"":function ZJ(i){return[i.extensionDerivatives||i.envMapCubeUV||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(zE).join("\n")}(t),M=function KJ(i){const e=[];for(const t in i){const s=i[t];!1!==s&&e.push("#define "+t+" "+s)}return e.join("\n")}(a),T=o.createProgram();let I,L,k=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(I=[M].filter(zE).join("\n"),I.length>0&&(I+="\n"),L=[S,M].filter(zE).join("\n"),L.length>0&&(L+="\n")):(I=[HG(t),"#define SHADER_NAME "+t.shaderName,M,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+b:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+g:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(zE).join("\n"),L=[S,HG(t),"#define SHADER_NAME "+t.shaderName,M,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+_:"",t.envMap?"#define "+b:"",t.envMap?"#define "+x:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+g:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?hi.tonemapping_pars_fragment:"",0!==t.toneMapping?$J("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.transparent?"":"#define OPAQUE",hi.encodings_pars_fragment,YJ("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(zE).join("\n")),l=vL(l),l=BG(l,t),l=VG(l,t),h=vL(h),h=BG(h,t),h=VG(h,t),l=UG(l),h=UG(h),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(k="#version 300 es\n",I=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+I,L=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+L);const U=k+L+h,N=LG(o,35633,k+I+l),j=LG(o,35632,U);if(o.attachShader(T,N),o.attachShader(T,j),void 0!==t.index0AttributeName?o.bindAttribLocation(T,0,t.index0AttributeName):!0===t.morphTargets&&o.bindAttribLocation(T,0,"position"),o.linkProgram(T),i.debug.checkShaderErrors){const de=o.getProgramInfoLog(T).trim(),Re=o.getShaderInfoLog(N).trim(),xe=o.getShaderInfoLog(j).trim();let W=!0,ce=!0;if(!1===o.getProgramParameter(T,35714)){W=!1;const be=NG(o,N,"vertex"),De=NG(o,j,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(T,35715)+"\n\nProgram Info Log: "+de+"\n"+be+"\n"+De)}else""!==de?console.warn("THREE.WebGLProgram: Program Info Log:",de):(""===Re||""===xe)&&(ce=!1);ce&&(this.diagnostics={runnable:W,programLog:de,vertexShader:{log:Re,prefix:I},fragmentShader:{log:xe,prefix:L}})}let K,ne;return o.deleteShader(N),o.deleteShader(j),this.getUniforms=function(){return void 0===K&&(K=new Wv(o,T)),K},this.getAttributes=function(){return void 0===ne&&(ne=function JJ(i,e){const t={},s=i.getProgramParameter(e,35721);for(let o=0;o<s;o++){const a=i.getActiveAttrib(e,o),l=a.name;let h=1;35674===a.type&&(h=2),35675===a.type&&(h=3),35676===a.type&&(h=4),t[l]={type:a.type,location:i.getAttribLocation(e,l),locationSize:h}}return t}(o,T)),ne},this.destroy=function(){s.releaseStatesOfProgram(this),o.deleteProgram(T),this.program=void 0},this.name=t.shaderName,this.id=jJ++,this.cacheKey=e,this.usedTimes=1,this.program=T,this.vertexShader=N,this.fragmentShader=j,this}let lQ=0;class cQ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const s=e.fragmentShader,o=this._getShaderStage(e.vertexShader),a=this._getShaderStage(s),l=this._getShaderCacheForMaterial(e);return!1===l.has(o)&&(l.add(o),o.usedTimes++),!1===l.has(a)&&(l.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const s of t)s.usedTimes--,0===s.usedTimes&&this.shaderCache.delete(s);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const s=new uQ;t.set(e,s)}return t.get(e)}}class uQ{constructor(){this.id=lQ++,this.usedTimes=0}}function dQ(i,e,t,s,o,a,l){const h=new KF,g=new cQ,_=[],b=o.isWebGL2,x=o.logarithmicDepthBuffer,S=o.floatVertexTextures,M=o.maxVertexUniforms,T=o.vertexTextures;let I=o.precision;const L={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function R(W,ce,be,De,Ie){const ae=De.fog,Ae=(W.isMeshStandardMaterial?t:e).get(W.envMap||(W.isMeshStandardMaterial?De.environment:null)),ht=L[W.type],Le=Ie.isSkinnedMesh?function k(W){const be=W.skeleton.bones;if(S)return 1024;{const Ie=Math.floor((M-20)/4),ae=Math.min(Ie,be.length);return ae<be.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+be.length+" bones. This GPU supports "+ae+"."),0):ae}}(Ie):0;let Je,mt,Yt,St;if(null!==W.precision&&(I=o.getMaxPrecision(W.precision),I!==W.precision&&console.warn("THREE.WebGLProgram.getParameters:",W.precision,"not supported, using",I,"instead.")),ht){const Ft=pf[ht];Je=Ft.vertexShader,mt=Ft.fragmentShader}else Je=W.vertexShader,mt=W.fragmentShader,g.update(W),Yt=g.getVertexShaderID(W),St=g.getFragmentShaderID(W);const ze=i.getRenderTarget(),Vt=W.clearcoat>0;return{isWebGL2:b,shaderID:ht,shaderName:W.type,vertexShader:Je,fragmentShader:mt,defines:W.defines,customVertexShaderID:Yt,customFragmentShaderID:St,isRawShaderMaterial:!0===W.isRawShaderMaterial,glslVersion:W.glslVersion,precision:I,instancing:!0===Ie.isInstancedMesh,instancingColor:!0===Ie.isInstancedMesh&&null!==Ie.instanceColor,supportsVertexTextures:T,outputEncoding:null===ze?i.outputEncoding:!0===ze.isXRRenderTarget?ze.texture.encoding:kv,map:!!W.map,matcap:!!W.matcap,envMap:!!Ae,envMapMode:Ae&&Ae.mapping,envMapCubeUV:!!Ae&&(306===Ae.mapping||307===Ae.mapping),lightMap:!!W.lightMap,aoMap:!!W.aoMap,emissiveMap:!!W.emissiveMap,bumpMap:!!W.bumpMap,normalMap:!!W.normalMap,objectSpaceNormalMap:1===W.normalMapType,tangentSpaceNormalMap:0===W.normalMapType,decodeVideoTexture:!!W.map&&!0===W.map.isVideoTexture&&W.map.encoding===Wr,clearcoat:Vt,clearcoatMap:Vt&&!!W.clearcoatMap,clearcoatRoughnessMap:Vt&&!!W.clearcoatRoughnessMap,clearcoatNormalMap:Vt&&!!W.clearcoatNormalMap,displacementMap:!!W.displacementMap,roughnessMap:!!W.roughnessMap,metalnessMap:!!W.metalnessMap,specularMap:!!W.specularMap,specularIntensityMap:!!W.specularIntensityMap,specularColorMap:!!W.specularColorMap,transparent:W.transparent,alphaMap:!!W.alphaMap,alphaTest:W.alphaTest>0,gradientMap:!!W.gradientMap,sheen:W.sheen>0,sheenColorMap:!!W.sheenColorMap,sheenRoughnessMap:!!W.sheenRoughnessMap,transmission:W.transmission>0,transmissionMap:!!W.transmissionMap,thicknessMap:!!W.thicknessMap,combine:W.combine,vertexTangents:!!W.normalMap&&!!Ie.geometry&&!!Ie.geometry.attributes.tangent,vertexColors:W.vertexColors,vertexAlphas:!0===W.vertexColors&&!!Ie.geometry&&!!Ie.geometry.attributes.color&&4===Ie.geometry.attributes.color.itemSize,vertexUvs:!!(W.map||W.bumpMap||W.normalMap||W.specularMap||W.alphaMap||W.emissiveMap||W.roughnessMap||W.metalnessMap||W.clearcoatMap||W.clearcoatRoughnessMap||W.clearcoatNormalMap||W.displacementMap||W.transmissionMap||W.thicknessMap||W.specularIntensityMap||W.specularColorMap||W.sheenColorMap||W.sheenRoughnessMap),uvsVertexOnly:!(W.map||W.bumpMap||W.normalMap||W.specularMap||W.alphaMap||W.emissiveMap||W.roughnessMap||W.metalnessMap||W.clearcoatNormalMap||W.transmission>0||W.transmissionMap||W.thicknessMap||W.specularIntensityMap||W.specularColorMap||W.sheen>0||W.sheenColorMap||W.sheenRoughnessMap||!W.displacementMap),fog:!!ae,useFog:W.fog,fogExp2:ae&&ae.isFogExp2,flatShading:!!W.flatShading,sizeAttenuation:W.sizeAttenuation,logarithmicDepthBuffer:x,skinning:!0===Ie.isSkinnedMesh&&Le>0,maxBones:Le,useVertexTexture:S,morphTargets:!!Ie.geometry&&!!Ie.geometry.morphAttributes.position,morphNormals:!!Ie.geometry&&!!Ie.geometry.morphAttributes.normal,morphTargetsCount:Ie.geometry&&Ie.geometry.morphAttributes.position?Ie.geometry.morphAttributes.position.length:0,numDirLights:ce.directional.length,numPointLights:ce.point.length,numSpotLights:ce.spot.length,numRectAreaLights:ce.rectArea.length,numHemiLights:ce.hemi.length,numDirLightShadows:ce.directionalShadowMap.length,numPointLightShadows:ce.pointShadowMap.length,numSpotLightShadows:ce.spotShadowMap.length,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:W.dithering,shadowMapEnabled:i.shadowMap.enabled&&be.length>0,shadowMapType:i.shadowMap.type,toneMapping:W.toneMapped?i.toneMapping:0,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:W.premultipliedAlpha,doubleSided:2===W.side,flipSided:1===W.side,depthPacking:void 0!==W.depthPacking&&W.depthPacking,index0AttributeName:W.index0AttributeName,extensionDerivatives:W.extensions&&W.extensions.derivatives,extensionFragDepth:W.extensions&&W.extensions.fragDepth,extensionDrawBuffers:W.extensions&&W.extensions.drawBuffers,extensionShaderTextureLOD:W.extensions&&W.extensions.shaderTextureLOD,rendererExtensionFragDepth:b||s.has("EXT_frag_depth"),rendererExtensionDrawBuffers:b||s.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:b||s.has("EXT_shader_texture_lod"),customProgramCacheKey:W.customProgramCacheKey()}},getProgramCacheKey:function U(W){const ce=[];if(W.shaderID?ce.push(W.shaderID):(ce.push(W.customVertexShaderID),ce.push(W.customFragmentShaderID)),void 0!==W.defines)for(const be in W.defines)ce.push(be),ce.push(W.defines[be]);return!1===W.isRawShaderMaterial&&(function N(W,ce){W.push(ce.precision),W.push(ce.outputEncoding),W.push(ce.envMapMode),W.push(ce.combine),W.push(ce.vertexUvs),W.push(ce.fogExp2),W.push(ce.sizeAttenuation),W.push(ce.maxBones),W.push(ce.morphTargetsCount),W.push(ce.numDirLights),W.push(ce.numPointLights),W.push(ce.numSpotLights),W.push(ce.numHemiLights),W.push(ce.numRectAreaLights),W.push(ce.numDirLightShadows),W.push(ce.numPointLightShadows),W.push(ce.numSpotLightShadows),W.push(ce.shadowMapType),W.push(ce.toneMapping),W.push(ce.numClippingPlanes),W.push(ce.numClipIntersection)}(ce,W),function j(W,ce){h.disableAll(),ce.isWebGL2&&h.enable(0),ce.supportsVertexTextures&&h.enable(1),ce.instancing&&h.enable(2),ce.instancingColor&&h.enable(3),ce.map&&h.enable(4),ce.matcap&&h.enable(5),ce.envMap&&h.enable(6),ce.envMapCubeUV&&h.enable(7),ce.lightMap&&h.enable(8),ce.aoMap&&h.enable(9),ce.emissiveMap&&h.enable(10),ce.bumpMap&&h.enable(11),ce.normalMap&&h.enable(12),ce.objectSpaceNormalMap&&h.enable(13),ce.tangentSpaceNormalMap&&h.enable(14),ce.clearcoat&&h.enable(15),ce.clearcoatMap&&h.enable(16),ce.clearcoatRoughnessMap&&h.enable(17),ce.clearcoatNormalMap&&h.enable(18),ce.displacementMap&&h.enable(19),ce.specularMap&&h.enable(20),ce.roughnessMap&&h.enable(21),ce.metalnessMap&&h.enable(22),ce.gradientMap&&h.enable(23),ce.alphaMap&&h.enable(24),ce.alphaTest&&h.enable(25),ce.vertexColors&&h.enable(26),ce.vertexAlphas&&h.enable(27),ce.vertexUvs&&h.enable(28),ce.vertexTangents&&h.enable(29),ce.uvsVertexOnly&&h.enable(30),ce.fog&&h.enable(31),W.push(h.mask),h.disableAll(),ce.useFog&&h.enable(0),ce.flatShading&&h.enable(1),ce.logarithmicDepthBuffer&&h.enable(2),ce.skinning&&h.enable(3),ce.useVertexTexture&&h.enable(4),ce.morphTargets&&h.enable(5),ce.morphNormals&&h.enable(6),ce.premultipliedAlpha&&h.enable(7),ce.shadowMapEnabled&&h.enable(8),ce.physicallyCorrectLights&&h.enable(9),ce.doubleSided&&h.enable(10),ce.flipSided&&h.enable(11),ce.depthPacking&&h.enable(12),ce.dithering&&h.enable(13),ce.specularIntensityMap&&h.enable(14),ce.specularColorMap&&h.enable(15),ce.transmission&&h.enable(16),ce.transmissionMap&&h.enable(17),ce.thicknessMap&&h.enable(18),ce.sheen&&h.enable(19),ce.sheenColorMap&&h.enable(20),ce.sheenRoughnessMap&&h.enable(21),ce.decodeVideoTexture&&h.enable(22),ce.transparent&&h.enable(23),W.push(h.mask)}(ce,W),ce.push(i.outputEncoding)),ce.push(W.customProgramCacheKey),ce.join()},getUniforms:function K(W){const ce=L[W.type];let be;return be=ce?B9.clone(pf[ce].uniforms):W.uniforms,be},acquireProgram:function ne(W,ce){let be;for(let De=0,Ie=_.length;De<Ie;De++){const ae=_[De];if(ae.cacheKey===ce){be=ae,++be.usedTimes;break}}return void 0===be&&(be=new aQ(i,ce,W,a),_.push(be)),be},releaseProgram:function de(W){if(0==--W.usedTimes){const ce=_.indexOf(W);_[ce]=_[_.length-1],_.pop(),W.destroy()}},releaseShaderCache:function Re(W){g.remove(W)},programs:_,dispose:function xe(){g.dispose()}}}function hQ(){let i=new WeakMap;return{get:function e(a){let l=i.get(a);return void 0===l&&(l={},i.set(a,l)),l},remove:function t(a){i.delete(a)},update:function s(a,l,h){i.get(a)[l]=h},dispose:function o(){i=new WeakMap}}}function fQ(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function zG(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function jG(){const i=[];let e=0;const t=[],s=[],o=[];function l(x,S,M,T,I,L){let k=i[e];return void 0===k?(k={id:x.id,object:x,geometry:S,material:M,groupOrder:T,renderOrder:x.renderOrder,z:I,group:L},i[e]=k):(k.id=x.id,k.object=x,k.geometry=S,k.material=M,k.groupOrder=T,k.renderOrder=x.renderOrder,k.z=I,k.group=L),e++,k}return{opaque:t,transmissive:s,transparent:o,init:function a(){e=0,t.length=0,s.length=0,o.length=0},push:function h(x,S,M,T,I,L){const k=l(x,S,M,T,I,L);M.transmission>0?s.push(k):!0===M.transparent?o.push(k):t.push(k)},unshift:function g(x,S,M,T,I,L){const k=l(x,S,M,T,I,L);M.transmission>0?s.unshift(k):!0===M.transparent?o.unshift(k):t.unshift(k)},finish:function b(){for(let x=e,S=i.length;x<S;x++){const M=i[x];if(null===M.id)break;M.id=null,M.object=null,M.geometry=null,M.material=null,M.group=null}},sort:function _(x,S){t.length>1&&t.sort(x||fQ),s.length>1&&s.sort(S||zG),o.length>1&&o.sort(S||zG)}}}function pQ(){let i=new WeakMap;return{get:function e(s,o){let a;return!1===i.has(s)?(a=new jG,i.set(s,[a])):o>=i.get(s).length?(a=new jG,i.get(s).push(a)):a=i.get(s)[o],a},dispose:function t(){i=new WeakMap}}}function gQ(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new J,color:new Ht};break;case"SpotLight":t={position:new J,direction:new J,color:new Ht,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new J,color:new Ht,distance:0,decay:0};break;case"HemisphereLight":t={direction:new J,skyColor:new Ht,groundColor:new Ht};break;case"RectAreaLight":t={color:new Ht,position:new J,halfWidth:new J,halfHeight:new J}}return i[e.id]=t,t}}}let vQ=0;function _Q(i,e){return(e.castShadow?1:0)-(i.castShadow?1:0)}function yQ(i,e){const t=new gQ,s=function mQ(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt,shadowCameraNear:1,shadowCameraFar:1e3}}return i[e.id]=t,t}}}(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let b=0;b<9;b++)o.probe.push(new J);const a=new J,l=new sn,h=new sn;return{setup:function g(b,x){let S=0,M=0,T=0;for(let Re=0;Re<9;Re++)o.probe[Re].set(0,0,0);let I=0,L=0,k=0,R=0,U=0,N=0,j=0,K=0;b.sort(_Q);const ne=!0!==x?Math.PI:1;for(let Re=0,xe=b.length;Re<xe;Re++){const W=b[Re],ce=W.color,be=W.intensity,De=W.distance,Ie=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)S+=ce.r*be*ne,M+=ce.g*be*ne,T+=ce.b*be*ne;else if(W.isLightProbe)for(let ae=0;ae<9;ae++)o.probe[ae].addScaledVector(W.sh.coefficients[ae],be);else if(W.isDirectionalLight){const ae=t.get(W);if(ae.color.copy(W.color).multiplyScalar(W.intensity*ne),W.castShadow){const ye=W.shadow,Ae=s.get(W);Ae.shadowBias=ye.bias,Ae.shadowNormalBias=ye.normalBias,Ae.shadowRadius=ye.radius,Ae.shadowMapSize=ye.mapSize,o.directionalShadow[I]=Ae,o.directionalShadowMap[I]=Ie,o.directionalShadowMatrix[I]=W.shadow.matrix,N++}o.directional[I]=ae,I++}else if(W.isSpotLight){const ae=t.get(W);if(ae.position.setFromMatrixPosition(W.matrixWorld),ae.color.copy(ce).multiplyScalar(be*ne),ae.distance=De,ae.coneCos=Math.cos(W.angle),ae.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),ae.decay=W.decay,W.castShadow){const ye=W.shadow,Ae=s.get(W);Ae.shadowBias=ye.bias,Ae.shadowNormalBias=ye.normalBias,Ae.shadowRadius=ye.radius,Ae.shadowMapSize=ye.mapSize,o.spotShadow[k]=Ae,o.spotShadowMap[k]=Ie,o.spotShadowMatrix[k]=W.shadow.matrix,K++}o.spot[k]=ae,k++}else if(W.isRectAreaLight){const ae=t.get(W);ae.color.copy(ce).multiplyScalar(be),ae.halfWidth.set(.5*W.width,0,0),ae.halfHeight.set(0,.5*W.height,0),o.rectArea[R]=ae,R++}else if(W.isPointLight){const ae=t.get(W);if(ae.color.copy(W.color).multiplyScalar(W.intensity*ne),ae.distance=W.distance,ae.decay=W.decay,W.castShadow){const ye=W.shadow,Ae=s.get(W);Ae.shadowBias=ye.bias,Ae.shadowNormalBias=ye.normalBias,Ae.shadowRadius=ye.radius,Ae.shadowMapSize=ye.mapSize,Ae.shadowCameraNear=ye.camera.near,Ae.shadowCameraFar=ye.camera.far,o.pointShadow[L]=Ae,o.pointShadowMap[L]=Ie,o.pointShadowMatrix[L]=W.shadow.matrix,j++}o.point[L]=ae,L++}else if(W.isHemisphereLight){const ae=t.get(W);ae.skyColor.copy(W.color).multiplyScalar(be*ne),ae.groundColor.copy(W.groundColor).multiplyScalar(be*ne),o.hemi[U]=ae,U++}}R>0&&(e.isWebGL2||!0===i.has("OES_texture_float_linear")?(o.rectAreaLTC1=Rt.LTC_FLOAT_1,o.rectAreaLTC2=Rt.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(o.rectAreaLTC1=Rt.LTC_HALF_1,o.rectAreaLTC2=Rt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=S,o.ambient[1]=M,o.ambient[2]=T;const de=o.hash;(de.directionalLength!==I||de.pointLength!==L||de.spotLength!==k||de.rectAreaLength!==R||de.hemiLength!==U||de.numDirectionalShadows!==N||de.numPointShadows!==j||de.numSpotShadows!==K)&&(o.directional.length=I,o.spot.length=k,o.rectArea.length=R,o.point.length=L,o.hemi.length=U,o.directionalShadow.length=N,o.directionalShadowMap.length=N,o.pointShadow.length=j,o.pointShadowMap.length=j,o.spotShadow.length=K,o.spotShadowMap.length=K,o.directionalShadowMatrix.length=N,o.pointShadowMatrix.length=j,o.spotShadowMatrix.length=K,de.directionalLength=I,de.pointLength=L,de.spotLength=k,de.rectAreaLength=R,de.hemiLength=U,de.numDirectionalShadows=N,de.numPointShadows=j,de.numSpotShadows=K,o.version=vQ++)},setupView:function _(b,x){let S=0,M=0,T=0,I=0,L=0;const k=x.matrixWorldInverse;for(let R=0,U=b.length;R<U;R++){const N=b[R];if(N.isDirectionalLight){const j=o.directional[S];j.direction.setFromMatrixPosition(N.matrixWorld),a.setFromMatrixPosition(N.target.matrixWorld),j.direction.sub(a),j.direction.transformDirection(k),S++}else if(N.isSpotLight){const j=o.spot[T];j.position.setFromMatrixPosition(N.matrixWorld),j.position.applyMatrix4(k),j.direction.setFromMatrixPosition(N.matrixWorld),a.setFromMatrixPosition(N.target.matrixWorld),j.direction.sub(a),j.direction.transformDirection(k),T++}else if(N.isRectAreaLight){const j=o.rectArea[I];j.position.setFromMatrixPosition(N.matrixWorld),j.position.applyMatrix4(k),h.identity(),l.copy(N.matrixWorld),l.premultiply(k),h.extractRotation(l),j.halfWidth.set(.5*N.width,0,0),j.halfHeight.set(0,.5*N.height,0),j.halfWidth.applyMatrix4(h),j.halfHeight.applyMatrix4(h),I++}else if(N.isPointLight){const j=o.point[M];j.position.setFromMatrixPosition(N.matrixWorld),j.position.applyMatrix4(k),M++}else if(N.isHemisphereLight){const j=o.hemi[L];j.direction.setFromMatrixPosition(N.matrixWorld),j.direction.transformDirection(k),j.direction.normalize(),L++}}},state:o}}function WG(i,e){const t=new yQ(i,e),s=[],o=[];return{init:function a(){s.length=0,o.length=0},state:{lightsArray:s,shadowsArray:o,lights:t},setupLights:function g(x){t.setup(s,x)},setupLightsView:function _(x){t.setupView(s,x)},pushLight:function l(x){s.push(x)},pushShadow:function h(x){o.push(x)}}}function bQ(i,e){let t=new WeakMap;return{get:function s(a,l=0){let h;return!1===t.has(a)?(h=new WG(i,e),t.set(a,[h])):l>=t.get(a).length?(h=new WG(i,e),t.get(a).push(h)):h=t.get(a)[l],h},dispose:function o(){t=new WeakMap}}}class _L extends ha{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}_L.prototype.isMeshDepthMaterial=!0;class yL extends ha{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new J,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function qG(i,e,t){let s=new S1;const o=new rt,a=new rt,l=new cr,h=new _L({depthPacking:3201}),g=new yL,_={},b=t.maxTextureSize,x={0:1,1:0,2:2},S=new zv({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new rt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),M=S.clone();M.defines.HORIZONTAL_PASS=1;const T=new In;T.setAttribute("position",new gr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const I=new Do(T,S),L=this;function k(N,j){const K=e.update(I);S.defines.VSM_SAMPLES!==N.blurSamples&&(S.defines.VSM_SAMPLES=N.blurSamples,M.defines.VSM_SAMPLES=N.blurSamples,S.needsUpdate=!0,M.needsUpdate=!0),S.uniforms.shadow_pass.value=N.map.texture,S.uniforms.resolution.value=N.mapSize,S.uniforms.radius.value=N.radius,i.setRenderTarget(N.mapPass),i.clear(),i.renderBufferDirect(j,null,K,S,I,null),M.uniforms.shadow_pass.value=N.mapPass.texture,M.uniforms.resolution.value=N.mapSize,M.uniforms.radius.value=N.radius,i.setRenderTarget(N.map),i.clear(),i.renderBufferDirect(j,null,K,M,I,null)}function R(N,j,K,ne,de,Re,xe){let W=null;const ce=!0===ne.isPointLight?N.customDistanceMaterial:N.customDepthMaterial;if(W=void 0!==ce?ce:!0===ne.isPointLight?g:h,i.localClippingEnabled&&!0===K.clipShadows&&0!==K.clippingPlanes.length||K.displacementMap&&0!==K.displacementScale||K.alphaMap&&K.alphaTest>0){const be=W.uuid,De=K.uuid;let Ie=_[be];void 0===Ie&&(Ie={},_[be]=Ie);let ae=Ie[De];void 0===ae&&(ae=W.clone(),Ie[De]=ae),W=ae}return W.visible=K.visible,W.wireframe=K.wireframe,W.side=3===xe?null!==K.shadowSide?K.shadowSide:K.side:null!==K.shadowSide?K.shadowSide:x[K.side],W.alphaMap=K.alphaMap,W.alphaTest=K.alphaTest,W.clipShadows=K.clipShadows,W.clippingPlanes=K.clippingPlanes,W.clipIntersection=K.clipIntersection,W.displacementMap=K.displacementMap,W.displacementScale=K.displacementScale,W.displacementBias=K.displacementBias,W.wireframeLinewidth=K.wireframeLinewidth,W.linewidth=K.linewidth,!0===ne.isPointLight&&!0===W.isMeshDistanceMaterial&&(W.referencePosition.setFromMatrixPosition(ne.matrixWorld),W.nearDistance=de,W.farDistance=Re),W}function U(N,j,K,ne,de){if(!1===N.visible)return;if(N.layers.test(j.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&3===de)&&(!N.frustumCulled||s.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(K.matrixWorldInverse,N.matrixWorld);const W=e.update(N),ce=N.material;if(Array.isArray(ce)){const be=W.groups;for(let De=0,Ie=be.length;De<Ie;De++){const ae=be[De],ye=ce[ae.materialIndex];if(ye&&ye.visible){const Ae=R(N,0,ye,ne,K.near,K.far,de);i.renderBufferDirect(K,null,W,Ae,N,ae)}}}else if(ce.visible){const be=R(N,0,ce,ne,K.near,K.far,de);i.renderBufferDirect(K,null,W,be,N,null)}}const xe=N.children;for(let W=0,ce=xe.length;W<ce;W++)U(xe[W],j,K,ne,de)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(N,j,K){if(!1===L.enabled||!1===L.autoUpdate&&!1===L.needsUpdate||0===N.length)return;const ne=i.getRenderTarget(),de=i.getActiveCubeFace(),Re=i.getActiveMipmapLevel(),xe=i.state;xe.setBlending(0),xe.buffers.color.setClear(1,1,1,1),xe.buffers.depth.setTest(!0),xe.setScissorTest(!1);for(let W=0,ce=N.length;W<ce;W++){const be=N[W],De=be.shadow;if(void 0===De){console.warn("THREE.WebGLShadowMap:",be,"has no shadow.");continue}if(!1===De.autoUpdate&&!1===De.needsUpdate)continue;o.copy(De.mapSize);const Ie=De.getFrameExtents();if(o.multiply(Ie),a.copy(De.mapSize),(o.x>b||o.y>b)&&(o.x>b&&(a.x=Math.floor(b/Ie.x),o.x=a.x*Ie.x,De.mapSize.x=a.x),o.y>b&&(a.y=Math.floor(b/Ie.y),o.y=a.y*Ie.y,De.mapSize.y=a.y)),null===De.map&&!De.isPointLightShadow&&3===this.type){const ye={minFilter:vs,magFilter:vs,format:Ua};De.map=new Vu(o.x,o.y,ye),De.map.texture.name=be.name+".shadowMap",De.mapPass=new Vu(o.x,o.y,ye),De.camera.updateProjectionMatrix()}null===De.map&&(De.map=new Vu(o.x,o.y,{minFilter:co,magFilter:co,format:Ua}),De.map.texture.name=be.name+".shadowMap",De.camera.updateProjectionMatrix()),i.setRenderTarget(De.map),i.clear();const ae=De.getViewportCount();for(let ye=0;ye<ae;ye++){const Ae=De.getViewport(ye);l.set(a.x*Ae.x,a.y*Ae.y,a.x*Ae.z,a.y*Ae.w),xe.viewport(l),De.updateMatrices(be,ye),s=De.getFrustum(),U(j,K,De.camera,be,this.type)}!De.isPointLightShadow&&3===this.type&&k(De,K),De.needsUpdate=!1}L.needsUpdate=!1,i.setRenderTarget(ne,de,Re)}}function CQ(i,e,t){const s=t.isWebGL2,h=new function o(){let he=!1;const on=new cr;let Zt=null;const Fn=new cr(0,0,0,0);return{setMask:function(et){Zt!==et&&!he&&(i.colorMask(et,et,et,et),Zt=et)},setLocked:function(et){he=et},setClear:function(et,Tn,xi,rs,Dc){!0===Dc&&(et*=rs,Tn*=rs,xi*=rs),on.set(et,Tn,xi,rs),!1===Fn.equals(on)&&(i.clearColor(et,Tn,xi,rs),Fn.copy(on))},reset:function(){he=!1,Zt=null,Fn.set(-1,0,0,0)}}},g=new function a(){let he=!1,on=null,Zt=null,Fn=null;return{setTest:function(et){et?ze(2929):Ei(2929)},setMask:function(et){on!==et&&!he&&(i.depthMask(et),on=et)},setFunc:function(et){if(Zt!==et){if(et)switch(et){case 0:i.depthFunc(512);break;case 1:i.depthFunc(519);break;case 2:i.depthFunc(513);break;case 3:default:i.depthFunc(515);break;case 4:i.depthFunc(514);break;case 5:i.depthFunc(518);break;case 6:i.depthFunc(516);break;case 7:i.depthFunc(517)}else i.depthFunc(515);Zt=et}},setLocked:function(et){he=et},setClear:function(et){Fn!==et&&(i.clearDepth(et),Fn=et)},reset:function(){he=!1,on=null,Zt=null,Fn=null}}},_=new function l(){let he=!1,on=null,Zt=null,Fn=null,et=null,Tn=null,xi=null,rs=null,Dc=null;return{setTest:function(ys){he||(ys?ze(2960):Ei(2960))},setMask:function(ys){on!==ys&&!he&&(i.stencilMask(ys),on=ys)},setFunc:function(ys,yf,gg){(Zt!==ys||Fn!==yf||et!==gg)&&(i.stencilFunc(ys,yf,gg),Zt=ys,Fn=yf,et=gg)},setOp:function(ys,yf,gg){(Tn!==ys||xi!==yf||rs!==gg)&&(i.stencilOp(ys,yf,gg),Tn=ys,xi=yf,rs=gg)},setLocked:function(ys){he=ys},setClear:function(ys){Dc!==ys&&(i.clearStencil(ys),Dc=ys)},reset:function(){he=!1,on=null,Zt=null,Fn=null,et=null,Tn=null,xi=null,rs=null,Dc=null}}};let b={},x={},S=new WeakMap,M=[],T=null,I=!1,L=null,k=null,R=null,U=null,N=null,j=null,K=null,ne=!1,de=null,Re=null,xe=null,W=null,ce=null;const be=i.getParameter(35661);let De=!1,Ie=0;const ae=i.getParameter(7938);-1!==ae.indexOf("WebGL")?(Ie=parseFloat(/^WebGL (\d)/.exec(ae)[1]),De=Ie>=1):-1!==ae.indexOf("OpenGL ES")&&(Ie=parseFloat(/^OpenGL ES (\d)/.exec(ae)[1]),De=Ie>=2);let ye=null,Ae={};const ht=i.getParameter(3088),Le=i.getParameter(2978),Je=(new cr).fromArray(ht),mt=(new cr).fromArray(Le);function Yt(he,on,Zt){const Fn=new Uint8Array(4),et=i.createTexture();i.bindTexture(he,et),i.texParameteri(he,10241,9728),i.texParameteri(he,10240,9728);for(let Tn=0;Tn<Zt;Tn++)i.texImage2D(on+Tn,0,6408,1,1,0,6408,5121,Fn);return et}const St={};function ze(he){!0!==b[he]&&(i.enable(he),b[he]=!0)}function Ei(he){!1!==b[he]&&(i.disable(he),b[he]=!1)}St[3553]=Yt(3553,3553,1),St[34067]=Yt(34067,34069,6),h.setClear(0,0,0,1),g.setClear(1),_.setClear(0),ze(2929),g.setFunc(3),Ct(!1),Jt(1),ze(2884),Xe(0);const kn={100:32774,101:32778,102:32779};if(s)kn[103]=32775,kn[104]=32776;else{const he=e.get("EXT_blend_minmax");null!==he&&(kn[103]=he.MIN_EXT,kn[104]=he.MAX_EXT)}const An={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Xe(he,on,Zt,Fn,et,Tn,xi,rs){if(0!==he){if(!1===I&&(ze(3042),I=!0),5===he)et=et||on,Tn=Tn||Zt,xi=xi||Fn,(on!==k||et!==N)&&(i.blendEquationSeparate(kn[on],kn[et]),k=on,N=et),(Zt!==R||Fn!==U||Tn!==j||xi!==K)&&(i.blendFuncSeparate(An[Zt],An[Fn],An[Tn],An[xi]),R=Zt,U=Fn,j=Tn,K=xi),L=he,ne=null;else if(he!==L||rs!==ne){if((100!==k||100!==N)&&(i.blendEquation(32774),k=100,N=100),rs)switch(he){case 1:i.blendFuncSeparate(1,771,1,771);break;case 2:i.blendFunc(1,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",he)}else switch(he){case 1:i.blendFuncSeparate(770,771,1,771);break;case 2:i.blendFunc(770,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",he)}R=null,U=null,j=null,K=null,L=he,ne=rs}}else!0===I&&(Ei(3042),I=!1)}function Ct(he){de!==he&&(i.frontFace(he?2304:2305),de=he)}function Jt(he){0!==he?(ze(2884),he!==Re&&i.cullFace(1===he?1029:2===he?1028:1032)):Ei(2884),Re=he}function On(he,on,Zt){he?(ze(32823),(W!==on||ce!==Zt)&&(i.polygonOffset(on,Zt),W=on,ce=Zt)):Ei(32823)}function Si(he){void 0===he&&(he=33984+be-1),ye!==he&&(i.activeTexture(he),ye=he)}return{buffers:{color:h,depth:g,stencil:_},enable:ze,disable:Ei,bindFramebuffer:function Vt(he,on){return x[he]!==on&&(i.bindFramebuffer(he,on),x[he]=on,s&&(36009===he&&(x[36160]=on),36160===he&&(x[36009]=on)),!0)},drawBuffers:function vn(he,on){let Zt=M,Fn=!1;if(he)if(Zt=S.get(on),void 0===Zt&&(Zt=[],S.set(on,Zt)),he.isWebGLMultipleRenderTargets){const et=he.texture;if(Zt.length!==et.length||36064!==Zt[0]){for(let Tn=0,xi=et.length;Tn<xi;Tn++)Zt[Tn]=36064+Tn;Zt.length=et.length,Fn=!0}}else 36064!==Zt[0]&&(Zt[0]=36064,Fn=!0);else 1029!==Zt[0]&&(Zt[0]=1029,Fn=!0);Fn&&(t.isWebGL2?i.drawBuffers(Zt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Zt))},useProgram:function Ft(he){return T!==he&&(i.useProgram(he),T=he,!0)},setBlending:Xe,setMaterial:function At(he,on){2===he.side?Ei(2884):ze(2884);let Zt=1===he.side;on&&(Zt=!Zt),Ct(Zt),1===he.blending&&!1===he.transparent?Xe(0):Xe(he.blending,he.blendEquation,he.blendSrc,he.blendDst,he.blendEquationAlpha,he.blendSrcAlpha,he.blendDstAlpha,he.premultipliedAlpha),g.setFunc(he.depthFunc),g.setTest(he.depthTest),g.setMask(he.depthWrite),h.setMask(he.colorWrite);const Fn=he.stencilWrite;_.setTest(Fn),Fn&&(_.setMask(he.stencilWriteMask),_.setFunc(he.stencilFunc,he.stencilRef,he.stencilFuncMask),_.setOp(he.stencilFail,he.stencilZFail,he.stencilZPass)),On(he.polygonOffset,he.polygonOffsetFactor,he.polygonOffsetUnits),!0===he.alphaToCoverage?ze(32926):Ei(32926)},setFlipSided:Ct,setCullFace:Jt,setLineWidth:function Wt(he){he!==xe&&(De&&i.lineWidth(he),xe=he)},setPolygonOffset:On,setScissorTest:function Ln(he){he?ze(3089):Ei(3089)},activeTexture:Si,bindTexture:function Sr(he,on){null===ye&&Si();let Zt=Ae[ye];void 0===Zt&&(Zt={type:void 0,texture:void 0},Ae[ye]=Zt),(Zt.type!==he||Zt.texture!==on)&&(i.bindTexture(he,on||St[he]),Zt.type=he,Zt.texture=on)},unbindTexture:function ur(){const he=Ae[ye];void 0!==he&&void 0!==he.type&&(i.bindTexture(he.type,null),he.type=void 0,he.texture=void 0)},compressedTexImage2D:function re(){try{i.compressedTexImage2D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},texImage2D:function Mn(){try{i.texImage2D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},texImage3D:function hn(){try{i.texImage3D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},texStorage2D:function cn(){try{i.texStorage2D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},texStorage3D:function Ze(){try{i.texStorage3D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},texSubImage2D:function X(){try{i.texSubImage2D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},texSubImage3D:function Ke(){try{i.texSubImage3D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},compressedTexSubImage2D:function Et(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},scissor:function zt(he){!1===Je.equals(he)&&(i.scissor(he.x,he.y,he.z,he.w),Je.copy(he))},viewport:function Gt(he){!1===mt.equals(he)&&(i.viewport(he.x,he.y,he.z,he.w),mt.copy(he))},reset:function jn(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===s&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),b={},ye=null,Ae={},x={},S=new WeakMap,M=[],T=null,I=!1,L=null,k=null,R=null,U=null,N=null,j=null,K=null,ne=!1,de=null,Re=null,xe=null,W=null,ce=null,Je.set(0,0,i.canvas.width,i.canvas.height),mt.set(0,0,i.canvas.width,i.canvas.height),h.reset(),g.reset(),_.reset()}}}function SQ(i,e,t,s,o,a,l){const h=o.isWebGL2,g=o.maxTextures,_=o.maxCubemapSize,b=o.maxTextureSize,x=o.maxSamples,M=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,T=new WeakMap;let I,L=!1;try{L="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(re){}function k(re,X){return L?new OffscreenCanvas(re,X):FE("canvas")}function R(re,X,Ke,Et){let cn=1;if((re.width>Et||re.height>Et)&&(cn=Et/Math.max(re.width,re.height)),cn<1||!0===X){if("undefined"!=typeof HTMLImageElement&&re instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&re instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&re instanceof ImageBitmap){const Ze=X?QU:Math.floor,Mn=Ze(cn*re.width),hn=Ze(cn*re.height);void 0===I&&(I=k(Mn,hn));const zt=Ke?k(Mn,hn):I;return zt.width=Mn,zt.height=hn,zt.getContext("2d").drawImage(re,0,0,Mn,hn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+re.width+"x"+re.height+") to ("+Mn+"x"+hn+")."),zt}return"data"in re&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+re.width+"x"+re.height+")."),re}return re}function U(re){return BF(re.width)&&BF(re.height)}function j(re,X){return re.generateMipmaps&&X&&re.minFilter!==co&&re.minFilter!==vs}function K(re){i.generateMipmap(re)}function ne(re,X,Ke,Et,cn=!1){if(!1===h)return X;if(null!==re){if(void 0!==i[re])return i[re];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+re+"'")}let Ze=X;return 6403===X&&(5126===Ke&&(Ze=33326),5131===Ke&&(Ze=33325),5121===Ke&&(Ze=33321)),33319===X&&(5126===Ke&&(Ze=33328),5131===Ke&&(Ze=33327),5121===Ke&&(Ze=33323)),6408===X&&(5126===Ke&&(Ze=34836),5131===Ke&&(Ze=34842),5121===Ke&&(Ze=Et===Wr&&!1===cn?35907:32856),32819===Ke&&(Ze=32854),32820===Ke&&(Ze=32855)),(33325===Ze||33326===Ze||33327===Ze||33328===Ze||34842===Ze||34836===Ze)&&e.get("EXT_color_buffer_float"),Ze}function de(re,X,Ke){return!0===j(re,Ke)||re.isFramebufferTexture&&re.minFilter!==co&&re.minFilter!==vs?Math.log2(Math.max(X.width,X.height))+1:void 0!==re.mipmaps&&re.mipmaps.length>0?re.mipmaps.length:re.isCompressedTexture&&Array.isArray(re.image)?X.mipmaps.length:1}function Re(re){return re===co||1004===re||1005===re?9728:9729}function xe(re){const X=re.target;X.removeEventListener("dispose",xe),function ce(re){const X=s.get(re);void 0!==X.__webglInit&&(i.deleteTexture(X.__webglTexture),s.remove(re))}(X),X.isVideoTexture&&T.delete(X),l.memory.textures--}function W(re){const X=re.target;X.removeEventListener("dispose",W),function be(re){const X=re.texture,Ke=s.get(re),Et=s.get(X);if(re){if(void 0!==Et.__webglTexture&&(i.deleteTexture(Et.__webglTexture),l.memory.textures--),re.depthTexture&&re.depthTexture.dispose(),re.isWebGLCubeRenderTarget)for(let cn=0;cn<6;cn++)i.deleteFramebuffer(Ke.__webglFramebuffer[cn]),Ke.__webglDepthbuffer&&i.deleteRenderbuffer(Ke.__webglDepthbuffer[cn]);else i.deleteFramebuffer(Ke.__webglFramebuffer),Ke.__webglDepthbuffer&&i.deleteRenderbuffer(Ke.__webglDepthbuffer),Ke.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Ke.__webglMultisampledFramebuffer),Ke.__webglColorRenderbuffer&&i.deleteRenderbuffer(Ke.__webglColorRenderbuffer),Ke.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Ke.__webglDepthRenderbuffer);if(re.isWebGLMultipleRenderTargets)for(let cn=0,Ze=X.length;cn<Ze;cn++){const Mn=s.get(X[cn]);Mn.__webglTexture&&(i.deleteTexture(Mn.__webglTexture),l.memory.textures--),s.remove(X[cn])}s.remove(X),s.remove(re)}}(X)}let De=0;function ye(re,X){const Ke=s.get(re);if(re.isVideoTexture&&function Wt(re){const X=l.render.frame;T.get(re)!==X&&(T.set(re,X),re.update())}(re),re.version>0&&Ke.__version!==re.version){const Et=re.image;if(void 0===Et)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==Et.complete)return void ze(Ke,re,X);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+X),t.bindTexture(3553,Ke.__webglTexture)}function Le(re,X){const Ke=s.get(re);re.version>0&&Ke.__version!==re.version?function Ei(re,X,Ke){if(6!==X.image.length)return;St(re,X),t.activeTexture(33984+Ke),t.bindTexture(34067,re.__webglTexture),i.pixelStorei(37440,X.flipY),i.pixelStorei(37441,X.premultiplyAlpha),i.pixelStorei(3317,X.unpackAlignment),i.pixelStorei(37443,0);const Et=X&&(X.isCompressedTexture||X.image[0].isCompressedTexture),cn=X.image[0]&&X.image[0].isDataTexture,Ze=[];for(let et=0;et<6;et++)Ze[et]=Et||cn?cn?X.image[et].image:X.image[et]:R(X.image[et],!1,!0,_),Ze[et]=On(X,Ze[et]);const Mn=Ze[0],hn=U(Mn)||h,zt=a.convert(X.format,X.encoding),Gt=a.convert(X.type),jn=ne(X.internalFormat,zt,Gt,X.encoding),he=h&&!0!==X.isVideoTexture,on=void 0===re.__version;let Fn,Zt=de(X,Mn,hn);if(Yt(34067,X,hn),Et){he&&on&&t.texStorage2D(34067,Zt,jn,Mn.width,Mn.height);for(let et=0;et<6;et++){Fn=Ze[et].mipmaps;for(let Tn=0;Tn<Fn.length;Tn++){const xi=Fn[Tn];X.format!==Ua?null!==zt?he?t.compressedTexSubImage2D(34069+et,Tn,0,0,xi.width,xi.height,zt,xi.data):t.compressedTexImage2D(34069+et,Tn,jn,xi.width,xi.height,0,xi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):he?t.texSubImage2D(34069+et,Tn,0,0,xi.width,xi.height,zt,Gt,xi.data):t.texImage2D(34069+et,Tn,jn,xi.width,xi.height,0,zt,Gt,xi.data)}}}else{Fn=X.mipmaps,he&&on&&(Fn.length>0&&Zt++,t.texStorage2D(34067,Zt,jn,Ze[0].width,Ze[0].height));for(let et=0;et<6;et++)if(cn){he?t.texSubImage2D(34069+et,0,0,0,Ze[et].width,Ze[et].height,zt,Gt,Ze[et].data):t.texImage2D(34069+et,0,jn,Ze[et].width,Ze[et].height,0,zt,Gt,Ze[et].data);for(let Tn=0;Tn<Fn.length;Tn++){const rs=Fn[Tn].image[et].image;he?t.texSubImage2D(34069+et,Tn+1,0,0,rs.width,rs.height,zt,Gt,rs.data):t.texImage2D(34069+et,Tn+1,jn,rs.width,rs.height,0,zt,Gt,rs.data)}}else{he?t.texSubImage2D(34069+et,0,0,0,zt,Gt,Ze[et]):t.texImage2D(34069+et,0,jn,zt,Gt,Ze[et]);for(let Tn=0;Tn<Fn.length;Tn++){const xi=Fn[Tn];he?t.texSubImage2D(34069+et,Tn+1,0,0,zt,Gt,xi.image[et]):t.texImage2D(34069+et,Tn+1,jn,zt,Gt,xi.image[et])}}}j(X,hn)&&K(34067),re.__version=X.version,X.onUpdate&&X.onUpdate(X)}(Ke,re,X):(t.activeTexture(33984+X),t.bindTexture(34067,Ke.__webglTexture))}const Je={1e3:10497,[Va]:33071,1002:33648},mt={[co]:9728,1004:9984,1005:9986,[vs]:9729,1007:9985,1008:9987};function Yt(re,X,Ke){if(Ke?(i.texParameteri(re,10242,Je[X.wrapS]),i.texParameteri(re,10243,Je[X.wrapT]),(32879===re||35866===re)&&i.texParameteri(re,32882,Je[X.wrapR]),i.texParameteri(re,10240,mt[X.magFilter]),i.texParameteri(re,10241,mt[X.minFilter])):(i.texParameteri(re,10242,33071),i.texParameteri(re,10243,33071),(32879===re||35866===re)&&i.texParameteri(re,32882,33071),(X.wrapS!==Va||X.wrapT!==Va)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(re,10240,Re(X.magFilter)),i.texParameteri(re,10241,Re(X.minFilter)),X.minFilter!==co&&X.minFilter!==vs&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const Et=e.get("EXT_texture_filter_anisotropic");if(X.type===Pv&&!1===e.has("OES_texture_float_linear")||!1===h&&X.type===yx&&!1===e.has("OES_texture_half_float_linear"))return;(X.anisotropy>1||s.get(X).__currentAnisotropy)&&(i.texParameterf(re,Et.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(X.anisotropy,o.getMaxAnisotropy())),s.get(X).__currentAnisotropy=X.anisotropy)}}function St(re,X){void 0===re.__webglInit&&(re.__webglInit=!0,X.addEventListener("dispose",xe),re.__webglTexture=i.createTexture(),l.memory.textures++)}function ze(re,X,Ke){let Et=3553;X.isDataTexture2DArray&&(Et=35866),X.isDataTexture3D&&(Et=32879),St(re,X),t.activeTexture(33984+Ke),t.bindTexture(Et,re.__webglTexture),i.pixelStorei(37440,X.flipY),i.pixelStorei(37441,X.premultiplyAlpha),i.pixelStorei(3317,X.unpackAlignment),i.pixelStorei(37443,0);const cn=function N(re){return!h&&(re.wrapS!==Va||re.wrapT!==Va||re.minFilter!==co&&re.minFilter!==vs)}(X)&&!1===U(X.image);let Ze=R(X.image,cn,!1,b);Ze=On(X,Ze);const Mn=U(Ze)||h,hn=a.convert(X.format,X.encoding);let jn,zt=a.convert(X.type),Gt=ne(X.internalFormat,hn,zt,X.encoding,X.isVideoTexture);Yt(Et,X,Mn);const he=X.mipmaps,on=h&&!0!==X.isVideoTexture,Zt=void 0===re.__version,Fn=de(X,Ze,Mn);if(X.isDepthTexture)Gt=6402,h?Gt=X.type===Pv?36012:1014===X.type?33190:X.type===bx?35056:33189:X.type===Pv&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),X.format===x0&&6402===Gt&&X.type!==IE&&1014!==X.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),X.type=IE,zt=a.convert(X.type)),X.format===wx&&6402===Gt&&(Gt=34041,X.type!==bx&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),X.type=bx,zt=a.convert(X.type))),on&&Zt?t.texStorage2D(3553,1,Gt,Ze.width,Ze.height):t.texImage2D(3553,0,Gt,Ze.width,Ze.height,0,hn,zt,null);else if(X.isDataTexture)if(he.length>0&&Mn){on&&Zt&&t.texStorage2D(3553,Fn,Gt,he[0].width,he[0].height);for(let et=0,Tn=he.length;et<Tn;et++)jn=he[et],on?t.texSubImage2D(3553,0,0,0,jn.width,jn.height,hn,zt,jn.data):t.texImage2D(3553,et,Gt,jn.width,jn.height,0,hn,zt,jn.data);X.generateMipmaps=!1}else on?(Zt&&t.texStorage2D(3553,Fn,Gt,Ze.width,Ze.height),t.texSubImage2D(3553,0,0,0,Ze.width,Ze.height,hn,zt,Ze.data)):t.texImage2D(3553,0,Gt,Ze.width,Ze.height,0,hn,zt,Ze.data);else if(X.isCompressedTexture){on&&Zt&&t.texStorage2D(3553,Fn,Gt,he[0].width,he[0].height);for(let et=0,Tn=he.length;et<Tn;et++)jn=he[et],X.format!==Ua?null!==hn?on?t.compressedTexSubImage2D(3553,et,0,0,jn.width,jn.height,hn,jn.data):t.compressedTexImage2D(3553,et,Gt,jn.width,jn.height,0,jn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):on?t.texSubImage2D(3553,et,0,0,jn.width,jn.height,hn,zt,jn.data):t.texImage2D(3553,et,Gt,jn.width,jn.height,0,hn,zt,jn.data)}else if(X.isDataTexture2DArray)on?(Zt&&t.texStorage3D(35866,Fn,Gt,Ze.width,Ze.height,Ze.depth),t.texSubImage3D(35866,0,0,0,0,Ze.width,Ze.height,Ze.depth,hn,zt,Ze.data)):t.texImage3D(35866,0,Gt,Ze.width,Ze.height,Ze.depth,0,hn,zt,Ze.data);else if(X.isDataTexture3D)on?(Zt&&t.texStorage3D(32879,Fn,Gt,Ze.width,Ze.height,Ze.depth),t.texSubImage3D(32879,0,0,0,0,Ze.width,Ze.height,Ze.depth,hn,zt,Ze.data)):t.texImage3D(32879,0,Gt,Ze.width,Ze.height,Ze.depth,0,hn,zt,Ze.data);else if(X.isFramebufferTexture)on&&Zt?t.texStorage2D(3553,Fn,Gt,Ze.width,Ze.height):t.texImage2D(3553,0,Gt,Ze.width,Ze.height,0,hn,zt,null);else if(he.length>0&&Mn){on&&Zt&&t.texStorage2D(3553,Fn,Gt,he[0].width,he[0].height);for(let et=0,Tn=he.length;et<Tn;et++)jn=he[et],on?t.texSubImage2D(3553,et,0,0,hn,zt,jn):t.texImage2D(3553,et,Gt,hn,zt,jn);X.generateMipmaps=!1}else on?(Zt&&t.texStorage2D(3553,Fn,Gt,Ze.width,Ze.height),t.texSubImage2D(3553,0,0,0,hn,zt,Ze)):t.texImage2D(3553,0,Gt,hn,zt,Ze);j(X,Mn)&&K(Et),re.__version=X.version,X.onUpdate&&X.onUpdate(X)}function Vt(re,X,Ke,Et,cn){const Ze=a.convert(Ke.format,Ke.encoding),Mn=a.convert(Ke.type),hn=ne(Ke.internalFormat,Ze,Mn,Ke.encoding);s.get(X).__hasExternalTextures||(32879===cn||35866===cn?t.texImage3D(cn,0,hn,X.width,X.height,X.depth,0,Ze,Mn,null):t.texImage2D(cn,0,hn,X.width,X.height,0,Ze,Mn,null)),t.bindFramebuffer(36160,re),X.useRenderToTexture?M.framebufferTexture2DMultisampleEXT(36160,Et,cn,s.get(Ke).__webglTexture,0,Jt(X)):i.framebufferTexture2D(36160,Et,cn,s.get(Ke).__webglTexture,0),t.bindFramebuffer(36160,null)}function vn(re,X,Ke){if(i.bindRenderbuffer(36161,re),X.depthBuffer&&!X.stencilBuffer){let Et=33189;if(Ke||X.useRenderToTexture){const cn=X.depthTexture;cn&&cn.isDepthTexture&&(cn.type===Pv?Et=36012:1014===cn.type&&(Et=33190));const Ze=Jt(X);X.useRenderToTexture?M.renderbufferStorageMultisampleEXT(36161,Ze,Et,X.width,X.height):i.renderbufferStorageMultisample(36161,Ze,Et,X.width,X.height)}else i.renderbufferStorage(36161,Et,X.width,X.height);i.framebufferRenderbuffer(36160,36096,36161,re)}else if(X.depthBuffer&&X.stencilBuffer){const Et=Jt(X);Ke&&X.useRenderbuffer?i.renderbufferStorageMultisample(36161,Et,35056,X.width,X.height):X.useRenderToTexture?M.renderbufferStorageMultisampleEXT(36161,Et,35056,X.width,X.height):i.renderbufferStorage(36161,34041,X.width,X.height),i.framebufferRenderbuffer(36160,33306,36161,re)}else{const Et=!0===X.isWebGLMultipleRenderTargets?X.texture[0]:X.texture,cn=a.convert(Et.format,Et.encoding),Ze=a.convert(Et.type),Mn=ne(Et.internalFormat,cn,Ze,Et.encoding),hn=Jt(X);Ke&&X.useRenderbuffer?i.renderbufferStorageMultisample(36161,hn,Mn,X.width,X.height):X.useRenderToTexture?M.renderbufferStorageMultisampleEXT(36161,hn,Mn,X.width,X.height):i.renderbufferStorage(36161,Mn,X.width,X.height)}i.bindRenderbuffer(36161,null)}function kn(re){const X=s.get(re),Ke=!0===re.isWebGLCubeRenderTarget;if(re.depthTexture&&!X.__autoAllocateDepthBuffer){if(Ke)throw new Error("target.depthTexture not supported in Cube render targets");!function Ft(re,X){if(X&&X.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,re),!X.depthTexture||!X.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!s.get(X.depthTexture).__webglTexture||X.depthTexture.image.width!==X.width||X.depthTexture.image.height!==X.height)&&(X.depthTexture.image.width=X.width,X.depthTexture.image.height=X.height,X.depthTexture.needsUpdate=!0),ye(X.depthTexture,0);const Et=s.get(X.depthTexture).__webglTexture,cn=Jt(X);if(X.depthTexture.format===x0)X.useRenderToTexture?M.framebufferTexture2DMultisampleEXT(36160,36096,3553,Et,0,cn):i.framebufferTexture2D(36160,36096,3553,Et,0);else{if(X.depthTexture.format!==wx)throw new Error("Unknown depthTexture format");X.useRenderToTexture?M.framebufferTexture2DMultisampleEXT(36160,33306,3553,Et,0,cn):i.framebufferTexture2D(36160,33306,3553,Et,0)}}(X.__webglFramebuffer,re)}else if(Ke){X.__webglDepthbuffer=[];for(let Et=0;Et<6;Et++)t.bindFramebuffer(36160,X.__webglFramebuffer[Et]),X.__webglDepthbuffer[Et]=i.createRenderbuffer(),vn(X.__webglDepthbuffer[Et],re,!1)}else t.bindFramebuffer(36160,X.__webglFramebuffer),X.__webglDepthbuffer=i.createRenderbuffer(),vn(X.__webglDepthbuffer,re,!1);t.bindFramebuffer(36160,null)}function Jt(re){return h&&(re.useRenderbuffer||re.useRenderToTexture)?Math.min(x,re.samples):0}function On(re,X){const Ke=re.encoding,Et=re.format,cn=re.type;return!0===re.isCompressedTexture||!0===re.isVideoTexture||1035===re.format||Ke!==kv&&(Ke===Wr?!1===h?!0===e.has("EXT_sRGB")&&Et===Ua?(re.format=1035,re.minFilter=vs,re.generateMipmaps=!1):X=S0.sRGBToLinear(X):(Et!==Ua||cn!==Rv)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Ke)),X}let Ln=!1,Si=!1;this.allocateTextureUnit=function ae(){const re=De;return re>=g&&console.warn("THREE.WebGLTextures: Trying to use "+re+" texture units while this GPU supports only "+g),De+=1,re},this.resetTextureUnits=function Ie(){De=0},this.setTexture2D=ye,this.setTexture2DArray=function Ae(re,X){const Ke=s.get(re);re.version>0&&Ke.__version!==re.version?ze(Ke,re,X):(t.activeTexture(33984+X),t.bindTexture(35866,Ke.__webglTexture))},this.setTexture3D=function ht(re,X){const Ke=s.get(re);re.version>0&&Ke.__version!==re.version?ze(Ke,re,X):(t.activeTexture(33984+X),t.bindTexture(32879,Ke.__webglTexture))},this.setTextureCube=Le,this.rebindTextures=function An(re,X,Ke){const Et=s.get(re);void 0!==X&&Vt(Et.__webglFramebuffer,re,re.texture,36064,3553),void 0!==Ke&&kn(re)},this.setupRenderTarget=function Xe(re){const X=re.texture,Ke=s.get(re),Et=s.get(X);re.addEventListener("dispose",W),!0!==re.isWebGLMultipleRenderTargets&&(void 0===Et.__webglTexture&&(Et.__webglTexture=i.createTexture()),Et.__version=X.version,l.memory.textures++);const cn=!0===re.isWebGLCubeRenderTarget,Ze=!0===re.isWebGLMultipleRenderTargets,Mn=X.isDataTexture3D||X.isDataTexture2DArray,hn=U(re)||h;if(cn){Ke.__webglFramebuffer=[];for(let zt=0;zt<6;zt++)Ke.__webglFramebuffer[zt]=i.createFramebuffer()}else if(Ke.__webglFramebuffer=i.createFramebuffer(),Ze)if(o.drawBuffers){const zt=re.texture;for(let Gt=0,jn=zt.length;Gt<jn;Gt++){const he=s.get(zt[Gt]);void 0===he.__webglTexture&&(he.__webglTexture=i.createTexture(),l.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(re.useRenderbuffer)if(h){Ke.__webglMultisampledFramebuffer=i.createFramebuffer(),Ke.__webglColorRenderbuffer=i.createRenderbuffer(),i.bindRenderbuffer(36161,Ke.__webglColorRenderbuffer);const zt=a.convert(X.format,X.encoding),Gt=a.convert(X.type),jn=ne(X.internalFormat,zt,Gt,X.encoding),he=Jt(re);i.renderbufferStorageMultisample(36161,he,jn,re.width,re.height),t.bindFramebuffer(36160,Ke.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064,36161,Ke.__webglColorRenderbuffer),i.bindRenderbuffer(36161,null),re.depthBuffer&&(Ke.__webglDepthRenderbuffer=i.createRenderbuffer(),vn(Ke.__webglDepthRenderbuffer,re,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(cn){t.bindTexture(34067,Et.__webglTexture),Yt(34067,X,hn);for(let zt=0;zt<6;zt++)Vt(Ke.__webglFramebuffer[zt],re,X,36064,34069+zt);j(X,hn)&&K(34067),t.unbindTexture()}else if(Ze){const zt=re.texture;for(let Gt=0,jn=zt.length;Gt<jn;Gt++){const he=zt[Gt],on=s.get(he);t.bindTexture(3553,on.__webglTexture),Yt(3553,he,hn),Vt(Ke.__webglFramebuffer,re,he,36064+Gt,3553),j(he,hn)&&K(3553)}t.unbindTexture()}else{let zt=3553;Mn&&(h?zt=X.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(zt,Et.__webglTexture),Yt(zt,X,hn),Vt(Ke.__webglFramebuffer,re,X,36064,zt),j(X,hn)&&K(zt),t.unbindTexture()}re.depthBuffer&&kn(re)},this.updateRenderTargetMipmap=function At(re){const X=U(re)||h,Ke=!0===re.isWebGLMultipleRenderTargets?re.texture:[re.texture];for(let Et=0,cn=Ke.length;Et<cn;Et++){const Ze=Ke[Et];if(j(Ze,X)){const Mn=re.isWebGLCubeRenderTarget?34067:3553,hn=s.get(Ze).__webglTexture;t.bindTexture(Mn,hn),K(Mn),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Ct(re){if(re.useRenderbuffer)if(h){const X=re.width,Ke=re.height;let Et=16384;const cn=[36064],Ze=re.stencilBuffer?33306:36096;re.depthBuffer&&cn.push(Ze),re.ignoreDepthForMultisampleCopy||(re.depthBuffer&&(Et|=256),re.stencilBuffer&&(Et|=1024));const Mn=s.get(re);t.bindFramebuffer(36008,Mn.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Mn.__webglFramebuffer),re.ignoreDepthForMultisampleCopy&&(i.invalidateFramebuffer(36008,[Ze]),i.invalidateFramebuffer(36009,[Ze])),i.blitFramebuffer(0,0,X,Ke,0,0,X,Ke,Et,9728),i.invalidateFramebuffer(36008,cn),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,Mn.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=kn,this.setupFrameBufferTexture=Vt,this.safeSetTexture2D=function Sr(re,X){re&&re.isWebGLRenderTarget&&(!1===Ln&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Ln=!0),re=re.texture),ye(re,X)},this.safeSetTextureCube=function ur(re,X){re&&re.isWebGLCubeRenderTarget&&(!1===Si&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Si=!0),re=re.texture),Le(re,X)}}function MQ(i,e,t){const s=t.isWebGL2;return{convert:function o(a,l=null){let h;if(a===Rv)return 5121;if(1017===a)return 32819;if(1018===a)return 32820;if(1010===a)return 5120;if(1011===a)return 5122;if(a===IE)return 5123;if(1013===a)return 5124;if(1014===a)return 5125;if(a===Pv)return 5126;if(a===yx)return s?5131:(h=e.get("OES_texture_half_float"),null!==h?h.HALF_FLOAT_OES:null);if(1021===a)return 6406;if(a===Ua)return 6408;if(1024===a)return 6409;if(1025===a)return 6410;if(a===x0)return 6402;if(a===wx)return 34041;if(1028===a)return 6403;if(1022===a)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===a)return h=e.get("EXT_sRGB"),null!==h?h.SRGB_ALPHA_EXT:null;if(1029===a)return 36244;if(1030===a)return 33319;if(1031===a)return 33320;if(1033===a)return 36249;if(33776===a||33777===a||33778===a||33779===a)if(l===Wr){if(h=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===h)return null;if(33776===a)return h.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===a)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===a)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===a)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(h=e.get("WEBGL_compressed_texture_s3tc"),null===h)return null;if(33776===a)return h.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===a)return h.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===a)return h.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===a)return h.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===a||35841===a||35842===a||35843===a){if(h=e.get("WEBGL_compressed_texture_pvrtc"),null===h)return null;if(35840===a)return h.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===a)return h.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===a)return h.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===a)return h.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===a)return h=e.get("WEBGL_compressed_texture_etc1"),null!==h?h.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===a||37496===a){if(h=e.get("WEBGL_compressed_texture_etc"),null===h)return null;if(37492===a)return l===Wr?h.COMPRESSED_SRGB8_ETC2:h.COMPRESSED_RGB8_ETC2;if(37496===a)return l===Wr?h.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:h.COMPRESSED_RGBA8_ETC2_EAC}if(37808===a||37809===a||37810===a||37811===a||37812===a||37813===a||37814===a||37815===a||37816===a||37817===a||37818===a||37819===a||37820===a||37821===a){if(h=e.get("WEBGL_compressed_texture_astc"),null===h)return null;if(37808===a)return l===Wr?h.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:h.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===a)return l===Wr?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:h.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===a)return l===Wr?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:h.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===a)return l===Wr?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:h.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===a)return l===Wr?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:h.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===a)return l===Wr?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:h.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===a)return l===Wr?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:h.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===a)return l===Wr?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:h.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===a)return l===Wr?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:h.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===a)return l===Wr?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:h.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===a)return l===Wr?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:h.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===a)return l===Wr?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:h.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===a)return l===Wr?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:h.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===a)return l===Wr?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:h.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===a){if(h=e.get("EXT_texture_compression_bptc"),null===h)return null;if(36492===a)return l===Wr?h.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:h.COMPRESSED_RGBA_BPTC_UNORM_EXT}return a===bx?s?34042:(h=e.get("WEBGL_depth_texture"),null!==h?h.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}yL.prototype.isMeshDistanceMaterial=!0;class YG extends qo{constructor(e=[]){super(),this.cameras=e}}YG.prototype.isArrayCamera=!0;class qx extends Gi{constructor(){super(),this.type="Group"}}qx.prototype.isGroup=!0;const EQ={type:"move"};class bL{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new qx,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new qx,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new J,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new J),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new qx,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new J,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new J),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,s){let o=null,a=null,l=null;const h=this._targetRay,g=this._grip,_=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==h&&(o=t.getPose(e.targetRaySpace,s),null!==o&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(EQ))),_&&e.hand){l=!0;for(const I of e.hand.values()){const L=t.getJointPose(I,s);if(void 0===_.joints[I.jointName]){const R=new qx;R.matrixAutoUpdate=!1,R.visible=!1,_.joints[I.jointName]=R,_.add(R)}const k=_.joints[I.jointName];null!==L&&(k.matrix.fromArray(L.transform.matrix),k.matrix.decompose(k.position,k.rotation,k.scale),k.jointRadius=L.radius),k.visible=null!==L}const S=_.joints["index-finger-tip"].position.distanceTo(_.joints["thumb-tip"].position),M=.02,T=.005;_.inputState.pinching&&S>M+T?(_.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!_.inputState.pinching&&S<=M-T&&(_.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==g&&e.gripSpace&&(a=t.getPose(e.gripSpace,s),null!==a&&(g.matrix.fromArray(a.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),a.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(a.linearVelocity)):g.hasLinearVelocity=!1,a.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(a.angularVelocity)):g.hasAngularVelocity=!1));return null!==h&&(h.visible=null!==o),null!==g&&(g.visible=null!==a),null!==_&&(_.visible=null!==l),this}}class wL extends Eo{constructor(e,t,s,o,a,l,h,g,_,b){if((b=void 0!==b?b:x0)!==x0&&b!==wx)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===s&&b===x0&&(s=IE),void 0===s&&b===wx&&(s=bx),super(null,o,a,l,h,g,b,s,_),this.image={width:e,height:t},this.magFilter=void 0!==h?h:co,this.minFilter=void 0!==g?g:co,this.flipY=!1,this.generateMipmaps=!1}}wL.prototype.isDepthTexture=!0;class DQ extends Ov{constructor(e,t){super();const s=this;let o=null,a=1,l=null,h="local-floor";const g=e.extensions.has("WEBGL_multisampled_render_to_texture");let _=null,b=null,x=null,S=null,M=!1,T=null;const I=t.getContextAttributes();let L=null,k=null;const R=[],U=new Map,N=new qo;N.layers.enable(1),N.viewport=new cr;const j=new qo;j.layers.enable(2),j.viewport=new cr;const K=[N,j],ne=new YG;ne.layers.enable(1),ne.layers.enable(2);let de=null,Re=null;function xe(Le){const Je=U.get(Le.inputSource);Je&&Je.dispatchEvent({type:Le.type,data:Le.inputSource})}function W(){U.forEach(function(Le,Je){Le.disconnect(Je)}),U.clear(),de=null,Re=null,e.setRenderTarget(L),S=null,x=null,b=null,o=null,k=null,ht.stop(),s.isPresenting=!1,s.dispatchEvent({type:"sessionend"})}function ce(Le){const Je=o.inputSources;for(let mt=0;mt<R.length;mt++)U.set(Je[mt],R[mt]);for(let mt=0;mt<Le.removed.length;mt++){const Yt=Le.removed[mt],St=U.get(Yt);St&&(St.dispatchEvent({type:"disconnected",data:Yt}),U.delete(Yt))}for(let mt=0;mt<Le.added.length;mt++){const Yt=Le.added[mt],St=U.get(Yt);St&&St.dispatchEvent({type:"connected",data:Yt})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Le){let Je=R[Le];return void 0===Je&&(Je=new bL,R[Le]=Je),Je.getTargetRaySpace()},this.getControllerGrip=function(Le){let Je=R[Le];return void 0===Je&&(Je=new bL,R[Le]=Je),Je.getGripSpace()},this.getHand=function(Le){let Je=R[Le];return void 0===Je&&(Je=new bL,R[Le]=Je),Je.getHandSpace()},this.setFramebufferScaleFactor=function(Le){a=Le,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Le){h=Le,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l},this.getBaseLayer=function(){return null!==x?x:S},this.getBinding=function(){return b},this.getFrame=function(){return T},this.getSession=function(){return o},this.setSession=function(){var Le=function sZ(i){return function(){var e=this,t=arguments;return new Promise(function(s,o){var a=i.apply(e,t);function l(g){mU(a,s,o,l,h,"next",g)}function h(g){mU(a,s,o,l,h,"throw",g)}l(void 0)})}}(function*(Je){if(o=Je,null!==o){if(L=e.getRenderTarget(),o.addEventListener("select",xe),o.addEventListener("selectstart",xe),o.addEventListener("selectend",xe),o.addEventListener("squeeze",xe),o.addEventListener("squeezestart",xe),o.addEventListener("squeezeend",xe),o.addEventListener("end",W),o.addEventListener("inputsourceschange",ce),!0!==I.xrCompatible&&(yield t.makeXRCompatible()),void 0===o.renderState.layers||!1===e.capabilities.isWebGL2)S=new XRWebGLLayer(o,t,{antialias:void 0!==o.renderState.layers||I.antialias,alpha:I.alpha,depth:I.depth,stencil:I.stencil,framebufferScaleFactor:a}),o.updateRenderState({baseLayer:S}),k=new Vu(S.framebufferWidth,S.framebufferHeight,{format:Ua,type:Rv,encoding:e.outputEncoding});else{M=I.antialias;let mt=null,Yt=null,St=null;I.depth&&(St=I.stencil?35056:33190,mt=I.stencil?wx:x0,Yt=I.stencil?bx:IE);const ze={colorFormat:e.outputEncoding===Wr?35907:32856,depthFormat:St,scaleFactor:a};b=new XRWebGLBinding(o,t),x=b.createProjectionLayer(ze),o.updateRenderState({layers:[x]}),k=M?new HF(x.textureWidth,x.textureHeight,{format:Ua,type:Rv,depthTexture:new wL(x.textureWidth,x.textureHeight,Yt,void 0,void 0,void 0,void 0,void 0,void 0,mt),stencilBuffer:I.stencil,ignoreDepth:x.ignoreDepthValues,useRenderToTexture:g,encoding:e.outputEncoding}):new Vu(x.textureWidth,x.textureHeight,{format:Ua,type:Rv,depthTexture:new wL(x.textureWidth,x.textureHeight,Yt,void 0,void 0,void 0,void 0,void 0,void 0,mt),stencilBuffer:I.stencil,ignoreDepth:x.ignoreDepthValues,encoding:e.outputEncoding})}k.isXRRenderTarget=!0,this.setFoveation(1),l=yield o.requestReferenceSpace(h),ht.setContext(o),ht.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}});return function(Je){return Le.apply(this,arguments)}}();const be=new J,De=new J;function ae(Le,Je){null===Je?Le.matrixWorld.copy(Le.matrix):Le.matrixWorld.multiplyMatrices(Je.matrixWorld,Le.matrix),Le.matrixWorldInverse.copy(Le.matrixWorld).invert()}this.updateCamera=function(Le){if(null===o)return;ne.near=j.near=N.near=Le.near,ne.far=j.far=N.far=Le.far,(de!==ne.near||Re!==ne.far)&&(o.updateRenderState({depthNear:ne.near,depthFar:ne.far}),de=ne.near,Re=ne.far);const Je=Le.parent,mt=ne.cameras;ae(ne,Je);for(let St=0;St<mt.length;St++)ae(mt[St],Je);ne.matrixWorld.decompose(ne.position,ne.quaternion,ne.scale),Le.position.copy(ne.position),Le.quaternion.copy(ne.quaternion),Le.scale.copy(ne.scale),Le.matrix.copy(ne.matrix),Le.matrixWorld.copy(ne.matrixWorld);const Yt=Le.children;for(let St=0,ze=Yt.length;St<ze;St++)Yt[St].updateMatrixWorld(!0);2===mt.length?function Ie(Le,Je,mt){be.setFromMatrixPosition(Je.matrixWorld),De.setFromMatrixPosition(mt.matrixWorld);const Yt=be.distanceTo(De),St=Je.projectionMatrix.elements,ze=mt.projectionMatrix.elements,Ei=St[14]/(St[10]-1),Vt=St[14]/(St[10]+1),vn=(St[9]+1)/St[5],Ft=(St[9]-1)/St[5],kn=(St[8]-1)/St[0],An=(ze[8]+1)/ze[0],Xe=Ei*kn,At=Ei*An,Ct=Yt/(-kn+An),Jt=Ct*-kn;Je.matrixWorld.decompose(Le.position,Le.quaternion,Le.scale),Le.translateX(Jt),Le.translateZ(Ct),Le.matrixWorld.compose(Le.position,Le.quaternion,Le.scale),Le.matrixWorldInverse.copy(Le.matrixWorld).invert();const Wt=Ei+Ct,On=Vt+Ct;Le.projectionMatrix.makePerspective(Xe-Jt,At+(Yt-Jt),vn*Vt/On*Wt,Ft*Vt/On*Wt,Wt,On)}(ne,N,j):ne.projectionMatrix.copy(N.projectionMatrix)},this.getCamera=function(){return ne},this.getFoveation=function(){return null!==x?x.fixedFoveation:null!==S?S.fixedFoveation:void 0},this.setFoveation=function(Le){null!==x&&(x.fixedFoveation=Le),null!==S&&void 0!==S.fixedFoveation&&(S.fixedFoveation=Le)};let ye=null;const ht=new hG;ht.setAnimationLoop(function Ae(Le,Je){if(_=Je.getViewerPose(l),T=Je,null!==_){const Yt=_.views;null!==S&&(e.setRenderTargetFramebuffer(k,S.framebuffer),e.setRenderTarget(k));let St=!1;Yt.length!==ne.cameras.length&&(ne.cameras.length=0,St=!0);for(let ze=0;ze<Yt.length;ze++){const Ei=Yt[ze];let Vt=null;if(null!==S)Vt=S.getViewport(Ei);else{const Ft=b.getViewSubImage(x,Ei);Vt=Ft.viewport,0===ze&&(e.setRenderTargetTextures(k,Ft.colorTexture,x.ignoreDepthValues?void 0:Ft.depthStencilTexture),e.setRenderTarget(k))}const vn=K[ze];vn.matrix.fromArray(Ei.transform.matrix),vn.projectionMatrix.fromArray(Ei.projectionMatrix),vn.viewport.set(Vt.x,Vt.y,Vt.width,Vt.height),0===ze&&ne.matrix.copy(vn.matrix),!0===St&&ne.cameras.push(vn)}}const mt=o.inputSources;for(let Yt=0;Yt<R.length;Yt++)R[Yt].update(mt[Yt],Je,l);ye&&ye(Le,Je),T=null}),this.setAnimationLoop=function(Le){ye=Le},this.dispose=function(){}}}function AQ(i){function s(k,R){k.opacity.value=R.opacity,R.color&&k.diffuse.value.copy(R.color),R.emissive&&k.emissive.value.copy(R.emissive).multiplyScalar(R.emissiveIntensity),R.map&&(k.map.value=R.map),R.alphaMap&&(k.alphaMap.value=R.alphaMap),R.specularMap&&(k.specularMap.value=R.specularMap),R.alphaTest>0&&(k.alphaTest.value=R.alphaTest);const U=i.get(R).envMap;let N,j;U&&(k.envMap.value=U,k.flipEnvMap.value=U.isCubeTexture&&!1===U.isRenderTargetTexture?-1:1,k.reflectivity.value=R.reflectivity,k.ior.value=R.ior,k.refractionRatio.value=R.refractionRatio),R.lightMap&&(k.lightMap.value=R.lightMap,k.lightMapIntensity.value=R.lightMapIntensity),R.aoMap&&(k.aoMap.value=R.aoMap,k.aoMapIntensity.value=R.aoMapIntensity),R.map?N=R.map:R.specularMap?N=R.specularMap:R.displacementMap?N=R.displacementMap:R.normalMap?N=R.normalMap:R.bumpMap?N=R.bumpMap:R.roughnessMap?N=R.roughnessMap:R.metalnessMap?N=R.metalnessMap:R.alphaMap?N=R.alphaMap:R.emissiveMap?N=R.emissiveMap:R.clearcoatMap?N=R.clearcoatMap:R.clearcoatNormalMap?N=R.clearcoatNormalMap:R.clearcoatRoughnessMap?N=R.clearcoatRoughnessMap:R.specularIntensityMap?N=R.specularIntensityMap:R.specularColorMap?N=R.specularColorMap:R.transmissionMap?N=R.transmissionMap:R.thicknessMap?N=R.thicknessMap:R.sheenColorMap?N=R.sheenColorMap:R.sheenRoughnessMap&&(N=R.sheenRoughnessMap),void 0!==N&&(N.isWebGLRenderTarget&&(N=N.texture),!0===N.matrixAutoUpdate&&N.updateMatrix(),k.uvTransform.value.copy(N.matrix)),R.aoMap?j=R.aoMap:R.lightMap&&(j=R.lightMap),void 0!==j&&(j.isWebGLRenderTarget&&(j=j.texture),!0===j.matrixAutoUpdate&&j.updateMatrix(),k.uv2Transform.value.copy(j.matrix))}function x(k,R){k.roughness.value=R.roughness,k.metalness.value=R.metalness,R.roughnessMap&&(k.roughnessMap.value=R.roughnessMap),R.metalnessMap&&(k.metalnessMap.value=R.metalnessMap),R.emissiveMap&&(k.emissiveMap.value=R.emissiveMap),R.bumpMap&&(k.bumpMap.value=R.bumpMap,k.bumpScale.value=R.bumpScale,1===R.side&&(k.bumpScale.value*=-1)),R.normalMap&&(k.normalMap.value=R.normalMap,k.normalScale.value.copy(R.normalScale),1===R.side&&k.normalScale.value.negate()),R.displacementMap&&(k.displacementMap.value=R.displacementMap,k.displacementScale.value=R.displacementScale,k.displacementBias.value=R.displacementBias),i.get(R).envMap&&(k.envMapIntensity.value=R.envMapIntensity)}return{refreshFogUniforms:function e(k,R){k.fogColor.value.copy(R.color),R.isFog?(k.fogNear.value=R.near,k.fogFar.value=R.far):R.isFogExp2&&(k.fogDensity.value=R.density)},refreshMaterialUniforms:function t(k,R,U,N,j){R.isMeshBasicMaterial?s(k,R):R.isMeshLambertMaterial?(s(k,R),function g(k,R){R.emissiveMap&&(k.emissiveMap.value=R.emissiveMap)}(k,R)):R.isMeshToonMaterial?(s(k,R),function b(k,R){R.gradientMap&&(k.gradientMap.value=R.gradientMap),R.emissiveMap&&(k.emissiveMap.value=R.emissiveMap),R.bumpMap&&(k.bumpMap.value=R.bumpMap,k.bumpScale.value=R.bumpScale,1===R.side&&(k.bumpScale.value*=-1)),R.normalMap&&(k.normalMap.value=R.normalMap,k.normalScale.value.copy(R.normalScale),1===R.side&&k.normalScale.value.negate()),R.displacementMap&&(k.displacementMap.value=R.displacementMap,k.displacementScale.value=R.displacementScale,k.displacementBias.value=R.displacementBias)}(k,R)):R.isMeshPhongMaterial?(s(k,R),function _(k,R){k.specular.value.copy(R.specular),k.shininess.value=Math.max(R.shininess,1e-4),R.emissiveMap&&(k.emissiveMap.value=R.emissiveMap),R.bumpMap&&(k.bumpMap.value=R.bumpMap,k.bumpScale.value=R.bumpScale,1===R.side&&(k.bumpScale.value*=-1)),R.normalMap&&(k.normalMap.value=R.normalMap,k.normalScale.value.copy(R.normalScale),1===R.side&&k.normalScale.value.negate()),R.displacementMap&&(k.displacementMap.value=R.displacementMap,k.displacementScale.value=R.displacementScale,k.displacementBias.value=R.displacementBias)}(k,R)):R.isMeshStandardMaterial?(s(k,R),R.isMeshPhysicalMaterial?function S(k,R,U){x(k,R),k.ior.value=R.ior,R.sheen>0&&(k.sheenColor.value.copy(R.sheenColor).multiplyScalar(R.sheen),k.sheenRoughness.value=R.sheenRoughness,R.sheenColorMap&&(k.sheenColorMap.value=R.sheenColorMap),R.sheenRoughnessMap&&(k.sheenRoughnessMap.value=R.sheenRoughnessMap)),R.clearcoat>0&&(k.clearcoat.value=R.clearcoat,k.clearcoatRoughness.value=R.clearcoatRoughness,R.clearcoatMap&&(k.clearcoatMap.value=R.clearcoatMap),R.clearcoatRoughnessMap&&(k.clearcoatRoughnessMap.value=R.clearcoatRoughnessMap),R.clearcoatNormalMap&&(k.clearcoatNormalScale.value.copy(R.clearcoatNormalScale),k.clearcoatNormalMap.value=R.clearcoatNormalMap,1===R.side&&k.clearcoatNormalScale.value.negate())),R.transmission>0&&(k.transmission.value=R.transmission,k.transmissionSamplerMap.value=U.texture,k.transmissionSamplerSize.value.set(U.width,U.height),R.transmissionMap&&(k.transmissionMap.value=R.transmissionMap),k.thickness.value=R.thickness,R.thicknessMap&&(k.thicknessMap.value=R.thicknessMap),k.attenuationDistance.value=R.attenuationDistance,k.attenuationColor.value.copy(R.attenuationColor)),k.specularIntensity.value=R.specularIntensity,k.specularColor.value.copy(R.specularColor),R.specularIntensityMap&&(k.specularIntensityMap.value=R.specularIntensityMap),R.specularColorMap&&(k.specularColorMap.value=R.specularColorMap)}(k,R,j):x(k,R)):R.isMeshMatcapMaterial?(s(k,R),function M(k,R){R.matcap&&(k.matcap.value=R.matcap),R.bumpMap&&(k.bumpMap.value=R.bumpMap,k.bumpScale.value=R.bumpScale,1===R.side&&(k.bumpScale.value*=-1)),R.normalMap&&(k.normalMap.value=R.normalMap,k.normalScale.value.copy(R.normalScale),1===R.side&&k.normalScale.value.negate()),R.displacementMap&&(k.displacementMap.value=R.displacementMap,k.displacementScale.value=R.displacementScale,k.displacementBias.value=R.displacementBias)}(k,R)):R.isMeshDepthMaterial?(s(k,R),function T(k,R){R.displacementMap&&(k.displacementMap.value=R.displacementMap,k.displacementScale.value=R.displacementScale,k.displacementBias.value=R.displacementBias)}(k,R)):R.isMeshDistanceMaterial?(s(k,R),function I(k,R){R.displacementMap&&(k.displacementMap.value=R.displacementMap,k.displacementScale.value=R.displacementScale,k.displacementBias.value=R.displacementBias),k.referencePosition.value.copy(R.referencePosition),k.nearDistance.value=R.nearDistance,k.farDistance.value=R.farDistance}(k,R)):R.isMeshNormalMaterial?(s(k,R),function L(k,R){R.bumpMap&&(k.bumpMap.value=R.bumpMap,k.bumpScale.value=R.bumpScale,1===R.side&&(k.bumpScale.value*=-1)),R.normalMap&&(k.normalMap.value=R.normalMap,k.normalScale.value.copy(R.normalScale),1===R.side&&k.normalScale.value.negate()),R.displacementMap&&(k.displacementMap.value=R.displacementMap,k.displacementScale.value=R.displacementScale,k.displacementBias.value=R.displacementBias)}(k,R)):R.isLineBasicMaterial?(function o(k,R){k.diffuse.value.copy(R.color),k.opacity.value=R.opacity}(k,R),R.isLineDashedMaterial&&function a(k,R){k.dashSize.value=R.dashSize,k.totalSize.value=R.dashSize+R.gapSize,k.scale.value=R.scale}(k,R)):R.isPointsMaterial?function l(k,R,U,N){let j;k.diffuse.value.copy(R.color),k.opacity.value=R.opacity,k.size.value=R.size*U,k.scale.value=.5*N,R.map&&(k.map.value=R.map),R.alphaMap&&(k.alphaMap.value=R.alphaMap),R.alphaTest>0&&(k.alphaTest.value=R.alphaTest),R.map?j=R.map:R.alphaMap&&(j=R.alphaMap),void 0!==j&&(!0===j.matrixAutoUpdate&&j.updateMatrix(),k.uvTransform.value.copy(j.matrix))}(k,R,U,N):R.isSpriteMaterial?function h(k,R){let U;k.diffuse.value.copy(R.color),k.opacity.value=R.opacity,k.rotation.value=R.rotation,R.map&&(k.map.value=R.map),R.alphaMap&&(k.alphaMap.value=R.alphaMap),R.alphaTest>0&&(k.alphaTest.value=R.alphaTest),R.map?U=R.map:R.alphaMap&&(U=R.alphaMap),void 0!==U&&(!0===U.matrixAutoUpdate&&U.updateMatrix(),k.uvTransform.value.copy(U.matrix))}(k,R):R.isShadowMaterial?(k.color.value.copy(R.color),k.opacity.value=R.opacity):R.isShaderMaterial&&(R.uniformsNeedUpdate=!1)}}}function tr(i={}){const e=void 0!==i.canvas?i.canvas:function TQ(){const i=FE("canvas");return i.style.display="block",i}(),t=void 0!==i.context?i.context:null,s=void 0!==i.alpha&&i.alpha,o=void 0===i.depth||i.depth,a=void 0===i.stencil||i.stencil,l=void 0!==i.antialias&&i.antialias,h=void 0===i.premultipliedAlpha||i.premultipliedAlpha,g=void 0!==i.preserveDrawingBuffer&&i.preserveDrawingBuffer,_=void 0!==i.powerPreference?i.powerPreference:"default",b=void 0!==i.failIfMajorPerformanceCaveat&&i.failIfMajorPerformanceCaveat;let x=null,S=null;const M=[],T=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=kv,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const I=this;let L=!1,k=0,R=0,U=null,N=-1,j=null;const K=new cr,ne=new cr;let de=null,Re=e.width,xe=e.height,W=1,ce=null,be=null;const De=new cr(0,0,Re,xe),Ie=new cr(0,0,Re,xe);let ae=!1;const ye=new S1;let Ae=!1,ht=!1,Le=null;const Je=new sn,mt=new J,Yt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function St(){return null===U?W:1}let Vt,vn,Ft,kn,An,Xe,At,Ct,Jt,Wt,On,Ln,Si,Sr,ur,re,X,Ke,Et,cn,Ze,Mn,hn,ze=t;function Ei(ee,Se){for(let Ge=0;Ge<ee.length;Ge++){const nt=e.getContext(ee[Ge],Se);if(null!==nt)return nt}return null}try{const ee={alpha:!0,depth:o,stencil:a,antialias:l,premultipliedAlpha:h,preserveDrawingBuffer:g,powerPreference:_,failIfMajorPerformanceCaveat:b};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r137"),e.addEventListener("webglcontextlost",jn,!1),e.addEventListener("webglcontextrestored",he,!1),null===ze){const Se=["webgl2","webgl","experimental-webgl"];if(!0===I.isWebGL1Renderer&&Se.shift(),ze=Ei(Se,ee),null===ze)throw Ei(Se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ze.getShaderPrecisionFormat&&(ze.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ee){throw console.error("THREE.WebGLRenderer: "+ee.message),ee}function zt(){Vt=new $K(ze),vn=new HK(ze,Vt,i),Vt.init(vn),Mn=new MQ(ze,Vt,vn),Ft=new CQ(ze,Vt,vn),kn=new JK(ze),An=new hQ,Xe=new SQ(ze,Vt,Ft,An,vn,Mn,kn),At=new jK(I),Ct=new YK(I),Jt=new z9(ze,vn),hn=new UK(ze,Vt,Jt,vn),Wt=new ZK(ze,Jt,kn,hn),On=new tJ(ze,Wt,Jt,kn),Et=new eJ(ze,vn,Xe),re=new zK(An),Ln=new dQ(I,At,Ct,Vt,vn,hn,re),Si=new AQ(An),Sr=new pQ,ur=new bQ(Vt,vn),Ke=new VK(I,At,Ft,On,s,h),X=new qG(I,On,vn),cn=new GK(ze,Vt,kn,vn),Ze=new KK(ze,Vt,kn,vn),kn.programs=Ln.programs,I.capabilities=vn,I.extensions=Vt,I.properties=An,I.renderLists=Sr,I.shadowMap=X,I.state=Ft,I.info=kn}zt();const Gt=new DQ(I,ze);function jn(ee){ee.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),L=!0}function he(){console.log("THREE.WebGLRenderer: Context Restored."),L=!1;const ee=kn.autoReset,Se=X.enabled,Ge=X.autoUpdate,Fe=X.needsUpdate,nt=X.type;zt(),kn.autoReset=ee,X.enabled=Se,X.autoUpdate=Ge,X.needsUpdate=Fe,X.type=nt}function on(ee){const Se=ee.target;Se.removeEventListener("dispose",on),function Zt(ee){(function Fn(ee){const Se=An.get(ee).programs;void 0!==Se&&(Se.forEach(function(Ge){Ln.releaseProgram(Ge)}),ee.isShaderMaterial&&Ln.releaseShaderCache(ee))})(ee),An.remove(ee)}(Se)}this.xr=Gt,this.getContext=function(){return ze},this.getContextAttributes=function(){return ze.getContextAttributes()},this.forceContextLoss=function(){const ee=Vt.get("WEBGL_lose_context");ee&&ee.loseContext()},this.forceContextRestore=function(){const ee=Vt.get("WEBGL_lose_context");ee&&ee.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(ee){void 0!==ee&&(W=ee,this.setSize(Re,xe,!1))},this.getSize=function(ee){return ee.set(Re,xe)},this.setSize=function(ee,Se,Ge){Gt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Re=ee,xe=Se,e.width=Math.floor(ee*W),e.height=Math.floor(Se*W),!1!==Ge&&(e.style.width=ee+"px",e.style.height=Se+"px"),this.setViewport(0,0,ee,Se))},this.getDrawingBufferSize=function(ee){return ee.set(Re*W,xe*W).floor()},this.setDrawingBufferSize=function(ee,Se,Ge){Re=ee,xe=Se,W=Ge,e.width=Math.floor(ee*Ge),e.height=Math.floor(Se*Ge),this.setViewport(0,0,ee,Se)},this.getCurrentViewport=function(ee){return ee.copy(K)},this.getViewport=function(ee){return ee.copy(De)},this.setViewport=function(ee,Se,Ge,Fe){ee.isVector4?De.set(ee.x,ee.y,ee.z,ee.w):De.set(ee,Se,Ge,Fe),Ft.viewport(K.copy(De).multiplyScalar(W).floor())},this.getScissor=function(ee){return ee.copy(Ie)},this.setScissor=function(ee,Se,Ge,Fe){ee.isVector4?Ie.set(ee.x,ee.y,ee.z,ee.w):Ie.set(ee,Se,Ge,Fe),Ft.scissor(ne.copy(Ie).multiplyScalar(W).floor())},this.getScissorTest=function(){return ae},this.setScissorTest=function(ee){Ft.setScissorTest(ae=ee)},this.setOpaqueSort=function(ee){ce=ee},this.setTransparentSort=function(ee){be=ee},this.getClearColor=function(ee){return ee.copy(Ke.getClearColor())},this.setClearColor=function(){Ke.setClearColor.apply(Ke,arguments)},this.getClearAlpha=function(){return Ke.getClearAlpha()},this.setClearAlpha=function(){Ke.setClearAlpha.apply(Ke,arguments)},this.clear=function(ee,Se,Ge){let Fe=0;(void 0===ee||ee)&&(Fe|=16384),(void 0===Se||Se)&&(Fe|=256),(void 0===Ge||Ge)&&(Fe|=1024),ze.clear(Fe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",jn,!1),e.removeEventListener("webglcontextrestored",he,!1),Sr.dispose(),ur.dispose(),An.dispose(),At.dispose(),Ct.dispose(),On.dispose(),hn.dispose(),Ln.dispose(),Gt.dispose(),Gt.removeEventListener("sessionstart",xi),Gt.removeEventListener("sessionend",rs),Le&&(Le.dispose(),Le=null),Dc.stop()},this.renderBufferDirect=function(ee,Se,Ge,Fe,nt,Hn){null===Se&&(Se=Yt);const Wn=nt.isMesh&&nt.matrixWorld.determinant()<0,ci=function Kre(ee,Se,Ge,Fe,nt){!0!==Se.isScene&&(Se=Yt),Xe.resetTextureUnits();const Hn=Se.fog,ci=null===U?I.outputEncoding:!0===U.isXRRenderTarget?U.texture.encoding:kv,oi=(Fe.isMeshStandardMaterial?Ct:At).get(Fe.envMap||(Fe.isMeshStandardMaterial?Se.environment:null)),nr=!0===Fe.vertexColors&&!!Ge.attributes.color&&4===Ge.attributes.color.itemSize,Di=!!Fe.normalMap&&!!Ge.attributes.tangent,Li=!!Ge.morphAttributes.position,bs=!!Ge.morphAttributes.normal,U0=Ge.morphAttributes.position?Ge.morphAttributes.position.length:0,fC=Fe.toneMapped?I.toneMapping:0,Hi=An.get(Fe),bf=S.state.lights;!0!==Ae||!0!==ht&&ee===j||re.setState(Fe,ee,ee===j&&Fe.id===N);let Ao=!1;Fe.version===Hi.__version?(Hi.needsLights&&Hi.lightsStateVersion!==bf.state.version||Hi.outputEncoding!==ci||nt.isInstancedMesh&&!1===Hi.instancing||!nt.isInstancedMesh&&!0===Hi.instancing||nt.isSkinnedMesh&&!1===Hi.skinning||!nt.isSkinnedMesh&&!0===Hi.skinning||Hi.envMap!==oi||Fe.fog&&Hi.fog!==Hn||void 0!==Hi.numClippingPlanes&&(Hi.numClippingPlanes!==re.numPlanes||Hi.numIntersection!==re.numIntersection)||Hi.vertexAlphas!==nr||Hi.vertexTangents!==Di||Hi.morphTargets!==Li||Hi.morphNormals!==bs||Hi.toneMapping!==fC||!0===vn.isWebGL2&&Hi.morphTargetsCount!==U0)&&(Ao=!0):(Ao=!0,Hi.__version=Fe.version);let wf=Hi.currentProgram;!0===Ao&&(wf=PN(Fe,Se,nt));let UR=!1,xf=!1,mg=!1;const za=wf.getUniforms(),mD=Hi.uniforms;if(Ft.useProgram(wf.program)&&(UR=!0,xf=!0,mg=!0),Fe.id!==N&&(N=Fe.id,xf=!0),UR||j!==ee){if(za.setValue(ze,"projectionMatrix",ee.projectionMatrix),vn.logarithmicDepthBuffer&&za.setValue(ze,"logDepthBufFC",2/(Math.log(ee.far+1)/Math.LN2)),j!==ee&&(j=ee,xf=!0,mg=!0),Fe.isShaderMaterial||Fe.isMeshPhongMaterial||Fe.isMeshToonMaterial||Fe.isMeshStandardMaterial||Fe.envMap){const Qd=za.map.cameraPosition;void 0!==Qd&&Qd.setValue(ze,mt.setFromMatrixPosition(ee.matrixWorld))}(Fe.isMeshPhongMaterial||Fe.isMeshToonMaterial||Fe.isMeshLambertMaterial||Fe.isMeshBasicMaterial||Fe.isMeshStandardMaterial||Fe.isShaderMaterial)&&za.setValue(ze,"isOrthographic",!0===ee.isOrthographicCamera),(Fe.isMeshPhongMaterial||Fe.isMeshToonMaterial||Fe.isMeshLambertMaterial||Fe.isMeshBasicMaterial||Fe.isMeshStandardMaterial||Fe.isShaderMaterial||Fe.isShadowMaterial||nt.isSkinnedMesh)&&za.setValue(ze,"viewMatrix",ee.matrixWorldInverse)}if(nt.isSkinnedMesh){za.setOptional(ze,nt,"bindMatrix"),za.setOptional(ze,nt,"bindMatrixInverse");const Qd=nt.skeleton;Qd&&(vn.floatVertexTextures?(null===Qd.boneTexture&&Qd.computeBoneTexture(),za.setValue(ze,"boneTexture",Qd.boneTexture,Xe),za.setValue(ze,"boneTextureSize",Qd.boneTextureSize)):za.setOptional(ze,Qd,"boneMatrices"))}return!!Ge&&(void 0!==Ge.morphAttributes.position||void 0!==Ge.morphAttributes.normal)&&Et.update(nt,Ge,Fe,wf),(xf||Hi.receiveShadow!==nt.receiveShadow)&&(Hi.receiveShadow=nt.receiveShadow,za.setValue(ze,"receiveShadow",nt.receiveShadow)),xf&&(za.setValue(ze,"toneMappingExposure",I.toneMappingExposure),Hi.needsLights&&function Jre(ee,Se){ee.ambientLightColor.needsUpdate=Se,ee.lightProbe.needsUpdate=Se,ee.directionalLights.needsUpdate=Se,ee.directionalLightShadows.needsUpdate=Se,ee.pointLights.needsUpdate=Se,ee.pointLightShadows.needsUpdate=Se,ee.spotLights.needsUpdate=Se,ee.spotLightShadows.needsUpdate=Se,ee.rectAreaLights.needsUpdate=Se,ee.hemisphereLights.needsUpdate=Se}(mD,mg),Hn&&Fe.fog&&Si.refreshFogUniforms(mD,Hn),Si.refreshMaterialUniforms(mD,Fe,W,xe,Le),Wv.upload(ze,Hi.uniformsList,mD,Xe)),Fe.isShaderMaterial&&!0===Fe.uniformsNeedUpdate&&(Wv.upload(ze,Hi.uniformsList,mD,Xe),Fe.uniformsNeedUpdate=!1),Fe.isSpriteMaterial&&za.setValue(ze,"center",nt.center),za.setValue(ze,"modelViewMatrix",nt.modelViewMatrix),za.setValue(ze,"normalMatrix",nt.normalMatrix),za.setValue(ze,"modelMatrix",nt.matrixWorld),wf}(ee,Se,Ge,Fe,nt);Ft.setMaterial(Fe,Wn);let oi=Ge.index;const nr=Ge.attributes.position;if(null===oi){if(void 0===nr||0===nr.count)return}else if(0===oi.count)return;let Di=1;!0===Fe.wireframe&&(oi=Wt.getWireframeAttribute(Ge),Di=2),hn.setup(nt,Fe,ci,Ge,oi);let Li,bs=cn;null!==oi&&(Li=Jt.get(oi),bs=Ze,bs.setIndex(Li));const U0=null!==oi?oi.count:nr.count,fC=Ge.drawRange.start*Di,Hi=Ge.drawRange.count*Di,bf=null!==Hn?Hn.start*Di:0,Ao=null!==Hn?Hn.count*Di:1/0,wf=Math.max(fC,bf),UR=Math.min(U0,fC+Hi,bf+Ao)-1,xf=Math.max(0,UR-wf+1);if(0!==xf){if(nt.isMesh)!0===Fe.wireframe?(Ft.setLineWidth(Fe.wireframeLinewidth*St()),bs.setMode(1)):bs.setMode(4);else if(nt.isLine){let mg=Fe.linewidth;void 0===mg&&(mg=1),Ft.setLineWidth(mg*St()),bs.setMode(nt.isLineSegments?1:nt.isLineLoop?2:3)}else nt.isPoints?bs.setMode(0):nt.isSprite&&bs.setMode(4);if(nt.isInstancedMesh)bs.renderInstances(wf,xf,nt.count);else if(Ge.isInstancedBufferGeometry){const mg=Math.min(Ge.instanceCount,Ge._maxInstanceCount);bs.renderInstances(wf,xf,mg)}else bs.render(wf,xf)}},this.compile=function(ee,Se){S=ur.get(ee),S.init(),T.push(S),ee.traverseVisible(function(Ge){Ge.isLight&&Ge.layers.test(Se.layers)&&(S.pushLight(Ge),Ge.castShadow&&S.pushShadow(Ge))}),S.setupLights(I.physicallyCorrectLights),ee.traverse(function(Ge){const Fe=Ge.material;if(Fe)if(Array.isArray(Fe))for(let nt=0;nt<Fe.length;nt++)PN(Fe[nt],ee,Ge);else PN(Fe,ee,Ge)}),T.pop(),S=null};let et=null;function xi(){Dc.stop()}function rs(){Dc.start()}const Dc=new hG;function ys(ee,Se,Ge,Fe){if(!1===ee.visible)return;if(ee.layers.test(Se.layers))if(ee.isGroup)Ge=ee.renderOrder;else if(ee.isLOD)!0===ee.autoUpdate&&ee.update(Se);else if(ee.isLight)S.pushLight(ee),ee.castShadow&&S.pushShadow(ee);else if(ee.isSprite){if(!ee.frustumCulled||ye.intersectsSprite(ee)){Fe&&mt.setFromMatrixPosition(ee.matrixWorld).applyMatrix4(Je);const Wn=On.update(ee),ci=ee.material;ci.visible&&x.push(ee,Wn,ci,Ge,mt.z,null)}}else if((ee.isMesh||ee.isLine||ee.isPoints)&&(ee.isSkinnedMesh&&ee.skeleton.frame!==kn.render.frame&&(ee.skeleton.update(),ee.skeleton.frame=kn.render.frame),!ee.frustumCulled||ye.intersectsObject(ee))){Fe&&mt.setFromMatrixPosition(ee.matrixWorld).applyMatrix4(Je);const Wn=On.update(ee),ci=ee.material;if(Array.isArray(ci)){const oi=Wn.groups;for(let nr=0,Di=oi.length;nr<Di;nr++){const Li=oi[nr],bs=ci[Li.materialIndex];bs&&bs.visible&&x.push(ee,Wn,bs,Ge,mt.z,Li)}}else ci.visible&&x.push(ee,Wn,ci,Ge,mt.z,null)}const Hn=ee.children;for(let Wn=0,ci=Hn.length;Wn<ci;Wn++)ys(Hn[Wn],Se,Ge,Fe)}function yf(ee,Se,Ge,Fe){const nt=ee.opaque,Hn=ee.transmissive,Wn=ee.transparent;S.setupLightsView(Ge),Hn.length>0&&function gg(ee,Se,Ge){null===Le&&(Le=new(!0===l&&!0===vn.isWebGL2?HF:Vu)(1024,1024,{generateMipmaps:!0,type:null!==Mn.convert(yx)?yx:Rv,minFilter:1008,magFilter:co,wrapS:Va,wrapT:Va,useRenderToTexture:Vt.has("WEBGL_multisampled_render_to_texture")}));const Fe=I.getRenderTarget();I.setRenderTarget(Le),I.clear();const nt=I.toneMapping;I.toneMapping=0,VR(ee,Se,Ge),I.toneMapping=nt,Xe.updateMultisampleRenderTarget(Le),Xe.updateRenderTargetMipmap(Le),I.setRenderTarget(Fe)}(nt,Se,Ge),Fe&&Ft.viewport(K.copy(Fe)),nt.length>0&&VR(nt,Se,Ge),Hn.length>0&&VR(Hn,Se,Ge),Wn.length>0&&VR(Wn,Se,Ge)}function VR(ee,Se,Ge){const Fe=!0===Se.isScene?Se.overrideMaterial:null;for(let nt=0,Hn=ee.length;nt<Hn;nt++){const Wn=ee[nt],ci=Wn.object,oi=Wn.geometry,nr=null===Fe?Wn.material:Fe,Di=Wn.group;ci.layers.test(Ge.layers)&&Zre(ci,Se,Ge,oi,nr,Di)}}function Zre(ee,Se,Ge,Fe,nt,Hn){ee.onBeforeRender(I,Se,Ge,Fe,nt,Hn),ee.modelViewMatrix.multiplyMatrices(Ge.matrixWorldInverse,ee.matrixWorld),ee.normalMatrix.getNormalMatrix(ee.modelViewMatrix),nt.onBeforeRender(I,Se,Ge,Fe,ee,Hn),!0===nt.transparent&&2===nt.side?(nt.side=1,nt.needsUpdate=!0,I.renderBufferDirect(Ge,Se,Fe,nt,ee,Hn),nt.side=0,nt.needsUpdate=!0,I.renderBufferDirect(Ge,Se,Fe,nt,ee,Hn),nt.side=2):I.renderBufferDirect(Ge,Se,Fe,nt,ee,Hn),ee.onAfterRender(I,Se,Ge,Fe,nt,Hn)}function PN(ee,Se,Ge){!0!==Se.isScene&&(Se=Yt);const Fe=An.get(ee),nt=S.state.lights,Wn=nt.state.version,ci=Ln.getParameters(ee,nt.state,S.state.shadowsArray,Se,Ge),oi=Ln.getProgramCacheKey(ci);let nr=Fe.programs;Fe.environment=ee.isMeshStandardMaterial?Se.environment:null,Fe.fog=Se.fog,Fe.envMap=(ee.isMeshStandardMaterial?Ct:At).get(ee.envMap||Fe.environment),void 0===nr&&(ee.addEventListener("dispose",on),nr=new Map,Fe.programs=nr);let Di=nr.get(oi);if(void 0!==Di){if(Fe.currentProgram===Di&&Fe.lightsStateVersion===Wn)return $4(ee,ci),Di}else ci.uniforms=Ln.getUniforms(ee),ee.onBuild(Ge,ci,I),ee.onBeforeCompile(ci,I),Di=Ln.acquireProgram(ci,oi),nr.set(oi,Di),Fe.uniforms=ci.uniforms;const Li=Fe.uniforms;(!ee.isShaderMaterial&&!ee.isRawShaderMaterial||!0===ee.clipping)&&(Li.clippingPlanes=re.uniform),$4(ee,ci),Fe.needsLights=function Qre(ee){return ee.isMeshLambertMaterial||ee.isMeshToonMaterial||ee.isMeshPhongMaterial||ee.isMeshStandardMaterial||ee.isShadowMaterial||ee.isShaderMaterial&&!0===ee.lights}(ee),Fe.lightsStateVersion=Wn,Fe.needsLights&&(Li.ambientLightColor.value=nt.state.ambient,Li.lightProbe.value=nt.state.probe,Li.directionalLights.value=nt.state.directional,Li.directionalLightShadows.value=nt.state.directionalShadow,Li.spotLights.value=nt.state.spot,Li.spotLightShadows.value=nt.state.spotShadow,Li.rectAreaLights.value=nt.state.rectArea,Li.ltc_1.value=nt.state.rectAreaLTC1,Li.ltc_2.value=nt.state.rectAreaLTC2,Li.pointLights.value=nt.state.point,Li.pointLightShadows.value=nt.state.pointShadow,Li.hemisphereLights.value=nt.state.hemi,Li.directionalShadowMap.value=nt.state.directionalShadowMap,Li.directionalShadowMatrix.value=nt.state.directionalShadowMatrix,Li.spotShadowMap.value=nt.state.spotShadowMap,Li.spotShadowMatrix.value=nt.state.spotShadowMatrix,Li.pointShadowMap.value=nt.state.pointShadowMap,Li.pointShadowMatrix.value=nt.state.pointShadowMatrix);const bs=Di.getUniforms(),U0=Wv.seqWithValue(bs.seq,Li);return Fe.currentProgram=Di,Fe.uniformsList=U0,Di}function $4(ee,Se){const Ge=An.get(ee);Ge.outputEncoding=Se.outputEncoding,Ge.instancing=Se.instancing,Ge.skinning=Se.skinning,Ge.morphTargets=Se.morphTargets,Ge.morphNormals=Se.morphNormals,Ge.morphTargetsCount=Se.morphTargetsCount,Ge.numClippingPlanes=Se.numClippingPlanes,Ge.numIntersection=Se.numClipIntersection,Ge.vertexAlphas=Se.vertexAlphas,Ge.vertexTangents=Se.vertexTangents,Ge.toneMapping=Se.toneMapping}Dc.setAnimationLoop(function Tn(ee){et&&et(ee)}),"undefined"!=typeof window&&Dc.setContext(window),this.setAnimationLoop=function(ee){et=ee,Gt.setAnimationLoop(ee),null===ee?Dc.stop():Dc.start()},Gt.addEventListener("sessionstart",xi),Gt.addEventListener("sessionend",rs),this.render=function(ee,Se){if(void 0===Se||!0===Se.isCamera){if(!0!==L){if(!0===ee.autoUpdate&&ee.updateMatrixWorld(),null===Se.parent&&Se.updateMatrixWorld(),!0===Gt.enabled&&!0===Gt.isPresenting&&(!0===Gt.cameraAutoUpdate&&Gt.updateCamera(Se),Se=Gt.getCamera()),!0===ee.isScene&&ee.onBeforeRender(I,ee,Se,U),S=ur.get(ee,T.length),S.init(),T.push(S),Je.multiplyMatrices(Se.projectionMatrix,Se.matrixWorldInverse),ye.setFromProjectionMatrix(Je),ht=this.localClippingEnabled,Ae=re.init(this.clippingPlanes,ht,Se),x=Sr.get(ee,M.length),x.init(),M.push(x),ys(ee,Se,0,I.sortObjects),x.finish(),!0===I.sortObjects&&x.sort(ce,be),!0===Ae&&re.beginShadows(),X.render(S.state.shadowsArray,ee,Se),!0===Ae&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),Ke.render(x,ee),S.setupLights(I.physicallyCorrectLights),Se.isArrayCamera){const Fe=Se.cameras;for(let nt=0,Hn=Fe.length;nt<Hn;nt++){const Wn=Fe[nt];yf(x,ee,Wn,Wn.viewport)}}else yf(x,ee,Se);null!==U&&(Xe.updateMultisampleRenderTarget(U),Xe.updateRenderTargetMipmap(U)),!0===ee.isScene&&ee.onAfterRender(I,ee,Se),Ft.buffers.depth.setTest(!0),Ft.buffers.depth.setMask(!0),Ft.buffers.color.setMask(!0),Ft.setPolygonOffset(!1),hn.resetDefaultState(),N=-1,j=null,T.pop(),S=T.length>0?T[T.length-1]:null,M.pop(),x=M.length>0?M[M.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return U},this.setRenderTargetTextures=function(ee,Se,Ge){An.get(ee.texture).__webglTexture=Se,An.get(ee.depthTexture).__webglTexture=Ge;const Fe=An.get(ee);Fe.__hasExternalTextures=!0,Fe.__hasExternalTextures&&(Fe.__autoAllocateDepthBuffer=void 0===Ge,Fe.__autoAllocateDepthBuffer||ee.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),ee.useRenderToTexture=!1,ee.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(ee,Se){const Ge=An.get(ee);Ge.__webglFramebuffer=Se,Ge.__useDefaultFramebuffer=void 0===Se},this.setRenderTarget=function(ee,Se=0,Ge=0){U=ee,k=Se,R=Ge;let Fe=!0;if(ee){const oi=An.get(ee);void 0!==oi.__useDefaultFramebuffer?(Ft.bindFramebuffer(36160,null),Fe=!1):void 0===oi.__webglFramebuffer?Xe.setupRenderTarget(ee):oi.__hasExternalTextures&&Xe.rebindTextures(ee,An.get(ee.texture).__webglTexture,An.get(ee.depthTexture).__webglTexture)}let nt=null,Hn=!1,Wn=!1;if(ee){const oi=ee.texture;(oi.isDataTexture3D||oi.isDataTexture2DArray)&&(Wn=!0);const nr=An.get(ee).__webglFramebuffer;ee.isWebGLCubeRenderTarget?(nt=nr[Se],Hn=!0):nt=ee.useRenderbuffer?An.get(ee).__webglMultisampledFramebuffer:nr,K.copy(ee.viewport),ne.copy(ee.scissor),de=ee.scissorTest}else K.copy(De).multiplyScalar(W).floor(),ne.copy(Ie).multiplyScalar(W).floor(),de=ae;if(Ft.bindFramebuffer(36160,nt)&&vn.drawBuffers&&Fe&&Ft.drawBuffers(ee,nt),Ft.viewport(K),Ft.scissor(ne),Ft.setScissorTest(de),Hn){const oi=An.get(ee.texture);ze.framebufferTexture2D(36160,36064,34069+Se,oi.__webglTexture,Ge)}else if(Wn){const oi=An.get(ee.texture);ze.framebufferTextureLayer(36160,36064,oi.__webglTexture,Ge||0,Se||0)}N=-1},this.readRenderTargetPixels=function(ee,Se,Ge,Fe,nt,Hn,Wn){if(!ee||!ee.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ci=An.get(ee).__webglFramebuffer;if(ee.isWebGLCubeRenderTarget&&void 0!==Wn&&(ci=ci[Wn]),ci){Ft.bindFramebuffer(36160,ci);try{const oi=ee.texture,nr=oi.format,Di=oi.type;if(nr!==Ua&&Mn.convert(nr)!==ze.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Li=Di===yx&&(Vt.has("EXT_color_buffer_half_float")||vn.isWebGL2&&Vt.has("EXT_color_buffer_float"));if(!(Di===Rv||Mn.convert(Di)===ze.getParameter(35738)||Di===Pv&&(vn.isWebGL2||Vt.has("OES_texture_float")||Vt.has("WEBGL_color_buffer_float"))||Li))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ze.checkFramebufferStatus(36160)?Se>=0&&Se<=ee.width-Fe&&Ge>=0&&Ge<=ee.height-nt&&ze.readPixels(Se,Ge,Fe,nt,Mn.convert(nr),Mn.convert(Di),Hn):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const oi=null!==U?An.get(U).__webglFramebuffer:null;Ft.bindFramebuffer(36160,oi)}}},this.copyFramebufferToTexture=function(ee,Se,Ge=0){if(!0!==Se.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const Fe=Math.pow(2,-Ge),nt=Math.floor(Se.image.width*Fe),Hn=Math.floor(Se.image.height*Fe);Xe.setTexture2D(Se,0),ze.copyTexSubImage2D(3553,Ge,0,0,ee.x,ee.y,nt,Hn),Ft.unbindTexture()},this.copyTextureToTexture=function(ee,Se,Ge,Fe=0){const nt=Se.image.width,Hn=Se.image.height,Wn=Mn.convert(Ge.format),ci=Mn.convert(Ge.type);Xe.setTexture2D(Ge,0),ze.pixelStorei(37440,Ge.flipY),ze.pixelStorei(37441,Ge.premultiplyAlpha),ze.pixelStorei(3317,Ge.unpackAlignment),Se.isDataTexture?ze.texSubImage2D(3553,Fe,ee.x,ee.y,nt,Hn,Wn,ci,Se.image.data):Se.isCompressedTexture?ze.compressedTexSubImage2D(3553,Fe,ee.x,ee.y,Se.mipmaps[0].width,Se.mipmaps[0].height,Wn,Se.mipmaps[0].data):ze.texSubImage2D(3553,Fe,ee.x,ee.y,Wn,ci,Se.image),0===Fe&&Ge.generateMipmaps&&ze.generateMipmap(3553),Ft.unbindTexture()},this.copyTextureToTexture3D=function(ee,Se,Ge,Fe,nt=0){if(I.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Hn=ee.max.x-ee.min.x+1,Wn=ee.max.y-ee.min.y+1,ci=ee.max.z-ee.min.z+1,oi=Mn.convert(Fe.format),nr=Mn.convert(Fe.type);let Di;if(Fe.isDataTexture3D)Xe.setTexture3D(Fe,0),Di=32879;else{if(!Fe.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Xe.setTexture2DArray(Fe,0),Di=35866}ze.pixelStorei(37440,Fe.flipY),ze.pixelStorei(37441,Fe.premultiplyAlpha),ze.pixelStorei(3317,Fe.unpackAlignment);const Li=ze.getParameter(3314),bs=ze.getParameter(32878),U0=ze.getParameter(3316),fC=ze.getParameter(3315),Hi=ze.getParameter(32877),bf=Ge.isCompressedTexture?Ge.mipmaps[0]:Ge.image;ze.pixelStorei(3314,bf.width),ze.pixelStorei(32878,bf.height),ze.pixelStorei(3316,ee.min.x),ze.pixelStorei(3315,ee.min.y),ze.pixelStorei(32877,ee.min.z),Ge.isDataTexture||Ge.isDataTexture3D?ze.texSubImage3D(Di,nt,Se.x,Se.y,Se.z,Hn,Wn,ci,oi,nr,bf.data):Ge.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ze.compressedTexSubImage3D(Di,nt,Se.x,Se.y,Se.z,Hn,Wn,ci,oi,bf.data)):ze.texSubImage3D(Di,nt,Se.x,Se.y,Se.z,Hn,Wn,ci,oi,nr,bf),ze.pixelStorei(3314,Li),ze.pixelStorei(32878,bs),ze.pixelStorei(3316,U0),ze.pixelStorei(3315,fC),ze.pixelStorei(32877,Hi),0===nt&&Fe.generateMipmaps&&ze.generateMipmap(Di),Ft.unbindTexture()},this.initTexture=function(ee){Xe.setTexture2D(ee,0),Ft.unbindTexture()},this.resetState=function(){k=0,R=0,U=null,Ft.reset(),hn.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}tr.prototype.isWebGLRenderer=!0,class IQ extends tr{}.prototype.isWebGL1Renderer=!0;class T1{constructor(e,t=25e-5){this.name="",this.color=new Ht(e),this.density=t}clone(){return new T1(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}T1.prototype.isFogExp2=!0;class jE{constructor(e,t=1,s=1e3){this.name="",this.color=new Ht(e),this.near=t,this.far=s}clone(){return new jE(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}jE.prototype.isFog=!0;class I1 extends Gi{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}I1.prototype.isScene=!0;class Yx{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=RE,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Sc()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,s){e*=this.stride,s*=t.stride;for(let o=0,a=this.stride;o<a;o++)this.array[e+o]=t.array[s+o];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Sc()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(t,this.stride);return s.setUsage(this.usage),s}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Sc()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Yx.prototype.isInterleavedBuffer=!0;const Ns=new J;class P0{constructor(e,t,s,o=!1){this.name="",this.data=e,this.itemSize=t,this.offset=s,this.normalized=!0===o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,s=this.data.count;t<s;t++)Ns.x=this.getX(t),Ns.y=this.getY(t),Ns.z=this.getZ(t),Ns.applyMatrix4(e),this.setXYZ(t,Ns.x,Ns.y,Ns.z);return this}applyNormalMatrix(e){for(let t=0,s=this.count;t<s;t++)Ns.x=this.getX(t),Ns.y=this.getY(t),Ns.z=this.getZ(t),Ns.applyNormalMatrix(e),this.setXYZ(t,Ns.x,Ns.y,Ns.z);return this}transformDirection(e){for(let t=0,s=this.count;t<s;t++)Ns.x=this.getX(t),Ns.y=this.getY(t),Ns.z=this.getZ(t),Ns.transformDirection(e),this.setXYZ(t,Ns.x,Ns.y,Ns.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,s){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=s,this}setXYZ(e,t,s,o){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=s,this.data.array[e+2]=o,this}setXYZW(e,t,s,o,a){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=s,this.data.array[e+2]=o,this.data.array[e+3]=a,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let s=0;s<this.count;s++){const o=s*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[o+a])}return new gr(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new P0(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let s=0;s<this.count;s++){const o=s*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[o+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}P0.prototype.isInterleavedBufferAttribute=!0;class xL extends ha{constructor(e){super(),this.type="SpriteMaterial",this.color=new Ht(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let $x;xL.prototype.isSpriteMaterial=!0;const WE=new J,Zx=new J,Kx=new J,Jx=new rt,qE=new rt,$G=new sn,R1=new J,YE=new J,P1=new J,ZG=new rt,CL=new rt,KG=new rt;function k1(i,e,t,s,o,a){Jx.subVectors(i,t).addScalar(.5).multiply(s),void 0!==o?(qE.x=a*Jx.x-o*Jx.y,qE.y=o*Jx.x+a*Jx.y):qE.copy(Jx),i.copy(e),i.x+=qE.x,i.y+=qE.y,i.applyMatrix4($G)}(class SL extends Gi{constructor(e){if(super(),this.type="Sprite",void 0===$x){$x=new In;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),s=new Yx(t,5);$x.setIndex([0,1,2,0,2,3]),$x.setAttribute("position",new P0(s,3,0,!1)),$x.setAttribute("uv",new P0(s,2,3,!1))}this.geometry=$x,this.material=void 0!==e?e:new xL,this.center=new rt(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zx.setFromMatrixScale(this.matrixWorld),$G.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Kx.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Zx.multiplyScalar(-Kx.z);const s=this.material.rotation;let o,a;0!==s&&(a=Math.cos(s),o=Math.sin(s));const l=this.center;k1(R1.set(-.5,-.5,0),Kx,l,Zx,o,a),k1(YE.set(.5,-.5,0),Kx,l,Zx,o,a),k1(P1.set(.5,.5,0),Kx,l,Zx,o,a),ZG.set(0,0),CL.set(1,0),KG.set(1,1);let h=e.ray.intersectTriangle(R1,YE,P1,!1,WE);if(null===h&&(k1(YE.set(-.5,.5,0),Kx,l,Zx,o,a),CL.set(0,1),h=e.ray.intersectTriangle(R1,P1,YE,!1,WE),null===h))return;const g=e.ray.origin.distanceTo(WE);g<e.near||g>e.far||t.push({distance:g,point:WE.clone(),uv:uo.getUV(WE,R1,YE,P1,ZG,CL,KG,new rt),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const O1=new J,JG=new J;class QG extends Gi{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let s=0,o=t.length;s<o;s++){const a=t[s];this.addLevel(a.object.clone(),a.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const s=this.levels;let o;for(o=0;o<s.length&&!(t<s[o].distance);o++);return s.splice(o,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let s,o;for(s=1,o=t.length;s<o&&!(e<t[s].distance);s++);return t[s-1].object}return null}raycast(e,t){if(this.levels.length>0){O1.setFromMatrixPosition(this.matrixWorld);const o=e.ray.origin.distanceTo(O1);this.getObjectForDistance(o).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){O1.setFromMatrixPosition(e.matrixWorld),JG.setFromMatrixPosition(this.matrixWorld);const s=O1.distanceTo(JG)/e.zoom;let o,a;for(t[0].object.visible=!0,o=1,a=t.length;o<a&&s>=t[o].distance;o++)t[o-1].object.visible=!1,t[o].object.visible=!0;for(this._currentLevel=o-1;o<a;o++)t[o].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const s=this.levels;for(let o=0,a=s.length;o<a;o++){const l=s[o];t.object.levels.push({object:l.object.uuid,distance:l.distance})}return t}}const XG=new J,eH=new cr,tH=new cr,RQ=new J,nH=new sn;class ML extends Do{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new sn,this.bindMatrixInverse=new sn}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new cr,t=this.geometry.attributes.skinWeight;for(let s=0,o=t.count;s<o;s++){e.x=t.getX(s),e.y=t.getY(s),e.z=t.getZ(s),e.w=t.getW(s);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(s,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const s=this.skeleton,o=this.geometry;eH.fromBufferAttribute(o.attributes.skinIndex,e),tH.fromBufferAttribute(o.attributes.skinWeight,e),XG.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const l=tH.getComponent(a);if(0!==l){const h=eH.getComponent(a);nH.multiplyMatrices(s.bones[h].matrixWorld,s.boneInverses[h]),t.addScaledVector(RQ.copy(XG).applyMatrix4(nH),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}ML.prototype.isSkinnedMesh=!0;(class EL extends Gi{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class Qx extends Eo{constructor(e=null,t=1,s=1,o,a,l,h,g,_=co,b=co,x,S){super(null,l,h,g,_,b,o,a,x,S),this.image={data:e,width:t,height:s},this.magFilter=_,this.minFilter=b,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}).prototype.isDataTexture=!0;class Xx extends gr{constructor(e,t,s,o=1){"number"==typeof s&&(o=s,s=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,s),this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Xx.prototype.isInstancedBufferAttribute=!0;const rH=new sn,sH=new sn,F1=[],$E=new Do;(class oH extends Do{constructor(e,t,s){super(e,t),this.instanceMatrix=new Xx(new Float32Array(16*s),16),this.instanceColor=null,this.count=s,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const s=this.matrixWorld,o=this.count;if($E.geometry=this.geometry,$E.material=this.material,void 0!==$E.material)for(let a=0;a<o;a++){this.getMatrixAt(a,rH),sH.multiplyMatrices(s,rH),$E.matrixWorld=sH,$E.raycast(e,F1);for(let l=0,h=F1.length;l<h;l++){const g=F1[l];g.instanceId=a,g.object=this,t.push(g)}F1.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Xx(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class fa extends ha{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Ht(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}fa.prototype.isLineBasicMaterial=!0;const aH=new J,lH=new J,cH=new sn,AL=new T0,L1=new A0;class k0 extends Gi{constructor(e=new In,t=new fa){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,s=[0];for(let o=1,a=t.count;o<a;o++)aH.fromBufferAttribute(t,o-1),lH.fromBufferAttribute(t,o),s[o]=s[o-1],s[o]+=aH.distanceTo(lH);e.setAttribute("lineDistance",new en(s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const s=this.geometry,o=this.matrixWorld,a=e.params.Line.threshold,l=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),L1.copy(s.boundingSphere),L1.applyMatrix4(o),L1.radius+=a,!1===e.ray.intersectsSphere(L1))return;cH.copy(o).invert(),AL.copy(e.ray).applyMatrix4(cH);const h=a/((this.scale.x+this.scale.y+this.scale.z)/3),g=h*h,_=new J,b=new J,x=new J,S=new J,M=this.isLineSegments?2:1;if(s.isBufferGeometry){const T=s.index,L=s.attributes.position;if(null!==T)for(let U=Math.max(0,l.start),N=Math.min(T.count,l.start+l.count)-1;U<N;U+=M){const j=T.getX(U),K=T.getX(U+1);if(_.fromBufferAttribute(L,j),b.fromBufferAttribute(L,K),AL.distanceSqToSegment(_,b,S,x)>g)continue;S.applyMatrix4(this.matrixWorld);const de=e.ray.origin.distanceTo(S);de<e.near||de>e.far||t.push({distance:de,point:x.clone().applyMatrix4(this.matrixWorld),index:U,face:null,faceIndex:null,object:this})}else for(let U=Math.max(0,l.start),N=Math.min(L.count,l.start+l.count)-1;U<N;U+=M){if(_.fromBufferAttribute(L,U),b.fromBufferAttribute(L,U+1),AL.distanceSqToSegment(_,b,S,x)>g)continue;S.applyMatrix4(this.matrixWorld);const K=e.ray.origin.distanceTo(S);K<e.near||K>e.far||t.push({distance:K,point:x.clone().applyMatrix4(this.matrixWorld),index:U,face:null,faceIndex:null,object:this})}}else s.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,s=Object.keys(t);if(s.length>0){const o=t[s[0]];if(void 0!==o){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=o.length;a<l;a++){const h=o[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=a}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}k0.prototype.isLine=!0;const uH=new J,dH=new J;class qv extends k0{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,s=[];for(let o=0,a=t.count;o<a;o+=2)uH.fromBufferAttribute(t,o),dH.fromBufferAttribute(t,o+1),s[o]=0===o?0:s[o-1],s[o+1]=s[o]+uH.distanceTo(dH);e.setAttribute("lineDistance",new en(s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}qv.prototype.isLineSegments=!0;(class hH extends k0{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class eC extends ha{constructor(e){super(),this.type="PointsMaterial",this.color=new Ht(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}eC.prototype.isPointsMaterial=!0;const fH=new sn,TL=new T0,N1=new A0,B1=new J;function pH(i,e,t,s,o,a,l){const h=TL.distanceSqToPoint(i);if(h<t){const g=new J;TL.closestPointToPoint(i,g),g.applyMatrix4(s);const _=o.ray.origin.distanceTo(g);if(_<o.near||_>o.far)return;a.push({distance:_,distanceToRay:Math.sqrt(h),point:g,index:e,face:null,object:l})}}(class V1 extends Gi{constructor(e=new In,t=new eC){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const s=this.geometry,o=this.matrixWorld,a=e.params.Points.threshold,l=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),N1.copy(s.boundingSphere),N1.applyMatrix4(o),N1.radius+=a,!1===e.ray.intersectsSphere(N1))return;fH.copy(o).invert(),TL.copy(e.ray).applyMatrix4(fH);const h=a/((this.scale.x+this.scale.y+this.scale.z)/3),g=h*h;if(s.isBufferGeometry){const _=s.index,x=s.attributes.position;if(null!==_)for(let T=Math.max(0,l.start),I=Math.min(_.count,l.start+l.count);T<I;T++){const L=_.getX(T);B1.fromBufferAttribute(x,L),pH(B1,L,g,o,e,t,this)}else for(let T=Math.max(0,l.start),I=Math.min(x.count,l.start+l.count);T<I;T++)B1.fromBufferAttribute(x,T),pH(B1,T,g,o,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,s=Object.keys(t);if(s.length>0){const o=t[s[0]];if(void 0!==o){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=o.length;a<l;a++){const h=o[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=a}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0,class kQ extends Eo{constructor(e,t,s,o,a,l,h,g,_){super(e,t,s,o,a,l,h,g,_),this.minFilter=void 0!==l?l:vs,this.magFilter=void 0!==a?a:vs,this.generateMipmaps=!1;const b=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function x(){b.needsUpdate=!0,e.requestVideoFrameCallback(x)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class OQ extends Eo{constructor(e,t,s){super({width:e,height:t}),this.format=s,this.magFilter=co,this.minFilter=co,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class gH extends Eo{constructor(e,t,s,o,a,l,h,g,_,b,x,S){super(null,l,h,g,_,b,o,a,x,S),this.image={width:t,height:s},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class FQ extends Eo{constructor(e,t,s,o,a,l,h,g,_){super(e,t,s,o,a,l,h,g,_),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0;class Yv extends In{constructor(e=[],t=[],s=1,o=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:s,detail:o};const a=[],l=[];function g(R,U,N,j){const K=j+1,ne=[];for(let de=0;de<=K;de++){ne[de]=[];const Re=R.clone().lerp(N,de/K),xe=U.clone().lerp(N,de/K),W=K-de;for(let ce=0;ce<=W;ce++)ne[de][ce]=0===ce&&de===K?Re:Re.clone().lerp(xe,ce/W)}for(let de=0;de<K;de++)for(let Re=0;Re<2*(K-de)-1;Re++){const xe=Math.floor(Re/2);Re%2==0?(S(ne[de][xe+1]),S(ne[de+1][xe]),S(ne[de][xe])):(S(ne[de][xe+1]),S(ne[de+1][xe+1]),S(ne[de+1][xe]))}}function S(R){a.push(R.x,R.y,R.z)}function M(R,U){const N=3*R;U.x=e[N+0],U.y=e[N+1],U.z=e[N+2]}function I(R,U,N,j){j<0&&1===R.x&&(l[U]=R.x-1),0===N.x&&0===N.z&&(l[U]=j/2/Math.PI+.5)}function L(R){return Math.atan2(R.z,-R.x)}function k(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}(function h(R){const U=new J,N=new J,j=new J;for(let K=0;K<t.length;K+=3)M(t[K+0],U),M(t[K+1],N),M(t[K+2],j),g(U,N,j,R)})(o),function _(R){const U=new J;for(let N=0;N<a.length;N+=3)U.x=a[N+0],U.y=a[N+1],U.z=a[N+2],U.normalize().multiplyScalar(R),a[N+0]=U.x,a[N+1]=U.y,a[N+2]=U.z}(s),function b(){const R=new J;for(let U=0;U<a.length;U+=3){R.x=a[U+0],R.y=a[U+1],R.z=a[U+2];const N=L(R)/2/Math.PI+.5,j=k(R)/Math.PI+.5;l.push(N,1-j)}(function T(){const R=new J,U=new J,N=new J,j=new J,K=new rt,ne=new rt,de=new rt;for(let Re=0,xe=0;Re<a.length;Re+=9,xe+=6){R.set(a[Re+0],a[Re+1],a[Re+2]),U.set(a[Re+3],a[Re+4],a[Re+5]),N.set(a[Re+6],a[Re+7],a[Re+8]),K.set(l[xe+0],l[xe+1]),ne.set(l[xe+2],l[xe+3]),de.set(l[xe+4],l[xe+5]),j.copy(R).add(U).add(N).divideScalar(3);const W=L(j);I(K,xe+0,R,W),I(ne,xe+2,U,W),I(de,xe+4,N,W)}})(),function x(){for(let R=0;R<l.length;R+=6){const U=l[R+0],N=l[R+2],j=l[R+4],K=Math.max(U,N,j),ne=Math.min(U,N,j);K>.9&&ne<.1&&(U<.2&&(l[R+0]+=1),N<.2&&(l[R+2]+=1),j<.2&&(l[R+4]+=1))}}()}(),this.setAttribute("position",new en(a,3)),this.setAttribute("normal",new en(a.slice(),3)),this.setAttribute("uv",new en(l,2)),0===o?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new Yv(e.vertices,e.indices,e.radius,e.details)}}new J,new J,new J,new uo;class Hu{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const s=this.getUtoTmapping(e);return this.getPoint(s,t)}getPoints(e=5){const t=[];for(let s=0;s<=e;s++)t.push(this.getPoint(s/e));return t}getSpacedPoints(e=5){const t=[];for(let s=0;s<=e;s++)t.push(this.getPointAt(s/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let s,o=this.getPoint(0),a=0;t.push(0);for(let l=1;l<=e;l++)s=this.getPoint(l/e),a+=s.distanceTo(o),t.push(a),o=s;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const s=this.getLengths();let o=0;const a=s.length;let l;l=t||e*s[a-1];let _,h=0,g=a-1;for(;h<=g;)if(o=Math.floor(h+(g-h)/2),_=s[o]-l,_<0)h=o+1;else{if(!(_>0)){g=o;break}g=o-1}if(o=g,s[o]===l)return o/(a-1);const b=s[o];return(o+(l-b)/(s[o+1]-b))/(a-1)}getTangent(e,t){const s=1e-4;let o=e-s,a=e+s;o<0&&(o=0),a>1&&(a=1);const l=this.getPoint(o),h=this.getPoint(a),g=t||(l.isVector2?new rt:new J);return g.copy(h).sub(l).normalize(),g}getTangentAt(e,t){const s=this.getUtoTmapping(e);return this.getTangent(s,t)}computeFrenetFrames(e,t){const s=new J,o=[],a=[],l=[],h=new J,g=new sn;for(let M=0;M<=e;M++)o[M]=this.getTangentAt(M/e,new J);a[0]=new J,l[0]=new J;let _=Number.MAX_VALUE;const b=Math.abs(o[0].x),x=Math.abs(o[0].y),S=Math.abs(o[0].z);b<=_&&(_=b,s.set(1,0,0)),x<=_&&(_=x,s.set(0,1,0)),S<=_&&s.set(0,0,1),h.crossVectors(o[0],s).normalize(),a[0].crossVectors(o[0],h),l[0].crossVectors(o[0],a[0]);for(let M=1;M<=e;M++){if(a[M]=a[M-1].clone(),l[M]=l[M-1].clone(),h.crossVectors(o[M-1],o[M]),h.length()>Number.EPSILON){h.normalize();const T=Math.acos(da(o[M-1].dot(o[M]),-1,1));a[M].applyMatrix4(g.makeRotationAxis(h,T))}l[M].crossVectors(o[M],a[M])}if(!0===t){let M=Math.acos(da(a[0].dot(a[e]),-1,1));M/=e,o[0].dot(h.crossVectors(a[0],a[e]))>0&&(M=-M);for(let T=1;T<=e;T++)a[T].applyMatrix4(g.makeRotationAxis(o[T],M*T)),l[T].crossVectors(o[T],a[T])}return{tangents:o,normals:a,binormals:l}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class q1 extends Hu{constructor(e=0,t=0,s=1,o=1,a=0,l=2*Math.PI,h=!1,g=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=s,this.yRadius=o,this.aStartAngle=a,this.aEndAngle=l,this.aClockwise=h,this.aRotation=g}getPoint(e,t){const s=t||new rt,o=2*Math.PI;let a=this.aEndAngle-this.aStartAngle;const l=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=o;for(;a>o;)a-=o;a<Number.EPSILON&&(a=l?0:o),!0===this.aClockwise&&!l&&(a===o?a=-o:a-=o);const h=this.aStartAngle+e*a;let g=this.aX+this.xRadius*Math.cos(h),_=this.aY+this.yRadius*Math.sin(h);if(0!==this.aRotation){const b=Math.cos(this.aRotation),x=Math.sin(this.aRotation),S=g-this.aX,M=_-this.aY;g=S*b-M*x+this.aX,_=S*x+M*b+this.aY}return s.set(g,_)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}q1.prototype.isEllipseCurve=!0;class vH extends q1{constructor(e,t,s,o,a,l){super(e,t,s,s,o,a,l),this.type="ArcCurve"}}function RL(){let i=0,e=0,t=0,s=0;function o(a,l,h,g){i=a,e=h,t=-3*a+3*l-2*h-g,s=2*a-2*l+h+g}return{initCatmullRom:function(a,l,h,g,_){o(l,h,_*(h-a),_*(g-l))},initNonuniformCatmullRom:function(a,l,h,g,_,b,x){let S=(l-a)/_-(h-a)/(_+b)+(h-l)/b,M=(h-l)/b-(g-l)/(b+x)+(g-h)/x;S*=b,M*=b,o(l,h,S,M)},calc:function(a){const l=a*a;return i+e*a+t*l+s*(l*a)}}}vH.prototype.isArcCurve=!0;const Y1=new J,PL=new RL,kL=new RL,OL=new RL;class _H extends Hu{constructor(e=[],t=!1,s="centripetal",o=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=s,this.tension=o}getPoint(e,t=new J){const s=t,o=this.points,a=o.length,l=(a-(this.closed?0:1))*e;let _,b,h=Math.floor(l),g=l-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/a)+1)*a:0===g&&h===a-1&&(h=a-2,g=1),this.closed||h>0?_=o[(h-1)%a]:(Y1.subVectors(o[0],o[1]).add(o[0]),_=Y1);const x=o[h%a],S=o[(h+1)%a];if(this.closed||h+2<a?b=o[(h+2)%a]:(Y1.subVectors(o[a-1],o[a-2]).add(o[a-1]),b=Y1),"centripetal"===this.curveType||"chordal"===this.curveType){const M="chordal"===this.curveType?.5:.25;let T=Math.pow(_.distanceToSquared(x),M),I=Math.pow(x.distanceToSquared(S),M),L=Math.pow(S.distanceToSquared(b),M);I<1e-4&&(I=1),T<1e-4&&(T=I),L<1e-4&&(L=I),PL.initNonuniformCatmullRom(_.x,x.x,S.x,b.x,T,I,L),kL.initNonuniformCatmullRom(_.y,x.y,S.y,b.y,T,I,L),OL.initNonuniformCatmullRom(_.z,x.z,S.z,b.z,T,I,L)}else"catmullrom"===this.curveType&&(PL.initCatmullRom(_.x,x.x,S.x,b.x,this.tension),kL.initCatmullRom(_.y,x.y,S.y,b.y,this.tension),OL.initCatmullRom(_.z,x.z,S.z,b.z,this.tension));return s.set(PL.calc(g),kL.calc(g),OL.calc(g)),s}copy(e){super.copy(e),this.points=[];for(let t=0,s=e.points.length;t<s;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,s=this.points.length;t<s;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,s=e.points.length;t<s;t++){const o=e.points[t];this.points.push((new J).fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function yH(i,e,t,s,o){const a=.5*(s-e),l=.5*(o-t),h=i*i;return(2*t-2*s+a+l)*(i*h)+(-3*t+3*s-2*a-l)*h+a*i+t}function ZE(i,e,t,s){return function LQ(i,e){const t=1-i;return t*t*e}(i,e)+function NQ(i,e){return 2*(1-i)*i*e}(i,t)+function BQ(i,e){return i*i*e}(i,s)}function KE(i,e,t,s,o){return function VQ(i,e){const t=1-i;return t*t*t*e}(i,e)+function UQ(i,e){const t=1-i;return 3*t*t*i*e}(i,t)+function GQ(i,e){return 3*(1-i)*i*i*e}(i,s)+function HQ(i,e){return i*i*i*e}(i,o)}_H.prototype.isCatmullRomCurve3=!0;class FL extends Hu{constructor(e=new rt,t=new rt,s=new rt,o=new rt){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=s,this.v3=o}getPoint(e,t=new rt){const s=t,o=this.v0,a=this.v1,l=this.v2,h=this.v3;return s.set(KE(e,o.x,a.x,l.x,h.x),KE(e,o.y,a.y,l.y,h.y)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}FL.prototype.isCubicBezierCurve=!0;class bH extends Hu{constructor(e=new J,t=new J,s=new J,o=new J){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=s,this.v3=o}getPoint(e,t=new J){const s=t,o=this.v0,a=this.v1,l=this.v2,h=this.v3;return s.set(KE(e,o.x,a.x,l.x,h.x),KE(e,o.y,a.y,l.y,h.y),KE(e,o.z,a.z,l.z,h.z)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}bH.prototype.isCubicBezierCurve3=!0;class $1 extends Hu{constructor(e=new rt,t=new rt){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new rt){const s=t;return 1===e?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(e).add(this.v1)),s}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const s=t||new rt;return s.copy(this.v2).sub(this.v1).normalize(),s}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}$1.prototype.isLineCurve=!0;class LL extends Hu{constructor(e=new rt,t=new rt,s=new rt){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=s}getPoint(e,t=new rt){const s=t,o=this.v0,a=this.v1,l=this.v2;return s.set(ZE(e,o.x,a.x,l.x),ZE(e,o.y,a.y,l.y)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}LL.prototype.isQuadraticBezierCurve=!0;class NL extends Hu{constructor(e=new J,t=new J,s=new J){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=s}getPoint(e,t=new J){const s=t,o=this.v0,a=this.v1,l=this.v2;return s.set(ZE(e,o.x,a.x,l.x),ZE(e,o.y,a.y,l.y),ZE(e,o.z,a.z,l.z)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}NL.prototype.isQuadraticBezierCurve3=!0;class BL extends Hu{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new rt){const s=t,o=this.points,a=(o.length-1)*e,l=Math.floor(a),h=a-l,g=o[0===l?l:l-1],_=o[l],b=o[l>o.length-2?o.length-1:l+1],x=o[l>o.length-3?o.length-1:l+2];return s.set(yH(h,g.x,_.x,b.x,x.x),yH(h,g.y,_.y,b.y,x.y)),s}copy(e){super.copy(e),this.points=[];for(let t=0,s=e.points.length;t<s;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,s=this.points.length;t<s;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,s=e.points.length;t<s;t++){const o=e.points[t];this.points.push((new rt).fromArray(o))}return this}}BL.prototype.isSplineCurve=!0;var VL=Object.freeze({__proto__:null,ArcCurve:vH,CatmullRomCurve3:_H,CubicBezierCurve:FL,CubicBezierCurve3:bH,EllipseCurve:q1,LineCurve:$1,LineCurve3:class zQ extends Hu{constructor(e=new J,t=new J){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new J){const s=t;return 1===e?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(e).add(this.v1)),s}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:LL,QuadraticBezierCurve3:NL,SplineCurve:BL});class jQ extends Hu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new $1(t,e))}getPoint(e,t){const s=e*this.getLength(),o=this.getCurveLengths();let a=0;for(;a<o.length;){if(o[a]>=s){const l=o[a]-s,h=this.curves[a],g=h.getLength();return h.getPointAt(0===g?0:1-l/g,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let s=0,o=this.curves.length;s<o;s++)t+=this.curves[s].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let s=0;s<=e;s++)t.push(this.getPoint(s/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let s;for(let o=0,a=this.curves;o<a.length;o++){const l=a[o],g=l.getPoints(l&&l.isEllipseCurve?2*e:l&&(l.isLineCurve||l.isLineCurve3)?1:l&&l.isSplineCurve?e*l.points.length:e);for(let _=0;_<g.length;_++){const b=g[_];s&&s.equals(b)||(t.push(b),s=b)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,s=e.curves.length;t<s;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,s=this.curves.length;t<s;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,s=e.curves.length;t<s;t++){const o=e.curves[t];this.curves.push((new VL[o.type]).fromJSON(o))}return this}}class Z1 extends jQ{constructor(e){super(),this.type="Path",this.currentPoint=new rt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,s=e.length;t<s;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const s=new $1(this.currentPoint.clone(),new rt(e,t));return this.curves.push(s),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,s,o){const a=new LL(this.currentPoint.clone(),new rt(e,t),new rt(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}bezierCurveTo(e,t,s,o,a,l){const h=new FL(this.currentPoint.clone(),new rt(e,t),new rt(s,o),new rt(a,l));return this.curves.push(h),this.currentPoint.set(a,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),s=new BL(t);return this.curves.push(s),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,s,o,a,l){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,s,o,a,l),this}absarc(e,t,s,o,a,l){return this.absellipse(e,t,s,s,o,a,l),this}ellipse(e,t,s,o,a,l,h,g){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,s,o,a,l,h,g),this}absellipse(e,t,s,o,a,l,h,g){const _=new q1(e,t,s,o,a,l,h,g);if(this.curves.length>0){const x=_.getPoint(0);x.equals(this.currentPoint)||this.lineTo(x.x,x.y)}this.curves.push(_);const b=_.getPoint(1);return this.currentPoint.copy(b),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class lg extends Z1{constructor(e){super(e),this.uuid=Sc(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let s=0,o=this.holes.length;s<o;s++)t[s]=this.holes[s].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,s=e.holes.length;t<s;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,s=this.holes.length;t<s;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,s=e.holes.length;t<s;t++){const o=e.holes[t];this.holes.push((new Z1).fromJSON(o))}return this}}function wH(i,e,t,s,o){let a,l;if(o===function aX(i,e,t,s){let o=0;for(let a=e,l=t-s;a<t;a+=s)o+=(i[l]-i[a])*(i[a+1]+i[l+1]),l=a;return o}(i,e,t,s)>0)for(a=e;a<t;a+=s)l=SH(a,i[a],i[a+1],l);else for(a=t-s;a>=e;a-=s)l=SH(a,i[a],i[a+1],l);return l&&K1(l,l.next)&&(XE(l),l=l.next),l}function $v(i,e){if(!i)return i;e||(e=i);let s,t=i;do{if(s=!1,t.steiner||!K1(t,t.next)&&0!==is(t.prev,t,t.next))t=t.next;else{if(XE(t),t=e=t.prev,t===t.next)break;s=!0}}while(s||t!==e);return e}function JE(i,e,t,s,o,a,l){if(!i)return;!l&&a&&function tX(i,e,t,s){let o=i;do{null===o.z&&(o.z=UL(o.x,o.y,e,t,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==i);o.prevZ.nextZ=null,o.prevZ=null,function nX(i){let e,t,s,o,a,l,h,g,_=1;do{for(t=i,i=null,a=null,l=0;t;){for(l++,s=t,h=0,e=0;e<_&&(h++,s=s.nextZ,s);e++);for(g=_;h>0||g>0&&s;)0!==h&&(0===g||!s||t.z<=s.z)?(o=t,t=t.nextZ,h--):(o=s,s=s.nextZ,g--),a?a.nextZ=o:i=o,o.prevZ=a,a=o;t=s}a.nextZ=null,_*=2}while(l>1)}(o)}(i,s,o,a);let g,_,h=i;for(;i.prev!==i.next;)if(g=i.prev,_=i.next,a?YQ(i,s,o,a):qQ(i))e.push(g.i/t),e.push(i.i/t),e.push(_.i/t),XE(i),i=_.next,h=_.next;else if((i=_)===h){l?1===l?JE(i=$Q($v(i),e,t),e,t,s,o,a,2):2===l&&ZQ(i,e,t,s,o,a):JE($v(i),e,t,s,o,a,1);break}}function qQ(i){const e=i.prev,t=i,s=i.next;if(is(e,t,s)>=0)return!1;let o=i.next.next;for(;o!==i.prev;){if(nC(e.x,e.y,t.x,t.y,s.x,s.y,o.x,o.y)&&is(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function YQ(i,e,t,s){const o=i.prev,a=i,l=i.next;if(is(o,a,l)>=0)return!1;const _=o.x>a.x?o.x>l.x?o.x:l.x:a.x>l.x?a.x:l.x,b=o.y>a.y?o.y>l.y?o.y:l.y:a.y>l.y?a.y:l.y,x=UL(o.x<a.x?o.x<l.x?o.x:l.x:a.x<l.x?a.x:l.x,o.y<a.y?o.y<l.y?o.y:l.y:a.y<l.y?a.y:l.y,e,t,s),S=UL(_,b,e,t,s);let M=i.prevZ,T=i.nextZ;for(;M&&M.z>=x&&T&&T.z<=S;){if(M!==i.prev&&M!==i.next&&nC(o.x,o.y,a.x,a.y,l.x,l.y,M.x,M.y)&&is(M.prev,M,M.next)>=0||(M=M.prevZ,T!==i.prev&&T!==i.next&&nC(o.x,o.y,a.x,a.y,l.x,l.y,T.x,T.y)&&is(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;M&&M.z>=x;){if(M!==i.prev&&M!==i.next&&nC(o.x,o.y,a.x,a.y,l.x,l.y,M.x,M.y)&&is(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;T&&T.z<=S;){if(T!==i.prev&&T!==i.next&&nC(o.x,o.y,a.x,a.y,l.x,l.y,T.x,T.y)&&is(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function $Q(i,e,t){let s=i;do{const o=s.prev,a=s.next.next;!K1(o,a)&&xH(o,s,s.next,a)&&QE(o,a)&&QE(a,o)&&(e.push(o.i/t),e.push(s.i/t),e.push(a.i/t),XE(s),XE(s.next),s=i=a),s=s.next}while(s!==i);return $v(s)}function ZQ(i,e,t,s,o,a){let l=i;do{let h=l.next.next;for(;h!==l.prev;){if(l.i!==h.i&&rX(l,h)){let g=CH(l,h);return l=$v(l,l.next),g=$v(g,g.next),JE(l,e,t,s,o,a),void JE(g,e,t,s,o,a)}h=h.next}l=l.next}while(l!==i)}function JQ(i,e){return i.x-e.x}function QQ(i,e){if(e=function XQ(i,e){let t=e;const s=i.x,o=i.y;let l,a=-1/0;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const S=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(S<=s&&S>a){if(a=S,S===s){if(o===t.y)return t;if(o===t.next.y)return t.next}l=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!l)return null;if(s===a)return l;const h=l,g=l.x,_=l.y;let x,b=1/0;t=l;do{s>=t.x&&t.x>=g&&s!==t.x&&nC(o<_?s:a,o,g,_,o<_?a:s,o,t.x,t.y)&&(x=Math.abs(o-t.y)/(s-t.x),QE(t,i)&&(x<b||x===b&&(t.x>l.x||t.x===l.x&&eX(l,t)))&&(l=t,b=x)),t=t.next}while(t!==h);return l}(i,e),e){const t=CH(e,i);$v(e,e.next),$v(t,t.next)}}function eX(i,e){return is(i.prev,i,e.prev)<0&&is(e.next,i,i.next)<0}function UL(i,e,t,s,o){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-t)*o)|i<<8))|i<<4))|i<<2))|i<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-s)*o)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function iX(i){let e=i,t=i;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==i);return t}function nC(i,e,t,s,o,a,l,h){return(o-l)*(e-h)-(i-l)*(a-h)>=0&&(i-l)*(s-h)-(t-l)*(e-h)>=0&&(t-l)*(a-h)-(o-l)*(s-h)>=0}function rX(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!function sX(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&xH(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}(i,e)&&(QE(i,e)&&QE(e,i)&&function oX(i,e){let t=i,s=!1;const o=(i.x+e.x)/2,a=(i.y+e.y)/2;do{t.y>a!=t.next.y>a&&t.next.y!==t.y&&o<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(s=!s),t=t.next}while(t!==i);return s}(i,e)&&(is(i.prev,i,e.prev)||is(i,e.prev,e))||K1(i,e)&&is(i.prev,i,i.next)>0&&is(e.prev,e,e.next)>0)}function is(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function K1(i,e){return i.x===e.x&&i.y===e.y}function xH(i,e,t,s){const o=Q1(is(i,e,t)),a=Q1(is(i,e,s)),l=Q1(is(t,s,i)),h=Q1(is(t,s,e));return!!(o!==a&&l!==h||0===o&&J1(i,t,e)||0===a&&J1(i,s,e)||0===l&&J1(t,i,s)||0===h&&J1(t,e,s))}function J1(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Q1(i){return i>0?1:i<0?-1:0}function QE(i,e){return is(i.prev,i,i.next)<0?is(i,e,i.next)>=0&&is(i,i.prev,e)>=0:is(i,e,i.prev)<0||is(i,i.next,e)<0}function CH(i,e){const t=new GL(i.i,i.x,i.y),s=new GL(e.i,e.x,e.y),o=i.next,a=e.prev;return i.next=e,e.prev=i,t.next=o,o.prev=t,s.next=t,t.prev=s,a.next=s,s.prev=a,s}function SH(i,e,t,s){const o=new GL(i,e,t);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function XE(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function GL(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class cg{static area(e){const t=e.length;let s=0;for(let o=t-1,a=0;a<t;o=a++)s+=e[o].x*e[a].y-e[a].x*e[o].y;return.5*s}static isClockWise(e){return cg.area(e)<0}static triangulateShape(e,t){const s=[],o=[],a=[];MH(e),EH(s,e);let l=e.length;t.forEach(MH);for(let g=0;g<t.length;g++)o.push(l),l+=t[g].length,EH(s,t[g]);const h=function(i,e,t=2){const s=e&&e.length,o=s?e[0]*t:i.length;let a=wH(i,0,o,t,!0);const l=[];if(!a||a.next===a.prev)return l;let h,g,_,b,x,S,M;if(s&&(a=function KQ(i,e,t,s){const o=[];let a,l,h,g,_;for(a=0,l=e.length;a<l;a++)h=e[a]*s,g=a<l-1?e[a+1]*s:i.length,_=wH(i,h,g,s,!1),_===_.next&&(_.steiner=!0),o.push(iX(_));for(o.sort(JQ),a=0;a<o.length;a++)QQ(o[a],t),t=$v(t,t.next);return t}(i,e,a,t)),i.length>80*t){h=_=i[0],g=b=i[1];for(let T=t;T<o;T+=t)x=i[T],S=i[T+1],x<h&&(h=x),S<g&&(g=S),x>_&&(_=x),S>b&&(b=S);M=Math.max(_-h,b-g),M=0!==M?1/M:0}return JE(a,l,t,h,g,M),l}(s,o);for(let g=0;g<h.length;g+=3)a.push(h.slice(g,g+3));return a}}function MH(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function EH(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class Zv extends In{constructor(e=new lg([new rt(.5,.5),new rt(-.5,.5),new rt(-.5,-.5),new rt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const s=this,o=[],a=[];for(let h=0,g=e.length;h<g;h++)l(e[h]);function l(h){const g=[],_=void 0!==t.curveSegments?t.curveSegments:12,b=void 0!==t.steps?t.steps:1;let x=void 0!==t.depth?t.depth:1,S=void 0===t.bevelEnabled||t.bevelEnabled,M=void 0!==t.bevelThickness?t.bevelThickness:.2,T=void 0!==t.bevelSize?t.bevelSize:M-.1,I=void 0!==t.bevelOffset?t.bevelOffset:0,L=void 0!==t.bevelSegments?t.bevelSegments:3;const k=t.extrudePath,R=void 0!==t.UVGenerator?t.UVGenerator:lX;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),x=t.amount);let U,j,K,ne,de,N=!1;k&&(U=k.getSpacedPoints(b),N=!0,S=!1,j=k.computeFrenetFrames(b,!1),K=new J,ne=new J,de=new J),S||(L=0,M=0,T=0,I=0);const Re=h.extractPoints(_);let xe=Re.shape;const W=Re.holes;if(!cg.isClockWise(xe)){xe=xe.reverse();for(let Xe=0,At=W.length;Xe<At;Xe++){const Ct=W[Xe];cg.isClockWise(Ct)&&(W[Xe]=Ct.reverse())}}const be=cg.triangulateShape(xe,W),De=xe;for(let Xe=0,At=W.length;Xe<At;Xe++)xe=xe.concat(W[Xe]);function Ie(Xe,At,Ct){return At||console.error("THREE.ExtrudeGeometry: vec does not exist"),At.clone().multiplyScalar(Ct).add(Xe)}const ae=xe.length,ye=be.length;function Ae(Xe,At,Ct){let Jt,Wt,On;const Ln=Xe.x-At.x,Si=Xe.y-At.y,Sr=Ct.x-Xe.x,ur=Ct.y-Xe.y,re=Ln*Ln+Si*Si;if(Math.abs(Ln*ur-Si*Sr)>Number.EPSILON){const Ke=Math.sqrt(re),Et=Math.sqrt(Sr*Sr+ur*ur),cn=At.x-Si/Ke,Ze=At.y+Ln/Ke,zt=((Ct.x-ur/Et-cn)*ur-(Ct.y+Sr/Et-Ze)*Sr)/(Ln*ur-Si*Sr);Jt=cn+Ln*zt-Xe.x,Wt=Ze+Si*zt-Xe.y;const Gt=Jt*Jt+Wt*Wt;if(Gt<=2)return new rt(Jt,Wt);On=Math.sqrt(Gt/2)}else{let Ke=!1;Ln>Number.EPSILON?Sr>Number.EPSILON&&(Ke=!0):Ln<-Number.EPSILON?Sr<-Number.EPSILON&&(Ke=!0):Math.sign(Si)===Math.sign(ur)&&(Ke=!0),Ke?(Jt=-Si,Wt=Ln,On=Math.sqrt(re)):(Jt=Ln,Wt=Si,On=Math.sqrt(re/2))}return new rt(Jt/On,Wt/On)}const ht=[];for(let Xe=0,At=De.length,Ct=At-1,Jt=Xe+1;Xe<At;Xe++,Ct++,Jt++)Ct===At&&(Ct=0),Jt===At&&(Jt=0),ht[Xe]=Ae(De[Xe],De[Ct],De[Jt]);const Le=[];let Je,mt=ht.concat();for(let Xe=0,At=W.length;Xe<At;Xe++){const Ct=W[Xe];Je=[];for(let Jt=0,Wt=Ct.length,On=Wt-1,Ln=Jt+1;Jt<Wt;Jt++,On++,Ln++)On===Wt&&(On=0),Ln===Wt&&(Ln=0),Je[Jt]=Ae(Ct[Jt],Ct[On],Ct[Ln]);Le.push(Je),mt=mt.concat(Je)}for(let Xe=0;Xe<L;Xe++){const At=Xe/L,Ct=M*Math.cos(At*Math.PI/2),Jt=T*Math.sin(At*Math.PI/2)+I;for(let Wt=0,On=De.length;Wt<On;Wt++){const Ln=Ie(De[Wt],ht[Wt],Jt);Vt(Ln.x,Ln.y,-Ct)}for(let Wt=0,On=W.length;Wt<On;Wt++){const Ln=W[Wt];Je=Le[Wt];for(let Si=0,Sr=Ln.length;Si<Sr;Si++){const ur=Ie(Ln[Si],Je[Si],Jt);Vt(ur.x,ur.y,-Ct)}}}const Yt=T+I;for(let Xe=0;Xe<ae;Xe++){const At=S?Ie(xe[Xe],mt[Xe],Yt):xe[Xe];N?(ne.copy(j.normals[0]).multiplyScalar(At.x),K.copy(j.binormals[0]).multiplyScalar(At.y),de.copy(U[0]).add(ne).add(K),Vt(de.x,de.y,de.z)):Vt(At.x,At.y,0)}for(let Xe=1;Xe<=b;Xe++)for(let At=0;At<ae;At++){const Ct=S?Ie(xe[At],mt[At],Yt):xe[At];N?(ne.copy(j.normals[Xe]).multiplyScalar(Ct.x),K.copy(j.binormals[Xe]).multiplyScalar(Ct.y),de.copy(U[Xe]).add(ne).add(K),Vt(de.x,de.y,de.z)):Vt(Ct.x,Ct.y,x/b*Xe)}for(let Xe=L-1;Xe>=0;Xe--){const At=Xe/L,Ct=M*Math.cos(At*Math.PI/2),Jt=T*Math.sin(At*Math.PI/2)+I;for(let Wt=0,On=De.length;Wt<On;Wt++){const Ln=Ie(De[Wt],ht[Wt],Jt);Vt(Ln.x,Ln.y,x+Ct)}for(let Wt=0,On=W.length;Wt<On;Wt++){const Ln=W[Wt];Je=Le[Wt];for(let Si=0,Sr=Ln.length;Si<Sr;Si++){const ur=Ie(Ln[Si],Je[Si],Jt);N?Vt(ur.x,ur.y+U[b-1].y,U[b-1].x+Ct):Vt(ur.x,ur.y,x+Ct)}}}function Ei(Xe,At){let Ct=Xe.length;for(;--Ct>=0;){const Jt=Ct;let Wt=Ct-1;Wt<0&&(Wt=Xe.length-1);for(let On=0,Ln=b+2*L;On<Ln;On++){const Si=ae*On,Sr=ae*(On+1);Ft(At+Jt+Si,At+Wt+Si,At+Wt+Sr,At+Jt+Sr)}}}function Vt(Xe,At,Ct){g.push(Xe),g.push(At),g.push(Ct)}function vn(Xe,At,Ct){kn(Xe),kn(At),kn(Ct);const Jt=o.length/3,Wt=R.generateTopUV(s,o,Jt-3,Jt-2,Jt-1);An(Wt[0]),An(Wt[1]),An(Wt[2])}function Ft(Xe,At,Ct,Jt){kn(Xe),kn(At),kn(Jt),kn(At),kn(Ct),kn(Jt);const Wt=o.length/3,On=R.generateSideWallUV(s,o,Wt-6,Wt-3,Wt-2,Wt-1);An(On[0]),An(On[1]),An(On[3]),An(On[1]),An(On[2]),An(On[3])}function kn(Xe){o.push(g[3*Xe+0]),o.push(g[3*Xe+1]),o.push(g[3*Xe+2])}function An(Xe){a.push(Xe.x),a.push(Xe.y)}(function St(){const Xe=o.length/3;if(S){let At=0,Ct=ae*At;for(let Jt=0;Jt<ye;Jt++){const Wt=be[Jt];vn(Wt[2]+Ct,Wt[1]+Ct,Wt[0]+Ct)}At=b+2*L,Ct=ae*At;for(let Jt=0;Jt<ye;Jt++){const Wt=be[Jt];vn(Wt[0]+Ct,Wt[1]+Ct,Wt[2]+Ct)}}else{for(let At=0;At<ye;At++){const Ct=be[At];vn(Ct[2],Ct[1],Ct[0])}for(let At=0;At<ye;At++){const Ct=be[At];vn(Ct[0]+ae*b,Ct[1]+ae*b,Ct[2]+ae*b)}}s.addGroup(Xe,o.length/3-Xe,0)})(),function ze(){const Xe=o.length/3;let At=0;Ei(De,At),At+=De.length;for(let Ct=0,Jt=W.length;Ct<Jt;Ct++){const Wt=W[Ct];Ei(Wt,At),At+=Wt.length}s.addGroup(Xe,o.length/3-Xe,1)}()}this.setAttribute("position",new en(o,3)),this.setAttribute("uv",new en(a,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function cX(i,e,t){if(t.shapes=[],Array.isArray(i))for(let s=0,o=i.length;s<o;s++)t.shapes.push(i[s].uuid);else t.shapes.push(i.uuid);return void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const s=[];for(let a=0,l=e.shapes.length;a<l;a++)s.push(t[e.shapes[a]]);const o=e.options.extrudePath;return void 0!==o&&(e.options.extrudePath=(new VL[o.type]).fromJSON(o)),new Zv(s,e.options)}}const lX={generateTopUV:function(i,e,t,s,o){const h=e[3*s],g=e[3*s+1],_=e[3*o],b=e[3*o+1];return[new rt(e[3*t],e[3*t+1]),new rt(h,g),new rt(_,b)]},generateSideWallUV:function(i,e,t,s,o,a){const l=e[3*t],h=e[3*t+1],g=e[3*t+2],_=e[3*s],b=e[3*s+1],x=e[3*s+2],S=e[3*o],M=e[3*o+1],T=e[3*o+2],I=e[3*a],L=e[3*a+1],k=e[3*a+2];return Math.abs(h-b)<Math.abs(l-_)?[new rt(l,1-g),new rt(_,1-x),new rt(S,1-T),new rt(I,1-k)]:[new rt(h,1-g),new rt(b,1-x),new rt(M,1-T),new rt(L,1-k)]}};class ug extends Yv{constructor(e=1,t=0){const s=(1+Math.sqrt(5))/2;super([-1,s,0,1,s,0,-1,-s,0,1,-s,0,0,-1,s,0,1,s,0,-1,-s,0,1,-s,s,0,-1,s,0,1,-s,0,-1,-s,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ug(e.radius,e.detail)}}class tD extends In{constructor(e=new lg([new rt(0,.5),new rt(-.5,-.5),new rt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const s=[],o=[],a=[],l=[];let h=0,g=0;if(!1===Array.isArray(e))_(e);else for(let b=0;b<e.length;b++)_(e[b]),this.addGroup(h,g,b),h+=g,g=0;function _(b){const x=o.length/3,S=b.extractPoints(t);let M=S.shape;const T=S.holes;!1===cg.isClockWise(M)&&(M=M.reverse());for(let L=0,k=T.length;L<k;L++){const R=T[L];!0===cg.isClockWise(R)&&(T[L]=R.reverse())}const I=cg.triangulateShape(M,T);for(let L=0,k=T.length;L<k;L++)M=M.concat(T[L]);for(let L=0,k=M.length;L<k;L++){const R=M[L];o.push(R.x,R.y,0),a.push(0,0,1),l.push(R.x,R.y)}for(let L=0,k=I.length;L<k;L++){const R=I[L];s.push(R[0]+x,R[1]+x,R[2]+x),g+=3}}this.setIndex(s),this.setAttribute("position",new en(o,3)),this.setAttribute("normal",new en(a,3)),this.setAttribute("uv",new en(l,2))}toJSON(){const e=super.toJSON();return function uX(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,s=i.length;t<s;t++)e.shapes.push(i[t].uuid);else e.shapes.push(i.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const s=[];for(let o=0,a=e.shapes.length;o<a;o++)s.push(t[e.shapes[o]]);return new tD(s,e.curveSegments)}}(class IH extends ha{constructor(e){super(),this.type="ShadowMaterial",this.color=new Ht(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;class HL extends ha{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ht(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}HL.prototype.isMeshStandardMaterial=!0;(class RH extends HL{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new rt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return da(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Ht(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ht(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ht(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}).prototype.isMeshPhysicalMaterial=!0;(class PH extends ha{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Ht(16777215),this.specular=new Ht(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class kH extends ha{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ht(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class OH extends ha{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}).prototype.isMeshNormalMaterial=!0;class zL extends ha{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}zL.prototype.isMeshLambertMaterial=!0;(class FH extends ha{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ht(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class LH extends fa{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const qr={arraySlice:function(i,e,t){return qr.isTypedArray(i)?new i.constructor(i.subarray(e,void 0!==t?t:i.length)):i.slice(e,t)},convertArray:function(i,e,t){return!i||!t&&i.constructor===e?i:"number"==typeof e.BYTES_PER_ELEMENT?new e(i):Array.prototype.slice.call(i)},isTypedArray:function(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)},getKeyframeOrder:function(i){const t=i.length,s=new Array(t);for(let o=0;o!==t;++o)s[o]=o;return s.sort(function e(o,a){return i[o]-i[a]}),s},sortedArray:function(i,e,t){const s=i.length,o=new i.constructor(s);for(let a=0,l=0;l!==s;++a){const h=t[a]*e;for(let g=0;g!==e;++g)o[l++]=i[h+g]}return o},flattenJSON:function(i,e,t,s){let o=1,a=i[0];for(;void 0!==a&&void 0===a[s];)a=i[o++];if(void 0===a)return;let l=a[s];if(void 0!==l)if(Array.isArray(l))do{l=a[s],void 0!==l&&(e.push(a.time),t.push.apply(t,l)),a=i[o++]}while(void 0!==a);else if(void 0!==l.toArray)do{l=a[s],void 0!==l&&(e.push(a.time),l.toArray(t,t.length)),a=i[o++]}while(void 0!==a);else do{l=a[s],void 0!==l&&(e.push(a.time),t.push(l)),a=i[o++]}while(void 0!==a)},subclip:function(i,e,t,s,o=30){const a=i.clone();a.name=e;const l=[];for(let g=0;g<a.tracks.length;++g){const _=a.tracks[g],b=_.getValueSize(),x=[],S=[];for(let M=0;M<_.times.length;++M){const T=_.times[M]*o;if(!(T<t||T>=s)){x.push(_.times[M]);for(let I=0;I<b;++I)S.push(_.values[M*b+I])}}0!==x.length&&(_.times=qr.convertArray(x,_.times.constructor),_.values=qr.convertArray(S,_.values.constructor),l.push(_))}a.tracks=l;let h=1/0;for(let g=0;g<a.tracks.length;++g)h>a.tracks[g].times[0]&&(h=a.tracks[g].times[0]);for(let g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*h);return a.resetDuration(),a},makeClipAdditive:function(i,e=0,t=i,s=30){s<=0&&(s=30);const o=t.tracks.length,a=e/s;for(let l=0;l<o;++l){const h=t.tracks[l],g=h.ValueTypeName;if("bool"===g||"string"===g)continue;const _=i.tracks.find(function(k){return k.name===h.name&&k.ValueTypeName===g});if(void 0===_)continue;let b=0;const x=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=x/3);let S=0;const M=_.getValueSize();_.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(S=M/3);const T=h.times.length-1;let I;if(a<=h.times[0])I=qr.arraySlice(h.values,b,x-b);else if(a>=h.times[T]){const k=T*x+b;I=qr.arraySlice(h.values,k,k+x-b)}else{const k=h.createInterpolant(),R=b,U=x-b;k.evaluate(a),I=qr.arraySlice(k.resultBuffer,R,U)}"quaternion"===g&&(new jo).fromArray(I).normalize().conjugate().toArray(I);const L=_.times.length;for(let k=0;k<L;++k){const R=k*M+S;if("quaternion"===g)jo.multiplyQuaternionsFlat(_.values,R,I,0,_.values,R);else{const U=M-2*S;for(let N=0;N<U;++N)_.values[R+N]-=I[N]}}}return i.blendMode=2501,i}};class Kv{constructor(e,t,s,o){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==o?o:new t.constructor(s),this.sampleValues=t,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let s=this._cachedIndex,o=t[s],a=t[s-1];e:{t:{let l;n:{i:if(!(e<o)){for(let h=s+2;;){if(void 0===o){if(e<a)break i;return s=t.length,this._cachedIndex=s,this.afterEnd_(s-1,e,a)}if(s===h)break;if(a=o,o=t[++s],e<o)break t}l=t.length;break n}if(e>=a)break e;{const h=t[1];e<h&&(s=2,a=h);for(let g=s-2;;){if(void 0===a)return this._cachedIndex=0,this.beforeStart_(0,e,o);if(s===g)break;if(o=a,a=t[--s-1],e>=a)break t}l=s,s=0}}for(;s<l;){const h=s+l>>>1;e<t[h]?l=h:s=h+1}if(o=t[s],a=t[s-1],void 0===a)return this._cachedIndex=0,this.beforeStart_(0,e,o);if(void 0===o)return s=t.length,this._cachedIndex=s,this.afterEnd_(s-1,a,e)}this._cachedIndex=s,this.intervalChanged_(s,a,o)}return this.interpolate_(s,a,e,o)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o;for(let l=0;l!==o;++l)t[l]=s[a+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Kv.prototype.beforeStart_=Kv.prototype.copySampleValue_,Kv.prototype.afterEnd_=Kv.prototype.copySampleValue_;class hX extends Kv{constructor(e,t,s,o){super(e,t,s,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:xx,endingEnd:xx}}intervalChanged_(e,t,s){const o=this.parameterPositions;let a=e-2,l=e+1,h=o[a],g=o[l];if(void 0===h)switch(this.getSettings_().endingStart){case Cx:a=e,h=2*t-s;break;case 2402:a=o.length-2,h=t+o[a]-o[a+1];break;default:a=e,h=s}if(void 0===g)switch(this.getSettings_().endingEnd){case Cx:l=e,g=2*s-t;break;case 2402:l=1,g=s+o[1]-o[0];break;default:l=e-1,g=t}const _=.5*(s-t),b=this.valueSize;this._weightPrev=_/(t-h),this._weightNext=_/(g-s),this._offsetPrev=a*b,this._offsetNext=l*b}interpolate_(e,t,s,o){const a=this.resultBuffer,l=this.sampleValues,h=this.valueSize,g=e*h,_=g-h,b=this._offsetPrev,x=this._offsetNext,S=this._weightPrev,M=this._weightNext,T=(s-t)/(o-t),I=T*T,L=I*T,k=-S*L+2*S*I-S*T,R=(1+S)*L+(-1.5-2*S)*I+(-.5+S)*T+1,U=(-1-M)*L+(1.5+M)*I+.5*T,N=M*L-M*I;for(let j=0;j!==h;++j)a[j]=k*l[b+j]+R*l[_+j]+U*l[g+j]+N*l[x+j];return a}}class NH extends Kv{constructor(e,t,s,o){super(e,t,s,o)}interpolate_(e,t,s,o){const a=this.resultBuffer,l=this.sampleValues,h=this.valueSize,g=e*h,_=g-h,b=(s-t)/(o-t),x=1-b;for(let S=0;S!==h;++S)a[S]=l[_+S]*x+l[g+S]*b;return a}}class fX extends Kv{constructor(e,t,s,o){super(e,t,s,o)}interpolate_(e){return this.copySampleValue_(e-1)}}class mf{constructor(e,t,s,o){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=qr.convertArray(t,this.TimeBufferType),this.values=qr.convertArray(s,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let s;if(t.toJSON!==this.toJSON)s=t.toJSON(e);else{s={name:e.name,times:qr.convertArray(e.times,Array),values:qr.convertArray(e.values,Array)};const o=e.getInterpolation();o!==e.DefaultInterpolation&&(s.interpolation=o)}return s.type=e.ValueTypeName,s}InterpolantFactoryMethodDiscrete(e){return new fX(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new NH(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new hX(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(s);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",s),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let s=0,o=t.length;s!==o;++s)t[s]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let s=0,o=t.length;s!==o;++s)t[s]*=e}return this}trim(e,t){const s=this.times,o=s.length;let a=0,l=o-1;for(;a!==o&&s[a]<e;)++a;for(;-1!==l&&s[l]>t;)--l;if(++l,0!==a||l!==o){a>=l&&(l=Math.max(l,1),a=l-1);const h=this.getValueSize();this.times=qr.arraySlice(s,a,l),this.values=qr.arraySlice(this.values,a*h,l*h)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const s=this.times,o=this.values,a=s.length;0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let h=0;h!==a;h++){const g=s[h];if("number"==typeof g&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,g),e=!1;break}if(null!==l&&l>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,g,l),e=!1;break}l=g}if(void 0!==o&&qr.isTypedArray(o))for(let h=0,g=o.length;h!==g;++h){const _=o[h];if(isNaN(_)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,_),e=!1;break}}return e}optimize(){const e=qr.arraySlice(this.times),t=qr.arraySlice(this.values),s=this.getValueSize(),o=2302===this.getInterpolation(),a=e.length-1;let l=1;for(let h=1;h<a;++h){let g=!1;const _=e[h];if(_!==e[h+1]&&(1!==h||_!==e[0]))if(o)g=!0;else{const x=h*s,S=x-s,M=x+s;for(let T=0;T!==s;++T){const I=t[x+T];if(I!==t[S+T]||I!==t[M+T]){g=!0;break}}}if(g){if(h!==l){e[l]=e[h];const x=h*s,S=l*s;for(let M=0;M!==s;++M)t[S+M]=t[x+M]}++l}}if(a>0){e[l]=e[a];for(let h=a*s,g=l*s,_=0;_!==s;++_)t[g+_]=t[h+_];++l}return l!==e.length?(this.times=qr.arraySlice(e,0,l),this.values=qr.arraySlice(t,0,l*s)):(this.times=e,this.values=t),this}clone(){const e=qr.arraySlice(this.times,0),t=qr.arraySlice(this.values,0),o=new(0,this.constructor)(this.name,e,t);return o.createInterpolant=this.createInterpolant,o}}mf.prototype.TimeBufferType=Float32Array,mf.prototype.ValueBufferType=Float32Array,mf.prototype.DefaultInterpolation=2301;class iC extends mf{}iC.prototype.ValueTypeName="bool",iC.prototype.ValueBufferType=Array,iC.prototype.DefaultInterpolation=2300,iC.prototype.InterpolantFactoryMethodLinear=void 0,iC.prototype.InterpolantFactoryMethodSmooth=void 0;class BH extends mf{}BH.prototype.ValueTypeName="color";class sR extends mf{}sR.prototype.ValueTypeName="number";class pX extends Kv{constructor(e,t,s,o){super(e,t,s,o)}interpolate_(e,t,s,o){const a=this.resultBuffer,l=this.sampleValues,h=this.valueSize,g=(s-t)/(o-t);let _=e*h;for(let b=_+h;_!==b;_+=4)jo.slerpFlat(a,0,l,_-h,l,_,g);return a}}class iD extends mf{InterpolantFactoryMethodLinear(e){return new pX(this.times,this.values,this.getValueSize(),e)}}iD.prototype.ValueTypeName="quaternion",iD.prototype.DefaultInterpolation=2301,iD.prototype.InterpolantFactoryMethodSmooth=void 0;class rC extends mf{}rC.prototype.ValueTypeName="string",rC.prototype.ValueBufferType=Array,rC.prototype.DefaultInterpolation=2300,rC.prototype.InterpolantFactoryMethodLinear=void 0,rC.prototype.InterpolantFactoryMethodSmooth=void 0;class oR extends mf{}oR.prototype.ValueTypeName="vector";class aR{constructor(e,t=-1,s,o=2500){this.name=e,this.tracks=s,this.duration=t,this.blendMode=o,this.uuid=Sc(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],s=e.tracks,o=1/(e.fps||1);for(let l=0,h=s.length;l!==h;++l)t.push(mX(s[l]).scale(o));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],s=e.tracks,o={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,l=s.length;a!==l;++a)t.push(mf.toJSON(s[a]));return o}static CreateFromMorphTargetSequence(e,t,s,o){const a=t.length,l=[];for(let h=0;h<a;h++){let g=[],_=[];g.push((h+a-1)%a,h,(h+1)%a),_.push(0,1,0);const b=qr.getKeyframeOrder(g);g=qr.sortedArray(g,1,b),_=qr.sortedArray(_,1,b),!o&&0===g[0]&&(g.push(a),_.push(_[0])),l.push(new sR(".morphTargetInfluences["+t[h].name+"]",g,_).scale(1/s))}return new this(e,-1,l)}static findByName(e,t){let s=e;if(!Array.isArray(e)){const o=e;s=o.geometry&&o.geometry.animations||o.animations}for(let o=0;o<s.length;o++)if(s[o].name===t)return s[o];return null}static CreateClipsFromMorphTargetSequences(e,t,s){const o={},a=/^([\w-]*?)([\d]+)$/;for(let h=0,g=e.length;h<g;h++){const _=e[h],b=_.name.match(a);if(b&&b.length>1){const x=b[1];let S=o[x];S||(o[x]=S=[]),S.push(_)}}const l=[];for(const h in o)l.push(this.CreateFromMorphTargetSequence(h,o[h],t,s));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const s=function(x,S,M,T,I){if(0!==M.length){const L=[],k=[];qr.flattenJSON(M,L,k,T),0!==L.length&&I.push(new x(S,L,k))}},o=[],a=e.name||"default",l=e.fps||30,h=e.blendMode;let g=e.length||-1;const _=e.hierarchy||[];for(let x=0;x<_.length;x++){const S=_[x].keys;if(S&&0!==S.length)if(S[0].morphTargets){const M={};let T;for(T=0;T<S.length;T++)if(S[T].morphTargets)for(let I=0;I<S[T].morphTargets.length;I++)M[S[T].morphTargets[I]]=-1;for(const I in M){const L=[],k=[];for(let R=0;R!==S[T].morphTargets.length;++R){const U=S[T];L.push(U.time),k.push(U.morphTarget===I?1:0)}o.push(new sR(".morphTargetInfluence["+I+"]",L,k))}g=M.length*(l||1)}else{const M=".bones["+t[x].name+"]";s(oR,M+".position",S,"pos",o),s(iD,M+".quaternion",S,"rot",o),s(oR,M+".scale",S,"scl",o)}}return 0===o.length?null:new this(a,g,o,h)}resetDuration(){let t=0;for(let s=0,o=this.tracks.length;s!==o;++s){const a=this.tracks[s];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function mX(i){if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function gX(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return sR;case"vector":case"vector2":case"vector3":case"vector4":return oR;case"color":return BH;case"quaternion":return iD;case"bool":case"boolean":return iC;case"string":return rC}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(i.type);if(void 0===i.times){const t=[],s=[];qr.flattenJSON(i.keys,t,s,"value"),i.times=t,i.values=s}return void 0!==e.parse?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const sC={enabled:!1,files:{},add:function(i,e){!1!==this.enabled&&(this.files[i]=e)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};const vX=new class VH{constructor(e,t,s){const o=this;let g,a=!1,l=0,h=0;const _=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=s,this.itemStart=function(b){h++,!1===a&&void 0!==o.onStart&&o.onStart(b,l,h),a=!0},this.itemEnd=function(b){l++,void 0!==o.onProgress&&o.onProgress(b,l,h),l===h&&(a=!1,void 0!==o.onLoad&&o.onLoad())},this.itemError=function(b){void 0!==o.onError&&o.onError(b)},this.resolveURL=function(b){return g?g(b):b},this.setURLModifier=function(b){return g=b,this},this.addHandler=function(b,x){return _.push(b,x),this},this.removeHandler=function(b){const x=_.indexOf(b);return-1!==x&&_.splice(x,2),this},this.getHandler=function(b){for(let x=0,S=_.length;x<S;x+=2){const M=_[x],T=_[x+1];if(M.global&&(M.lastIndex=0),M.test(b))return T}return null}}};class Jv{constructor(e){this.manager=void 0!==e?e:vX,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const s=this;return new Promise(function(o,a){s.load(e,o,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const dg={};class hg extends Jv{constructor(e){super(e)}load(e,t,s,o){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const a=sC.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(void 0!==dg[e])return void dg[e].push({onLoad:t,onProgress:s,onError:o});dg[e]=[],dg[e].push({onLoad:t,onProgress:s,onError:o});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),h=this.mimeType,g=this.responseType;fetch(l).then(_=>{if(200===_.status||0===_.status){if(0===_.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===_.body.getReader)return _;const b=dg[e],x=_.body.getReader(),S=_.headers.get("Content-Length"),M=S?parseInt(S):0,T=0!==M;let I=0;const L=new ReadableStream({start(k){!function R(){x.read().then(({done:U,value:N})=>{if(U)k.close();else{I+=N.byteLength;const j=new ProgressEvent("progress",{lengthComputable:T,loaded:I,total:M});for(let K=0,ne=b.length;K<ne;K++){const de=b[K];de.onProgress&&de.onProgress(j)}k.enqueue(N),R()}})}()}});return new Response(L)}throw Error(`fetch for "${_.url}" responded with ${_.status}: ${_.statusText}`)}).then(_=>{switch(g){case"arraybuffer":return _.arrayBuffer();case"blob":return _.blob();case"document":return _.text().then(b=>(new DOMParser).parseFromString(b,h));case"json":return _.json();default:if(void 0===h)return _.text();{const x=/charset="?([^;"\s]*)"?/i.exec(h),S=x&&x[1]?x[1].toLowerCase():void 0,M=new TextDecoder(S);return _.arrayBuffer().then(T=>M.decode(T))}}}).then(_=>{sC.add(e,_);const b=dg[e];delete dg[e];for(let x=0,S=b.length;x<S;x++){const M=b[x];M.onLoad&&M.onLoad(_)}}).catch(_=>{const b=dg[e];if(void 0===b)throw this.manager.itemError(e),_;delete dg[e];for(let x=0,S=b.length;x<S;x++){const M=b[x];M.onError&&M.onError(_)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class lR extends Jv{constructor(e){super(e)}load(e,t,s,o){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=sC.get(e);if(void 0!==l)return a.manager.itemStart(e),setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0),l;const h=FE("img");function g(){b(),sC.add(e,this),t&&t(this),a.manager.itemEnd(e)}function _(x){b(),o&&o(x),a.manager.itemError(e),a.manager.itemEnd(e)}function b(){h.removeEventListener("load",g,!1),h.removeEventListener("error",_,!1)}return h.addEventListener("load",g,!1),h.addEventListener("error",_,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(h.crossOrigin=this.crossOrigin),a.manager.itemStart(e),h.src=e,h}}class _X extends Jv{constructor(e){super(e)}load(e,t,s,o){const a=new VE,l=new lR(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let h=0;function g(_){l.load(e[_],function(b){a.images[_]=b,h++,6===h&&(a.needsUpdate=!0,t&&t(a))},void 0,o)}for(let _=0;_<e.length;++_)g(_);return a}}class bX extends Jv{constructor(e){super(e)}load(e,t,s,o){const a=new Eo,l=new lR(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(h){a.image=h,a.needsUpdate=!0,void 0!==t&&t(a)},s,o),a}}class vf extends Gi{constructor(e,t=1){super(),this.type="Light",this.color=new Ht(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}vf.prototype.isLight=!0;(class UH extends vf{constructor(e,t,s){super(e,s),this.type="HemisphereLight",this.position.copy(Gi.DefaultUp),this.updateMatrix(),this.groundColor=new Ht(t)}copy(e){return vf.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const GH=new sn,HH=new J,zH=new J;class jL{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new rt(512,512),this.map=null,this.mapPass=null,this.matrix=new sn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new S1,this._frameExtents=new rt(1,1),this._viewportCount=1,this._viewports=[new cr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,s=this.matrix;HH.setFromMatrixPosition(e.matrixWorld),t.position.copy(HH),zH.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(zH),t.updateMatrixWorld(),GH.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(GH),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(t.projectionMatrix),s.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class jH extends jL{constructor(){super(new qo(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,s=2*kE*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(s!==t.fov||o!==t.aspect||a!==t.far)&&(t.fov=s,t.aspect=o,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}jH.prototype.isSpotLightShadow=!0;(class WH extends vf{constructor(e,t,s=0,o=Math.PI/3,a=0,l=1){super(e,t),this.type="SpotLight",this.position.copy(Gi.DefaultUp),this.updateMatrix(),this.target=new Gi,this.distance=s,this.angle=o,this.penumbra=a,this.decay=l,this.shadow=new jH}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const qH=new sn,rD=new J,WL=new J;class YH extends jL{constructor(){super(new qo(90,1,.5,500)),this._frameExtents=new rt(4,2),this._viewportCount=6,this._viewports=[new cr(2,1,1,1),new cr(0,1,1,1),new cr(3,1,1,1),new cr(1,1,1,1),new cr(3,0,1,1),new cr(1,0,1,1)],this._cubeDirections=[new J(1,0,0),new J(-1,0,0),new J(0,0,1),new J(0,0,-1),new J(0,1,0),new J(0,-1,0)],this._cubeUps=[new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,0,1),new J(0,0,-1)]}updateMatrices(e,t=0){const s=this.camera,o=this.matrix,a=e.distance||s.far;a!==s.far&&(s.far=a,s.updateProjectionMatrix()),rD.setFromMatrixPosition(e.matrixWorld),s.position.copy(rD),WL.copy(s.position),WL.add(this._cubeDirections[t]),s.up.copy(this._cubeUps[t]),s.lookAt(WL),s.updateMatrixWorld(),o.makeTranslation(-rD.x,-rD.y,-rD.z),qH.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qH)}}YH.prototype.isPointLightShadow=!0;class qL extends vf{constructor(e,t,s=0,o=1){super(e,t),this.type="PointLight",this.distance=s,this.decay=o,this.shadow=new YH}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}qL.prototype.isPointLight=!0;class $H extends jL{constructor(){super(new M1(-5,5,5,-5,.5,500))}}$H.prototype.isDirectionalLightShadow=!0;class YL extends vf{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(Gi.DefaultUp),this.updateMatrix(),this.target=new Gi,this.shadow=new $H}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}YL.prototype.isDirectionalLight=!0;(class ZH extends vf{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class KH extends vf{constructor(e,t,s=10,o=10){super(e,t),this.type="RectAreaLight",this.width=s,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class JH{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new J)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const s=e.x,o=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*o),t.addScaledVector(l[2],.488603*a),t.addScaledVector(l[3],.488603*s),t.addScaledVector(l[4],s*o*1.092548),t.addScaledVector(l[5],o*a*1.092548),t.addScaledVector(l[6],.315392*(3*a*a-1)),t.addScaledVector(l[7],s*a*1.092548),t.addScaledVector(l[8],.546274*(s*s-o*o)),t}getIrradianceAt(e,t){const s=e.x,o=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],1.023328*o),t.addScaledVector(l[2],1.023328*a),t.addScaledVector(l[3],1.023328*s),t.addScaledVector(l[4],.858086*s*o),t.addScaledVector(l[5],.858086*o*a),t.addScaledVector(l[6],.743125*a*a-.247708),t.addScaledVector(l[7],.858086*s*a),t.addScaledVector(l[8],.429043*(s*s-o*o)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let s=0;s<9;s++)this.coefficients[s].addScaledVector(e.coefficients[s],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let s=0;s<9;s++)this.coefficients[s].lerp(e.coefficients[s],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const s=this.coefficients;for(let o=0;o<9;o++)s[o].fromArray(e,t+3*o);return this}toArray(e=[],t=0){const s=this.coefficients;for(let o=0;o<9;o++)s[o].toArray(e,t+3*o);return e}static getBasisAt(e,t){const s=e.x,o=e.y,a=e.z;t[0]=.282095,t[1]=.488603*o,t[2]=.488603*a,t[3]=.488603*s,t[4]=1.092548*s*o,t[5]=1.092548*o*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*s*a,t[8]=.546274*(s*s-o*o)}}JH.prototype.isSphericalHarmonics3=!0;class cR extends vf{constructor(e=new JH,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}cR.prototype.isLightProbe=!0;let uR;(class QH extends In{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0,class SX extends Jv{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,s,o){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=sC.get(e);if(void 0!==l)return a.manager.itemStart(e),setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0),l;const h={};h.credentials="anonymous"===this.crossOrigin?"same-origin":"include",h.headers=this.requestHeader,fetch(e,h).then(function(g){return g.blob()}).then(function(g){return createImageBitmap(g,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(g){sC.add(e,g),t&&t(g),a.manager.itemEnd(e)}).catch(function(g){o&&o(g),a.manager.itemError(e),a.manager.itemEnd(e)}),a.manager.itemStart(e)}}.prototype.isImageBitmapLoader=!0;class MX extends Jv{constructor(e){super(e)}load(e,t,s,o){const a=this,l=new hg(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(h){try{const g=h.slice(0);(void 0===uR&&(uR=new(window.AudioContext||window.webkitAudioContext)),uR).decodeAudioData(g,function(b){t(b)})}catch(g){o?o(g):console.error(g),a.manager.itemError(e)}},s,o)}}(class EX extends cR{constructor(e,t,s=1){super(void 0,s);const o=(new Ht).set(e),a=(new Ht).set(t),l=new J(o.r,o.g,o.b),h=new J(a.r,a.g,a.b),g=Math.sqrt(Math.PI),_=g*Math.sqrt(.75);this.sh.coefficients[0].copy(l).add(h).multiplyScalar(g),this.sh.coefficients[1].copy(l).sub(h).multiplyScalar(_)}}).prototype.isHemisphereLightProbe=!0,class DX extends cR{constructor(e,t=1){super(void 0,t);const s=(new Ht).set(e);this.sh.coefficients[0].set(s.r,s.g,s.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class rz{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=sz(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=sz();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function sz(){return("undefined"==typeof performance?Date:performance).now()}class PX{constructor(e,t,s){let o,a,l;switch(this.binding=e,this.valueSize=s,t){case"quaternion":o=this._slerp,a=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*s),this._workIndex=5;break;case"string":case"bool":o=this._select,a=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(5*s);break;default:o=this._lerp,a=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*s)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=a,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const s=this.buffer,o=this.valueSize,a=e*o+o;let l=this.cumulativeWeight;if(0===l){for(let h=0;h!==o;++h)s[a+h]=s[h];l=t}else l+=t,this._mixBufferRegion(s,a,0,t/l,o);this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,s=this.valueSize,o=s*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,o,0,e,s),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,s=this.buffer,o=e*t+t,a=this.cumulativeWeight,l=this.cumulativeWeightAdditive,h=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1&&this._mixBufferRegion(s,o,t*this._origIndex,1-a,t),l>0&&this._mixBufferRegionAdditive(s,o,this._addIndex*t,1,t);for(let g=t,_=t+t;g!==_;++g)if(s[g]!==s[g+t]){h.setValue(s,o);break}}saveOriginalState(){const t=this.buffer,s=this.valueSize,o=s*this._origIndex;this.binding.getValue(t,o);for(let a=s,l=o;a!==l;++a)t[a]=t[o+a%s];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let s=e;s<t;s++)this.buffer[s]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let s=0;s<this.valueSize;s++)this.buffer[t+s]=this.buffer[e+s]}_select(e,t,s,o,a){if(o>=.5)for(let l=0;l!==a;++l)e[t+l]=e[s+l]}_slerp(e,t,s,o){jo.slerpFlat(e,t,e,t,e,s,o)}_slerpAdditive(e,t,s,o,a){const l=this._workIndex*a;jo.multiplyQuaternionsFlat(e,l,e,t,e,s),jo.slerpFlat(e,t,e,t,e,l,o)}_lerp(e,t,s,o,a){const l=1-o;for(let h=0;h!==a;++h){const g=t+h;e[g]=e[g]*l+e[s+h]*o}}_lerpAdditive(e,t,s,o,a){for(let l=0;l!==a;++l){const h=t+l;e[h]=e[h]+e[s+l]*o}}}const ZL="\\[\\]\\.:\\/",kX=new RegExp("["+ZL+"]","g"),KL="[^"+ZL+"]",OX="[^"+ZL.replace("\\.","")+"]",FX=/((?:WC+[\/:])*)/.source.replace("WC",KL),LX=/(WCOD+)?/.source.replace("WCOD",OX),NX=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",KL),BX=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",KL),VX=new RegExp("^"+FX+LX+NX+BX+"$"),UX=["material","materials","bones"];class GX{constructor(e,t,s){const o=s||Or.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,o)}getValue(e,t){this.bind();const o=this._bindings[this._targetGroup.nCachedObjects_];void 0!==o&&o.getValue(e,t)}setValue(e,t){const s=this._bindings;for(let o=this._targetGroup.nCachedObjects_,a=s.length;o!==a;++o)s[o].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,s=e.length;t!==s;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,s=e.length;t!==s;++t)e[t].unbind()}}let Or=(()=>{class i{constructor(t,s,o){this.path=s,this.parsedPath=o||i.parseTrackName(s),this.node=i.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,s,o){return t&&t.isAnimationObjectGroup?new i.Composite(t,s,o):new i(t,s,o)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(kX,"")}static parseTrackName(t){const s=VX.exec(t);if(!s)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const o={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},a=o.nodeName&&o.nodeName.lastIndexOf(".");if(void 0!==a&&-1!==a){const l=o.nodeName.substring(a+1);-1!==UX.indexOf(l)&&(o.nodeName=o.nodeName.substring(0,a),o.objectName=l)}if(null===o.propertyName||0===o.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return o}static findNode(t,s){if(!s||""===s||"."===s||-1===s||s===t.name||s===t.uuid)return t;if(t.skeleton){const o=t.skeleton.getBoneByName(s);if(void 0!==o)return o}if(t.children){const o=function(l){for(let h=0;h<l.length;h++){const g=l[h];if(g.name===s||g.uuid===s)return g;const _=o(g.children);if(_)return _}return null},a=o(t.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,s){t[s]=this.targetObject[this.propertyName]}_getValue_array(t,s){const o=this.resolvedProperty;for(let a=0,l=o.length;a!==l;++a)t[s++]=o[a]}_getValue_arrayElement(t,s){t[s]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,s){this.resolvedProperty.toArray(t,s)}_setValue_direct(t,s){this.targetObject[this.propertyName]=t[s]}_setValue_direct_setNeedsUpdate(t,s){this.targetObject[this.propertyName]=t[s],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,s){this.targetObject[this.propertyName]=t[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,s){const o=this.resolvedProperty;for(let a=0,l=o.length;a!==l;++a)o[a]=t[s++]}_setValue_array_setNeedsUpdate(t,s){const o=this.resolvedProperty;for(let a=0,l=o.length;a!==l;++a)o[a]=t[s++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,s){const o=this.resolvedProperty;for(let a=0,l=o.length;a!==l;++a)o[a]=t[s++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,s){this.resolvedProperty[this.propertyIndex]=t[s]}_setValue_arrayElement_setNeedsUpdate(t,s){this.resolvedProperty[this.propertyIndex]=t[s],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,s){this.resolvedProperty[this.propertyIndex]=t[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,s){this.resolvedProperty.fromArray(t,s)}_setValue_fromArray_setNeedsUpdate(t,s){this.resolvedProperty.fromArray(t,s),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,s){this.resolvedProperty.fromArray(t,s),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,s){this.bind(),this.getValue(t,s)}_setValue_unbound(t,s){this.bind(),this.setValue(t,s)}bind(){let t=this.node;const s=this.parsedPath,o=s.objectName,a=s.propertyName;let l=s.propertyIndex;if(t||(t=i.findNode(this.rootNode,s.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(o){let b=s.objectIndex;switch(o){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let x=0;x<t.length;x++)if(t[x].name===b){b=x;break}break;default:if(void 0===t[o])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[o]}if(void 0!==b){if(void 0===t[b])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[b]}}const h=t[a];if(void 0===h)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s.nodeName+"."+a+" but it wasn't found.",t);let g=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?g=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(g=this.Versioning.MatrixWorldNeedsUpdate);let _=this.BindingType.Direct;if(void 0!==l){if("morphTargetInfluences"===a){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[l]&&(l=t.morphTargetDictionary[l])}_=this.BindingType.ArrayElement,this.resolvedProperty=h,this.propertyIndex=l}else void 0!==h.fromArray&&void 0!==h.toArray?(_=this.BindingType.HasFromToArray,this.resolvedProperty=h):Array.isArray(h)?(_=this.BindingType.EntireArray,this.resolvedProperty=h):this.propertyName=a;this.getValue=this.GetterByBindingType[_],this.setValue=this.SetterByBindingTypeAndVersioning[_][g]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=GX,i})();Or.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Or.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Or.prototype.GetterByBindingType=[Or.prototype._getValue_direct,Or.prototype._getValue_array,Or.prototype._getValue_arrayElement,Or.prototype._getValue_toArray],Or.prototype.SetterByBindingTypeAndVersioning=[[Or.prototype._setValue_direct,Or.prototype._setValue_direct_setNeedsUpdate,Or.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Or.prototype._setValue_array,Or.prototype._setValue_array_setNeedsUpdate,Or.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Or.prototype._setValue_arrayElement,Or.prototype._setValue_arrayElement_setNeedsUpdate,Or.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Or.prototype._setValue_fromArray,Or.prototype._setValue_fromArray_setNeedsUpdate,Or.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class zX{constructor(e,t,s=null,o=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=s,this.blendMode=o;const a=t.tracks,l=a.length,h=new Array(l),g={endingStart:xx,endingEnd:xx};for(let _=0;_!==l;++_){const b=a[_].createInterpolant(null);h[_]=b,b.settings=g}this._interpolantSettings=g,this._interpolants=h,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,s){if(e.fadeOut(t),this.fadeIn(t),s){const o=this._clip.duration,a=e._clip.duration,h=o/a;e.warp(1,a/o,t),this.warp(h,1,t)}return this}crossFadeTo(e,t,s){return e.crossFadeFrom(this,t,s)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,s){const o=this._mixer,a=o.time,l=this.timeScale;let h=this._timeScaleInterpolant;null===h&&(h=o._lendControlInterpolant(),this._timeScaleInterpolant=h);const g=h.parameterPositions,_=h.sampleValues;return g[0]=a,g[1]=a+s,_[0]=e/l,_[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,s,o){if(!this.enabled)return void this._updateWeight(e);const a=this._startTime;if(null!==a){const g=(e-a)*s;if(g<0||0===s)return;this._startTime=null,t=s*g}t*=this._updateTimeScale(e);const l=this._updateTime(t),h=this._updateWeight(e);if(h>0){const g=this._interpolants,_=this._propertyBindings;if(2501===this.blendMode)for(let b=0,x=g.length;b!==x;++b)g[b].evaluate(l),_[b].accumulateAdditive(h);else for(let b=0,x=g.length;b!==x;++b)g[b].evaluate(l),_[b].accumulate(o,h)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const s=this._weightInterpolant;if(null!==s){const o=s.evaluate(e)[0];t*=o,e>s.parameterPositions[1]&&(this.stopFading(),0===o&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const s=this._timeScaleInterpolant;null!==s&&(t*=s.evaluate(e)[0],e>s.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,s=this.loop;let o=this.time+e,a=this._loopCount;const l=2202===s;if(0===e)return-1===a?o:l&&1==(1&a)?t-o:o;if(2200===s){-1===a&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=t)o=t;else{if(!(o<0)){this.time=o;break e}o=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===a&&(e>=0?(a=0,this._setEndings(!0,0===this.repetitions,l)):this._setEndings(0===this.repetitions,!0,l)),o>=t||o<0){const h=Math.floor(o/t);o-=t*h,a+=Math.abs(h);const g=this.repetitions-a;if(g<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=e>0?t:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===g){const _=e<0;this._setEndings(_,!_,l)}else this._setEndings(!1,!1,l);this._loopCount=a,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=o;if(l&&1==(1&a))return t-o}return o}_setEndings(e,t,s){const o=this._interpolantSettings;s?(o.endingStart=Cx,o.endingEnd=Cx):(o.endingStart=e?this.zeroSlopeAtStart?Cx:xx:2402,o.endingEnd=t?this.zeroSlopeAtEnd?Cx:xx:2402)}_scheduleFading(e,t,s){const o=this._mixer,a=o.time;let l=this._weightInterpolant;null===l&&(l=o._lendControlInterpolant(),this._weightInterpolant=l);const h=l.parameterPositions,g=l.sampleValues;return h[0]=a,g[0]=t,h[1]=a+e,g[1]=s,this}}(class jX extends Ov{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const s=e._localRoot||this._root,o=e._clip.tracks,a=o.length,l=e._propertyBindings,h=e._interpolants,g=s.uuid,_=this._bindingsByRootAndName;let b=_[g];void 0===b&&(b={},_[g]=b);for(let x=0;x!==a;++x){const S=o[x],M=S.name;let T=b[M];if(void 0!==T)++T.referenceCount,l[x]=T;else{if(T=l[x],void 0!==T){null===T._cacheIndex&&(++T.referenceCount,this._addInactiveBinding(T,g,M));continue}T=new PX(Or.create(s,M,t&&t._propertyBindings[x].binding.parsedPath),S.ValueTypeName,S.getValueSize()),++T.referenceCount,this._addInactiveBinding(T,g,M),l[x]=T}h[x].resultBuffer=T.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const s=(e._localRoot||this._root).uuid,o=e._clip.uuid,a=this._actionsByClip[o];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,o,s)}const t=e._propertyBindings;for(let s=0,o=t.length;s!==o;++s){const a=t[s];0==a.useCount++&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let s=0,o=t.length;s!==o;++s){const a=t[s];0==--a.useCount&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,s){const o=this._actions,a=this._actionsByClip;let l=a[t];if(void 0===l)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=l;else{const h=l.knownActions;e._byClipCacheIndex=h.length,h.push(e)}e._cacheIndex=o.length,o.push(e),l.actionByRoot[s]=e}_removeInactiveAction(e){const t=this._actions,s=t[t.length-1],o=e._cacheIndex;s._cacheIndex=o,t[o]=s,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,l=this._actionsByClip,h=l[a],g=h.knownActions,_=g[g.length-1],b=e._byClipCacheIndex;_._byClipCacheIndex=b,g[b]=_,g.pop(),e._byClipCacheIndex=null,delete h.actionByRoot[(e._localRoot||this._root).uuid],0===g.length&&delete l[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let s=0,o=t.length;s!==o;++s){const a=t[s];0==--a.referenceCount&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,s=e._cacheIndex,o=this._nActiveActions++,a=t[o];e._cacheIndex=o,t[o]=e,a._cacheIndex=s,t[s]=a}_takeBackAction(e){const t=this._actions,s=e._cacheIndex,o=--this._nActiveActions,a=t[o];e._cacheIndex=o,t[o]=e,a._cacheIndex=s,t[s]=a}_addInactiveBinding(e,t,s){const o=this._bindingsByRootAndName,a=this._bindings;let l=o[t];void 0===l&&(l={},o[t]=l),l[s]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,s=e.binding,o=s.rootNode.uuid,a=s.path,l=this._bindingsByRootAndName,h=l[o],g=t[t.length-1],_=e._cacheIndex;g._cacheIndex=_,t[_]=g,t.pop(),delete h[a],0===Object.keys(h).length&&delete l[o]}_lendBinding(e){const t=this._bindings,s=e._cacheIndex,o=this._nActiveBindings++,a=t[o];e._cacheIndex=o,t[o]=e,a._cacheIndex=s,t[s]=a}_takeBackBinding(e){const t=this._bindings,s=e._cacheIndex,o=--this._nActiveBindings,a=t[o];e._cacheIndex=o,t[o]=e,a._cacheIndex=s,t[s]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let s=e[t];return void 0===s&&(s=new NH(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),s.__cacheIndex=t,e[t]=s),s}_takeBackControlInterpolant(e){const t=this._controlInterpolants,s=e.__cacheIndex,o=--this._nActiveControlInterpolants,a=t[o];e.__cacheIndex=o,t[o]=e,a.__cacheIndex=s,t[s]=a}clipAction(e,t,s){const o=t||this._root,a=o.uuid;let l="string"==typeof e?aR.findByName(o,e):e;const h=null!==l?l.uuid:e,g=this._actionsByClip[h];let _=null;if(void 0===s&&(s=null!==l?l.blendMode:2500),void 0!==g){const x=g.actionByRoot[a];if(void 0!==x&&x.blendMode===s)return x;_=g.knownActions[0],null===l&&(l=_._clip)}if(null===l)return null;const b=new zX(this,l,t,s);return this._bindAction(b,_),this._addInactiveAction(b,h,a),b}existingAction(e,t){const s=t||this._root,o=s.uuid,a="string"==typeof e?aR.findByName(s,e):e,h=this._actionsByClip[a?a.uuid:e];return void 0!==h&&h.actionByRoot[o]||null}stopAllAction(){const e=this._actions;for(let s=this._nActiveActions-1;s>=0;--s)e[s].stop();return this}update(e){const t=this._actions,s=this._nActiveActions,o=this.time+=e*=this.timeScale,a=Math.sign(e),l=this._accuIndex^=1;for(let _=0;_!==s;++_)t[_]._update(o,e,a,l);const h=this._bindings,g=this._nActiveBindings;for(let _=0;_!==g;++_)h[_].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,s=e.uuid,o=this._actionsByClip,a=o[s];if(void 0!==a){const l=a.knownActions;for(let h=0,g=l.length;h!==g;++h){const _=l[h];this._deactivateAction(_);const b=_._cacheIndex,x=t[t.length-1];_._cacheIndex=null,_._byClipCacheIndex=null,x._cacheIndex=b,t[b]=x,t.pop(),this._removeInactiveBindingsForAction(_)}delete o[s]}}uncacheRoot(e){const t=e.uuid,s=this._actionsByClip;for(const l in s){const g=s[l].actionByRoot[t];void 0!==g&&(this._deactivateAction(g),this._removeInactiveAction(g))}const a=this._bindingsByRootAndName[t];if(void 0!==a)for(const l in a){const h=a[l];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(e,t){const s=this.existingAction(e,t);null!==s&&(this._deactivateAction(s),this._removeInactiveAction(s))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class JL{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new JL(void 0===this.value.clone?this.value:this.value.clone())}}(class WX extends Yx{constructor(e,t,s=1){super(e,t),this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;const cz=new rt;class sD{constructor(e=new rt(1/0,1/0),t=new rt(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,s=e.length;t<s;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const s=cz.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return cz.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}sD.prototype.isBox2=!0;const Qv=new J,hR=new sn,XL=new sn;function hz(i){const e=[];i&&i.isBone&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,hz(i.children[t]));return e}const _z=new Float32Array(1);new Int32Array(_z.buffer),Hu.create=function(i,e){return console.log("THREE.Curve.create() has been deprecated"),i.prototype=Object.create(Hu.prototype),i.prototype.constructor=i,i.prototype.getPoint=e,i},Z1.prototype.fromPoints=function(i){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(i)},class KX extends qv{constructor(e=10,t=10,s=4473924,o=8947848){s=new Ht(s),o=new Ht(o);const a=t/2,l=e/t,h=e/2,g=[],_=[];for(let S=0,M=0,T=-h;S<=t;S++,T+=l){g.push(-h,0,T,h,0,T),g.push(T,0,-h,T,0,h);const I=S===a?s:o;I.toArray(_,M),M+=3,I.toArray(_,M),M+=3,I.toArray(_,M),M+=3,I.toArray(_,M),M+=3}const b=new In;b.setAttribute("position",new en(g,3)),b.setAttribute("color",new en(_,3)),super(b,new fa({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class $X extends qv{constructor(e){const t=hz(e),s=new In,o=[],a=[],l=new Ht(0,0,1),h=new Ht(0,1,0);for(let _=0;_<t.length;_++){const b=t[_];b.parent&&b.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),a.push(l.r,l.g,l.b),a.push(h.r,h.g,h.b))}s.setAttribute("position",new en(o,3)),s.setAttribute("color",new en(a,3)),super(s,new fa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,s=this.geometry,o=s.getAttribute("position");XL.copy(this.root.matrixWorld).invert();for(let a=0,l=0;a<t.length;a++){const h=t[a];h.parent&&h.parent.isBone&&(hR.multiplyMatrices(XL,h.matrixWorld),Qv.setFromMatrixPosition(hR),o.setXYZ(l,Qv.x,Qv.y,Qv.z),hR.multiplyMatrices(XL,h.parent.matrixWorld),Qv.setFromMatrixPosition(hR),o.setXYZ(l+1,Qv.x,Qv.y,Qv.z),l+=2)}s.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Jv.prototype.extractUrlBase=function(i){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class $L{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let s=0,o=e.length;s<o;s++)t+=String.fromCharCode(e[s]);try{return decodeURIComponent(escape(t))}catch(s){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}.extractUrlBase(i)},Jv.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},sD.prototype.center=function(i){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(i)},sD.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},sD.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},sD.prototype.size=function(i){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(i)},Uu.prototype.center=function(i){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(i)},Uu.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Uu.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},Uu.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)},Uu.prototype.size=function(i){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(i)},A0.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},S1.prototype.setFromMatrix=function(i){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(i)},zo.prototype.flattenToArrayOffset=function(i,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,e)},zo.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)},zo.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},zo.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)},zo.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},zo.prototype.getInverse=function(i){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()},sn.prototype.extractPosition=function(i){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(i)},sn.prototype.flattenToArrayOffset=function(i,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,e)},sn.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new J).setFromMatrixColumn(this,3)},sn.prototype.setRotationFromQuaternion=function(i){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(i)},sn.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},sn.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},sn.prototype.multiplyVector4=function(i){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},sn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},sn.prototype.rotateAxis=function(i){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),i.transformDirection(this)},sn.prototype.crossVector=function(i){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},sn.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},sn.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},sn.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},sn.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},sn.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},sn.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},sn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},sn.prototype.makeFrustum=function(i,e,t,s,o,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(i,e,s,t,o,a)},sn.prototype.getInverse=function(i){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()},ag.prototype.isIntersectionLine=function(i){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(i)},jo.prototype.multiplyVector3=function(i){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),i.applyQuaternion(this)},jo.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},T0.prototype.isIntersectionBox=function(i){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},T0.prototype.isIntersectionPlane=function(i){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(i)},T0.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)},uo.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},uo.prototype.barycoordFromPoint=function(i,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(i,e)},uo.prototype.midpoint=function(i){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(i)},uo.prototypenormal=function(i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(i)},uo.prototype.plane=function(i){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(i)},uo.barycoordFromPoint=function(i,e,t,s,o){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),uo.getBarycoord(i,e,t,s,o)},uo.normal=function(i,e,t,s){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),uo.getNormal(i,e,t,s)},lg.prototype.extractAllPoints=function(i){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(i)},lg.prototype.extrude=function(i){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Zv(this,i)},lg.prototype.makeGeometry=function(i){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new tD(this,i)},rt.prototype.fromAttribute=function(i,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)},rt.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)},rt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},J.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},J.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},J.prototype.getPositionFromMatrix=function(i){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(i)},J.prototype.getScaleFromMatrix=function(i){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(i)},J.prototype.getColumnFromMatrix=function(i,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,i)},J.prototype.applyProjection=function(i){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(i)},J.prototype.fromAttribute=function(i,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)},J.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)},J.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},cr.prototype.fromAttribute=function(i,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)},cr.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Gi.prototype.getChildByName=function(i){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(i)},Gi.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Gi.prototype.translate=function(i,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,i)},Gi.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Gi.prototype.applyMatrix=function(i){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)},Object.defineProperties(Gi.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(i){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=i}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Do.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Do.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),ML.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},qo.prototype.setLens=function(i,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(i)},Object.defineProperties(vf.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(i){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=i}},shadowCameraLeft:{set:function(i){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=i}},shadowCameraRight:{set:function(i){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=i}},shadowCameraTop:{set:function(i){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=i}},shadowCameraBottom:{set:function(i){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=i}},shadowCameraNear:{set:function(i){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=i}},shadowCameraFar:{set:function(i){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=i}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(i){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=i}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(i){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=i}},shadowMapHeight:{set:function(i){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=i}}}),Object.defineProperties(gr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===PE},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(PE)}}}),gr.prototype.setDynamic=function(i){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===i?PE:RE),this},gr.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},gr.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},In.prototype.addIndex=function(i){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(i)},In.prototype.addAttribute=function(i,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===i?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(i,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(i,new gr(arguments[1],arguments[2])))},In.prototype.addDrawCall=function(i,e,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(i,e)},In.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},In.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},In.prototype.removeAttribute=function(i){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(i)},In.prototype.applyMatrix=function(i){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)},Object.defineProperties(In.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Yx.prototype.setDynamic=function(i){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===i?PE:RE),this},Yx.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Zv.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Zv.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Zv.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},I1.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},JL.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(ha.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ht}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(i){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(i){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=i}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(zv.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(i){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=i}}}),tr.prototype.clearTarget=function(i,e,t,s){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(i),this.clear(e,t,s)},tr.prototype.animate=function(i){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(i)},tr.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},tr.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},tr.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},tr.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},tr.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},tr.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},tr.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},tr.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},tr.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},tr.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},tr.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},tr.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},tr.prototype.enableScissorTest=function(i){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(i)},tr.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},tr.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},tr.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},tr.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},tr.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},tr.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},tr.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},tr.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},tr.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},tr.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(tr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(i){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=i}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(i){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=i}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(i){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===i?Wr:kv}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(qG.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Vu.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(i){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=i}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(i){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=i}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(i){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=i}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(i){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=i}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(i){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=i}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(i){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=i}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(i){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=i}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(i){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=i}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(i){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=i}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(i){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=i}}}),class TX extends Gi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(i){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new MX).load(i,function(s){e.setBuffer(s)}),this},cL.prototype.updateCubeMap=function(i,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(i,e)},cL.prototype.clear=function(i,e,t,s){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(i,e,t,s)},S0.crossOrigin=void 0,S0.loadTexture=function(i,e,t,s){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const o=new bX;o.setCrossOrigin(this.crossOrigin);const a=o.load(i,t,void 0,s);return e&&(a.mapping=e),a},S0.loadTextureCube=function(i,e,t,s){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const o=new _X;o.setCrossOrigin(this.crossOrigin);const a=o.load(i,t,void 0,s);return e&&(a.mapping=e),a},S0.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},S0.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"137"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="137");const eee={type:"change"};class tee extends Ov{constructor(e,t){super(),void 0===t&&(console.warn('THREE.FlyControls: The second parameter "domElement" is now mandatory.'),t=document),this.object=e,this.domElement=t,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;const s=this,o=1e-6,a=new jo,l=new J;this.tmpQuaternion=new jo,this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new J(0,0,0),this.rotationVector=new J(0,0,0),this.keydown=function(S){if(!S.altKey){switch(S.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(S){switch(S.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.mousedown=function(S){if(this.dragToLook)this.mouseStatus++;else{switch(S.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.mousemove=function(S){if(!this.dragToLook||this.mouseStatus>0){const M=this.getContainerDimensions(),T=M.size[0]/2,I=M.size[1]/2;this.moveState.yawLeft=-(S.pageX-M.offset[0]-T)/T,this.moveState.pitchDown=(S.pageY-M.offset[1]-I)/I,this.updateRotationVector()}},this.mouseup=function(S){if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(S.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=function(S){const M=S*s.movementSpeed,T=S*s.rollSpeed;s.object.translateX(s.moveVector.x*M),s.object.translateY(s.moveVector.y*M),s.object.translateZ(s.moveVector.z*M),s.tmpQuaternion.set(s.rotationVector.x*T,s.rotationVector.y*T,s.rotationVector.z*T,1).normalize(),s.object.quaternion.multiply(s.tmpQuaternion),(l.distanceToSquared(s.object.position)>o||8*(1-a.dot(s.object.quaternion))>o)&&(s.dispatchEvent(eee),a.copy(s.object.quaternion),l.copy(s.object.position))},this.updateMovementVector=function(){const S=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-S+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",yz),this.domElement.removeEventListener("mousedown",g),this.domElement.removeEventListener("mousemove",h),this.domElement.removeEventListener("mouseup",_),window.removeEventListener("keydown",b),window.removeEventListener("keyup",x)};const h=this.mousemove.bind(this),g=this.mousedown.bind(this),_=this.mouseup.bind(this),b=this.keydown.bind(this),x=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",yz),this.domElement.addEventListener("mousemove",h),this.domElement.addEventListener("mousedown",g),this.domElement.addEventListener("mouseup",_),window.addEventListener("keydown",b),window.addEventListener("keyup",x),this.updateMovementVector(),this.updateRotationVector()}}function yz(i){i.preventDefault()}class nee{constructor(){this.currentStatus=""}animate(){let e=window.lod;requestAnimationFrame(e.animate),e.render()}render(){let e=window.lod;e.controls.update(e.clock.getDelta()),e.renderer.render(e.scene,e.camera)}}const iee=["lodContainer"];let vR=(()=>{class i{constructor(t){this.themeService=t}set status(t){if(this.lod)switch(this.lod.currentStatus=t,t){case"SUCCESS":this.lod.pointLight.color.setHex("#00FF00".replace("#","0x"));break;case"INVALID":this.lod.pointLight.color.setHex("#ff5722".replace("#","0x"));break;default:this.lod.currentStatus="",this.handleLodTheme(this.lod.theme)}}ngOnInit(){}ngAfterViewInit(){this.initLod(),window.lod=this.lod,this.lod.animate(),this.container.nativeElement.addEventListener("mouseleave",t=>{this.lod.controls.rollSpeed=0}),this.container.nativeElement.addEventListener("mouseenter",t=>{this.lod.controls.rollSpeed=Math.PI/24}),this.themeService.update.subscribe(t=>{this.handleLodTheme(t)})}ngOnDestroy(){window.cancelAnimationFrame(window.requestAnimationId),delete window.lod}initLod(){this.lod=new nee,this.lod.clock=new rz,this.lod.camera=new qo(45,window.innerWidth/window.innerHeight,1,15e3),this.lod.camera.position.z=1e3,this.lod.scene=new I1,this.lod.scene.fog=new jE(0,1,15e3),this.lod.pointLight=new qL(240116),this.lod.pointLight.position.set(0,0,0),this.lod.scene.add(this.lod.pointLight);const t=new YL(16777215);t.position.set(0,0,1).normalize(),this.lod.scene.add(t);const s=[[new ug(100,16),50],[new ug(100,8),300],[new ug(100,4),1e3],[new ug(100,2),2e3],[new ug(100,1),8e3]];this.lod.material=new zL({color:16777215,wireframe:!0});for(let o=0;o<1e3;o++){const a=new QG;for(let l=0;l<s.length;l++){const h=new Do(s[l][0],this.lod.material);h.scale.set(1.5,1.5,1.5),h.updateMatrix(),h.matrixAutoUpdate=!1,a.addLevel(h,s[l][1])}a.position.x=1e4*(.5-Math.random()),a.position.y=7500*(.5-Math.random()),a.position.z=1e4*(.5-Math.random()),a.updateMatrix(),a.matrixAutoUpdate=!1,this.lod.scene.add(a)}this.lod.renderer=new tr({antialias:!0}),this.lod.renderer.setPixelRatio(window.devicePixelRatio),this.lod.renderer.setSize(window.innerWidth,window.innerHeight),this.container.nativeElement.appendChild(this.lod.renderer.domElement),this.lod.controls=new tee(this.lod.camera,this.lod.renderer.domElement),this.lod.controls.movementSpeed=1e3,window.addEventListener("resize",this.onWindowResize)}onWindowResize(){this.lod.camera.aspect=window.innerWidth/window.innerHeight,this.lod.camera.updateProjectionMatrix(),this.lod.renderer.setSize(window.innerWidth,window.innerHeight)}handleLodTheme(t){switch(t){case"light-theme":""==this.lod.currentStatus&&this.lod.pointLight.color.setHex(q2.replace("#","0x")),this.lod.material.color.set(11120568),this.lod.renderer.setClearColor(16777215);break;case"dark-theme":""==this.lod.currentStatus&&this.lod.pointLight.color.setHex(Y2.replace("#","0x")),this.lod.material.color.set(16777215),this.lod.renderer.setClearColor(0)}this.lod.theme=t}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(eE))},i.\u0275cmp=u.Xpm({type:i,selectors:[["gl-lod"]],viewQuery:function(t,s){if(1&t&&u.Gf(iee,5),2&t){let o;u.iGM(o=u.CRH())&&(s.container=o.first)}},inputs:{status:"status"},decls:2,vars:0,consts:[["lodContainer",""]],template:function(t,s){1&t&&u._UZ(0,"div",null,0)},styles:[""]}),i})();function ree(i,e){1&i&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&i&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"authentication.validEmail")," "))}function see(i,e){1&i&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&i&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"input.required")," "))}function oee(i,e){1&i&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&i&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"input.required")," "))}function aee(i,e){if(1&i&&(u.TgZ(0,"div",23),u.TgZ(1,"p"),u._uU(2),u.qZA(),u.qZA()),2&i){const t=u.oxw();u.xp6(2),u.Oqu(t.alert)}}let lee=(()=>{class i{constructor(t,s,o){this.authService=t,this.translationService=s,this.router=o,this.alert=null,this.loginForm=new w0({email:new ff("",[hf.required]),password:new ff("",[hf.required])})}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}ngOnInit(){this.loginForm.valueChanges.subscribe(t=>{for(let s in this.loginForm.controls){let o=this.loginForm.get(s);if(o.invalid&&(o.dirty||o.touched))return void(this.loginStatus="INVALID")}this.loginStatus="VALID"})}login(){return(0,q.mG)(this,void 0,void 0,function*(){(yield this.authService.login(this.email.value,this.password.value))?(this.loginStatus="SUCCESS",this.router.navigate([""])):(this.alert=this.translationService.get("authentication.invalidCredentials"),this.loginStatus="INVALID",this.translationService.update.subscribe(s=>{this.alert&&(this.alert=this.translationService.get("authentication.invalidCredentials"))}))})}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u0),u.Y36(Wd),u.Y36(d))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-login"]],decls:50,vars:36,consts:[[2,"z-index","1"],[1,"d-flex"],[1,"w-100","w-md-60","pt-100","pl-100","pr-100"],[1,"d-flex","justify-content-between"],["src","/assets/images/logo.svg","alt","",1,"logo-image"],[1,"d-flex","flex-column","justify-content-center"],[1,"text-right"],["id","align-title"],["mat-button","","routerLink","/register",1,"my-theme"],[1,"mt-5","mb-5"],[1,"d-flex","flex-column",3,"formGroup"],["color","accent"],["matInput","","autocomplete","","type","email","placeholder","Ex. pat@example.com",3,"formControl"],[4,"ngIf"],["color","accent",1,"mt-4"],["matInput","","type","password","autocomplete","",3,"formControl"],["class","text-danger",4,"ngIf"],[1,"d-flex","justify-content-between","mt-4"],[1,"w-25","mb-5","ml-auto"],[1,"loginButton",3,"label","disabled","click"],["mat-button","","routerLink","/account/recover",1,"my-theme"],[1,"container-half-no-header","sm-hidden","position-fixed"],[3,"status"],[1,"text-danger"]],template:function(t,s){1&t&&(u.TgZ(0,"mat-sidenav-container",0),u.TgZ(1,"mat-sidenav-content"),u.TgZ(2,"article",1),u.TgZ(3,"section",2),u.TgZ(4,"div",3),u._UZ(5,"img",4),u.TgZ(6,"div",5),u.TgZ(7,"div",6),u.TgZ(8,"h1",7),u._uU(9),u.ALo(10,"translate"),u.qZA(),u.qZA(),u.TgZ(11,"a",8),u._uU(12),u.ALo(13,"translate"),u.ALo(14,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(15,"div"),u.TgZ(16,"h1",9),u._uU(17),u.ALo(18,"translate"),u.qZA(),u.TgZ(19,"form",10),u.TgZ(20,"mat-form-field",11),u.TgZ(21,"mat-label"),u.TgZ(22,"mat-icon"),u._uU(23,"lock"),u.qZA(),u._uU(24),u.ALo(25,"translate"),u.qZA(),u._UZ(26,"input",12),u.YNc(27,ree,3,3,"mat-error",13),u.YNc(28,see,3,3,"mat-error",13),u.qZA(),u.TgZ(29,"mat-form-field",14),u.TgZ(30,"mat-label"),u.TgZ(31,"mat-icon"),u._uU(32,"key"),u.qZA(),u._uU(33),u.ALo(34,"translate"),u.qZA(),u._UZ(35,"input",15),u.YNc(36,oee,3,3,"mat-error",13),u.qZA(),u.YNc(37,aee,3,1,"div",16),u.TgZ(38,"div",17),u._UZ(39,"theme-switch"),u.TgZ(40,"div",18),u.TgZ(41,"main-button",19),u.NdJ("click",function(){return s.login()}),u.ALo(42,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(43,"div"),u.TgZ(44,"a",20),u._uU(45),u.ALo(46,"translate"),u.ALo(47,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(48,"section",21),u._UZ(49,"gl-lod",22),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(9),u.Oqu(u.lcZ(10,18,"shared.title")),u.xp6(3),u.AsE(" ",u.lcZ(13,20,"authentication.noAccount")," ",u.lcZ(14,22,"signpost.signup")," "),u.xp6(5),u.Oqu(u.lcZ(18,24,"authentication.login")),u.xp6(2),u.Q6J("formGroup",s.loginForm),u.xp6(5),u.hij(" ",u.lcZ(25,26,"authentication.email"),""),u.xp6(2),u.Q6J("formControl",s.email),u.xp6(1),u.Q6J("ngIf",s.loginForm.hasError("email")&&!s.loginForm.hasError("required")),u.xp6(1),u.Q6J("ngIf",s.email.invalid&&(s.email.dirty||s.email.touched)&&s.email.errors.required),u.xp6(5),u.hij(" ",u.lcZ(34,28,"authentication.password"),""),u.xp6(2),u.Q6J("formControl",s.password),u.xp6(1),u.Q6J("ngIf",s.password.invalid&&(s.password.dirty||s.password.touched)&&s.password.errors.required),u.xp6(1),u.Q6J("ngIf",s.alert),u.xp6(4),u.s9C("label",u.lcZ(42,30,"authentication.login")),u.Q6J("disabled",0==s.loginForm.valid),u.xp6(4),u.AsE(" ",u.lcZ(46,32,"authentication.recover")," ",u.lcZ(47,34,"authentication.password")," "),u.xp6(4),u.Q6J("status",s.loginStatus))},directives:[_0,xv,aE,y,SE,_E,Av,WI,hx,PI,qI,Sv,Dv,ux,dr,jI,zI,EE,vR],pipes:[c0],styles:["#align-title[_ngcontent-%COMP%]{display:inline-block;margin-left:auto;margin-top:auto}.mle[_ngcontent-%COMP%]{position:absolute;bottom:120px;text-align:center;width:100%;color:#fff;font-weight:700;font-size:60px}.logo-image[_ngcontent-%COMP%]{width:15%}"]}),i})(),cee=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-deck-overview"]],decls:2,vars:0,template:function(t,s){1&t&&(u.TgZ(0,"p"),u._uU(1,"deck-overview works!"),u.qZA())},styles:[""]}),i})();class tN{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class oD extends tN{constructor(e,t,s,o){super(),this.component=e,this.viewContainerRef=t,this.injector=s,this.componentFactoryResolver=o}}class _R extends tN{constructor(e,t,s){super(),this.templateRef=e,this.viewContainerRef=t,this.context=s}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class uee extends tN{constructor(e){super(),this.element=e instanceof u.SBq?e.nativeElement:e}}class yR{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof oD?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof _R?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof uee?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class dee extends yR{constructor(e,t,s,o,a){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=s,this._defaultInjector=o,this.attachDomPortal=l=>{const h=l.element,g=this._document.createComment("dom-portal");h.parentNode.insertBefore(g,h),this.outletElement.appendChild(h),this._attachedPortal=l,super.setDisposeFn(()=>{g.parentNode&&g.parentNode.replaceChild(h,g)})},this._document=a}attachComponentPortal(e){const s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let o;return e.viewContainerRef?(o=e.viewContainerRef.createComponent(s,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>o.destroy())):(o=s.create(e.injector||this._defaultInjector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(o)),this._attachedPortal=e,o}attachTemplatePortal(e){let t=e.viewContainerRef,s=t.createEmbeddedView(e.templateRef,e.context);return s.rootNodes.forEach(o=>this.outletElement.appendChild(o)),s.detectChanges(),this.setDisposeFn(()=>{let o=t.indexOf(s);-1!==o&&t.remove(o)}),this._attachedPortal=e,s}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let aD=(()=>{class i extends yR{constructor(t,s,o){super(),this._componentFactoryResolver=t,this._viewContainerRef=s,this._isInitialized=!1,this.attached=new u.vpe,this.attachDomPortal=a=>{const l=a.element,h=this._document.createComment("dom-portal");a.setAttachedHost(this),l.parentNode.insertBefore(h,l),this._getRootNode().appendChild(l),this._attachedPortal=a,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(l,h)})},this._document=o}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const s=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,a=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),l=s.createComponent(a,s.length,t.injector||s.injector);return s!==this._viewContainerRef&&this._getRootNode().appendChild(l.hostView.rootNodes[0]),super.setDisposeFn(()=>l.destroy()),this._attachedPortal=t,this._attachedRef=l,this.attached.emit(l),l}attachTemplatePortal(t){t.setAttachedHost(this);const s=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=s,this.attached.emit(s),s}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u._Vd),u.Y36(u.s_b),u.Y36(_e))},i.\u0275dir=u.lG2({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[u.qOj]}),i})(),lD=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})();const bz=J2();class hee{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ao(-this._previousScrollPosition.left),e.style.top=ao(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,s=e.style,o=this._document.body.style,a=s.scrollBehavior||"",l=o.scrollBehavior||"";this._isEnabled=!1,s.left=this._previousHTMLStyles.left,s.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),bz&&(s.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),bz&&(s.scrollBehavior=a,o.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,s=this._viewportRuler.getViewportSize();return t.scrollHeight>s.height||t.scrollWidth>s.width}}class fee{constructor(e,t,s,o){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=s,this._config=o,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class wz{enable(){}disable(){}attach(){}}function nN(i,e){return e.some(t=>i.bottom<t.top||i.top>t.bottom||i.right<t.left||i.left>t.right)}function xz(i,e){return e.some(t=>i.top<t.top||i.bottom>t.bottom||i.left<t.left||i.right>t.right)}class pee{constructor(e,t,s,o){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=s,this._config=o,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:s,height:o}=this._viewportRuler.getViewportSize();nN(t,[{width:s,height:o,bottom:o,right:s,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let gee=(()=>{class i{constructor(t,s,o,a){this._scrollDispatcher=t,this._viewportRuler=s,this._ngZone=o,this.noop=()=>new wz,this.close=l=>new fee(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new hee(this._viewportRuler,this._document),this.reposition=l=>new pee(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=a}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(MI),u.LFG(fE),u.LFG(u.R0b),u.LFG(_e))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class iN{constructor(e){if(this.scrollStrategy=new wz,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const s of t)void 0!==e[s]&&(this[s]=e[s])}}}class mee{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class vee{constructor(e,t,s,o,a,l,h,g,_){this._portalOutlet=e,this._host=t,this._pane=s,this._config=o,this._ngZone=a,this._keyboardDispatcher=l,this._document=h,this._location=g,this._outsideClickDispatcher=_,this._backdropElement=null,this._backdropClick=new yt.x,this._attachments=new yt.x,this._detachments=new yt.x,this._locationChanges=fs.w0.EMPTY,this._backdropClickHandler=b=>this._backdropClick.next(b),this._keydownEvents=new yt.x,this._outsidePointerEvents=new yt.x,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Oi.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ao(this._config.width),e.height=ao(this._config.height),e.minWidth=ao(this._config.minWidth),e.minHeight=ao(this._config.minHeight),e.maxWidth=ao(this._config.maxWidth),e.maxHeight=ao(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(!e)return;let t;const s=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",s),this._disposeBackdrop(e)),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",s)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(s,500))}_toggleClasses(e,t,s){const o=tI(t||[]).filter(a=>!!a);o.length&&(s?e.classList.add(...o):e.classList.remove(...o))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(er((0,mc.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.remove(),this._backdropElement===e&&(this._backdropElement=null))}}let rN=(()=>{class i{constructor(t,s){this._platform=s,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||cO()){const o=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let a=0;a<o.length;a++)o[a].remove()}const s=this._document.createElement("div");s.classList.add(t),cO()?s.setAttribute("platform","test"):this._platform.isBrowser||s.setAttribute("platform","server"),this._document.body.appendChild(s),this._containerElement=s}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_e),u.LFG(Mo))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Cz="cdk-overlay-connected-position-bounding-box",_ee=/([A-Za-z%]+)$/;class yee{constructor(e,t,s,o,a){this._viewportRuler=t,this._document=s,this._platform=o,this._overlayContainer=a,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new yt.x,this._resizeSubscription=fs.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(Cz),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,s=this._viewportRect,o=this._containerRect,a=[];let l;for(let h of this._preferredPositions){let g=this._getOriginPoint(e,o,h),_=this._getOverlayPoint(g,t,h),b=this._getOverlayFit(_,t,s,h);if(b.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,g);this._canFitWithFlexibleDimensions(b,_,s)?a.push({position:h,origin:g,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(g,h)}):(!l||l.overlayFit.visibleArea<b.visibleArea)&&(l={overlayFit:b,overlayPoint:_,originPoint:g,position:h,overlayRect:t})}if(a.length){let h=null,g=-1;for(const _ of a){const b=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);b>g&&(g=b,h=_)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(l.position,l.originPoint);this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&V0(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Cz),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,s){let o,a;if("center"==s.originX)o=e.left+e.width/2;else{const l=this._isRtl()?e.right:e.left,h=this._isRtl()?e.left:e.right;o="start"==s.originX?l:h}return t.left<0&&(o-=t.left),a="center"==s.originY?e.top+e.height/2:"top"==s.originY?e.top:e.bottom,t.top<0&&(a-=t.top),{x:o,y:a}}_getOverlayPoint(e,t,s){let o,a;return o="center"==s.overlayX?-t.width/2:"start"===s.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,a="center"==s.overlayY?-t.height/2:"top"==s.overlayY?0:-t.height,{x:e.x+o,y:e.y+a}}_getOverlayFit(e,t,s,o){const a=Mz(t);let{x:l,y:h}=e,g=this._getOffset(o,"x"),_=this._getOffset(o,"y");g&&(l+=g),_&&(h+=_);let S=0-h,M=h+a.height-s.height,T=this._subtractOverflows(a.width,0-l,l+a.width-s.width),I=this._subtractOverflows(a.height,S,M),L=T*I;return{visibleArea:L,isCompletelyWithinViewport:a.width*a.height===L,fitsInViewportVertically:I===a.height,fitsInViewportHorizontally:T==a.width}}_canFitWithFlexibleDimensions(e,t,s){if(this._hasFlexibleDimensions){const o=s.bottom-t.y,a=s.right-t.x,l=Sz(this._overlayRef.getConfig().minHeight),h=Sz(this._overlayRef.getConfig().minWidth),_=e.fitsInViewportHorizontally||null!=h&&h<=a;return(e.fitsInViewportVertically||null!=l&&l<=o)&&_}return!1}_pushOverlayOnScreen(e,t,s){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const o=Mz(t),a=this._viewportRect,l=Math.max(e.x+o.width-a.width,0),h=Math.max(e.y+o.height-a.height,0),g=Math.max(a.top-s.top-e.y,0),_=Math.max(a.left-s.left-e.x,0);let b=0,x=0;return b=o.width<=a.width?_||-l:e.x<this._viewportMargin?a.left-s.left-e.x:0,x=o.height<=a.height?g||-h:e.y<this._viewportMargin?a.top-s.top-e.y:0,this._previousPushAmount={x:b,y:x},{x:e.x+b,y:e.y+x}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const s=this._getScrollVisibility(),o=new mee(e,s);this._positionChanges.next(o)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let s,o=e.overlayY;s="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let a=0;a<t.length;a++)t[a].style.transformOrigin=`${s} ${o}`}_calculateBoundingBoxRect(e,t){const s=this._viewportRect,o=this._isRtl();let a,l,h,b,x,S;if("top"===t.overlayY)l=e.y,a=s.height-l+this._viewportMargin;else if("bottom"===t.overlayY)h=s.height-e.y+2*this._viewportMargin,a=s.height-h+this._viewportMargin;else{const M=Math.min(s.bottom-e.y+s.top,e.y),T=this._lastBoundingBoxSize.height;a=2*M,l=e.y-M,a>T&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.y-T/2)}if("end"===t.overlayX&&!o||"start"===t.overlayX&&o)S=s.width-e.x+this._viewportMargin,b=e.x-this._viewportMargin;else if("start"===t.overlayX&&!o||"end"===t.overlayX&&o)x=e.x,b=s.right-e.x;else{const M=Math.min(s.right-e.x+s.left,e.x),T=this._lastBoundingBoxSize.width;b=2*M,x=e.x-M,b>T&&!this._isInitialRender&&!this._growAfterOpen&&(x=e.x-T/2)}return{top:l,left:x,bottom:h,right:S,width:b,height:a}}_setBoundingBoxStyles(e,t){const s=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(s.height=Math.min(s.height,this._lastBoundingBoxSize.height),s.width=Math.min(s.width,this._lastBoundingBoxSize.width));const o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{const a=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;o.height=ao(s.height),o.top=ao(s.top),o.bottom=ao(s.bottom),o.width=ao(s.width),o.left=ao(s.left),o.right=ao(s.right),o.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",o.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",a&&(o.maxHeight=ao(a)),l&&(o.maxWidth=ao(l))}this._lastBoundingBoxSize=s,V0(this._boundingBox.style,o)}_resetBoundingBoxStyles(){V0(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){V0(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const s={},o=this._hasExactPosition(),a=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(o){const b=this._viewportRuler.getViewportScrollPosition();V0(s,this._getExactOverlayY(t,e,b)),V0(s,this._getExactOverlayX(t,e,b))}else s.position="static";let h="",g=this._getOffset(t,"x"),_=this._getOffset(t,"y");g&&(h+=`translateX(${g}px) `),_&&(h+=`translateY(${_}px)`),s.transform=h.trim(),l.maxHeight&&(o?s.maxHeight=ao(l.maxHeight):a&&(s.maxHeight="")),l.maxWidth&&(o?s.maxWidth=ao(l.maxWidth):a&&(s.maxWidth="")),V0(this._pane.style,s)}_getExactOverlayY(e,t,s){let o={top:"",bottom:""},a=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,s)),"bottom"===e.overlayY?o.bottom=this._document.documentElement.clientHeight-(a.y+this._overlayRect.height)+"px":o.top=ao(a.y),o}_getExactOverlayX(e,t,s){let l,o={left:"",right:""},a=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,s)),l=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===l?o.right=this._document.documentElement.clientWidth-(a.x+this._overlayRect.width)+"px":o.left=ao(a.x),o}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),s=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:xz(e,s),isOriginOutsideView:nN(e,s),isOverlayClipped:xz(t,s),isOverlayOutsideView:nN(t,s)}}_subtractOverflows(e,...t){return t.reduce((s,o)=>s-Math.max(o,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,s=this._viewportRuler.getViewportScrollPosition();return{top:s.top+this._viewportMargin,left:s.left+this._viewportMargin,right:s.left+e-this._viewportMargin,bottom:s.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&tI(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof u.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,s=e.height||0;return{top:e.y,bottom:e.y+s,left:e.x,right:e.x+t,height:s,width:t}}}function V0(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function Sz(i){if("number"!=typeof i&&null!=i){const[e,t]=i.split(_ee);return t&&"px"!==t?null:parseFloat(e)}return i||null}function Mz(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const Ez="cdk-global-overlay-wrapper";class bee{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Ez),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,s=this._overlayRef.getConfig(),{width:o,height:a,maxWidth:l,maxHeight:h}=s,g=!("100%"!==o&&"100vw"!==o||l&&"100%"!==l&&"100vw"!==l),_=!("100%"!==a&&"100vh"!==a||h&&"100%"!==h&&"100vh"!==h);e.position=this._cssPosition,e.marginLeft=g?"0":this._leftOffset,e.marginTop=_?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,g?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,s=t.style;t.classList.remove(Ez),s.justifyContent=s.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let wee=(()=>{class i{constructor(t,s,o,a){this._viewportRuler=t,this._document=s,this._platform=o,this._overlayContainer=a}global(){return new bee}flexibleConnectedTo(t){return new yee(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(fE),u.LFG(_e),u.LFG(Mo),u.LFG(rN))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Dz=(()=>{class i{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const s=this._attachedOverlays.indexOf(t);s>-1&&this._attachedOverlays.splice(s,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_e))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),xee=(()=>{class i extends Dz{constructor(t){super(t),this._keydownListener=s=>{const o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){o[a]._keydownEvents.next(s);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_e))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Cee=(()=>{class i extends Dz{constructor(t,s){super(t),this._platform=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=qd(o)},this._clickListener=o=>{const a=qd(o),l="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const h=this._attachedOverlays.slice();for(let g=h.length-1;g>-1;g--){const _=h[g];if(!(_._outsidePointerEvents.observers.length<1)&&_.hasAttached()){if(_.overlayElement.contains(a)||_.overlayElement.contains(l))break;_._outsidePointerEvents.next(o)}}}}add(t){if(super.add(t),!this._isAttached){const s=this._document.body;s.addEventListener("pointerdown",this._pointerDownListener,!0),s.addEventListener("click",this._clickListener,!0),s.addEventListener("auxclick",this._clickListener,!0),s.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=s.style.cursor,s.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_e),u.LFG(Mo))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),See=0,_f=(()=>{class i{constructor(t,s,o,a,l,h,g,_,b,x,S){this.scrollStrategies=t,this._overlayContainer=s,this._componentFactoryResolver=o,this._positionBuilder=a,this._keyboardDispatcher=l,this._injector=h,this._ngZone=g,this._document=_,this._directionality=b,this._location=x,this._outsideClickDispatcher=S}create(t){const s=this._createHostElement(),o=this._createPaneElement(s),a=this._createPortalOutlet(o),l=new iN(t);return l.direction=l.direction||this._directionality.value,new vee(a,s,o,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const s=this._document.createElement("div");return s.id="cdk-overlay-"+See++,s.classList.add("cdk-overlay-pane"),t.appendChild(s),s}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(u.z2F)),new dee(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(gee),u.LFG(rN),u.LFG(u._Vd),u.LFG(wee),u.LFG(xee),u.LFG(u.zs3),u.LFG(u.R0b),u.LFG(_e),u.LFG(Jp),u.LFG(xt),u.LFG(Cee))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const Dee={provide:new u.OlP("cdk-connected-overlay-scroll-strategy"),deps:[_f],useFactory:function Eee(i){return()=>i.scrollStrategies.reposition()}};let oC=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[_f,Dee],imports:[[tx,lD,ZO],ZO]}),i})();function Aee(i,e){}class sN{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const Tee={dialogContainer:Ol("dialogContainer",[oo("void, exit",Bn({opacity:0,transform:"scale(0.7)"})),oo("enter",Bn({transform:"none"})),es("* => enter",ms("150ms cubic-bezier(0, 0, 0.2, 1)",Bn({transform:"none",opacity:1}))),es("* => void, * => exit",ms("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Bn({opacity:0})))])};let Iee=(()=>{class i extends yR{constructor(t,s,o,a,l,h,g,_){super(),this._elementRef=t,this._focusTrapFactory=s,this._changeDetectorRef=o,this._config=l,this._interactivityChecker=h,this._ngZone=g,this._focusMonitor=_,this._animationStateChanged=new u.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=b=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(b)),this._ariaLabelledBy=l.ariaLabelledBy||null,this._document=a}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,s){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{t.addEventListener("blur",()=>t.removeAttribute("tabindex")),t.addEventListener("mousedown",()=>t.removeAttribute("tabindex"))})),t.focus(s)}_focusByCssSelector(t,s){let o=this._elementRef.nativeElement.querySelector(t);o&&this._forceFocus(o,s)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(s=>{s||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const s=lO(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=lO())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,s=lO();return t===s||t.contains(s)}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.SBq),u.Y36(l3),u.Y36(u.sBO),u.Y36(_e,8),u.Y36(sN),u.Y36(hO),u.Y36(u.R0b),u.Y36(sx))},i.\u0275dir=u.lG2({type:i,viewQuery:function(t,s){if(1&t&&u.Gf(aD,7),2&t){let o;u.iGM(o=u.CRH())&&(s._portalOutlet=o.first)}},features:[u.qOj]}),i})(),Ree=(()=>{class i extends Iee{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:s}){"enter"===t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:s})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:s}))}_onAnimationStart({toState:t,totalTime:s}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:s}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:s})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return i.\u0275fac=function(){let e;return function(s){return(e||(e=u.n5z(i)))(s||i)}}(),i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,s){1&t&&u.WFA("@dialogContainer.start",function(a){return s._onAnimationStart(a)})("@dialogContainer.done",function(a){return s._onAnimationDone(a)}),2&t&&(u.Ikx("id",s._id),u.uIk("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledBy)("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),u.d8E("@dialogContainer",s._state))},features:[u.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,s){1&t&&u.YNc(0,Aee,0,0,"ng-template",0)},directives:[aD],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Tee.dialogContainer]}}),i})(),Pee=0;class oN{constructor(e,t,s="mat-dialog-"+Pee++){this._overlayRef=e,this._containerInstance=t,this.id=s,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new yt.x,this._afterClosed=new yt.x,this._beforeClosed=new yt.x,this._state=0,t._id=s,t._animationStateChanged.pipe(Dn(o=>"opened"===o.state),(0,Oi.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Dn(o=>"closed"===o.state),(0,Oi.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(Dn(o=>27===o.keyCode&&!this.disableClose&&!QT(o))).subscribe(o=>{o.preventDefault(),Az(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Az(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Dn(t=>"closing"===t.state),(0,Oi.q)(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Az(i,e,t){return void 0!==i._containerInstance&&(i._containerInstance._closeInteractionType=e),i.close(t)}const Tz=new u.OlP("MatDialogData"),kee=new u.OlP("mat-dialog-default-options"),Iz=new u.OlP("mat-dialog-scroll-strategy"),Fee={provide:Iz,deps:[_f],useFactory:function Oee(i){return()=>i.scrollStrategies.block()}};let Lee=(()=>{class i{constructor(t,s,o,a,l,h,g,_,b,x){this._overlay=t,this._injector=s,this._defaultOptions=o,this._parentDialog=a,this._overlayContainer=l,this._dialogRefConstructor=g,this._dialogContainerType=_,this._dialogDataToken=b,this._animationMode=x,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new yt.x,this._afterOpenedAtThisLevel=new yt.x,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=rf(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(zn(void 0))),this._scrollStrategy=h}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,s){if(s=function Nee(i,e){return Object.assign(Object.assign({},e),i)}(s,this._defaultOptions||new sN),s.id&&this.getDialogById(s.id),this._dialogAnimatingOpen)return this._lastDialogRef;const o=this._createOverlay(s),a=this._attachDialogContainer(o,s);if("NoopAnimations"!==this._animationMode){const h=a._animationStateChanged.subscribe(g=>{"opening"===g.state&&(this._dialogAnimatingOpen=!0),"opened"===g.state&&(this._dialogAnimatingOpen=!1,h.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new fs.w0),this._animationStateSubscriptions.add(h)}const l=this._attachDialogContent(t,a,o,s);return this._lastDialogRef=l,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.afterClosed().subscribe(()=>this._removeOpenDialog(l)),this.afterOpened.next(l),a._initializeWithAttachedContent(),l}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(s=>s.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay(t){const s=this._getOverlayConfig(t);return this._overlay.create(s)}_getOverlayConfig(t){const s=new iN({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(s.backdropClass=t.backdropClass),s}_attachDialogContainer(t,s){const a=u.zs3.create({parent:s&&s.viewContainerRef&&s.viewContainerRef.injector||this._injector,providers:[{provide:sN,useValue:s}]}),l=new oD(this._dialogContainerType,s.viewContainerRef,a,s.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,s,o,a){const l=new this._dialogRefConstructor(o,s,a.id);if(t instanceof u.Rgc)s.attachTemplatePortal(new _R(t,null,{$implicit:a.data,dialogRef:l}));else{const h=this._createInjector(a,l,s),g=s.attachComponentPortal(new oD(t,a.viewContainerRef,h));l.componentInstance=g.instance}return l.updateSize(a.width,a.height).updatePosition(a.position),l}_createInjector(t,s,o){const a=t&&t.viewContainerRef&&t.viewContainerRef.injector,l=[{provide:this._dialogContainerType,useValue:o},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:s}];return t.direction&&(!a||!a.get(Jp,null,u.XFs.Optional))&&l.push({provide:Jp,useValue:{value:t.direction,change:at()}}),u.zs3.create({parent:a||this._injector,providers:l})}_removeOpenDialog(t){const s=this.openDialogs.indexOf(t);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const s=t.parentElement.children;for(let o=s.length-1;o>-1;o--){let a=s[o];a!==t&&"SCRIPT"!==a.nodeName&&"STYLE"!==a.nodeName&&!a.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(a,a.getAttribute("aria-hidden")),a.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let s=t.length;for(;s--;)t[s].close()}}return i.\u0275fac=function(t){u.$Z()},i.\u0275dir=u.lG2({type:i}),i})(),bR=(()=>{class i extends Lee{constructor(t,s,o,a,l,h,g,_){super(t,s,a,h,g,l,oN,Ree,Tz,_)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_f),u.LFG(u.zs3),u.LFG(xt,8),u.LFG(kee,8),u.LFG(Iz),u.LFG(i,12),u.LFG(rN),u.LFG(Yd,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),Bee=0,Vee=(()=>{class i{constructor(t,s,o){this._dialogRef=t,this._elementRef=s,this._dialog=o,this.id="mat-dialog-title-"+Bee++}ngOnInit(){this._dialogRef||(this._dialogRef=function Hee(i,e){let t=i.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(s=>s.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(oN,8),u.Y36(u.SBq),u.Y36(bR))},i.\u0275dir=u.lG2({type:i,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,s){2&t&&u.Ikx("id",s.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),i})(),Uee=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=u.lG2({type:i,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),i})(),Gee=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=u.lG2({type:i,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),i})(),Rz=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[bR,Fee],imports:[[oC,lD,Ci],Ci]}),i})();const Pz="confirm";function jee(i,e){if(1&i){const t=u.EpF();u.TgZ(0,"div",6),u.TgZ(1,"main-button",7),u.NdJ("click",function(){return u.CHM(t),u.oxw().cancel()}),u.ALo(2,"translate"),u.qZA(),u.qZA()}2&i&&(u.xp6(1),u.s9C("label",u.lcZ(2,1,"input.cancel")))}let kz=(()=>{class i{constructor(t,s,o){this.thisDialogReference=t,this.translationService=s,this.data=o,this.title="App",this.customTitleComponent=!1,this.message="",this.confirmation=!0,this.message=o.message,o.title&&(this.title=o.title),1==o.customTitleComponent&&(this.customTitleComponent=o.customTitleComponent),0==o.confirmation&&(this.confirmation=o.confirmation),this.confirmLabel=o.confirmLabel?o.confirmLabel:this.translationService.get("input.confirm")}ngAfterContentInit(){}ngOnInit(){}confirm(){this.thisDialogReference.close(Pz)}cancel(){this.thisDialogReference.close("cancel")}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(oN),u.Y36(Wd),u.Y36(Tz))},i.\u0275cmp=u.Xpm({type:i,selectors:[["confirmation-dialog"]],decls:10,vars:4,consts:[["mat-dialog-title","",3,"innerHtml"],["titleRef",""],[3,"innerHtml"],["class","w-25",4,"ngIf"],[1,"w-25","ml-auto"],["id","confirm",3,"label","click"],[1,"w-25"],["id","cancel",1,"cancel-button",3,"label","click"]],template:function(t,s){1&t&&(u.TgZ(0,"div"),u._UZ(1,"title",0,1),u._UZ(3,"hr"),u._UZ(4,"mat-dialog-content",2),u._UZ(5,"hr"),u.TgZ(6,"mat-dialog-actions"),u.YNc(7,jee,3,3,"div",3),u.TgZ(8,"div",4),u.TgZ(9,"main-button",5),u.NdJ("click",function(){return s.confirm()}),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(1),u.Q6J("innerHtml",s.title,u.oJD),u.xp6(3),u.Q6J("innerHtml",s.message,u.oJD),u.xp6(3),u.Q6J("ngIf",s.confirmation),u.xp6(2),u.s9C("label",s.confirmLabel))},directives:[Vee,Uee,Gee,dr,EE],pipes:[c0],styles:["mat-dialog-actions[_ngcontent-%COMP%]{justify-content:space-around}"]}),i})();function Wee(i,e){1&i&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&i&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"input.required")," "))}function qee(i,e){1&i&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&i&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"authentication.validEmail")," "))}function Yee(i,e){1&i&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&i&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"input.required")," "))}function $ee(i,e){1&i&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&i&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"input.required")," "))}function Zee(i,e){if(1&i&&(u.TgZ(0,"div",23),u.TgZ(1,"p"),u._uU(2),u.qZA(),u.qZA()),2&i){const t=u.oxw();u.xp6(2),u.Oqu(t.alert)}}let Kee=(()=>{class i{constructor(t,s,o,a){this.authService=t,this.translationService=s,this.router=o,this.dialog=a,this.alert=null,this.registerForm=new w0({username:new ff("",[hf.required]),email:new ff("",[hf.required]),password:new ff("",[hf.required])})}get username(){return this.registerForm.get("username")}get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}ngOnInit(){this.registerForm.valueChanges.subscribe(t=>{for(let s in this.registerForm.controls){let o=this.registerForm.get(s);if(o.invalid&&(o.dirty||o.touched))return void(this.registerStatus="INVALID")}this.registerStatus="VALID"})}register(){return(0,q.mG)(this,void 0,void 0,function*(){let t=this.registerForm.value;(yield this.authService.register(t))?(this.registerStatus="SUCCESS",this.dialog.open(kz,{width:"600px",data:{message:`${this.translationService.get("authentication.registrationSuccess")}. \n                        <br> ${this.translationService.get("signpost.welcome")}`,confirmation:!1}}).afterClosed().subscribe(a=>(0,q.mG)(this,void 0,void 0,function*(){this.router.navigate([""])}))):(this.alert=this.translationService.get("authentication.emailAlreadyExists"),this.registerStatus="INVALID",this.translationService.update.subscribe(o=>{this.alert&&(this.alert=this.translationService.get("authentication.invalidCredentials"))}))})}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u0),u.Y36(Wd),u.Y36(d),u.Y36(bR))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-register"]],decls:52,vars:32,consts:[[2,"z-index","1"],[1,"d-flex"],[1,"w-100","w-md-60","pt-100","pl-100","pr-100"],[1,"d-flex","justify-content-between"],["src","/assets/images/logo.svg","alt","",1,"logo-image"],[1,"d-flex","flex-column","justify-content-center"],[1,"text-right"],["id","align-title"],["mat-button","","routerLink","/login",1,"my-theme"],[1,"mt-5","mb-5"],[1,"d-flex","flex-column",3,"formGroup"],["color","accent"],["matInput","","type","text",3,"formControl"],[4,"ngIf"],["color","accent",1,"mt-4"],["matInput","","type","email","placeholder","Ex. pat@example.com",3,"formControl"],["matInput","","type","password",3,"formControl"],["class","text-danger",4,"ngIf"],[1,"d-flex","justify-content-between","mt-4"],[1,"w-25","mb-5","ml-auto"],[1,"registerButton",3,"label","disabled","click"],[1,"container-half-no-header","sm-hidden"],[3,"status"],[1,"text-danger"]],template:function(t,s){1&t&&(u.TgZ(0,"mat-sidenav-container",0),u.TgZ(1,"mat-sidenav-content"),u.TgZ(2,"article",1),u.TgZ(3,"section",2),u.TgZ(4,"div",3),u._UZ(5,"img",4),u.TgZ(6,"div",5),u.TgZ(7,"div",6),u.TgZ(8,"h1",7),u._uU(9),u.ALo(10,"translate"),u.qZA(),u.qZA(),u.TgZ(11,"a",8),u._uU(12),u.ALo(13,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(14,"div"),u.TgZ(15,"h1",9),u._uU(16),u.ALo(17,"translate"),u.qZA(),u.TgZ(18,"form",10),u.TgZ(19,"mat-form-field",11),u.TgZ(20,"mat-label"),u.TgZ(21,"mat-icon"),u._uU(22,"account_circle"),u.qZA(),u._uU(23),u.ALo(24,"translate"),u.qZA(),u._UZ(25,"input",12),u.YNc(26,Wee,3,3,"mat-error",13),u.qZA(),u.TgZ(27,"mat-form-field",14),u.TgZ(28,"mat-label"),u.TgZ(29,"mat-icon"),u._uU(30,"mail"),u.qZA(),u._uU(31),u.ALo(32,"translate"),u.qZA(),u._UZ(33,"input",15),u.YNc(34,qee,3,3,"mat-error",13),u.YNc(35,Yee,3,3,"mat-error",13),u.qZA(),u.TgZ(36,"mat-form-field",14),u.TgZ(37,"mat-label"),u.TgZ(38,"mat-icon"),u._uU(39,"key"),u.qZA(),u._uU(40),u.ALo(41,"translate"),u.qZA(),u._UZ(42,"input",16),u.YNc(43,$ee,3,3,"mat-error",13),u.qZA(),u.YNc(44,Zee,3,1,"div",17),u.TgZ(45,"div",18),u._UZ(46,"theme-switch"),u.TgZ(47,"div",19),u.TgZ(48,"main-button",20),u.NdJ("click",function(){return s.register()}),u.ALo(49,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(50,"section",21),u._UZ(51,"gl-lod",22),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(9),u.Oqu(u.lcZ(10,18,"shared.title")),u.xp6(3),u.hij(" ",u.lcZ(13,20,"signpost.returnToLogin")," "),u.xp6(4),u.Oqu(u.lcZ(17,22,"authentication.register")),u.xp6(2),u.Q6J("formGroup",s.registerForm),u.xp6(5),u.hij(" ",u.lcZ(24,24,"authentication.username"),""),u.xp6(2),u.Q6J("formControl",s.username),u.xp6(1),u.Q6J("ngIf",s.username.invalid&&(s.username.dirty||s.username.touched)&&s.username.errors.required),u.xp6(5),u.hij(" ",u.lcZ(32,26,"authentication.email"),""),u.xp6(2),u.Q6J("formControl",s.email),u.xp6(1),u.Q6J("ngIf",s.registerForm.hasError("email")&&!s.registerForm.hasError("required")),u.xp6(1),u.Q6J("ngIf",s.email.invalid&&(s.email.dirty||s.email.touched)&&s.email.errors.required),u.xp6(5),u.hij(" ",u.lcZ(41,28,"authentication.password"),""),u.xp6(2),u.Q6J("formControl",s.password),u.xp6(1),u.Q6J("ngIf",s.password.invalid&&(s.password.dirty||s.password.touched)&&s.password.errors.required),u.xp6(1),u.Q6J("ngIf",s.alert),u.xp6(4),u.s9C("label",u.lcZ(49,30,"authentication.register")),u.Q6J("disabled",0==s.registerForm.valid),u.xp6(3),u.Q6J("status",s.registerStatus))},directives:[_0,xv,aE,y,SE,_E,Av,WI,hx,PI,qI,Sv,Dv,ux,dr,jI,zI,EE,vR],pipes:[c0],styles:["#align-title[_ngcontent-%COMP%]{display:inline-block;margin-left:auto;margin-top:auto}.mle[_ngcontent-%COMP%]{position:absolute;bottom:120px;text-align:center;width:100%;color:#fff;font-weight:700;font-size:60px}.logo-image[_ngcontent-%COMP%]{width:15%}"]}),i})();const Oz=new Set;let aC,Jee=(()=>{class i{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Xee}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Qee(i){if(!Oz.has(i))try{aC||(aC=document.createElement("style"),aC.setAttribute("type","text/css"),document.head.appendChild(aC)),aC.sheet&&(aC.sheet.insertRule(`@media ${i} {body{ }}`,0),Oz.add(i))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(Mo))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Xee(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let Fz=(()=>{class i{constructor(t,s){this._mediaMatcher=t,this._zone=s,this._queries=new Map,this._destroySubject=new yt.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Lz(tI(t)).some(o=>this._registerQuery(o).mql.matches)}observe(t){let a=ZA(Lz(tI(t)).map(l=>this._registerQuery(l).observable));return a=Ko(a.pipe((0,Oi.q)(1)),a.pipe(e3(1),XT(0))),a.pipe((0,Dt.U)(l=>{const h={matches:!1,breakpoints:{}};return l.forEach(({matches:g,query:_})=>{h.matches=h.matches||g,h.breakpoints[_]=g}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const s=this._mediaMatcher.matchMedia(t),a={observable:new Ri.y(l=>{const h=g=>this._zone.run(()=>l.next(g));return s.addListener(h),()=>{s.removeListener(h)}}).pipe(zn(s),(0,Dt.U)(({matches:l})=>({query:t,matches:l})),er(this._destroySubject)),mql:s};return this._queries.set(t,a),a}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(Jee),u.LFG(u.R0b))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Lz(i){return i.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function tte(i,e){if(1&i){const t=u.EpF();u.TgZ(0,"div",2),u.TgZ(1,"button",3),u.NdJ("click",function(){return u.CHM(t),u.oxw().action()}),u._uU(2),u.qZA(),u.qZA()}if(2&i){const t=u.oxw();u.xp6(2),u.Oqu(t.data.action)}}function nte(i,e){}const aN=new u.OlP("MatSnackBarData");class wR{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const ite=Math.pow(2,31)-1;class xR{constructor(e,t){this._overlayRef=t,this._afterDismissed=new yt.x,this._afterOpened=new yt.x,this._onAction=new yt.x,this._dismissedByAction=!1,this.containerInstance=e,this.onAction().subscribe(()=>this.dismiss()),e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,ite))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let rte=(()=>{class i{constructor(t,s){this.snackBarRef=t,this.data=s}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(xR),u.Y36(aN))},i.\u0275cmp=u.Xpm({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,s){1&t&&(u.TgZ(0,"span",0),u._uU(1),u.qZA(),u.YNc(2,tte,3,1,"div",1)),2&t&&(u.xp6(1),u.Oqu(s.data.message),u.xp6(1),u.Q6J("ngIf",s.hasAction))},directives:[wI,dr],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),i})();const ste={snackBarState:Ol("state",[oo("void, hidden",Bn({transform:"scale(0.8)",opacity:0})),oo("visible",Bn({transform:"scale(1)",opacity:1})),es("* => visible",ms("150ms cubic-bezier(0, 0, 0.2, 1)")),es("* => void, * => hidden",ms("75ms cubic-bezier(0.4, 0.0, 1, 1)",Bn({opacity:0})))])};let ote=(()=>{class i extends yR{constructor(t,s,o,a,l){super(),this._ngZone=t,this._elementRef=s,this._changeDetectorRef=o,this._platform=a,this.snackBarConfig=l,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new yt.x,this._onExit=new yt.x,this._onEnter=new yt.x,this._animationState="void",this.attachDomPortal=h=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(h)),this._live="assertive"!==l.politeness||l.announcementMessage?"off"===l.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}onAnimationEnd(t){const{fromState:s,toState:o}=t;if(("void"===o&&"void"!==s||"hidden"===o)&&this._completeExit(),"visible"===o){const a=this._onEnter;this._ngZone.run(()=>{a.next(),a.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,Oi.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const t=this._elementRef.nativeElement,s=this.snackBarConfig.panelClass;s&&(Array.isArray(s)?s.forEach(o=>t.classList.add(o)):t.classList.add(s)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),s=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&s){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(o=document.activeElement),t.removeAttribute("aria-hidden"),s.appendChild(t),null==o||o.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.R0b),u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(Mo),u.Y36(wR))},i.\u0275cmp=u.Xpm({type:i,selectors:[["snack-bar-container"]],viewQuery:function(t,s){if(1&t&&u.Gf(aD,7),2&t){let o;u.iGM(o=u.CRH())&&(s._portalOutlet=o.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,s){1&t&&u.WFA("@state.done",function(a){return s.onAnimationEnd(a)}),2&t&&u.d8E("@state",s._animationState)},features:[u.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,s){1&t&&(u.TgZ(0,"div",0),u.YNc(1,nte,0,0,"ng-template",1),u.qZA(),u._UZ(2,"div")),2&t&&(u.xp6(2),u.uIk("aria-live",s._live)("role",s._role))},directives:[aD],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[ste.snackBarState]}}),i})(),lN=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[oC,lD,Io,lE,Ci],Ci]}),i})();const Nz=new u.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function ate(){return new wR}});let lte=(()=>{class i{constructor(t,s,o,a,l,h){this._overlay=t,this._live=s,this._injector=o,this._breakpointObserver=a,this._parentSnackBar=l,this._defaultConfig=h,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,s){return this._attach(t,s)}openFromTemplate(t,s){return this._attach(t,s)}open(t,s="",o){const a=Object.assign(Object.assign({},this._defaultConfig),o);return a.data={message:t,action:s},a.announcementMessage===t&&(a.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,a)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,s){const a=u.zs3.create({parent:s&&s.viewContainerRef&&s.viewContainerRef.injector||this._injector,providers:[{provide:wR,useValue:s}]}),l=new oD(this.snackBarContainerComponent,s.viewContainerRef,a),h=t.attach(l);return h.instance.snackBarConfig=s,h.instance}_attach(t,s){const o=Object.assign(Object.assign(Object.assign({},new wR),this._defaultConfig),s),a=this._createOverlay(o),l=this._attachSnackBarContainer(a,o),h=new xR(l,a);if(t instanceof u.Rgc){const g=new _R(t,null,{$implicit:o.data,snackBarRef:h});h.instance=l.attachTemplatePortal(g)}else{const g=this._createInjector(o,h),_=new oD(t,void 0,g),b=l.attachComponentPortal(_);h.instance=b.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(er(a.detachments())).subscribe(g=>{a.overlayElement.classList.toggle(this.handsetCssClass,g.matches)}),o.announcementMessage&&l._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(h,o),this._openedSnackBarRef=h,this._openedSnackBarRef}_animateSnackBar(t,s){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),s.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),s.duration&&s.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(s.duration))}_createOverlay(t){const s=new iN;s.direction=t.direction;let o=this._overlay.position().global();const a="rtl"===t.direction,l="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!a||"end"===t.horizontalPosition&&a,h=!l&&"center"!==t.horizontalPosition;return l?o.left("0"):h?o.right("0"):o.centerHorizontally(),"top"===t.verticalPosition?o.top("0"):o.bottom("0"),s.positionStrategy=o,this._overlay.create(s)}_createInjector(t,s){return u.zs3.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:xR,useValue:s},{provide:aN,useValue:t.data}]})}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_f),u.LFG(u3),u.LFG(u.zs3),u.LFG(Fz),u.LFG(i,12),u.LFG(Nz))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),cN=(()=>{class i extends lte{constructor(t,s,o,a,l,h){super(t,s,o,a,l,h),this.simpleSnackBarComponent=rte,this.snackBarContainerComponent=ote,this.handsetCssClass="mat-snack-bar-handset"}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_f),u.LFG(u3),u.LFG(u.zs3),u.LFG(Fz),u.LFG(i,12),u.LFG(Nz))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:lN}),i})(),Xv=(()=>{class i{constructor(t,s){this.snackBarRef=t,this.data=s}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(xR),u.Y36(aN))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-snack-bar"]],decls:2,vars:1,consts:[[1,"snackbar-container","text-center"],[3,"innerHTML"]],template:function(t,s){1&t&&(u.TgZ(0,"div",0),u._UZ(1,"span",1),u.qZA()),2&t&&(u.xp6(1),u.Q6J("innerHTML",s.data,u.oJD))},styles:[""]}),i})();function cte(i,e){1&i&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&i&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"authentication.validEmail")," "))}function ute(i,e){1&i&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&i&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"input.required")," "))}function dte(i,e){if(1&i&&(u.TgZ(0,"div",18),u.TgZ(1,"p"),u._uU(2),u.qZA(),u.qZA()),2&i){const t=u.oxw();u.xp6(2),u.Oqu(t.alert)}}let hte=(()=>{class i{constructor(t,s,o,a){this.authService=t,this.translationService=s,this.router=o,this.snackbar=a,this.alert=null,this.recoverForm=new w0({email:new ff("",[hf.required])})}get email(){return this.recoverForm.get("email")}ngOnInit(){this.recoverForm.valueChanges.subscribe(t=>{for(let s in this.recoverForm.controls){let o=this.recoverForm.get(s);if(o.invalid&&(o.dirty||o.touched))return void(this.recoverStatus="INVALID")}this.recoverStatus="VALID"})}recover(){return(0,q.mG)(this,void 0,void 0,function*(){(yield this.authService.recoverPassword(this.email.value))?(this.recoverStatus="SUCCESS",this.snackbar.openFromComponent(Xv,{data:`an email to recover your password has been sent to ${this.email.value}`,duration:5e3,panelClass:["mat-toolbar","mat-accent"]}),this.router.navigate([""])):(this.alert=this.translationService.get("authentication.invalidCredentials"),this.recoverStatus="INVALID",this.translationService.update.subscribe(s=>{this.alert&&(this.alert=this.translationService.get("authentication.invalidCredentials"))}))})}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u0),u.Y36(Wd),u.Y36(d),u.Y36(cN))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-recover"]],decls:35,vars:25,consts:[[1,"d-flex"],[1,"w-100","w-md-60","pt-100","pl-100","pr-100"],[1,"d-flex","justify-content-between"],["src","/assets/images/logo.svg","alt","",1,"logo-image"],[1,"d-flex","flex-column","justify-content-center"],[1,"text-right"],["id","align-title"],["mat-button","","routerLink","/login",1,"my-theme"],[1,"mt-5","mb-5"],[1,"d-flex","flex-column",3,"formGroup"],["matInput","","type","email","placeholder","Ex. pat@example.com",3,"formControl"],[4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"d-flex","justify-content-between","mt-4"],[1,"w-25","mb-5","ml-auto"],[1,"recoverButton",3,"label","disabled","click"],[1,"container-half-no-header","sm-hidden"],[3,"status"],[1,"text-danger"]],template:function(t,s){1&t&&(u.TgZ(0,"mat-sidenav-container"),u.TgZ(1,"mat-sidenav-content"),u.TgZ(2,"article",0),u.TgZ(3,"section",1),u.TgZ(4,"div",2),u._UZ(5,"img",3),u.TgZ(6,"div",4),u.TgZ(7,"div",5),u.TgZ(8,"h1",6),u._uU(9),u.ALo(10,"translate"),u.qZA(),u.qZA(),u.TgZ(11,"a",7),u._uU(12),u.ALo(13,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(14,"div"),u.TgZ(15,"h1",8),u._uU(16),u.ALo(17,"translate"),u.ALo(18,"translate"),u.qZA(),u.TgZ(19,"form",9),u.TgZ(20,"mat-form-field"),u.TgZ(21,"mat-label"),u._uU(22),u.ALo(23,"translate"),u.qZA(),u._UZ(24,"input",10),u.YNc(25,cte,3,3,"mat-error",11),u.YNc(26,ute,3,3,"mat-error",11),u.qZA(),u.YNc(27,dte,3,1,"div",12),u.TgZ(28,"div",13),u._UZ(29,"theme-switch"),u.TgZ(30,"div",14),u.TgZ(31,"main-button",15),u.NdJ("click",function(){return s.recover()}),u.ALo(32,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(33,"section",16),u._UZ(34,"gl-lod",17),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(9),u.Oqu(u.lcZ(10,13,"shared.title")),u.xp6(3),u.hij(" ",u.lcZ(13,15,"signpost.returnToLogin")," "),u.xp6(4),u.AsE("",u.lcZ(17,17,"input.reset")," ",u.lcZ(18,19,"authentication.password"),""),u.xp6(3),u.Q6J("formGroup",s.recoverForm),u.xp6(3),u.Oqu(u.lcZ(23,21,"authentication.email")),u.xp6(2),u.Q6J("formControl",s.email),u.xp6(1),u.Q6J("ngIf",s.recoverForm.hasError("email")&&!s.recoverForm.hasError("required")),u.xp6(1),u.Q6J("ngIf",s.email.invalid&&(s.email.dirty||s.email.touched)&&s.email.errors.required),u.xp6(1),u.Q6J("ngIf",s.alert),u.xp6(4),u.s9C("label",u.lcZ(32,23,"authentication.recover")),u.Q6J("disabled",0==s.recoverForm.valid),u.xp6(3),u.Q6J("status",s.recoverStatus))},directives:[_0,xv,aE,y,SE,_E,Av,WI,hx,qI,Sv,Dv,ux,dr,jI,zI,EE,vR],pipes:[c0],styles:[""]}),i})();function fte(i,e){1&i&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&i&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"input.required")," "))}function pte(i,e){1&i&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&i&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"input.required")," "))}function gte(i,e){if(1&i&&(u.TgZ(0,"div",20),u.TgZ(1,"p"),u._uU(2),u.qZA(),u.qZA()),2&i){const t=u.oxw();u.xp6(2),u.Oqu(t.alert)}}let mte=(()=>{class i{constructor(t,s,o,a,l){this.authService=t,this.translationService=s,this.router=o,this.snackbar=a,this.dialog=l,this.alert=null,this.manageAccountForm=new w0({oldPassword:new ff("",[hf.required]),newPassword:new ff("",[hf.required])})}get currentPassword(){return this.manageAccountForm.get("oldPassword")}get newPassword(){return this.manageAccountForm.get("newPassword")}ngOnInit(){this.manageAccountForm.valueChanges.subscribe(t=>{for(let s in this.manageAccountForm.controls){let o=this.manageAccountForm.get(s);if(o.invalid&&(o.dirty||o.touched))return void(this.manageStatus="INVALID")}this.manageStatus="VALID"})}manageAccount(){return(0,q.mG)(this,void 0,void 0,function*(){let t=yield this.authService.manageAccount(this.currentPassword.value,this.newPassword.value);t.success?(this.manageStatus="SUCCESS",this.snackbar.openFromComponent(Xv,{data:t.content,duration:5e3,panelClass:["mat-toolbar","mat-accent"]})):(this.alert=t.content,this.manageStatus="INVALID",this.translationService.update.subscribe(s=>{this.alert&&(this.alert=this.translationService.get("authentication.invalidCredentials"))}))})}deleteAccount(){return(0,q.mG)(this,void 0,void 0,function*(){this.dialog.open(kz,{width:"600px",data:{message:`${this.translationService.get("input.deleteNotDelete").replace("{email}",this.authService.userEmail.value)}?`}}).afterClosed().subscribe(s=>(0,q.mG)(this,void 0,void 0,function*(){s==Pz&&((yield this.authService.deleteAccount(this.currentPassword.value))?(this.snackbar.openFromComponent(Xv,{data:`${this.authService.userEmail.value} ${this.translationService.get("input.accountDeleted")}.`,duration:5e3,panelClass:["mat-toolbar","mat-accent"]}),this.router.navigate([""])):(this.alert=this.translationService.get("authentication.invalidCredentials"),this.translationService.update.subscribe(a=>{this.alert&&(this.alert=this.translationService.get("authentication.invalidCredentials"))})))}))})}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u0),u.Y36(Wd),u.Y36(d),u.Y36(cN),u.Y36(bR))},i.\u0275cmp=u.Xpm({type:i,selectors:[["manage-account"]],decls:38,vars:27,consts:[[1,"d-flex"],[1,"w-100","w-md-60","pt-100","pl-100","pr-100"],[1,"d-flex","justify-content-between"],["src","/assets/images/logo.svg","alt","",1,"logo-image"],[1,"d-flex","flex-column","justify-content-center"],[1,"text-right"],["id","align-title"],[1,"mt-5","mb-5"],[1,"d-flex","flex-column",3,"formGroup"],["color","accent"],["matInput","","type","password",3,"formControl"],[4,"ngIf"],["color","accent",1,"mt-4"],["class","text-danger",4,"ngIf"],[1,"d-flex","justify-content-between","mt-4","mb-5"],[1,"w-25"],[1,"delete-button",3,"label","disabled","click"],[1,"manageAccountButton",3,"label","disabled","click"],[1,"container-half-no-header","sm-hidden"],[3,"status"],[1,"text-danger"]],template:function(t,s){1&t&&(u.TgZ(0,"mat-sidenav-container"),u.TgZ(1,"mat-sidenav-content"),u.TgZ(2,"article",0),u.TgZ(3,"section",1),u.TgZ(4,"div",2),u._UZ(5,"img",3),u.TgZ(6,"div",4),u.TgZ(7,"div",5),u.TgZ(8,"h1",6),u._uU(9),u.ALo(10,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(11,"div"),u.TgZ(12,"h1",7),u._uU(13),u.ALo(14,"translate"),u.qZA(),u.TgZ(15,"form",8),u.TgZ(16,"mat-form-field",9),u.TgZ(17,"mat-label"),u._uU(18),u.ALo(19,"translate"),u.qZA(),u._UZ(20,"input",10),u.YNc(21,fte,3,3,"mat-error",11),u.qZA(),u.TgZ(22,"mat-form-field",12),u.TgZ(23,"mat-label"),u._uU(24),u.ALo(25,"translate"),u.qZA(),u._UZ(26,"input",10),u.YNc(27,pte,3,3,"mat-error",11),u.qZA(),u.YNc(28,gte,3,1,"div",13),u.TgZ(29,"div",14),u.TgZ(30,"div",15),u.TgZ(31,"main-button",16),u.NdJ("click",function(){return s.deleteAccount()}),u.ALo(32,"translate"),u.qZA(),u.qZA(),u.TgZ(33,"div",15),u.TgZ(34,"main-button",17),u.NdJ("click",function(){return s.manageAccount()}),u.ALo(35,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(36,"section",18),u._UZ(37,"gl-lod",19),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(9),u.Oqu(u.lcZ(10,15,"shared.title")),u.xp6(4),u.Oqu(u.lcZ(14,17,"authentication.manageAccount")),u.xp6(2),u.Q6J("formGroup",s.manageAccountForm),u.xp6(3),u.Oqu(u.lcZ(19,19,"authentication.currentPassword")),u.xp6(2),u.Q6J("formControl",s.currentPassword),u.xp6(1),u.Q6J("ngIf",s.currentPassword.invalid&&(s.currentPassword.dirty||s.currentPassword.touched)&&s.currentPassword.errors.required),u.xp6(3),u.Oqu(u.lcZ(25,21,"authentication.newPassword")),u.xp6(2),u.Q6J("formControl",s.newPassword),u.xp6(1),u.Q6J("ngIf",s.newPassword.invalid&&(s.newPassword.dirty||s.newPassword.touched)&&s.newPassword.errors.required),u.xp6(1),u.Q6J("ngIf",s.alert),u.xp6(3),u.s9C("label",u.lcZ(32,23,"input.delete")),u.Q6J("disabled",0==s.currentPassword.valid),u.xp6(3),u.s9C("label",u.lcZ(35,25,"input.update")),u.Q6J("disabled",0==s.manageAccountForm.valid),u.xp6(3),u.Q6J("status",s.manageStatus))},directives:[_0,xv,SE,_E,Av,WI,hx,qI,Sv,Dv,ux,dr,jI,EE,vR],pipes:[c0],styles:[""]}),i})();const Bz=()=>(i=>(0,B2.z)(Xk,(0,Dt.U)(e=>e||i)))(["login"]),uN=()=>(i=>(0,B2.z)(Xk,(0,Dt.U)(e=>e&&i||!0)))([""]),vte=[{path:"login",component:lee,canActivate:[ex],data:{authGuardPipe:uN}},{path:"register",component:Kee,canActivate:[ex],data:{authGuardPipe:uN}},{path:"account/recover",component:hte,canActivate:[ex],data:{authGuardPipe:uN}},{path:"",component:T$,children:[{path:"",component:cee,canActivate:[ex],data:{authGuardPipe:Bz}},{path:"account/management",component:mte,canActivate:[ex],data:{authGuardPipe:Bz}}]}];let _te=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Ye.forRoot(vte)],Ye]}),i})();const e_=new Ri.y(uO.Z),bte={connector:()=>new yt.x};function Vz(i,e=bte){const{connector:t}=e;return(0,Un.e)((s,o)=>{const a=t();(0,Yi.D)(i(function yte(i){return new Ri.y(e=>i.subscribe(e))}(a))).subscribe(o),o.add(s.subscribe(a))})}function Uz(i,e){return e?t=>Ko(e.pipe((0,Oi.q)(1),function Cte(){return(0,Un.e)((i,e)=>{i.subscribe(new $i.Q(e,uO.Z))})}()),t.pipe(Uz(i))):(0,It.z)((t,s)=>i(t,s).pipe((0,Oi.q)(1),KO(t)))}const cD="Service workers are disabled or not supported by this browser";class CR{constructor(e){if(this.serviceWorker=e,e){const s=wv(e,"controllerchange").pipe((0,Dt.U)(()=>e.controller)),a=Ko(rf(()=>at(e.controller)),s);this.worker=a.pipe(Dn(b=>!!b)),this.registration=this.worker.pipe(lr(()=>e.getRegistration()));const _=wv(e,"message").pipe((0,Dt.U)(b=>b.data)).pipe(Dn(b=>b&&b.type)).pipe(function xte(i){return i?e=>Vz(i)(e):e=>function wte(i,e){const t=(0,Na.m)(i)?i:()=>i;return(0,Na.m)(e)?Vz(e,{connector:t}):s=>new KA(s,t)}(new yt.x)(e)}());_.connect(),this.events=_}else this.worker=this.events=this.registration=function Mte(i){return rf(()=>xr(new Error(i)))}(cD)}postMessage(e,t){return this.worker.pipe((0,Oi.q)(1),(0,gs.b)(s=>{s.postMessage(Object.assign({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,s){const o=this.waitForOperationCompleted(s),a=this.postMessage(e,t);return Promise.all([a,o]).then(([,l])=>l)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?s=>s.type===e:s=>e.includes(s.type),this.events.pipe(Dn(t))}nextEventOfType(e){return this.eventsOfType(e).pipe((0,Oi.q)(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(Dn(t=>t.nonce===e),(0,Oi.q)(1),(0,Dt.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Ete=(()=>{class i{constructor(t){if(this.sw=t,this.subscriptionChanges=new yt.x,!t.isEnabled)return this.messages=e_,this.notificationClicks=e_,void(this.subscription=e_);this.messages=this.sw.eventsOfType("PUSH").pipe((0,Dt.U)(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,Dt.U)(o=>o.data)),this.pushManager=this.sw.registration.pipe((0,Dt.U)(o=>o.pushManager));const s=this.pushManager.pipe(lr(o=>o.getSubscription()));this.subscription=(0,mc.T)(s,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(cD));const s={userVisibleOnly:!0};let o=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(o.length));for(let l=0;l<o.length;l++)a[l]=o.charCodeAt(l);return s.applicationServerKey=a,this.pushManager.pipe(lr(l=>l.subscribe(s)),(0,Oi.q)(1)).toPromise().then(l=>(this.subscriptionChanges.next(l),l))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Oi.q)(1),lr(s=>{if(null===s)throw new Error("Not subscribed to push notifications.");return s.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(cD))}decodeBase64(t){return atob(t)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(CR))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})(),Gz=(()=>{class i{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=e_,this.available=e_,this.activated=e_,void(this.unrecoverable=e_);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(Dn(s=>"VERSION_READY"===s.type),(0,Dt.U)(s=>({type:"UPDATE_AVAILABLE",current:s.currentVersion,available:s.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(cD));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(cD));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(CR))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();class dN{}const Hz=new u.OlP("NGSW_REGISTER_SCRIPT");function Dte(i,e,t,s){return()=>{if(!sr(s)||!("serviceWorker"in navigator)||!1===t.enabled)return;let a;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)a=t.registrationStrategy();else{const[h,...g]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(h){case"registerImmediately":a=at(null);break;case"registerWithDelay":a=zz(+g[0]||0);break;case"registerWhenStable":a=g[0]?(0,mc.T)(jz(i),zz(+g[0])):jz(i);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}i.get(u.R0b).runOutsideAngular(()=>a.pipe((0,Oi.q)(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(h=>console.error("Service worker registration failed with:",h))))}}function zz(i){return at(null).pipe(function Ste(i,e=os.z){const t=$O(i,e);return Uz(()=>t)}(i))}function jz(i){return i.get(u.z2F).isStable.pipe(Dn(t=>t))}function Ate(i,e){return new CR(sr(e)&&!1!==i.enabled?navigator.serviceWorker:void 0)}let Tte=(()=>{class i{static register(t,s={}){return{ngModule:i,providers:[{provide:Hz,useValue:t},{provide:dN,useValue:s},{provide:CR,useFactory:Ate,deps:[dN,u.Lbi]},{provide:u.ip1,useFactory:Dte,deps:[u.zs3,Hz,dN,u.Lbi],multi:!0}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[Ete,Gz]}),i})();class Ite{constructor(e="",t="",s=""){this.username=e,this.email=t,this.password=s}}let Yz=(()=>{class i{constructor(){this._listeners=[]}notify(t,s){for(let o of this._listeners)o(t,s)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(s=>t!==s)}}ngOnDestroy(){this._listeners=[]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Rte=0;const fN=new u.OlP("CdkAccordion");let Pte=(()=>{class i{constructor(){this._stateChanges=new yt.x,this._openCloseAllActions=new yt.x,this.id="cdk-accordion-"+Rte++,this._multi=!1}get multi(){return this._multi}set multi(t){this._multi=wi(t)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(t){this._stateChanges.next(t)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=u.lG2({type:i,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[u._Bn([{provide:fN,useExisting:i}]),u.TTD]}),i})(),kte=0,Ote=(()=>{class i{constructor(t,s,o){this.accordion=t,this._changeDetectorRef=s,this._expansionDispatcher=o,this._openCloseAllSubscription=fs.w0.EMPTY,this.closed=new u.vpe,this.opened=new u.vpe,this.destroyed=new u.vpe,this.expandedChange=new u.vpe,this.id="cdk-accordion-child-"+kte++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=o.listen((a,l)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===l&&this.id!==a&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=wi(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=wi(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(fN,12),u.Y36(u.sBO),u.Y36(Yz))},i.\u0275dir=u.lG2({type:i,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[u._Bn([{provide:fN,useValue:void 0}])]}),i})(),Fte=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})();const Lte=["body"];function Nte(i,e){}const Bte=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Vte=["mat-expansion-panel-header","*","mat-action-row"];function Ute(i,e){if(1&i&&u._UZ(0,"span",2),2&i){const t=u.oxw();u.Q6J("@indicatorRotate",t._getExpandedState())}}const Gte=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Hte=["mat-panel-title","mat-panel-description","*"],pN=new u.OlP("MAT_ACCORDION"),$z="225ms cubic-bezier(0.4,0.0,0.2,1)",Zz={indicatorRotate:Ol("indicatorRotate",[oo("collapsed, void",Bn({transform:"rotate(0deg)"})),oo("expanded",Bn({transform:"rotate(180deg)"})),es("expanded <=> collapsed, void => collapsed",ms($z))]),bodyExpansion:Ol("bodyExpansion",[oo("collapsed, void",Bn({height:"0px",visibility:"hidden"})),oo("expanded",Bn({height:"*",visibility:"visible"})),es("expanded <=> collapsed, void => collapsed",ms($z))])};let zte=(()=>{class i{constructor(t){this._template=t}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u.Rgc))},i.\u0275dir=u.lG2({type:i,selectors:[["ng-template","matExpansionPanelContent",""]]}),i})(),jte=0;const Kz=new u.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let Jz=(()=>{class i extends Ote{constructor(t,s,o,a,l,h,g){super(t,s,o),this._viewContainerRef=a,this._animationMode=h,this._hideToggle=!1,this.afterExpand=new u.vpe,this.afterCollapse=new u.vpe,this._inputChanges=new yt.x,this._headerId="mat-expansion-panel-header-"+jte++,this._bodyAnimationDone=new yt.x,this.accordion=t,this._document=l,this._bodyAnimationDone.pipe(vl((_,b)=>_.fromState===b.fromState&&_.toState===b.toState)).subscribe(_=>{"void"!==_.fromState&&("expanded"===_.toState?this.afterExpand.emit():"collapsed"===_.toState&&this.afterCollapse.emit())}),g&&(this.hideToggle=g.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=wi(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(zn(null),Dn(()=>this.expanded&&!this._portal),(0,Oi.q)(1)).subscribe(()=>{this._portal=new _R(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,s=this._body.nativeElement;return t===s||s.contains(t)}return!1}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(pN,12),u.Y36(u.sBO),u.Y36(Yz),u.Y36(u.s_b),u.Y36(_e),u.Y36(Yd,8),u.Y36(Kz,8))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-expansion-panel"]],contentQueries:function(t,s,o){if(1&t&&u.Suo(o,zte,5),2&t){let a;u.iGM(a=u.CRH())&&(s._lazyContent=a.first)}},viewQuery:function(t,s){if(1&t&&u.Gf(Lte,5),2&t){let o;u.iGM(o=u.CRH())&&(s._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,s){2&t&&u.ekj("mat-expanded",s.expanded)("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-expansion-panel-spacing",s._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[u._Bn([{provide:pN,useValue:void 0}]),u.qOj,u.TTD],ngContentSelectors:Vte,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,s){1&t&&(u.F$t(Bte),u.Hsn(0),u.TgZ(1,"div",0,1),u.NdJ("@bodyExpansion.done",function(a){return s._bodyAnimationDone.next(a)}),u.TgZ(3,"div",2),u.Hsn(4,1),u.YNc(5,Nte,0,0,"ng-template",3),u.qZA(),u.Hsn(6,2),u.qZA()),2&t&&(u.xp6(1),u.Q6J("@bodyExpansion",s._getExpandedState())("id",s.id),u.uIk("aria-labelledby",s._headerId),u.xp6(4),u.Q6J("cdkPortalOutlet",s._portal))},directives:[aD],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Zz.bodyExpansion]},changeDetection:0}),i})();class Wte{}const qte=eB(Wte);let Qz=(()=>{class i extends qte{constructor(t,s,o,a,l,h,g){super(),this.panel=t,this._element=s,this._focusMonitor=o,this._changeDetectorRef=a,this._animationMode=h,this._parentChangeSubscription=fs.w0.EMPTY;const _=t.accordion?t.accordion._stateChanges.pipe(Dn(b=>!(!b.hideToggle&&!b.togglePosition))):Ou.E;this.tabIndex=parseInt(g||"")||0,this._parentChangeSubscription=(0,mc.T)(t.opened,t.closed,_,t._inputChanges.pipe(Dn(b=>!!(b.hideToggle||b.disabled||b.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Dn(()=>t._containsFocus())).subscribe(()=>o.focusVia(s,"program")),l&&(this.expandedHeight=l.expandedHeight,this.collapsedHeight=l.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:QT(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,s){t?this._focusMonitor.focusVia(this._element,t,s):this._element.nativeElement.focus(s)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(Jz,1),u.Y36(u.SBq),u.Y36(sx),u.Y36(u.sBO),u.Y36(Kz,8),u.Y36(Yd,8),u.$8M("tabindex"))},i.\u0275cmp=u.Xpm({type:i,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,s){1&t&&u.NdJ("click",function(){return s._toggle()})("keydown",function(a){return s._keydown(a)}),2&t&&(u.uIk("id",s.panel._headerId)("tabindex",s.tabIndex)("aria-controls",s._getPanelId())("aria-expanded",s._isExpanded())("aria-disabled",s.panel.disabled),u.Udp("height",s._getHeaderHeight()),u.ekj("mat-expanded",s._isExpanded())("mat-expansion-toggle-indicator-after","after"===s._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===s._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===s._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[u.qOj],ngContentSelectors:Hte,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,s){1&t&&(u.F$t(Gte),u.TgZ(0,"span",0),u.Hsn(1),u.Hsn(2,1),u.Hsn(3,2),u.qZA(),u.YNc(4,Ute,1,1,"span",1)),2&t&&(u.xp6(4),u.Q6J("ngIf",s._showToggle()))},directives:[dr],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[Zz.indicatorRotate]},changeDetection:0}),i})(),Yte=(()=>{class i extends Pte{constructor(){super(...arguments),this._ownHeaders=new u.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(t){this._hideToggle=wi(t)}ngAfterContentInit(){this._headers.changes.pipe(zn(this._headers)).subscribe(t=>{this._ownHeaders.reset(t.filter(s=>s.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new Sj(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(t){this._keyManager.onKeydown(t)}_handleHeaderFocus(t){this._keyManager.updateActiveItem(t)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return i.\u0275fac=function(){let e;return function(s){return(e||(e=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,selectors:[["mat-accordion"]],contentQueries:function(t,s,o){if(1&t&&u.Suo(o,Qz,5),2&t){let a;u.iGM(a=u.CRH())&&(s._headers=a)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(t,s){2&t&&u.ekj("mat-accordion-multi",s.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[u._Bn([{provide:pN,useExisting:i}]),u.qOj]}),i})(),Xz=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Io,Ci,Fte,lD]]}),i})(),$te=(()=>{class i{constructor(t,s,o,a){this.authService=t,this.snackbar=s,this.router=o,this.themeService=a,this.scrollbarOptions={axis:"yx",theme:"minimal-dark"},this.testUser=new Ite("Timmeh","test@test.test","test1234")}ngOnInit(){}ngAfterViewInit(){document.getElementsByClassName("mat-drawer-inner-container")[0].style.maxHeight="80vh"}ngOnDestroy(){}toggle(t){}loginTestUser(){return(0,q.mG)(this,void 0,void 0,function*(){0==(yield this.authService.login(this.testUser.email,this.testUser.password))&&this.snackbar.openFromComponent(Xv,{data:"TestUser does not exists",duration:5e3,panelClass:["mat-toolbar","mat-accent"]}),this.router.navigate([""])})}createTestUser(){return(0,q.mG)(this,void 0,void 0,function*(){(yield this.authService.register(this.testUser))?(this.snackbar.openFromComponent(Xv,{data:"TestUser is created",duration:5e3,panelClass:["mat-toolbar","mat-accent"]}),this.router.navigate([""])):this.snackbar.openFromComponent(Xv,{data:"TestUser already exists",duration:5e3,panelClass:["mat-toolbar","mat-accent"]})})}deleteTestUser(){return(0,q.mG)(this,void 0,void 0,function*(){(yield this.authService.deleteAccount(this.testUser.password))?(this.snackbar.openFromComponent(Xv,{data:"TestUser is deleted",duration:5e3,panelClass:["mat-toolbar","mat-accent"]}),this.router.navigate(["/login"])):this.snackbar.openFromComponent(Xv,{data:"TestUser does not exists",duration:5e3,panelClass:["mat-toolbar","mat-accent"]})})}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(u0),u.Y36(cN),u.Y36(d),u.Y36(eE))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-dev-tool"]],decls:29,vars:0,consts:[["mat-icon-button","","color","accent",1,"dev-tool-button","position-fixed",3,"click"],["svgIcon","dev-tools",1,"dev-tool-icon"],[1,"dev-tool-text"],["fxLayout","column","mode","over","position","end",3,"opened","closed"],["sidetool",""],[1,"text-center","font-weight-bold","mt-3"],[1,"mt-5","mb-3"],[1,"my-mat-content"],["fxLayout","column",1,"justify-content-between"],["fxLayout","column"],["mat-button","",1,"my-theme","mb-3",3,"click"]],template:function(t,s){if(1&t){const o=u.EpF();u.TgZ(0,"button",0),u.NdJ("click",function(){return u.CHM(o),u.MAs(6).toggle()}),u._UZ(1,"mat-icon",1),u.TgZ(2,"span",2),u._uU(3,"Auto-Dev"),u.qZA(),u.qZA(),u.TgZ(4,"mat-sidenav-container"),u.TgZ(5,"mat-sidenav",3,4),u.NdJ("opened",function(){return s.toggle("opened")})("closed",function(){return s.toggle("closed")}),u.TgZ(7,"mat-accordion"),u.TgZ(8,"h5",5),u._uU(9,"Dev Automation "),u._UZ(10,"br"),u._uU(11," functions"),u.qZA(),u.TgZ(12,"mat-expansion-panel",6),u.TgZ(13,"mat-expansion-panel-header"),u.TgZ(14,"span",7),u._uU(15,"Authentication"),u.qZA(),u.qZA(),u.TgZ(16,"div",8),u.TgZ(17,"div",9),u.TgZ(18,"a",10),u.NdJ("click",function(){return s.loginTestUser()}),u.TgZ(19,"span"),u._uU(20,"Login Test User"),u.qZA(),u.qZA(),u.TgZ(21,"a",10),u.NdJ("click",function(){return s.createTestUser()}),u.TgZ(22,"span"),u._uU(23,"Create Test User"),u.qZA(),u.qZA(),u.TgZ(24,"a",10),u.NdJ("click",function(){return s.deleteTestUser()}),u.TgZ(25,"span"),u._uU(26,"Delete Test User"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(27,"mat-sidenav-content"),u._UZ(28,"router-outlet"),u.qZA(),u.qZA()}},directives:[wI,PI,_0,QO,eF,Yte,Jz,Qz,aE,xv,r0],styles:[".dev-tool-button[_ngcontent-%COMP%]{z-index:9;right:70px;bottom:80px}.dev-tool-icon[_ngcontent-%COMP%]{transform:scale(4)}.dev-tool-text[_ngcontent-%COMP%]{position:relative;top:70px;left:-55px}.my-mat-content[_ngcontent-%COMP%]{font-weight:700;font-size:17px}.mat-sidenav-container[_ngcontent-%COMP%]{min-height:100vh!important}a[_ngcontent-%COMP%]{font-size:15px}"]}),i})();function Zte(i,e){1&i&&(u.TgZ(0,"header",2),u._UZ(1,"language-switch"),u.qZA())}function Kte(i,e){1&i&&u._UZ(0,"app-dev-tool")}let Jte=(()=>{class i{constructor(t,s,o,a,l,h){this.updates=t,this.authService=s,this.translationService=o,this.themeService=a,this.iconRegistry=l,this.sanitizer=h,this.title="Fire Skeleton",this.update=!1,this.authenticated=!1,this.inProduction=true,o.bootstrap(),this.bootstrapSwUpdates(),this.bootstrapAuthentication(),this.bootstrapIconRegistry()}ngOnInit(){}ngAfterViewInit(){this.themeService.bootstrap()}bootstrapSwUpdates(){this.updates.available.subscribe(t=>{this.update=!0,this.updates.activateUpdate().then(()=>document.location.reload())})}bootstrapAuthentication(){this.authService.userEmail.subscribe(t=>{this.authenticated=!!t})}bootstrapIconRegistry(){this.iconRegistry.addSvgIcon("am-light",this.sanitizer.bypassSecurityTrustResourceUrl("assets/icons/am-light.svg")),this.iconRegistry.addSvgIcon("am-dark",this.sanitizer.bypassSecurityTrustResourceUrl("assets/icons/am-dark.svg")),this.iconRegistry.addSvgIcon("add-light",this.sanitizer.bypassSecurityTrustResourceUrl("assets/icons/add-light.svg")),this.iconRegistry.addSvgIcon("add-dark",this.sanitizer.bypassSecurityTrustResourceUrl("assets/icons/add-dark.svg")),this.iconRegistry.addSvgIcon("my-info",this.sanitizer.bypassSecurityTrustResourceUrl("assets/icons/info.svg"))}}return i.\u0275fac=function(t){return new(t||i)(u.Y36(Gz),u.Y36(u0),u.Y36(Wd),u.Y36(eE),u.Y36(mE),u.Y36(Gl))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-root"]],decls:3,vars:2,consts:[["class","d-flex w-100 w-md-60 justify-content-end position-absolute","style","z-index:2;",4,"ngIf"],[4,"ngIf"],[1,"d-flex","w-100","w-md-60","justify-content-end","position-absolute",2,"z-index","2"]],template:function(t,s){1&t&&(u.YNc(0,Zte,2,0,"header",0),u.YNc(1,Kte,1,0,"app-dev-tool",1),u._UZ(2,"router-outlet")),2&t&&(u.Q6J("ngIf",0==s.authenticated),u.xp6(1),u.Q6J("ngIf",0==s.inProduction))},directives:[dr,rU,$te,r0],styles:[""]}),i})(),l4=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[HO]]}),i})(),c4=(()=>{class i{constructor(t,s){Gs(s)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,s=[]){return{ngModule:i,providers:t.serverLoaded?[{provide:$d,useValue:Object.assign(Object.assign({},zO),t)},{provide:jO,useValue:s,multi:!0},{provide:v0,useValue:!0}]:[{provide:$d,useValue:Object.assign(Object.assign({},zO),t)},{provide:jO,useValue:s,multi:!0}]}}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(v0),u.LFG(u.Lbi))},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[YB,kB,l4],YB,kB,l4]}),i})(),u4=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Ci],Ci]}),i})();const xie={provide:new u.OlP("mat-select-scroll-strategy"),deps:[_f],useFactory:function wie(i){return()=>i.scrollStrategies.reposition()}};let gN=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[xie],imports:[[Io,oC,oB,Ci],eg,ME,oB,Ci]}),i})(),Lie=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[ZO]]}),i})(),x4=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Lie,Ci],Ci]}),i})();const ire={provide:new u.OlP("mat-tooltip-scroll-strategy"),deps:[_f],useFactory:function nre(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}};let sre=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[ire],imports:[[p3,Io,oC,Ci],Ci,eg]}),i})(),EN=(()=>{class i{constructor(){this.changes=new yt.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,s,o)=>{if(0==o||0==s)return`0 of ${o}`;const a=t*s;return`${a+1} \u2013 ${a<(o=Math.max(o,0))?Math.min(a+s,o):a+s} of ${o}`}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ure={provide:EN,deps:[[new u.FiY,new u.tp0,EN]],useFactory:function cre(i){return i||new EN}};let C4=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[ure],imports:[[Io,lE,gN,sre,Ci]]}),i})(),bre=(()=>{class i{constructor(){this.changes=new yt.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(t,s){return`${t} \u2013 ${s}`}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Cre={provide:new u.OlP("mat-datepicker-scroll-strategy"),deps:[_f],useFactory:function xre(i){return()=>i.scrollStrategies.reposition()}};let D4=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[bre,Cre],imports:[[Io,lE,oC,p3,lD,Ci],eg]}),i})();const Rre={provide:new u.OlP("mat-menu-scroll-strategy"),deps:[_f],useFactory:function Ire(i){return()=>i.scrollStrategies.reposition()}};let T4=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[Rre],imports:[[Io,Ci,bI,oC],eg,Ci]}),i})();const Pre=[c4,XB,ME,u4,lE,Rz,gU,gN,x4,C4,aU,D4,tB,lN,aB,zB,Xz,T4];let kre=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Pre],c4,XB,ME,u4,lE,Rz,gU,gN,x4,C4,aU,D4,tB,lN,aB,zB,Xz,T4]}),i})();function DN(i,e,t){for(let s in e)if(e.hasOwnProperty(s)){const o=e[s];o?i.setProperty(s,o,(null==t?void 0:t.has(s))?"important":""):i.removeProperty(s)}return i}function hC(i,e){const t=e?"":"none";DN(i.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function I4(i,e,t){DN(i.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function LR(i,e){return e&&"none"!=e?i+" "+e:i}function R4(i){const e=i.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(i)*e}function AN(i,e){return i.getPropertyValue(e).split(",").map(s=>s.trim())}function TN(i){const e=i.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function IN(i,e,t){const{top:s,bottom:o,left:a,right:l}=i;return t>=s&&t<=o&&e>=a&&e<=l}function fD(i,e,t){i.top+=e,i.bottom=i.top+i.height,i.left+=t,i.right=i.left+i.width}function P4(i,e,t,s){const{top:o,right:a,bottom:l,left:h,width:g,height:_}=i,b=g*e,x=_*e;return s>o-x&&s<l+x&&t>h-b&&t<a+b}class k4{constructor(e,t){this._document=e,this._viewportRuler=t,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:TN(t)})})}handleScroll(e){const t=qd(e),s=this.positions.get(t);if(!s)return null;const o=s.scrollPosition;let a,l;if(t===this._document){const _=this._viewportRuler.getViewportScrollPosition();a=_.top,l=_.left}else a=t.scrollTop,l=t.scrollLeft;const h=o.top-a,g=o.left-l;return this.positions.forEach((_,b)=>{_.clientRect&&t!==b&&t.contains(b)&&fD(_.clientRect,h,g)}),o.top=a,o.left=l,{top:h,left:g}}}function O4(i){const e=i.cloneNode(!0),t=e.querySelectorAll("[id]"),s=i.nodeName.toLowerCase();e.removeAttribute("id");for(let o=0;o<t.length;o++)t[o].removeAttribute("id");return"canvas"===s?N4(i,e):("input"===s||"select"===s||"textarea"===s)&&L4(i,e),F4("canvas",i,e,N4),F4("input, textarea, select",i,e,L4),e}function F4(i,e,t,s){const o=e.querySelectorAll(i);if(o.length){const a=t.querySelectorAll(i);for(let l=0;l<o.length;l++)s(o[l],a[l])}}let Lre=0;function L4(i,e){"file"!==e.type&&(e.value=i.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${Lre++}`)}function N4(i,e){const t=e.getContext("2d");if(t)try{t.drawImage(i,0,0)}catch(s){}}const B4=Qp({passive:!0}),V4=Qp({passive:!1}),RN=new Set(["position"]);class Bre{constructor(e,t,s,o,a,l){this._config=t,this._document=s,this._ngZone=o,this._viewportRuler=a,this._dragDropRegistry=l,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new yt.x,this._pointerMoveSubscription=fs.w0.EMPTY,this._pointerUpSubscription=fs.w0.EMPTY,this._scrollSubscription=fs.w0.EMPTY,this._resizeSubscription=fs.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new yt.x,this.started=new yt.x,this.released=new yt.x,this.ended=new yt.x,this.entered=new yt.x,this.exited=new yt.x,this.dropped=new yt.x,this.moved=this._moveEvents,this._pointerDown=h=>{if(this.beforeStarted.next(),this._handles.length){const g=this._handles.find(_=>h.target&&(h.target===_||_.contains(h.target)));g&&!this._disabledHandles.has(g)&&!this.disabled&&this._initializeDragSequence(g,h)}else this.disabled||this._initializeDragSequence(this._rootElement,h)},this._pointerMove=h=>{const g=this._getPointerPositionOnPage(h);if(!this._hasStartedDragging){if(Math.abs(g.x-this._pickupPositionOnPage.x)+Math.abs(g.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const M=Date.now()>=this._dragStartTime+this._getDragStartDelay(h),T=this._dropContainer;if(!M)return void this._endDragSequence(h);(!T||!T.isDragging()&&!T.isReceiving())&&(h.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(h)))}return}this._boundaryElement&&(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),h.preventDefault();const _=this._getConstrainedPointerPosition(g);if(this._hasMoved=!0,this._lastKnownPointerPosition=g,this._updatePointerDirectionDelta(_),this._dropContainer)this._updateActiveDropContainer(_,g);else{const b=this._activeTransform;b.x=_.x-this._pickupPositionOnPage.x+this._passiveTransform.x,b.y=_.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(b.x,b.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:_,event:h,distance:this._getDragDistance(_),delta:this._pointerDirectionDelta})})},this._pointerUp=h=>{this._endDragSequence(h)},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new k4(s,a),l.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=wi(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(s=>hC(s,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(s=>Fs(s)),this._handles.forEach(s=>hC(s,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(s=>{this._handles.indexOf(s)>-1&&t.add(s)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=Fs(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,V4),t.addEventListener("touchstart",this._pointerDown,B4)}),this._initialTransform=void 0,this._rootElement=t),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Fs(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){var e,t;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(e=this._rootElement)||void 0===e||e.remove()),null===(t=this._anchor)||void 0===t||t.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),hC(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),hC(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var e,t;null===(e=this._preview)||void 0===e||e.remove(),null===(t=this._previewRef)||void 0===t||t.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var e,t;null===(e=this._placeholder)||void 0===e||e.remove(),null===(t=this._placeholderRef)||void 0===t||t.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){pD(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const s=this._rootElement,o=s.parentNode,a=this._placeholder=this._createPlaceholderElement(),l=this._anchor=this._anchor||this._document.createComment(""),h=this._getShadowRoot();o.insertBefore(l,s),this._initialTransform=s.style.transform||"",this._preview=this._createPreviewElement(),I4(s,!1,RN),this._document.body.appendChild(o.replaceChild(a,s)),this._getPreviewInsertionPoint(o,h).appendChild(this._preview),this.started.next({source:this}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const s=this.isDragging(),o=pD(t),a=!o&&0!==t.button,l=this._rootElement,h=qd(t),g=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),_=o?pO(t):fO(t);if(h&&h.draggable&&"mousedown"===t.type&&t.preventDefault(),s||a||g||_)return;if(this._handles.length){const S=l.style;this._rootElementTapHighlight=S.webkitTapHighlightColor||"",S.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(S=>this._updateOnScroll(S)),this._boundaryElement&&(this._boundaryRect=TN(this._boundaryElement));const b=this._previewTemplate;this._pickupPositionInElement=b&&b.template&&!b.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);const x=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:x.x,y:x.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){I4(this._rootElement,!0,RN),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,s=t.getItemIndex(this),o=this._getPointerPositionOnPage(e),a=this._getDragDistance(o),l=t._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:a,dropPoint:o}),this.dropped.next({item:this,currentIndex:s,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:l,distance:a,dropPoint:o}),t.drop(this,s,this._initialIndex,this._initialContainer,l,a,o),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:s,y:o}){let a=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!a&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(a=this._initialContainer),a&&a!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=a,this._dropContainer.enter(this,e,t,a===this._initialContainer&&a.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:a,currentIndex:a.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(s,o),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,s=e?e.template:null;let o;if(s&&e){const a=e.matchSize?this._rootElement.getBoundingClientRect():null,l=e.viewContainer.createEmbeddedView(s,e.context);l.detectChanges(),o=G4(l,this._document),this._previewRef=l,e.matchSize?H4(o,a):o.style.transform=NR(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const a=this._rootElement;o=O4(a),H4(o,a.getBoundingClientRect()),this._initialTransform&&(o.style.transform=this._initialTransform)}return DN(o.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},RN),hC(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(a=>o.classList.add(a)):o.classList.add(t)),o}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function Fre(i){const e=getComputedStyle(i),t=AN(e,"transition-property"),s=t.find(h=>"transform"===h||"all"===h);if(!s)return 0;const o=t.indexOf(s),a=AN(e,"transition-duration"),l=AN(e,"transition-delay");return R4(a[o])+R4(l[o])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(s=>{const o=l=>{var h;(!l||qd(l)===this._preview&&"transform"===l.propertyName)&&(null===(h=this._preview)||void 0===h||h.removeEventListener("transitionend",o),s(),clearTimeout(a))},a=setTimeout(o,1.5*t);this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let s;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),s=G4(this._placeholderRef,this._document)):s=O4(this._rootElement),s.classList.add("cdk-drag-placeholder"),s}_getPointerPositionInElement(e,t){const s=this._rootElement.getBoundingClientRect(),o=e===this._rootElement?null:e,a=o?o.getBoundingClientRect():s,l=pD(t)?t.targetTouches[0]:t,h=this._getViewportScrollPosition();return{x:a.left-s.left+(l.pageX-a.left-h.left),y:a.top-s.top+(l.pageY-a.top-h.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),s=pD(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,o=s.pageX-t.left,a=s.pageY-t.top;if(this._ownerSVGElement){const l=this._ownerSVGElement.getScreenCTM();if(l){const h=this._ownerSVGElement.createSVGPoint();return h.x=o,h.y=a,h.matrixTransform(l.inverse())}}return{x:o,y:a}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:s,y:o}=this.constrainPosition?this.constrainPosition(e,this):e;if("x"===this.lockAxis||"x"===t?o=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(s=this._pickupPositionOnPage.x),this._boundaryRect){const{x:a,y:l}=this._pickupPositionInElement,h=this._boundaryRect,g=this._previewRect,_=h.top+l,b=h.bottom-(g.height-l);s=U4(s,h.left+a,h.right-(g.width-a)),o=U4(o,_,b)}return{x:s,y:o}}_updatePointerDirectionDelta(e){const{x:t,y:s}=e,o=this._pointerDirectionDelta,a=this._pointerPositionAtLastDirectionChange,l=Math.abs(t-a.x),h=Math.abs(s-a.y);return l>this._config.pointerDirectionChangeThreshold&&(o.x=t>a.x?1:-1,a.x=t),h>this._config.pointerDirectionChangeThreshold&&(o.y=s>a.y?1:-1,a.y=s),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,hC(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,V4),e.removeEventListener("touchstart",this._pointerDown,B4)}_applyRootElementTransform(e,t){const s=NR(e,t),o=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=o.transform&&"none"!=o.transform?o.transform:""),o.transform=LR(s,this._initialTransform)}_applyPreviewTransform(e,t){var s;const o=(null===(s=this._previewTemplate)||void 0===s?void 0:s.template)?void 0:this._initialTransform,a=NR(e,t);this._preview.style.transform=LR(a,o)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const s=this._boundaryElement.getBoundingClientRect(),o=this._rootElement.getBoundingClientRect();if(0===s.width&&0===s.height||0===o.width&&0===o.height)return;const a=s.left-o.left,l=o.right-s.right,h=s.top-o.top,g=o.bottom-s.bottom;s.width>o.width?(a>0&&(e+=a),l>0&&(e-=l)):e=0,s.height>o.height?(h>0&&(t+=h),g>0&&(t-=g)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:pD(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const s=qd(e);this._boundaryRect&&s!==this._boundaryElement&&s.contains(this._boundaryElement)&&fD(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const e=this._parentPositions.positions.get(this._document);return e?e.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=aO(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const s=this._previewContainer||"global";if("parent"===s)return e;if("global"===s){const o=this._document;return t||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return Fs(s)}}function NR(i,e){return`translate3d(${Math.round(i)}px, ${Math.round(e)}px, 0)`}function U4(i,e,t){return Math.max(e,Math.min(t,i))}function pD(i){return"t"===i.type[0]}function G4(i,e){const t=i.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const s=e.createElement("div");return t.forEach(o=>s.appendChild(o)),s}function H4(i,e){i.style.width=`${e.width}px`,i.style.height=`${e.height}px`,i.style.transform=NR(e.left,e.top)}function gD(i,e){return Math.max(0,Math.min(e,i))}class Ure{constructor(e,t,s,o,a){this._dragDropRegistry=t,this._ngZone=o,this._viewportRuler=a,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new yt.x,this.entered=new yt.x,this.exited=new yt.x,this.dropped=new yt.x,this.sorted=new yt.x,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=fs.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new yt.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function Ore(i=0,e=os.z){return i<0&&(i=0),$O(i,i,e)}(0,NB).pipe(er(this._stopScrollTimers)).subscribe(()=>{const l=this._scrollNode,h=this.autoScrollStep;1===this._verticalScrollDirection?l.scrollBy(0,-h):2===this._verticalScrollDirection&&l.scrollBy(0,h),1===this._horizontalScrollDirection?l.scrollBy(-h,0):2===this._horizontalScrollDirection&&l.scrollBy(h,0)})},this.element=Fs(e),this._document=s,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new k4(s,a)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,s,o){let a;this._draggingStarted(),null==o?(a=this.sortingDisabled?this._draggables.indexOf(e):-1,-1===a&&(a=this._getItemIndexFromPointerPosition(e,t,s))):a=o;const l=this._activeDraggables,h=l.indexOf(e),g=e.getPlaceholderElement();let _=l[a];if(_===e&&(_=l[a+1]),!_&&(null==a||-1===a||a<l.length-1)&&this._shouldEnterAsFirstChild(t,s)&&(_=l[0]),h>-1&&l.splice(h,1),_&&!this._dragDropRegistry.isDragging(_)){const b=_.getRootElement();b.parentElement.insertBefore(g,b),l.splice(a,0,e)}else Fs(this.element).appendChild(g),l.push(e);g.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,s,o,a,l,h){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:s,container:this,previousContainer:o,isPointerOverContainer:a,distance:l,dropPoint:h})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(s=>s._withDropContainer(this)),this.isDragging()&&(t.filter(o=>o.isDragging()).every(o=>-1===e.indexOf(o))?this._reset():this._cacheItems()),this}withDirection(e){return this._direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._orientation=e,this}withScrollableParents(e){const t=Fs(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(s=>s.drag===e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,s,o){if(this.sortingDisabled||!this._clientRect||!P4(this._clientRect,.05,t,s))return;const a=this._itemPositions,l=this._getItemIndexFromPointerPosition(e,t,s,o);if(-1===l&&a.length>0)return;const h="horizontal"===this._orientation,g=a.findIndex(L=>L.drag===e),_=a[l],x=_.clientRect,S=g>l?1:-1,M=this._getItemOffsetPx(a[g].clientRect,x,S),T=this._getSiblingOffsetPx(g,a,S),I=a.slice();(function Vre(i,e,t){const s=gD(e,i.length-1),o=gD(t,i.length-1);if(s===o)return;const a=i[s],l=o<s?-1:1;for(let h=s;h!==o;h+=l)i[h]=i[h+l];i[o]=a})(a,g,l),this.sorted.next({previousIndex:g,currentIndex:l,container:this,item:e}),a.forEach((L,k)=>{if(I[k]===L)return;const R=L.drag===e,U=R?M:T,N=R?e.getPlaceholderElement():L.drag.getRootElement();L.offset+=U,h?(N.style.transform=LR(`translate3d(${Math.round(L.offset)}px, 0, 0)`,L.initialTransform),fD(L.clientRect,0,U)):(N.style.transform=LR(`translate3d(0, ${Math.round(L.offset)}px, 0)`,L.initialTransform),fD(L.clientRect,U,0))}),this._previousSwap.overlaps=IN(x,t,s),this._previousSwap.drag=_.drag,this._previousSwap.delta=h?o.x:o.y}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let s,o=0,a=0;if(this._parentPositions.positions.forEach((l,h)=>{h===this._document||!l.clientRect||s||P4(l.clientRect,.05,e,t)&&([o,a]=function Gre(i,e,t,s){const o=W4(e,s),a=q4(e,t);let l=0,h=0;if(o){const g=i.scrollTop;1===o?g>0&&(l=1):i.scrollHeight-g>i.clientHeight&&(l=2)}if(a){const g=i.scrollLeft;1===a?g>0&&(h=1):i.scrollWidth-g>i.clientWidth&&(h=2)}return[l,h]}(h,l.clientRect,e,t),(o||a)&&(s=h))}),!o&&!a){const{width:l,height:h}=this._viewportRuler.getViewportSize(),g={width:l,height:h,top:0,right:l,bottom:h,left:0};o=W4(g,t),a=q4(g,e),s=window}s&&(o!==this._verticalScrollDirection||a!==this._horizontalScrollDirection||s!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=a,this._scrollNode=s,(o||a)&&s?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=Fs(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=Fs(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_cacheItemPositions(){const e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(t=>{const s=t.getVisibleElement();return{drag:t,offset:0,initialTransform:s.style.transform||"",clientRect:TN(s)}}).sort((t,s)=>e?t.clientRect.left-s.clientRect.left:t.clientRect.top-s.clientRect.top)}_reset(){this._isDragging=!1;const e=Fs(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(t=>{var s;const o=t.getRootElement();if(o){const a=null===(s=this._itemPositions.find(l=>l.drag===t))||void 0===s?void 0:s.initialTransform;o.style.transform=a||""}}),this._siblings.forEach(t=>t._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(e,t,s){const o="horizontal"===this._orientation,a=t[e].clientRect,l=t[e+-1*s];let h=a[o?"width":"height"]*s;if(l){const g=o?"left":"top",_=o?"right":"bottom";-1===s?h-=l.clientRect[g]-a[_]:h+=a[g]-l.clientRect[_]}return h}_getItemOffsetPx(e,t,s){const o="horizontal"===this._orientation;let a=o?t.left-e.left:t.top-e.top;return-1===s&&(a+=o?t.width-e.width:t.height-e.height),a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const s=this._itemPositions,o="horizontal"===this._orientation;if(s[0].drag!==this._activeDraggables[0]){const l=s[s.length-1].clientRect;return o?e>=l.right:t>=l.bottom}{const l=s[0].clientRect;return o?e<=l.left:t<=l.top}}_getItemIndexFromPointerPosition(e,t,s,o){const a="horizontal"===this._orientation,l=this._itemPositions.findIndex(({drag:h,clientRect:g})=>{if(h===e)return!1;if(o){const _=a?o.x:o.y;if(h===this._previousSwap.drag&&this._previousSwap.overlaps&&_===this._previousSwap.delta)return!1}return a?t>=Math.floor(g.left)&&t<Math.floor(g.right):s>=Math.floor(g.top)&&s<Math.floor(g.bottom)});return-1!==l&&this.sortPredicate(l,e,this)?l:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(e,t){return null!=this._clientRect&&IN(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,s){return this._siblings.find(o=>o._canReceive(e,t,s))}_canReceive(e,t,s){if(!this._clientRect||!IN(this._clientRect,t,s)||!this.enterPredicate(e,this))return!1;const o=this._getShadowRoot().elementFromPoint(t,s);if(!o)return!1;const a=Fs(this.element);return o===a||a.contains(o)}_startReceiving(e,t){const s=this._activeSiblings;!s.has(e)&&t.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(s.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&(this._itemPositions.forEach(({clientRect:s})=>{fD(s,t.top,t.left)}),this._itemPositions.forEach(({drag:s})=>{this._dragDropRegistry.isDragging(s)&&s._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=aO(Fs(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._activeDraggables.filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function W4(i,e){const{top:t,bottom:s,height:o}=i,a=.05*o;return e>=t-a&&e<=t+a?1:e>=s-a&&e<=s+a?2:0}function q4(i,e){const{left:t,right:s,width:o}=i,a=.05*o;return e>=t-a&&e<=t+a?1:e>=s-a&&e<=s+a?2:0}const BR=Qp({passive:!1,capture:!0});let Hre=(()=>{class i{constructor(t,s){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new yt.x,this.pointerUp=new yt.x,this.scroll=new yt.x,this._preventDefaultWhileDragging=o=>{this._activeDragInstances.length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=s}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,BR)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,BR)}startDragging(t,s){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const o=s.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:a=>this.pointerUp.next(a),options:!0}).set("scroll",{handler:a=>this.scroll.next(a),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:BR}),o||this._globalListeners.set("mousemove",{handler:a=>this.pointerMove.next(a),options:BR}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((a,l)=>{this._document.addEventListener(l,a.handler,a.options)})})}}stopDragging(t){const s=this._activeDragInstances.indexOf(t);s>-1&&(this._activeDragInstances.splice(s,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const s=[this.scroll];return t&&t!==this._document&&s.push(new Ri.y(o=>this._ngZone.runOutsideAngular(()=>{const l=h=>{this._activeDragInstances.length&&o.next(h)};return t.addEventListener("scroll",l,!0),()=>{t.removeEventListener("scroll",l,!0)}}))),(0,mc.T)(...s)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,s)=>{this._document.removeEventListener(s,t.handler,t.options)}),this._globalListeners.clear()}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(u.R0b),u.LFG(_e))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const zre={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let jre=(()=>{class i{constructor(t,s,o,a){this._document=t,this._ngZone=s,this._viewportRuler=o,this._dragDropRegistry=a}createDrag(t,s=zre){return new Bre(t,s,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new Ure(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_e),u.LFG(u.R0b),u.LFG(fE),u.LFG(Hre))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Y4=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[jre],imports:[eg]}),i})();const Wre=[K3,Y4,wF,tU,iU];let qre=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Wre],K3,Y4,wF,tU,iU]}),i})(),Yre=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i,bootstrap:[Jte]}),i.\u0275inj=u.cJS({providers:[{provide:F2,useValue:_i_authenticationClient_baseUrl}],imports:[[Fc,_te,ii.hO.initializeApp(_i_firebase),YA,v6,Tte.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"}),P6,_6.forRoot({loader:{provide:$M,useFactory:$re,deps:[QM]}}),kre,qre]]}),i})();function $re(i){return new k6(i)}(0,u.G48)(),Ig().bootstrapModule(Yre).catch(i=>console.error(i))},5867:(tn,tt,Q)=>{Q.d(tt,{Z:()=>u.Z});var u=Q(8367);u.Z.registerVersion("firebase","8.10.0","app"),u.Z.SDK_VERSION="8.10.0"},7315:(tn,tt,Q)=>{Q.r(tt);var u=Q(8367);(function(){var z,Ve="function"==typeof Object.defineProperties?Object.defineProperty:function(c,m,w){c!=Array.prototype&&c!=Object.prototype&&(c[m]=w.value)},je=function Te(c){c=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,c];for(var m=0;m<c.length;++m){var w=c[m];if(w&&w.Math==Math)return w}return globalThis}(this);function _e(c){var m=0;return function(){return m<c.length?{done:!1,value:c[m++]}:{done:!0}}}function We(c){var m="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];return m?m.call(c):{next:_e(c)}}!function $e(c,m){if(m){var w=je;c=c.split(".");for(var E=0;E<c.length-1;E++){var O=c[E];O in w||(w[O]={}),w=w[O]}(m=m(E=w[c=c[c.length-1]]))!=E&&null!=m&&Ve(w,c,{configurable:!0,writable:!0,value:m})}}("Promise",function(c){function m(H){this.b=0,this.c=void 0,this.a=[];var te=this.f();try{H(te.resolve,te.reject)}catch(Pe){te.reject(Pe)}}function w(){this.a=null}function E(H){return H instanceof m?H:new m(function(te){te(H)})}if(c)return c;w.prototype.b=function(H){if(null==this.a){this.a=[];var te=this;this.c(function(){te.g()})}this.a.push(H)};var O=je.setTimeout;w.prototype.c=function(H){O(H,0)},w.prototype.g=function(){for(;this.a&&this.a.length;){var H=this.a;this.a=[];for(var te=0;te<H.length;++te){var Pe=H[te];H[te]=null;try{Pe()}catch(Qe){this.f(Qe)}}}this.a=null},w.prototype.f=function(H){this.c(function(){throw H})},m.prototype.f=function(){function H(Qe){return function(En){Pe||(Pe=!0,Qe.call(te,En))}}var te=this,Pe=!1;return{resolve:H(this.m),reject:H(this.g)}},m.prototype.m=function(H){if(H===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(H instanceof m)this.s(H);else{e:switch(typeof H){case"object":var te=null!=H;break e;case"function":te=!0;break e;default:te=!1}te?this.v(H):this.h(H)}},m.prototype.v=function(H){var te=void 0;try{te=H.then}catch(Pe){return void this.g(Pe)}"function"==typeof te?this.u(te,H):this.h(H)},m.prototype.g=function(H){this.i(2,H)},m.prototype.h=function(H){this.i(1,H)},m.prototype.i=function(H,te){if(0!=this.b)throw Error("Cannot settle("+H+", "+te+"): Promise already settled in state"+this.b);this.b=H,this.c=te,this.l()},m.prototype.l=function(){if(null!=this.a){for(var H=0;H<this.a.length;++H)V.b(this.a[H]);this.a=null}};var V=new w;return m.prototype.s=function(H){var te=this.f();H.Ra(te.resolve,te.reject)},m.prototype.u=function(H,te){var Pe=this.f();try{H.call(te,Pe.resolve,Pe.reject)}catch(Qe){Pe.reject(Qe)}},m.prototype.then=function(H,te){function Pe(vi,hs){return"function"==typeof vi?function(dc){try{Qe(vi(dc))}catch(Pp){En(Pp)}}:hs}var Qe,En,ki=new m(function(vi,hs){Qe=vi,En=hs});return this.Ra(Pe(H,Qe),Pe(te,En)),ki},m.prototype.catch=function(H){return this.then(void 0,H)},m.prototype.Ra=function(H,te){function Pe(){switch(Qe.b){case 1:H(Qe.c);break;case 2:te(Qe.c);break;default:throw Error("Unexpected state: "+Qe.b)}}var Qe=this;null==this.a?V.b(Pe):this.a.push(Pe)},m.resolve=E,m.reject=function(H){return new m(function(te,Pe){Pe(H)})},m.race=function(H){return new m(function(te,Pe){for(var Qe=We(H),En=Qe.next();!En.done;En=Qe.next())E(En.value).Ra(te,Pe)})},m.all=function(H){var te=We(H),Pe=te.next();return Pe.done?E([]):new m(function(Qe,En){function ki(dc){return function(Pp){vi[dc]=Pp,0==--hs&&Qe(vi)}}var vi=[],hs=0;do{vi.push(void 0),hs++,E(Pe.value).Ra(ki(vi.length-1),En),Pe=te.next()}while(!Pe.done)})},m});var Me=Me||{},Y=this||self,fe=/^[\w+/_-]+[=]{0,2}$/,le=null;function ke(c){return(c=c.querySelector&&c.querySelector("script[nonce]"))&&(c=c.nonce||c.getAttribute("nonce"))&&fe.test(c)?c:""}function Ce(){}function Be(c){var m=typeof c;return"object"!=m?m:c?Array.isArray(c)?"array":m:"null"}function Pt(c){var m=Be(c);return"array"==m||"object"==m&&"number"==typeof c.length}function qe(c){return"function"==Be(c)}function st(c){var m=typeof c;return"object"==m&&null!=c||"function"==m}function Ot(c){return Object.prototype.hasOwnProperty.call(c,un)&&c[un]||(c[un]=++Lt)}var un="closure_uid_"+(1e9*Math.random()>>>0),Lt=0;function xt(c,m,w){return c.call.apply(c.bind,arguments)}function ot(c,m,w){if(!c)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,E),c.apply(m,O)}}return function(){return c.apply(m,arguments)}}function lt(c,m,w){return(lt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xt:ot).apply(null,arguments)}function Xt(c,m){var w=Array.prototype.slice.call(arguments,1);return function(){var E=w.slice();return E.push.apply(E,arguments),c.apply(this,E)}}var Nn=Date.now;function ue(c,m){function w(){}w.prototype=m.prototype,c.bb=m.prototype,c.prototype=new w,c.prototype.constructor=c}function Ue(c){return c}function $(c,m,w){this.code=ut+c,this.message=m||ve[c]||"",this.a=w||null}function Ne(c){var m=c&&c.code;return m?new $(m.substring(ut.length),c.message,c.serverResponse):null}ue($,Error),$.prototype.w=function(){var c={code:this.code,message:this.message};return this.a&&(c.serverResponse=this.a),c},$.prototype.toJSON=function(){return this.w()};var wn,ut="auth/",ve={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},vt={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function bt(c){for(var m in vt)if(vt[m].id===c)return{firebaseEndpoint:(c=vt[m]).Ua,secureTokenEndpoint:c.$a,identityPlatformEndpoint:c.Xa};return null}function Nt(c){if(!c)return!1;try{return!!c.$goog_Thenable}catch(m){return!1}}function Bt(c){if(Error.captureStackTrace)Error.captureStackTrace(this,Bt);else{var m=Error().stack;m&&(this.stack=m)}c&&(this.message=String(c))}function Qt(c,m){for(var w="",E=(c=c.split("%s")).length-1,O=0;O<E;O++)w+=c[O]+(O<m.length?m[O]:"%s");Bt.call(this,w+c[E])}function pt(c,m){throw new Qt("Failure"+(c?": "+c:""),Array.prototype.slice.call(arguments,1))}function xn(c,m){this.c=c,this.f=m,this.b=0,this.a=null}function nn(c,m){c.f(m),100>c.b&&(c.b++,m.next=c.a,c.a=m)}function mr(){this.b=this.a=null}wn=bt("__EID__")?"__EID__":void 0,ue(Bt,Error),Bt.prototype.name="CustomError",ue(Qt,Bt),Qt.prototype.name="AssertionError",xn.prototype.get=function(){if(0<this.b){this.b--;var c=this.a;this.a=c.next,c.next=null}else c=this.c();return c};var Yr=new xn(function(){return new pa},function(c){c.reset()});function Mr(){var c=mC,m=null;return c.a&&(m=c.a,c.a=c.a.next,c.a||(c.b=null),m.next=null),m}function pa(){this.next=this.b=this.a=null}mr.prototype.add=function(c,m){var w=Yr.get();w.set(c,m),this.b?this.b.next=w:this.a=w,this.b=w},pa.prototype.set=function(c,m){this.a=c,this.b=m,this.next=null},pa.prototype.reset=function(){this.next=this.b=this.a=null};var Cf=Array.prototype.indexOf?function(c,m){return Array.prototype.indexOf.call(c,m,void 0)}:function(c,m){if("string"==typeof c)return"string"!=typeof m||1!=m.length?-1:c.indexOf(m,0);for(var w=0;w<c.length;w++)if(w in c&&c[w]===m)return w;return-1},zi=Array.prototype.forEach?function(c,m,w){Array.prototype.forEach.call(c,m,w)}:function(c,m,w){for(var E=c.length,O="string"==typeof c?c.split(""):c,V=0;V<E;V++)V in O&&m.call(w,O[V],V,c)},zu=Array.prototype.filter?function(c,m){return Array.prototype.filter.call(c,m,void 0)}:function(c,m){for(var w=c.length,E=[],O=0,V="string"==typeof c?c.split(""):c,H=0;H<w;H++)if(H in V){var te=V[H];m.call(void 0,te,H,c)&&(E[O++]=te)}return E},$n=Array.prototype.map?function(c,m){return Array.prototype.map.call(c,m,void 0)}:function(c,m){for(var w=c.length,E=Array(w),O="string"==typeof c?c.split(""):c,V=0;V<w;V++)V in O&&(E[V]=m.call(void 0,O[V],V,c));return E},ai=Array.prototype.some?function(c,m){return Array.prototype.some.call(c,m,void 0)}:function(c,m){for(var w=c.length,E="string"==typeof c?c.split(""):c,O=0;O<w;O++)if(O in E&&m.call(void 0,E[O],O,c))return!0;return!1};function jt(c,m){return 0<=Cf(c,m)}function ir(c,m){var w;return(w=0<=(m=Cf(c,m)))&&Array.prototype.splice.call(c,m,1),w}function fi(c,m){!function Xd(c,m){for(var w="string"==typeof c?c.split(""):c,E=c.length-1;0<=E;--E)E in w&&m.call(void 0,w[E],E,c)}(c,function(E,O){m.call(void 0,E,O,c)&&Array.prototype.splice.call(c,O,1)})}function ji(c){return Array.prototype.concat.apply([],arguments)}function vr(c){var m=c.length;if(0<m){for(var w=Array(m),E=0;E<m;E++)w[E]=c[E];return w}return[]}var Zn,vg=String.prototype.trim?function(c){return c.trim()}:function(c){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(c)[1]},ma=/&/g,va=/</g,Sf=/>/g,pC=/"/g,Ai=/'/g,pn=/\x00/g,Rn=/[\x00&<>"']/;function Ti(c,m){return-1!=c.indexOf(m)}function ju(c,m){return c<m?-1:c>m?1:0}e:{var eh=Y.navigator;if(eh){var _a=eh.userAgent;if(_a){Zn=_a;break e}}Zn=""}function Wi(c){return Ti(Zn,c)}function _n(c,m){for(var w in c)m.call(void 0,c[w],w,c)}function oe(c){for(var m in c)return!1;return!0}function ie(c){var w,m={};for(w in c)m[w]=c[w];return m}var me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function we(c,m){for(var w,E,O=1;O<arguments.length;O++){for(w in E=arguments[O])c[w]=E[w];for(var V=0;V<me.length;V++)w=me[V],Object.prototype.hasOwnProperty.call(E,w)&&(c[w]=E[w])}}function pe(c,m){e:{try{var w=c&&c.ownerDocument,E=w&&(w.defaultView||w.parentWindow);if((E=E||Y).Element&&E.Location){var O=E;break e}}catch(H){}O=null}if(O&&void 0!==O[m]&&(!c||!(c instanceof O[m])&&(c instanceof O.Location||c instanceof O.Element))){if(st(c))try{var V=c.constructor.displayName||c.constructor.name||Object.prototype.toString.call(c)}catch(H){V="<object could not be stringified>"}else V=void 0===c?"undefined":null===c?"null":typeof c;pt("Argument is not a %s (or a non-Element, non-Location mock); got: %s",m,V)}}function dt(c,m){this.a=c===pi&&m||"",this.b=ti}function yn(c){return c instanceof dt&&c.constructor===dt&&c.b===ti?c.a:(pt("expected object of type Const, got '"+c+"'"),"type_error:Const")}dt.prototype.ta=!0,dt.prototype.sa=function(){return this.a},dt.prototype.toString=function(){return"Const{"+this.a+"}"};var ni,ti={},pi={};function ss(){if(void 0===ni){var c=null,m=Y.trustedTypes;if(m&&m.createPolicy){try{c=m.createPolicy("goog#html",{createHTML:Ue,createScript:Ue,createScriptURL:Ue})}catch(w){Y.console&&Y.console.error(w.message)}ni=c}else ni=c}return ni}function $r(c,m){this.a=m===t_?c:""}function Vs(c){return c instanceof $r&&c.constructor===$r?c.a:(pt("expected object of type TrustedResourceUrl, got '"+c+"' of type "+Be(c)),"type_error:TrustedResourceUrl")}function Fl(c,m){var w=yn(c);if(!G0.test(w))throw Error("Invalid TrustedResourceUrl format: "+w);return function ws(c){var m=ss();return new $r(c=m?m.createScriptURL(c):c,t_)}(c=w.replace(_g,function(E,O){if(!Object.prototype.hasOwnProperty.call(m,O))throw Error('Found marker, "'+O+'", in format string, "'+w+'", but no valid label mapping found in args: '+JSON.stringify(m));return(E=m[O])instanceof dt?yn(E):encodeURIComponent(String(E))}))}$r.prototype.ta=!0,$r.prototype.sa=function(){return this.a.toString()},$r.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var _g=/%{(\w+)}/g,G0=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,t_={};function Er(c,m){this.a=m===ya?c:""}function ja(c){return c instanceof Er&&c.constructor===Er?c.a:(pt("expected object of type SafeUrl, got '"+c+"' of type "+Be(c)),"type_error:SafeUrl")}Er.prototype.ta=!0,Er.prototype.sa=function(){return this.a.toString()},Er.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var ho=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Ac=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,yg=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function th(c){if(c instanceof Er)return c;if(c="object"==typeof c&&c.ta?c.sa():String(c),yg.test(c))c=new Er(c,ya);else{var m=(c=(c=String(c)).replace(/(%0A|%0D)/g,"")).match(Ac);c=m&&ho.test(m[1])?new Er(c,ya):null}return c}function Wu(c){return c instanceof Er?c:(c="object"==typeof c&&c.ta?c.sa():String(c),yg.test(c)||(c="about:invalid#zClosurez"),new Er(c,ya))}var ya={},xs=new Er("about:invalid#zClosurez",ya);function Tc(c,m,w){this.a=w===Mt?c:""}Tc.prototype.ta=!0,Tc.prototype.sa=function(){return this.a.toString()},Tc.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Mt={};function Ni(c,m,w,E){return c=c instanceof Er?c:Wu(c),m=m||Y,w=w instanceof dt?yn(w):w||"",m.open(ja(c),w,E,void 0)}function To(c,m){for(var w=c.split("%s"),E="",O=Array.prototype.slice.call(arguments,1);O.length&&1<w.length;)E+=w.shift()+O.shift();return E+w.join("%s")}function Ll(c){return Rn.test(c)&&(-1!=c.indexOf("&")&&(c=c.replace(ma,"&amp;")),-1!=c.indexOf("<")&&(c=c.replace(va,"&lt;")),-1!=c.indexOf(">")&&(c=c.replace(Sf,"&gt;")),-1!=c.indexOf('"')&&(c=c.replace(pC,"&quot;")),-1!=c.indexOf("'")&&(c=c.replace(Ai,"&#39;")),-1!=c.indexOf("\0")&&(c=c.replace(pn,"&#0;"))),c}function Fr(c){return Fr[" "](c),c}Fr[" "]=Ce;var Vl,c,rr=Wi("Opera"),Us=Wi("Trident")||Wi("MSIE"),qu=Wi("Edge"),Vn=qu||Us,nh=Wi("Gecko")&&!(Ti(Zn.toLowerCase(),"webkit")&&!Wi("Edge"))&&!(Wi("Trident")||Wi("MSIE"))&&!Wi("Edge"),Bl=Ti(Zn.toLowerCase(),"webkit")&&!Wi("Edge");function bg(){var c=Y.document;return c?c.documentMode:void 0}e:{var Cs="",Ic=(c=Zn,nh?/rv:([^\);]+)(\)|;)/.exec(c):qu?/Edge\/([\d\.]+)/.exec(c):Us?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(c):Bl?/WebKit\/(\S+)/.exec(c):rr?/(?:Version)[ \/]?(\S+)/.exec(c):void 0);if(Ic&&(Cs=Ic?Ic[1]:""),Us){var Yu=bg();if(null!=Yu&&Yu>parseFloat(Cs)){Vl=String(Yu);break e}}Vl=Cs}var dr={};function Bi(c){return function Nl(c,m){var w=dr;return Object.prototype.hasOwnProperty.call(w,c)?w[c]:w[c]=m(c)}(c,function(){for(var m=0,w=vg(String(Vl)).split("."),E=vg(String(c)).split("."),O=Math.max(w.length,E.length),V=0;0==m&&V<O;V++){var H=w[V]||"",te=E[V]||"";do{if(H=/(\d*)(\D*)(.*)/.exec(H)||["","","",""],te=/(\d*)(\D*)(.*)/.exec(te)||["","","",""],0==H[0].length&&0==te[0].length)break;m=ju(0==H[1].length?0:parseInt(H[1],10),0==te[1].length?0:parseInt(te[1],10))||ju(0==H[2].length,0==te[2].length)||ju(H[2],te[2]),H=H[3],te=te[3]}while(0==m)}return 0<=m})}var Lr=Y.document&&Us&&(bg()||parseInt(Vl,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(c){}var wa=!Us||9<=Number(Lr);function $u(c){var m=document;return"string"==typeof c?m.getElementById(c):c}function Cg(c,m){_n(m,function(w,E){w&&"object"==typeof w&&w.ta&&(w=w.sa()),"style"==E?c.style.cssText=w:"class"==E?c.className=w:"for"==E?c.htmlFor=w:ih.hasOwnProperty(E)?c.setAttribute(ih[E],w):0==E.lastIndexOf("aria-",0)||0==E.lastIndexOf("data-",0)?c.setAttribute(E,w):c[E]=w})}var Yo,s_,ih={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function n_(c,m,w){function E(te){te&&m.appendChild("string"==typeof te?c.createTextNode(te):te)}for(var O=2;O<w.length;O++){var V=w[O];if(!Pt(V)||st(V)&&0<V.nodeType)E(V);else{e:{if(V&&"number"==typeof V.length){if(st(V)){var H="function"==typeof V.item||"string"==typeof V.item;break e}if(qe(V)){H="function"==typeof V.item;break e}}H=!1}zi(H?vr(V):V,E)}}}function i_(c,m){return m=String(m),"application/xhtml+xml"===c.contentType&&(m=m.toLowerCase()),c.createElement(m)}function gC(c){Y.setTimeout(function(){throw c},0)}function r_(c,m){s_||function _D(){if(Y.Promise&&Y.Promise.resolve){var c=Y.Promise.resolve(void 0);s_=function(){c.then(vC)}}else s_=function(){var m=vC;!qe(Y.setImmediate)||Y.Window&&Y.Window.prototype&&!Wi("Edge")&&Y.Window.prototype.setImmediate==Y.setImmediate?(Yo||(Yo=function vD(){var c=Y.MessageChannel;if(void 0===c&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Wi("Presto")&&(c=function(){var O=i_(document,"IFRAME");O.style.display="none",document.documentElement.appendChild(O);var V=O.contentWindow;(O=V.document).open(),O.close();var H="callImmediate"+Math.random(),te="file:"==V.location.protocol?"*":V.location.protocol+"//"+V.location.host;O=lt(function(Pe){("*"==te||Pe.origin==te)&&Pe.data==H&&this.port1.onmessage()},this),V.addEventListener("message",O,!1),this.port1={},this.port2={postMessage:function(){V.postMessage(H,te)}}}),void 0!==c&&!Wi("Trident")&&!Wi("MSIE")){var m=new c,w={},E=w;return m.port1.onmessage=function(){if(void 0!==w.next){var O=(w=w.next).Hb;w.Hb=null,O()}},function(O){E.next={Hb:O},E=E.next,m.port2.postMessage(0)}}return function(O){Y.setTimeout(O,0)}}()),Yo(m)):Y.setImmediate(m)}}(),H0||(s_(),H0=!0),mC.add(c,m)}var H0=!1,mC=new mr;function vC(){for(var c;c=Mr();){try{c.a.call(c.b)}catch(m){gC(m)}nn(Yr,c)}H0=!1}function Jn(c,m){if(this.a=rh,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,c!=Ce)try{var w=this;c.call(m,function(E){ul(w,Sg,E)},function(E){if(!(E instanceof Gs))try{throw E instanceof Error?E:Error("Promise rejected.")}catch(O){}ul(w,Rc,E)})}catch(E){ul(this,Rc,E)}}var rh=0,Sg=2,Rc=3;function _C(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}_C.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var yC=new xn(function(){return new _C},function(c){c.reset()});function z0(c,m,w){var E=yC.get();return E.g=c,E.b=m,E.f=w,E}function rn(c){if(c instanceof Jn)return c;var m=new Jn(Ce);return ul(m,Sg,c),m}function qi(c){return new Jn(function(m,w){w(c)})}function bC(c,m,w){j0(c,m,w,null)||r_(Xt(m,c))}function xC(c){return new Jn(function(m){var w=c.length,E=[];if(w)for(var O=function(te,Pe,Qe){w--,E[te]=Pe?{Qb:!0,value:Qe}:{Qb:!1,reason:Qe},0==w&&m(E)},V=0;V<c.length;V++)bC(c[V],Xt(O,V,!0),Xt(O,V,!1));else m(E)})}function Pc(c,m){if(c.a==rh)if(c.c){var w=c.c;if(w.b){for(var E=0,O=null,V=null,H=w.b;H&&(H.c||(E++,H.a==c&&(O=H),!(O&&1<E)));H=H.next)O||(V=H);O&&(w.a==rh&&1==E?Pc(w,m):(V?((E=V).next==w.f&&(w.f=E),E.next=E.next.next):Mg(w),W0(w,O,Rc,m)))}c.c=null}else ul(c,Rc,m)}function o_(c,m){c.b||c.a!=Sg&&c.a!=Rc||Io(c),c.f?c.f.next=m:c.b=m,c.f=m}function sh(c,m,w,E){var O=z0(null,null,null);return O.a=new Jn(function(V,H){O.g=m?function(te){try{var Pe=m.call(E,te);V(Pe)}catch(Qe){H(Qe)}}:V,O.b=w?function(te){try{var Pe=w.call(E,te);void 0===Pe&&te instanceof Gs?H(te):V(Pe)}catch(Qe){H(Qe)}}:H}),O.a.c=c,o_(c,O),O.a}function ul(c,m,w){c.a==rh&&(c===w&&(m=Rc,w=new TypeError("Promise cannot resolve to itself")),c.a=1,j0(w,c.$c,c.ad,c)||(c.i=w,c.a=m,c.c=null,Io(c),m!=Rc||w instanceof Gs||function CC(c,m){c.g=!0,r_(function(){c.g&&sr.call(null,m)})}(c,w)))}function j0(c,m,w,E){if(c instanceof Jn)return o_(c,z0(m||Ce,w||null,E)),!0;if(Nt(c))return c.then(m,w,E),!0;if(st(c))try{var O=c.then;if(qe(O))return function yD(c,m,w,E,O){function V(Pe){te||(te=!0,E.call(O,Pe))}var te=!1;try{m.call(c,function H(Pe){te||(te=!0,w.call(O,Pe))},V)}catch(Pe){V(Pe)}}(c,O,m,w,E),!0}catch(V){return w.call(E,V),!0}return!1}function Io(c){c.h||(c.h=!0,r_(c.gc,c))}function Mg(c){var m=null;return c.b&&(c.b=(m=c.b).next,m.next=null),c.b||(c.f=null),m}function W0(c,m,w,E){if(w==Rc&&m.b&&!m.c)for(;c&&c.g;c=c.c)c.g=!1;if(m.a)m.a.c=null,Eg(m,w,E);else try{m.c?m.g.call(m.f):Eg(m,w,E)}catch(O){sr.call(null,O)}nn(yC,m)}function Eg(c,m,w){m==Sg?c.g.call(c.f,w):c.b&&c.b.call(c.f,w)}Jn.prototype.then=function(c,m,w){return sh(this,qe(c)?c:null,qe(m)?m:null,w)},Jn.prototype.$goog_Thenable=!0,(z=Jn.prototype).oa=function(c,m){return(c=z0(c,c,m)).c=!0,o_(this,c),this},z.o=function(c,m){return sh(this,null,c,m)},z.cancel=function(c){if(this.a==rh){var m=new Gs(c);r_(function(){Pc(this,m)},this)}},z.$c=function(c){this.a=rh,ul(this,Sg,c)},z.ad=function(c){this.a=rh,ul(this,Rc,c)},z.gc=function(){for(var c;c=Mg(this);)W0(this,c,this.a,this.i);this.h=!1};var sr=gC;function Gs(c){Bt.call(this,c)}function a_(){0!=Dg&&(SC[Ot(this)]=this),this.ya=this.ya,this.pa=this.pa}ue(Gs,Bt),Gs.prototype.name="cancel";var Dg=0,SC={};function q0(c){if(!c.ya&&(c.ya=!0,c.Da(),0!=Dg)){var m=Ot(c);if(0!=Dg&&c.pa&&0<c.pa.length)throw Error(c+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete SC[m]}}a_.prototype.ya=!1,a_.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var l_=Object.freeze||function(c){return c},c_=!Us||9<=Number(Lr),u_=Us&&!Bi("9"),GR=function(){if(!Y.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{Y.addEventListener("test",Ce,m),Y.removeEventListener("test",Ce,m)}catch(w){}return c}();function Qn(c,m){this.type=c,this.b=this.target=m,this.defaultPrevented=!1}function kc(c,m){if(Qn.call(this,c?c.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,c){var w=this.type=c.type,E=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.b=m,m=c.relatedTarget){if(nh){e:{try{Fr(m.nodeName);var O=!0;break e}catch(V){}O=!1}O||(m=null)}}else"mouseover"==w?m=c.fromElement:"mouseout"==w&&(m=c.toElement);this.relatedTarget=m,E?(this.clientX=void 0!==E.clientX?E.clientX:E.pageX,this.clientY=void 0!==E.clientY?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=void 0!==c.clientX?c.clientX:c.pageX,this.clientY=void 0!==c.clientY?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType="string"==typeof c.pointerType?c.pointerType:d_[c.pointerType]||"",this.a=c,c.defaultPrevented&&this.preventDefault()}}Qn.prototype.preventDefault=function(){this.defaultPrevented=!0},ue(kc,Qn);var d_=l_({2:"touch",3:"pen",4:"mouse"});kc.prototype.preventDefault=function(){kc.bb.preventDefault.call(this);var c=this.a;if(c.preventDefault)c.preventDefault();else if(c.returnValue=!1,u_)try{(c.ctrlKey||112<=c.keyCode&&123>=c.keyCode)&&(c.keyCode=-1)}catch(m){}},kc.prototype.g=function(){return this.a};var Ii="closure_listenable_"+(1e6*Math.random()|0),MC=0;function h_(c,m,w,E,O){this.listener=c,this.proxy=null,this.src=m,this.type=w,this.capture=!!E,this.Wa=O,this.key=++MC,this.wa=this.Qa=!1}function Zu(c){c.wa=!0,c.listener=null,c.proxy=null,c.src=null,c.Wa=null}function Hs(c){this.src=c,this.a={},this.b=0}function f_(c,m){var w=m.type;w in c.a&&ir(c.a[w],m)&&(Zu(m),0==c.a[w].length&&(delete c.a[w],c.b--))}function Mf(c,m,w,E){for(var O=0;O<c.length;++O){var V=c[O];if(!V.wa&&V.listener==m&&V.capture==!!w&&V.Wa==E)return O}return-1}Hs.prototype.add=function(c,m,w,E,O){var V=c.toString();(c=this.a[V])||(c=this.a[V]=[],this.b++);var H=Mf(c,m,E,O);return-1<H?(m=c[H],w||(m.Qa=!1)):((m=new h_(m,this.src,V,!!E,O)).Qa=w,c.push(m)),m};var dl="closure_lm_"+(1e6*Math.random()|0),fo={};function Ss(c,m,w,E,O){if(E&&E.once)Oc(c,m,w,E,O);else if(Array.isArray(m))for(var V=0;V<m.length;V++)Ss(c,m[V],w,E,O);else w=y_(w),c&&c[Ii]?Xn(c,m,w,st(E)?!!E.capture:!!E,O):p_(c,m,w,!1,E,O)}function p_(c,m,w,E,O,V){if(!m)throw Error("Invalid event type");var H=st(O)?!!O.capture:!!O,te=Ef(c);if(te||(c[dl]=te=new Hs(c)),!(w=te.add(m,w,E,H,V)).proxy)if(E=function Ul(){var c=EC,m=c_?function(w){return c.call(m.src,m.listener,w)}:function(w){if(!(w=c.call(m.src,m.listener,w)))return w};return m}(),w.proxy=E,E.src=c,E.listener=w,c.addEventListener)GR||(O=H),void 0===O&&(O=!1),c.addEventListener(m.toString(),E,O);else if(c.attachEvent)c.attachEvent(g_(m.toString()),E);else{if(!c.addListener||!c.removeListener)throw Error("addEventListener and attachEvent are unavailable.");c.addListener(E)}}function Oc(c,m,w,E,O){if(Array.isArray(m))for(var V=0;V<m.length;V++)Oc(c,m[V],w,E,O);else w=y_(w),c&&c[Ii]?b_(c,m,w,st(E)?!!E.capture:!!E,O):p_(c,m,w,!0,E,O)}function zs(c,m,w,E,O){if(Array.isArray(m))for(var V=0;V<m.length;V++)zs(c,m[V],w,E,O);else E=st(E)?!!E.capture:!!E,w=y_(w),c&&c[Ii]?(c=c.v,(m=String(m).toString())in c.a&&-1<(w=Mf(V=c.a[m],w,E,O))&&(Zu(V[w]),Array.prototype.splice.call(V,w,1),0==V.length&&(delete c.a[m],c.b--))):c&&(c=Ef(c))&&(m=c.a[m.toString()],c=-1,m&&(c=Mf(m,w,E,O)),(w=-1<c?m[c]:null)&&bn(w))}function bn(c){if("number"!=typeof c&&c&&!c.wa){var m=c.src;if(m&&m[Ii])f_(m.v,c);else{var w=c.type,E=c.proxy;m.removeEventListener?m.removeEventListener(w,E,c.capture):m.detachEvent?m.detachEvent(g_(w),E):m.addListener&&m.removeListener&&m.removeListener(E),(w=Ef(m))?(f_(w,c),0==w.b&&(w.src=null,m[dl]=null)):Zu(c)}}}function g_(c){return c in fo?fo[c]:fo[c]="on"+c}function m_(c,m,w,E){var O=!0;if((c=Ef(c))&&(m=c.a[m.toString()]))for(m=m.concat(),c=0;c<m.length;c++){var V=m[c];V&&V.capture==w&&!V.wa&&(V=v_(V,E),O=O&&!1!==V)}return O}function v_(c,m){var w=c.listener,E=c.Wa||c.src;return c.Qa&&bn(c),w.call(E,m)}function EC(c,m){if(c.wa)return!0;if(!c_){if(!m)e:{m=["window","event"];for(var w=Y,E=0;E<m.length;E++)if(null==(w=w[m[E]])){m=null;break e}m=w}if(m=new kc(E=m,this),w=!0,!(0>E.keyCode||null!=E.returnValue)){e:{var O=!1;if(0==E.keyCode)try{E.keyCode=-1;break e}catch(H){O=!0}(O||null==E.returnValue)&&(E.returnValue=!0)}for(E=[],O=m.b;O;O=O.parentNode)E.push(O);for(c=c.type,O=E.length-1;0<=O;O--){m.b=E[O];var V=m_(E[O],c,!0,m);w=w&&V}for(O=0;O<E.length;O++)m.b=E[O],V=m_(E[O],c,!1,m),w=w&&V}return w}return v_(c,new kc(m,this))}function Ef(c){return(c=c[dl])instanceof Hs?c:null}var __="__closure_events_fn_"+(1e9*Math.random()>>>0);function y_(c){return qe(c)?c:(c[__]||(c[__]=function(m){return c.handleEvent(m)}),c[__])}function He(){a_.call(this),this.v=new Hs(this),this.bc=this,this.hb=null}function Xn(c,m,w,E,O){c.v.add(String(m),w,!1,E,O)}function b_(c,m,w,E,O){c.v.add(String(m),w,!0,E,O)}function Ji(c,m,w,E){if(!(m=c.v.a[String(m)]))return!0;m=m.concat();for(var O=!0,V=0;V<m.length;++V){var H=m[V];if(H&&!H.wa&&H.capture==w){var te=H.listener,Pe=H.Wa||H.src;H.Qa&&f_(c.v,H),O=!1!==te.call(Pe,E)&&O}}return O&&!E.defaultPrevented}function ah(c,m,w){if(qe(c))w&&(c=lt(c,w));else{if(!c||"function"!=typeof c.handleEvent)throw Error("Invalid listener argument");c=lt(c.handleEvent,c)}return 2147483647<Number(m)?-1:Y.setTimeout(c,m||0)}function hl(c){var m=null;return new Jn(function(w,E){-1==(m=ah(function(){w(void 0)},c))&&E(Error("Failed to schedule timer."))}).o(function(w){throw Y.clearTimeout(m),w})}function xa(c){if(c.X&&"function"==typeof c.X)return c.X();if("string"==typeof c)return c.split("");if(Pt(c)){for(var m=[],w=c.length,E=0;E<w;E++)m.push(c[E]);return m}for(E in m=[],w=0,c)m[w++]=c[E];return m}function Ag(c){if(c.Y&&"function"==typeof c.Y)return c.Y();if(!c.X||"function"!=typeof c.X){if(Pt(c)||"string"==typeof c){var m=[];c=c.length;for(var w=0;w<c;w++)m.push(w);return m}for(var E in m=[],w=0,c)m[w++]=E;return m}}function Df(c,m){this.b={},this.a=[],this.c=0;var w=arguments.length;if(1<w){if(w%2)throw Error("Uneven number of arguments");for(var E=0;E<w;E+=2)this.set(arguments[E],arguments[E+1])}else if(c)if(c instanceof Df)for(w=c.Y(),E=0;E<w.length;E++)this.set(w[E],c.get(w[E]));else for(E in c)this.set(E,c[E])}function Tg(c){if(c.c!=c.a.length){for(var m=0,w=0;m<c.a.length;){var E=c.a[m];fl(c.b,E)&&(c.a[w++]=E),m++}c.a.length=w}if(c.c!=c.a.length){var O={};for(w=m=0;m<c.a.length;)fl(O,E=c.a[m])||(c.a[w++]=E,O[E]=1),m++;c.a.length=w}}function fl(c,m){return Object.prototype.hasOwnProperty.call(c,m)}ue(He,a_),He.prototype[Ii]=!0,He.prototype.addEventListener=function(c,m,w,E){Ss(this,c,m,w,E)},He.prototype.removeEventListener=function(c,m,w,E){zs(this,c,m,w,E)},He.prototype.dispatchEvent=function(c){var m,w=this.hb;if(w)for(m=[];w;w=w.hb)m.push(w);w=this.bc;var E=c.type||c;if("string"==typeof c)c=new Qn(c,w);else if(c instanceof Qn)c.target=c.target||w;else{var O=c;we(c=new Qn(E,w),O)}if(O=!0,m)for(var V=m.length-1;0<=V;V--){var H=c.b=m[V];O=Ji(H,E,!0,c)&&O}if(O=Ji(H=c.b=w,E,!0,c)&&O,O=Ji(H,E,!1,c)&&O,m)for(V=0;V<m.length;V++)O=Ji(H=c.b=m[V],E,!1,c)&&O;return O},He.prototype.Da=function(){if(He.bb.Da.call(this),this.v){var w,c=this.v;for(w in c.a){for(var E=c.a[w],O=0;O<E.length;O++)Zu(E[O]);delete c.a[w],c.b--}}this.hb=null},(z=Df.prototype).X=function(){Tg(this);for(var c=[],m=0;m<this.a.length;m++)c.push(this.b[this.a[m]]);return c},z.Y=function(){return Tg(this),this.a.concat()},z.clear=function(){this.b={},this.c=this.a.length=0},z.get=function(c,m){return fl(this.b,c)?this.b[c]:m},z.set=function(c,m){fl(this.b,c)||(this.c++,this.a.push(c)),this.b[c]=m},z.forEach=function(c,m){for(var w=this.Y(),E=0;E<w.length;E++){var O=w[E],V=this.get(O);c.call(m,V,O,this)}};var Af=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ws(c,m){var w;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,c instanceof Ws?(this.i=void 0!==m?m:c.i,lh(this,c.c),this.l=c.l,this.a=c.a,pl(this,c.g),this.f=c.f,qa(this,qs(c.b)),this.h=c.h):c&&(w=String(c).match(Af))?(this.i=!!m,lh(this,w[1]||"",!0),this.l=Ku(w[2]||""),this.a=Ku(w[3]||"",!0),pl(this,w[4]),this.f=Ku(w[5]||"",!0),qa(this,w[6]||"",!0),this.h=Ku(w[7]||"")):(this.i=!!m,this.b=new Lc(null,this.i))}function lh(c,m,w){c.c=w?Ku(m,!0):m,c.c&&(c.c=c.c.replace(/:$/,""))}function pl(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.g=m}else c.g=null}function qa(c,m,w){m instanceof Lc?(c.b=m,function hr(c,m){m&&!c.f&&(Nc(c),c.c=null,c.a.forEach(function(w,E){var O=E.toLowerCase();E!=O&&(Po(this,E),K0(this,O,w))},c)),c.f=m}(c.b,c.i)):(w||(m=Fc(m,Tf)),c.b=new Lc(m,c.i))}function Dr(c,m,w){c.b.set(m,w)}function $o(c,m){return c.b.get(m)}function Ro(c){return c instanceof Ws?new Ws(c):new Ws(c,void 0)}function Ig(c,m,w,E){var O=new Ws(null,void 0);return c&&lh(O,c),m&&(O.a=m),w&&pl(O,w),E&&(O.f=E),O}function Ku(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Fc(c,m,w){return"string"==typeof c?(c=encodeURI(c).replace(m,DC),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function DC(c){return"%"+((c=c.charCodeAt(0))>>4&15).toString(16)+(15&c).toString(16)}Ws.prototype.toString=function(){var c=[],m=this.c;m&&c.push(Fc(m,Rg,!0),":");var w=this.a;return(w||"file"==m)&&(c.push("//"),(m=this.l)&&c.push(Fc(m,Rg,!0),"@"),c.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(w=this.g)&&c.push(":",String(w))),(w=this.f)&&(this.a&&"/"!=w.charAt(0)&&c.push("/"),c.push(Fc(w,"/"==w.charAt(0)?Y0:bD,!0))),(w=this.b.toString())&&c.push("?",w),(w=this.h)&&c.push("#",Fc(w,$0)),c.join("")},Ws.prototype.resolve=function(c){var m=new Ws(this),w=!!c.c;w?lh(m,c.c):w=!!c.l,w?m.l=c.l:w=!!c.a,w?m.a=c.a:w=null!=c.g;var E=c.f;if(w)pl(m,c.g);else if(w=!!c.f){if("/"!=E.charAt(0))if(this.a&&!this.f)E="/"+E;else{var O=m.f.lastIndexOf("/");-1!=O&&(E=m.f.substr(0,O+1)+E)}if(".."==(O=E)||"."==O)E="";else if(Ti(O,"./")||Ti(O,"/.")){E=0==O.lastIndexOf("/",0),O=O.split("/");for(var V=[],H=0;H<O.length;){var te=O[H++];"."==te?E&&H==O.length&&V.push(""):".."==te?((1<V.length||1==V.length&&""!=V[0])&&V.pop(),E&&H==O.length&&V.push("")):(V.push(te),E=!0)}E=V.join("/")}else E=O}return w?m.f=E:w=""!==c.b.toString(),w?qa(m,qs(c.b)):w=!!c.h,w&&(m.h=c.h),m};var Rg=/[#\/\?@]/g,bD=/[#\?:]/g,Y0=/[#\?]/g,Tf=/[#\?@]/g,$0=/#/g;function Lc(c,m){this.b=this.a=null,this.c=c||null,this.f=!!m}function Nc(c){c.a||(c.a=new Df,c.b=0,c.c&&function js(c,m){if(c){c=c.split("&");for(var w=0;w<c.length;w++){var E=c[w].indexOf("="),O=null;if(0<=E){var V=c[w].substring(0,E);O=c[w].substring(E+1)}else V=c[w];m(V,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}(c.c,function(m,w){c.add(decodeURIComponent(m.replace(/\+/g," ")),w)}))}function Z0(c){var m=Ag(c);if(void 0===m)throw Error("Keys are undefined");var w=new Lc(null,void 0);c=xa(c);for(var E=0;E<m.length;E++){var O=m[E],V=c[E];Array.isArray(V)?K0(w,O,V):w.add(O,V)}return w}function Po(c,m){Nc(c),m=po(c,m),fl(c.a.b,m)&&(c.c=null,c.b-=c.a.get(m).length,fl((c=c.a).b,m)&&(delete c.b[m],c.c--,c.a.length>2*c.c&&Tg(c)))}function gl(c,m){return Nc(c),m=po(c,m),fl(c.a.b,m)}function K0(c,m,w){Po(c,m),0<w.length&&(c.c=null,c.a.set(po(c,m),vr(w)),c.b+=w.length)}function qs(c){var m=new Lc;return m.c=c.c,c.a&&(m.a=new Df(c.a),m.b=c.b),m}function po(c,m){return m=String(m),c.f&&(m=m.toLowerCase()),m}function AC(c){var m=[];return J0(new wD,c,m),m.join("")}function wD(){}function J0(c,m,w){if(null==m)w.push("null");else{if("object"==typeof m){if(Array.isArray(m)){var E=m;m=E.length,w.push("[");for(var O="",V=0;V<m;V++)w.push(O),J0(c,E[V],w),O=",";return void w.push("]")}if(!(m instanceof String||m instanceof Number||m instanceof Boolean)){for(E in w.push("{"),O="",m)Object.prototype.hasOwnProperty.call(m,E)&&"function"!=typeof(V=m[E])&&(w.push(O),X0(E,w),w.push(":"),J0(c,V,w),O=",");return void w.push("}")}m=m.valueOf()}switch(typeof m){case"string":X0(m,w);break;case"number":w.push(isFinite(m)&&!isNaN(m)?String(m):"null");break;case"boolean":w.push(String(m));break;case"function":w.push("null");break;default:throw Error("Unknown type: "+typeof m)}}}(z=Lc.prototype).add=function(c,m){Nc(this),this.c=null,c=po(this,c);var w=this.a.get(c);return w||this.a.set(c,w=[]),w.push(m),this.b+=1,this},z.clear=function(){this.a=this.c=null,this.b=0},z.forEach=function(c,m){Nc(this),this.a.forEach(function(w,E){zi(w,function(O){c.call(m,O,E,this)},this)},this)},z.Y=function(){Nc(this);for(var c=this.a.X(),m=this.a.Y(),w=[],E=0;E<m.length;E++)for(var O=c[E],V=0;V<O.length;V++)w.push(m[E]);return w},z.X=function(c){Nc(this);var m=[];if("string"==typeof c)gl(this,c)&&(m=ji(m,this.a.get(po(this,c))));else{c=this.a.X();for(var w=0;w<c.length;w++)m=ji(m,c[w])}return m},z.set=function(c,m){return Nc(this),this.c=null,gl(this,c=po(this,c))&&(this.b-=this.a.get(c).length),this.a.set(c,[m]),this.b+=1,this},z.get=function(c,m){return c&&0<(c=this.X(c)).length?String(c[0]):m},z.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var c=[],m=this.a.Y(),w=0;w<m.length;w++){var E=m[w],O=encodeURIComponent(String(E));E=this.X(E);for(var V=0;V<E.length;V++){var H=O;""!==E[V]&&(H+="="+encodeURIComponent(String(E[V]))),c.push(H)}}return this.c=c.join("&")};var Q0={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},xD=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function X0(c,m){m.push('"',c.replace(xD,function(w){var E=Q0[w];return E||(E="\\u"+(65536|w.charCodeAt(0)).toString(16).substr(1),Q0[w]=E),E}),'"')}function If(){var c=Un();return Us&&!!Lr&&11==Lr||/Edge\/\d+/.test(c)}function Ju(){return Y.window&&Y.window.location.href||self&&self.location&&self.location.href||""}function Pg(c,m){m=m||Y.window;var w="about:blank";c&&(w=ja(th(c)||xs)),m.location.href=w}function kg(c,m){var E,w=[];for(E in c)E in m?typeof c[E]!=typeof m[E]?w.push(E):"object"==typeof c[E]&&null!=c[E]&&null!=m[E]?0<kg(c[E],m[E]).length&&w.push(E):c[E]!==m[E]&&w.push(E):w.push(E);for(E in m)E in c||w.push(E);return w}function IC(c){return!!((c=(c||Un()).toLowerCase()).match(/android/)||c.match(/webos/)||c.match(/iphone|ipad|ipod/)||c.match(/blackberry/)||c.match(/windows phone/)||c.match(/iemobile/))}function Zo(c){c=c||Y.window;try{c.close()}catch(m){}}function Rf(c,m,w){var E=Math.floor(1e9*Math.random()).toString();m=m||500,w=w||600;var O=(window.screen.availHeight-w)/2,V=(window.screen.availWidth-m)/2;for(H in m={width:m,height:w,top:0<O?O:0,left:0<V?V:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},w=Un().toLowerCase(),E&&(m.target=E,Ti(w,"crios/")&&(m.target="_blank")),ml(Un())==Ya&&(c=c||"http://localhost",m.scrollbars=!0),w=c||"",(c=m)||(c={}),E=window,m=w instanceof Er?w:th(void 0!==w.href?w.href:String(w))||xs,w=c.target||w.target,O=[],c)switch(H){case"width":case"height":case"top":case"left":O.push(H+"="+c[H]);break;case"target":case"noopener":case"noreferrer":break;default:O.push(H+"="+(c[H]?1:0))}var H=O.join(",");if((Wi("iPhone")&&!Wi("iPod")&&!Wi("iPad")||Wi("iPad")||Wi("iPod"))&&E.navigator&&E.navigator.standalone&&w&&"_self"!=w?(pe(H=i_(document,"A"),"HTMLAnchorElement"),m=m instanceof Er?m:Wu(m),H.href=ja(m),H.setAttribute("target",w),c.noreferrer&&H.setAttribute("rel","noreferrer"),(c=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,E,1),H.dispatchEvent(c),H={}):c.noreferrer?(H=Ni("",E,w,H),c=ja(m),H&&(Vn&&Ti(c,";")&&(c="'"+c.replace(/'/g,"%27")+"'"),H.opener=null,c='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ll(c)+'">',c=new Tc(c=(E=ss())?E.createHTML(c):c,null,Mt),E=H.document)&&(E.write(function ba(c){return c instanceof Tc&&c.constructor===Tc?c.a:(pt("expected object of type SafeHtml, got '"+c+"' of type "+Be(c)),"type_error:SafeHtml")}(c)),E.close())):(H=Ni(m,E,w,H))&&c.noopener&&(H.opener=null),H)try{H.focus()}catch(te){}return H}var SD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gl=/^[^@]+@[^@]+$/;function ch(){var c=null;return new Jn(function(m){"complete"==Y.document.readyState?m():(c=function(){m()},Oc(window,"load",c))}).o(function(m){throw zs(window,"load",c),m})}function tb(c){return c=c||Un(),!("file:"!==Xu()&&"ionic:"!==Xu()||!c.toLowerCase().match(/iphone|ipad|ipod|android/))}function _i(){var c=Y.window;try{return!(!c||c==c.top)}catch(m){return!1}}function ii(){return void 0!==Y.WorkerGlobalScope&&"function"==typeof Y.importScripts}function os(){return u.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":u.Z.INTERNAL.hasOwnProperty("node")?"Node":ii()?"Worker":"Browser"}function Ri(){var c=os();return"ReactNative"===c||"Node"===c}var Ya="Firefox";function ml(c){var m=c.toLowerCase();return Ti(m,"opera/")||Ti(m,"opr/")||Ti(m,"opios/")?"Opera":Ti(m,"iemobile")?"IEMobile":Ti(m,"msie")||Ti(m,"trident/")?"IE":Ti(m,"edge/")?"Edge":Ti(m,"firefox/")?Ya:Ti(m,"silk/")?"Silk":Ti(m,"blackberry")?"Blackberry":Ti(m,"webos")?"Webos":!Ti(m,"safari/")||Ti(m,"chrome/")||Ti(m,"crios/")||Ti(m,"android")?!Ti(m,"chrome/")&&!Ti(m,"crios/")||Ti(m,"edge/")?Ti(m,"android")?"Android":(c=c.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==c.length?c[1]:"Other":"Chrome":"Safari"}var Qu={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Ko(c,m){m=m||[];var O,w=[],E={};for(O in Qu)E[Qu[O]]=!0;for(O=0;O<m.length;O++)void 0!==E[m[O]]&&(delete E[m[O]],w.push(m[O]));return w.sort(),(m=w).length||(m=["FirebaseCore-web"]),"Browser"===(w=os())?w=ml(E=Un()):"Worker"===w&&(w=ml(E=Un())+"-"+w),w+"/JsCore/"+c+"/"+m.join(",")}function Un(){return Y.navigator&&Y.navigator.userAgent||""}function zn(c,m){c=c.split("."),m=m||Y;for(var w=0;w<c.length&&"object"==typeof m&&null!=m;w++)m=m[c[w]];return w!=c.length&&(m=void 0),m}function $i(){try{var c=Y.localStorage,m=Dn();if(c)return c.setItem(m,"1"),c.removeItem(m),!If()||!!Y.indexedDB}catch(w){return ii()&&!!Y.indexedDB}return!1}function Hl(){return(Dt()||"chrome-extension:"===Xu()||tb())&&!Ri()&&$i()&&!ii()}function Dt(){return"http:"===Xu()||"https:"===Xu()}function Xu(){return Y.location&&Y.location.protocol||null}function zl(c){return!(IC(c=c||Un())||ml(c)==Ya)}function jl(c){return void 0===c?null:AC(c)}function vl(c){var w,m={};for(w in c)c.hasOwnProperty(w)&&null!=c[w]&&(m[w]=c[w]);return m}function Bc(c){if(null!==c)return JSON.parse(c)}function Dn(c){return c||Math.floor(1e9*Math.random()).toString()}function Ca(c){return!("Safari"==ml(c=c||Un())||c.toLowerCase().match(/iphone|ipad|ipod/))}function Pf(){var c=Y.___jsl;if(c&&c.H)for(var m in c.H)if(c.H[m].r=c.H[m].r||[],c.H[m].L=c.H[m].L||[],c.H[m].r=c.H[m].L.concat(),c.CP)for(var w=0;w<c.CP.length;w++)c.CP[w]=null}function Vc(c,m){if(c>m)throw Error("Short delay should be less than long delay!");this.a=c,this.c=m,c=Un(),m=os(),this.b=IC(c)||"ReactNative"===m}function q(){var c=Y.document;return!c||void 0===c.visibilityState||"visible"==c.visibilityState}function Sa(c){try{var m=new Date(parseInt(c,10));if(!isNaN(m.getTime())&&!/[^0-9]/.test(c))return m.toUTCString()}catch(w){}return null}function kf(){return!(!zn("fireauth.oauthhelper",Y)&&!zn("fireauth.iframe",Y))}Vc.prototype.get=function(){var c=Y.navigator;return!c||"boolean"!=typeof c.onLine||!Dt()&&"chrome-extension:"!==Xu()&&void 0===c.connection||c.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Ff,Of={};function Tt(c){Of[c]||(Of[c]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(c))}try{var Cn={};Object.defineProperty(Cn,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Cn,"abcd",{configurable:!0,enumerable:!0,value:2}),Ff=2==Cn.abcd}catch(c){Ff=!1}function Ut(c,m,w){Ff?Object.defineProperty(c,m,{configurable:!0,enumerable:!0,value:w}):c[m]=w}function _r(c,m){if(m)for(var w in m)m.hasOwnProperty(w)&&Ut(c,w,m[w])}function go(c){var m={};return _r(m,c),m}function Uc(c){var m=c;if("object"==typeof c&&null!=c)for(var w in m="length"in c?[]:{},c)Ut(m,w,Uc(c[w]));return m}function Gc(c){var m=c&&(c[Wl]?"phone":null);if(!(m&&c&&c[or]))throw new $("internal-error","Internal assert: invalid MultiFactorInfo object");Ut(this,"uid",c[or]),Ut(this,"displayName",c[Zr]||null);var w=null;c[zc]&&(w=new Date(c[zc]).toUTCString()),Ut(this,"enrollmentTime",w),Ut(this,"factorId",m)}function Hc(c){try{var m=new Nf(c)}catch(w){m=null}return m}Gc.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Zr="displayName",zc="enrolledAt",or="mfaEnrollmentId",Wl="phoneInfo";function Nf(c){Gc.call(this,c),Ut(this,"phoneNumber",c[Wl])}function yr(c){var m={},w=c[PC],E=c[C_],O=c[kC];if(c=Hc(c[ib]),!O||O!=Fg&&O!=Lg&&!w||O==Lg&&!E||O==Og&&!c)throw Error("Invalid checkActionCode response!");O==Lg?(m[S_]=w||null,m[Bf]=w||null,m[Nr]=E):(m[S_]=E||null,m[Bf]=E||null,m[Nr]=w||null),m[ui]=c||null,Ut(this,rb,O),Ut(this,uh,Uc(m))}ue(Nf,Gc),Nf.prototype.w=function(){var c=Nf.bb.w.call(this);return c.phoneNumber=this.phoneNumber,c};var Og="REVERT_SECOND_FACTOR_ADDITION",Fg="EMAIL_SIGNIN",Lg="VERIFY_AND_CHANGE_EMAIL",PC="email",ib="mfaInfo",C_="newEmail",kC="requestType",Nr="email",S_="fromEmail",ui="multiFactorInfo",Bf="previousEmail",uh="data",rb="operation";function Ng(c){var m=$o(c=Ro(c),ko)||null,w=$o(c,Ma)||null,E=$o(c,dh)||null;if(E=E&&sb[E]||null,!m||!w||!E)throw new $("argument-error",ko+", "+Ma+"and "+dh+" are required in a valid action code URL.");_r(this,{apiKey:m,operation:E,code:w,continueUrl:$o(c,Bg)||null,languageCode:$o(c,Vg)||null,tenantId:$o(c,ed)||null})}var ko="apiKey",Ma="oobCode",Bg="continueUrl",Vg="languageCode",dh="mode",ed="tenantId",sb={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Og,signIn:Fg,verifyAndChangeEmail:Lg,verifyEmail:"VERIFY_EMAIL"};function Ug(c){try{return new Ng(c)}catch(m){return null}}function Gg(c){var m=c[jc];if(void 0===m)throw new $("missing-continue-uri");if("string"!=typeof m||"string"==typeof m&&!m.length)throw new $("invalid-continue-uri");this.h=m,this.b=this.a=null,this.g=!1;var w=c[OC];if(w&&"object"==typeof w){m=w[ob];var E=w[M_];if(w=w[E_],"string"==typeof m&&m.length){if(this.a=m,void 0!==E&&"boolean"!=typeof E)throw new $("argument-error",M_+" property must be a boolean when specified.");if(this.g=!!E,void 0!==w&&("string"!=typeof w||"string"==typeof w&&!w.length))throw new $("argument-error",E_+" property must be a non empty string when specified.");this.b=w||null}else{if(void 0!==m)throw new $("argument-error",ob+" property must be a non empty string when specified.");if(void 0!==E||void 0!==w)throw new $("missing-android-pkg-name")}}else if(void 0!==w)throw new $("argument-error",OC+" property must be a non null object when specified.");if(this.f=null,(m=c[hh])&&"object"==typeof m){if("string"==typeof(m=m[zg])&&m.length)this.f=m;else if(void 0!==m)throw new $("argument-error",zg+" property must be a non empty string when specified.")}else if(void 0!==m)throw new $("argument-error",hh+" property must be a non null object when specified.");if(void 0!==(m=c[as])&&"boolean"!=typeof m)throw new $("argument-error",as+" property must be a boolean when specified.");if(this.c=!!m,void 0!==(c=c[Hg])&&("string"!=typeof c||"string"==typeof c&&!c.length))throw new $("argument-error",Hg+" property must be a non empty string when specified.");this.i=c||null}var OC="android",Hg="dynamicLinkDomain",as="handleCodeInApp",hh="iOS",jc="url",M_="installApp",E_="minimumVersion",ob="packageName",zg="bundleId";function Vf(c){var m={};for(var w in m.continueUrl=c.h,m.canHandleCodeInApp=c.c,(m.androidPackageName=c.a)&&(m.androidMinimumVersion=c.b,m.androidInstallApp=c.g),m.iOSBundleId=c.f,m.dynamicLinkDomain=c.i,m)null===m[w]&&delete m[w];return m}var Uf=null;function nd(c){var m=Wg(c);if(!(m&&m.sub&&m.iss&&m.aud&&m.exp))throw Error("Invalid JWT");this.h=c,this.a=m.exp,this.i=m.sub,c=Date.now()/1e3,this.g=m.iat||(c>this.a?this.a:c),this.b=m.provider_id||m.firebase&&m.firebase.sign_in_provider||null,this.f=m.firebase&&m.firebase.tenant||null,this.c=!!m.is_anonymous||"anonymous"==this.b}function Wc(c){try{return new nd(c)}catch(m){return null}}function Wg(c){if(!c||3!=(c=c.split(".")).length)return null;for(var m=(4-(c=c[1]).length%4)%4,w=0;w<m;w++)c+=".";try{var E=function Ms(c){var m=[];return function td(c,m){function w(Pe){for(;E<c.length;){var Qe=c.charAt(E++),En=Uf[Qe];if(null!=En)return En;if(!/^[\s\xa0]*$/.test(Qe))throw Error("Unknown base64 encoding at char: "+Qe)}return Pe}!function jg(){if(!Uf){Uf={};for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),m=["+/=","+/","-_=","-_.","-_"],w=0;5>w;w++)for(var E=c.concat(m[w].split("")),O=0;O<E.length;O++){var V=E[O];void 0===Uf[V]&&(Uf[V]=O)}}}();for(var E=0;;){var O=w(-1),V=w(0),H=w(64),te=w(64);if(64===te&&-1===O)break;m(O<<2|V>>4),64!=H&&(m(V<<4&240|H>>2),64!=te&&m(H<<6&192|te))}}(c,function(w){m.push(w)}),m}(c);for(c=[],w=m=0;m<E.length;){var O=E[m++];if(128>O)c[w++]=String.fromCharCode(O);else if(191<O&&224>O){var V=E[m++];c[w++]=String.fromCharCode((31&O)<<6|63&V)}else if(239<O&&365>O){V=E[m++];var H=E[m++],Pe=((7&O)<<18|(63&V)<<12|(63&H)<<6|63&E[m++])-65536;c[w++]=String.fromCharCode(55296+(Pe>>10)),c[w++]=String.fromCharCode(56320+(1023&Pe))}else V=E[m++],H=E[m++],c[w++]=String.fromCharCode((15&O)<<12|(63&V)<<6|63&H)}return JSON.parse(c.join(""))}catch(Qe){}return null}nd.prototype.T=function(){return this.f},nd.prototype.l=function(){return this.c},nd.prototype.toString=function(){return this.h};var qc="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),id=["client_id","response_type","scope","redirect_uri","state"],Gf={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:id},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:id},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:id},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:qc},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Hf(c){for(var m in Gf)if(Gf[m].fa==c)return Gf[m];return null}function zf(c){var m={};m["facebook.com"]=Br,m["google.com"]=Yg,m["github.com"]=qg,m["twitter.com"]=qf;var w=c&&c[rd];try{if(w)return m[w]?new m[w](c):new _l(c);if(void 0!==c[jf])return new Wf(c)}catch(E){}return null}var jf="idToken",rd="providerId";function Wf(c){var m=c[rd];if(!m&&c[jf]){var w=Wc(c[jf]);w&&w.b&&(m=w.b)}if(!m)throw Error("Invalid additional user info!");("anonymous"==m||"custom"==m)&&(m=null),w=!1,void 0!==c.isNewUser?w=!!c.isNewUser:"identitytoolkit#SignupNewUserResponse"===c.kind&&(w=!0),Ut(this,"providerId",m),Ut(this,"isNewUser",w)}function _l(c){Wf.call(this,c),Ut(this,"profile",Uc((c=Bc(c.rawUserInfo||"{}"))||{}))}function Br(c){if(_l.call(this,c),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function qg(c){if(_l.call(this,c),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ut(this,"username",this.profile&&this.profile.login||null)}function Yg(c){if(_l.call(this,c),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function qf(c){if(_l.call(this,c),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ut(this,"username",c.screenName||null)}function fh(c){var m=Ro(c),w=$o(m,"link"),E=$o(Ro(w),"link");return m=$o(m,"deep_link_id"),$o(Ro(m),"link")||m||E||w||c}function ph(c,m){if(!c&&!m)throw new $("internal-error","Internal assert: no raw session string available");if(c&&m)throw new $("internal-error","Internal assert: unable to determine the session type");this.a=c||null,this.b=m||null,this.type=this.a?sd:gh}ue(_l,Wf),ue(Br,_l),ue(qg,_l),ue(Yg,_l),ue(qf,_l);var sd="enroll",gh="signin";function Vi(){}function Pi(c,m){return c.then(function(w){if(w[ea]){var E=Wc(w[ea]);if(!E||m!=E.i)throw new $("user-mismatch");return w}throw new $("user-mismatch")}).o(function(w){throw w&&w.code&&w.code==ut+"user-not-found"?new $("user-mismatch"):w})}function $a(c,m){if(!m)throw new $("internal-error","failed to construct a credential");this.a=m,Ut(this,"providerId",c),Ut(this,"signInMethod",c)}function yl(c){return{pendingToken:c.a,requestUri:"http://localhost"}}function LC(c){if(c&&c.providerId&&c.signInMethod&&0==c.providerId.indexOf("saml.")&&c.pendingToken)try{return new $a(c.providerId,c.pendingToken)}catch(m){}return null}function bl(c,m,w){if(this.a=null,m.idToken||m.accessToken)m.idToken&&Ut(this,"idToken",m.idToken),m.accessToken&&Ut(this,"accessToken",m.accessToken),m.nonce&&!m.pendingToken&&Ut(this,"nonce",m.nonce),m.pendingToken&&(this.a=m.pendingToken);else{if(!m.oauthToken||!m.oauthTokenSecret)throw new $("internal-error","failed to construct a credential");Ut(this,"accessToken",m.oauthToken),Ut(this,"secret",m.oauthTokenSecret)}Ut(this,"providerId",c),Ut(this,"signInMethod",w)}function mh(c){var m={};return c.idToken&&(m.id_token=c.idToken),c.accessToken&&(m.access_token=c.accessToken),c.secret&&(m.oauth_token_secret=c.secret),m.providerId=c.providerId,c.nonce&&!c.a&&(m.nonce=c.nonce),m={postBody:Z0(m).toString(),requestUri:"http://localhost"},c.a&&(delete m.postBody,m.pendingToken=c.a),m}function $g(c){if(c&&c.providerId&&c.signInMethod){var m={idToken:c.oauthIdToken,accessToken:c.oauthTokenSecret?null:c.oauthAccessToken,oauthTokenSecret:c.oauthTokenSecret,oauthToken:c.oauthTokenSecret&&c.oauthAccessToken,nonce:c.nonce,pendingToken:c.pendingToken};try{return new bl(c.providerId,m,c.signInMethod)}catch(w){}}return null}function Yc(c,m){this.Qc=m||[],_r(this,{providerId:c,isOAuthProvider:!0}),this.Jb={},this.qb=(Hf(c)||{}).Ja||null,this.pb=null}function Zg(c){if("string"!=typeof c||0!=c.indexOf("saml."))throw new $("argument-error",'SAML provider IDs must be prefixed with "saml."');Yc.call(this,c,[])}function mo(c){Yc.call(this,c,id),this.a=[]}function Ea(){mo.call(this,"facebook.com")}function $c(c){if(!c)throw new $("argument-error","credential failed: expected 1 argument (the OAuth access token).");var m=c;return st(c)&&(m=c.accessToken),(new Ea).credential({accessToken:m})}function Zc(){mo.call(this,"github.com")}function NC(c){if(!c)throw new $("argument-error","credential failed: expected 1 argument (the OAuth access token).");var m=c;return st(c)&&(m=c.accessToken),(new Zc).credential({accessToken:m})}function Za(){mo.call(this,"google.com"),this.Ca("profile")}function Kg(c,m){var w=c;return st(c)&&(w=c.idToken,m=c.accessToken),(new Za).credential({idToken:w,accessToken:m})}function od(){Yc.call(this,"twitter.com",qc)}function D_(c,m){var w=c;if(st(w)||(w={oauthToken:c,oauthTokenSecret:m}),!w.oauthToken||!w.oauthTokenSecret)throw new $("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new bl("twitter.com",w,"twitter.com")}function Kc(c,m,w){this.a=c,this.f=m,Ut(this,"providerId","password"),Ut(this,"signInMethod",w===Ys.EMAIL_LINK_SIGN_IN_METHOD?Ys.EMAIL_LINK_SIGN_IN_METHOD:Ys.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Yf(c){return c&&c.email&&c.password?new Kc(c.email,c.password,c.signInMethod):null}function Ys(){_r(this,{providerId:"password",isOAuthProvider:!1})}function $f(c,m){if(!(m=ql(m)))throw new $("argument-error","Invalid email link!");return new Kc(c,m.code,Ys.EMAIL_LINK_SIGN_IN_METHOD)}function ql(c){return(c=Ug(c=fh(c)))&&c.operation===Fg?c:null}function Ka(c){if(!(c.fb&&c.eb||c.La&&c.ea))throw new $("internal-error");this.a=c,Ut(this,"providerId","phone"),this.fa="phone",Ut(this,"signInMethod","phone")}function BC(c){if(c&&"phone"===c.providerId&&(c.verificationId&&c.verificationCode||c.temporaryProof&&c.phoneNumber)){var m={};return zi(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(w){c[w]&&(m[w]=c[w])}),new Ka(m)}return null}function Jg(c){return c.a.La&&c.a.ea?{temporaryProof:c.a.La,phoneNumber:c.a.ea}:{sessionInfo:c.a.fb,code:c.a.eb}}function Es(c){try{this.a=c||u.Z.auth()}catch(m){throw new $("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}_r(this,{providerId:"phone",isOAuthProvider:!1})}function Qg(c,m){if(!c)throw new $("missing-verification-id");if(!m)throw new $("missing-verification-code");return new Ka({fb:c,eb:m})}function Xg(c){if(c.temporaryProof&&c.phoneNumber)return new Ka({La:c.temporaryProof,ea:c.phoneNumber});var m=c&&c.providerId;if(!m||"password"===m)return null;var w=c&&c.oauthAccessToken,E=c&&c.oauthTokenSecret,O=c&&c.nonce,V=c&&c.oauthIdToken,H=c&&c.pendingToken;try{switch(m){case"google.com":return Kg(V,w);case"facebook.com":return $c(w);case"github.com":return NC(w);case"twitter.com":return D_(w,E);default:return w||E||V||H?H?0==m.indexOf("saml.")?new $a(m,H):new bl(m,{pendingToken:H,idToken:c.oauthIdToken,accessToken:c.oauthAccessToken},m):new mo(m).credential({idToken:V,accessToken:w,rawNonce:O}):null}}catch(te){return null}}function wl(c){if(!c.isOAuthProvider)throw new $("invalid-oauth-provider")}function Jo(c,m,w,E,O,V,H){if(this.c=c,this.b=m||null,this.g=w||null,this.f=E||null,this.i=V||null,this.h=H||null,this.a=O||null,!this.g&&!this.a)throw new $("invalid-auth-event");if(this.g&&this.a)throw new $("invalid-auth-event");if(this.g&&!this.f)throw new $("invalid-auth-event")}function Ja(c){return(c=c||{}).type?new Jo(c.type,c.eventId,c.urlResponse,c.sessionId,c.error&&Ne(c.error),c.postBody,c.tenantId):null}function ab(){this.b=null,this.a=[]}ph.prototype.Ha=function(){return rn(this.a?this.a:this.b)},ph.prototype.w=function(){return this.type==sd?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Vi.prototype.ka=function(){},Vi.prototype.b=function(){},Vi.prototype.c=function(){},Vi.prototype.w=function(){},$a.prototype.ka=function(c){return Th(c,yl(this))},$a.prototype.b=function(c,m){var w=yl(this);return w.idToken=m,ta(c,w)},$a.prototype.c=function(c,m){return Pi(gd(c,yl(this)),m)},$a.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},bl.prototype.ka=function(c){return Th(c,mh(this))},bl.prototype.b=function(c,m){var w=mh(this);return w.idToken=m,ta(c,w)},bl.prototype.c=function(c,m){return Pi(gd(c,mh(this)),m)},bl.prototype.w=function(){var c={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(c.oauthIdToken=this.idToken),this.accessToken&&(c.oauthAccessToken=this.accessToken),this.secret&&(c.oauthTokenSecret=this.secret),this.nonce&&(c.nonce=this.nonce),this.a&&(c.pendingToken=this.a),c},Yc.prototype.Ka=function(c){return this.Jb=ie(c),this},ue(Zg,Yc),ue(mo,Yc),mo.prototype.Ca=function(c){return jt(this.a,c)||this.a.push(c),this},mo.prototype.Rb=function(){return vr(this.a)},mo.prototype.credential=function(c,m){var w;if(!(w=st(c)?{idToken:c.idToken||null,accessToken:c.accessToken||null,nonce:c.rawNonce||null}:{idToken:c||null,accessToken:m||null}).idToken&&!w.accessToken)throw new $("argument-error","credential failed: must provide the ID token and/or the access token.");return new bl(this.providerId,w,this.providerId)},ue(Ea,mo),Ut(Ea,"PROVIDER_ID","facebook.com"),Ut(Ea,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),ue(Zc,mo),Ut(Zc,"PROVIDER_ID","github.com"),Ut(Zc,"GITHUB_SIGN_IN_METHOD","github.com"),ue(Za,mo),Ut(Za,"PROVIDER_ID","google.com"),Ut(Za,"GOOGLE_SIGN_IN_METHOD","google.com"),ue(od,Yc),Ut(od,"PROVIDER_ID","twitter.com"),Ut(od,"TWITTER_SIGN_IN_METHOD","twitter.com"),Kc.prototype.ka=function(c){return this.signInMethod==Ys.EMAIL_LINK_SIGN_IN_METHOD?ri(c,dm,{email:this.a,oobCode:this.f}):ri(c,Kl,{email:this.a,password:this.f})},Kc.prototype.b=function(c,m){return this.signInMethod==Ys.EMAIL_LINK_SIGN_IN_METHOD?ri(c,j_,{idToken:m,email:this.a,oobCode:this.f}):ri(c,vo,{idToken:m,email:this.a,password:this.f})},Kc.prototype.c=function(c,m){return Pi(this.ka(c),m)},Kc.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},_r(Ys,{PROVIDER_ID:"password"}),_r(Ys,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),_r(Ys,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ka.prototype.ka=function(c){return c.gb(Jg(this))},Ka.prototype.b=function(c,m){var w=Jg(this);return w.idToken=m,ri(c,Y_,w)},Ka.prototype.c=function(c,m){var w=Jg(this);return w.operation="REAUTH",Pi(c=ri(c,lp,w),m)},Ka.prototype.w=function(){var c={providerId:"phone"};return this.a.fb&&(c.verificationId=this.a.fb),this.a.eb&&(c.verificationCode=this.a.eb),this.a.La&&(c.temporaryProof=this.a.La),this.a.ea&&(c.phoneNumber=this.a.ea),c},Es.prototype.gb=function(c,m){var w=this.a.a;return rn(m.verify()).then(function(E){if("string"!=typeof E)throw new $("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===m.type){var H,O=st(c)?c.session:null,V=st(c)?c.phoneNumber:c;return H=O&&O.type==sd?O.Ha().then(function(te){return function G_(c,m){return ri(c,W_,m).then(function(w){return w.phoneSessionInfo.sessionInfo})}(w,{idToken:te,phoneEnrollmentInfo:{phoneNumber:V,recaptchaToken:E}})}):O&&O.type==gh?O.Ha().then(function(te){return function pd(c,m){return ri(c,au,m).then(function(w){return w.phoneResponseInfo.sessionInfo})}(w,{mfaPendingCredential:te,mfaEnrollmentId:c.multiFactorHint&&c.multiFactorHint.uid||c.multiFactorUid,phoneSignInInfo:{recaptchaToken:E}})}):function mb(c,m){return ri(c,Mb,m)}(w,{phoneNumber:V,recaptchaToken:E}),H.then(function(te){return"function"==typeof m.reset&&m.reset(),te},function(te){throw"function"==typeof m.reset&&m.reset(),te})}throw new $("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')})},_r(Es,{PROVIDER_ID:"phone"}),_r(Es,{PHONE_SIGN_IN_METHOD:"phone"}),Jo.prototype.getUid=function(){var c=[];return c.push(this.c),this.b&&c.push(this.b),this.f&&c.push(this.f),this.h&&c.push(this.h),c.join("-")},Jo.prototype.T=function(){return this.h},Jo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Zf,ad=null;function Ds(c){var m="unauthorized-domain",w=void 0,E=Ro(c);c=E.a,"chrome-extension"==(E=E.c)?w=To("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",c):"http"==E||"https"==E?w=To("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",c):m="operation-not-supported-in-this-environment",$.call(this,m,w)}function vh(c,m,w){$.call(this,c,w),(c=m||{}).Kb&&Ut(this,"email",c.Kb),c.ea&&Ut(this,"phoneNumber",c.ea),c.credential&&Ut(this,"credential",c.credential),c.$b&&Ut(this,"tenantId",c.$b)}function $s(c){if(c.code){var m=c.code||"";0==m.indexOf(ut)&&(m=m.substring(ut.length));var w={credential:Xg(c),$b:c.tenantId};if(c.email)w.Kb=c.email;else if(c.phoneNumber)w.ea=c.phoneNumber;else if(!w.credential)return new $(m,c.message||void 0);return new vh(m,w,c.message)}return null}function Qo(){}function Kf(){}function A_(c){if(!c.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var m=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],w=0;w<m.length;w++){var E=m[w];try{return new ActiveXObject(E),c.f=E}catch(O){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return c.f}function Jc(){}function tm(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=lt(this.qc,this),this.a.onerror=lt(this.Tb,this),this.a.onprogress=lt(this.rc,this),this.a.ontimeout=lt(this.vc,this)}function _h(c,m){c.readyState=m,c.onreadystatechange&&c.onreadystatechange()}function Jf(c,m,w){this.reset(c,m,w,void 0,void 0)}function ld(c){this.f=c,this.b=this.c=this.a=null}function yh(c,m){this.name=c,this.value=m}ue(Ds,$),ue(vh,$),vh.prototype.w=function(){var c={code:this.code,message:this.message};this.email&&(c.email=this.email),this.phoneNumber&&(c.phoneNumber=this.phoneNumber),this.tenantId&&(c.tenantId=this.tenantId);var m=this.credential&&this.credential.w();return m&&we(c,m),c},vh.prototype.toJSON=function(){return this.w()},Qo.prototype.c=null,ue(Kf,Qo),Kf.prototype.a=function(){var c=A_(this);return c?new ActiveXObject(c):new XMLHttpRequest},Kf.prototype.b=function(){var c={};return A_(this)&&(c[0]=!0,c[1]=!0),c},Zf=new Kf,ue(Jc,Qo),Jc.prototype.a=function(){var c=new XMLHttpRequest;if("withCredentials"in c)return c;if("undefined"!=typeof XDomainRequest)return new tm;throw Error("Unsupported browser")},Jc.prototype.b=function(){return{}},(z=tm.prototype).open=function(c,m,w){if(null!=w&&!w)throw Error("Only async requests are supported.");this.a.open(c,m)},z.send=function(c){if(c){if("string"!=typeof c)throw Error("Only string data is supported");this.a.send(c)}else this.a.send()},z.abort=function(){this.a.abort()},z.setRequestHeader=function(){},z.getResponseHeader=function(c){return"content-type"==c.toLowerCase()?this.a.contentType:""},z.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,_h(this,4)},z.Tb=function(){this.status=500,this.response=this.responseText="",_h(this,4)},z.vc=function(){this.Tb()},z.rc=function(){this.status=200,_h(this,1)},z.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Jf.prototype.a=null,Jf.prototype.reset=function(c,m,w,E,O){E||Nn(),delete this.a},yh.prototype.toString=function(){return this.name};var VC=new yh("SEVERE",1e3),Qf=new yh("WARNING",900),Qc=new yh("CONFIG",700),im=new yh("FINE",500);function Da(c){return c.c?c.c:c.a?Da(c.a):(pt("Root logger has no level set."),null)}ld.prototype.log=function(c,m,w){if(c.value>=Da(this).value)for(qe(m)&&(m=m()),c=new Jf(c,String(m),this.f),w&&(c.a=w),w=this;w;)w=w.a};var Xc={},bh=null;function rm(c){var m;if(bh||(bh=new ld(""),Xc[""]=bh,bh.c=Qc),!(m=Xc[c])){m=new ld(c);var w=c.lastIndexOf("."),E=c.substr(w+1);(w=rm(c.substr(0,w))).b||(w.b={}),w.b[E]=m,m.a=w,Xc[c]=m}return m}function As(c,m){c&&c.log(im,m,void 0)}function sm(c){this.f=c}function wh(c){He.call(this),this.u=c,this.h=void 0,this.readyState=xh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=rm("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}ue(sm,Qo),sm.prototype.a=function(){return new wh(this.f)},sm.prototype.b=function(c){return function(){return c}}({}),ue(wh,He);var xh=0;function xl(c){c.c.read().then(c.pc.bind(c)).catch(c.Va.bind(c))}function Yl(c){c.readyState=4,c.g=null,c.c=null,c.m=null,cd(c)}function cd(c){c.onreadystatechange&&c.onreadystatechange.call(c)}function Ch(c){He.call(this),this.headers=new Df,this.D=c||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Sh,this.u=this.S=!1}(z=wh.prototype).open=function(c,m){if(this.readyState!=xh)throw this.abort(),Error("Error reopening a connection");this.s=c,this.f=m,this.readyState=1,cd(this)},z.send=function(c){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var m={headers:this.l,method:this.s,credentials:this.h,cache:void 0};c&&(m.body=c),this.u.fetch(new Request(this.f,m)).then(this.uc.bind(this),this.Va.bind(this))},z.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Yl(this)),this.readyState=xh},z.uc=function(c){this.a&&(this.g=c,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=c.headers,this.readyState=2,cd(this)),this.a&&(this.readyState=3,cd(this),this.a&&("arraybuffer"===this.responseType?c.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==Y.ReadableStream&&"body"in c?(this.response=this.responseText="",this.c=c.body.getReader(),this.m=new TextDecoder,xl(this)):c.text().then(this.tc.bind(this),this.Va.bind(this)))))},z.pc=function(c){if(this.a){var m=this.m.decode(c.value?c.value:new Uint8Array(0),{stream:!c.done});m&&(this.response=this.responseText+=m),c.done?Yl(this):cd(this),3==this.readyState&&xl(this)}},z.tc=function(c){this.a&&(this.response=this.responseText=c,Yl(this))},z.sc=function(c){this.a&&(this.response=c,Yl(this))},z.Va=function(c){var m=this.i;m&&m.log(Qf,"Failed to fetch url "+this.f,c instanceof Error?c:Error(c)),this.a&&Yl(this)},z.setRequestHeader=function(c,m){this.l.append(c,m)},z.getResponseHeader=function(c){return this.b?this.b.get(c.toLowerCase())||"":((c=this.i)&&c.log(Qf,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},z.getAllResponseHeaders=function(){if(!this.b){var c=this.i;return c&&c.log(Qf,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}c=[];for(var m=this.b.entries(),w=m.next();!w.done;)c.push((w=w.value)[0]+": "+w[1]),w=m.next();return c.join("\r\n")},Object.defineProperty(wh.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(c){this.h=c?"include":"same-origin"}}),ue(Ch,He);var Sh="";Ch.prototype.b=rm("goog.net.XhrIo");var om=/^https?$/i,ud=["POST","PUT"];function dd(c){return"content-type"==c.toLowerCase()}function Qa(c,m){c.c=!1,c.a&&(c.f=!0,c.a.abort(),c.f=!1),c.h=m,eu(c),$l(c)}function eu(c){c.J||(c.J=!0,c.dispatchEvent("complete"),c.dispatchEvent("error"))}function Mh(c){if(c.c&&void 0!==Me)if(c.C[1]&&4==Sn(c)&&2==tu(c))As(c.b,Xa(c,"Local request error detected and ignored"));else if(c.i&&4==Sn(c))ah(c.Wb,0,c);else if(c.dispatchEvent("readystatechange"),4==Sn(c)){As(c.b,Xa(c,"Request complete")),c.c=!1;try{var E,m=tu(c);e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}if(!(E=w)){var O;if(O=0===m){var V=String(c.l).match(Af)[1]||null;if(!V&&Y.self&&Y.self.location){var H=Y.self.location.protocol;V=H.substr(0,H.length-1)}O=!om.test(V?V.toLowerCase():"")}E=O}if(E)c.dispatchEvent("complete"),c.dispatchEvent("success");else{try{var te=2<Sn(c)?c.a.statusText:""}catch(Pe){As(c.b,"Can not get status: "+Pe.message),te=""}c.h=te+" ["+tu(c)+"]",eu(c)}}finally{$l(c)}}}function $l(c,m){if(c.a){T_(c);var w=c.a,E=c.C[0]?Ce:null;c.a=null,c.C=null,m||c.dispatchEvent("ready");try{w.onreadystatechange=E}catch(O){(c=c.b)&&c.log(VC,"Problem encountered resetting onreadystatechange: "+O.message,void 0)}}}function T_(c){c.a&&c.u&&(c.a.ontimeout=null),c.s&&(Y.clearTimeout(c.s),c.s=null)}function Sn(c){return c.a?c.a.readyState:0}function tu(c){try{return 2<Sn(c)?c.a.status:-1}catch(m){return-1}}function Xa(c,m){return m+" ["+c.P+" "+c.l+" "+tu(c)+"]"}function Aa(c){var m=Ar;this.g=[],this.u=m,this.s=c||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Zl(c,m,w){c.a=!0,c.c=w,c.f=!m,HC(c)}function am(c){if(c.a){if(!c.v)throw new R_(c);c.v=!1}}function I_(c,m,w,E){c.g.push([m,w,E]),c.a&&HC(c)}function db(c){return ai(c.g,function(m){return qe(m[1])})}function HC(c){if(c.h&&c.a&&db(c)){var m=c.h,w=hd[m];w&&(Y.clearTimeout(w.a),delete hd[m]),c.h=0}c.b&&(c.b.l--,delete c.b),m=c.c;for(var E=w=!1;c.g.length&&!c.i;){var O=c.g.shift(),V=O[0],H=O[1];if(O=O[2],V=c.f?H:V)try{var te=V.call(O||c.s,m);void 0!==te&&(c.f=c.f&&(te==m||te instanceof Error),c.c=m=te),(Nt(m)||"function"==typeof Y.Promise&&m instanceof Y.Promise)&&(E=!0,c.i=!0)}catch(Pe){m=Pe,c.f=!0,db(c)||(w=!0)}}c.c=m,E&&(te=lt(c.m,c,!0),E=lt(c.m,c,!1),m instanceof Aa?(I_(m,te,E),m.C=!0):m.then(te,E)),w&&(m=new fr(m),hd[m.a]=m,c.h=m.a)}function R_(){Bt.call(this)}function Xo(){Bt.call(this)}function fr(c){this.a=Y.setTimeout(lt(this.c,this),0),this.b=c}(z=Ch.prototype).Ma=function(){void 0!==Me&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",As(this.b,Xa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},z.abort=function(){this.a&&this.c&&(As(this.b,Xa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),$l(this))},z.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),$l(this,!0)),Ch.bb.Da.call(this)},z.Wb=function(){this.ya||(this.N||this.i||this.f?Mh(this):this.Jc())},z.Jc=function(){Mh(this)},z.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Sh:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var c=this.b;return c&&c.log(VC,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(m){return As(this.b,"Can not get response: "+m.message),null}},Aa.prototype.cancel=function(c){if(this.a)this.c instanceof Aa&&this.c.cancel();else{if(this.b){var m=this.b;delete this.b,c?m.cancel(c):(m.l--,0>=m.l&&m.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(c=new Xo(this),am(this),Zl(this,!1,c))}},Aa.prototype.m=function(c,m){this.i=!1,Zl(this,c,m)},Aa.prototype.then=function(c,m,w){var E,O,V=new Jn(function(H,te){E=H,O=te});return I_(this,E,function(H){H instanceof Xo?V.cancel():O(H)}),V.then(c,m,w)},Aa.prototype.$goog_Thenable=!0,ue(R_,Bt),R_.prototype.message="Deferred has already fired",R_.prototype.name="AlreadyCalledError",ue(Xo,Bt),Xo.prototype.message="Deferred was canceled",Xo.prototype.name="CanceledError",fr.prototype.c=function(){throw delete hd[this.a],this.b};var hd={};function Xf(c){var m={},w=m.document||document,E=Vs(c).toString(),O=i_(document,"SCRIPT"),V={Xb:O,Ma:void 0},H=new Aa(V),te=null,Pe=null!=m.timeout?m.timeout:5e3;return 0<Pe&&(te=window.setTimeout(function(){nu(O,!0);var Qe=new O_(hb,"Timeout reached for loading script "+E);am(H),Zl(H,!1,Qe)},Pe),V.Ma=te),O.onload=O.onreadystatechange=function(){O.readyState&&"loaded"!=O.readyState&&"complete"!=O.readyState||(nu(O,m.xd||!1,te),am(H),Zl(H,!0,null))},O.onerror=function(){nu(O,!0,te);var Qe=new O_(k_,"Error while loading script "+E);am(H),Zl(H,!1,Qe)},we(V=m.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Cg(O,V),function qn(c,m){pe(c,"HTMLScriptElement"),c.src=Vs(m),(m=c.ownerDocument&&c.ownerDocument.defaultView)&&m!=Y?m=ke(m.document):(null===le&&(le=ke(Y.document)),m=le),m&&c.setAttribute("nonce",m)}(O,c),function P_(c){var m;return(m=(c||document).getElementsByTagName("HEAD"))&&0!=m.length?m[0]:c.documentElement}(w).appendChild(O),H}function Ar(){if(this&&this.Xb){var c=this.Xb;c&&"SCRIPT"==c.tagName&&nu(c,!0,this.Ma)}}function nu(c,m,w){null!=w&&Y.clearTimeout(w),c.onload=Ce,c.onerror=Ce,c.onreadystatechange=Ce,m&&window.setTimeout(function(){c&&c.parentNode&&c.parentNode.removeChild(c)},0)}var k_=0,hb=1;function O_(c,m){var w="Jsloader error (code #"+c+")";m&&(w+=": "+m),Bt.call(this,w),this.code=c}function Eh(c){this.f=c}function Ta(c,m,w){if(this.c=c,this.l=(c=m||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=c.secureTokenTimeout||F_,this.g=ie(c.secureTokenHeaders||fb),this.h=c.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=c.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=c.firebaseTimeout||L_,this.a=ie(c.firebaseHeaders||N_),w&&(this.a["X-Client-Version"]=w,this.g["X-Client-Version"]=w),w="Node"==os(),!(w=Y.XMLHttpRequest||w&&u.Z.INTERNAL.node&&u.Z.INTERNAL.node.XMLHttpRequest)&&!ii())throw new $("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=ii()?new sm(self):Ri()?new Eh(w):new Jc,this.b=null}ue(O_,Bt),ue(Eh,Qo),Eh.prototype.a=function(){return new this.f},Eh.prototype.b=function(){return{}};var Dh,ea="idToken",F_=new Vc(3e4,6e4),fb={"Content-Type":"application/x-www-form-urlencoded"},L_=new Vc(3e4,6e4),N_={"Content-Type":"application/json"};function pb(c,m){m?c.a["X-Firebase-Locale"]=m:delete c.a["X-Firebase-Locale"]}function lm(c,m){m&&(c.l=iu("https://securetoken.googleapis.com/v1/token",m),c.h=iu("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",m),c.i=iu("https://identitytoolkit.googleapis.com/v2/",m))}function iu(c,m){return c=Ro(c),m=Ro(m.url),c.f=c.a+c.f,lh(c,m.c),c.a=m.a,pl(c,m.g),c.toString()}function Ah(c,m){m?(c.a["X-Client-Version"]=m,c.g["X-Client-Version"]=m):(delete c.a["X-Client-Version"],delete c.g["X-Client-Version"])}function ep(c,m,w,E,O,V,H){(function TC(){var c=Un();return!((c="Chrome"!=ml(c)?null:(c=c.match(/\sChrome\/(\d+)/i))&&2==c.length?parseInt(c[1],10):null)&&30>c||Us&&Lr&&!(9<Lr))})()||ii()?c=lt(c.u,c):(Dh||(Dh=new Jn(function(te,Pe){!function tp(c,m){((window.gapi||{}).client||{}).request?c():(Y[B_]=function(){((window.gapi||{}).client||{}).request?c():m(Error("CORS_UNSUPPORTED"))},function ub(c,m){I_(c,null,m,void 0)}(Xf(Fl(fd,{onload:B_})),function(){m(Error("CORS_UNSUPPORTED"))}))}(te,Pe)})),c=lt(c.s,c)),c(m,w,E,O,V,H)}Ta.prototype.T=function(){return this.b},Ta.prototype.u=function(c,m,w,E,O,V){if(ii()&&(void 0===Y.fetch||void 0===Y.Headers||void 0===Y.Request))throw new $("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var H=new Ch(this.f);if(V){H.g=Math.max(0,V);var te=setTimeout(function(){H.dispatchEvent("timeout")},V)}Xn(H,"complete",function(){te&&clearTimeout(te);var Pe=null;try{Pe=JSON.parse(function GC(c){try{return c.a?c.a.responseText:""}catch(m){return As(c.b,"Can not get responseText: "+m.message),""}}(this))||null}catch(Qe){Pe=null}m&&m(Pe)}),b_(H,"ready",function(){te&&clearTimeout(te),q0(this)}),b_(H,"timeout",function(){te&&clearTimeout(te),q0(this),m&&m(null)}),function cb(c,m,w,E,O){if(c.a)throw Error("[goog.net.XhrIo] Object is active with another request="+c.l+"; newUri="+m);w=w?w.toUpperCase():"GET",c.l=m,c.h="",c.P=w,c.J=!1,c.c=!0,c.a=c.D?c.D.a():Zf.a(),c.C=function em(c){return c.c||(c.c=c.b())}(c.D?c.D:Zf),c.a.onreadystatechange=lt(c.Wb,c);try{As(c.b,Xa(c,"Opening Xhr")),c.N=!0,c.a.open(w,String(m),!0),c.N=!1}catch(H){return As(c.b,Xa(c,"Error opening Xhr: "+H.message)),void Qa(c,H)}m=E||"";var V=new Df(c.headers);O&&function w_(c,m){if(c.forEach&&"function"==typeof c.forEach)c.forEach(m,void 0);else if(Pt(c)||"string"==typeof c)zi(c,m,void 0);else for(var w=Ag(c),E=xa(c),O=E.length,V=0;V<O;V++)m.call(void 0,E[V],w&&w[V],c)}(O,function(H,te){V.set(te,H)}),O=function ga(c){e:{for(var m=dd,w=c.length,E="string"==typeof c?c.split(""):c,O=0;O<w;O++)if(O in E&&m.call(void 0,E[O],O,c)){m=O;break e}m=-1}return 0>m?null:"string"==typeof c?c.charAt(m):c[m]}(V.Y()),E=Y.FormData&&m instanceof Y.FormData,!jt(ud,w)||O||E||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),V.forEach(function(H,te){this.a.setRequestHeader(te,H)},c),c.m&&(c.a.responseType=c.m),"withCredentials"in c.a&&c.a.withCredentials!==c.S&&(c.a.withCredentials=c.S);try{T_(c),0<c.g&&(c.u=function UC(c){return Us&&Bi(9)&&"number"==typeof c.timeout&&void 0!==c.ontimeout}(c.a),As(c.b,Xa(c,"Will abort after "+c.g+"ms if incomplete, xhr2 "+c.u)),c.u?(c.a.timeout=c.g,c.a.ontimeout=lt(c.Ma,c)):c.s=ah(c.Ma,c.g,c)),As(c.b,Xa(c,"Sending request")),c.i=!0,c.a.send(m),c.i=!1}catch(H){As(c.b,Xa(c,"Send error: "+H.message)),Qa(c,H)}}(H,c,w,E,O)};var fd=new dt(pi,"https://apis.google.com/js/client.js?onload=%{onload}"),B_="__fcb"+Math.floor(1e6*Math.random()).toString();function Zi(c){if("string"!=typeof(c=c.email)||!Gl.test(c))throw new $("invalid-email")}function cm(c){"email"in c&&Zi(c)}function Oo(c){if(!c[ea])throw c.mfaPendingCredential?new $("multi-factor-auth-required",null,ie(c)):new $("internal-error")}function V_(c){if(c.phoneNumber||c.temporaryProof){if(!c.phoneNumber||!c.temporaryProof)throw new $("internal-error")}else{if(!c.sessionInfo)throw new $("missing-verification-id");if(!c.code)throw new $("missing-verification-code")}}Ta.prototype.s=function(c,m,w,E,O){var V=this;Dh.then(function(){window.gapi.client.setApiKey(V.c);var H=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:c,method:w,body:E,headers:O,authType:"none",callback:function(te){window.gapi.auth.setToken(H),m&&m(te)}})}).o(function(H){m&&m({error:{message:H&&H.message||"CORS_UNSUPPORTED"}})})},Ta.prototype.Ab=function(){return ri(this,pm,{})},Ta.prototype.Cb=function(c,m){return ri(this,op,{idToken:c,email:m})},Ta.prototype.Db=function(c,m){return ri(this,vo,{idToken:c,password:m})};var U_={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ip(c){if(!c.phoneVerificationInfo)throw new $("internal-error");if(!c.phoneVerificationInfo.sessionInfo)throw new $("missing-verification-id");if(!c.phoneVerificationInfo.code)throw new $("missing-verification-code")}function H_(c){if(!c.requestUri||!c.sessionId&&!c.postBody&&!c.pendingToken)throw new $("internal-error")}function vb(c,m){return m.oauthIdToken&&m.providerId&&0==m.providerId.indexOf("oidc.")&&!m.pendingToken&&(c.sessionId?m.nonce=c.sessionId:c.postBody&&gl(c=new Lc(c.postBody),"nonce")&&(m.nonce=c.get("nonce"))),m}function rp(c){var m=null;if(c.needConfirmation?(c.code="account-exists-with-different-credential",m=$s(c)):"FEDERATED_USER_ID_ALREADY_LINKED"==c.errorMessage?(c.code="credential-already-in-use",m=$s(c)):"EMAIL_EXISTS"==c.errorMessage?(c.code="email-already-in-use",m=$s(c)):c.errorMessage&&(m=Ab(c.errorMessage)),m)throw m;Oo(c)}function Th(c,m){return m.returnIdpCredential=!0,ri(c,Eb,m)}function ta(c,m){return m.returnIdpCredential=!0,ri(c,ap,m)}function gd(c,m){return m.returnIdpCredential=!0,m.autoCreate=!1,ri(c,Db,m)}function ru(c){if(!c.oobCode)throw new $("invalid-action-code")}(z=Ta.prototype).Eb=function(c,m){var w={idToken:c},E=[];return _n(U_,function(O,V){var H=m[V];null===H?E.push(O):V in m&&(w[V]=H)}),E.length&&(w.deleteAttribute=E),ri(this,op,w)},z.wb=function(c,m){return we(c={requestType:"PASSWORD_RESET",email:c},m),ri(this,vd,c)},z.xb=function(c,m){return we(c={requestType:"EMAIL_SIGNIN",email:c},m),ri(this,sp,c)},z.vb=function(c,m){return we(c={requestType:"VERIFY_EMAIL",idToken:c},m),ri(this,wb,c)},z.Fb=function(c,m,w){return we(c={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:c,newEmail:m},w),ri(this,fm,c)},z.gb=function(c){return ri(this,gm,c)},z.ob=function(c,m){return ri(this,Sb,{oobCode:c,newPassword:m})},z.Sa=function(c){return ri(this,um,{oobCode:c})},z.kb=function(c){return ri(this,_b,{oobCode:c})};var _b={endpoint:"setAccountInfo",A:ru,Z:"email",B:!0},um={endpoint:"resetPassword",A:ru,G:function(c){var m=c.requestType;if(!m||!c.email&&"EMAIL_SIGNIN"!=m&&"VERIFY_AND_CHANGE_EMAIL"!=m)throw new $("internal-error")},B:!0},su={endpoint:"signupNewUser",A:function(c){if(Zi(c),!c.password)throw new $("weak-password")},G:Oo,V:!0,B:!0},yb={endpoint:"createAuthUri",B:!0},z_={endpoint:"deleteAccount",O:["idToken"]},md={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(c){if(!Array.isArray(c.deleteProvider))throw new $("internal-error")}},dm={endpoint:"emailLinkSignin",O:["email","oobCode"],A:Zi,G:Oo,V:!0,B:!0},j_={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:Zi,G:Oo,V:!0},bb={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:ip,G:Oo,B:!0,Na:!0},ou={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:ip,G:Oo,B:!0,Na:!0},hm={endpoint:"getAccountInfo"},sp={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(c){if("EMAIL_SIGNIN"!=c.requestType)throw new $("internal-error");Zi(c)},Z:"email",B:!0},wb={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(c){if("VERIFY_EMAIL"!=c.requestType)throw new $("internal-error")},Z:"email",B:!0},fm={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(c){if("VERIFY_AND_CHANGE_EMAIL"!=c.requestType)throw new $("internal-error")},Z:"email",B:!0},vd={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(c){if("PASSWORD_RESET"!=c.requestType)throw new $("internal-error");Zi(c)},Z:"email",B:!0},xb={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Cb={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(c){if(!c.recaptchaSiteKey)throw new $("internal-error")}},Sb={endpoint:"resetPassword",A:ru,Z:"email",B:!0},Mb={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},op={endpoint:"setAccountInfo",O:["idToken"],A:cm,V:!0},vo={endpoint:"setAccountInfo",O:["idToken"],A:function(c){if(cm(c),!c.password)throw new $("weak-password")},G:Oo,V:!0},pm={endpoint:"signupNewUser",G:Oo,V:!0,B:!0},W_={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(c){if(!c.phoneEnrollmentInfo)throw new $("internal-error");if(!c.phoneEnrollmentInfo.phoneNumber)throw new $("missing-phone-number");if(!c.phoneEnrollmentInfo.recaptchaToken)throw new $("missing-app-credential")},G:function(c){if(!c.phoneSessionInfo||!c.phoneSessionInfo.sessionInfo)throw new $("internal-error")},B:!0,Na:!0},au={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(c){if(!c.phoneSignInInfo||!c.phoneSignInInfo.recaptchaToken)throw new $("missing-app-credential")},G:function(c){if(!c.phoneResponseInfo||!c.phoneResponseInfo.sessionInfo)throw new $("internal-error")},B:!0,Na:!0},Eb={endpoint:"verifyAssertion",A:H_,Za:vb,G:rp,V:!0,B:!0},Db={endpoint:"verifyAssertion",A:H_,Za:vb,G:function(c){if(c.errorMessage&&"USER_NOT_FOUND"==c.errorMessage)throw new $("user-not-found");if(c.errorMessage)throw Ab(c.errorMessage);Oo(c)},V:!0,B:!0},ap={endpoint:"verifyAssertion",A:function(c){if(H_(c),!c.idToken)throw new $("internal-error")},Za:vb,G:rp,V:!0},q_={endpoint:"verifyCustomToken",A:function(c){if(!c.token)throw new $("invalid-custom-token")},G:Oo,V:!0,B:!0},Kl={endpoint:"verifyPassword",A:function(c){if(Zi(c),!c.password)throw new $("wrong-password")},G:Oo,V:!0,B:!0},gm={endpoint:"verifyPhoneNumber",A:V_,G:Oo,B:!0},Y_={endpoint:"verifyPhoneNumber",A:function(c){if(!c.idToken)throw new $("internal-error");V_(c)},G:function(c){if(c.temporaryProof)throw c.code="credential-already-in-use",$s(c);Oo(c)}},lp={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:V_,G:Oo,B:!0},cp={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(c){if(!!c[ea]^!!c.refreshToken)throw new $("internal-error")},B:!0,Na:!0};function ri(c,m,w){if(!function Lf(c,m){if(!m||!m.length)return!0;if(!c)return!1;for(var w=0;w<m.length;w++){var E=c[m[w]];if(null==E||""===E)return!1}return!0}(w,m.O))return qi(new $("internal-error"));var V,E=!!m.Na,O=m.Vb||"POST";return rn(w).then(m.A).then(function(){return m.V&&(w.returnSecureToken=!0),m.B&&c.b&&void 0===w.tenantId&&(w.tenantId=c.b),function gb(c,m,w,E,O,V,H){var te=Ro(m+w);Dr(te,"key",c.c),H&&Dr(te,"cb",Date.now().toString());var Pe="GET"==E;if(Pe)for(var Qe in O)O.hasOwnProperty(Qe)&&Dr(te,Qe,O[Qe]);return new Jn(function(En,ki){ep(c,te.toString(),function(vi){vi?vi.error?ki(Zs(vi,V||{})):En(vi):ki(new $("network-request-failed"))},E,Pe?void 0:AC(vl(O)),c.a,c.v.get())})}(c,E?c.i:c.h,m.endpoint,O,w,m.Ib,m.mb||!1)}).then(function(H){return V=H,m.Za?m.Za(w,V):V}).then(m.G).then(function(){if(!m.Z)return V;if(!(m.Z in V))throw new $("internal-error");return V[m.Z]})}function Ab(c){return Zs({error:{errors:[{message:c}],code:400,message:c}})}function Zs(c,m){var w=(c.error&&c.error.errors&&c.error.errors[0]||{}).reason||"",E={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(w=E[w]?new $(E[w]):null)return w;for(var O in w=c.error&&c.error.message||"",we(E={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},m||{}),m=(m=w.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<m.length?m[1]:void 0,E)if(0===w.indexOf(O))return new $(E[O],m);return!m&&c&&(m=jl(c)),new $("internal-error",m)}function Ee(c){this.b=c,this.a=null,this.sb=function it(c){return function Kt(){return yd||(yd=new Jn(function(c,m){function w(){Pf(),zn("gapi.load")("gapi.iframes",{callback:c,ontimeout:function(){Pf(),m(Error("Network Error"))},timeout:Tr.get()})}if(zn("gapi.iframes.Iframe"))c();else if(zn("gapi.load"))w();else{var E="__iframefcb"+Math.floor(1e6*Math.random()).toString();Y[E]=function(){zn("gapi.load")?w():m(Error("Network Error"))},rn(Xf(E=Fl(gt,{onload:E}))).o(function(){m(Error("Network Error"))})}}).o(function(c){throw yd=null,c}))}().then(function(){return new Jn(function(m,w){zn("gapi.iframes.getContext")().open({where:document.body,url:c.b,messageHandlersFilter:zn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(E){function O(){clearTimeout(V),m()}c.a=E,c.a.restyle({setHideOnLeave:!1});var V=setTimeout(function(){w(Error("Network Error"))},_d.get());E.ping(O).then(O,function(){w(Error("Network Error"))})})})})}(this)}var gt=new dt(pi,"https://apis.google.com/js/api.js?onload=%{onload}"),Tr=new Vc(3e4,6e4),_d=new Vc(5e3,15e3),yd=null;function an(c,m,w,E){this.l=c,this.h=m,this.i=w,this.g=E,this.f=null,c=this.g?Ig((c=Ro(this.g.url)).c,c.a,c.g,"/emulator/auth/iframe"):Ig("https",this.l,null,"/__/auth/iframe"),this.a=c,Dr(this.a,"apiKey",this.h),Dr(this.a,"appName",this.i),this.b=null,this.c=[]}function _t(c,m,w,E,O,V){this.u=c,this.s=m,this.c=w,this.m=E,this.v=V,this.i=this.g=this.l=null,this.a=O,this.h=this.f=null}function mm(c){try{return u.Z.app(c).auth().Ga()}catch(m){return[]}}function $_(c,m,w,E,O,V){this.s=c,this.g=m,this.b=w,this.f=V,this.c=E||null,this.i=O||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function Kn(c){var m=Ju();return function jC(c){return ri(c,xb,{}).then(function(m){return m.authorizedDomains||[]})}(c).then(function(w){e:{var E=Ro(m),O=E.c;E=E.a;for(var V=0;V<w.length;V++){var H=w[V],te=E,Pe=O;if(0==H.indexOf("chrome-extension://")?te=Ro(H).a==te&&"chrome-extension"==Pe:"http"!=Pe&&"https"!=Pe?te=!1:SD.test(H)?te=te==H:(H=H.split(".").join("\\."),te=new RegExp("^(.+\\."+H+"|"+H+")$","i").test(te)),te){w=!0;break e}}w=!1}if(!w)throw new Ds(Ju())})}function lu(c){return c.m||(c.m=ch().then(function(){if(!c.u){var m=c.c,w=c.i,E=mm(c.b),O=new an(c.s,c.g,c.b,c.f);O.f=m,O.b=w,O.c=vr(E||[]),c.u=O.toString()}c.v=new Ee(c.u),function Yn(c){if(!c.v)throw Error("IfcHandler must be initialized!");!function Ih(c,m){c.sb.then(function(){c.a.register("authEvent",m,zn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(c.v,function(m){var w={};if(m&&m.authEvent){var E=!1;for(m=Ja(m.authEvent),w=0;w<c.h.length;w++)E=c.h[w](m)||E;return(w={}).status=E?"ACK":"ERROR",rn(w)}return w.status="ERROR",rn(w)})}(c)})),c.m}function up(c){return c.l||(c.C=c.c?Ko(c.c,mm(c.b)):null,c.l=new Ta(c.g,bt(c.i),c.C),c.f&&lm(c.l,c.f)),c.l}function Kr(c,m,w,E,O,V,H,te,Pe,Qe,En,ki){return(c=new _t(c,m,w,E,O,ki)).l=V,c.g=H,c.i=te,c.b=ie(Pe||null),c.f=Qe,c.zb(En).toString()}function cu(c){if(this.a=c||u.Z.INTERNAL.reactNative&&u.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new $("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function vm(c){this.b=c,this.a={},this.f=lt(this.c,this)}an.prototype.toString=function(){return this.f?Dr(this.a,"v",this.f):Po(this.a.b,"v"),this.b?Dr(this.a,"eid",this.b):Po(this.a.b,"eid"),this.c.length?Dr(this.a,"fw",this.c.join(",")):Po(this.a.b,"fw"),this.a.toString()},_t.prototype.zb=function(c){return this.h=c,this},_t.prototype.toString=function(){if(this.v){var c=Ro(this.v.url);c=Ig(c.c,c.a,c.g,"/emulator/auth/handler")}else c=Ig("https",this.u,null,"/__/auth/handler");if(Dr(c,"apiKey",this.s),Dr(c,"appName",this.c),Dr(c,"authType",this.m),this.a.isOAuthProvider){var m=this.a;try{var w=u.Z.app(this.c).auth().la()}catch(te){w=null}for(var E in m.pb=w,Dr(c,"providerId",this.a.providerId),m=vl((w=this.a).Jb))m[E]=m[E].toString();E=w.Qc,m=ie(m);for(var O=0;O<E.length;O++){var V=E[O];V in m&&delete m[V]}w.qb&&w.pb&&!m[w.qb]&&(m[w.qb]=w.pb),oe(m)||Dr(c,"customParameters",jl(m))}if("function"==typeof this.a.Rb&&(w=this.a.Rb()).length&&Dr(c,"scopes",w.join(",")),this.l?Dr(c,"redirectUrl",this.l):Po(c.b,"redirectUrl"),this.g?Dr(c,"eventId",this.g):Po(c.b,"eventId"),this.i?Dr(c,"v",this.i):Po(c.b,"v"),this.b)for(var H in this.b)this.b.hasOwnProperty(H)&&!$o(c,H)&&Dr(c,H,this.b[H]);return this.h?Dr(c,"tid",this.h):Po(c.b,"tid"),this.f?Dr(c,"eid",this.f):Po(c.b,"eid"),(H=mm(this.c)).length&&Dr(c,"fw",H.join(",")),c.toString()},(z=$_.prototype).Pb=function(c,m,w){var E=new $("popup-closed-by-user"),O=new $("web-storage-unsupported"),V=this,H=!1;return this.ma().then(function(){(function Z_(c){var m={type:"webStorageSupport"};return lu(c).then(function(){return function Ia(c,m){return c.sb.then(function(){return new Jn(function(w){c.a.send(m.type,m,w,zn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(c.v,m)}).then(function(w){if(w&&w.length&&void 0!==w[0].webStorageSupport)return w[0].webStorageSupport;throw Error()})})(V).then(function(te){te||(c&&Zo(c),m(O),H=!0)})}).o(function(){}).then(function(){if(!H)return function CD(c){return new Jn(function(m){return function w(){hl(2e3).then(function(){if(c&&!c.closed)return w();m()})}()})}(c)}).then(function(){if(!H)return hl(w).then(function(){m(E)})})},z.Yb=function(){var c=Un();return!zl(c)&&!Ca(c)},z.Ub=function(){return!1},z.Nb=function(c,m,w,E,O,V,H,te){if(!c)return qi(new $("popup-blocked"));if(H&&!zl())return this.ma().o(function(Qe){Zo(c),O(Qe)}),E(),rn();this.a||(this.a=Kn(up(this)));var Pe=this;return this.a.then(function(){var Qe=Pe.ma().o(function(En){throw Zo(c),O(En),En});return E(),Qe}).then(function(){wl(w),H||Pg(Kr(Pe.s,Pe.g,Pe.b,m,w,null,V,Pe.c,void 0,Pe.i,te,Pe.f),c)}).o(function(Qe){throw"auth/network-request-failed"==Qe.code&&(Pe.a=null),Qe})},z.Ob=function(c,m,w,E){this.a||(this.a=Kn(up(this)));var O=this;return this.a.then(function(){wl(m),Pg(Kr(O.s,O.g,O.b,c,m,Ju(),w,O.c,void 0,O.i,E,O.f))}).o(function(V){throw"auth/network-request-failed"==V.code&&(O.a=null),V})},z.ma=function(){var c=this;return lu(this).then(function(){return c.v.sb}).o(function(){throw c.a=null,new $("network-request-failed")})},z.ac=function(){return!0},z.Ea=function(c){this.h.push(c)},z.Ta=function(c){fi(this.h,function(m){return m==c})},(z=cu.prototype).get=function(c){return rn(this.a.getItem(c)).then(function(m){return m&&Bc(m)})},z.set=function(c,m){return rn(this.a.setItem(c,jl(m)))},z.U=function(c){return rn(this.a.removeItem(c))},z.ca=function(){},z.ia=function(){};var br,K_=[];function Ra(c,m,w){oe(c.a)&&c.b.addEventListener("message",c.f),void 0===c.a[m]&&(c.a[m]=[]),c.a[m].push(w)}function Pa(c){this.a=c}function uu(c){this.c=c,this.b=!1,this.a=[]}function Ks(c,m,w,E){var O,H,te,Pe,V=w||{},Qe=null;if(c.b)return qi(Error("connection_unavailable"));var En=E?800:50,ki="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Jn(function(vi,hs){ki?(O=Math.floor(Math.random()*Math.pow(10,20)).toString(),ki.port1.start(),te=setTimeout(function(){hs(Error("unsupported_event"))},En),c.a.push(Qe={messageChannel:ki,onMessage:H=function(dc){dc.data.eventId===O&&("ack"===dc.data.status?(clearTimeout(te),Pe=setTimeout(function(){hs(Error("timeout"))},3e3)):"done"===dc.data.status?(clearTimeout(Pe),void 0!==dc.data.response?vi(dc.data.response):hs(Error("unknown_error"))):(clearTimeout(te),clearTimeout(Pe),hs(Error("invalid_response"))))}}),ki.port1.addEventListener("message",H),c.c.postMessage({eventType:m,eventId:O,data:V},[ki.port2])):hs(Error("connection_unavailable"))}).then(function(vi){return J_(c,Qe),vi}).o(function(vi){throw J_(c,Qe),vi})}function J_(c,m){if(m){var w=m.messageChannel;w&&(w.port1.removeEventListener("message",m.onMessage),w.port1.close()),fi(c.a,function(O){return O==m})}}function Jl(){if(!dn())throw new $("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=Y.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var c=this;ii()&&self?(this.v=function mi(){var c=ii()?self:null;if(zi(K_,function(w){w.b==c&&(m=w)}),!m){var m=new vm(c);K_.push(m)}return m}(),Ra(this.v,"keyChanged",function(m,w){return Ir(c).then(function(E){return 0<E.length&&zi(c.a,function(O){O(E)}),{keyProcessed:jt(E,w.key)}})}),Ra(this.v,"ping",function(){return rn(["keyChanged"])})):function nb(){var c=Y.navigator;return c&&c.serviceWorker?rn().then(function(){return c.serviceWorker.ready}).then(function(m){return m.active||null}).o(function(){return null}):rn(null)}().then(function(m){(c.h=m)&&(c.g=new uu(new Pa(m)),Ks(c.g,"ping",null,!0).then(function(w){w[0].fulfilled&&jt(w[0].value,"keyChanged")&&(c.s=!0)}).o(function(){}))})}function _m(c){return new Jn(function(m,w){var E=c.m.open("firebaseLocalStorageDb",1);E.onerror=function(O){try{O.preventDefault()}catch(V){}w(Error(O.target.error))},E.onupgradeneeded=function(O){O=O.target.result;try{O.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(V){w(V)}},E.onsuccess=function(O){(O=O.target.result).objectStoreNames.contains("firebaseLocalStorage")?m(O):function bd(c){return new Jn(function(m,w){var E=c.m.deleteDatabase("firebaseLocalStorageDb");E.onsuccess=function(){m()},E.onerror=function(O){w(Error(O.target.error))}})}(c).then(function(){return _m(c)}).then(function(V){m(V)}).o(function(V){w(V)})}})}function ym(c){return c.i||(c.i=_m(c)),c.i}function du(c,m){var E=0;return new Jn(function w(O,V){ym(c).then(m).then(O).o(function(H){if(!(3<++E))return ym(c).then(function(te){return te.close(),c.i=void 0,w(O,V)}).o(function(te){V(te)});V(H)})})}function dn(){try{return!!Y.indexedDB}catch(c){return!1}}function Ql(c){return c.objectStore("firebaseLocalStorage")}function wd(c,m){return c.transaction(["firebaseLocalStorage"],m?"readwrite":"readonly")}function $t(c){return new Jn(function(m,w){c.onsuccess=function(E){E&&E.target?m(E.target.result):m()},c.onerror=function(E){w(E.target.error)}})}function el(c,m){return c.g&&c.h&&function RC(){var c=Y.navigator;return c&&c.serviceWorker&&c.serviceWorker.controller||null}()===c.h?Ks(c.g,"keyChanged",{key:m},c.s).then(function(){}).o(function(){}):rn()}function Ir(c){return ym(c).then(function(m){var w=Ql(wd(m,!1));return w.getAll?$t(w.getAll()):new Jn(function(E,O){var V=[],H=w.openCursor();H.onsuccess=function(te){(te=te.target.result)?(V.push(te.value),te.continue()):E(V)},H.onerror=function(te){O(te.target.error)}})}).then(function(m){var w={},E=[];if(0==c.b){for(E=0;E<m.length;E++)w[m[E].fbase_key]=m[E].value;E=kg(c.c,w),c.c=w}return E})}function xd(c){c.l&&c.l.cancel("STOP_EVENT"),c.f&&(clearTimeout(c.f),c.f=null)}function dp(c){var m=this,w=null;this.a=[],this.type="indexedDB",this.c=c,this.b=rn().then(function(){if(dn()){var E=Dn(),O="__sak"+E;return br||(br=new Jl),(w=br).set(O,E).then(function(){return w.get(O)}).then(function(V){if(V!==E)throw Error("indexedDB not supported!");return w.U(O)}).then(function(){return w}).o(function(){return m.c})}return m.c}).then(function(E){return m.type=E.type,E.ca(function(O){zi(m.a,function(V){V(O)})}),E})}function _o(){this.a={},this.type="inMemory"}function hu(){if(!function hp(){var c="Node"==os();if(!(c=Ph()||c&&u.Z.INTERNAL.node&&u.Z.INTERNAL.node.localStorage))return!1;try{return c.setItem("__sak","1"),c.removeItem("__sak"),!0}catch(m){return!1}}())throw"Node"==os()?new $("internal-error","The LocalStorage compatibility library was not found."):new $("web-storage-unsupported");this.a=Ph()||u.Z.INTERNAL.node.localStorage,this.type="localStorage"}function Ph(){try{var c=Y.localStorage,m=Dn();return c&&(c.setItem(m,"1"),c.removeItem(m)),c}catch(w){return null}}function bm(){this.type="nullStorage"}function fp(){if(!function Cd(){var c="Node"==os();if(!(c=Tb()||c&&u.Z.INTERNAL.node&&u.Z.INTERNAL.node.sessionStorage))return!1;try{return c.setItem("__sak","1"),c.removeItem("__sak"),!0}catch(m){return!1}}())throw"Node"==os()?new $("internal-error","The SessionStorage compatibility library was not found."):new $("web-storage-unsupported");this.a=Tb()||u.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Tb(){try{var c=Y.sessionStorage,m=Dn();return c&&(c.setItem(m,"1"),c.removeItem(m)),c}catch(w){return null}}function fu(){var c={};c.Browser=wm,c.Node=Jr,c.ReactNative=MD,c.Worker=Ib,this.a=c[os()]}vm.prototype.c=function(c){var m=c.data.eventType,w=c.data.eventId,E=this.a[m];if(E&&0<E.length){c.ports[0].postMessage({status:"ack",eventId:w,eventType:m,response:null});var O=[];zi(E,function(V){O.push(rn().then(function(){return V(c.origin,c.data.data)}))}),xC(O).then(function(V){var H=[];zi(V,function(te){H.push({fulfilled:te.Qb,value:te.value,reason:te.reason?te.reason.message:void 0})}),zi(H,function(te){for(var Pe in te)void 0===te[Pe]&&delete te[Pe]}),c.ports[0].postMessage({status:"done",eventId:w,eventType:m,response:H})})}},Pa.prototype.postMessage=function(c,m){this.a.postMessage(c,m)},uu.prototype.close=function(){for(;0<this.a.length;)J_(this,this.a[0]);this.b=!0},(z=Jl.prototype).set=function(c,m){var w=this,E=!1;return du(this,function(O){return $t((O=Ql(wd(O,!0))).get(c))}).then(function(O){return du(w,function(V){if(V=Ql(wd(V,!0)),O)return O.value=m,$t(V.put(O));w.b++,E=!0;var H={};return H.fbase_key=c,H.value=m,$t(V.add(H))})}).then(function(){return w.c[c]=m,el(w,c)}).oa(function(){E&&w.b--})},z.get=function(c){return du(this,function(m){return $t(Ql(wd(m,!1)).get(c))}).then(function(m){return m&&m.value})},z.U=function(c){var m=this,w=!1;return du(this,function(E){return w=!0,m.b++,$t(Ql(wd(E,!0)).delete(c))}).then(function(){return delete m.c[c],el(m,c)}).oa(function(){w&&m.b--})},z.ca=function(c){0==this.a.length&&function Rh(c){xd(c),function m(){c.f=setTimeout(function(){c.l=Ir(c).then(function(w){0<w.length&&zi(c.a,function(E){E(w)})}).then(function(){m()}).o(function(w){"STOP_EVENT"!=w.message&&m()})},800)}()}(this),this.a.push(c)},z.ia=function(c){fi(this.a,function(m){return m==c}),0==this.a.length&&xd(this)},(z=dp.prototype).get=function(c){return this.b.then(function(m){return m.get(c)})},z.set=function(c,m){return this.b.then(function(w){return w.set(c,m)})},z.U=function(c){return this.b.then(function(m){return m.U(c)})},z.ca=function(c){this.a.push(c)},z.ia=function(c){fi(this.a,function(m){return m==c})},(z=_o.prototype).get=function(c){return rn(this.a[c])},z.set=function(c,m){return this.a[c]=m,rn()},z.U=function(c){return delete this.a[c],rn()},z.ca=function(){},z.ia=function(){},(z=hu.prototype).get=function(c){var m=this;return rn().then(function(){return Bc(m.a.getItem(c))})},z.set=function(c,m){var w=this;return rn().then(function(){var E=jl(m);null===E?w.U(c):w.a.setItem(c,E)})},z.U=function(c){var m=this;return rn().then(function(){m.a.removeItem(c)})},z.ca=function(c){Y.window&&Ss(Y.window,"storage",c)},z.ia=function(c){Y.window&&zs(Y.window,"storage",c)},(z=bm.prototype).get=function(){return rn(null)},z.set=function(){return rn()},z.U=function(){return rn()},z.ca=function(){},z.ia=function(){},(z=fp.prototype).get=function(c){var m=this;return rn().then(function(){return Bc(m.a.getItem(c))})},z.set=function(c,m){var w=this;return rn().then(function(){var E=jl(m);null===E?w.U(c):w.a.setItem(c,E)})},z.U=function(c){var m=this;return rn().then(function(){m.a.removeItem(c)})},z.ca=function(){},z.ia=function(){};var Ts,Js,wm={F:hu,cb:fp},Jr={F:hu,cb:fp},MD={F:cu,cb:bm},Ib={F:hu,cb:bm},Cl={rd:"local",NONE:"none",td:"session"};function pp(){var c=!(Ca(Un())||!_i()),m=zl(),w=$i();this.m=c,this.h=m,this.l=w,this.a={},Ts||(Ts=new fu),c=Ts;try{this.g=!If()&&kf()||!Y.indexedDB?new c.a.F:new dp(ii()?new _o:new c.a.F)}catch(E){this.g=new _o,this.h=!0}try{this.i=new c.a.cb}catch(E){this.i=new _o}this.v=new _o,this.f=lt(this.Zb,this),this.b={}}function Cm(){return Js||(Js=new pp),Js}function Sd(c,m){switch(m){case"session":return c.i;case"none":return c.v;default:return c.g}}function gp(c,m){return"firebase:"+c.name+(m?":"+m:"")}function Md(c,m,w){return w=gp(m,w),"local"==m.F&&(c.b[w]=null),Sd(c,m.F).U(w)}function mp(c){c.c&&(clearInterval(c.c),c.c=null)}function ED(c){this.a=c,this.b=Cm()}(z=pp.prototype).get=function(c,m){return Sd(this,c.F).get(gp(c,m))},z.set=function(c,m,w){var E=gp(c,w),O=this,V=Sd(this,c.F);return V.set(E,m).then(function(){return V.get(E)}).then(function(H){"local"==c.F&&(O.b[E]=H)})},z.addListener=function(c,m,w){c=gp(c,m),this.l&&(this.b[c]=Y.localStorage.getItem(c)),oe(this.a)&&(Sd(this,"local").ca(this.f),this.h||(If()||!kf())&&Y.indexedDB||!this.l||function WC(c){mp(c),c.c=setInterval(function(){for(var m in c.a){var w=Y.localStorage.getItem(m),E=c.b[m];w!=E&&(c.b[m]=w,w=new kc({type:"storage",key:m,target:window,oldValue:E,newValue:w,a:!0}),c.Zb(w))}},1e3)}(this)),this.a[c]||(this.a[c]=[]),this.a[c].push(w)},z.removeListener=function(c,m,w){c=gp(c,m),this.a[c]&&(fi(this.a[c],function(E){return E==w}),0==this.a[c].length&&delete this.a[c]),oe(this.a)&&(Sd(this,"local").ia(this.f),mp(this))},z.Zb=function(c){if(c&&c.g){var m=c.a.key;if(null==m)for(var w in this.a){var E=this.b[w];void 0===E&&(E=null);var O=Y.localStorage.getItem(w);O!==E&&(this.b[w]=O,this.nb(w))}else if(0==m.indexOf("firebase:")&&this.a[m]){if(void 0!==c.a.a?Sd(this,"local").ia(this.f):mp(this),this.m)if(w=Y.localStorage.getItem(m),(E=c.a.newValue)!==w)null!==E?Y.localStorage.setItem(m,E):Y.localStorage.removeItem(m);else if(this.b[m]===E&&void 0===c.a.a)return;var V=this;w=function(){(void 0!==c.a.a||V.b[m]!==Y.localStorage.getItem(m))&&(V.b[m]=Y.localStorage.getItem(m),V.nb(m))},Us&&Lr&&10==Lr&&Y.localStorage.getItem(m)!==c.a.newValue&&c.a.newValue!==c.a.oldValue?setTimeout(w,10):w()}}else zi(c,lt(this.nb,this))},z.nb=function(c){this.a[c]&&zi(this.a[c],function(m){m()})};var Mm,kh={name:"authEvent",F:"local"};function vp(){this.a=Cm()}function Sm(c,m){this.b=Xl,this.f=Y.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=c,this.h=m,this.l=Y.Int32Array?new Int32Array(64):Array(64),void 0===Mm&&(Mm=Y.Int32Array?new Int32Array(Lh):Lh),this.reset()}ue(Sm,function DD(){this.b=-1});for(var Xl=64,qC=Xl-1,Oh=[],na=0;na<qC;na++)Oh[na]=0;var Ed=ji(128,Oh);function _p(c){for(var m=c.f,w=c.l,E=0,O=0;O<m.length;)w[E++]=m[O]<<24|m[O+1]<<16|m[O+2]<<8|m[O+3],O=4*E;for(m=16;64>m;m++){var V=(0|w[m-16])+(((O=0|w[m-15])>>>7|O<<25)^(O>>>18|O<<14)^O>>>3)|0,H=(0|w[m-7])+(((E=0|w[m-2])>>>17|E<<15)^(E>>>19|E<<13)^E>>>10)|0;w[m]=V+H|0}E=0|c.a[0],O=0|c.a[1];var te=0|c.a[2],Pe=0|c.a[3],Qe=0|c.a[4],En=0|c.a[5],ki=0|c.a[6];for(V=0|c.a[7],m=0;64>m;m++){var vi=((E>>>2|E<<30)^(E>>>13|E<<19)^(E>>>22|E<<10))+(E&O^E&te^O&te)|0;H=(V=V+((Qe>>>6|Qe<<26)^(Qe>>>11|Qe<<21)^(Qe>>>25|Qe<<7))|0)+((H=(H=Qe&En^~Qe&ki)+(0|Mm[m])|0)+(0|w[m])|0)|0,V=ki,ki=En,En=Qe,Qe=Pe+H|0,Pe=te,te=O,O=E,E=H+vi|0}c.a[0]=c.a[0]+E|0,c.a[1]=c.a[1]+O|0,c.a[2]=c.a[2]+te|0,c.a[3]=c.a[3]+Pe|0,c.a[4]=c.a[4]+Qe|0,c.a[5]=c.a[5]+En|0,c.a[6]=c.a[6]+ki|0,c.a[7]=c.a[7]+V|0}function Fh(c,m,w){void 0===w&&(w=m.length);var E=0,O=c.c;if("string"==typeof m)for(;E<w;)c.f[O++]=m.charCodeAt(E++),O==c.b&&(_p(c),O=0);else{if(!Pt(m))throw Error("message must be string or array");for(;E<w;){var V=m[E++];if(!("number"==typeof V&&0<=V&&255>=V&&V==(0|V)))throw Error("message must be a byte array");c.f[O++]=V,O==c.b&&(_p(c),O=0)}}c.c=O,c.g+=w}Sm.prototype.reset=function(){this.g=this.c=0,this.a=Y.Int32Array?new Int32Array(this.h):vr(this.h)};var Lh=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function pu(){Sm.call(this,8,Fo)}ue(pu,Sm);var Fo=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function ey(c,m,w,E,O,V){this.v=c,this.i=m,this.l=w,this.m=E||null,this.u=O||null,this.s=V,this.h=m+":"+w,this.C=new vp,this.g=new ED(this.h),this.f=null,this.b=[],this.a=this.c=null}function yo(c){return new $("invalid-cordova-configuration",c)}function iy(c,m){for(var w=0;w<c.b.length;w++)try{c.b[w](m)}catch(E){}}function ry(c){return c.f||(c.f=c.ma().then(function(){return new Jn(function(m){c.Ea(function w(E){return m(E),c.Ta(w),!1}),function Rb(c){function m(H){E=!0,O&&O.cancel(),Em(c).then(function(te){var Pe=w;if(te&&H&&H.url){var Qe=null;-1!=(Pe=fh(H.url)).indexOf("/__/auth/callback")&&(Qe=(Qe="object"==typeof(Qe=Bc($o(Qe=Ro(Pe),"firebaseError")||null))?Ne(Qe):null)?new Jo(te.c,te.b,null,null,Qe,null,te.T()):new Jo(te.c,te.b,Pe,te.f,null,null,te.T())),Pe=Qe||w}iy(c,Pe)})}var w=new Jo("unknown",null,null,null,new $("no-auth-event")),E=!1,O=hl(500).then(function(){return Em(c).then(function(){E||iy(c,w)})}),V=Y.handleOpenURL;Y.handleOpenURL=function(H){if(0==H.toLowerCase().indexOf(zn("BuildInfo.packageName",Y).toLowerCase()+"://")&&m({url:H}),"function"==typeof V)try{V(H)}catch(te){console.error(te)}},ad||(ad=new ab),function lb(c){var m=ad;m.a.push(c),m.b||(m.b=function(w){for(var E=0;E<m.a.length;E++)m.a[E](w)},"function"==typeof(c=zn("universalLinks.subscribe",Y))&&c(null,m.b))}(m)}(c)})})),c.f}function Em(c){var m=null;return function X_(c){return c.b.get(kh,c.a).then(function(m){return Ja(m)})}(c.g).then(function(w){return m=w,Md((w=c.g).b,kh,w.a)}).then(function(){return m})}function Nh(c){this.a=c,this.b=Cm()}(z=ey.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=function eb(){return tb(void 0)?ch().then(function(){return new Jn(function(c,m){var w=Y.document,E=setTimeout(function(){m(Error("Cordova framework is not ready."))},1e3);w.addEventListener("deviceready",function(){clearTimeout(E),c()},!1)})}):qi(Error("Cordova must run in an Android or iOS file scheme."))}().then(function(){if("function"!=typeof zn("universalLinks.subscribe",Y))throw yo("cordova-universal-links-plugin-fix is not installed");if(void 0===zn("BuildInfo.packageName",Y))throw yo("cordova-plugin-buildinfo is not installed");if("function"!=typeof zn("cordova.plugins.browsertab.openUrl",Y))throw yo("cordova-plugin-browsertab is not installed");if("function"!=typeof zn("cordova.InAppBrowser.open",Y))throw yo("cordova-plugin-inappbrowser is not installed")},function(){throw new $("cordova-not-ready")})},z.Pb=function(c,m){return m(new $("operation-not-supported-in-this-environment")),rn()},z.Nb=function(){return qi(new $("operation-not-supported-in-this-environment"))},z.ac=function(){return!1},z.Yb=function(){return!0},z.Ub=function(){return!0},z.Ob=function(c,m,w,E){if(this.c)return qi(new $("redirect-operation-pending"));var O=this,V=Y.document,H=null,te=null,Pe=null,Qe=null;return this.c=rn().then(function(){return wl(m),ry(O)}).then(function(){return function Dd(c,m,w,E,O){var V=function ty(){for(var c=20,m=[];0<c;)m.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),c--;return m.join("")}(),H=new Jo(m,E,null,V,new $("no-auth-event"),null,O),te=zn("BuildInfo.packageName",Y);if("string"!=typeof te)throw new $("invalid-cordova-configuration");var Pe=zn("BuildInfo.displayName",Y),Qe={};if(Un().toLowerCase().match(/iphone|ipad|ipod/))Qe.ibi=te;else{if(!Un().toLowerCase().match(/android/))return qi(new $("operation-not-supported-in-this-environment"));Qe.apn=te}Pe&&(Qe.appDisplayName=Pe),V=function ny(c){var m=new pu;Fh(m,c),c=[];var w=8*m.g;Fh(m,Ed,56>m.c?56-m.c:m.b-(m.c-56));for(var E=63;56<=E;E--)m.f[E]=255&w,w/=256;for(_p(m),E=w=0;E<m.i;E++)for(var O=24;0<=O;O-=8)c[w++]=m.a[E]>>O&255;return function FC(c){return $n(c,function(m){return 1<(m=m.toString(16)).length?m:"0"+m}).join("")}(c)}(V),Qe.sessionId=V;var En=Kr(c.v,c.i,c.l,m,w,null,E,c.m,Qe,c.u,O,c.s);return c.ma().then(function(){var ki=c.h;return c.C.a.set(kh,H.w(),ki)}).then(function(){var ki=zn("cordova.plugins.browsertab.isAvailable",Y);if("function"!=typeof ki)throw new $("invalid-cordova-configuration");var vi=null;ki(function(hs){if(hs){if("function"!=typeof(vi=zn("cordova.plugins.browsertab.openUrl",Y)))throw new $("invalid-cordova-configuration");vi(En)}else{if("function"!=typeof(vi=zn("cordova.InAppBrowser.open",Y)))throw new $("invalid-cordova-configuration");hs=Un(),c.a=vi(En,hs.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||hs.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(O,c,m,w,E)}).then(function(){return new Jn(function(En,ki){te=function(){var vi=zn("cordova.plugins.browsertab.close",Y);return En(),"function"==typeof vi&&vi(),O.a&&"function"==typeof O.a.close&&(O.a.close(),O.a=null),!1},O.Ea(te),Qe=function(){q()&&Pe()},V.addEventListener("resume",Pe=function(){H||(H=hl(2e3).then(function(){ki(new $("redirect-cancelled-by-user"))}))},!1),Un().toLowerCase().match(/android/)||V.addEventListener("visibilitychange",Qe,!1)}).o(function(En){return Em(O).then(function(){throw En})})}).oa(function(){Pe&&V.removeEventListener("resume",Pe,!1),Qe&&V.removeEventListener("visibilitychange",Qe,!1),H&&H.cancel(),te&&O.Ta(te),O.c=null})},z.Ea=function(c){this.b.push(c),ry(this).o(function(m){"auth/invalid-cordova-configuration"===m.code&&(m=new Jo("unknown",null,null,null,new $("no-auth-event")),c(m))})},z.Ta=function(c){fi(this.b,function(m){return m==c})};var tl={name:"pendingRedirect",F:"session"};function gu(c){return Md(c.b,tl,c.a)}function Lo(c,m,w,E){this.i={},this.u=0,this.D=c,this.v=m,this.m=w,this.J=E,this.h=[],this.f=!1,this.l=lt(this.s,this),this.b=new Tm,this.C=new Vr,this.g=new Nh(Pb(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=mu(this.D,this.v,this.m,wn,this.J)}function mu(c,m,w,E,O){var V=u.Z.SDK_VERSION||null;return tb()?new ey(c,m,w,V,E,O):new $_(c,m,w,V,E,O)}function Dm(c){c.f||(c.f=!0,c.a.Ea(c.l));var m=c.a;return c.a.ma().o(function(w){throw c.a==m&&c.reset(),w})}function ec(c){c.a.Yb()&&Dm(c).o(function(m){var w=new Jo("unknown",null,null,null,new $("operation-not-supported-in-this-environment"));Am(m)&&c.s(w)}),c.a.Ub()||ay(c.b)}function Ad(c,m){jt(c.h,m)||c.h.push(m),c.f||function Bh(c){return c.b.get(tl,c.a).then(function(m){return"pending"==m})}(c.g).then(function(w){w?gu(c.g).then(function(){Dm(c).o(function(E){var O=new Jo("unknown",null,null,null,new $("operation-not-supported-in-this-environment"));Am(E)&&c.s(O)})}):ec(c)}).o(function(){ec(c)})}function Sl(c,m){fi(c.h,function(w){return w==m})}Lo.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=mu(this.D,this.v,this.m,null,this.J),this.i={}},Lo.prototype.s=function(c){if(!c)throw new $("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),c&&c.getUid()&&this.i.hasOwnProperty(c.getUid()))return!1;for(var m=!1,w=0;w<this.h.length;w++){var E=this.h[w];if(E.Gb(c.c,c.b)){(m=this.c[c.c])&&(m.h(c,E),c&&(c.f||c.b)&&(this.i[c.getUid()]=!0,this.u=Date.now())),m=!0;break}}return ay(this.b),m};var oy=new Vc(2e3,1e4),yp=new Vc(3e4,6e4);function Vh(c,m,w,E,O,V,H){return c.a.Nb(m,w,E,function(){c.f||(c.f=!0,c.a.Ea(c.l))},function(){c.reset()},O,V,H)}function Am(c){return!(!c||"auth/cordova-not-ready"!=c.code)}function Qs(c,m,w,E,O){var V;return function sy(c){return c.b.set(tl,"pending",c.a)}(c.g).then(function(){return c.a.Ob(m,w,E,O).o(function(H){if(Am(H))throw new $("operation-not-supported-in-this-environment");return V=H,gu(c.g).then(function(){throw V})}).then(function(){return c.a.ac()?new Jn(function(){}):gu(c.g).then(function(){return c.ra()}).then(function(){}).o(function(){})})})}function Uh(c,m,w,E,O){return c.a.Pb(E,function(V){m.na(w,null,V,O)},oy.get())}Lo.prototype.ra=function(){return this.b.ra()};var Td={};function Pb(c,m,w){return c=c+":"+m,w&&(c=c+":"+w.url),c}function Gh(c,m,w,E){var O=Pb(m,w,E);return Td[O]||(Td[O]=new Lo(c,m,w,E)),Td[O]}function Tm(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function ay(c){c.g||(c.g=!0,Id(c,!1,null,null))}function Is(c){c.g&&!c.i&&Id(c,!1,null,null)}function kb(c,m){if(c.b=function(){return rn(m)},c.f.length)for(var w=0;w<c.f.length;w++)c.f[w](m)}function Id(c,m,w,E){m?E?function vu(c,m){if(c.b=function(){return qi(m)},c.c.length)for(var w=0;w<c.c.length;w++)c.c[w](m)}(c,E):kb(c,w):kb(c,{user:null}),c.f=[],c.c=[]}function Vr(){}function _u(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(c){this.jb=c},enumerable:!1})}function Hh(c,m){this.a=m,Ut(this,"verificationId",c)}function cy(c,m,w,E){return new Es(c).gb(m,w).then(function(O){return new Hh(O,E)})}function Ob(c){var m=Wg(c);if(!(m&&m.exp&&m.auth_time&&m.iat))throw new $("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");_r(this,{token:c,expirationTime:Sa(1e3*m.exp),authTime:Sa(1e3*m.auth_time),issuedAtTime:Sa(1e3*m.iat),signInProvider:m.firebase&&m.firebase.sign_in_provider?m.firebase.sign_in_provider:null,signInSecondFactor:m.firebase&&m.firebase.sign_in_second_factor?m.firebase.sign_in_second_factor:null,claims:m})}function Im(c,m,w){var E=m&&m[wp];if(!E)throw new $("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=c,this.f=ie(m),this.g=w,this.c=new ph(null,E),this.b=[];var O=this;zi(m[cs]||[],function(V){(V=Hc(V))&&O.b.push(V)}),Ut(this,"auth",this.a),Ut(this,"session",this.c),Ut(this,"hints",this.b)}Tm.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Tm.prototype.h=function(c,m){if(c){this.reset(),this.g=!0;var w=c.c,E=c.b,O=c.a&&"auth/web-storage-unsupported"==c.a.code,V=c.a&&"auth/operation-not-supported-in-this-environment"==c.a.code;this.i=!(!O&&!V),"unknown"!=w||O||V?c.a?(Id(this,!0,null,c.a),rn()):m.Fa(w,E)?function bp(c,m,w){w=w.Fa(m.c,m.b);var E=m.g,O=m.f,V=m.i,H=m.T(),te=!!m.c.match(/Redirect$/);w(E,O,H,V).then(function(Pe){Id(c,te,Pe,null)}).o(function(Pe){Id(c,te,null,Pe)})}(this,c,m):qi(new $("invalid-auth-event")):(Id(this,!1,null,null),rn())}else qi(new $("invalid-auth-event"))},Tm.prototype.ra=function(){var c=this;return new Jn(function(m,w){c.b?c.b().then(m,w):(c.f.push(m),c.c.push(w),function ly(c){var m=new $("timeout");c.a&&c.a.cancel(),c.a=hl(yp.get()).then(function(){c.b||(c.g=!0,Id(c,!0,null,m))})}(c))})},Vr.prototype.h=function(c,m){if(c){var w=c.c,E=c.b;c.a?(m.na(c.c,null,c.a,c.b),rn()):m.Fa(w,E)?function li(c,m){var w=c.b,E=c.c;m.Fa(E,w)(c.g,c.f,c.T(),c.i).then(function(O){m.na(E,O,null,w)}).o(function(O){m.na(E,null,O,w)})}(c,m):qi(new $("invalid-auth-event"))}else qi(new $("invalid-auth-event"))},Hh.prototype.confirm=function(c){return c=Qg(this.verificationId,c),this.a(c)};var cs="mfaInfo",wp="mfaPendingCredential";function nl(c,m,w,E){$.call(this,"multi-factor-auth-required",E,m),this.b=new Im(c,m,w),Ut(this,"resolver",this.b)}function Ur(c,m,w){if(c&&st(c.serverResponse)&&"auth/multi-factor-auth-required"===c.code)try{return new nl(m,c.serverResponse,w,c.message)}catch(E){}return null}function uy(){}function dy(c){Ut(this,"factorId",c.fa),this.a=c}function ra(c){if(dy.call(this,c),this.a.fa!=Es.PROVIDER_ID)throw new $("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function yu(c,m){for(var w in Qn.call(this,c),m)this[w]=m[w]}function Rm(c,m){this.a=c,this.b=[],this.c=lt(this.yc,this),Ss(this.a,"userReloaded",this.c);var w=[];m&&m.multiFactor&&m.multiFactor.enrolledFactors&&zi(m.multiFactor.enrolledFactors,function(E){var O=null,V={};if(E){E.uid&&(V[or]=E.uid),E.displayName&&(V[Zr]=E.displayName),E.enrollmentTime&&(V[zc]=new Date(E.enrollmentTime).toISOString()),E.phoneNumber&&(V[Wl]=E.phoneNumber);try{O=new Nf(V)}catch(H){}E=O}else E=null;E&&w.push(E)}),yi(this,w)}function yi(c,m){c.b=m,Ut(c,"enrolledFactors",m)}function Pm(c,m,w){if(this.h=c,this.i=m,this.g=w,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function xp(c,m){c.stop(),c.b=hl(function km(c,m){return m?(c.a=c.c,c.g()):(m=c.a,c.a*=2,c.a>c.f&&(c.a=c.f),m)}(c,m)).then(function(){return function gi(){var c=Y.document,m=null;return q()||!c?rn():new Jn(function(w){m=function(){q()&&(c.removeEventListener("visibilitychange",m,!1),w())},c.addEventListener("visibilitychange",m,!1)}).o(function(w){throw c.removeEventListener("visibilitychange",m,!1),w})}()}).then(function(){return c.h()}).then(function(){xp(c,!0)}).o(function(w){c.i(w)&&xp(c,!1)})}function Cp(c){this.f=c,this.b=this.a=null,this.c=Date.now()}function Rd(c,m){void 0===m&&(m=c.b?(m=c.b).a-m.g:0),c.c=Date.now()+1e3*m}function hy(c,m){c.b=Wc(m[ea]||""),c.a=m.refreshToken,Rd(c,void 0!==(m=m.expiresIn)?Number(m):void 0)}function zh(c,m){this.a=c||null,this.b=m||null,_r(this,{lastSignInTime:Sa(m||null),creationTime:Sa(c||null)})}function Om(c,m,w,E,O,V){_r(this,{uid:c,displayName:E||null,photoURL:O||null,email:w||null,phoneNumber:V||null,providerId:m})}function bo(c,m,w){this.N=[],this.l=c.apiKey,this.m=c.appName,this.s=c.authDomain||null;var E=u.Z.SDK_VERSION?Ko(u.Z.SDK_VERSION):null;this.a=new Ta(this.l,bt(wn),E),(this.u=c.emulatorConfig||null)&&lm(this.a,this.u),this.h=new Cp(this.a),sa(this,m[ea]),hy(this.h,m),Ut(this,"refreshToken",this.h.a),py(this,w||{}),He.call(this),this.P=!1,this.s&&Hl()&&(this.b=Gh(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function Lm(c){return new Pm(function(){return c.I(!0)},function(m){return!(!m||"auth/network-request-failed"!=m.code)},function(){var m=c.h.c-Date.now()-3e5;return 0<m?m:0})}(this),this.ba=lt(this.ib,this);var O=this;this.za=null,this.Pa=function(V){O.xa(V.h)},this.qa=null,this.Ba=function(V){Fm(O,V.c)},this.$=null,this.aa=[],this.Oa=function(V){bu(O,V.f)},this.ja=null,this.S=new Rm(this,w),Ut(this,"multiFactor",this.S)}function Fm(c,m){c.u=m,lm(c.a,m),c.b&&(m=c.b,c.b=Gh(c.s,c.l,c.m,c.u),c.P&&(Sl(m,c),Ad(c.b,c)))}function fy(c,m){c.qa&&zs(c.qa,"languageCodeChanged",c.Pa),(c.qa=m)&&Ss(m,"languageCodeChanged",c.Pa)}function Pd(c,m){c.$&&zs(c.$,"emulatorConfigChanged",c.Ba),(c.$=m)&&Ss(m,"emulatorConfigChanged",c.Ba)}function bu(c,m){c.aa=m,Ah(c.a,u.Z.SDK_VERSION?Ko(u.Z.SDK_VERSION,c.aa):null)}function Bb(c,m){c.ja&&zs(c.ja,"frameworkChanged",c.Oa),(c.ja=m)&&Ss(m,"frameworkChanged",c.Oa)}function Gr(c){try{return u.Z.app(c.m).auth()}catch(m){throw new $("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+c.m+"'!")}}function Nm(c){c.J||c.D.b||(c.D.start(),zs(c,"tokenChanged",c.ba),Ss(c,"tokenChanged",c.ba))}function wu(c){zs(c,"tokenChanged",c.ba),c.D.stop()}function sa(c,m){c.Aa=m,Ut(c,"_lat",m)}function Xs(c){for(var m=[],w=0;w<c.W.length;w++)m.push(c.W[w](c));return xC(m).then(function(){return c})}function ka(c){c.b&&!c.P&&(c.P=!0,Ad(c.b,c))}function py(c,m){_r(c,{uid:m.uid,displayName:m.displayName||null,photoURL:m.photoURL||null,email:m.email||null,emailVerified:m.emailVerified||!1,phoneNumber:m.phoneNumber||null,isAnonymous:m.isAnonymous||!1,tenantId:m.tenantId||null,metadata:new zh(m.createdAt,m.lastLoginAt),providerData:[]}),c.a.b=c.tenantId}function gy(){}function my(c){return rn().then(function(){if(c.J)throw new $("app-deleted")})}function xu(c){return $n(c.providerData,function(m){return m.providerId})}function Mp(c,m){m&&(Ep(c,m.providerId),c.providerData.push(m))}function Ep(c,m){fi(c.providerData,function(w){return w.providerId==m})}function oa(c,m,w){("uid"!=m||w)&&c.hasOwnProperty(m)&&Ut(c,m,w)}function Dp(c,m){c!=m&&(_r(c,{uid:m.uid,displayName:m.displayName,photoURL:m.photoURL,email:m.email,emailVerified:m.emailVerified,phoneNumber:m.phoneNumber,isAnonymous:m.isAnonymous,tenantId:m.tenantId,providerData:[]}),Ut(c,"metadata",m.metadata?function Nb(c){return new zh(c.a,c.b)}(m.metadata):new zh),zi(m.providerData,function(w){Mp(c,w)}),function Lb(c,m){c.b=m.b,c.a=m.a,c.c=m.c}(c.h,m.h),Ut(c,"refreshToken",c.h.a),yi(c.S,m.S.b))}function jh(c){return c.I().then(function(m){var w=c.isAnonymous;return function vy(c,m){return ri(c.a,hm,{idToken:m}).then(lt(c.Kc,c))}(c,m).then(function(){return w||oa(c,"isAnonymous",!1),m})})}function Oa(c,m){m[ea]&&c.Aa!=m[ea]&&(hy(c.h,m),c.dispatchEvent(new yu("tokenChanged")),sa(c,m[ea]),oa(c,"refreshToken",c.h.a))}function Vm(c,m){return jh(c).then(function(){if(jt(xu(c),m))return Xs(c).then(function(){throw new $("provider-already-linked")})})}function Fa(c,m,w){return go({user:c,credential:Xg(m),additionalUserInfo:m=zf(m),operationType:w})}function kd(c,m){return Oa(c,m),c.reload().then(function(){return c})}function Ub(c,m,w,E,O){if(!Hl())return qi(new $("operation-not-supported-in-this-environment"));if(c.i&&!O)return qi(c.i);var V=Hf(w.providerId),H=Dn(c.uid+":::"),te=null;(!zl()||_i())&&c.s&&w.isOAuthProvider&&(te=Kr(c.s,c.l,c.m,m,w,null,H,u.Z.SDK_VERSION||null,null,null,c.tenantId,c.u));var Pe=Rf(te,V&&V.va,V&&V.ua);return E=E().then(function(){if(Od(c),!O)return c.I().then(function(){})}).then(function(){return Vh(c.b,Pe,m,w,H,!!te,c.tenantId)}).then(function(){return new Jn(function(Qe,En){c.na(m,null,new $("cancelled-popup-request"),c.g||null),c.f=Qe,c.C=En,c.g=H,c.c=Uh(c.b,c,m,Pe,H)})}).then(function(Qe){return Pe&&Zo(Pe),Qe?go(Qe):null}).o(function(Qe){throw Pe&&Zo(Pe),Qe}),Rr(c,E,O)}function _y(c,m,w,E,O){if(!Hl())return qi(new $("operation-not-supported-in-this-environment"));if(c.i&&!O)return qi(c.i);var V=null,H=Dn(c.uid+":::");return E=E().then(function(){if(Od(c),!O)return c.I().then(function(){})}).then(function(){return c.ga=H,Xs(c)}).then(function(te){return c.ha&&(te=(te=c.ha).b.set(wo,c.w(),te.a)),te}).then(function(){return Qs(c.b,m,w,H,c.tenantId)}).o(function(te){if(V=te,c.ha)return nc(c.ha);throw V}).then(function(){if(V)throw V}),Rr(c,E,O)}function Od(c){if(!c.b||!c.P)throw new $(c.b&&!c.P?"internal-error":"auth-domain-config-required")}function Rr(c,m,w){var E=function il(c,m,w){return c.i&&!w?(m.cancel(),qi(c.i)):m.o(function(E){throw!E||"auth/user-disabled"!=E.code&&"auth/user-token-expired"!=E.code||(c.i||c.dispatchEvent(new yu("userInvalidated")),c.i=E),E})}(c,m,w);return c.N.push(E),E.oa(function(){ir(c.N,E)}),E.o(function(O){var V=null;throw O&&"auth/multi-factor-auth-required"===O.code&&(V=Ur(O.w(),Gr(c),lt(c.jc,c))),V||O})}function Gb(c){if(!c.apiKey)return null;var m={apiKey:c.apiKey,authDomain:c.authDomain,appName:c.appName,emulatorConfig:c.emulatorConfig},w={};if(!c.stsTokenManager||!c.stsTokenManager.accessToken)return null;w[ea]=c.stsTokenManager.accessToken,w.refreshToken=c.stsTokenManager.refreshToken||null;var E=c.stsTokenManager.expirationTime;E&&(w.expiresIn=(E-Date.now())/1e3);var O=new bo(m,w,c);return c.providerData&&zi(c.providerData,function(V){V&&Mp(O,go(V))}),c.redirectEventId&&(O.ga=c.redirectEventId),O}function $C(c){this.a=c,this.b=Cm()}Im.prototype.Rc=function(c){var m=this;return c.tb(this.a.a,this.c).then(function(w){var E=ie(m.f);return delete E[cs],delete E[wp],we(E,w),m.g(E)})},ue(nl,$),uy.prototype.tb=function(c,m,w){return m.type==sd?function Fb(c,m,w,E){return w.Ha().then(function(O){return O={idToken:O},void 0!==E&&(O.displayName=E),we(O,{phoneVerificationInfo:Jg(c.a)}),ri(m,bb,O)})}(this,c,m,w):function ia(c,m,w){return w.Ha().then(function(E){return we(E={mfaPendingCredential:E},{phoneVerificationInfo:Jg(c.a)}),ri(m,ou,E)})}(this,c,m)},ue(dy,uy),ue(ra,dy),ue(yu,Qn),(z=Rm.prototype).yc=function(c){yi(this,function YC(c){var m=[];return zi(c.mfaInfo||[],function(w){(w=Hc(w))&&m.push(w)}),m}(c.hd))},z.Sb=function(){return this.a.I().then(function(c){return new ph(c,null)})},z.fc=function(c,m){var w=this,E=this.a.a;return this.Sb().then(function(O){return c.tb(E,O,m)}).then(function(O){return Oa(w.a,O),w.a.reload()})},z.bd=function(c){var m=this,w="string"==typeof c?c:c.uid,E=this.a.a;return this.a.I().then(function(O){return ri(E,cp,{idToken:O,mfaEnrollmentId:w})}).then(function(O){var V=zu(m.b,function(H){return H.uid!=w});return yi(m,V),Oa(m.a,O),m.a.reload().o(function(H){if("auth/user-token-expired"!=H.code)throw H})})},z.w=function(){return{multiFactor:{enrolledFactors:$n(this.b,function(c){return c.w()})}}},Pm.prototype.start=function(){this.a=this.c,xp(this,!0)},Pm.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Cp.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},Cp.prototype.getToken=function(c){return c=!!c,this.b&&!this.a?qi(new $("user-token-expired")):c||!this.b||Date.now()>this.c-3e4?this.a?function Sp(c,m){return function np(c,m){return new Jn(function(w,E){"refresh_token"==m.grant_type&&m.refresh_token||"authorization_code"==m.grant_type&&m.code?ep(c,c.l+"?key="+encodeURIComponent(c.c),function(O){O?O.error?E(Zs(O)):O.access_token&&O.refresh_token?w(O):E(new $("internal-error")):E(new $("network-request-failed"))},"POST",Z0(m).toString(),c.g,c.m.get()):E(new $("internal-error"))})}(c.f,m).then(function(w){return c.b=Wc(w.access_token),c.a=w.refresh_token,Rd(c,w.expires_in),{accessToken:c.b.toString(),refreshToken:c.a}}).o(function(w){throw"auth/user-token-expired"==w.code&&(c.a=null),w})}(this,{grant_type:"refresh_token",refresh_token:this.a}):rn(null):rn({accessToken:this.b.toString(),refreshToken:this.a})},zh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},ue(bo,He),bo.prototype.xa=function(c){this.za=c,pb(this.a,c)},bo.prototype.la=function(){return this.za},bo.prototype.Ga=function(){return vr(this.aa)},bo.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Ut(bo.prototype,"providerId","firebase"),(z=bo.prototype).reload=function(){var c=this;return Rr(this,my(this).then(function(){return jh(c).then(function(){return Xs(c)}).then(gy)}))},z.oc=function(c){return this.I(c).then(function(m){return new Ob(m)})},z.I=function(c){var m=this;return Rr(this,my(this).then(function(){return m.h.getToken(c)}).then(function(w){if(!w)throw new $("internal-error");return w.accessToken!=m.Aa&&(sa(m,w.accessToken),m.dispatchEvent(new yu("tokenChanged"))),oa(m,"refreshToken",w.refreshToken),w.accessToken}))},z.Kc=function(c){if(!(c=c.users)||!c.length)throw new $("internal-error");py(this,{uid:(c=c[0]).localId,displayName:c.displayName,photoURL:c.photoUrl,email:c.email,emailVerified:!!c.emailVerified,phoneNumber:c.phoneNumber,lastLoginAt:c.lastLoginAt,createdAt:c.createdAt,tenantId:c.tenantId});for(var m=function Vb(c){return(c=c.providerUserInfo)&&c.length?$n(c,function(m){return new Om(m.rawId,m.providerId,m.email,m.displayName,m.photoUrl,m.phoneNumber)}):[]}(c),w=0;w<m.length;w++)Mp(this,m[w]);oa(this,"isAnonymous",!(this.email&&c.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new yu("userReloaded",{hd:c}))},z.Lc=function(c){return Tt("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(c)},z.ub=function(c){var m=this,w=null;return Rr(this,c.c(this.a,this.uid).then(function(E){return Oa(m,E),w=Fa(m,E,"reauthenticate"),m.i=null,m.reload()}).then(function(){return w}),!0)},z.Cc=function(c){return Tt("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(c)},z.rb=function(c){var m=this,w=null;return Rr(this,Vm(this,c.providerId).then(function(){return m.I()}).then(function(E){return c.b(m.a,E)}).then(function(E){return w=Fa(m,E,"link"),kd(m,E)}).then(function(){return w}))},z.Dc=function(c,m){var w=this;return Rr(this,Vm(this,"phone").then(function(){return cy(Gr(w),c,m,lt(w.rb,w))}))},z.Mc=function(c,m){var w=this;return Rr(this,rn().then(function(){return cy(Gr(w),c,m,lt(w.ub,w))}),!0)},z.Cb=function(c){var m=this;return Rr(this,this.I().then(function(w){return m.a.Cb(w,c)}).then(function(w){return Oa(m,w),m.reload()}))},z.ed=function(c){var m=this;return Rr(this,this.I().then(function(w){return c.b(m.a,w)}).then(function(w){return Oa(m,w),m.reload()}))},z.Db=function(c){var m=this;return Rr(this,this.I().then(function(w){return m.a.Db(w,c)}).then(function(w){return Oa(m,w),m.reload()}))},z.Eb=function(c){if(void 0===c.displayName&&void 0===c.photoURL)return my(this);var m=this;return Rr(this,this.I().then(function(w){return m.a.Eb(w,{displayName:c.displayName,photoUrl:c.photoURL})}).then(function(w){return Oa(m,w),oa(m,"displayName",w.displayName||null),oa(m,"photoURL",w.photoUrl||null),zi(m.providerData,function(E){"password"===E.providerId&&(Ut(E,"displayName",m.displayName),Ut(E,"photoURL",m.photoURL))}),Xs(m)}).then(gy))},z.cd=function(c){var m=this;return Rr(this,jh(this).then(function(w){return jt(xu(m),c)?function ls(c,m,w){return ri(c,md,{idToken:m,deleteProvider:w})}(m.a,w,[c]).then(function(E){var O={};return zi(E.providerUserInfo||[],function(V){O[V.providerId]=!0}),zi(xu(m),function(V){O[V]||Ep(m,V)}),O[Es.PROVIDER_ID]||Ut(m,"phoneNumber",null),Xs(m)}):Xs(m).then(function(){throw new $("no-such-provider")})}))},z.delete=function(){var c=this;return Rr(this,this.I().then(function(m){return ri(c.a,z_,{idToken:m})}).then(function(){c.dispatchEvent(new yu("userDeleted"))})).then(function(){for(var m=0;m<c.N.length;m++)c.N[m].cancel("app-deleted");fy(c,null),Pd(c,null),Bb(c,null),c.N=[],c.J=!0,wu(c),Ut(c,"refreshToken",null),c.b&&Sl(c.b,c)})},z.Gb=function(c,m){return!!("linkViaPopup"==c&&(this.g||null)==m&&this.f||"reauthViaPopup"==c&&(this.g||null)==m&&this.f||"linkViaRedirect"==c&&(this.ga||null)==m||"reauthViaRedirect"==c&&(this.ga||null)==m)},z.na=function(c,m,w,E){"linkViaPopup"!=c&&"reauthViaPopup"!=c||E!=(this.g||null)||(w&&this.C?this.C(w):m&&!w&&this.f&&this.f(m),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},z.Fa=function(c,m){return"linkViaPopup"==c&&m==(this.g||null)?lt(this.Lb,this):"reauthViaPopup"==c&&m==(this.g||null)?lt(this.Mb,this):"linkViaRedirect"==c&&(this.ga||null)==m?lt(this.Lb,this):"reauthViaRedirect"==c&&(this.ga||null)==m?lt(this.Mb,this):null},z.Ec=function(c){var m=this;return Ub(this,"linkViaPopup",c,function(){return Vm(m,c.providerId).then(function(){return Xs(m)})},!1)},z.Nc=function(c){return Ub(this,"reauthViaPopup",c,function(){return rn()},!0)},z.Fc=function(c){var m=this;return _y(this,"linkViaRedirect",c,function(){return Vm(m,c.providerId)},!1)},z.Oc=function(c){return _y(this,"reauthViaRedirect",c,function(){return rn()},!0)},z.Lb=function(c,m,w,E){var O=this;this.c&&(this.c.cancel(),this.c=null);var V=null;return Rr(this,this.I().then(function(H){return ta(O.a,{requestUri:c,postBody:E,sessionId:m,idToken:H})}).then(function(H){return V=Fa(O,H,"link"),kd(O,H)}).then(function(){return V}))},z.Mb=function(c,m,w,E){var O=this;this.c&&(this.c.cancel(),this.c=null);var V=null;return Rr(this,rn().then(function(){return Pi(gd(O.a,{requestUri:c,sessionId:m,postBody:E,tenantId:w}),O.uid)}).then(function(te){return V=Fa(O,te,"reauthenticate"),Oa(O,te),O.i=null,O.reload()}).then(function(){return V}),!0)},z.vb=function(c){var m=this,w=null;return Rr(this,this.I().then(function(E){return w=E,void 0===c||oe(c)?{}:Vf(new Gg(c))}).then(function(E){return m.a.vb(w,E)}).then(function(E){if(m.email!=E)return m.reload()}).then(function(){}))},z.Fb=function(c,m){var w=this,E=null;return Rr(this,this.I().then(function(O){return E=O,void 0===m||oe(m)?{}:Vf(new Gg(m))}).then(function(O){return w.a.Fb(E,c,O)}).then(function(O){if(w.email!=O)return w.reload()}).then(function(){}))},z.jc=function(c){var m=null,w=this;return Rr(this,c=Pi(rn(c),w.uid).then(function(E){return m=Fa(w,E,"reauthenticate"),Oa(w,E),w.i=null,w.reload()}).then(function(){return m}),!0)},z.toJSON=function(){return this.w()},z.w=function(){var c={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&we(c,this.metadata.w()),zi(this.providerData,function(m){c.providerData.push(function x_(c){var w,m={};for(w in c)c.hasOwnProperty(w)&&(m[w]=c[w]);return m}(m))}),we(c,this.S.w()),c};var wo={name:"redirectUser",F:"session"};function nc(c){return Md(c.b,wo,c.a)}function Hr(c){this.a=c,this.b=Cm(),this.c=null,this.f=function Hb(c){var m=zr("local"),w=zr("session"),E=zr("none");return function Q_(c,m,w){var E=gp(m,w),O=Sd(c,m.F);return c.get(m,w).then(function(V){var H=null;try{H=Bc(Y.localStorage.getItem(E))}catch(te){}if(H&&!V)return Y.localStorage.removeItem(E),c.set(m,H,w);H&&V&&"localStorage"!=O.type&&Y.localStorage.removeItem(E)})}(c.b,m,c.a).then(function(){return c.b.get(w,c.a)}).then(function(O){return O?w:c.b.get(E,c.a).then(function(V){return V?E:c.b.get(m,c.a).then(function(H){return H?m:c.b.get(Qi,c.a).then(function(te){return te?zr(te):m})})})}).then(function(O){return c.c=O,Um(c,O.F)}).o(function(){c.c||(c.c=m)})}(this),this.b.addListener(zr("local"),this.a,lt(this.g,this))}function Um(c,m){var E,w=[];for(E in Cl)Cl[E]!==m&&w.push(Md(c.b,zr(Cl[E]),c.a));return w.push(Md(c.b,Qi,c.a)),function wC(c){return new Jn(function(m,w){var E=c.length,O=[];if(E)for(var V=function(Qe,En){E--,O[Qe]=En,0==E&&m(O)},H=function(Qe){w(Qe)},te=0;te<c.length;te++)bC(c[te],Xt(V,te),H);else m(O)})}(w)}Hr.prototype.g=function(){var c=this,m=zr("local");xo(this,function(){return rn().then(function(){return c.c&&"local"!=c.c.F?c.b.get(m,c.a):null}).then(function(w){if(w)return Um(c,"local").then(function(){c.c=m})})})};var Qi={name:"persistence",F:"session"};function zr(c){return{name:"authUser",F:c}}function us(c,m){return xo(c,function(){return c.b.set(c.c,m.w(),c.a)})}function Bo(c){return xo(c,function(){return Md(c.b,c.c,c.a)})}function Cu(c,m,w){return xo(c,function(){return c.b.get(c.c,c.a).then(function(E){return E&&m&&(E.authDomain=m),E&&w&&(E.emulatorConfig=w),Gb(E||{})})})}function xo(c,m){return c.f=c.f.then(m,m),c.f}function Co(c){if(this.l=!1,Ut(this,"settings",new _u),Ut(this,"app",c),!bi(this).options||!bi(this).options.apiKey)throw new $("invalid-api-key");c=u.Z.SDK_VERSION?Ko(u.Z.SDK_VERSION):null,this.a=new Ta(bi(this).options&&bi(this).options.apiKey,bt(wn),c),this.P=[],this.s=[],this.N=[],this.Pa=u.Z.INTERNAL.createSubscribe(lt(this.zc,this)),this.W=void 0,this.ib=u.Z.INTERNAL.createSubscribe(lt(this.Ac,this)),ic(this,null),this.i=new Hr(bi(this).options.apiKey+":"+bi(this).name),this.D=new $C(bi(this).options.apiKey+":"+bi(this).name),this.$=Ui(this,function AD(c){var m=bi(c).options.authDomain,w=function Rs(c){var m=function ei(c,m){return c.b.get(wo,c.a).then(function(w){return w&&m&&(w.authDomain=m),Gb(w||{})})}(c.D,bi(c).options.authDomain).then(function(w){return(c.m=w)&&(w.ha=c.D),nc(c.D)});return Ui(c,m)}(c).then(function(){return Cu(c.i,m,c.R)}).then(function(E){return E?(E.ha=c.D,c.m&&(c.m.ga||null)==(E.ga||null)?E:E.reload().then(function(){return us(c.i,E).then(function(){return E})}).o(function(O){return"auth/network-request-failed"==O.code?E:Bo(c.i)})):null}).then(function(E){ic(c,E||null)});return Ui(c,w)}(this)),this.h=Ui(this,function Wh(c){return c.$.then(function(){return Mu(c)}).o(function(){}).then(function(){if(!c.l)return c.ja()}).o(function(){}).then(function(){if(!c.l){c.ba=!0;var m=c.i;m.b.addListener(zr("local"),m.a,c.ja)}})}(this)),this.ba=!1,this.ja=lt(this.Zc,this),this.Ba=lt(this.da,this),this.qa=lt(this.mc,this),this.za=lt(this.wc,this),this.Aa=lt(this.xc,this),this.b=null,function jb(c){var m=bi(c).options.authDomain,w=bi(c).options.apiKey;m&&Hl()&&(c.Oa=c.$.then(function(){if(!c.l){if(c.b=Gh(m,w,bi(c).name,c.R),Ad(c.b,c),Pn(c)&&ka(Pn(c)),c.m){ka(c.m);var E=c.m;E.xa(c.la()),fy(E,c),bu(E=c.m,c.J),Bb(E,c),Fm(E=c.m,c.R),Pd(E,c),c.m=null}return c.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=lt(this.delete,this),this.INTERNAL.logFramework=lt(this.Gc,this),this.u=0,He.call(this),function So(c){Object.defineProperty(c,"lc",{get:function(){return this.la()},set:function(m){this.xa(m)},enumerable:!1}),c.aa=null,Object.defineProperty(c,"ti",{get:function(){return this.T()},set:function(m){this.zb(m)},enumerable:!1}),c.S=null,Object.defineProperty(c,"emulatorConfig",{get:function(){if(this.R){var m=Ro(this.R.url);m=go({protocol:m.c,host:m.a,port:m.g,options:go({disableWarnings:this.R.ec})})}else m=null;return m},enumerable:!1})}(this),this.J=[],this.R=null}function Su(c){Qn.call(this,"languageCodeChanged"),this.h=c}function zb(c){Qn.call(this,"emulatorConfigChanged"),this.c=c}function yy(c){Qn.call(this,"frameworkChanged"),this.f=c}function ct(c){return c.Oa||qi(new $("auth-domain-config-required"))}function Mu(c){if(!Hl())return qi(new $("operation-not-supported-in-this-environment"));var m=ct(c).then(function(){return c.b.ra()}).then(function(w){return w?go(w):null});return Ui(c,m)}function ic(c,m){Pn(c)&&(function Bm(c,m){fi(c.W,function(w){return w==m})}(Pn(c),c.Ba),zs(Pn(c),"tokenChanged",c.qa),zs(Pn(c),"userDeleted",c.za),zs(Pn(c),"userInvalidated",c.Aa),wu(Pn(c))),m&&(m.W.push(c.Ba),Ss(m,"tokenChanged",c.qa),Ss(m,"userDeleted",c.za),Ss(m,"userInvalidated",c.Aa),0<c.u&&Nm(m)),Ut(c,"currentUser",m),m&&(m.xa(c.la()),fy(m,c),bu(m,c.J),Bb(m,c),Fm(m,c.R),Pd(m,c))}function rc(c,m){var w=null,E=null;return Ui(c,m.then(function(O){return w=Xg(O),E=zf(O),function Wb(c,m){var w={};return w.apiKey=bi(c).options.apiKey,w.authDomain=bi(c).options.authDomain,w.appName=bi(c).name,c.R&&(w.emulatorConfig=c.R),c.$.then(function(){return function Fd(c,m,w,E){var O=new bo(c,m);return w&&(O.ha=w),E&&bu(O,E),O.reload().then(function(){return O})}(w,m,c.D,c.Ga())}).then(function(E){return Pn(c)&&E.uid==Pn(c).uid?(Dp(Pn(c),E),c.da(E)):(ic(c,E),ka(E),c.da(E))}).then(function(){qh(c)})}(c,O)},function(O){var V=null;throw O&&"auth/multi-factor-auth-required"===O.code&&(V=Ur(O.w(),c,lt(c.kc,c))),V||O}).then(function(){return go({user:Pn(c),credential:w,additionalUserInfo:E,operationType:"signIn"})}))}function bi(c){return c.app}function Pn(c){return c.currentUser}function Ps(c){return Pn(c)&&Pn(c)._lat||null}function qh(c){if(c.ba){for(var m=0;m<c.s.length;m++)c.s[m]&&c.s[m](Ps(c));if(c.W!==c.getUid()&&c.N.length)for(c.W=c.getUid(),m=0;m<c.N.length;m++)c.N[m]&&c.N[m](Ps(c))}}function Ui(c,m){return c.P.push(m),m.oa(function(){ir(c.P,m)}),m}function Yh(){}function Ml(){this.a={},this.b=1e12}Hr.prototype.yb=function(c){var m=null,w=this;return function xm(c){var m=new $("invalid-persistence-type"),w=new $("unsupported-persistence-type");e:{for(E in Cl)if(Cl[E]==c){var E=!0;break e}E=!1}if(!E||"string"!=typeof c)throw m;switch(os()){case"ReactNative":if("session"===c)throw w;break;case"Node":if("none"!==c)throw w;break;case"Worker":if("session"===c||!dn()&&"none"!==c)throw w;break;default:if(!$i()&&"none"!==c)throw w}}(c),xo(this,function(){return c!=w.c.F?w.b.get(w.c,w.a).then(function(E){return m=E,Um(w,c)}).then(function(){if(w.c=zr(c),m)return w.b.set(w.c,m,w.a)}):rn()})},ue(Co,He),ue(Su,Qn),ue(zb,Qn),ue(yy,Qn),(z=Co.prototype).yb=function(c){return Ui(this,c=this.i.yb(c))},z.xa=function(c){this.aa===c||this.l||(this.aa=c,pb(this.a,this.aa),this.dispatchEvent(new Su(this.la())))},z.la=function(){return this.aa},z.fd=function(){var c=Y.navigator;this.xa(c&&(c.languages&&c.languages[0]||c.language||c.userLanguage)||null)},z.gd=function(c,m){if(!this.R){if(!/^https?:\/\//.test(c))throw new $("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function ZC(c){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),Y.document&&!c&&ch().then(function(){var m=Y.document.createElement("div");m.innerText="Running in emulator mode. Do not use with production credentials.",m.style.position="fixed",m.style.width="100%",m.style.backgroundColor="#ffffff",m.style.border=".1em solid #000000",m.style.color="#b50000",m.style.bottom="0px",m.style.left="0px",m.style.margin="0px",m.style.zIndex=1e4,m.style.textAlign="center",m.classList.add("firebase-emulator-warning"),Y.document.body.appendChild(m)})})(m=!!m&&!!m.disableWarnings),this.R={url:c,ec:m},this.settings.jb=!0,lm(this.a,this.R),this.dispatchEvent(new zb(this.R))}},z.Gc=function(c){this.J.push(c),Ah(this.a,u.Z.SDK_VERSION?Ko(u.Z.SDK_VERSION,this.J):null),this.dispatchEvent(new yy(this.J))},z.Ga=function(){return vr(this.J)},z.zb=function(c){this.S===c||this.l||(this.S=c,this.a.b=this.S)},z.T=function(){return this.S},z.toJSON=function(){return{apiKey:bi(this).options.apiKey,authDomain:bi(this).options.authDomain,appName:bi(this).name,currentUser:Pn(this)&&Pn(this).w()}},z.Gb=function(c,m){switch(c){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==m&&!!this.f;default:return!1}},z.na=function(c,m,w,E){"signInViaPopup"==c&&this.g==E&&(w&&this.C?this.C(w):m&&!w&&this.f&&this.f(m),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},z.Fa=function(c,m){return"signInViaRedirect"==c||"signInViaPopup"==c&&this.g==m&&this.f?lt(this.ic,this):null},z.ic=function(c,m,w,E){var O=this,V={requestUri:c,postBody:E,sessionId:m,tenantId:w};return this.c&&(this.c.cancel(),this.c=null),O.$.then(function(){return rc(O,Th(O.a,V))})},z.Xc=function(c){if(!Hl())return qi(new $("operation-not-supported-in-this-environment"));var m=this,w=Hf(c.providerId),E=Dn(),O=null;(!zl()||_i())&&bi(this).options.authDomain&&c.isOAuthProvider&&(O=Kr(bi(this).options.authDomain,bi(this).options.apiKey,bi(this).name,"signInViaPopup",c,null,E,u.Z.SDK_VERSION||null,null,null,this.T(),this.R));var V=Rf(O,w&&w.va,w&&w.ua);return Ui(this,w=ct(this).then(function(H){return Vh(H,V,"signInViaPopup",c,E,!!O,m.T())}).then(function(){return new Jn(function(H,te){m.na("signInViaPopup",null,new $("cancelled-popup-request"),m.g),m.f=H,m.C=te,m.g=E,m.c=Uh(m.b,m,"signInViaPopup",V,E)})}).then(function(H){return V&&Zo(V),H?go(H):null}).o(function(H){throw V&&Zo(V),H}))},z.Yc=function(c){if(!Hl())return qi(new $("operation-not-supported-in-this-environment"));var m=this,w=ct(this).then(function(){return function No(c){return xo(c,function(){return c.b.set(Qi,c.c.F,c.a)})}(m.i)}).then(function(){return Qs(m.b,"signInViaRedirect",c,void 0,m.T())});return Ui(this,w)},z.ra=function(){var c=this;return Mu(this).then(function(m){return c.b&&Is(c.b.b),m}).o(function(m){throw c.b&&Is(c.b.b),m})},z.dd=function(c){if(!c)return qi(new $("null-user"));if(this.S!=c.tenantId)return qi(new $("tenant-id-mismatch"));var m=this,w={};w.apiKey=bi(this).options.apiKey,w.authDomain=bi(this).options.authDomain,w.appName=bi(this).name;var E=function tc(c,m,w,E){var O=c.h,V={};return V[ea]=O.b&&O.b.toString(),V.refreshToken=O.a,m=new bo(m||{apiKey:c.l,authDomain:c.s,appName:c.m},V),w&&(m.ha=w),E&&bu(m,E),Dp(m,c),m}(c,w,m.D,m.Ga());return Ui(this,this.h.then(function(){if(bi(m).options.apiKey!=c.l)return E.reload()}).then(function(){return Pn(m)&&c.uid==Pn(m).uid?(Dp(Pn(m),c),m.da(c)):(ic(m,E),ka(E),m.da(E))}).then(function(){qh(m)}))},z.Bb=function(){var c=this;return Ui(this,this.h.then(function(){return c.b&&Is(c.b.b),Pn(c)?(ic(c,null),Bo(c.i).then(function(){qh(c)})):rn()}))},z.Zc=function(){var c=this;return Cu(this.i,bi(this).options.authDomain).then(function(m){if(!c.l){var w;if(w=Pn(c)&&m){w=Pn(c).uid;var E=m.uid;w=null!=w&&""!==w&&null!=E&&""!==E&&w==E}if(w)return Dp(Pn(c),m),Pn(c).I();(Pn(c)||m)&&(ic(c,m),m&&(ka(m),m.ha=c.D),c.b&&Ad(c.b,c),qh(c))}})},z.da=function(c){return us(this.i,c)},z.mc=function(){qh(this),this.da(Pn(this))},z.wc=function(){this.Bb()},z.xc=function(){this.Bb()},z.kc=function(c){var m=this;return this.h.then(function(){return rc(m,rn(c))})},z.zc=function(c){var m=this;this.addAuthTokenListener(function(){c.next(Pn(m))})},z.Ac=function(c){var m=this;!function qb(c,m){c.N.push(m),Ui(c,c.h.then(function(){!c.l&&jt(c.N,m)&&c.W!==c.getUid()&&(c.W=c.getUid(),m(Ps(c)))}))}(this,function(){c.next(Pn(m))})},z.Ic=function(c,m,w){var E=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof c?c(Pn(E)):"function"==typeof c.next&&c.next(Pn(E))}),this.Pa(c,m,w)},z.Hc=function(c,m,w){var E=this;return this.ba&&Promise.resolve().then(function(){E.W=E.getUid(),"function"==typeof c?c(Pn(E)):"function"==typeof c.next&&c.next(Pn(E))}),this.ib(c,m,w)},z.nc=function(c){var m=this;return Ui(this,this.h.then(function(){return Pn(m)?Pn(m).I(c).then(function(E){return{accessToken:E}}):null}))},z.Tc=function(c){var m=this;return this.h.then(function(){return rc(m,ri(m.a,q_,{token:c}))}).then(function(w){var E=w.user;return oa(E,"isAnonymous",!1),m.da(E),w})},z.Uc=function(c,m){var w=this;return this.h.then(function(){return rc(w,ri(w.a,Kl,{email:c,password:m}))})},z.dc=function(c,m){var w=this;return this.h.then(function(){return rc(w,ri(w.a,su,{email:c,password:m}))})},z.ab=function(c){var m=this;return this.h.then(function(){return rc(m,c.ka(m.a))})},z.Sc=function(c){return Tt("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(c)},z.Ab=function(){var c=this;return this.h.then(function(){var m=Pn(c);if(m&&m.isAnonymous){var w=go({providerId:null,isNewUser:!1});return go({user:m,credential:null,additionalUserInfo:w,operationType:"signIn"})}return rc(c,c.a.Ab()).then(function(E){var O=E.user;return oa(O,"isAnonymous",!0),c.da(O),E})})},z.getUid=function(){return Pn(this)&&Pn(this).uid||null},z.cc=function(c){this.addAuthTokenListener(c),this.u++,0<this.u&&Pn(this)&&Nm(Pn(this))},z.Pc=function(c){var m=this;zi(this.s,function(w){w==c&&m.u--}),0>this.u&&(this.u=0),0==this.u&&Pn(this)&&wu(Pn(this)),this.removeAuthTokenListener(c)},z.addAuthTokenListener=function(c){var m=this;this.s.push(c),Ui(this,this.h.then(function(){m.l||jt(m.s,c)&&c(Ps(m))}))},z.removeAuthTokenListener=function(c){fi(this.s,function(m){return m==c})},z.delete=function(){this.l=!0;for(var c=0;c<this.P.length;c++)this.P[c].cancel("app-deleted");return this.P=[],this.i&&(c=this.i).b.removeListener(zr("local"),c.a,this.ja),this.b&&(Sl(this.b,this),Is(this.b.b)),Promise.resolve()},z.hc=function(c){return Ui(this,function zC(c,m){return ri(c,yb,{identifier:m,continueUri:Dt()?Ju():"http://localhost"}).then(function(w){return w.signinMethods||[]})}(this.a,c))},z.Bc=function(c){return!!ql(c)},z.xb=function(c,m){var w=this;return Ui(this,rn().then(function(){var E=new Gg(m);if(!E.c)throw new $("argument-error",as+" must be true when sending sign in link to email");return Vf(E)}).then(function(E){return w.a.xb(c,E)}).then(function(){}))},z.jd=function(c){return this.Sa(c).then(function(m){return m.data.email})},z.ob=function(c,m){return Ui(this,this.a.ob(c,m).then(function(){}))},z.Sa=function(c){return Ui(this,this.a.Sa(c).then(function(m){return new yr(m)}))},z.kb=function(c){return Ui(this,this.a.kb(c).then(function(){}))},z.wb=function(c,m){var w=this;return Ui(this,rn().then(function(){return void 0===m||oe(m)?{}:Vf(new Gg(m))}).then(function(E){return w.a.wb(c,E)}).then(function(){}))},z.Wc=function(c,m){return Ui(this,cy(this,c,m,lt(this.ab,this)))},z.Vc=function(c,m){var w=this;return Ui(this,rn().then(function(){var E=m||Ju(),O=$f(c,E);if(!(E=ql(E)))throw new $("argument-error","Invalid email link!");if(E.tenantId!==w.T())throw new $("tenant-id-mismatch");return w.ab(O)}))},Yh.prototype.render=function(){},Yh.prototype.reset=function(){},Yh.prototype.getResponse=function(){},Yh.prototype.execute=function(){};var Gm=null;function Ap(c,m){return(m=by(m))&&c.a[m]||null}function by(c){return(c=void 0===c?1e12:c)?c.toString():null}function sc(c,m){this.g=!1,this.c=m,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=$u(c);var w=this;this.i=function(){w.execute()},this.h?this.execute():Ss(this.f,"click",this.i)}function Eu(c){if(c.g)throw Error("reCAPTCHA mock was already deleted!")}function Du(){}function El(){}Ml.prototype.render=function(c,m){return this.a[this.b.toString()]=new sc(c,m),this.b++},Ml.prototype.reset=function(c){var m=Ap(this,c);c=by(c),m&&c&&(m.delete(),delete this.a[c])},Ml.prototype.getResponse=function(c){return(c=Ap(this,c))?c.getResponse():null},Ml.prototype.execute=function(c){(c=Ap(this,c))&&c.execute()},sc.prototype.getResponse=function(){return Eu(this),this.b},sc.prototype.execute=function(){Eu(this);var c=this;this.a||(this.a=setTimeout(function(){c.b=function Yi(){for(var c=50,m=[];0<c;)m.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),c--;return m.join("")}();var m=c.c.callback,w=c.c["expired-callback"];if(m)try{m(c.b)}catch(E){}c.a=setTimeout(function(){if(c.a=null,c.b=null,w)try{w()}catch(E){}c.h&&c.execute()},6e4)},500))},sc.prototype.delete=function(){Eu(this),this.g=!0,clearTimeout(this.a),this.a=null,zs(this.f,"click",this.i)},Ut(Du,"FACTOR_ID","phone"),El.prototype.g=function(){return Gm||(Gm=new Ml),rn(Gm)},El.prototype.c=function(){};var oc=null;function Tp(){this.b=Y.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ip=new dt(pi,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Yb=new Vc(3e4,6e4);Tp.prototype.g=function(c){var m=this;return new Jn(function(w,E){var O=setTimeout(function(){E(new $("network-request-failed"))},Yb.get());!Y.grecaptcha||c!==m.f&&!m.b?(Y[m.a]=function(){if(Y.grecaptcha){m.f=c;var H=Y.grecaptcha.render;Y.grecaptcha.render=function(te,Pe){return te=H(te,Pe),m.b++,te},clearTimeout(O),w(Y.grecaptcha)}else clearTimeout(O),E(new $("internal-error"));delete Y[m.a]},rn(Xf(Fl(Ip,{onload:m.a,hl:c||""}))).o(function(){clearTimeout(O),E(new $("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(O),w(Y.grecaptcha))})},Tp.prototype.c=function(){this.b--};var Hm=null;function Rp(c,m,w,E,O,V,H){if(Ut(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=m,this.g=null,H?(oc||(oc=new El),H=oc):(Hm||(Hm=new Tp),H=Hm),this.m=H,this.a=w||{theme:"light",type:"image"},this.h=[],this.a[ds])throw new $("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Au],!Y.document)throw new $("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!$u(m)||!this.i&&$u(m).hasChildNodes())throw new $("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ta(c,V||null,O||null),this.u=E||function(){return null};var te=this;this.l=[];var Pe=this.a[aa];this.a[aa]=function(En){if(Vo(te,En),"function"==typeof Pe)Pe(En);else if("string"==typeof Pe){var ki=zn(Pe,Y);"function"==typeof ki&&ki(En)}};var Qe=this.a[$h];this.a[$h]=function(){if(Vo(te,null),"function"==typeof Qe)Qe();else if("string"==typeof Qe){var En=zn(Qe,Y);"function"==typeof En&&En()}}}var aa="callback",$h="expired-callback",ds="sitekey",Au="size";function Vo(c,m){for(var w=0;w<c.l.length;w++)try{c.l[w](m)}catch(E){}}function Tu(c,m){return c.h.push(m),m.oa(function(){ir(c.h,m)}),m}function ac(c){if(c.J)throw new $("internal-error","RecaptchaVerifier instance has been destroyed.")}function lc(c,m,w){var E=!1;try{this.b=w||u.Z.app()}catch(H){throw new $("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new $("invalid-api-key");w=this.b.options.apiKey;var O=this,V=null;try{V=this.b.auth().Ga()}catch(H){}try{E=this.b.auth().settings.appVerificationDisabledForTesting}catch(H){}V=u.Z.SDK_VERSION?Ko(u.Z.SDK_VERSION,V):null,Rp.call(this,w,c,m,function(){try{var H=O.b.auth().la()}catch(te){H=null}return H},V,bt(wn),E)}function Uo(c,m,w,E){e:{w=Array.prototype.slice.call(w);for(var O=0,V=!1,H=0;H<m.length;H++)if(m[H].optional)V=!0;else{if(V)throw new $("internal-error","Argument validator encountered a required argument after an optional argument.");O++}if(V=m.length,w.length<O||V<w.length)E="Expected "+(O==V?1==O?"1 argument":O+" arguments":O+"-"+V+" arguments")+" but got "+w.length+".";else{for(O=0;O<w.length;O++)if(V=m[O].optional&&void 0===w[O],!m[O].M(w[O])&&!V){if(m=m[O],0>O||O>=La.length)throw new $("internal-error","Argument validator received an unsupported number of arguments.");w=La[O],E=(E?"":w+" argument ")+(m.name?'"'+m.name+'" ':"")+"must be "+m.K+".";break e}E=null}}if(E)throw new $("argument-error",c+" failed: "+E)}(z=Rp.prototype).Ia=function(){var c=this;return this.f?this.f:this.f=Tu(this,rn().then(function(){if(Dt()&&!ii())return ch();throw new $("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return c.m.g(c.u())}).then(function(m){return c.g=m,ri(c.s,Cb,{})}).then(function(m){c.a[ds]=m.recaptchaSiteKey}).o(function(m){throw c.f=null,m}))},z.render=function(){ac(this);var c=this;return Tu(this,this.Ia().then(function(){if(null===c.c){var m=c.v;if(!c.i){var w=$u(m);m=function Wa(c,m,w){var E=arguments,O=document,V=String(E[0]),H=E[1];if(!wa&&H&&(H.name||H.type)){if(V=["<",V],H.name&&V.push(' name="',Ll(H.name),'"'),H.type){V.push(' type="',Ll(H.type),'"');var te={};we(te,H),delete te.type,H=te}V.push(">"),V=V.join("")}return V=i_(O,V),H&&("string"==typeof H?V.className=H:Array.isArray(H)?V.className=H.join(" "):Cg(V,H)),2<E.length&&n_(O,V,E),V}("DIV"),w.appendChild(m)}c.c=c.g.render(m,c.a)}return c.c}))},z.verify=function(){ac(this);var c=this;return Tu(this,this.render().then(function(m){return new Jn(function(w){var E=c.g.getResponse(m);if(E)w(E);else{var O=function(V){V&&(function la(c,m){fi(c.l,function(w){return w==m})}(c,O),w(V))};c.l.push(O),c.i&&c.g.execute(c.c)}})}))},z.reset=function(){ac(this),null!==this.c&&this.g.reset(this.c)},z.clear=function(){ac(this),this.J=!0,this.m.c();for(var c=0;c<this.h.length;c++)this.h[c].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){c=$u(this.v);for(var m;m=c.firstChild;)c.removeChild(m)}},ue(lc,Rp);var La="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function kt(c,m){return{name:c||"",K:"a valid string",optional:!!m,M:function(w){return"string"==typeof w}}}function rl(c,m){return{name:c||"",K:"a boolean",optional:!!m,M:function(w){return"boolean"==typeof w}}}function Xi(c,m){return{name:c||"",K:"a valid object",optional:!!m,M:st}}function eo(c,m){return{name:c||"",K:"a function",optional:!!m,M:function(w){return"function"==typeof w}}}function to(c,m){return{name:c||"",K:"null",optional:!!m,M:function(w){return null===w}}}function uc(c){return{name:c?c+"Credential":"credential",K:c?"a valid "+c+" credential":"a valid credential",optional:!1,M:function(m){return!!m&&!(!m.ka||c&&m.providerId!==c)}}}function zm(c,m){return st(c)&&"string"==typeof c.type&&c.type===m&&"function"==typeof c.Ha}function Zh(c){return st(c)&&"string"==typeof c.uid}function wr(c,m,w,E){return{name:w||"",K:c.K+" or "+m.K,optional:!!E,M:function(O){return c.M(O)||m.M(O)}}}function ar(c,m){for(var w in m){var E=m[w].name;c[E]=Al(E,c[w],m[w].j)}}function $b(c,m){for(var w in m){var E=m[w].name;E!==w&&Object.defineProperty(c,E,{get:Xt(function(O){return this[O]},w),set:Xt(function(O,V,H,te){Uo(O,[H],[te],!0),this[V]=te},E,w,m[w].lb),enumerable:!0})}}function pr(c,m,w,E){c[m]=Al(m,w,E)}function Al(c,m,w){function E(){var H=Array.prototype.slice.call(arguments);return Uo(O,w,H),m.apply(this,H)}if(!w)return m;var V,O=function jm(c){return(c=c.split("."))[c.length-1]}(c);for(V in m)E[V]=m[V];for(V in m.prototype)E.prototype[V]=m.prototype[V];return E}ar(Co.prototype,{kb:{name:"applyActionCode",j:[kt("code")]},Sa:{name:"checkActionCode",j:[kt("code")]},ob:{name:"confirmPasswordReset",j:[kt("code"),kt("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[kt("email"),kt("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[kt("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[kt("emailLink")]},Hc:{name:"onAuthStateChanged",j:[wr(Xi(),eo(),"nextOrObserver"),eo("opt_error",!0),eo("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[wr(Xi(),eo(),"nextOrObserver"),eo("opt_error",!0),eo("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[kt("email"),wr(Xi("opt_actionCodeSettings",!0),to(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[kt("email"),Xi("actionCodeSettings")]},yb:{name:"setPersistence",j:[kt("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[uc()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[uc()]},Tc:{name:"signInWithCustomToken",j:[kt("token")]},Uc:{name:"signInWithEmailAndPassword",j:[kt("email"),kt("password")]},Vc:{name:"signInWithEmailLink",j:[kt("email"),kt("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[kt("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(c){return!(!c||"string"!=typeof c.type||"function"!=typeof c.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(c){return!!(c&&c.providerId&&c.hasOwnProperty&&c.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(c){return!!(c&&c.providerId&&c.hasOwnProperty&&c.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[wr({name:"user",K:"an instance of Firebase User",optional:!1,M:function(m){return!!(m&&m instanceof bo)}},to(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[kt(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[kt("url"),Xi("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[kt("code")]}}),$b(Co.prototype,{lc:{name:"languageCode",lb:wr(kt(),to(),"languageCode")},ti:{name:"tenantId",lb:wr(kt(),to(),"tenantId")}}),(Co.Persistence=Cl).LOCAL="local",Co.Persistence.SESSION="session",Co.Persistence.NONE="none",ar(bo.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[rl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[rl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[uc()]},rb:{name:"linkWithCredential",j:[uc()]},Dc:{name:"linkWithPhoneNumber",j:[kt("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(c){return!(!c||"string"!=typeof c.type||"function"!=typeof c.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(c){return!!(c&&c.providerId&&c.hasOwnProperty&&c.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(c){return!!(c&&c.providerId&&c.hasOwnProperty&&c.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[uc()]},ub:{name:"reauthenticateWithCredential",j:[uc()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[kt("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(c){return!(!c||"string"!=typeof c.type||"function"!=typeof c.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(c){return!!(c&&c.providerId&&c.hasOwnProperty&&c.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(c){return!!(c&&c.providerId&&c.hasOwnProperty&&c.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[wr(Xi("opt_actionCodeSettings",!0),to(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[kt(null,!0)]},cd:{name:"unlink",j:[kt("provider")]},Cb:{name:"updateEmail",j:[kt("email")]},Db:{name:"updatePassword",j:[kt("password")]},ed:{name:"updatePhoneNumber",j:[uc("phone")]},Eb:{name:"updateProfile",j:[Xi("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[kt("email"),wr(Xi("opt_actionCodeSettings",!0),to(null,!0),"opt_actionCodeSettings",!0)]}}),ar(Ml.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ar(Yh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ar(Jn.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),$b(_u.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:rl("appVerificationDisabledForTesting")}}),ar(Hh.prototype,{confirm:{name:"confirm",j:[kt("verificationCode")]}}),pr(Vi,"fromJSON",function(c){c="string"==typeof c?JSON.parse(c):c;for(var m,w=[$g,Yf,BC,LC],E=0;E<w.length;E++)if(m=w[E](c))return m;return null},[wr(kt(),Xi(),"json")]),pr(Ys,"credential",function(c,m){return new Kc(c,m)},[kt("email"),kt("password")]),ar(Kc.prototype,{w:{name:"toJSON",j:[kt(null,!0)]}}),ar(Ea.prototype,{Ca:{name:"addScope",j:[kt("scope")]},Ka:{name:"setCustomParameters",j:[Xi("customOAuthParameters")]}}),pr(Ea,"credential",$c,[wr(kt(),Xi(),"token")]),pr(Ys,"credentialWithLink",$f,[kt("email"),kt("emailLink")]),ar(Zc.prototype,{Ca:{name:"addScope",j:[kt("scope")]},Ka:{name:"setCustomParameters",j:[Xi("customOAuthParameters")]}}),pr(Zc,"credential",NC,[wr(kt(),Xi(),"token")]),ar(Za.prototype,{Ca:{name:"addScope",j:[kt("scope")]},Ka:{name:"setCustomParameters",j:[Xi("customOAuthParameters")]}}),pr(Za,"credential",Kg,[wr(kt(),wr(Xi(),to()),"idToken"),wr(kt(),to(),"accessToken",!0)]),ar(od.prototype,{Ka:{name:"setCustomParameters",j:[Xi("customOAuthParameters")]}}),pr(od,"credential",D_,[wr(kt(),Xi(),"token"),kt("secret",!0)]),ar(mo.prototype,{Ca:{name:"addScope",j:[kt("scope")]},credential:{name:"credential",j:[wr(kt(),wr(Xi(),to()),"optionsOrIdToken"),wr(kt(),to(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Xi("customOAuthParameters")]}}),ar(bl.prototype,{w:{name:"toJSON",j:[kt(null,!0)]}}),ar($a.prototype,{w:{name:"toJSON",j:[kt(null,!0)]}}),pr(Es,"credential",Qg,[kt("verificationId"),kt("verificationCode")]),ar(Es.prototype,{gb:{name:"verifyPhoneNumber",j:[wr(kt(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(w){return!!w&&(w.session&&w.phoneNumber?zm(w.session,sd)&&"string"==typeof w.phoneNumber:w.session&&w.multiFactorHint?zm(w.session,gh)&&Zh(w.multiFactorHint):w.session&&w.multiFactorUid?zm(w.session,gh)&&"string"==typeof w.multiFactorUid:!!w.phoneNumber&&"string"==typeof w.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(c){return!(!c||"string"!=typeof c.type||"function"!=typeof c.verify)}}]}}),ar(Ka.prototype,{w:{name:"toJSON",j:[kt(null,!0)]}}),ar($.prototype,{toJSON:{name:"toJSON",j:[kt(null,!0)]}}),ar(vh.prototype,{toJSON:{name:"toJSON",j:[kt(null,!0)]}}),ar(Ds.prototype,{toJSON:{name:"toJSON",j:[kt(null,!0)]}}),ar(nl.prototype,{toJSON:{name:"toJSON",j:[kt(null,!0)]}}),ar(Im.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(c){return!!c&&!!c.tb}}]}}),ar(Rm.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(c){return!!c&&!!c.tb}},kt("displayName",!0)]},bd:{name:"unenroll",j:[wr({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Zh},kt(),"multiFactorInfoIdentifier")]}}),ar(lc.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),pr(Ng,"parseLink",Ug,[kt("link")]),pr(Du,"assertion",function(c){return new ra(c)},[uc("phone")]),function(){if(void 0===u.Z||!u.Z.INTERNAL||!u.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var c={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Fg,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Og,VERIFY_AND_CHANGE_EMAIL:Lg,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Co,AuthCredential:Vi,Error:$};pr(c,"EmailAuthProvider",Ys,[]),pr(c,"FacebookAuthProvider",Ea,[]),pr(c,"GithubAuthProvider",Zc,[]),pr(c,"GoogleAuthProvider",Za,[]),pr(c,"TwitterAuthProvider",od,[]),pr(c,"OAuthProvider",mo,[kt("providerId")]),pr(c,"SAMLAuthProvider",Zg,[kt("providerId")]),pr(c,"PhoneAuthProvider",Es,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(c){return!!(c&&c instanceof Co)}}]),pr(c,"RecaptchaVerifier",lc,[wr(kt(),{name:"",K:"an HTML element",optional:!1,M:function(c){return!!(c&&c instanceof Element)}},"recaptchaContainer"),Xi("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(c){return!!(c&&c instanceof u.Z.app.App)}}]),pr(c,"ActionCodeURL",Ng,[]),pr(c,"PhoneMultiFactorGenerator",Du,[]),u.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(m){return new Co(m=m.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:c,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(m){m.getProvider("auth-internal").initialize()}}),u.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(m){return{getUid:lt((m=m.getProvider("auth").getImmediate()).getUid,m),getToken:lt(m.nc,m),addAuthTokenListener:lt(m.cc,m),removeAuthTokenListener:lt(m.Pc,m)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),u.Z.registerVersion("@firebase/auth","0.16.8"),u.Z.INTERNAL.extendNamespace({User:bo})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},9751:(tn,tt,Q)=>{Q.d(tt,{y:()=>We});var u=Q(930),z=Q(727),Ve=Q(8822),Te=Q(9635),je=Q(2416),$e=Q(576),_e=Q(2806);let We=(()=>{class le{constructor(Ce){Ce&&(this._subscribe=Ce)}lift(Ce){const Be=new le;return Be.source=this,Be.operator=Ce,Be}subscribe(Ce,Be,Pt){const qe=function fe(le){return le&&le instanceof u.Lv||function Y(le){return le&&(0,$e.m)(le.next)&&(0,$e.m)(le.error)&&(0,$e.m)(le.complete)}(le)&&(0,z.Nn)(le)}(Ce)?Ce:new u.Hp(Ce,Be,Pt);return(0,_e.x)(()=>{const{operator:st,source:Ot}=this;qe.add(st?st.call(qe,Ot):Ot?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(Ce){try{return this._subscribe(Ce)}catch(Be){Ce.error(Be)}}forEach(Ce,Be){return new(Be=Me(Be))((Pt,qe)=>{const st=new u.Hp({next:Ot=>{try{Ce(Ot)}catch(un){qe(un),st.unsubscribe()}},error:qe,complete:Pt});this.subscribe(st)})}_subscribe(Ce){var Be;return null===(Be=this.source)||void 0===Be?void 0:Be.subscribe(Ce)}[Ve.L](){return this}pipe(...Ce){return(0,Te.U)(Ce)(this)}toPromise(Ce){return new(Ce=Me(Ce))((Be,Pt)=>{let qe;this.subscribe(st=>qe=st,st=>Pt(st),()=>Be(qe))})}}return le.create=ke=>new le(ke),le})();function Me(le){var ke;return null!==(ke=null!=le?le:je.v.Promise)&&void 0!==ke?ke:Promise}},7579:(tn,tt,Q)=>{Q.d(tt,{x:()=>_e});var u=Q(9751),z=Q(727);const Te=(0,Q(3888).d)(Me=>function(){Me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var je=Q(8737),$e=Q(2806);let _e=(()=>{class Me extends u.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(fe){const le=new We(this,this);return le.operator=fe,le}_throwIfClosed(){if(this.closed)throw new Te}next(fe){(0,$e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const le=this.observers.slice();for(const ke of le)ke.next(fe)}})}error(fe){(0,$e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=fe;const{observers:le}=this;for(;le.length;)le.shift().error(fe)}})}complete(){(0,$e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:fe}=this;for(;fe.length;)fe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var fe;return(null===(fe=this.observers)||void 0===fe?void 0:fe.length)>0}_trySubscribe(fe){return this._throwIfClosed(),super._trySubscribe(fe)}_subscribe(fe){return this._throwIfClosed(),this._checkFinalizedStatuses(fe),this._innerSubscribe(fe)}_innerSubscribe(fe){const{hasError:le,isStopped:ke,observers:Ce}=this;return le||ke?z.Lc:(Ce.push(fe),new z.w0(()=>(0,je.P)(Ce,fe)))}_checkFinalizedStatuses(fe){const{hasError:le,thrownError:ke,isStopped:Ce}=this;le?fe.error(ke):Ce&&fe.complete()}asObservable(){const fe=new u.y;return fe.source=this,fe}}return Me.create=(Y,fe)=>new We(Y,fe),Me})();class We extends _e{constructor(Y,fe){super(),this.destination=Y,this.source=fe}next(Y){var fe,le;null===(le=null===(fe=this.destination)||void 0===fe?void 0:fe.next)||void 0===le||le.call(fe,Y)}error(Y){var fe,le;null===(le=null===(fe=this.destination)||void 0===fe?void 0:fe.error)||void 0===le||le.call(fe,Y)}complete(){var Y,fe;null===(fe=null===(Y=this.destination)||void 0===Y?void 0:Y.complete)||void 0===fe||fe.call(Y)}_subscribe(Y){var fe,le;return null!==(le=null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Y))&&void 0!==le?le:z.Lc}}},930:(tn,tt,Q)=>{Q.d(tt,{Hp:()=>ke,Lv:()=>le});var u=Q(576),z=Q(727),Ve=Q(2416),Te=Q(7849),je=Q(5032);const $e=Me("C",void 0,void 0);function Me(st,Ot,un){return{kind:st,value:Ot,error:un}}var Y=Q(3410),fe=Q(2806);class le extends z.w0{constructor(Ot){super(),this.isStopped=!1,Ot?(this.destination=Ot,(0,z.Nn)(Ot)&&Ot.add(this)):this.destination=qe}static create(Ot,un,Lt){return new ke(Ot,un,Lt)}next(Ot){this.isStopped?Pt(function We(st){return Me("N",st,void 0)}(Ot),this):this._next(Ot)}error(Ot){this.isStopped?Pt(function _e(st){return Me("E",void 0,st)}(Ot),this):(this.isStopped=!0,this._error(Ot))}complete(){this.isStopped?Pt($e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ot){this.destination.next(Ot)}_error(Ot){try{this.destination.error(Ot)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class ke extends le{constructor(Ot,un,Lt){let xt;if(super(),(0,u.m)(Ot))xt=Ot;else if(Ot){let ot;({next:xt,error:un,complete:Lt}=Ot),this&&Ve.v.useDeprecatedNextContext?(ot=Object.create(Ot),ot.unsubscribe=()=>this.unsubscribe()):ot=Ot,xt=null==xt?void 0:xt.bind(ot),un=null==un?void 0:un.bind(ot),Lt=null==Lt?void 0:Lt.bind(ot)}this.destination={next:xt?Ce(xt):je.Z,error:Ce(null!=un?un:Be),complete:Lt?Ce(Lt):je.Z}}}function Ce(st,Ot){return(...un)=>{try{st(...un)}catch(Lt){Ve.v.useDeprecatedSynchronousErrorHandling?(0,fe.O)(Lt):(0,Te.h)(Lt)}}}function Be(st){throw st}function Pt(st,Ot){const{onStoppedNotification:un}=Ve.v;un&&Y.z.setTimeout(()=>un(st,Ot))}const qe={closed:!0,next:je.Z,error:Be,complete:je.Z}},727:(tn,tt,Q)=>{Q.d(tt,{Lc:()=>$e,w0:()=>je,Nn:()=>_e});var u=Q(576);const Ve=(0,Q(3888).d)(Me=>function(fe){Me(this),this.message=fe?`${fe.length} errors occurred during unsubscription:\n${fe.map((le,ke)=>`${ke+1}) ${le.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=fe});var Te=Q(8737);class je{constructor(Y){this.initialTeardown=Y,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let Y;if(!this.closed){this.closed=!0;const{_parentage:fe}=this;if(fe)if(this._parentage=null,Array.isArray(fe))for(const Ce of fe)Ce.remove(this);else fe.remove(this);const{initialTeardown:le}=this;if((0,u.m)(le))try{le()}catch(Ce){Y=Ce instanceof Ve?Ce.errors:[Ce]}const{_teardowns:ke}=this;if(ke){this._teardowns=null;for(const Ce of ke)try{We(Ce)}catch(Be){Y=null!=Y?Y:[],Be instanceof Ve?Y=[...Y,...Be.errors]:Y.push(Be)}}if(Y)throw new Ve(Y)}}add(Y){var fe;if(Y&&Y!==this)if(this.closed)We(Y);else{if(Y instanceof je){if(Y.closed||Y._hasParent(this))return;Y._addParent(this)}(this._teardowns=null!==(fe=this._teardowns)&&void 0!==fe?fe:[]).push(Y)}}_hasParent(Y){const{_parentage:fe}=this;return fe===Y||Array.isArray(fe)&&fe.includes(Y)}_addParent(Y){const{_parentage:fe}=this;this._parentage=Array.isArray(fe)?(fe.push(Y),fe):fe?[fe,Y]:Y}_removeParent(Y){const{_parentage:fe}=this;fe===Y?this._parentage=null:Array.isArray(fe)&&(0,Te.P)(fe,Y)}remove(Y){const{_teardowns:fe}=this;fe&&(0,Te.P)(fe,Y),Y instanceof je&&Y._removeParent(this)}}je.EMPTY=(()=>{const Me=new je;return Me.closed=!0,Me})();const $e=je.EMPTY;function _e(Me){return Me instanceof je||Me&&"closed"in Me&&(0,u.m)(Me.remove)&&(0,u.m)(Me.add)&&(0,u.m)(Me.unsubscribe)}function We(Me){(0,u.m)(Me)?Me():Me.unsubscribe()}},2416:(tn,tt,Q)=>{Q.d(tt,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(tn,tt,Q)=>{Q.d(tt,{E:()=>z});const z=new(Q(9751).y)(je=>je.complete())},8996:(tn,tt,Q)=>{Q.d(tt,{D:()=>xt});var u=Q(8421),z=Q(5363),Ve=Q(9468),$e=Q(9751),We=Q(2202),Me=Q(576),Y=Q(9672);function le(ot,lt){if(!ot)throw new Error("Iterable cannot be null");return new $e.y(Xt=>{(0,Y.f)(Xt,lt,()=>{const Nn=ot[Symbol.asyncIterator]();(0,Y.f)(Xt,lt,()=>{Nn.next().then(ue=>{ue.done?Xt.complete():Xt.next(ue.value)})},0,!0)})})}var ke=Q(3670),Ce=Q(8239),Be=Q(1144),Pt=Q(6495),qe=Q(2206),st=Q(4532),Ot=Q(3260);function xt(ot,lt){return lt?function Lt(ot,lt){if(null!=ot){if((0,ke.c)(ot))return function Te(ot,lt){return(0,u.Xf)(ot).pipe((0,Ve.R)(lt),(0,z.Q)(lt))}(ot,lt);if((0,Be.z)(ot))return function _e(ot,lt){return new $e.y(Xt=>{let Nn=0;return lt.schedule(function(){Nn===ot.length?Xt.complete():(Xt.next(ot[Nn++]),Xt.closed||this.schedule())})})}(ot,lt);if((0,Ce.t)(ot))return function je(ot,lt){return(0,u.Xf)(ot).pipe((0,Ve.R)(lt),(0,z.Q)(lt))}(ot,lt);if((0,qe.D)(ot))return le(ot,lt);if((0,Pt.T)(ot))return function fe(ot,lt){return new $e.y(Xt=>{let Nn;return(0,Y.f)(Xt,lt,()=>{Nn=ot[We.h](),(0,Y.f)(Xt,lt,()=>{let ue,Ue;try{({value:ue,done:Ue}=Nn.next())}catch($){return void Xt.error($)}Ue?Xt.complete():Xt.next(ue)},0,!0)}),()=>(0,Me.m)(null==Nn?void 0:Nn.return)&&Nn.return()})}(ot,lt);if((0,Ot.L)(ot))return function un(ot,lt){return le((0,Ot.Q)(ot),lt)}(ot,lt)}throw(0,st.z)(ot)}(ot,lt):(0,u.Xf)(ot)}},8421:(tn,tt,Q)=>{Q.d(tt,{Xf:()=>ke});var u=Q(655),z=Q(1144),Ve=Q(8239),Te=Q(9751),je=Q(3670),$e=Q(2206),_e=Q(4532),We=Q(6495),Me=Q(3260),Y=Q(576),fe=Q(7849),le=Q(8822);function ke(Lt){if(Lt instanceof Te.y)return Lt;if(null!=Lt){if((0,je.c)(Lt))return function Ce(Lt){return new Te.y(xt=>{const ot=Lt[le.L]();if((0,Y.m)(ot.subscribe))return ot.subscribe(xt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Lt);if((0,z.z)(Lt))return function Be(Lt){return new Te.y(xt=>{for(let ot=0;ot<Lt.length&&!xt.closed;ot++)xt.next(Lt[ot]);xt.complete()})}(Lt);if((0,Ve.t)(Lt))return function Pt(Lt){return new Te.y(xt=>{Lt.then(ot=>{xt.closed||(xt.next(ot),xt.complete())},ot=>xt.error(ot)).then(null,fe.h)})}(Lt);if((0,$e.D)(Lt))return st(Lt);if((0,We.T)(Lt))return function qe(Lt){return new Te.y(xt=>{for(const ot of Lt)if(xt.next(ot),xt.closed)return;xt.complete()})}(Lt);if((0,Me.L)(Lt))return function Ot(Lt){return st((0,Me.Q)(Lt))}(Lt)}throw(0,_e.z)(Lt)}function st(Lt){return new Te.y(xt=>{(function un(Lt,xt){var ot,lt,Xt,Nn;return(0,u.mG)(this,void 0,void 0,function*(){try{for(ot=(0,u.KL)(Lt);!(lt=yield ot.next()).done;)if(xt.next(lt.value),xt.closed)return}catch(ue){Xt={error:ue}}finally{try{lt&&!lt.done&&(Nn=ot.return)&&(yield Nn.call(ot))}finally{if(Xt)throw Xt.error}}xt.complete()})})(Lt,xt).catch(ot=>xt.error(ot))})}},6451:(tn,tt,Q)=>{Q.d(tt,{T:()=>$e});var u=Q(8189),z=Q(8421),Ve=Q(515),Te=Q(3269),je=Q(8996);function $e(..._e){const We=(0,Te.yG)(_e),Me=(0,Te._6)(_e,1/0),Y=_e;return Y.length?1===Y.length?(0,z.Xf)(Y[0]):(0,u.J)(Me)((0,je.D)(Y,We)):Ve.E}},5403:(tn,tt,Q)=>{Q.d(tt,{Q:()=>z});var u=Q(930);class z extends u.Lv{constructor(Te,je,$e,_e,We){super(Te),this.onFinalize=We,this._next=je?function(Me){try{je(Me)}catch(Y){Te.error(Y)}}:super._next,this._error=_e?function(Me){try{_e(Me)}catch(Y){Te.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=$e?function(){try{$e()}catch(Me){Te.error(Me)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Te;const{closed:je}=this;super.unsubscribe(),!je&&(null===(Te=this.onFinalize)||void 0===Te||Te.call(this))}}},4004:(tn,tt,Q)=>{Q.d(tt,{U:()=>Ve});var u=Q(4482),z=Q(5403);function Ve(Te,je){return(0,u.e)(($e,_e)=>{let We=0;$e.subscribe(new z.Q(_e,Me=>{_e.next(Te.call(je,Me,We++))}))})}},8189:(tn,tt,Q)=>{Q.d(tt,{J:()=>Ve});var u=Q(5577),z=Q(4671);function Ve(Te=1/0){return(0,u.z)(z.y,Te)}},5577:(tn,tt,Q)=>{Q.d(tt,{z:()=>We});var u=Q(4004),z=Q(8421),Ve=Q(4482),Te=Q(9672),je=Q(5403),_e=Q(576);function We(Me,Y,fe=1/0){return(0,_e.m)(Y)?We((le,ke)=>(0,u.U)((Ce,Be)=>Y(le,Ce,ke,Be))((0,z.Xf)(Me(le,ke))),fe):("number"==typeof Y&&(fe=Y),(0,Ve.e)((le,ke)=>function $e(Me,Y,fe,le,ke,Ce,Be,Pt){const qe=[];let st=0,Ot=0,un=!1;const Lt=()=>{un&&!qe.length&&!st&&Y.complete()},xt=lt=>st<le?ot(lt):qe.push(lt),ot=lt=>{Ce&&Y.next(lt),st++;let Xt=!1;(0,z.Xf)(fe(lt,Ot++)).subscribe(new je.Q(Y,Nn=>{null==ke||ke(Nn),Ce?xt(Nn):Y.next(Nn)},()=>{Xt=!0},void 0,()=>{if(Xt)try{for(st--;qe.length&&st<le;){const Nn=qe.shift();Be?(0,Te.f)(Y,Be,()=>ot(Nn)):ot(Nn)}Lt()}catch(Nn){Y.error(Nn)}}))};return Me.subscribe(new je.Q(Y,xt,()=>{un=!0,Lt()})),()=>{null==Pt||Pt()}}(le,ke,Me,fe)))}},5363:(tn,tt,Q)=>{Q.d(tt,{Q:()=>Te});var u=Q(9672),z=Q(4482),Ve=Q(5403);function Te(je,$e=0){return(0,z.e)((_e,We)=>{_e.subscribe(new Ve.Q(We,Me=>(0,u.f)(We,je,()=>We.next(Me),$e),()=>(0,u.f)(We,je,()=>We.complete(),$e),Me=>(0,u.f)(We,je,()=>We.error(Me),$e)))})}},3099:(tn,tt,Q)=>{Q.d(tt,{B:()=>$e});var u=Q(8996),z=Q(5698),Ve=Q(7579),Te=Q(930),je=Q(4482);function $e(We={}){const{connector:Me=(()=>new Ve.x),resetOnError:Y=!0,resetOnComplete:fe=!0,resetOnRefCountZero:le=!0}=We;return ke=>{let Ce=null,Be=null,Pt=null,qe=0,st=!1,Ot=!1;const un=()=>{null==Be||Be.unsubscribe(),Be=null},Lt=()=>{un(),Ce=Pt=null,st=Ot=!1},xt=()=>{const ot=Ce;Lt(),null==ot||ot.unsubscribe()};return(0,je.e)((ot,lt)=>{qe++,!Ot&&!st&&un();const Xt=Pt=null!=Pt?Pt:Me();lt.add(()=>{qe--,0===qe&&!Ot&&!st&&(Be=_e(xt,le))}),Xt.subscribe(lt),Ce||(Ce=new Te.Hp({next:Nn=>Xt.next(Nn),error:Nn=>{Ot=!0,un(),Be=_e(Lt,Y,Nn),Xt.error(Nn)},complete:()=>{st=!0,un(),Be=_e(Lt,fe),Xt.complete()}}),(0,u.D)(ot).subscribe(Ce))})(ke)}}function _e(We,Me,...Y){return!0===Me?(We(),null):!1===Me?null:Me(...Y).pipe((0,z.q)(1)).subscribe(()=>We())}},9468:(tn,tt,Q)=>{Q.d(tt,{R:()=>z});var u=Q(4482);function z(Ve,Te=0){return(0,u.e)((je,$e)=>{$e.add(Ve.schedule(()=>je.subscribe($e),Te))})}},5698:(tn,tt,Q)=>{Q.d(tt,{q:()=>Te});var u=Q(515),z=Q(4482),Ve=Q(5403);function Te(je){return je<=0?()=>u.E:(0,z.e)(($e,_e)=>{let We=0;$e.subscribe(new Ve.Q(_e,Me=>{++We<=je&&(_e.next(Me),je<=We&&_e.complete())}))})}},8505:(tn,tt,Q)=>{Q.d(tt,{b:()=>je});var u=Q(576),z=Q(4482),Ve=Q(5403),Te=Q(4671);function je($e,_e,We){const Me=(0,u.m)($e)||_e||We?{next:$e,error:_e,complete:We}:$e;return Me?(0,z.e)((Y,fe)=>{var le;null===(le=Me.subscribe)||void 0===le||le.call(Me);let ke=!0;Y.subscribe(new Ve.Q(fe,Ce=>{var Be;null===(Be=Me.next)||void 0===Be||Be.call(Me,Ce),fe.next(Ce)},()=>{var Ce;ke=!1,null===(Ce=Me.complete)||void 0===Ce||Ce.call(Me),fe.complete()},Ce=>{var Be;ke=!1,null===(Be=Me.error)||void 0===Be||Be.call(Me,Ce),fe.error(Ce)},()=>{var Ce,Be;ke&&(null===(Ce=Me.unsubscribe)||void 0===Ce||Ce.call(Me)),null===(Be=Me.finalize)||void 0===Be||Be.call(Me)}))}):Te.y}},4408:(tn,tt,Q)=>{Q.d(tt,{o:()=>je});var u=Q(727);class z extends u.w0{constructor(_e,We){super()}schedule(_e,We=0){return this}}const Ve={setInterval(...$e){const{delegate:_e}=Ve;return((null==_e?void 0:_e.setInterval)||setInterval)(...$e)},clearInterval($e){const{delegate:_e}=Ve;return((null==_e?void 0:_e.clearInterval)||clearInterval)($e)},delegate:void 0};var Te=Q(8737);class je extends z{constructor(_e,We){super(_e,We),this.scheduler=_e,this.work=We,this.pending=!1}schedule(_e,We=0){if(this.closed)return this;this.state=_e;const Me=this.id,Y=this.scheduler;return null!=Me&&(this.id=this.recycleAsyncId(Y,Me,We)),this.pending=!0,this.delay=We,this.id=this.id||this.requestAsyncId(Y,this.id,We),this}requestAsyncId(_e,We,Me=0){return Ve.setInterval(_e.flush.bind(_e,this),Me)}recycleAsyncId(_e,We,Me=0){if(null!=Me&&this.delay===Me&&!1===this.pending)return We;Ve.clearInterval(We)}execute(_e,We){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Me=this._execute(_e,We);if(Me)return Me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,We){let Y,Me=!1;try{this.work(_e)}catch(fe){Me=!0,Y=fe||new Error("Scheduled action threw falsy error")}if(Me)return this.unsubscribe(),Y}unsubscribe(){if(!this.closed){const{id:_e,scheduler:We}=this,{actions:Me}=We;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Te.P)(Me,this),null!=_e&&(this.id=this.recycleAsyncId(We,_e,null)),this.delay=null,super.unsubscribe()}}}},7565:(tn,tt,Q)=>{Q.d(tt,{v:()=>Ve});var u=Q(6063);class z{constructor(je,$e=z.now){this.schedulerActionCtor=je,this.now=$e}schedule(je,$e=0,_e){return new this.schedulerActionCtor(this,je).schedule(_e,$e)}}z.now=u.l.now;class Ve extends z{constructor(je,$e=z.now){super(je,$e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(je){const{actions:$e}=this;if(this._active)return void $e.push(je);let _e;this._active=!0;do{if(_e=je.execute(je.state,je.delay))break}while(je=$e.shift());if(this._active=!1,_e){for(;je=$e.shift();)je.unsubscribe();throw _e}}}},4986:(tn,tt,Q)=>{Q.d(tt,{z:()=>Ve,P:()=>Te});var u=Q(4408);const Ve=new(Q(7565).v)(u.o),Te=Ve},6063:(tn,tt,Q)=>{Q.d(tt,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(tn,tt,Q)=>{Q.d(tt,{z:()=>u});const u={setTimeout(...z){const{delegate:Ve}=u;return((null==Ve?void 0:Ve.setTimeout)||setTimeout)(...z)},clearTimeout(z){const{delegate:Ve}=u;return((null==Ve?void 0:Ve.clearTimeout)||clearTimeout)(z)},delegate:void 0}},2202:(tn,tt,Q)=>{Q.d(tt,{h:()=>z});const z=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(tn,tt,Q)=>{Q.d(tt,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(tn,tt,Q)=>{Q.d(tt,{jO:()=>Te,yG:()=>je,_6:()=>$e});var u=Q(576),z=Q(3532);function Ve(_e){return _e[_e.length-1]}function Te(_e){return(0,u.m)(Ve(_e))?_e.pop():void 0}function je(_e){return(0,z.K)(Ve(_e))?_e.pop():void 0}function $e(_e,We){return"number"==typeof Ve(_e)?_e.pop():We}},8737:(tn,tt,Q)=>{function u(z,Ve){if(z){const Te=z.indexOf(Ve);0<=Te&&z.splice(Te,1)}}Q.d(tt,{P:()=>u})},3888:(tn,tt,Q)=>{function u(z){const Te=z(je=>{Error.call(je),je.stack=(new Error).stack});return Te.prototype=Object.create(Error.prototype),Te.prototype.constructor=Te,Te}Q.d(tt,{d:()=>u})},2806:(tn,tt,Q)=>{Q.d(tt,{x:()=>Ve,O:()=>Te});var u=Q(2416);let z=null;function Ve(je){if(u.v.useDeprecatedSynchronousErrorHandling){const $e=!z;if($e&&(z={errorThrown:!1,error:null}),je(),$e){const{errorThrown:_e,error:We}=z;if(z=null,_e)throw We}}else je()}function Te(je){u.v.useDeprecatedSynchronousErrorHandling&&z&&(z.errorThrown=!0,z.error=je)}},9672:(tn,tt,Q)=>{function u(z,Ve,Te,je=0,$e=!1){const _e=Ve.schedule(function(){Te(),$e?z.add(this.schedule(null,je)):this.unsubscribe()},je);if(z.add(_e),!$e)return _e}Q.d(tt,{f:()=>u})},4671:(tn,tt,Q)=>{function u(z){return z}Q.d(tt,{y:()=>u})},1144:(tn,tt,Q)=>{Q.d(tt,{z:()=>u});const u=z=>z&&"number"==typeof z.length&&"function"!=typeof z},2206:(tn,tt,Q)=>{Q.d(tt,{D:()=>z});var u=Q(576);function z(Ve){return Symbol.asyncIterator&&(0,u.m)(null==Ve?void 0:Ve[Symbol.asyncIterator])}},576:(tn,tt,Q)=>{function u(z){return"function"==typeof z}Q.d(tt,{m:()=>u})},3670:(tn,tt,Q)=>{Q.d(tt,{c:()=>Ve});var u=Q(8822),z=Q(576);function Ve(Te){return(0,z.m)(Te[u.L])}},6495:(tn,tt,Q)=>{Q.d(tt,{T:()=>Ve});var u=Q(2202),z=Q(576);function Ve(Te){return(0,z.m)(null==Te?void 0:Te[u.h])}},8239:(tn,tt,Q)=>{Q.d(tt,{t:()=>z});var u=Q(576);function z(Ve){return(0,u.m)(null==Ve?void 0:Ve.then)}},3260:(tn,tt,Q)=>{Q.d(tt,{Q:()=>Ve,L:()=>Te});var u=Q(655),z=Q(576);function Ve(je){return(0,u.FC)(this,arguments,function*(){const _e=je.getReader();try{for(;;){const{value:We,done:Me}=yield(0,u.qq)(_e.read());if(Me)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(We)}}finally{_e.releaseLock()}})}function Te(je){return(0,z.m)(null==je?void 0:je.getReader)}},3532:(tn,tt,Q)=>{Q.d(tt,{K:()=>z});var u=Q(576);function z(Ve){return Ve&&(0,u.m)(Ve.schedule)}},4482:(tn,tt,Q)=>{Q.d(tt,{A:()=>z,e:()=>Ve});var u=Q(576);function z(Te){return(0,u.m)(null==Te?void 0:Te.lift)}function Ve(Te){return je=>{if(z(je))return je.lift(function($e){try{return Te($e,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(tn,tt,Q)=>{function u(){}Q.d(tt,{Z:()=>u})},9635:(tn,tt,Q)=>{Q.d(tt,{z:()=>z,U:()=>Ve});var u=Q(4671);function z(...Te){return Ve(Te)}function Ve(Te){return 0===Te.length?u.y:1===Te.length?Te[0]:function($e){return Te.reduce((_e,We)=>We(_e),$e)}}},7849:(tn,tt,Q)=>{Q.d(tt,{h:()=>Ve});var u=Q(2416),z=Q(3410);function Ve(Te){z.z.setTimeout(()=>{const{onUnhandledError:je}=u.v;if(!je)throw Te;je(Te)})}},4532:(tn,tt,Q)=>{function u(z){return new TypeError(`You provided ${null!==z&&"object"==typeof z?"an invalid object":`'${z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}Q.d(tt,{z:()=>u})},655:(tn,tt,Q)=>{Q.d(tt,{ZT:()=>z,pi:()=>Ve,mG:()=>We,Jh:()=>Me,XA:()=>le,CR:()=>ke,ev:()=>Pt,qq:()=>qe,FC:()=>st,KL:()=>un});var u=function(ue,Ue){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,Ne){$.__proto__=Ne}||function($,Ne){for(var ut in Ne)Object.prototype.hasOwnProperty.call(Ne,ut)&&($[ut]=Ne[ut])})(ue,Ue)};function z(ue,Ue){if("function"!=typeof Ue&&null!==Ue)throw new TypeError("Class extends value "+String(Ue)+" is not a constructor or null");function $(){this.constructor=ue}u(ue,Ue),ue.prototype=null===Ue?Object.create(Ue):($.prototype=Ue.prototype,new $)}var Ve=function(){return Ve=Object.assign||function(Ue){for(var $,Ne=1,ut=arguments.length;Ne<ut;Ne++)for(var ve in $=arguments[Ne])Object.prototype.hasOwnProperty.call($,ve)&&(Ue[ve]=$[ve]);return Ue},Ve.apply(this,arguments)};function We(ue,Ue,$,Ne){return new($||($=Promise))(function(ve,vt){function bt(Bt){try{Nt(Ne.next(Bt))}catch(Qt){vt(Qt)}}function wn(Bt){try{Nt(Ne.throw(Bt))}catch(Qt){vt(Qt)}}function Nt(Bt){Bt.done?ve(Bt.value):function ut(ve){return ve instanceof $?ve:new $(function(vt){vt(ve)})}(Bt.value).then(bt,wn)}Nt((Ne=Ne.apply(ue,Ue||[])).next())})}function Me(ue,Ue){var Ne,ut,ve,vt,$={label:0,sent:function(){if(1&ve[0])throw ve[1];return ve[1]},trys:[],ops:[]};return vt={next:bt(0),throw:bt(1),return:bt(2)},"function"==typeof Symbol&&(vt[Symbol.iterator]=function(){return this}),vt;function bt(Nt){return function(Bt){return function wn(Nt){if(Ne)throw new TypeError("Generator is already executing.");for(;$;)try{if(Ne=1,ut&&(ve=2&Nt[0]?ut.return:Nt[0]?ut.throw||((ve=ut.return)&&ve.call(ut),0):ut.next)&&!(ve=ve.call(ut,Nt[1])).done)return ve;switch(ut=0,ve&&(Nt=[2&Nt[0],ve.value]),Nt[0]){case 0:case 1:ve=Nt;break;case 4:return $.label++,{value:Nt[1],done:!1};case 5:$.label++,ut=Nt[1],Nt=[0];continue;case 7:Nt=$.ops.pop(),$.trys.pop();continue;default:if(!(ve=(ve=$.trys).length>0&&ve[ve.length-1])&&(6===Nt[0]||2===Nt[0])){$=0;continue}if(3===Nt[0]&&(!ve||Nt[1]>ve[0]&&Nt[1]<ve[3])){$.label=Nt[1];break}if(6===Nt[0]&&$.label<ve[1]){$.label=ve[1],ve=Nt;break}if(ve&&$.label<ve[2]){$.label=ve[2],$.ops.push(Nt);break}ve[2]&&$.ops.pop(),$.trys.pop();continue}Nt=Ue.call(ue,$)}catch(Bt){Nt=[6,Bt],ut=0}finally{Ne=ve=0}if(5&Nt[0])throw Nt[1];return{value:Nt[0]?Nt[1]:void 0,done:!0}}([Nt,Bt])}}}function le(ue){var Ue="function"==typeof Symbol&&Symbol.iterator,$=Ue&&ue[Ue],Ne=0;if($)return $.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&Ne>=ue.length&&(ue=void 0),{value:ue&&ue[Ne++],done:!ue}}};throw new TypeError(Ue?"Object is not iterable.":"Symbol.iterator is not defined.")}function ke(ue,Ue){var $="function"==typeof Symbol&&ue[Symbol.iterator];if(!$)return ue;var ut,vt,Ne=$.call(ue),ve=[];try{for(;(void 0===Ue||Ue-- >0)&&!(ut=Ne.next()).done;)ve.push(ut.value)}catch(bt){vt={error:bt}}finally{try{ut&&!ut.done&&($=Ne.return)&&$.call(Ne)}finally{if(vt)throw vt.error}}return ve}function Pt(ue,Ue,$){if($||2===arguments.length)for(var ve,Ne=0,ut=Ue.length;Ne<ut;Ne++)(ve||!(Ne in Ue))&&(ve||(ve=Array.prototype.slice.call(Ue,0,Ne)),ve[Ne]=Ue[Ne]);return ue.concat(ve||Array.prototype.slice.call(Ue))}function qe(ue){return this instanceof qe?(this.v=ue,this):new qe(ue)}function st(ue,Ue,$){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ut,Ne=$.apply(ue,Ue||[]),ve=[];return ut={},vt("next"),vt("throw"),vt("return"),ut[Symbol.asyncIterator]=function(){return this},ut;function vt(pt){Ne[pt]&&(ut[pt]=function(xn){return new Promise(function(nn,mr){ve.push([pt,xn,nn,mr])>1||bt(pt,xn)})})}function bt(pt,xn){try{!function wn(pt){pt.value instanceof qe?Promise.resolve(pt.value.v).then(Nt,Bt):Qt(ve[0][2],pt)}(Ne[pt](xn))}catch(nn){Qt(ve[0][3],nn)}}function Nt(pt){bt("next",pt)}function Bt(pt){bt("throw",pt)}function Qt(pt,xn){pt(xn),ve.shift(),ve.length&&bt(ve[0][0],ve[0][1])}}function un(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $,Ue=ue[Symbol.asyncIterator];return Ue?Ue.call(ue):(ue=le(ue),$={},Ne("next"),Ne("throw"),Ne("return"),$[Symbol.asyncIterator]=function(){return this},$);function Ne(ve){$[ve]=ue[ve]&&function(vt){return new Promise(function(bt,wn){!function ut(ve,vt,bt,wn){Promise.resolve(wn).then(function(Nt){ve({value:Nt,done:bt})},vt)}(bt,wn,(vt=ue[ve](vt)).done,vt.value)})}}}},5e3:(tn,tt,Q)=>{Q.d(tt,{deG:()=>Og,tb:()=>wM,AFp:()=>bM,ip1:()=>lf,CZH:()=>zp,hGG:()=>Rk,z2F:()=>Wp,sBO:()=>hk,Sil:()=>CM,_Vd:()=>Hp,EJc:()=>Vw,SBq:()=>zy,qLn:()=>fd,vpe:()=>Fu,tBr:()=>Vi,XFs:()=>jt,OlP:()=>yr,zs3:()=>ei,ZZ4:()=>Qw,aQg:()=>BM,soG:()=>gv,YKP:()=>UA,h0i:()=>nf,PXZ:()=>lk,R0b:()=>sl,FiY:()=>Pi,Lbi:()=>e0,g9A:()=>yT,n_E:()=>Wy,Qsj:()=>PP,FYo:()=>RP,JOm:()=>ta,q3G:()=>Sn,tp0:()=>yl,Rgc:()=>qy,dDg:()=>CT,q4F:()=>Hd,GfV:()=>mc,s_b:()=>Rw,ifc:()=>Ai,eFA:()=>MT,G48:()=>IT,Gpc:()=>fe,f3M:()=>Yg,X6Q:()=>TT,_c5:()=>Ek,VLi:()=>ok,c2e:()=>xM,zSh:()=>Ep,wAp:()=>gn,vHH:()=>Be,EiD:()=>Mh,mCW:()=>Qc,qzn:()=>Qo,JVY:()=>Zf,pB0:()=>tm,eBb:()=>A_,L6k:()=>Kf,LAX:()=>Jc,cg1:()=>fw,kL8:()=>CS,yhl:()=>em,dqk:()=>Zn,sIi:()=>Ip,CqO:()=>Jb,QGY:()=>Ym,F4k:()=>$m,RDi:()=>c_,AaK:()=>We,z3N:()=>$s,qOj:()=>Ui,TTD:()=>sh,_Bn:()=>Go,xp6:()=>Ql,uIk:()=>Tu,ekj:()=>uS,Suo:()=>tT,Xpm:()=>ti,lG2:()=>G0,Yz7:()=>nn,cJS:()=>Yr,oAB:()=>Vs,Yjl:()=>t_,Y36:()=>Op,_UZ:()=>eS,GkF:()=>LD,BQk:()=>nS,ynx:()=>tS,qZA:()=>Ey,TgZ:()=>My,EpF:()=>iS,n5z:()=>go,Ikx:()=>hw,LFG:()=>Br,$8M:()=>Lf,$Z:()=>XC,NdJ:()=>Qb,CRH:()=>lM,oxw:()=>Zm,ALo:()=>eM,lcZ:()=>YA,xi3:()=>Ou,Dn7:()=>$A,Hsn:()=>Jm,F$t:()=>Dy,Q6J:()=>Sy,s9C:()=>Ay,DdM:()=>KS,VKq:()=>HA,WLB:()=>Dw,iGM:()=>XA,MAs:()=>pr,evT:()=>G_,CHM:()=>b_,oJD:()=>tu,LSH:()=>Xa,kYT:()=>Fl,Udp:()=>cS,WFA:()=>rS,d8E:()=>Py,YNc:()=>ar,_uU:()=>sw,Oqu:()=>Iy,hij:()=>Bd,AsE:()=>ow,Gf:()=>eT});var u=Q(7579),z=Q(727),Ve=Q(9751),Te=Q(6451),je=Q(3099);function $e(d){for(let f in d)if(d[f]===$e)return f;throw Error("Could not find renamed property on target object.")}function _e(d,f){for(const p in f)f.hasOwnProperty(p)&&!d.hasOwnProperty(p)&&(d[p]=f[p])}function We(d){if("string"==typeof d)return d;if(Array.isArray(d))return"["+d.map(We).join(", ")+"]";if(null==d)return""+d;if(d.overriddenName)return`${d.overriddenName}`;if(d.name)return`${d.name}`;const f=d.toString();if(null==f)return""+f;const p=f.indexOf("\n");return-1===p?f:f.substring(0,p)}function Me(d,f){return null==d||""===d?null===f?"":f:null==f||""===f?d:d+" "+f}const Y=$e({__forward_ref__:$e});function fe(d){return d.__forward_ref__=fe,d.toString=function(){return We(this())},d}function le(d){return ke(d)?d():d}function ke(d){return"function"==typeof d&&d.hasOwnProperty(Y)&&d.__forward_ref__===fe}class Be extends Error{constructor(f,p){super(function Pt(d,f){return`NG0${Math.abs(d)}${f?": "+f:""}`}(f,p)),this.code=f}}function qe(d){return"string"==typeof d?d:null==d?"":String(d)}function st(d){return"function"==typeof d?d.name||d.toString():"object"==typeof d&&null!=d&&"function"==typeof d.type?d.type.name||d.type.toString():qe(d)}function xt(d,f){const p=f?` in ${f}`:"";throw new Be(-201,`No provider for ${st(d)} found${p}`)}function Nt(d,f){null==d&&function Bt(d,f,p,v){throw new Error(`ASSERTION ERROR: ${d}`+(null==v?"":` [Expected=> ${p} ${v} ${f} <=Actual]`))}(f,d,null,"!=")}function nn(d){return{token:d.token,providedIn:d.providedIn||null,factory:d.factory,value:void 0}}function Yr(d){return{providers:d.providers||[],imports:d.imports||[]}}function Mr(d){return pa(d,zu)||pa(d,ai)}function pa(d,f){return d.hasOwnProperty(f)?d[f]:null}function Xd(d){return d&&(d.hasOwnProperty($n)||d.hasOwnProperty(ga))?d[$n]:null}const zu=$e({\u0275prov:$e}),$n=$e({\u0275inj:$e}),ai=$e({ngInjectableDef:$e}),ga=$e({ngInjectorDef:$e});var jt=(()=>((jt=jt||{})[jt.Default=0]="Default",jt[jt.Host=1]="Host",jt[jt.Self=2]="Self",jt[jt.SkipSelf=4]="SkipSelf",jt[jt.Optional=8]="Optional",jt))();let ir;function ji(d){const f=ir;return ir=d,f}function vr(d,f,p){const v=Mr(d);return v&&"root"==v.providedIn?void 0===v.value?v.value=v.factory():v.value:p&jt.Optional?null:void 0!==f?f:void xt(We(d),"Injector")}function ma(d){return{toString:d}.toString()}var va=(()=>((va=va||{})[va.OnPush=0]="OnPush",va[va.Default=1]="Default",va))(),Ai=(()=>{return(d=Ai||(Ai={}))[d.Emulated=0]="Emulated",d[d.None=2]="None",d[d.ShadowDom=3]="ShadowDom",Ai;var d})();const pn="undefined"!=typeof globalThis&&globalThis,Rn="undefined"!=typeof window&&window,Ti="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Zn=pn||"undefined"!=typeof global&&global||Rn||Ti,Wi={},_n=[],oe=$e({\u0275cmp:$e}),ie=$e({\u0275dir:$e}),me=$e({\u0275pipe:$e}),we=$e({\u0275mod:$e}),pe=$e({\u0275fac:$e}),dt=$e({__NG_ELEMENT_ID__:$e});let yn=0;function ti(d){return ma(()=>{const p={},v={type:d.type,providersResolver:null,decls:d.decls,vars:d.vars,factory:null,template:d.template||null,consts:d.consts||null,ngContentSelectors:d.ngContentSelectors,hostBindings:d.hostBindings||null,hostVars:d.hostVars||0,hostAttrs:d.hostAttrs||null,contentQueries:d.contentQueries||null,declaredInputs:p,inputs:null,outputs:null,exportAs:d.exportAs||null,onPush:d.changeDetection===va.OnPush,directiveDefs:null,pipeDefs:null,selectors:d.selectors||_n,viewQuery:d.viewQuery||null,features:d.features||null,data:d.data||{},encapsulation:d.encapsulation||Ai.Emulated,id:"c",styles:d.styles||_n,_:null,setInput:null,schemas:d.schemas||null,tView:null},y=d.directives,C=d.features,D=d.pipes;return v.id+=yn++,v.inputs=_g(d.inputs,p),v.outputs=_g(d.outputs),C&&C.forEach(P=>P(v)),v.directiveDefs=y?()=>("function"==typeof y?y():y).map(ni):null,v.pipeDefs=D?()=>("function"==typeof D?D():D).map(ss):null,v})}function ni(d){return ws(d)||function Er(d){return d[ie]||null}(d)}function ss(d){return function ja(d){return d[me]||null}(d)}const $r={};function Vs(d){return ma(()=>{const f={type:d.type,bootstrap:d.bootstrap||_n,declarations:d.declarations||_n,imports:d.imports||_n,exports:d.exports||_n,transitiveCompileScopes:null,schemas:d.schemas||null,id:d.id||null};return null!=d.id&&($r[d.id]=d.type),f})}function Fl(d,f){return ma(()=>{const p=ho(d,!0);p.declarations=f.declarations||_n,p.imports=f.imports||_n,p.exports=f.exports||_n})}function _g(d,f){if(null==d)return Wi;const p={};for(const v in d)if(d.hasOwnProperty(v)){let y=d[v],C=y;Array.isArray(y)&&(C=y[1],y=y[0]),p[y]=v,f&&(f[y]=C)}return p}const G0=ti;function t_(d){return{type:d.type,name:d.name,factory:null,pure:!1!==d.pure,onDestroy:d.type.prototype.ngOnDestroy||null}}function ws(d){return d[oe]||null}function ho(d,f){const p=d[we]||null;if(!p&&!0===f)throw new Error(`Type ${We(d)} does not have '\u0275mod' property.`);return p}function Lr(d){return Array.isArray(d)&&"object"==typeof d[1]}function wa(d){return Array.isArray(d)&&!0===d[1]}function $u(d){return 0!=(8&d.flags)}function Cg(d){return 2==(2&d.flags)}function ih(d){return 1==(1&d.flags)}function Wa(d){return null!==d.template}function n_(d){return 0!=(512&d[2])}function Pc(d,f){return d.hasOwnProperty(pe)?d[pe]:null}class o_{constructor(f,p,v){this.previousValue=f,this.currentValue=p,this.firstChange=v}isFirstChange(){return this.firstChange}}function sh(){return ul}function ul(d){return d.type.prototype.ngOnChanges&&(d.setInput=yD),j0}function j0(){const d=Mg(this),f=null==d?void 0:d.current;if(f){const p=d.previous;if(p===Wi)d.previous=f;else for(let v in f)p[v]=f[v];d.current=null,this.ngOnChanges(f)}}function yD(d,f,p,v){const y=Mg(d)||function W0(d,f){return d[Io]=f}(d,{previous:Wi,current:null}),C=y.current||(y.current={}),D=y.previous,P=this.declaredInputs[p],F=D[P];C[P]=new o_(F&&F.currentValue,f,D===Wi),d[v]=f}sh.ngInherit=!0;const Io="__ngSimpleChanges__";function Mg(d){return d[Io]||null}let l_;function c_(d){l_=d}function u_(){return void 0!==l_?l_:"undefined"!=typeof document?document:void 0}function Qn(d){return!!d.listen}const kc={createRenderer:(d,f)=>u_()};function Ii(d){for(;Array.isArray(d);)d=d[0];return d}function Zu(d,f){return Ii(f[d])}function Hs(d,f){return Ii(f[d.index])}function Mf(d,f){return d.data[f]}function dl(d,f){return d[f]}function fo(d,f){const p=f[d];return Lr(p)?p:p[0]}function oh(d){return 4==(4&d[2])}function Ss(d){return 128==(128&d[2])}function Ul(d,f){return null==f?null:d[f]}function Oc(d){d[18]=0}function zs(d,f){d[5]+=f;let p=d,v=d[3];for(;null!==v&&(1===f&&1===p[5]||-1===f&&0===p[5]);)v[5]+=f,p=v,v=v[3]}const bn={lFrame:Lc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ef(){return bn.bindingsEnabled}function He(){return bn.lFrame.lView}function Xn(){return bn.lFrame.tView}function b_(d){return bn.lFrame.contextLView=d,d[8]}function Ji(){let d=ah();for(;null!==d&&64===d.type;)d=d.parent;return d}function ah(){return bn.lFrame.currentTNode}function xa(d,f){const p=bn.lFrame;p.currentTNode=d,p.isParent=f}function Ag(){return bn.lFrame.isParent}function w_(){bn.lFrame.isParent=!1}function fl(){return bn.isInCheckNoChangesMode}function Af(d){bn.isInCheckNoChangesMode=d}function js(){const d=bn.lFrame;let f=d.bindingRootIndex;return-1===f&&(f=d.bindingRootIndex=d.tView.bindingStartIndex),f}function pl(){return bn.lFrame.bindingIndex++}function qa(d){const f=bn.lFrame,p=f.bindingIndex;return f.bindingIndex=f.bindingIndex+d,p}function Ro(d,f){const p=bn.lFrame;p.bindingIndex=p.bindingRootIndex=d,Ku(f)}function Ku(d){bn.lFrame.currentDirectiveIndex=d}function Fc(d){const f=bn.lFrame.currentDirectiveIndex;return-1===f?null:d[f]}function DC(){return bn.lFrame.currentQueryIndex}function Rg(d){bn.lFrame.currentQueryIndex=d}function bD(d){const f=d[1];return 2===f.type?f.declTNode:1===f.type?d[6]:null}function Y0(d,f,p){if(p&jt.SkipSelf){let y=f,C=d;for(;!(y=y.parent,null!==y||p&jt.Host||(y=bD(C),null===y||(C=C[15],10&y.type))););if(null===y)return!1;f=y,d=C}const v=bn.lFrame=$0();return v.currentTNode=f,v.lView=d,!0}function Tf(d){const f=$0(),p=d[1];bn.lFrame=f,f.currentTNode=p.firstChild,f.lView=d,f.tView=p,f.contextLView=d,f.bindingIndex=p.bindingStartIndex,f.inI18n=!1}function $0(){const d=bn.lFrame,f=null===d?null:d.child;return null===f?Lc(d):f}function Lc(d){const f={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:d,child:null,inI18n:!1};return null!==d&&(d.child=f),f}function Nc(){const d=bn.lFrame;return bn.lFrame=d.parent,d.currentTNode=null,d.lView=null,d}const Z0=Nc;function Po(){const d=Nc();d.isParent=!0,d.tView=null,d.selectedIndex=-1,d.contextLView=null,d.elementDepthCount=0,d.currentDirectiveIndex=-1,d.currentNamespace=null,d.bindingRootIndex=-1,d.bindingIndex=-1,d.currentQueryIndex=0}function qs(){return bn.lFrame.selectedIndex}function po(d){bn.lFrame.selectedIndex=d}function hr(){const d=bn.lFrame;return Mf(d.tView,d.selectedIndex)}function If(d,f){for(let p=f.directiveStart,v=f.directiveEnd;p<v;p++){const C=d.data[p].type.prototype,{ngAfterContentInit:D,ngAfterContentChecked:P,ngAfterViewInit:F,ngAfterViewChecked:B,ngOnDestroy:G}=C;D&&(d.contentHooks||(d.contentHooks=[])).push(-p,D),P&&((d.contentHooks||(d.contentHooks=[])).push(p,P),(d.contentCheckHooks||(d.contentCheckHooks=[])).push(p,P)),F&&(d.viewHooks||(d.viewHooks=[])).push(-p,F),B&&((d.viewHooks||(d.viewHooks=[])).push(p,B),(d.viewCheckHooks||(d.viewCheckHooks=[])).push(p,B)),null!=G&&(d.destroyHooks||(d.destroyHooks=[])).push(p,G)}}function Ju(d,f,p){TC(d,f,3,p)}function Pg(d,f,p,v){(3&d[2])===p&&TC(d,f,p,v)}function kg(d,f){let p=d[2];(3&p)===f&&(p&=2047,p+=1,d[2]=p)}function TC(d,f,p,v){const C=null!=v?v:-1,D=f.length-1;let P=0;for(let F=void 0!==v?65535&d[18]:0;F<D;F++)if("number"==typeof f[F+1]){if(P=f[F],null!=v&&P>=v)break}else f[F]<0&&(d[18]+=65536),(P<C||-1==C)&&(IC(d,p,f,F),d[18]=(4294901760&d[18])+F+2),F++}function IC(d,f,p,v){const y=p[v]<0,C=p[v+1],P=d[y?-p[v]:p[v]];if(y){if(d[2]>>11<d[18]>>16&&(3&d[2])===f){d[2]+=2048;try{C.call(P)}finally{}}}else try{C.call(P)}finally{}}class Rf{constructor(f,p,v){this.factory=f,this.resolving=!1,this.canSeeViewProviders=p,this.injectImpl=v}}function os(d,f,p){const v=Qn(d);let y=0;for(;y<p.length;){const C=p[y];if("number"==typeof C){if(0!==C)break;y++;const D=p[y++],P=p[y++],F=p[y++];v?d.setAttribute(f,P,F,D):f.setAttributeNS(D,P,F)}else{const D=C,P=p[++y];Yi(D)?v&&d.setProperty(f,D,P):v?d.setAttribute(f,D,P):f.setAttribute(D,P),y++}}return y}function Ri(d){return 3===d||4===d||6===d}function Yi(d){return 64===d.charCodeAt(0)}function Ya(d,f){if(null!==f&&0!==f.length)if(null===d||0===d.length)d=f.slice();else{let p=-1;for(let v=0;v<f.length;v++){const y=f[v];"number"==typeof y?p=y:0===p||at(d,p,y,null,-1===p||2===p?f[++v]:null)}}return d}function at(d,f,p,v,y){let C=0,D=d.length;if(-1===f)D=-1;else for(;C<d.length;){const P=d[C++];if("number"==typeof P){if(P===f){D=-1;break}if(P>f){D=C-1;break}}}for(;C<d.length;){const P=d[C];if("number"==typeof P)break;if(P===p){if(null===v)return void(null!==y&&(d[C+1]=y));if(v===d[C+1])return void(d[C+2]=y)}C++,null!==v&&C++,null!==y&&C++}-1!==D&&(d.splice(D,0,f),C=D+1),d.splice(C++,0,p),null!==v&&d.splice(C++,0,v),null!==y&&d.splice(C++,0,y)}function ml(d){return-1!==d}function Qu(d){return 32767&d}function Un(d,f){let p=function Ko(d){return d>>16}(d),v=f;for(;p>0;)v=v[15],p--;return v}let zn=!0;function $i(d){const f=zn;return zn=d,f}let zl=0;function vl(d,f){const p=Dn(d,f);if(-1!==p)return p;const v=f[1];v.firstCreatePass&&(d.injectorIndex=f.length,Bc(v.data,d),Bc(f,null),Bc(v.blueprint,null));const y=Ca(d,f),C=d.injectorIndex;if(ml(y)){const D=Qu(y),P=Un(y,f),F=P[1].data;for(let B=0;B<8;B++)f[C+B]=P[D+B]|F[D+B]}return f[C+8]=y,C}function Bc(d,f){d.push(0,0,0,0,0,0,0,0,f)}function Dn(d,f){return-1===d.injectorIndex||d.parent&&d.parent.injectorIndex===d.injectorIndex||null===f[d.injectorIndex+8]?-1:d.injectorIndex}function Ca(d,f){if(d.parent&&-1!==d.parent.injectorIndex)return d.parent.injectorIndex;let p=0,v=null,y=f;for(;null!==y;){const C=y[1],D=C.type;if(v=2===D?C.declTNode:1===D?y[6]:null,null===v)return-1;if(p++,y=y[15],-1!==v.injectorIndex)return v.injectorIndex|p<<16}return-1}function Pf(d,f,p){!function jl(d,f,p){let v;"string"==typeof p?v=p.charCodeAt(0)||0:p.hasOwnProperty(dt)&&(v=p[dt]),null==v&&(v=p[dt]=zl++);const y=255&v;f.data[d+(y>>5)]|=1<<y}(d,f,p)}function q(d,f,p){if(p&jt.Optional)return d;xt(f,"NodeInjector")}function gi(d,f,p,v){if(p&jt.Optional&&void 0===v&&(v=null),0==(p&(jt.Self|jt.Host))){const y=d[9],C=ji(void 0);try{return y?y.get(f,v,p&jt.Optional):vr(f,v,p&jt.Optional)}finally{ji(C)}}return q(v,f,p)}function Sa(d,f,p,v=jt.Default,y){if(null!==d){const C=function Ff(d){if("string"==typeof d)return d.charCodeAt(0)||0;const f=d.hasOwnProperty(dt)?d[dt]:void 0;return"number"==typeof f?f>=0?255&f:RC:f}(p);if("function"==typeof C){if(!Y0(f,d,v))return v&jt.Host?q(y,p,v):gi(f,p,v,y);try{const D=C(v);if(null!=D||v&jt.Optional)return D;xt(p)}finally{Z0()}}else if("number"==typeof C){let D=null,P=Dn(d,f),F=-1,B=v&jt.Host?f[16][6]:null;for((-1===P||v&jt.SkipSelf)&&(F=-1===P?Ca(d,f):f[P+8],-1!==F&&Ut(v,!1)?(D=f[1],P=Qu(F),f=Un(F,f)):P=-1);-1!==P;){const G=f[1];if(Cn(C,P,G.data)){const Z=nb(P,f,p,D,v,B);if(Z!==kf)return Z}F=f[P+8],-1!==F&&Ut(v,f[1].data[P+8]===B)&&Cn(C,P,f)?(D=G,P=Qu(F),f=Un(F,f)):P=-1}}}return gi(f,p,v,y)}const kf={};function RC(){return new _r(Ji(),He())}function nb(d,f,p,v,y,C){const D=f[1],P=D.data[d+8],G=Of(P,D,p,null==v?Cg(P)&&zn:v!=D&&0!=(3&P.type),y&jt.Host&&C===P);return null!==G?Tt(f,D,G,P):kf}function Of(d,f,p,v,y){const C=d.providerIndexes,D=f.data,P=1048575&C,F=d.directiveStart,G=C>>20,se=y?P+G:d.directiveEnd;for(let ge=v?P:P+G;ge<se;ge++){const Oe=D[ge];if(ge<F&&p===Oe||ge>=F&&Oe.type===p)return ge}if(y){const ge=D[F];if(ge&&Wa(ge)&&ge.type===p)return F}return null}function Tt(d,f,p,v){let y=d[p];const C=f.data;if(function CD(d){return d instanceof Rf}(y)){const D=y;D.resolving&&function Ot(d,f){const p=f?`. Dependency path: ${f.join(" > ")} > ${d}`:"";throw new Be(-200,`Circular dependency in DI detected for ${d}${p}`)}(st(C[p]));const P=$i(D.canSeeViewProviders);D.resolving=!0;const F=D.injectImpl?ji(D.injectImpl):null;Y0(d,v,jt.Default);try{y=d[p]=D.factory(void 0,C,d,v),f.firstCreatePass&&p>=v.directiveStart&&function X0(d,f,p){const{ngOnChanges:v,ngOnInit:y,ngDoCheck:C}=f.type.prototype;if(v){const D=ul(f);(p.preOrderHooks||(p.preOrderHooks=[])).push(d,D),(p.preOrderCheckHooks||(p.preOrderCheckHooks=[])).push(d,D)}y&&(p.preOrderHooks||(p.preOrderHooks=[])).push(0-d,y),C&&((p.preOrderHooks||(p.preOrderHooks=[])).push(d,C),(p.preOrderCheckHooks||(p.preOrderCheckHooks=[])).push(d,C))}(p,C[p],f)}finally{null!==F&&ji(F),$i(P),D.resolving=!1,Z0()}}return y}function Cn(d,f,p){return!!(p[f+(d>>5)]&1<<d)}function Ut(d,f){return!(d&jt.Self||d&jt.Host&&f)}class _r{constructor(f,p){this._tNode=f,this._lView=p}get(f,p,v){return Sa(this._tNode,this._lView,f,v,p)}}function go(d){return ma(()=>{const f=d.prototype.constructor,p=f[pe]||x_(f),v=Object.prototype;let y=Object.getPrototypeOf(d.prototype).constructor;for(;y&&y!==v;){const C=y[pe]||x_(y);if(C&&C!==p)return C;y=Object.getPrototypeOf(y)}return C=>new C})}function x_(d){return ke(d)?()=>{const f=x_(le(d));return f&&f()}:Pc(d)}function Lf(d){return function Vc(d,f){if("class"===f)return d.classes;if("style"===f)return d.styles;const p=d.attrs;if(p){const v=p.length;let y=0;for(;y<v;){const C=p[y];if(Ri(C))break;if(0===C)y+=2;else if("number"==typeof C)for(y++;y<v&&"string"==typeof p[y];)y++;else{if(C===f)return p[y+1];y+=2}}}return null}(Ji(),d)}const Gc="__parameters__";function or(d,f,p){return ma(()=>{const v=function zc(d){return function(...p){if(d){const v=d(...p);for(const y in v)this[y]=v[y]}}}(f);function y(...C){if(this instanceof y)return v.apply(this,C),this;const D=new y(...C);return P.annotation=D,P;function P(F,B,G){const Z=F.hasOwnProperty(Gc)?F[Gc]:Object.defineProperty(F,Gc,{value:[]})[Gc];for(;Z.length<=G;)Z.push(null);return(Z[G]=Z[G]||[]).push(D),F}}return p&&(y.prototype=Object.create(p.prototype)),y.prototype.ngMetadataName=d,y.annotationCls=y,y})}class yr{constructor(f,p){this._desc=f,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof p?this.__NG_ELEMENT_ID__=p:void 0!==p&&(this.\u0275prov=nn({token:this,providedIn:p.providedIn||"root",factory:p.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Og=new yr("AnalyzeForEntryComponents");function ko(d,f){void 0===f&&(f=d);for(let p=0;p<d.length;p++){let v=d[p];Array.isArray(v)?(f===d&&(f=d.slice(0,p)),ko(v,f)):f!==d&&f.push(v)}return f}function Ma(d,f){d.forEach(p=>Array.isArray(p)?Ma(p,f):f(p))}function Bg(d,f,p){f>=d.length?d.push(p):d.splice(f,0,p)}function Vg(d,f){return f>=d.length-1?d.pop():d.splice(f,1)[0]}function dh(d,f){const p=[];for(let v=0;v<d;v++)p.push(f);return p}function as(d,f,p){let v=jc(d,f);return v>=0?d[1|v]=p:(v=~v,function Ug(d,f,p,v){let y=d.length;if(y==f)d.push(p,v);else if(1===y)d.push(v,d[0]),d[0]=p;else{for(y--,d.push(d[y-1],d[y]);y>f;)d[y]=d[y-2],y--;d[f]=p,d[f+1]=v}}(d,v,f,p)),v}function hh(d,f){const p=jc(d,f);if(p>=0)return d[1|p]}function jc(d,f){return function E_(d,f,p){let v=0,y=d.length>>p;for(;y!==v;){const C=v+(y-v>>1),D=d[C<<p];if(f===D)return C<<p;D>f?y=C:v=C+1}return~(y<<p)}(d,f,1)}const Wc={},Wg="__NG_DI_FLAG__",qc="ngTempTokenPath",Gf=/\n/gm,zf="__source",jf=$e({provide:String,useValue:$e});let rd;function Wf(d){const f=rd;return rd=d,f}function _l(d,f=jt.Default){if(void 0===rd)throw new Be(203,"");return null===rd?vr(d,void 0,f):rd.get(d,f&jt.Optional?null:void 0,f)}function Br(d,f=jt.Default){return(function fi(){return ir}()||_l)(le(d),f)}const Yg=Br;function qf(d){const f=[];for(let p=0;p<d.length;p++){const v=le(d[p]);if(Array.isArray(v)){if(0===v.length)throw new Be(900,"");let y,C=jt.Default;for(let D=0;D<v.length;D++){const P=v[D],F=ph(P);"number"==typeof F?-1===F?y=P.token:C|=F:y=P}f.push(Br(y,C))}else f.push(Br(v))}return f}function fh(d,f){return d[Wg]=f,d.prototype[Wg]=f,d}function ph(d){return d[Wg]}const Vi=fh(or("Inject",d=>({token:d})),-1),Pi=fh(or("Optional"),8),yl=fh(or("SkipSelf"),4);let Ys,Es;function ql(d){var f;return(null===(f=function $f(){if(void 0===Ys&&(Ys=null,Zn.trustedTypes))try{Ys=Zn.trustedTypes.createPolicy("angular",{createHTML:d=>d,createScript:d=>d,createScriptURL:d=>d})}catch(d){}return Ys}())||void 0===f?void 0:f.createHTML(d))||d}function Xg(d){var f;return(null===(f=function Qg(){if(void 0===Es&&(Es=null,Zn.trustedTypes))try{Es=Zn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:d=>d,createScript:d=>d,createScriptURL:d=>d})}catch(d){}return Es}())||void 0===f?void 0:f.createHTML(d))||d}class Ja{constructor(f){this.changingThisBreaksApplicationSecurity=f}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class ab extends Ja{getTypeName(){return"HTML"}}class ad extends Ja{getTypeName(){return"Style"}}class lb extends Ja{getTypeName(){return"Script"}}class Ds extends Ja{getTypeName(){return"URL"}}class vh extends Ja{getTypeName(){return"ResourceURL"}}function $s(d){return d instanceof Ja?d.changingThisBreaksApplicationSecurity:d}function Qo(d,f){const p=em(d);if(null!=p&&p!==f){if("ResourceURL"===p&&"URL"===f)return!0;throw new Error(`Required a safe ${f}, got a ${p} (see https://g.co/ng/security#xss)`)}return p===f}function em(d){return d instanceof Ja&&d.getTypeName()||null}function Zf(d){return new ab(d)}function Kf(d){return new ad(d)}function A_(d){return new lb(d)}function Jc(d){return new Ds(d)}function tm(d){return new vh(d)}class Jf{constructor(f){this.inertDocumentHelper=f}getInertBodyElement(f){f="<body><remove></remove>"+f;try{const p=(new window.DOMParser).parseFromString(ql(f),"text/html").body;return null===p?this.inertDocumentHelper.getInertBodyElement(f):(p.removeChild(p.firstChild),p)}catch(p){return null}}}class nm{constructor(f){if(this.defaultDoc=f,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const p=this.inertDocument.createElement("html");this.inertDocument.appendChild(p);const v=this.inertDocument.createElement("body");p.appendChild(v)}}getInertBodyElement(f){const p=this.inertDocument.createElement("template");if("content"in p)return p.innerHTML=ql(f),p;const v=this.inertDocument.createElement("body");return v.innerHTML=ql(f),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(v),v}stripCustomNsAttrs(f){const p=f.attributes;for(let y=p.length-1;0<y;y--){const D=p.item(y).name;("xmlns:ns1"===D||0===D.indexOf("ns1:"))&&f.removeAttribute(D)}let v=f.firstChild;for(;v;)v.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(v),v=v.nextSibling}}const yh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Qf=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Qc(d){return(d=String(d)).match(yh)||d.match(Qf)?d:"unsafe:"+d}function Da(d){const f={};for(const p of d.split(","))f[p]=!0;return f}function Xc(...d){const f={};for(const p of d)for(const v in p)p.hasOwnProperty(v)&&(f[v]=!0);return f}const bh=Da("area,br,col,hr,img,wbr"),rm=Da("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),As=Da("rp,rt"),xl=Xc(bh,Xc(rm,Da("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Xc(As,Da("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Xc(As,rm)),Yl=Da("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),cd=Da("srcset"),om=Xc(Yl,cd,Da("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Da("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ud=Da("script,style,template");class cb{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(f){let p=f.firstChild,v=!0;for(;p;)if(p.nodeType===Node.ELEMENT_NODE?v=this.startElement(p):p.nodeType===Node.TEXT_NODE?this.chars(p.nodeValue):this.sanitizedSomething=!0,v&&p.firstChild)p=p.firstChild;else for(;p;){p.nodeType===Node.ELEMENT_NODE&&this.endElement(p);let y=this.checkClobberedElement(p,p.nextSibling);if(y){p=y;break}p=this.checkClobberedElement(p,p.parentNode)}return this.buf.join("")}startElement(f){const p=f.nodeName.toLowerCase();if(!xl.hasOwnProperty(p))return this.sanitizedSomething=!0,!ud.hasOwnProperty(p);this.buf.push("<"),this.buf.push(p);const v=f.attributes;for(let y=0;y<v.length;y++){const C=v.item(y),D=C.name,P=D.toLowerCase();if(!om.hasOwnProperty(P)){this.sanitizedSomething=!0;continue}let F=C.value;Yl[P]&&(F=Qc(F)),cd[P]&&(d=F,F=(d=String(d)).split(",").map(f=>Qc(f.trim())).join(", ")),this.buf.push(" ",D,'="',Qa(F),'"')}var d;return this.buf.push(">"),!0}endElement(f){const p=f.nodeName.toLowerCase();xl.hasOwnProperty(p)&&!bh.hasOwnProperty(p)&&(this.buf.push("</"),this.buf.push(p),this.buf.push(">"))}chars(f){this.buf.push(Qa(f))}checkClobberedElement(f,p){if(p&&(f.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${f.outerHTML}`);return p}}const UC=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dd=/([^\#-~ |!])/g;function Qa(d){return d.replace(/&/g,"&amp;").replace(UC,function(f){return"&#"+(1024*(f.charCodeAt(0)-55296)+(f.charCodeAt(1)-56320)+65536)+";"}).replace(dd,function(f){return"&#"+f.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let eu;function Mh(d,f){let p=null;try{eu=eu||function _h(d){const f=new nm(d);return function ld(){try{return!!(new window.DOMParser).parseFromString(ql(""),"text/html")}catch(d){return!1}}()?new Jf(f):f}(d);let v=f?String(f):"";p=eu.getInertBodyElement(v);let y=5,C=v;do{if(0===y)throw new Error("Failed to sanitize html because the input is unstable");y--,v=C,C=p.innerHTML,p=eu.getInertBodyElement(v)}while(v!==C);return ql((new cb).sanitizeChildren($l(p)||p))}finally{if(p){const v=$l(p)||p;for(;v.firstChild;)v.removeChild(v.firstChild)}}}function $l(d){return"content"in d&&function T_(d){return d.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===d.nodeName}(d)?d.content:null}var Sn=(()=>((Sn=Sn||{})[Sn.NONE=0]="NONE",Sn[Sn.HTML=1]="HTML",Sn[Sn.STYLE=2]="STYLE",Sn[Sn.SCRIPT=3]="SCRIPT",Sn[Sn.URL=4]="URL",Sn[Sn.RESOURCE_URL=5]="RESOURCE_URL",Sn))();function tu(d){const f=Xo();return f?Xg(f.sanitize(Sn.HTML,d)||""):Qo(d,"HTML")?Xg($s(d)):Mh(u_(),qe(d))}function Xa(d){const f=Xo();return f?f.sanitize(Sn.URL,d)||"":Qo(d,"URL")?$s(d):Qc(qe(d))}function Xo(){const d=He();return d&&d[12]}const P_="__ngContext__";function Ar(d,f){d[P_]=f}function k_(d){const f=function nu(d){return d[P_]||null}(d);return f?Array.isArray(f)?f:f.lView:null}function iu(d){return d.ngOriginalError}function ep(d,...f){d.error(...f)}class fd{constructor(){this._console=console}handleError(f){const p=this._findOriginalError(f),v=function Ah(d){return d&&d.ngErrorLogger||ep}(f);v(this._console,"ERROR",f),p&&v(this._console,"ORIGINAL ERROR",p)}_findOriginalError(f){let p=f&&iu(f);for(;p&&iu(p);)p=iu(p);return p||null}}const U_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Zn))();function G_(d){return d.ownerDocument}function ls(d){return d instanceof Function?d():d}var ta=(()=>((ta=ta||{})[ta.Important=1]="Important",ta[ta.DashCase=2]="DashCase",ta))();function ru(d,f){return undefined(d,f)}function su(d){const f=d[3];return wa(f)?f[3]:f}function md(d){return j_(d[13])}function dm(d){return j_(d[4])}function j_(d){for(;null!==d&&!wa(d);)d=d[4];return d}function ou(d,f,p,v,y){if(null!=v){let C,D=!1;wa(v)?C=v:Lr(v)&&(D=!0,v=v[0]);const P=Ii(v);0===d&&null!==p?null==y?gm(f,p,P):Kl(f,p,P,y||null,!0):1===d&&null!==p?Kl(f,p,P,y||null,!0):2===d?function yd(d,f,p){const v=cp(d,f);v&&function lp(d,f,p,v){Qn(d)?d.removeChild(f,p,v):f.removeChild(p)}(d,v,f,p)}(f,P,D):3===d&&f.destroyNode(P),null!=C&&function $_(d,f,p,v,y){const C=p[7];C!==Ii(p)&&ou(f,d,v,C,y);for(let P=10;P<p.length;P++){const F=p[P];an(F[1],F,d,f,v,C)}}(f,d,C,p,y)}}function fm(d,f,p){if(Qn(d))return d.createElement(f,p);{const v=null!==p?function q0(d){const f=d.toLowerCase();return"svg"===f?"http://www.w3.org/2000/svg":"math"===f?"http://www.w3.org/1998/MathML/":null}(p):null;return null===v?d.createElement(f):d.createElementNS(v,f)}}function vo(d,f){const p=d[9],v=p.indexOf(f),y=f[3];1024&f[2]&&(f[2]&=-1025,zs(y,-1)),p.splice(v,1)}function pm(d,f){if(d.length<=10)return;const p=10+f,v=d[p];if(v){const y=v[17];null!==y&&y!==d&&vo(y,v),f>0&&(d[p-1][4]=v[4]);const C=Vg(d,10+f);!function vd(d,f){an(d,f,f[11],2,null,null),f[0]=null,f[6]=null}(v[1],v);const D=C[19];null!==D&&D.detachView(C[1]),v[3]=null,v[4]=null,v[2]&=-129}return v}function W_(d,f){if(!(256&f[2])){const p=f[11];Qn(p)&&p.destroyNode&&an(d,f,p,3,null,null),function Sb(d){let f=d[13];if(!f)return au(d[1],d);for(;f;){let p=null;if(Lr(f))p=f[13];else{const v=f[10];v&&(p=v)}if(!p){for(;f&&!f[4]&&f!==d;)Lr(f)&&au(f[1],f),f=f[3];null===f&&(f=d),Lr(f)&&au(f[1],f),p=f&&f[4]}f=p}}(f)}}function au(d,f){if(!(256&f[2])){f[2]&=-129,f[2]|=256,function Db(d,f){let p;if(null!=d&&null!=(p=d.destroyHooks))for(let v=0;v<p.length;v+=2){const y=f[p[v]];if(!(y instanceof Rf)){const C=p[v+1];if(Array.isArray(C))for(let D=0;D<C.length;D+=2){const P=y[C[D]],F=C[D+1];try{F.call(P)}finally{}}else try{C.call(y)}finally{}}}}(d,f),function Eb(d,f){const p=d.cleanup,v=f[7];let y=-1;if(null!==p)for(let C=0;C<p.length-1;C+=2)if("string"==typeof p[C]){const D=p[C+1],P="function"==typeof D?D(f):Ii(f[D]),F=v[y=p[C+2]],B=p[C+3];"boolean"==typeof B?P.removeEventListener(p[C],F,B):B>=0?v[y=B]():v[y=-B].unsubscribe(),C+=2}else{const D=v[y=p[C+1]];p[C].call(D)}if(null!==v){for(let C=y+1;C<v.length;C++)v[C]();f[7]=null}}(d,f),1===f[1].type&&Qn(f[11])&&f[11].destroy();const p=f[17];if(null!==p&&wa(f[3])){p!==f[3]&&vo(p,f);const v=f[19];null!==v&&v.detachView(d)}}}function ap(d,f,p){return function q_(d,f,p){let v=f;for(;null!==v&&40&v.type;)v=(f=v).parent;if(null===v)return p[0];if(2&v.flags){const y=d.data[v.directiveStart].encapsulation;if(y===Ai.None||y===Ai.Emulated)return null}return Hs(v,p)}(d,f.parent,p)}function Kl(d,f,p,v,y){Qn(d)?d.insertBefore(f,p,v,y):f.insertBefore(p,v,y)}function gm(d,f,p){Qn(d)?d.appendChild(f,p):f.appendChild(p)}function Y_(d,f,p,v,y){null!==v?Kl(d,f,p,v,y):gm(d,f,p)}function cp(d,f){return Qn(d)?d.parentNode(f):f.parentNode}function Ab(d,f,p){return Ee(d,f,p)}let Ee=function Zs(d,f,p){return 40&d.type?Hs(d,p):null};function Ih(d,f,p,v){const y=ap(d,v,f),C=f[11],P=Ab(v.parent||f[6],v,f);if(null!=y)if(Array.isArray(p))for(let F=0;F<p.length;F++)Y_(C,y,p[F],P,!1);else Y_(C,y,p,P,!1)}function gt(d,f){if(null!==f){const p=f.type;if(3&p)return Hs(f,d);if(4&p)return _d(-1,d[f.index]);if(8&p){const v=f.child;if(null!==v)return gt(d,v);{const y=d[f.index];return wa(y)?_d(-1,y):Ii(y)}}if(32&p)return ru(f,d)()||Ii(d[f.index]);{const v=Tr(d,f);return null!==v?Array.isArray(v)?v[0]:gt(su(d[16]),v):gt(d,f.next)}}return null}function Tr(d,f){return null!==f?d[16][6].projection[f.projection]:null}function _d(d,f){const p=10+d+1;if(p<f.length){const v=f[p],y=v[1].firstChild;if(null!==y)return gt(v,y)}return f[7]}function Kt(d,f,p,v,y,C,D){for(;null!=p;){const P=v[p.index],F=p.type;if(D&&0===f&&(P&&Ar(Ii(P),v),p.flags|=4),64!=(64&p.flags))if(8&F)Kt(d,f,p.child,v,y,C,!1),ou(f,d,y,P,C);else if(32&F){const B=ru(p,v);let G;for(;G=B();)ou(f,d,y,G,C);ou(f,d,y,P,C)}else 16&F?mm(d,f,v,p,y,C):ou(f,d,y,P,C);p=D?p.projectionNext:p.next}}function an(d,f,p,v,y,C){Kt(p,v,d.firstChild,f,y,C,!1)}function mm(d,f,p,v,y,C){const D=p[16],F=D[6].projection[v.projection];if(Array.isArray(F))for(let B=0;B<F.length;B++)ou(f,d,y,F[B],C);else Kt(d,f,F,D[3],y,C,!0)}function lu(d,f,p){Qn(d)?d.setAttribute(f,"style",p):f.style.cssText=p}function up(d,f,p){Qn(d)?""===p?d.removeAttribute(f,"class"):d.setAttribute(f,"class",p):f.className=p}function Kr(d,f,p){let v=d.length;for(;;){const y=d.indexOf(f,p);if(-1===y)return y;if(0===y||d.charCodeAt(y-1)<=32){const C=f.length;if(y+C===v||d.charCodeAt(y+C)<=32)return y}p=y+1}}const Z_="ng-template";function cu(d,f,p){let v=0;for(;v<d.length;){let y=d[v++];if(p&&"class"===y){if(y=d[v],-1!==Kr(y.toLowerCase(),f,0))return!0}else if(1===y){for(;v<d.length&&"string"==typeof(y=d[v++]);)if(y.toLowerCase()===f)return!0;return!1}}return!1}function vm(d){return 4===d.type&&d.value!==Z_}function K_(d,f,p){return f===(4!==d.type||p?d.value:Z_)}function mi(d,f,p){let v=4;const y=d.attrs||[],C=function J_(d){for(let f=0;f<d.length;f++)if(Ri(d[f]))return f;return d.length}(y);let D=!1;for(let P=0;P<f.length;P++){const F=f[P];if("number"!=typeof F){if(!D)if(4&v){if(v=2|1&v,""!==F&&!K_(d,F,p)||""===F&&1===f.length){if(Ra(v))return!1;D=!0}}else{const B=8&v?F:f[++P];if(8&v&&null!==d.attrs){if(!cu(d.attrs,B,p)){if(Ra(v))return!1;D=!0}continue}const Z=Pa(8&v?"class":F,y,vm(d),p);if(-1===Z){if(Ra(v))return!1;D=!0;continue}if(""!==B){let se;se=Z>C?"":y[Z+1].toLowerCase();const ge=8&v?se:null;if(ge&&-1!==Kr(ge,B,0)||2&v&&B!==se){if(Ra(v))return!1;D=!0}}}}else{if(!D&&!Ra(v)&&!Ra(F))return!1;if(D&&Ra(F))continue;D=!1,v=F|1&v}}return Ra(v)||D}function Ra(d){return 0==(1&d)}function Pa(d,f,p,v){if(null===f)return-1;let y=0;if(v||!p){let C=!1;for(;y<f.length;){const D=f[y];if(D===d)return y;if(3===D||6===D)C=!0;else{if(1===D||2===D){let P=f[++y];for(;"string"==typeof P;)P=f[++y];continue}if(4===D)break;if(0===D){y+=4;continue}}y+=C?1:2}return-1}return function Jl(d,f){let p=d.indexOf(4);if(p>-1)for(p++;p<d.length;){const v=d[p];if("number"==typeof v)return-1;if(v===f)return p;p++}return-1}(f,d)}function uu(d,f,p=!1){for(let v=0;v<f.length;v++)if(mi(d,f[v],p))return!0;return!1}function br(d,f){e:for(let p=0;p<f.length;p++){const v=f[p];if(d.length===v.length){for(let y=0;y<d.length;y++)if(d[y]!==v[y])continue e;return!0}}return!1}function bd(d,f){return d?":not("+f.trim()+")":f}function _m(d){let f=d[0],p=1,v=2,y="",C=!1;for(;p<d.length;){let D=d[p];if("string"==typeof D)if(2&v){const P=d[++p];y+="["+D+(P.length>0?'="'+P+'"':"")+"]"}else 8&v?y+="."+D:4&v&&(y+=" "+D);else""!==y&&!Ra(D)&&(f+=bd(C,y),y=""),v=D,C=C||!Ra(v);p++}return""!==y&&(f+=bd(C,y)),f}const dn={};function Ql(d){wd(Xn(),He(),qs()+d,fl())}function wd(d,f,p,v){if(!v)if(3==(3&f[2])){const C=d.preOrderCheckHooks;null!==C&&Ju(f,C,p)}else{const C=d.preOrderHooks;null!==C&&Pg(f,C,0,p)}po(p)}function el(d,f){return d<<17|f<<2}function Ir(d){return d>>17&32767}function dp(d){return 2|d}function _o(d){return(131068&d)>>2}function hu(d,f){return-131069&d|f<<2}function hp(d){return 1|d}function ry(d,f){const p=d.contentQueries;if(null!==p)for(let v=0;v<p.length;v+=2){const y=p[v],C=p[v+1];if(-1!==C){const D=d.data[C];Rg(y),D.contentQueries(2,f[C],C)}}}function Nh(d,f,p,v,y,C,D,P,F,B){const G=f.blueprint.slice();return G[0]=y,G[2]=140|v,Oc(G),G[3]=G[15]=d,G[8]=p,G[10]=D||d&&d[10],G[11]=P||d&&d[11],G[12]=F||d&&d[12]||null,G[9]=B||d&&d[9]||null,G[6]=C,G[16]=2==f.type?d[16]:G,G}function tl(d,f,p,v,y){let C=d.data[f];if(null===C)C=function sy(d,f,p,v,y){const C=ah(),D=Ag(),F=d.data[f]=function Pb(d,f,p,v,y,C){return{type:p,index:v,insertBeforeIndex:null,injectorIndex:f?f.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:y,attrs:C,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:f,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?C:C&&C.parent,p,f,v,y);return null===d.firstChild&&(d.firstChild=F),null!==C&&(D?null==C.child&&null!==F.parent&&(C.child=F):null===C.next&&(C.next=F)),F}(d,f,p,v,y),function Dr(){return bn.lFrame.inI18n}()&&(C.flags|=64);else if(64&C.type){C.type=p,C.value=v,C.attrs=y;const D=function hl(){const d=bn.lFrame,f=d.currentTNode;return d.isParent?f:f.parent}();C.injectorIndex=null===D?-1:D.injectorIndex}return xa(C,!0),C}function gu(d,f,p,v){if(0===p)return-1;const y=f.length;for(let C=0;C<p;C++)f.push(v),d.blueprint.push(v),d.data.push(null);return y}function Bh(d,f,p){Tf(f);try{const v=d.viewQuery;null!==v&&bu(1,v,p);const y=d.template;null!==y&&Dm(d,f,y,1,p),d.firstCreatePass&&(d.firstCreatePass=!1),d.staticContentQueries&&ry(d,f),d.staticViewQueries&&bu(2,d.viewQuery,p);const C=d.components;null!==C&&function Rb(d,f){for(let p=0;p<f.length;p++)hy(d,f[p])}(f,C)}catch(v){throw d.firstCreatePass&&(d.incompleteFirstPass=!0,d.firstCreatePass=!1),v}finally{f[2]&=-5,Po()}}function Lo(d,f,p,v){const y=f[2];if(256==(256&y))return;Tf(f);const C=fl();try{Oc(f),function lh(d){return bn.lFrame.bindingIndex=d}(d.bindingStartIndex),null!==p&&Dm(d,f,p,2,v);const D=3==(3&y);if(!C)if(D){const B=d.preOrderCheckHooks;null!==B&&Ju(f,B,null)}else{const B=d.preOrderHooks;null!==B&&Pg(f,B,0,null),kg(f,0)}if(function xp(d){for(let f=md(d);null!==f;f=dm(f)){if(!f[2])continue;const p=f[9];for(let v=0;v<p.length;v++){const y=p[v],C=y[3];0==(1024&y[2])&&zs(C,1),y[2]|=1024}}}(f),function km(d){for(let f=md(d);null!==f;f=dm(f))for(let p=10;p<f.length;p++){const v=f[p],y=v[1];Ss(v)&&Lo(y,v,y.template,v[8])}}(f),null!==d.contentQueries&&ry(d,f),!C)if(D){const B=d.contentCheckHooks;null!==B&&Ju(f,B)}else{const B=d.contentHooks;null!==B&&Pg(f,B,1),kg(f,1)}!function iy(d,f){const p=d.hostBindingOpCodes;if(null!==p)try{for(let v=0;v<p.length;v++){const y=p[v];if(y<0)po(~y);else{const C=y,D=p[++v],P=p[++v];Ro(D,C),P(2,f[C])}}}finally{po(-1)}}(d,f);const P=d.components;null!==P&&function Em(d,f){for(let p=0;p<f.length;p++)Cp(d,f[p])}(f,P);const F=d.viewQuery;if(null!==F&&bu(2,F,v),!C)if(D){const B=d.viewCheckHooks;null!==B&&Ju(f,B)}else{const B=d.viewHooks;null!==B&&Pg(f,B,2),kg(f,2)}!0===d.firstUpdatePass&&(d.firstUpdatePass=!1),C||(f[2]&=-73),1024&f[2]&&(f[2]&=-1025,zs(f[3],-1))}finally{Po()}}function mu(d,f,p,v){const y=f[10],C=!fl(),D=oh(f);try{C&&!D&&y.begin&&y.begin(),D&&Bh(d,f,v),Lo(d,f,p,v)}finally{C&&!D&&y.end&&y.end()}}function Dm(d,f,p,v,y){const C=qs(),D=2&v;try{po(-1),D&&f.length>20&&wd(d,f,20,fl()),p(v,y)}finally{po(C)}}function ec(d,f,p){if($u(f)){const y=f.directiveEnd;for(let C=f.directiveStart;C<y;C++){const D=d.data[C];D.contentQueries&&D.contentQueries(1,p[C],C)}}}function Ad(d,f,p){!Ef()||(function Ob(d,f,p,v){const y=p.directiveStart,C=p.directiveEnd;d.firstCreatePass||vl(p,f),Ar(v,f);const D=p.initialInputs;for(let P=y;P<C;P++){const F=d.data[P],B=Wa(F);B&&dy(f,p,F);const G=Tt(f,d,P,p);Ar(G,f),null!==D&&Rm(0,P-y,G,F,0,D),B&&(fo(p.index,f)[8]=G)}}(d,f,p,Hs(p,f)),128==(128&p.flags)&&function Im(d,f,p){const v=p.directiveStart,y=p.directiveEnd,D=p.index,P=function Ig(){return bn.lFrame.currentDirectiveIndex}();try{po(D);for(let F=v;F<y;F++){const B=d.data[F],G=f[F];Ku(F),(null!==B.hostBindings||0!==B.hostVars||null!==B.hostAttrs)&&cs(B,G)}}finally{po(-1),Ku(P)}}(d,f,p))}function Sl(d,f,p=Hs){const v=f.localNames;if(null!==v){let y=f.index+1;for(let C=0;C<v.length;C+=2){const D=v[C+1],P=-1===D?p(f,d):d[D];d[y++]=P}}}function oy(d){const f=d.tView;return null===f||f.incompleteFirstPass?d.tView=yp(1,null,d.template,d.decls,d.vars,d.directiveDefs,d.pipeDefs,d.viewQuery,d.schemas,d.consts):f}function yp(d,f,p,v,y,C,D,P,F,B){const G=20+v,Z=G+y,se=function Vh(d,f){const p=[];for(let v=0;v<f;v++)p.push(v<d?null:dn);return p}(G,Z),ge="function"==typeof B?B():B;return se[1]={type:d,blueprint:se,template:p,queries:null,viewQuery:P,declTNode:f,data:se.slice().fill(null,G),bindingStartIndex:G,expandoStartIndex:Z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof C?C():C,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:F,consts:ge,incompleteFirstPass:!1}}function Td(d,f,p,v){const y=Lm(f);null===p?y.push(v):(y.push(p),d.firstCreatePass&&Nm(d).push(v,y.length-1))}function Gh(d,f,p){for(let v in d)if(d.hasOwnProperty(v)){const y=d[v];(p=null===p?{}:p).hasOwnProperty(v)?p[v].push(f,y):p[v]=[f,y]}return p}function Is(d,f,p,v,y,C,D,P){const F=Hs(f,p);let G,B=f.inputs;!P&&null!=B&&(G=B[v])?(Bm(d,p,G,v,y),Cg(f)&&function bp(d,f){const p=fo(f,d);16&p[2]||(p[2]|=64)}(p,f.index)):3&f.type&&(v=function ay(d){return"class"===d?"className":"for"===d?"htmlFor":"formaction"===d?"formAction":"innerHtml"===d?"innerHTML":"readonly"===d?"readOnly":"tabindex"===d?"tabIndex":d}(v),y=null!=D?D(y,f.value||"",v):y,Qn(C)?C.setProperty(F,v,y):Yi(v)||(F.setProperty?F.setProperty(v,y):F[v]=y))}function _u(d,f,p,v){let y=!1;if(Ef()){const C=function wp(d,f,p){const v=d.directiveRegistry;let y=null;if(v)for(let C=0;C<v.length;C++){const D=v[C];uu(p,D.selectors,!1)&&(y||(y=[]),Pf(vl(p,f),d,D.type),Wa(D)?(nl(d,p),y.unshift(D)):y.push(D))}return y}(d,f,p),D=null===v?null:{"":-1};if(null!==C){y=!0,Fb(p,d.data.length,C.length);for(let G=0;G<C.length;G++){const Z=C[G];Z.providersResolver&&Z.providersResolver(Z)}let P=!1,F=!1,B=gu(d,f,C.length,null);for(let G=0;G<C.length;G++){const Z=C[G];p.mergedAttrs=Ya(p.mergedAttrs,Z.hostAttrs),ia(d,p,f,B,Z),uy(B,Z,D),null!==Z.contentQueries&&(p.flags|=8),(null!==Z.hostBindings||null!==Z.hostAttrs||0!==Z.hostVars)&&(p.flags|=128);const se=Z.type.prototype;!P&&(se.ngOnChanges||se.ngOnInit||se.ngDoCheck)&&((d.preOrderHooks||(d.preOrderHooks=[])).push(p.index),P=!0),!F&&(se.ngOnChanges||se.ngDoCheck)&&((d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(p.index),F=!0),B++}!function Tm(d,f){const v=f.directiveEnd,y=d.data,C=f.attrs,D=[];let P=null,F=null;for(let B=f.directiveStart;B<v;B++){const G=y[B],Z=G.inputs,se=null===C||vm(f)?null:YC(Z,C);D.push(se),P=Gh(Z,B,P),F=Gh(G.outputs,B,F)}null!==P&&(P.hasOwnProperty("class")&&(f.flags|=16),P.hasOwnProperty("style")&&(f.flags|=32)),f.initialInputs=D,f.inputs=P,f.outputs=F}(d,p)}D&&function Ur(d,f,p){if(f){const v=d.localNames=[];for(let y=0;y<f.length;y+=2){const C=p[f[y+1]];if(null==C)throw new Be(-301,!1);v.push(f[y],C)}}}(p,v,D)}return p.mergedAttrs=Ya(p.mergedAttrs,p.attrs),y}function Hh(d,f,p,v,y,C){const D=C.hostBindings;if(D){let P=d.hostBindingOpCodes;null===P&&(P=d.hostBindingOpCodes=[]);const F=~f.index;(function cy(d){let f=d.length;for(;f>0;){const p=d[--f];if("number"==typeof p&&p<0)return p}return 0})(P)!=F&&P.push(F),P.push(v,y,D)}}function cs(d,f){null!==d.hostBindings&&d.hostBindings(1,f)}function nl(d,f){f.flags|=2,(d.components||(d.components=[])).push(f.index)}function uy(d,f,p){if(p){if(f.exportAs)for(let v=0;v<f.exportAs.length;v++)p[f.exportAs[v]]=d;Wa(f)&&(p[""]=d)}}function Fb(d,f,p){d.flags|=1,d.directiveStart=f,d.directiveEnd=f+p,d.providerIndexes=f}function ia(d,f,p,v,y){d.data[v]=y;const C=y.factory||(y.factory=Pc(y.type)),D=new Rf(C,Wa(y),null);d.blueprint[v]=D,p[v]=D,Hh(d,f,0,v,gu(d,p,y.hostVars,dn),y)}function dy(d,f,p){const v=Hs(f,d),y=oy(p),C=d[10],D=Sp(d,Nh(d,y,null,p.onPush?64:16,v,f,C,C.createRenderer(v,p),null,null));d[f.index]=D}function ra(d,f,p,v,y,C){const D=Hs(d,f);!function yu(d,f,p,v,y,C,D){if(null==C)Qn(d)?d.removeAttribute(f,y,p):f.removeAttribute(y);else{const P=null==D?qe(C):D(C,v||"",y);Qn(d)?d.setAttribute(f,y,P,p):p?f.setAttributeNS(p,y,P):f.setAttribute(y,P)}}(f[11],D,C,d.value,p,v,y)}function Rm(d,f,p,v,y,C){const D=C[f];if(null!==D){const P=v.setInput;for(let F=0;F<D.length;){const B=D[F++],G=D[F++],Z=D[F++];null!==P?v.setInput(p,Z,B,G):p[G]=Z}}}function YC(d,f){let p=null,v=0;for(;v<f.length;){const y=f[v];if(0!==y)if(5!==y){if("number"==typeof y)break;d.hasOwnProperty(y)&&(null===p&&(p=[]),p.push(y,d[y],f[v+1])),v+=2}else v+=2;else v+=4}return p}function Pm(d,f,p,v){return new Array(d,!0,!1,f,null,0,v,p,null,null)}function Cp(d,f){const p=fo(f,d);if(Ss(p)){const v=p[1];80&p[2]?Lo(v,p,v.template,p[8]):p[5]>0&&Rd(p)}}function Rd(d){for(let v=md(d);null!==v;v=dm(v))for(let y=10;y<v.length;y++){const C=v[y];if(1024&C[2]){const D=C[1];Lo(D,C,D.template,C[8])}else C[5]>0&&Rd(C)}const p=d[1].components;if(null!==p)for(let v=0;v<p.length;v++){const y=fo(p[v],d);Ss(y)&&y[5]>0&&Rd(y)}}function hy(d,f){const p=fo(f,d),v=p[1];(function Lb(d,f){for(let p=f.length;p<d.blueprint.length;p++)f.push(d.blueprint[p])})(v,p),Bh(v,p,p[8])}function Sp(d,f){return d[13]?d[14][4]=f:d[13]=f,d[14]=f,f}function zh(d){for(;d;){d[2]|=64;const f=su(d);if(n_(d)&&!f)return d;d=f}return null}function bo(d,f,p){const v=f[10];v.begin&&v.begin();try{Lo(d,f,d.template,p)}catch(y){throw sa(f,y),y}finally{v.end&&v.end()}}function Fm(d){!function Om(d){for(let f=0;f<d.components.length;f++){const p=d.components[f],v=k_(p),y=v[1];mu(y,v,y.template,p)}}(d[8])}function bu(d,f,p){Rg(0),f(d,p)}const Gr=(()=>Promise.resolve(null))();function Lm(d){return d[7]||(d[7]=[])}function Nm(d){return d.cleanup||(d.cleanup=[])}function wu(d,f,p){return(null===d||Wa(d))&&(p=function MC(d){for(;Array.isArray(d);){if("object"==typeof d[1])return d;d=d[0]}return null}(p[f.index])),p[11]}function sa(d,f){const p=d[9],v=p?p.get(fd,null):null;v&&v.handleError(f)}function Bm(d,f,p,v,y){for(let C=0;C<p.length;){const D=p[C++],P=p[C++],F=f[D],B=d.data[D];null!==B.setInput?B.setInput(F,y,v,P):F[P]=y}}function Xs(d,f,p){const v=Zu(f,d);!function sp(d,f,p){Qn(d)?d.setValue(f,p):f.textContent=p}(d[11],v,p)}function ka(d,f,p){let v=p?d.styles:null,y=p?d.classes:null,C=0;if(null!==f)for(let D=0;D<f.length;D++){const P=f[D];"number"==typeof P?C=P:1==C?y=Me(y,P):2==C&&(v=Me(v,P+": "+f[++D]+";"))}p?d.styles=v:d.stylesWithoutHost=v,p?d.classes=y:d.classesWithoutHost=y}const xu=new yr("INJECTOR",-1);class Mp{get(f,p=Wc){if(p===Wc){const v=new Error(`NullInjectorError: No provider for ${We(f)}!`);throw v.name="NullInjectorError",v}return p}}const Ep=new yr("Set Injector scope."),oa={},Dp={};let jh;function Oa(){return void 0===jh&&(jh=new Mp),jh}function vy(d,f=null,p=null,v){const y=Vb(d,f,p,v);return y._resolveInjectorDefTypes(),y}function Vb(d,f=null,p=null,v){return new Vm(d,p,f||Oa(),v)}class Vm{constructor(f,p,v,y=null){this.parent=v,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const C=[];p&&Ma(p,P=>this.processProvider(P,f,p)),Ma([f],P=>this.processInjectorType(P,[],C)),this.records.set(xu,Od(void 0,this));const D=this.records.get(Ep);this.scope=null!=D?D.value:null,this.source=y||("object"==typeof f?null:We(f))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(f=>f.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(f,p=Wc,v=jt.Default){this.assertNotDestroyed();const y=Wf(this),C=ji(void 0);try{if(!(v&jt.SkipSelf)){let P=this.records.get(f);if(void 0===P){const F=function nc(d){return"function"==typeof d||"object"==typeof d&&d instanceof yr}(f)&&Mr(f);P=F&&this.injectableDefInScope(F)?Od(Fa(f),oa):null,this.records.set(f,P)}if(null!=P)return this.hydrate(f,P)}return(v&jt.Self?Oa():this.parent).get(f,p=v&jt.Optional&&p===Wc?null:p)}catch(D){if("NullInjectorError"===D.name){if((D[qc]=D[qc]||[]).unshift(We(f)),y)throw D;return function sd(d,f,p,v){const y=d[qc];throw f[zf]&&y.unshift(f[zf]),d.message=function gh(d,f,p,v=null){d=d&&"\n"===d.charAt(0)&&"\u0275"==d.charAt(1)?d.substr(2):d;let y=We(f);if(Array.isArray(f))y=f.map(We).join(" -> ");else if("object"==typeof f){let C=[];for(let D in f)if(f.hasOwnProperty(D)){let P=f[D];C.push(D+":"+("string"==typeof P?JSON.stringify(P):We(P)))}y=`{${C.join(", ")}}`}return`${p}${v?"("+v+")":""}[${y}]: ${d.replace(Gf,"\n  ")}`}("\n"+d.message,y,p,v),d.ngTokenPath=y,d[qc]=null,d}(D,f,"R3InjectorError",this.source)}throw D}finally{ji(C),Wf(y)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(f=>this.get(f))}toString(){const f=[];return this.records.forEach((v,y)=>f.push(We(y))),`R3Injector[${f.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Be(205,!1)}processInjectorType(f,p,v){if(!(f=le(f)))return!1;let y=Xd(f);const C=null==y&&f.ngModule||void 0,D=void 0===C?f:C,P=-1!==v.indexOf(D);if(void 0!==C&&(y=Xd(C)),null==y)return!1;if(null!=y.imports&&!P){let G;v.push(D);try{Ma(y.imports,Z=>{this.processInjectorType(Z,p,v)&&(void 0===G&&(G=[]),G.push(Z))})}finally{}if(void 0!==G)for(let Z=0;Z<G.length;Z++){const{ngModule:se,providers:ge}=G[Z];Ma(ge,Oe=>this.processProvider(Oe,se,ge||_n))}}this.injectorDefTypes.add(D);const F=Pc(D)||(()=>new D);this.records.set(D,Od(F,oa));const B=y.providers;if(null!=B&&!P){const G=f;Ma(B,Z=>this.processProvider(Z,G,B))}return void 0!==C&&void 0!==f.providers}processProvider(f,p,v){let y=Fd(f=le(f))?f:le(f&&f.provide);const C=function Ub(d,f,p){return Rr(d)?Od(void 0,d.useValue):Od(_y(d),oa)}(f);if(Fd(f)||!0!==f.multi)this.records.get(y);else{let D=this.records.get(y);D||(D=Od(void 0,oa,!0),D.factory=()=>qf(D.multi),this.records.set(y,D)),y=f,D.multi.push(f)}this.records.set(y,C)}hydrate(f,p){return p.value===oa&&(p.value=Dp,p.value=p.factory()),"object"==typeof p.value&&p.value&&function wo(d){return null!==d&&"object"==typeof d&&"function"==typeof d.ngOnDestroy}(p.value)&&this.onDestroy.add(p.value),p.value}injectableDefInScope(f){if(!f.providedIn)return!1;const p=le(f.providedIn);return"string"==typeof p?"any"===p||p===this.scope:this.injectorDefTypes.has(p)}}function Fa(d){const f=Mr(d),p=null!==f?f.factory:Pc(d);if(null!==p)return p;if(d instanceof yr)throw new Be(204,!1);if(d instanceof Function)return function kd(d){const f=d.length;if(f>0)throw dh(f,"?"),new Be(204,!1);const p=function Cf(d){const f=d&&(d[zu]||d[ai]);if(f){const p=function zi(d){if(d.hasOwnProperty("name"))return d.name;const f=(""+d).match(/^function\s*([^\s(]+)/);return null===f?"":f[1]}(d);return console.warn(`DEPRECATED: DI is instantiating a token "${p}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${p}" class.`),f}return null}(d);return null!==p?()=>p.factory(d):()=>new d}(d);throw new Be(204,!1)}function _y(d,f,p){let v;if(Fd(d)){const y=le(d);return Pc(y)||Fa(y)}if(Rr(d))v=()=>le(d.useValue);else if(function Gb(d){return!(!d||!d.useFactory)}(d))v=()=>d.useFactory(...qf(d.deps||[]));else if(function il(d){return!(!d||!d.useExisting)}(d))v=()=>Br(le(d.useExisting));else{const y=le(d&&(d.useClass||d.provide));if(!function $C(d){return!!d.deps}(d))return Pc(y)||Fa(y);v=()=>new y(...qf(d.deps))}return v}function Od(d,f,p=!1){return{factory:d,value:f,multi:p?[]:void 0}}function Rr(d){return null!==d&&"object"==typeof d&&jf in d}function Fd(d){return"function"==typeof d}let ei=(()=>{class d{static create(p,v){var y;if(Array.isArray(p))return vy({name:""},v,p,"");{const C=null!==(y=p.name)&&void 0!==y?y:"";return vy({name:C},p.parent,p.providers,C)}}}return d.THROW_IF_NOT_FOUND=Wc,d.NULL=new Mp,d.\u0275prov=nn({token:d,providedIn:"any",factory:()=>Br(xu)}),d.__NG_ELEMENT_ID__=-1,d})();function Ps(d,f){If(k_(d)[1],Ji())}function Ui(d){let f=function qb(d){return Object.getPrototypeOf(d.prototype).constructor}(d.type),p=!0;const v=[d];for(;f;){let y;if(Wa(d))y=f.\u0275cmp||f.\u0275dir;else{if(f.\u0275cmp)throw new Be(903,"");y=f.\u0275dir}if(y){if(p){v.push(y);const D=d;D.inputs=Ml(d.inputs),D.declaredInputs=Ml(d.declaredInputs),D.outputs=Ml(d.outputs);const P=y.hostBindings;P&&by(d,P);const F=y.viewQuery,B=y.contentQueries;if(F&&Gm(d,F),B&&Ap(d,B),_e(d.inputs,y.inputs),_e(d.declaredInputs,y.declaredInputs),_e(d.outputs,y.outputs),Wa(y)&&y.data.animation){const G=d.data;G.animation=(G.animation||[]).concat(y.data.animation)}}const C=y.features;if(C)for(let D=0;D<C.length;D++){const P=C[D];P&&P.ngInherit&&P(d),P===Ui&&(p=!1)}}f=Object.getPrototypeOf(f)}!function Yh(d){let f=0,p=null;for(let v=d.length-1;v>=0;v--){const y=d[v];y.hostVars=f+=y.hostVars,y.hostAttrs=Ya(y.hostAttrs,p=Ya(p,y.hostAttrs))}}(v)}function Ml(d){return d===Wi?{}:d===_n?[]:d}function Gm(d,f){const p=d.viewQuery;d.viewQuery=p?(v,y)=>{f(v,y),p(v,y)}:f}function Ap(d,f){const p=d.contentQueries;d.contentQueries=p?(v,y,C)=>{f(v,y,C),p(v,y,C)}:f}function by(d,f){const p=d.hostBindings;d.hostBindings=p?(v,y)=>{f(v,y),p(v,y)}:f}let El=null;function oc(){if(!El){const d=Zn.Symbol;if(d&&d.iterator)El=d.iterator;else{const f=Object.getOwnPropertyNames(Map.prototype);for(let p=0;p<f.length;++p){const v=f[p];"entries"!==v&&"size"!==v&&Map.prototype[v]===Map.prototype.entries&&(El=v)}}}return El}function Ip(d){return!!Rp(d)&&(Array.isArray(d)||!(d instanceof Map)&&oc()in d)}function Rp(d){return null!==d&&("function"==typeof d||"object"==typeof d)}function aa(d,f,p){return d[f]=p}function ds(d,f,p){return!Object.is(d[f],p)&&(d[f]=p,!0)}function Au(d,f,p,v){const y=ds(d,f,p);return ds(d,f+1,v)||y}function Tu(d,f,p,v){const y=He();return ds(y,pl(),f)&&(Xn(),ra(hr(),y,d,f,p,v)),Tu}function lc(d,f,p,v){return ds(d,pl(),p)?f+qe(p)+v:dn}function Uo(d,f,p,v,y,C){const P=Au(d,function Ws(){return bn.lFrame.bindingIndex}(),p,y);return qa(2),P?f+qe(p)+v+qe(y)+C:dn}function ar(d,f,p,v,y,C,D,P){const F=He(),B=Xn(),G=d+20,Z=B.firstCreatePass?function wr(d,f,p,v,y,C,D,P,F){const B=f.consts,G=tl(f,d,4,D||null,Ul(B,P));_u(f,p,G,Ul(B,F)),If(f,G);const Z=G.tViews=yp(2,G,v,y,C,f.directiveRegistry,f.pipeRegistry,null,f.schemas,B);return null!==f.queries&&(f.queries.template(f,G),Z.queries=f.queries.embeddedTView(G)),G}(G,B,F,f,p,v,y,C,D):B.data[G];xa(Z,!1);const se=F[11].createComment("");Ih(B,F,se,Z),Ar(se,F),Sp(F,F[G]=Pm(se,F,se,Z)),ih(Z)&&Ad(B,F,Z),null!=D&&Sl(F,Z,P)}function pr(d){return dl(function Tg(){return bn.lFrame.contextLView}(),20+d)}function Op(d,f=jt.Default){const p=He();return null===p?Br(d,f):Sa(Ji(),p,le(d),f)}function XC(){throw new Error("invalid")}function Sy(d,f,p){const v=He();return ds(v,pl(),f)&&Is(Xn(),hr(),v,d,f,v[11],p,!1),Sy}function Kb(d,f,p,v,y){const D=y?"class":"style";Bm(d,p,f.inputs[D],D,v)}function My(d,f,p,v){const y=He(),C=Xn(),D=20+d,P=y[11],F=y[D]=fm(P,f,function xD(){return bn.lFrame.currentNamespace}()),B=C.firstCreatePass?function $R(d,f,p,v,y,C,D){const P=f.consts,B=tl(f,d,2,y,Ul(P,C));return _u(f,p,B,Ul(P,D)),null!==B.attrs&&ka(B,B.attrs,!1),null!==B.mergedAttrs&&ka(B,B.mergedAttrs,!0),null!==f.queries&&f.queries.elementStart(f,B),B}(D,C,y,0,f,p,v):C.data[D];xa(B,!0);const G=B.mergedAttrs;null!==G&&os(P,F,G);const Z=B.classes;null!==Z&&up(P,F,Z);const se=B.styles;null!==se&&lu(P,F,se),64!=(64&B.flags)&&Ih(C,y,F,B),0===function m_(){return bn.lFrame.elementDepthCount}()&&Ar(F,y),function v_(){bn.lFrame.elementDepthCount++}(),ih(B)&&(Ad(C,y,B),ec(C,B,y)),null!==v&&Sl(y,B)}function Ey(){let d=Ji();Ag()?w_():(d=d.parent,xa(d,!1));const f=d;!function EC(){bn.lFrame.elementDepthCount--}();const p=Xn();p.firstCreatePass&&(If(p,d),$u(d)&&p.queries.elementEnd(d)),null!=f.classesWithoutHost&&function eb(d){return 0!=(16&d.flags)}(f)&&Kb(p,f,He(),f.classesWithoutHost,!0),null!=f.stylesWithoutHost&&function tb(d){return 0!=(32&d.flags)}(f)&&Kb(p,f,He(),f.stylesWithoutHost,!1)}function eS(d,f,p,v){My(d,f,p,v),Ey()}function tS(d,f,p){const v=He(),y=Xn(),C=d+20,D=y.firstCreatePass?function FD(d,f,p,v,y){const C=f.consts,D=Ul(C,v),P=tl(f,d,8,"ng-container",D);return null!==D&&ka(P,D,!0),_u(f,p,P,Ul(C,y)),null!==f.queries&&f.queries.elementStart(f,P),P}(C,y,v,f,p):y.data[C];xa(D,!0);const P=v[C]=v[11].createComment("");Ih(y,v,P,D),Ar(P,v),ih(D)&&(Ad(y,v,D),ec(y,D,v)),null!=p&&Sl(v,D)}function nS(){let d=Ji();const f=Xn();Ag()?w_():(d=d.parent,xa(d,!1)),f.firstCreatePass&&(If(f,d),$u(d)&&f.queries.elementEnd(d))}function LD(d,f,p){tS(d,f,p),nS()}function iS(){return He()}function Ym(d){return!!d&&"function"==typeof d.then}function $m(d){return!!d&&"function"==typeof d.subscribe}const Jb=$m;function Qb(d,f,p,v){const y=He(),C=Xn(),D=Ji();return ND(C,y,y[11],D,d,f,!!p,v),Qb}function rS(d,f){const p=Ji(),v=He(),y=Xn();return ND(y,v,wu(Fc(y.data),p,v),p,d,f,!1),rS}function ND(d,f,p,v,y,C,D,P){const F=ih(v),G=d.firstCreatePass&&Nm(d),Z=f[8],se=Lm(f);let ge=!0;if(3&v.type||P){const wt=Hs(v,f),qt=P?P(wt):wt,Ye=se.length,ln=P?si=>P(Ii(si[v.index])):v.index;if(Qn(p)){let si=null;if(!P&&F&&(si=function ZR(d,f,p,v){const y=d.cleanup;if(null!=y)for(let C=0;C<y.length-1;C+=2){const D=y[C];if(D===p&&y[C+1]===v){const P=f[7],F=y[C+2];return P.length>F?P[F]:null}"string"==typeof D&&(C+=2)}return null}(d,f,y,v.index)),null!==si)(si.__ngLastListenerFn__||si).__ngNextListenerFn__=C,si.__ngLastListenerFn__=C,ge=!1;else{C=sS(v,f,Z,C,!1);const Fi=p.listen(qt,y,C);se.push(C,Fi),G&&G.push(y,ln,Ye,Ye+1)}}else C=sS(v,f,Z,C,!0),qt.addEventListener(y,C,D),se.push(C),G&&G.push(y,ln,Ye,D)}else C=sS(v,f,Z,C,!1);const Oe=v.outputs;let ft;if(ge&&null!==Oe&&(ft=Oe[y])){const wt=ft.length;if(wt)for(let qt=0;qt<wt;qt+=2){const Ba=f[ft[qt]][ft[qt+1]].subscribe(C),Yp=se.length;se.push(C,Ba),G&&G.push(y,v.index,Yp,-(Yp+1))}}}function BD(d,f,p,v){try{return!1!==p(v)}catch(y){return sa(d,y),!1}}function sS(d,f,p,v,y){return function C(D){if(D===Function)return v;const P=2&d.flags?fo(d.index,f):f;0==(32&f[2])&&zh(P);let F=BD(f,0,v,D),B=C.__ngNextListenerFn__;for(;B;)F=BD(f,0,B,D)&&F,B=B.__ngNextListenerFn__;return y&&!1===F&&(D.preventDefault(),D.returnValue=!1),F}}function Zm(d=1){return function gl(d){return(bn.lFrame.contextLView=function K0(d,f){for(;d>0;)f=f[15],d--;return f}(d,bn.lFrame.contextLView))[8]}(d)}function Km(d,f){let p=null;const v=function Ks(d){const f=d.attrs;if(null!=f){const p=f.indexOf(5);if(0==(1&p))return f[p+1]}return null}(d);for(let y=0;y<f.length;y++){const C=f[y];if("*"!==C){if(null===v?uu(d,C,!0):br(v,C))return y}else p=y}return p}function Dy(d){const f=He()[16][6];if(!f.projection){const v=f.projection=dh(d?d.length:1,null),y=v.slice();let C=f.child;for(;null!==C;){const D=d?Km(C,d):0;null!==D&&(y[D]?y[D].projectionNext=C:v[D]=C,y[D]=C),C=C.next}}}function Jm(d,f=0,p){const v=He(),y=Xn(),C=tl(y,20+d,16,null,p||null);null===C.projection&&(C.projection=f),w_(),64!=(64&C.flags)&&function _t(d,f,p){mm(f[11],0,f,p,ap(d,p,f),Ab(p.parent||f[6],p,f))}(y,v,C)}function Ay(d,f,p){return Xb(d,"",f,"",p),Ay}function Xb(d,f,p,v,y){const C=He(),D=lc(C,f,p,v);return D!==dn&&Is(Xn(),hr(),C,d,D,C[11],y,!1),Xb}function aS(d,f,p,v,y){const C=d[p+1],D=null===f;let P=v?Ir(C):_o(C),F=!1;for(;0!==P&&(!1===F||D);){const G=d[P+1];JR(d[P],f)&&(F=!0,d[P+1]=v?hp(G):dp(G)),P=v?Ir(G):_o(G)}F&&(d[p+1]=v?dp(C):hp(C))}function JR(d,f){return null===d||null==f||(Array.isArray(d)?d[1]:d)===f||!(!Array.isArray(d)||"string"!=typeof f)&&jc(d,f)>=0}function cS(d,f,p){return fc(d,f,p,!1),cS}function uS(d,f){return fc(d,f,null,!0),uS}function fc(d,f,p,v){const y=He(),C=Xn(),D=qa(2);C.firstUpdatePass&&function fS(d,f,p,v){const y=d.data;if(null===y[p+1]){const C=y[qs()],D=function hS(d,f){return f>=d.expandoStartIndex}(d,p);(function QD(d,f){return 0!=(d.flags&(f?16:32))})(C,v)&&null===f&&!D&&(f=!1),f=function $D(d,f,p,v){const y=Fc(d);let C=v?f.residualClasses:f.residualStyles;if(null===y)0===(v?f.classBindings:f.styleBindings)&&(p=Bp(p=pS(null,d,f,p,v),f.attrs,v),C=null);else{const D=f.directiveStylingLast;if(-1===D||d[D]!==y)if(p=pS(y,d,f,p,v),null===C){let F=function tP(d,f,p){const v=p?f.classBindings:f.styleBindings;if(0!==_o(v))return d[Ir(v)]}(d,f,v);void 0!==F&&Array.isArray(F)&&(F=pS(null,d,f,F[1],v),F=Bp(F,f.attrs,v),function nP(d,f,p,v){d[Ir(p?f.classBindings:f.styleBindings)]=v}(d,f,v,F))}else C=function iP(d,f,p){let v;const y=f.directiveEnd;for(let C=1+f.directiveStylingLast;C<y;C++)v=Bp(v,d[C].hostAttrs,p);return Bp(v,f.attrs,p)}(d,f,v)}return void 0!==C&&(v?f.residualClasses=C:f.residualStyles=C),p}(y,C,f,v),function Qm(d,f,p,v,y,C){let D=C?f.classBindings:f.styleBindings,P=Ir(D),F=_o(D);d[v]=p;let G,B=!1;if(Array.isArray(p)){const Z=p;G=Z[1],(null===G||jc(Z,G)>0)&&(B=!0)}else G=p;if(y)if(0!==F){const se=Ir(d[P+1]);d[v+1]=el(se,P),0!==se&&(d[se+1]=hu(d[se+1],v)),d[P+1]=function xd(d,f){return 131071&d|f<<17}(d[P+1],v)}else d[v+1]=el(P,0),0!==P&&(d[P+1]=hu(d[P+1],v)),P=v;else d[v+1]=el(F,0),0===P?P=v:d[F+1]=hu(d[F+1],v),F=v;B&&(d[v+1]=dp(d[v+1])),aS(d,G,v,!0),aS(d,G,v,!1),function HD(d,f,p,v,y){const C=y?d.residualClasses:d.residualStyles;null!=C&&"string"==typeof f&&jc(C,f)>=0&&(p[v+1]=hp(p[v+1]))}(f,G,d,v,C),D=el(P,F),C?f.classBindings=D:f.styleBindings=D}(y,C,f,p,D,v)}}(C,d,D,v),f!==dn&&ds(y,D,f)&&function gS(d,f,p,v,y,C,D,P){if(!(3&f.type))return;const F=d.data,B=F[P+1];rw(function Ph(d){return 1==(1&d)}(B)?JD(F,f,p,y,_o(B),D):void 0)||(rw(C)||function Rh(d){return 2==(2&d)}(B)&&(C=JD(F,null,p,y,P,D)),function Kn(d,f,p,v,y){const C=Qn(d);if(f)y?C?d.addClass(p,v):p.classList.add(v):C?d.removeClass(p,v):p.classList.remove(v);else{let D=-1===v.indexOf("-")?void 0:ta.DashCase;if(null==y)C?d.removeStyle(p,v,D):p.style.removeProperty(v);else{const P="string"==typeof y&&y.endsWith("!important");P&&(y=y.slice(0,-10),D|=ta.Important),C?d.setStyle(p,v,y,D):p.style.setProperty(v,y,P?"important":"")}}}(v,D,Zu(qs(),p),y,C))}(C,C.data[qs()],y,y[11],d,y[D+1]=function sP(d,f){return null==d||("string"==typeof f?d+=f:"object"==typeof d&&(d=We($s(d)))),d}(f,p),v,D)}function pS(d,f,p,v,y){let C=null;const D=p.directiveEnd;let P=p.directiveStylingLast;for(-1===P?P=p.directiveStart:P++;P<D&&(C=f[P],v=Bp(v,C.hostAttrs,y),C!==d);)P++;return null!==d&&(p.directiveStylingLast=P),v}function Bp(d,f,p){const v=p?1:2;let y=-1;if(null!==f)for(let C=0;C<f.length;C++){const D=f[C];"number"==typeof D?y=D:y===v&&(Array.isArray(d)||(d=void 0===d?[]:["",d]),as(d,D,!!p||f[++C]))}return void 0===d?null:d}function JD(d,f,p,v,y,C){const D=null===f;let P;for(;y>0;){const F=d[y],B=Array.isArray(F),G=B?F[1]:F,Z=null===G;let se=p[y+1];se===dn&&(se=Z?_n:void 0);let ge=Z?hh(se,v):G===v?se:void 0;if(B&&!rw(ge)&&(ge=hh(F,v)),rw(ge)&&(P=ge,D))return P;const Oe=d[y+1];y=D?Ir(Oe):_o(Oe)}if(null!==f){let F=C?f.residualClasses:f.residualStyles;null!=F&&(P=hh(F,v))}return P}function rw(d){return void 0!==d}function sw(d,f=""){const p=He(),v=Xn(),y=d+20,C=v.firstCreatePass?tl(v,y,1,f,null):v.data[y],D=p[y]=function hm(d,f){return Qn(d)?d.createText(f):d.createTextNode(f)}(p[11],f);Ih(v,p,D,C),xa(C,!1)}function Iy(d){return Bd("",d,""),Iy}function Bd(d,f,p){const v=He(),y=lc(v,d,f,p);return y!==dn&&Xs(v,qs(),y),Bd}function ow(d,f,p,v,y){const C=He(),D=Uo(C,d,f,p,v,y);return D!==dn&&Xs(C,qs(),D),ow}function hw(d,f,p){const v=He();return ds(v,pl(),f)&&Is(Xn(),hr(),v,d,f,v[11],p,!0),hw}function Py(d,f,p){const v=He();if(ds(v,pl(),f)){const C=Xn(),D=hr();Is(C,D,v,d,f,wu(Fc(C.data),D,v),p,!0)}return Py}const Rl=void 0;var hA=["en",[["a","p"],["AM","PM"],Rl],[["AM","PM"],Rl,Rl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Rl,"{1} 'at' {0}",Rl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function dA(d){const p=Math.floor(Math.abs(d)),v=d.toString().replace(/^[^.]*\.?/,"").length;return 1===p&&0===v?1:5}];let Xm={};function fw(d){const f=function mP(d){return d.toLowerCase().replace(/_/g,"-")}(d);let p=fA(f);if(p)return p;const v=f.split("-")[0];if(p=fA(v),p)return p;if("en"===v)return hA;throw new Error(`Missing locale data for the locale "${d}".`)}function CS(d){return fw(d)[gn.PluralCase]}function fA(d){return d in Xm||(Xm[d]=Zn.ng&&Zn.ng.common&&Zn.ng.common.locales&&Zn.ng.common.locales[d]),Xm[d]}var gn=(()=>((gn=gn||{})[gn.LocaleId=0]="LocaleId",gn[gn.DayPeriodsFormat=1]="DayPeriodsFormat",gn[gn.DayPeriodsStandalone=2]="DayPeriodsStandalone",gn[gn.DaysFormat=3]="DaysFormat",gn[gn.DaysStandalone=4]="DaysStandalone",gn[gn.MonthsFormat=5]="MonthsFormat",gn[gn.MonthsStandalone=6]="MonthsStandalone",gn[gn.Eras=7]="Eras",gn[gn.FirstDayOfWeek=8]="FirstDayOfWeek",gn[gn.WeekendRange=9]="WeekendRange",gn[gn.DateFormat=10]="DateFormat",gn[gn.TimeFormat=11]="TimeFormat",gn[gn.DateTimeFormat=12]="DateTimeFormat",gn[gn.NumberSymbols=13]="NumberSymbols",gn[gn.NumberFormats=14]="NumberFormats",gn[gn.CurrencyCode=15]="CurrencyCode",gn[gn.CurrencySymbol=16]="CurrencySymbol",gn[gn.CurrencyName=17]="CurrencyName",gn[gn.Currencies=18]="Currencies",gn[gn.Directionality=19]="Directionality",gn[gn.PluralCase=20]="PluralCase",gn[gn.ExtraData=21]="ExtraData",gn))();const ky="en-US";let ES=ky;function jS(d,f,p,v,y){if(d=le(d),Array.isArray(d))for(let C=0;C<d.length;C++)jS(d[C],f,p,v,y);else{const C=Xn(),D=He();let P=Fd(d)?d:le(d.provide),F=_y(d);const B=Ji(),G=1048575&B.providerIndexes,Z=B.directiveStart,se=B.providerIndexes>>20;if(Fd(d)||!d.multi){const ge=new Rf(F,y,Op),Oe=WS(P,f,y?G:G+se,Z);-1===Oe?(Pf(vl(B,D),C,P),bw(C,d,f.length),f.push(P),B.directiveStart++,B.directiveEnd++,y&&(B.providerIndexes+=1048576),p.push(ge),D.push(ge)):(p[Oe]=ge,D[Oe]=ge)}else{const ge=WS(P,f,G+se,Z),Oe=WS(P,f,G,G+se),ft=ge>=0&&p[ge],wt=Oe>=0&&p[Oe];if(y&&!wt||!y&&!ft){Pf(vl(B,D),C,P);const qt=function Gp(d,f,p,v,y){const C=new Rf(d,p,Op);return C.multi=[],C.index=f,C.componentProviders=0,Gy(C,y,v&&!p),C}(y?OA:kA,p.length,y,v,F);!y&&wt&&(p[Oe].providerFactory=qt),bw(C,d,f.length,0),f.push(P),B.directiveStart++,B.directiveEnd++,y&&(B.providerIndexes+=1048576),p.push(qt),D.push(qt)}else bw(C,d,ge>-1?ge:Oe,Gy(p[y?Oe:ge],F,!y&&v));!y&&v&&wt&&p[Oe].componentProviders++}}}function bw(d,f,p,v){const y=Fd(f),C=function tc(d){return!!d.useClass}(f);if(y||C){const F=(C?le(f.useClass):f).prototype.ngOnDestroy;if(F){const B=d.destroyHooks||(d.destroyHooks=[]);if(!y&&f.multi){const G=B.indexOf(p);-1===G?B.push(p,[v,F]):B[G+1].push(v,F)}else B.push(p,F)}}}function Gy(d,f,p){return p&&d.componentProviders++,d.multi.push(f)-1}function WS(d,f,p,v){for(let y=p;y<v;y++)if(f[y]===d)return y;return-1}function kA(d,f,p,v){return rv(this.multi,[])}function OA(d,f,p,v){const y=this.multi;let C;if(this.providerFactory){const D=this.providerFactory.componentProviders,P=Tt(p,p[1],this.providerFactory.index,v);C=P.slice(0,D),rv(y,C);for(let F=D;F<P.length;F++)C.push(P[F])}else C=[],rv(y,C);return C}function rv(d,f){for(let p=0;p<d.length;p++)f.push((0,d[p])());return f}function Go(d,f=[]){return p=>{p.providersResolver=(v,y)=>function PA(d,f,p){const v=Xn();if(v.firstCreatePass){const y=Wa(d);jS(p,v.data,v.blueprint,y,!0),jS(f,v.data,v.blueprint,y,!1)}}(v,y?y(d):d,f)}}class qS{}class TP{resolveComponentFactory(f){throw function Hy(d){const f=Error(`No component factory found for ${We(d)}. Did you add it to @NgModule.entryComponents?`);return f.ngComponent=d,f}(f)}}let Hp=(()=>{class d{}return d.NULL=new TP,d})();function xw(){return Pl(Ji(),He())}function Pl(d,f){return new zy(Hs(d,f))}let zy=(()=>{class d{constructor(p){this.nativeElement=p}}return d.__NG_ELEMENT_ID__=xw,d})();function IP(d){return d instanceof zy?d.nativeElement:d}class RP{}let PP=(()=>{class d{}return d.__NG_ELEMENT_ID__=()=>function OP(){const d=He(),p=fo(Ji().index,d);return function kP(d){return d[11]}(Lr(p)?p:d)}(),d})(),yt=(()=>{class d{}return d.\u0275prov=nn({token:d,providedIn:"root",factory:()=>null}),d})();class mc{constructor(f){this.full=f,this.major=f.split(".")[0],this.minor=f.split(".")[1],this.patch=f.split(".").slice(2).join(".")}}const Hd=new mc("13.2.1"),lr={};function Cw(d,f,p,v,y=!1){for(;null!==p;){const C=f[p.index];if(null!==C&&v.push(Ii(C)),wa(C))for(let P=10;P<C.length;P++){const F=C[P],B=F[1].firstChild;null!==B&&Cw(F[1],F,B,v)}const D=p.type;if(8&D)Cw(d,f,p.child,v);else if(32&D){const P=ru(p,f);let F;for(;F=P();)v.push(F)}else if(16&D){const P=Tr(f,p);if(Array.isArray(P))v.push(...P);else{const F=su(f[16]);Cw(F[1],F,P,v,!0)}}p=y?p.projectionNext:p.next}return v}class jy{constructor(f,p){this._lView=f,this._cdRefInjectingView=p,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const f=this._lView,p=f[1];return Cw(p,f,p.firstChild,[])}get context(){return this._lView[8]}set context(f){this._lView[8]=f}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const f=this._lView[3];if(wa(f)){const p=f[8],v=p?p.indexOf(this):-1;v>-1&&(pm(f,v),Vg(p,v))}this._attachedToViewContainer=!1}W_(this._lView[1],this._lView)}onDestroy(f){Td(this._lView[1],this._lView,null,f)}markForCheck(){zh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){bo(this._lView[1],this._lView,this.context)}checkNoChanges(){!function fy(d,f,p){Af(!0);try{bo(d,f,p)}finally{Af(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Be(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Cb(d,f){an(d,f,f[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(f){if(this._attachedToViewContainer)throw new Be(902,"");this._appRef=f}}class LA extends jy{constructor(f){super(f),this._view=f}detectChanges(){Fm(this._view)}checkNoChanges(){!function Pd(d){Af(!0);try{Fm(d)}finally{Af(!1)}}(this._view)}get context(){return null}}class ov extends Hp{constructor(f){super(),this.ngModule=f}resolveComponentFactory(f){const p=ws(f);return new Mw(p,this.ngModule)}}function NA(d){const f=[];for(let p in d)d.hasOwnProperty(p)&&f.push({propName:d[p],templateName:p});return f}const Oi=new yr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>U_});class Mw extends qS{constructor(f,p){super(),this.componentDef=f,this.ngModule=p,this.componentType=f.type,this.selector=function ym(d){return d.map(_m).join(",")}(f.selectors),this.ngContentSelectors=f.ngContentSelectors?f.ngContentSelectors:[],this.isBoundToModule=!!p}get inputs(){return NA(this.componentDef.inputs)}get outputs(){return NA(this.componentDef.outputs)}create(f,p,v,y){const C=(y=y||this.ngModule)?function BA(d,f){return{get:(p,v,y)=>{const C=d.get(p,lr,y);return C!==lr||v===lr?C:f.get(p,v,y)}}}(f,y.injector):f,D=C.get(RP,kc),P=C.get(yt,null),F=D.createRenderer(null,this.componentDef),B=this.componentDef.selectors[0][0]||"div",G=v?function Uh(d,f,p){if(Qn(d))return d.selectRootElement(f,p===Ai.ShadowDom);let v="string"==typeof f?d.querySelector(f):f;return v.textContent="",v}(F,v,this.componentDef.encapsulation):fm(D.createRenderer(null,this.componentDef),B,function Sw(d){const f=d.toLowerCase();return"svg"===f?"svg":"math"===f?"math":null}(B)),Z=this.componentDef.onPush?576:528,se=function Pn(d,f){return{components:[],scheduler:d||U_,clean:Gr,playerHandler:f||null,flags:0}}(),ge=yp(0,null,null,1,0,null,null,null,null,null),Oe=Nh(null,ge,se,Z,null,null,D,F,P,C);let ft,wt;Tf(Oe);try{const qt=function rc(d,f,p,v,y,C){const D=p[1];p[20]=d;const F=tl(D,20,2,"#host",null),B=F.mergedAttrs=f.hostAttrs;null!==B&&(ka(F,B,!0),null!==d&&(os(y,d,B),null!==F.classes&&up(y,d,F.classes),null!==F.styles&&lu(y,d,F.styles)));const G=v.createRenderer(d,f),Z=Nh(p,oy(f),null,f.onPush?64:16,p[20],F,v,G,C||null,null);return D.firstCreatePass&&(Pf(vl(F,p),D,f.type),nl(D,F),Fb(F,p.length,1)),Sp(p,Z),p[20]=Z}(G,this.componentDef,Oe,D,F);if(G)if(v)os(F,G,["ng-version",Hd.full]);else{const{attrs:Ye,classes:ln}=function du(d){const f=[],p=[];let v=1,y=2;for(;v<d.length;){let C=d[v];if("string"==typeof C)2===y?""!==C&&f.push(C,d[++v]):8===y&&p.push(C);else{if(!Ra(y))break;y=C}v++}return{attrs:f,classes:p}}(this.componentDef.selectors[0]);Ye&&os(F,G,Ye),ln&&ln.length>0&&up(F,G,ln.join(" "))}if(wt=Mf(ge,20),void 0!==p){const Ye=wt.projection=[];for(let ln=0;ln<this.ngContentSelectors.length;ln++){const si=p[ln];Ye.push(null!=si?Array.from(si):null)}}ft=function bi(d,f,p,v,y){const C=p[1],D=function li(d,f,p){const v=Ji();d.firstCreatePass&&(p.providersResolver&&p.providersResolver(p),ia(d,v,f,gu(d,f,1,null),p));const y=Tt(f,d,v.directiveStart,v);Ar(y,f);const C=Hs(v,f);return C&&Ar(C,f),y}(C,p,f);if(v.components.push(D),d[8]=D,y&&y.forEach(F=>F(D,f)),f.contentQueries){const F=Ji();f.contentQueries(1,D,F.directiveStart)}const P=Ji();return!C.firstCreatePass||null===f.hostBindings&&null===f.hostAttrs||(po(P.index),Hh(p[1],P,0,P.directiveStart,P.directiveEnd,f),cs(f,D)),D}(qt,this.componentDef,Oe,se,[Ps]),Bh(ge,Oe,null)}finally{Po()}return new Na(this.componentType,ft,Pl(wt,Oe),Oe,wt)}}class Na extends class FA{}{constructor(f,p,v,y,C){super(),this.location=v,this._rootLView=y,this._tNode=C,this.instance=p,this.hostView=this.changeDetectorRef=new LA(y),this.componentType=f}get injector(){return new _r(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(f){this.hostView.onDestroy(f)}}class nf{}class UA{}const zd=new Map;class BP extends nf{constructor(f,p){super(),this._parent=p,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ov(this);const v=ho(f);this._bootstrapComponents=ls(v.bootstrap),this._r3Injector=Vb(f,p,[{provide:nf,useValue:this},{provide:Hp,useValue:this.componentFactoryResolver}],We(f)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(f)}get(f,p=ei.THROW_IF_NOT_FOUND,v=jt.Default){return f===ei||f===nf||f===xu?this:this._r3Injector.get(f,p,v)}destroy(){const f=this._r3Injector;!f.destroyed&&f.destroy(),this.destroyCbs.forEach(p=>p()),this.destroyCbs=null}onDestroy(f){this.destroyCbs.push(f)}}class ZS extends UA{constructor(f){super(),this.moduleType=f,null!==ho(f)&&function GA(d){const f=new Set;!function p(v){const y=ho(v,!0),C=y.id;null!==C&&(function YS(d,f,p){if(f&&f!==p)throw new Error(`Duplicate module registered for ${d} - ${We(f)} vs ${We(f.name)}`)}(C,zd.get(C),v),zd.set(C,v));const D=ls(y.imports);for(const P of D)f.has(P)||(f.add(P),p(P))}(d)}(f)}create(f){return new BP(this.moduleType,f)}}function KS(d,f,p){const v=js()+d,y=He();return y[v]===dn?aa(y,v,p?f.call(p):f()):function $h(d,f){return d[f]}(y,v)}function HA(d,f,p,v){return qA(He(),js(),d,f,p,v)}function Dw(d,f,p,v,y){return Tw(He(),js(),d,f,p,v,y)}function lv(d,f){const p=d[f];return p===dn?void 0:p}function qA(d,f,p,v,y,C){const D=f+p;return ds(d,D,y)?aa(d,D+1,C?v.call(C,y):v(y)):lv(d,D+1)}function Tw(d,f,p,v,y,C,D){const P=f+p;return Au(d,P,y,C)?aa(d,P+2,D?v.call(D,y,C):v(y,C)):lv(d,P+2)}function Iw(d,f,p,v,y,C,D,P){const F=f+p;return function Vo(d,f,p,v,y){const C=Au(d,f,p,v);return ds(d,f+2,y)||C}(d,F,y,C,D)?aa(d,F+3,P?v.call(P,y,C,D):v(y,C,D)):lv(d,F+3)}function eM(d,f){const p=Xn();let v;const y=d+20;p.firstCreatePass?(v=function GP(d,f){if(f)for(let p=f.length-1;p>=0;p--){const v=f[p];if(d===v.name)return v}}(f,p.pipeRegistry),p.data[y]=v,v.onDestroy&&(p.destroyHooks||(p.destroyHooks=[])).push(y,v.onDestroy)):v=p.data[y];const C=v.factory||(v.factory=Pc(v.type)),D=ji(Op);try{const P=$i(!1),F=C();return $i(P),function $b(d,f,p,v){p>=d.data.length&&(d.data[p]=null,d.blueprint[p]=null),f[p]=v}(p,He(),y,F),F}finally{ji(D)}}function YA(d,f,p){const v=d+20,y=He(),C=dl(y,v);return Ki(y,v)?qA(y,js(),f,C.transform,p,C):C.transform(p)}function Ou(d,f,p,v){const y=d+20,C=He(),D=dl(C,y);return Ki(C,y)?Tw(C,js(),f,D.transform,p,v,D):D.transform(p,v)}function $A(d,f,p,v,y){const C=d+20,D=He(),P=dl(D,C);return Ki(D,C)?Iw(D,js(),f,P.transform,p,v,y,P):P.transform(p,v,y)}function Ki(d,f){return d[1].data[f].pure}function tM(d){return f=>{setTimeout(d,void 0,f)}}const Fu=class zP extends u.x{constructor(f=!1){super(),this.__isAsync=f}emit(f){super.next(f)}subscribe(f,p,v){var y,C,D;let P=f,F=p||(()=>null),B=v;if(f&&"object"==typeof f){const Z=f;P=null===(y=Z.next)||void 0===y?void 0:y.bind(Z),F=null===(C=Z.error)||void 0===C?void 0:C.bind(Z),B=null===(D=Z.complete)||void 0===D?void 0:D.bind(Z)}this.__isAsync&&(F=tM(F),P&&(P=tM(P)),B&&(B=tM(B)));const G=super.subscribe({next:P,error:F,complete:B});return f instanceof z.w0&&f.add(G),G}};function jP(){return this._results[oc()]()}class Wy{constructor(f=!1){this._emitDistinctChangesOnly=f,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const p=oc(),v=Wy.prototype;v[p]||(v[p]=jP)}get changes(){return this._changes||(this._changes=new Fu)}get(f){return this._results[f]}map(f){return this._results.map(f)}filter(f){return this._results.filter(f)}find(f){return this._results.find(f)}reduce(f,p){return this._results.reduce(f,p)}forEach(f){this._results.forEach(f)}some(f){return this._results.some(f)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(f,p){const v=this;v.dirty=!1;const y=ko(f);(this._changesDetected=!function Ng(d,f,p){if(d.length!==f.length)return!1;for(let v=0;v<d.length;v++){let y=d[v],C=f[v];if(p&&(y=p(y),C=p(C)),C!==y)return!1}return!0}(v._results,y,p))&&(v._results=y,v.length=y.length,v.last=y[this.length-1],v.first=y[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let qy=(()=>{class d{}return d.__NG_ELEMENT_ID__=nM,d})();const WP=qy,qP=class extends WP{constructor(f,p,v){super(),this._declarationLView=f,this._declarationTContainer=p,this.elementRef=v}createEmbeddedView(f){const p=this._declarationTContainer.tViews,v=Nh(this._declarationLView,p,f,16,null,p.declTNode,null,null,null,null);v[17]=this._declarationLView[this._declarationTContainer.index];const C=this._declarationLView[19];return null!==C&&(v[19]=C.createEmbeddedView(p)),Bh(p,v,f),new jy(v)}};function nM(){return Yy(Ji(),He())}function Yy(d,f){return 4&d.type?new qP(f,d,Pl(d,f)):null}let Rw=(()=>{class d{}return d.__NG_ELEMENT_ID__=ZA,d})();function ZA(){return rM(Ji(),He())}const YP=Rw,iM=class extends YP{constructor(f,p,v){super(),this._lContainer=f,this._hostTNode=p,this._hostLView=v}get element(){return Pl(this._hostTNode,this._hostLView)}get injector(){return new _r(this._hostTNode,this._hostLView)}get parentInjector(){const f=Ca(this._hostTNode,this._hostLView);if(ml(f)){const p=Un(f,this._hostLView),v=Qu(f);return new _r(p[1].data[v+8],p)}return new _r(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(f){const p=rf(this._lContainer);return null!==p&&p[f]||null}get length(){return this._lContainer.length-10}createEmbeddedView(f,p,v){const y=f.createEmbeddedView(p||{});return this.insert(y,v),y}createComponent(f,p,v,y,C){const D=f&&!function uh(d){return"function"==typeof d}(f);let P;if(D)P=p;else{const Z=p||{};P=Z.index,v=Z.injector,y=Z.projectableNodes,C=Z.ngModuleRef}const F=D?f:new Mw(ws(f)),B=v||this.parentInjector;if(!C&&null==F.ngModule&&B){const Z=B.get(nf,null);Z&&(C=Z)}const G=F.create(B,y,void 0,C);return this.insert(G.hostView,P),G}insert(f,p){const v=f._lView,y=v[1];if(function p_(d){return wa(d[3])}(v)){const G=this.indexOf(f);if(-1!==G)this.detach(G);else{const Z=v[3],se=new iM(Z,Z[6],Z[3]);se.detach(se.indexOf(f))}}const C=this._adjustIndex(p),D=this._lContainer;!function Mb(d,f,p,v){const y=10+v,C=p.length;v>0&&(p[y-1][4]=f),v<C-10?(f[4]=p[y],Bg(p,10+v,f)):(p.push(f),f[4]=null),f[3]=p;const D=f[17];null!==D&&p!==D&&function op(d,f){const p=d[9];f[16]!==f[3][3][16]&&(d[2]=!0),null===p?d[9]=[f]:p.push(f)}(D,f);const P=f[19];null!==P&&P.insertView(d),f[2]|=128}(y,v,D,C);const P=_d(C,D),F=v[11],B=cp(F,D[7]);return null!==B&&function xb(d,f,p,v,y,C){v[0]=y,v[6]=f,an(d,v,p,1,y,C)}(y,D[6],F,v,B,P),f.attachToViewContainerRef(),Bg(fs(D),C,f),f}move(f,p){return this.insert(f,p)}indexOf(f){const p=rf(this._lContainer);return null!==p?p.indexOf(f):-1}remove(f){const p=this._adjustIndex(f,-1),v=pm(this._lContainer,p);v&&(Vg(fs(this._lContainer),p),W_(v[1],v))}detach(f){const p=this._adjustIndex(f,-1),v=pm(this._lContainer,p);return v&&null!=Vg(fs(this._lContainer),p)?new jy(v):null}_adjustIndex(f,p=0){return null==f?this.length+p:f}};function rf(d){return d[8]}function fs(d){return d[8]||(d[8]=[])}function rM(d,f){let p;const v=f[d.index];if(wa(v))p=v;else{let y;if(8&d.type)y=Ii(v);else{const C=f[11];y=C.createComment("");const D=Hs(d,f);Kl(C,cp(C,D),y,function ri(d,f){return Qn(d)?d.nextSibling(f):f.nextSibling}(C,D),!1)}f[d.index]=p=Pm(v,f,y,d),Sp(f,p)}return new iM(p,d,f)}class $y{constructor(f){this.queryList=f,this.matches=null}clone(){return new $y(this.queryList)}setDirty(){this.queryList.setDirty()}}class sM{constructor(f=[]){this.queries=f}createEmbeddedView(f){const p=f.queries;if(null!==p){const v=null!==f.contentQueries?f.contentQueries[0]:p.length,y=[];for(let C=0;C<v;C++){const D=p.getByIndex(C);y.push(this.queries[D.indexInDeclarationView].clone())}return new sM(y)}return null}insertView(f){this.dirtyQueriesWithMatches(f)}detachView(f){this.dirtyQueriesWithMatches(f)}dirtyQueriesWithMatches(f){for(let p=0;p<this.queries.length;p++)null!==cM(f,p).matches&&this.queries[p].setDirty()}}class gs{constructor(f,p,v=null){this.predicate=f,this.flags=p,this.read=v}}class Pw{constructor(f=[]){this.queries=f}elementStart(f,p){for(let v=0;v<this.queries.length;v++)this.queries[v].elementStart(f,p)}elementEnd(f){for(let p=0;p<this.queries.length;p++)this.queries[p].elementEnd(f)}embeddedTView(f){let p=null;for(let v=0;v<this.length;v++){const y=null!==p?p.length:0,C=this.getByIndex(v).embeddedTView(f,y);C&&(C.indexInDeclarationView=v,null!==p?p.push(C):p=[C])}return null!==p?new Pw(p):null}template(f,p){for(let v=0;v<this.queries.length;v++)this.queries[v].template(f,p)}getByIndex(f){return this.queries[f]}get length(){return this.queries.length}track(f){this.queries.push(f)}}class vc{constructor(f,p=-1){this.metadata=f,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=p}elementStart(f,p){this.isApplyingToNode(p)&&this.matchTNode(f,p)}elementEnd(f){this._declarationNodeIndex===f.index&&(this._appliesToNextNode=!1)}template(f,p){this.elementStart(f,p)}embeddedTView(f,p){return this.isApplyingToNode(f)?(this.crossesNgTemplate=!0,this.addMatch(-f.index,p),new vc(this.metadata)):null}isApplyingToNode(f){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const p=this._declarationNodeIndex;let v=f.parent;for(;null!==v&&8&v.type&&v.index!==p;)v=v.parent;return p===(null!==v?v.index:-1)}return this._appliesToNextNode}matchTNode(f,p){const v=this.metadata.predicate;if(Array.isArray(v))for(let y=0;y<v.length;y++){const C=v[y];this.matchTNodeWithReadOption(f,p,oM(p,C)),this.matchTNodeWithReadOption(f,p,Of(p,f,C,!1,!1))}else v===qy?4&p.type&&this.matchTNodeWithReadOption(f,p,-1):this.matchTNodeWithReadOption(f,p,Of(p,f,v,!1,!1))}matchTNodeWithReadOption(f,p,v){if(null!==v){const y=this.metadata.read;if(null!==y)if(y===zy||y===Rw||y===qy&&4&p.type)this.addMatch(p.index,-2);else{const C=Of(p,f,y,!1,!1);null!==C&&this.addMatch(p.index,C)}else this.addMatch(p.index,v)}}addMatch(f,p){null===this.matches?this.matches=[f,p]:this.matches.push(f,p)}}function oM(d,f){const p=d.localNames;if(null!==p)for(let v=0;v<p.length;v+=2)if(p[v]===f)return p[v+1];return null}function JA(d,f,p,v){return-1===p?function Zy(d,f){return 11&d.type?Pl(d,f):4&d.type?Yy(d,f):null}(f,d):-2===p?function $P(d,f,p){return p===zy?Pl(f,d):p===qy?Yy(f,d):p===Rw?rM(f,d):void 0}(d,f,v):Tt(d,d[1],p,f)}function QA(d,f,p,v){const y=f[19].queries[v];if(null===y.matches){const C=d.data,D=p.matches,P=[];for(let F=0;F<D.length;F+=2){const B=D[F];P.push(B<0?null:JA(f,C[B],D[F+1],p.metadata.read))}y.matches=P}return y.matches}function aM(d,f,p,v){const y=d.queries.getByIndex(p),C=y.matches;if(null!==C){const D=QA(d,f,y,p);for(let P=0;P<C.length;P+=2){const F=C[P];if(F>0)v.push(D[P/2]);else{const B=C[P+1],G=f[-F];for(let Z=10;Z<G.length;Z++){const se=G[Z];se[17]===se[3]&&aM(se[1],se,B,v)}if(null!==G[9]){const Z=G[9];for(let se=0;se<Z.length;se++){const ge=Z[se];aM(ge[1],ge,B,v)}}}}}return v}function XA(d){const f=He(),p=Xn(),v=DC();Rg(v+1);const y=cM(p,v);if(d.dirty&&oh(f)===(2==(2&y.metadata.flags))){if(null===y.matches)d.reset([]);else{const C=y.crossesNgTemplate?aM(p,f,v,[]):QA(p,f,y,v);d.reset(C,IP),d.notifyOnChanges()}return!0}return!1}function eT(d,f,p){const v=Xn();v.firstCreatePass&&(rT(v,new gs(d,f,p),-1),2==(2&f)&&(v.staticViewQueries=!0)),iT(v,He(),f)}function tT(d,f,p,v){const y=Xn();if(y.firstCreatePass){const C=Ji();rT(y,new gs(f,p,v),C.index),function ZP(d,f){const p=d.contentQueries||(d.contentQueries=[]);f!==(p.length?p[p.length-1]:-1)&&p.push(d.queries.length-1,f)}(y,d),2==(2&p)&&(y.staticContentQueries=!0)}iT(y,He(),p)}function lM(){return function nT(d,f){return d[19].queries[f].queryList}(He(),DC())}function iT(d,f,p){const v=new Wy(4==(4&p));Td(d,f,v,v.destroy),null===f[19]&&(f[19]=new sM),f[19].queries.push(new $y(v))}function rT(d,f,p){null===d.queries&&(d.queries=new Pw),d.queries.track(new vc(f,p))}function cM(d,f){return d.queries.getByIndex(f)}function fv(...d){}const lf=new yr("Application Initializer");let zp=(()=>{class d{constructor(p){this.appInits=p,this.resolve=fv,this.reject=fv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((v,y)=>{this.resolve=v,this.reject=y})}runInitializers(){if(this.initialized)return;const p=[],v=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let y=0;y<this.appInits.length;y++){const C=this.appInits[y]();if(Ym(C))p.push(C);else if(Jb(C)){const D=new Promise((P,F)=>{C.subscribe({complete:P,error:F})});p.push(D)}}Promise.all(p).then(()=>{v()}).catch(y=>{this.reject(y)}),0===p.length&&v(),this.initialized=!0}}return d.\u0275fac=function(p){return new(p||d)(Br(lf,8))},d.\u0275prov=nn({token:d,factory:d.\u0275fac}),d})();const bM=new yr("AppId"),pv={provide:bM,useFactory:function nk(){return`${Bw()}${Bw()}${Bw()}`},deps:[]};function Bw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yT=new yr("Platform Initializer"),e0=new yr("Platform ID"),wM=new yr("appBootstrapListener");let xM=(()=>{class d{log(p){console.log(p)}warn(p){console.warn(p)}}return d.\u0275fac=function(p){return new(p||d)},d.\u0275prov=nn({token:d,factory:d.\u0275fac}),d})();const gv=new yr("LocaleId"),Vw=new yr("DefaultCurrencyCode");class ik{constructor(f,p){this.ngModuleFactory=f,this.componentFactories=p}}let CM=(()=>{class d{compileModuleSync(p){return new ZS(p)}compileModuleAsync(p){return Promise.resolve(this.compileModuleSync(p))}compileModuleAndAllComponentsSync(p){const v=this.compileModuleSync(p),C=ls(ho(p).declarations).reduce((D,P)=>{const F=ws(P);return F&&D.push(new Mw(F)),D},[]);return new ik(v,C)}compileModuleAndAllComponentsAsync(p){return Promise.resolve(this.compileModuleAndAllComponentsSync(p))}clearCache(){}clearCacheFor(p){}getModuleId(p){}}return d.\u0275fac=function(p){return new(p||d)},d.\u0275prov=nn({token:d,factory:d.\u0275fac}),d})();const SM=(()=>Promise.resolve(0))();function zw(d){"undefined"==typeof Zone?SM.then(()=>{d&&d.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",d)}class sl{constructor({enableLongStackTrace:f=!1,shouldCoalesceEventChangeDetection:p=!1,shouldCoalesceRunChangeDetection:v=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fu(!1),this.onMicrotaskEmpty=new Fu(!1),this.onStable=new Fu(!1),this.onError=new Fu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const y=this;y._nesting=0,y._outer=y._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(y._inner=y._inner.fork(new Zone.TaskTrackingZoneSpec)),f&&Zone.longStackTraceZoneSpec&&(y._inner=y._inner.fork(Zone.longStackTraceZoneSpec)),y.shouldCoalesceEventChangeDetection=!v&&p,y.shouldCoalesceRunChangeDetection=v,y.lastRequestAnimationFrameId=-1,y.nativeRequestAnimationFrame=function wT(){let d=Zn.requestAnimationFrame,f=Zn.cancelAnimationFrame;if("undefined"!=typeof Zone&&d&&f){const p=d[Zone.__symbol__("OriginalDelegate")];p&&(d=p);const v=f[Zone.__symbol__("OriginalDelegate")];v&&(f=v)}return{nativeRequestAnimationFrame:d,nativeCancelAnimationFrame:f}}().nativeRequestAnimationFrame,function sk(d){const f=()=>{!function rk(d){d.isCheckStableRunning||-1!==d.lastRequestAnimationFrameId||(d.lastRequestAnimationFrameId=d.nativeRequestAnimationFrame.call(Zn,()=>{d.fakeTopEventTask||(d.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{d.lastRequestAnimationFrameId=-1,jw(d),d.isCheckStableRunning=!0,EM(d),d.isCheckStableRunning=!1},void 0,()=>{},()=>{})),d.fakeTopEventTask.invoke()}),jw(d))}(d)};d._inner=d._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(p,v,y,C,D,P)=>{try{return t0(d),p.invokeTask(y,C,D,P)}finally{(d.shouldCoalesceEventChangeDetection&&"eventTask"===C.type||d.shouldCoalesceRunChangeDetection)&&f(),xT(d)}},onInvoke:(p,v,y,C,D,P,F)=>{try{return t0(d),p.invoke(y,C,D,P,F)}finally{d.shouldCoalesceRunChangeDetection&&f(),xT(d)}},onHasTask:(p,v,y,C)=>{p.hasTask(y,C),v===y&&("microTask"==C.change?(d._hasPendingMicrotasks=C.microTask,jw(d),EM(d)):"macroTask"==C.change&&(d.hasPendingMacrotasks=C.macroTask))},onHandleError:(p,v,y,C)=>(p.handleError(y,C),d.runOutsideAngular(()=>d.onError.emit(C)),!1)})}(y)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!sl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(sl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(f,p,v){return this._inner.run(f,p,v)}runTask(f,p,v,y){const C=this._inner,D=C.scheduleEventTask("NgZoneEvent: "+y,f,MM,fv,fv);try{return C.runTask(D,p,v)}finally{C.cancelTask(D)}}runGuarded(f,p,v){return this._inner.runGuarded(f,p,v)}runOutsideAngular(f){return this._outer.run(f)}}const MM={};function EM(d){if(0==d._nesting&&!d.hasPendingMicrotasks&&!d.isStable)try{d._nesting++,d.onMicrotaskEmpty.emit(null)}finally{if(d._nesting--,!d.hasPendingMicrotasks)try{d.runOutsideAngular(()=>d.onStable.emit(null))}finally{d.isStable=!0}}}function jw(d){d.hasPendingMicrotasks=!!(d._hasPendingMicrotasks||(d.shouldCoalesceEventChangeDetection||d.shouldCoalesceRunChangeDetection)&&-1!==d.lastRequestAnimationFrameId)}function t0(d){d._nesting++,d.isStable&&(d.isStable=!1,d.onUnstable.emit(null))}function xT(d){d._nesting--,EM(d)}class DM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fu,this.onMicrotaskEmpty=new Fu,this.onStable=new Fu,this.onError=new Fu}run(f,p,v){return f.apply(p,v)}runGuarded(f,p,v){return f.apply(p,v)}runOutsideAngular(f){return f()}runTask(f,p,v,y){return f.apply(p,v)}}let CT=(()=>{class d{constructor(p){this._ngZone=p,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),p.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{sl.assertNotInAngularZone(),zw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())zw(()=>{for(;0!==this._callbacks.length;){let p=this._callbacks.pop();clearTimeout(p.timeoutId),p.doneCb(this._didWork)}this._didWork=!1});else{let p=this.getPendingTasks();this._callbacks=this._callbacks.filter(v=>!v.updateCb||!v.updateCb(p)||(clearTimeout(v.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(p=>({source:p.source,creationLocation:p.creationLocation,data:p.data})):[]}addCallback(p,v,y){let C=-1;v&&v>0&&(C=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==C),p(this._didWork,this.getPendingTasks())},v)),this._callbacks.push({doneCb:p,timeoutId:C,updateCb:y})}whenStable(p,v,y){if(y&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(p,v,y),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(p,v,y){return[]}}return d.\u0275fac=function(p){return new(p||d)(Br(sl))},d.\u0275prov=nn({token:d,factory:d.\u0275fac}),d})(),AM=(()=>{class d{constructor(){this._applications=new Map,TM.addToWindow(this)}registerApplication(p,v){this._applications.set(p,v)}unregisterApplication(p){this._applications.delete(p)}unregisterAllApplications(){this._applications.clear()}getTestability(p){return this._applications.get(p)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(p,v=!0){return TM.findTestabilityInTree(this,p,v)}}return d.\u0275fac=function(p){return new(p||d)},d.\u0275prov=nn({token:d,factory:d.\u0275fac}),d})();class ST{addToWindow(f){}findTestabilityInTree(f,p,v){return null}}function ok(d){TM=d}let yc,TM=new ST;const cf=new yr("AllowMultipleToken");class lk{constructor(f,p){this.name=f,this.token=p}}function MT(d,f,p=[]){const v=`Platform: ${f}`,y=new yr(v);return(C=[])=>{let D=mv();if(!D||D.injector.get(cf,!1))if(d)d(p.concat(C).concat({provide:y,useValue:!0}));else{const P=p.concat(C).concat({provide:y,useValue:!0},{provide:Ep,useValue:"platform"});!function ck(d){if(yc&&!yc.destroyed&&!yc.injector.get(cf,!1))throw new Be(400,"");yc=d.get(ET);const f=d.get(yT,null);f&&f.forEach(p=>p())}(ei.create({providers:P,name:v}))}return function uk(d){const f=mv();if(!f)throw new Be(401,"");return f}()}}function mv(){return yc&&!yc.destroyed?yc:null}let ET=(()=>{class d{constructor(p){this._injector=p,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(p,v){const P=function n0(d,f){let p;return p="noop"===d?new DM:("zone.js"===d?void 0:d)||new sl({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==f?void 0:f.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==f?void 0:f.ngZoneRunCoalescing)}),p}(v?v.ngZone:void 0,{ngZoneEventCoalescing:v&&v.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:v&&v.ngZoneRunCoalescing||!1}),F=[{provide:sl,useValue:P}];return P.run(()=>{const B=ei.create({providers:F,parent:this.injector,name:p.moduleType.name}),G=p.create(B),Z=G.injector.get(fd,null);if(!Z)throw new Be(402,"");return P.runOutsideAngular(()=>{const se=P.onError.subscribe({next:ge=>{Z.handleError(ge)}});G.onDestroy(()=>{qw(this._modules,G),se.unsubscribe()})}),function r0(d,f,p){try{const v=p();return Ym(v)?v.catch(y=>{throw f.runOutsideAngular(()=>d.handleError(y)),y}):v}catch(v){throw f.runOutsideAngular(()=>d.handleError(v)),v}}(Z,P,()=>{const se=G.injector.get(zp);return se.runInitializers(),se.donePromise.then(()=>(function Fy(d){Nt(d,"Expected localeId to be defined"),"string"==typeof d&&(ES=d.toLowerCase().replace(/_/g,"-"))}(G.injector.get(gv,ky)||ky),this._moduleDoBootstrap(G),G))})})}bootstrapModule(p,v=[]){const y=DT({},v);return function IM(d,f,p){const v=new ZS(p);return Promise.resolve(v)}(0,0,p).then(C=>this.bootstrapModuleFactory(C,y))}_moduleDoBootstrap(p){const v=p.injector.get(Wp);if(p._bootstrapComponents.length>0)p._bootstrapComponents.forEach(y=>v.bootstrap(y));else{if(!p.instance.ngDoBootstrap)throw new Be(403,"");p.instance.ngDoBootstrap(v)}this._modules.push(p)}onDestroy(p){this._destroyListeners.push(p)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Be(404,"");this._modules.slice().forEach(p=>p.destroy()),this._destroyListeners.forEach(p=>p()),this._destroyed=!0}get destroyed(){return this._destroyed}}return d.\u0275fac=function(p){return new(p||d)(Br(ei))},d.\u0275prov=nn({token:d,factory:d.\u0275fac}),d})();function DT(d,f){return Array.isArray(f)?f.reduce(DT,d):Object.assign(Object.assign({},d),f)}let Wp=(()=>{class d{constructor(p,v,y,C,D){this._zone=p,this._injector=v,this._exceptionHandler=y,this._componentFactoryResolver=C,this._initStatus=D,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const P=new Ve.y(B=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{B.next(this._stable),B.complete()})}),F=new Ve.y(B=>{let G;this._zone.runOutsideAngular(()=>{G=this._zone.onStable.subscribe(()=>{sl.assertNotInAngularZone(),zw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,B.next(!0))})})});const Z=this._zone.onUnstable.subscribe(()=>{sl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{B.next(!1)}))});return()=>{G.unsubscribe(),Z.unsubscribe()}});this.isStable=(0,Te.T)(P,F.pipe((0,je.B)()))}bootstrap(p,v){if(!this._initStatus.done)throw new Be(405,"");let y;y=p instanceof qS?p:this._componentFactoryResolver.resolveComponentFactory(p),this.componentTypes.push(y.componentType);const C=function ak(d){return d.isBoundToModule}(y)?void 0:this._injector.get(nf),P=y.create(ei.NULL,[],v||y.selector,C),F=P.location.nativeElement,B=P.injector.get(CT,null),G=B&&P.injector.get(AM);return B&&G&&G.registerApplication(F,B),P.onDestroy(()=>{this.detachView(P.hostView),qw(this.components,P),G&&G.unregisterApplication(F)}),this._loadComponent(P),P}tick(){if(this._runningTick)throw new Be(101,"");try{this._runningTick=!0;for(let p of this._views)p.detectChanges()}catch(p){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(p))}finally{this._runningTick=!1}}attachView(p){const v=p;this._views.push(v),v.attachToAppRef(this)}detachView(p){const v=p;qw(this._views,v),v.detachFromAppRef()}_loadComponent(p){this.attachView(p.hostView),this.tick(),this.components.push(p),this._injector.get(wM,[]).concat(this._bootstrapListeners).forEach(y=>y(p))}ngOnDestroy(){this._views.slice().forEach(p=>p.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return d.\u0275fac=function(p){return new(p||d)(Br(sl),Br(ei),Br(fd),Br(Hp),Br(zp))},d.\u0275prov=nn({token:d,factory:d.\u0275fac}),d})();function qw(d,f){const p=d.indexOf(f);p>-1&&d.splice(p,1)}let Yw=!0,ol=!1;function TT(){return ol=!0,Yw}function IT(){if(ol)throw new Error("Cannot enable prod mode after platform setup.");Yw=!1}let hk=(()=>{class d{}return d.__NG_ELEMENT_ID__=fk,d})();function fk(d){return function pk(d,f,p){if(Cg(d)&&!p){const v=fo(d.index,f);return new jy(v,v)}return 47&d.type?new jy(f[16],f):null}(Ji(),He(),16==(16&d))}class LT{constructor(){}supports(f){return Ip(f)}create(f){return new wk(f)}}const bk=(d,f)=>f;class wk{constructor(f){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=f||bk}forEachItem(f){let p;for(p=this._itHead;null!==p;p=p._next)f(p)}forEachOperation(f){let p=this._itHead,v=this._removalsHead,y=0,C=null;for(;p||v;){const D=!v||p&&p.currentIndex<BT(v,y,C)?p:v,P=BT(D,y,C),F=D.currentIndex;if(D===v)y--,v=v._nextRemoved;else if(p=p._next,null==D.previousIndex)y++;else{C||(C=[]);const B=P-y,G=F-y;if(B!=G){for(let se=0;se<B;se++){const ge=se<C.length?C[se]:C[se]=0,Oe=ge+se;G<=Oe&&Oe<B&&(C[se]=ge+1)}C[D.previousIndex]=G-B}}P!==F&&f(D,P,F)}}forEachPreviousItem(f){let p;for(p=this._previousItHead;null!==p;p=p._nextPrevious)f(p)}forEachAddedItem(f){let p;for(p=this._additionsHead;null!==p;p=p._nextAdded)f(p)}forEachMovedItem(f){let p;for(p=this._movesHead;null!==p;p=p._nextMoved)f(p)}forEachRemovedItem(f){let p;for(p=this._removalsHead;null!==p;p=p._nextRemoved)f(p)}forEachIdentityChange(f){let p;for(p=this._identityChangesHead;null!==p;p=p._nextIdentityChange)f(p)}diff(f){if(null==f&&(f=[]),!Ip(f))throw new Be(900,"");return this.check(f)?this:null}onDestroy(){}check(f){this._reset();let y,C,D,p=this._itHead,v=!1;if(Array.isArray(f)){this.length=f.length;for(let P=0;P<this.length;P++)C=f[P],D=this._trackByFn(P,C),null!==p&&Object.is(p.trackById,D)?(v&&(p=this._verifyReinsertion(p,C,D,P)),Object.is(p.item,C)||this._addIdentityChange(p,C)):(p=this._mismatch(p,C,D,P),v=!0),p=p._next}else y=0,function Hm(d,f){if(Array.isArray(d))for(let p=0;p<d.length;p++)f(d[p]);else{const p=d[oc()]();let v;for(;!(v=p.next()).done;)f(v.value)}}(f,P=>{D=this._trackByFn(y,P),null!==p&&Object.is(p.trackById,D)?(v&&(p=this._verifyReinsertion(p,P,D,y)),Object.is(p.item,P)||this._addIdentityChange(p,P)):(p=this._mismatch(p,P,D,y),v=!0),p=p._next,y++}),this.length=y;return this._truncate(p),this.collection=f,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let f;for(f=this._previousItHead=this._itHead;null!==f;f=f._next)f._nextPrevious=f._next;for(f=this._additionsHead;null!==f;f=f._nextAdded)f.previousIndex=f.currentIndex;for(this._additionsHead=this._additionsTail=null,f=this._movesHead;null!==f;f=f._nextMoved)f.previousIndex=f.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(f,p,v,y){let C;return null===f?C=this._itTail:(C=f._prev,this._remove(f)),null!==(f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(v,null))?(Object.is(f.item,p)||this._addIdentityChange(f,p),this._reinsertAfter(f,C,y)):null!==(f=null===this._linkedRecords?null:this._linkedRecords.get(v,y))?(Object.is(f.item,p)||this._addIdentityChange(f,p),this._moveAfter(f,C,y)):f=this._addAfter(new xk(p,v),C,y),f}_verifyReinsertion(f,p,v,y){let C=null===this._unlinkedRecords?null:this._unlinkedRecords.get(v,null);return null!==C?f=this._reinsertAfter(C,f._prev,y):f.currentIndex!=y&&(f.currentIndex=y,this._addToMoves(f,y)),f}_truncate(f){for(;null!==f;){const p=f._next;this._addToRemovals(this._unlink(f)),f=p}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(f,p,v){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(f);const y=f._prevRemoved,C=f._nextRemoved;return null===y?this._removalsHead=C:y._nextRemoved=C,null===C?this._removalsTail=y:C._prevRemoved=y,this._insertAfter(f,p,v),this._addToMoves(f,v),f}_moveAfter(f,p,v){return this._unlink(f),this._insertAfter(f,p,v),this._addToMoves(f,v),f}_addAfter(f,p,v){return this._insertAfter(f,p,v),this._additionsTail=null===this._additionsTail?this._additionsHead=f:this._additionsTail._nextAdded=f,f}_insertAfter(f,p,v){const y=null===p?this._itHead:p._next;return f._next=y,f._prev=p,null===y?this._itTail=f:y._prev=f,null===p?this._itHead=f:p._next=f,null===this._linkedRecords&&(this._linkedRecords=new NT),this._linkedRecords.put(f),f.currentIndex=v,f}_remove(f){return this._addToRemovals(this._unlink(f))}_unlink(f){null!==this._linkedRecords&&this._linkedRecords.remove(f);const p=f._prev,v=f._next;return null===p?this._itHead=v:p._next=v,null===v?this._itTail=p:v._prev=p,f}_addToMoves(f,p){return f.previousIndex===p||(this._movesTail=null===this._movesTail?this._movesHead=f:this._movesTail._nextMoved=f),f}_addToRemovals(f){return null===this._unlinkedRecords&&(this._unlinkedRecords=new NT),this._unlinkedRecords.put(f),f.currentIndex=null,f._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=f,f._prevRemoved=null):(f._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=f),f}_addIdentityChange(f,p){return f.item=p,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=f:this._identityChangesTail._nextIdentityChange=f,f}}class xk{constructor(f,p){this.item=f,this.trackById=p,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ck{constructor(){this._head=null,this._tail=null}add(f){null===this._head?(this._head=this._tail=f,f._nextDup=null,f._prevDup=null):(this._tail._nextDup=f,f._prevDup=this._tail,f._nextDup=null,this._tail=f)}get(f,p){let v;for(v=this._head;null!==v;v=v._nextDup)if((null===p||p<=v.currentIndex)&&Object.is(v.trackById,f))return v;return null}remove(f){const p=f._prevDup,v=f._nextDup;return null===p?this._head=v:p._nextDup=v,null===v?this._tail=p:v._prevDup=p,null===this._head}}class NT{constructor(){this.map=new Map}put(f){const p=f.trackById;let v=this.map.get(p);v||(v=new Ck,this.map.set(p,v)),v.add(f)}get(f,p){const y=this.map.get(f);return y?y.get(f,p):null}remove(f){const p=f.trackById;return this.map.get(p).remove(f)&&this.map.delete(p),f}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function BT(d,f,p){const v=d.previousIndex;if(null===v)return v;let y=0;return p&&v<p.length&&(y=p[v]),v+f+y}class LM{constructor(){}supports(f){return f instanceof Map||Rp(f)}create(){return new Sk}}class Sk{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(f){let p;for(p=this._mapHead;null!==p;p=p._next)f(p)}forEachPreviousItem(f){let p;for(p=this._previousMapHead;null!==p;p=p._nextPrevious)f(p)}forEachChangedItem(f){let p;for(p=this._changesHead;null!==p;p=p._nextChanged)f(p)}forEachAddedItem(f){let p;for(p=this._additionsHead;null!==p;p=p._nextAdded)f(p)}forEachRemovedItem(f){let p;for(p=this._removalsHead;null!==p;p=p._nextRemoved)f(p)}diff(f){if(f){if(!(f instanceof Map||Rp(f)))throw new Be(900,"")}else f=new Map;return this.check(f)?this:null}onDestroy(){}check(f){this._reset();let p=this._mapHead;if(this._appendAfter=null,this._forEach(f,(v,y)=>{if(p&&p.key===y)this._maybeAddToChanges(p,v),this._appendAfter=p,p=p._next;else{const C=this._getOrCreateRecordForKey(y,v);p=this._insertBeforeOrAppend(p,C)}}),p){p._prev&&(p._prev._next=null),this._removalsHead=p;for(let v=p;null!==v;v=v._nextRemoved)v===this._mapHead&&(this._mapHead=null),this._records.delete(v.key),v._nextRemoved=v._next,v.previousValue=v.currentValue,v.currentValue=null,v._prev=null,v._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(f,p){if(f){const v=f._prev;return p._next=f,p._prev=v,f._prev=p,v&&(v._next=p),f===this._mapHead&&(this._mapHead=p),this._appendAfter=f,f}return this._appendAfter?(this._appendAfter._next=p,p._prev=this._appendAfter):this._mapHead=p,this._appendAfter=p,null}_getOrCreateRecordForKey(f,p){if(this._records.has(f)){const y=this._records.get(f);this._maybeAddToChanges(y,p);const C=y._prev,D=y._next;return C&&(C._next=D),D&&(D._prev=C),y._next=null,y._prev=null,y}const v=new Mk(f);return this._records.set(f,v),v.currentValue=p,this._addToAdditions(v),v}_reset(){if(this.isDirty){let f;for(this._previousMapHead=this._mapHead,f=this._previousMapHead;null!==f;f=f._next)f._nextPrevious=f._next;for(f=this._changesHead;null!==f;f=f._nextChanged)f.previousValue=f.currentValue;for(f=this._additionsHead;null!=f;f=f._nextAdded)f.previousValue=f.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(f,p){Object.is(p,f.currentValue)||(f.previousValue=f.currentValue,f.currentValue=p,this._addToChanges(f))}_addToAdditions(f){null===this._additionsHead?this._additionsHead=this._additionsTail=f:(this._additionsTail._nextAdded=f,this._additionsTail=f)}_addToChanges(f){null===this._changesHead?this._changesHead=this._changesTail=f:(this._changesTail._nextChanged=f,this._changesTail=f)}_forEach(f,p){f instanceof Map?f.forEach(p):Object.keys(f).forEach(v=>p(f[v],v))}}class Mk{constructor(f){this.key=f,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function VT(){return new Qw([new LT])}let Qw=(()=>{class d{constructor(p){this.factories=p}static create(p,v){if(null!=v){const y=v.factories.slice();p=p.concat(y)}return new d(p)}static extend(p){return{provide:d,useFactory:v=>d.create(p,v||VT()),deps:[[d,new yl,new Pi]]}}find(p){const v=this.factories.find(y=>y.supports(p));if(null!=v)return v;throw new Be(901,"")}}return d.\u0275prov=nn({token:d,providedIn:"root",factory:VT}),d})();function NM(){return new BM([new LM])}let BM=(()=>{class d{constructor(p){this.factories=p}static create(p,v){if(v){const y=v.factories.slice();p=p.concat(y)}return new d(p)}static extend(p){return{provide:d,useFactory:v=>d.create(p,v||NM()),deps:[[d,new yl,new Pi]]}}find(p){const v=this.factories.find(C=>C.supports(p));if(v)return v;throw new Be(901,"")}}return d.\u0275prov=nn({token:d,providedIn:"root",factory:NM}),d})();const UT=[new LM],HT=new Qw([new LT]),zT=new BM(UT),Ek=MT(null,"core",[{provide:e0,useValue:"unknown"},{provide:ET,deps:[ei]},{provide:AM,deps:[]},{provide:xM,deps:[]}]),VM=[{provide:Wp,useClass:Wp,deps:[sl,ei,fd,Hp,zp]},{provide:Oi,deps:[sl],useFactory:function Ik(d){let f=[];return d.onStable.subscribe(()=>{for(;f.length;)f.pop()()}),function(p){f.push(p)}}},{provide:zp,useClass:zp,deps:[[new Pi,lf]]},{provide:CM,useClass:CM,deps:[]},pv,{provide:Qw,useFactory:function Dk(){return HT},deps:[]},{provide:BM,useFactory:function Ak(){return zT},deps:[]},{provide:gv,useFactory:function jT(d){return d||function Tk(){return"undefined"!=typeof $localize&&$localize.locale||ky}()},deps:[[new Vi(gv),new Pi,new yl]]},{provide:Vw,useValue:"USD"}];let Rk=(()=>{class d{constructor(p){}}return d.\u0275fac=function(p){return new(p||d)(Br(Wp))},d.\u0275mod=Vs({type:d}),d.\u0275inj=Yr({providers:VM}),d})()}},tn=>{tn(tn.s=580)}]);